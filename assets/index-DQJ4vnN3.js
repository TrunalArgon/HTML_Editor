var eB=Object.defineProperty;var tB=(s,t,e)=>t in s?eB(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var p=(s,t,e)=>tB(s,typeof t!="symbol"?t+"":t,e);function iB(s,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in s)){const r=Object.getOwnPropertyDescriptor(i,n);r&&Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();function Gh(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var xw={exports:{}},mu={},yw={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zk;function nB(){if(Zk)return Ze;Zk=1;var s=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;function m(M){return M===null||typeof M!="object"?null:(M=f&&M[f]||M["@@iterator"],typeof M=="function"?M:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,v={};function k(M,J,fe){this.props=M,this.context=J,this.refs=v,this.updater=fe||w}k.prototype.isReactComponent={},k.prototype.setState=function(M,J){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,J,"setState")},k.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function C(){}C.prototype=k.prototype;function P(M,J,fe){this.props=M,this.context=J,this.refs=v,this.updater=fe||w}var V=P.prototype=new C;V.constructor=P,O(V,k.prototype),V.isPureReactComponent=!0;var Q=Array.isArray,D=Object.prototype.hasOwnProperty,q={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function _(M,J,fe){var W,B={},K=null,me=null;if(J!=null)for(W in J.ref!==void 0&&(me=J.ref),J.key!==void 0&&(K=""+J.key),J)D.call(J,W)&&!$.hasOwnProperty(W)&&(B[W]=J[W]);var ge=arguments.length-2;if(ge===1)B.children=fe;else if(1<ge){for(var pe=Array(ge),de=0;de<ge;de++)pe[de]=arguments[de+2];B.children=pe}if(M&&M.defaultProps)for(W in ge=M.defaultProps,ge)B[W]===void 0&&(B[W]=ge[W]);return{$$typeof:s,type:M,key:K,ref:me,props:B,_owner:q.current}}function R(M,J){return{$$typeof:s,type:M.type,key:J,ref:M.ref,props:M.props,_owner:M._owner}}function U(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function Y(M){var J={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(fe){return J[fe]})}var X=/\/+/g;function j(M,J){return typeof M=="object"&&M!==null&&M.key!=null?Y(""+M.key):J.toString(36)}function oe(M,J,fe,W,B){var K=typeof M;(K==="undefined"||K==="boolean")&&(M=null);var me=!1;if(M===null)me=!0;else switch(K){case"string":case"number":me=!0;break;case"object":switch(M.$$typeof){case s:case t:me=!0}}if(me)return me=M,B=B(me),M=W===""?"."+j(me,0):W,Q(B)?(fe="",M!=null&&(fe=M.replace(X,"$&/")+"/"),oe(B,J,fe,"",function(de){return de})):B!=null&&(U(B)&&(B=R(B,fe+(!B.key||me&&me.key===B.key?"":(""+B.key).replace(X,"$&/")+"/")+M)),J.push(B)),1;if(me=0,W=W===""?".":W+":",Q(M))for(var ge=0;ge<M.length;ge++){K=M[ge];var pe=W+j(K,ge);me+=oe(K,J,fe,pe,B)}else if(pe=m(M),typeof pe=="function")for(M=pe.call(M),ge=0;!(K=M.next()).done;)K=K.value,pe=W+j(K,ge++),me+=oe(K,J,fe,pe,B);else if(K==="object")throw J=String(M),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return me}function xe(M,J,fe){if(M==null)return M;var W=[],B=0;return oe(M,W,"","",function(K){return J.call(fe,K,B++)}),W}function be(M){if(M._status===-1){var J=M._result;J=J(),J.then(function(fe){(M._status===0||M._status===-1)&&(M._status=1,M._result=fe)},function(fe){(M._status===0||M._status===-1)&&(M._status=2,M._result=fe)}),M._status===-1&&(M._status=0,M._result=J)}if(M._status===1)return M._result.default;throw M._result}var Se={current:null},H={transition:null},ee={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:H,ReactCurrentOwner:q};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:xe,forEach:function(M,J,fe){xe(M,function(){J.apply(this,arguments)},fe)},count:function(M){var J=0;return xe(M,function(){J++}),J},toArray:function(M){return xe(M,function(J){return J})||[]},only:function(M){if(!U(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ze.Component=k,Ze.Fragment=e,Ze.Profiler=n,Ze.PureComponent=P,Ze.StrictMode=i,Ze.Suspense=a,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Ze.act=ne,Ze.cloneElement=function(M,J,fe){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var W=O({},M.props),B=M.key,K=M.ref,me=M._owner;if(J!=null){if(J.ref!==void 0&&(K=J.ref,me=q.current),J.key!==void 0&&(B=""+J.key),M.type&&M.type.defaultProps)var ge=M.type.defaultProps;for(pe in J)D.call(J,pe)&&!$.hasOwnProperty(pe)&&(W[pe]=J[pe]===void 0&&ge!==void 0?ge[pe]:J[pe])}var pe=arguments.length-2;if(pe===1)W.children=fe;else if(1<pe){ge=Array(pe);for(var de=0;de<pe;de++)ge[de]=arguments[de+2];W.children=ge}return{$$typeof:s,type:M.type,key:B,ref:K,props:W,_owner:me}},Ze.createContext=function(M){return M={$$typeof:o,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:r,_context:M},M.Consumer=M},Ze.createElement=_,Ze.createFactory=function(M){var J=_.bind(null,M);return J.type=M,J},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(M){return{$$typeof:l,render:M}},Ze.isValidElement=U,Ze.lazy=function(M){return{$$typeof:h,_payload:{_status:-1,_result:M},_init:be}},Ze.memo=function(M,J){return{$$typeof:c,type:M,compare:J===void 0?null:J}},Ze.startTransition=function(M){var J=H.transition;H.transition={};try{M()}finally{H.transition=J}},Ze.unstable_act=ne,Ze.useCallback=function(M,J){return Se.current.useCallback(M,J)},Ze.useContext=function(M){return Se.current.useContext(M)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(M){return Se.current.useDeferredValue(M)},Ze.useEffect=function(M,J){return Se.current.useEffect(M,J)},Ze.useId=function(){return Se.current.useId()},Ze.useImperativeHandle=function(M,J,fe){return Se.current.useImperativeHandle(M,J,fe)},Ze.useInsertionEffect=function(M,J){return Se.current.useInsertionEffect(M,J)},Ze.useLayoutEffect=function(M,J){return Se.current.useLayoutEffect(M,J)},Ze.useMemo=function(M,J){return Se.current.useMemo(M,J)},Ze.useReducer=function(M,J,fe){return Se.current.useReducer(M,J,fe)},Ze.useRef=function(M){return Se.current.useRef(M)},Ze.useState=function(M){return Se.current.useState(M)},Ze.useSyncExternalStore=function(M,J,fe){return Se.current.useSyncExternalStore(M,J,fe)},Ze.useTransition=function(){return Se.current.useTransition()},Ze.version="18.3.1",Ze}var Hk;function lx(){return Hk||(Hk=1,yw.exports=nB()),yw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qk;function sB(){if(qk)return mu;qk=1;var s=lx(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function o(l,a,c){var h,f={},m=null,w=null;c!==void 0&&(m=""+c),a.key!==void 0&&(m=""+a.key),a.ref!==void 0&&(w=a.ref);for(h in a)i.call(a,h)&&!r.hasOwnProperty(h)&&(f[h]=a[h]);if(l&&l.defaultProps)for(h in a=l.defaultProps,a)f[h]===void 0&&(f[h]=a[h]);return{$$typeof:t,type:l,key:m,ref:w,props:f,_owner:n.current}}return mu.Fragment=e,mu.jsx=o,mu.jsxs=o,mu}var Xk;function rB(){return Xk||(Xk=1,xw.exports=sB()),xw.exports}var cl=rB(),fn=lx();const yo=Gh(fn);var Af={},vw={exports:{}},cn={},_w={exports:{}},kw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jk;function oB(){return jk||(jk=1,function(s){function t(H,ee){var ne=H.length;H.push(ee);e:for(;0<ne;){var M=ne-1>>>1,J=H[M];if(0<n(J,ee))H[M]=ee,H[ne]=J,ne=M;else break e}}function e(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var ee=H[0],ne=H.pop();if(ne!==ee){H[0]=ne;e:for(var M=0,J=H.length,fe=J>>>1;M<fe;){var W=2*(M+1)-1,B=H[W],K=W+1,me=H[K];if(0>n(B,ne))K<J&&0>n(me,B)?(H[M]=me,H[K]=ne,M=K):(H[M]=B,H[W]=ne,M=W);else if(K<J&&0>n(me,ne))H[M]=me,H[K]=ne,M=K;else break e}}return ee}function n(H,ee){var ne=H.sortIndex-ee.sortIndex;return ne!==0?ne:H.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();s.unstable_now=function(){return o.now()-l}}var a=[],c=[],h=1,f=null,m=3,w=!1,O=!1,v=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(H){for(var ee=e(c);ee!==null;){if(ee.callback===null)i(c);else if(ee.startTime<=H)i(c),ee.sortIndex=ee.expirationTime,t(a,ee);else break;ee=e(c)}}function Q(H){if(v=!1,V(H),!O)if(e(a)!==null)O=!0,be(D);else{var ee=e(c);ee!==null&&Se(Q,ee.startTime-H)}}function D(H,ee){O=!1,v&&(v=!1,C(_),_=-1),w=!0;var ne=m;try{for(V(ee),f=e(a);f!==null&&(!(f.expirationTime>ee)||H&&!Y());){var M=f.callback;if(typeof M=="function"){f.callback=null,m=f.priorityLevel;var J=M(f.expirationTime<=ee);ee=s.unstable_now(),typeof J=="function"?f.callback=J:f===e(a)&&i(a),V(ee)}else i(a);f=e(a)}if(f!==null)var fe=!0;else{var W=e(c);W!==null&&Se(Q,W.startTime-ee),fe=!1}return fe}finally{f=null,m=ne,w=!1}}var q=!1,$=null,_=-1,R=5,U=-1;function Y(){return!(s.unstable_now()-U<R)}function X(){if($!==null){var H=s.unstable_now();U=H;var ee=!0;try{ee=$(!0,H)}finally{ee?j():(q=!1,$=null)}}else q=!1}var j;if(typeof P=="function")j=function(){P(X)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,xe=oe.port2;oe.port1.onmessage=X,j=function(){xe.postMessage(null)}}else j=function(){k(X,0)};function be(H){$=H,q||(q=!0,j())}function Se(H,ee){_=k(function(){H(s.unstable_now())},ee)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(H){H.callback=null},s.unstable_continueExecution=function(){O||w||(O=!0,be(D))},s.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<H?Math.floor(1e3/H):5},s.unstable_getCurrentPriorityLevel=function(){return m},s.unstable_getFirstCallbackNode=function(){return e(a)},s.unstable_next=function(H){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var ne=m;m=ee;try{return H()}finally{m=ne}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ne=m;m=H;try{return ee()}finally{m=ne}},s.unstable_scheduleCallback=function(H,ee,ne){var M=s.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?M+ne:M):ne=M,H){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ne+J,H={id:h++,callback:ee,priorityLevel:H,startTime:ne,expirationTime:J,sortIndex:-1},ne>M?(H.sortIndex=ne,t(c,H),e(a)===null&&H===e(c)&&(v?(C(_),_=-1):v=!0,Se(Q,ne-M))):(H.sortIndex=J,t(a,H),O||w||(O=!0,be(D))),H},s.unstable_shouldYield=Y,s.unstable_wrapCallback=function(H){var ee=m;return function(){var ne=m;m=ee;try{return H.apply(this,arguments)}finally{m=ne}}}}(kw)),kw}var Gk;function lB(){return Gk||(Gk=1,_w.exports=oB()),_w.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yk;function aB(){if(Yk)return cn;Yk=1;var s=lx(),t=lB();function e(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,g=1;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,n={};function r(u,d){o(u,d),o(u+"Capture",d)}function o(u,d){for(n[u]=d,u=0;u<d.length;u++)i.add(d[u])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),a=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function m(u){return a.call(f,u)?!0:a.call(h,u)?!1:c.test(u)?f[u]=!0:(h[u]=!0,!1)}function w(u,d,g,b){if(g!==null&&g.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return b?!1:g!==null?!g.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function O(u,d,g,b){if(d===null||typeof d>"u"||w(u,d,g,b))return!0;if(b)return!1;if(g!==null)switch(g.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function v(u,d,g,b,x,y,S){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=b,this.attributeNamespace=x,this.mustUseProperty=g,this.propertyName=u,this.type=d,this.sanitizeURL=y,this.removeEmptyString=S}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){k[u]=new v(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var d=u[0];k[d]=new v(d,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){k[u]=new v(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){k[u]=new v(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){k[u]=new v(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){k[u]=new v(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){k[u]=new v(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){k[u]=new v(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){k[u]=new v(u,5,!1,u.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function P(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var d=u.replace(C,P);k[d]=new v(d,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var d=u.replace(C,P);k[d]=new v(d,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var d=u.replace(C,P);k[d]=new v(d,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){k[u]=new v(u,1,!1,u.toLowerCase(),null,!1,!1)}),k.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){k[u]=new v(u,1,!1,u.toLowerCase(),null,!0,!0)});function V(u,d,g,b){var x=k.hasOwnProperty(d)?k[d]:null;(x!==null?x.type!==0:b||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(O(d,g,x,b)&&(g=null),b||x===null?m(d)&&(g===null?u.removeAttribute(d):u.setAttribute(d,""+g)):x.mustUseProperty?u[x.propertyName]=g===null?x.type===3?!1:"":g:(d=x.attributeName,b=x.attributeNamespace,g===null?u.removeAttribute(d):(x=x.type,g=x===3||x===4&&g===!0?"":""+g,b?u.setAttributeNS(b,d,g):u.setAttribute(d,g))))}var Q=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),q=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),Y=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),H=Symbol.iterator;function ee(u){return u===null||typeof u!="object"?null:(u=H&&u[H]||u["@@iterator"],typeof u=="function"?u:null)}var ne=Object.assign,M;function J(u){if(M===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);M=d&&d[1]||""}return`
`+M+u}var fe=!1;function W(u,d){if(!u||fe)return"";fe=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Z){var b=Z}Reflect.construct(u,[],d)}else{try{d.call()}catch(Z){b=Z}u.call(d.prototype)}else{try{throw Error()}catch(Z){b=Z}u()}}catch(Z){if(Z&&b&&typeof Z.stack=="string"){for(var x=Z.stack.split(`
`),y=b.stack.split(`
`),S=x.length-1,E=y.length-1;1<=S&&0<=E&&x[S]!==y[E];)E--;for(;1<=S&&0<=E;S--,E--)if(x[S]!==y[E]){if(S!==1||E!==1)do if(S--,E--,0>E||x[S]!==y[E]){var I=`
`+x[S].replace(" at new "," at ");return u.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",u.displayName)),I}while(1<=S&&0<=E);break}}}finally{fe=!1,Error.prepareStackTrace=g}return(u=u?u.displayName||u.name:"")?J(u):""}function B(u){switch(u.tag){case 5:return J(u.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return u=W(u.type,!1),u;case 11:return u=W(u.type.render,!1),u;case 1:return u=W(u.type,!0),u;default:return""}}function K(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case $:return"Fragment";case q:return"Portal";case R:return"Profiler";case _:return"StrictMode";case j:return"Suspense";case oe:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case Y:return(u.displayName||"Context")+".Consumer";case U:return(u._context.displayName||"Context")+".Provider";case X:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case xe:return d=u.displayName||null,d!==null?d:K(u.type)||"Memo";case be:d=u._payload,u=u._init;try{return K(u(d))}catch{}}return null}function me(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(d);case 8:return d===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function ge(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function pe(u){var d=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function de(u){var d=pe(u)?"checked":"value",g=Object.getOwnPropertyDescriptor(u.constructor.prototype,d),b=""+u[d];if(!u.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,y=g.set;return Object.defineProperty(u,d,{configurable:!0,get:function(){return x.call(this)},set:function(S){b=""+S,y.call(this,S)}}),Object.defineProperty(u,d,{enumerable:g.enumerable}),{getValue:function(){return b},setValue:function(S){b=""+S},stopTracking:function(){u._valueTracker=null,delete u[d]}}}}function Qe(u){u._valueTracker||(u._valueTracker=de(u))}function Ve(u){if(!u)return!1;var d=u._valueTracker;if(!d)return!0;var g=d.getValue(),b="";return u&&(b=pe(u)?u.checked?"true":"false":u.value),u=b,u!==g?(d.setValue(u),!0):!1}function He(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function qe(u,d){var g=d.checked;return ne({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??u._wrapperState.initialChecked})}function _i(u,d){var g=d.defaultValue==null?"":d.defaultValue,b=d.checked!=null?d.checked:d.defaultChecked;g=ge(d.value!=null?d.value:g),u._wrapperState={initialChecked:b,initialValue:g,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function ni(u,d){d=d.checked,d!=null&&V(u,"checked",d,!1)}function Xe(u,d){ni(u,d);var g=ge(d.value),b=d.type;if(g!=null)b==="number"?(g===0&&u.value===""||u.value!=g)&&(u.value=""+g):u.value!==""+g&&(u.value=""+g);else if(b==="submit"||b==="reset"){u.removeAttribute("value");return}d.hasOwnProperty("value")?et(u,d.type,g):d.hasOwnProperty("defaultValue")&&et(u,d.type,ge(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(u.defaultChecked=!!d.defaultChecked)}function di(u,d,g){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var b=d.type;if(!(b!=="submit"&&b!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+u._wrapperState.initialValue,g||d===u.value||(u.value=d),u.defaultValue=d}g=u.name,g!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,g!==""&&(u.name=g)}function et(u,d,g){(d!=="number"||He(u.ownerDocument)!==u)&&(g==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+g&&(u.defaultValue=""+g))}var tt=Array.isArray;function qi(u,d,g,b){if(u=u.options,d){d={};for(var x=0;x<g.length;x++)d["$"+g[x]]=!0;for(g=0;g<u.length;g++)x=d.hasOwnProperty("$"+u[g].value),u[g].selected!==x&&(u[g].selected=x),x&&b&&(u[g].defaultSelected=!0)}else{for(g=""+ge(g),d=null,x=0;x<u.length;x++){if(u[x].value===g){u[x].selected=!0,b&&(u[x].defaultSelected=!0);return}d!==null||u[x].disabled||(d=u[x])}d!==null&&(d.selected=!0)}}function Ri(u,d){if(d.dangerouslySetInnerHTML!=null)throw Error(e(91));return ne({},d,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function si(u,d){var g=d.value;if(g==null){if(g=d.children,d=d.defaultValue,g!=null){if(d!=null)throw Error(e(92));if(tt(g)){if(1<g.length)throw Error(e(93));g=g[0]}d=g}d==null&&(d=""),g=d}u._wrapperState={initialValue:ge(g)}}function je(u,d){var g=ge(d.value),b=ge(d.defaultValue);g!=null&&(g=""+g,g!==u.value&&(u.value=g),d.defaultValue==null&&u.defaultValue!==g&&(u.defaultValue=g)),b!=null&&(u.defaultValue=""+b)}function Jt(u){var d=u.textContent;d===u._wrapperState.initialValue&&d!==""&&d!==null&&(u.value=d)}function Ue(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ki(u,d){return u==null||u==="http://www.w3.org/1999/xhtml"?Ue(d):u==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var At,bs=function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,g,b,x){MSApp.execUnsafeLocalFunction(function(){return u(d,g,b,x)})}:u}(function(u,d){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=d;else{for(At=At||document.createElement("div"),At.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=At.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;d.firstChild;)u.appendChild(d.firstChild)}});function kn(u,d){if(d){var g=u.firstChild;if(g&&g===u.lastChild&&g.nodeType===3){g.nodeValue=d;return}}u.textContent=d}var Qs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lt=["Webkit","ms","Moz","O"];Object.keys(Qs).forEach(function(u){lt.forEach(function(d){d=d+u.charAt(0).toUpperCase()+u.substring(1),Qs[d]=Qs[u]})});function dt(u,d,g){return d==null||typeof d=="boolean"||d===""?"":g||typeof d!="number"||d===0||Qs.hasOwnProperty(u)&&Qs[u]?(""+d).trim():d+"px"}function Ac(u,d){u=u.style;for(var g in d)if(d.hasOwnProperty(g)){var b=g.indexOf("--")===0,x=dt(g,d[g],b);g==="float"&&(g="cssFloat"),b?u.setProperty(g,x):u[g]=x}}var Os=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ic(u,d){if(d){if(Os[u]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(e(137,u));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(e(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(e(61))}if(d.style!=null&&typeof d.style!="object")throw Error(e(62))}}function No(u,d){if(u.indexOf("-")===-1)return typeof d.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mp=null;function Lp(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Bp=null,Hl=null,ql=null;function av(u){if(u=Jc(u)){if(typeof Bp!="function")throw Error(e(280));var d=u.stateNode;d&&(d=Ud(d),Bp(u.stateNode,u.type,d))}}function cv(u){Hl?ql?ql.push(u):ql=[u]:Hl=u}function uv(){if(Hl){var u=Hl,d=ql;if(ql=Hl=null,av(u),d)for(u=0;u<d.length;u++)av(d[u])}}function hv(u,d){return u(d)}function dv(){}var $p=!1;function fv(u,d,g){if($p)return u(d,g);$p=!0;try{return hv(u,d,g)}finally{$p=!1,(Hl!==null||ql!==null)&&(dv(),uv())}}function Rc(u,d){var g=u.stateNode;if(g===null)return null;var b=Ud(g);if(b===null)return null;g=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(u=u.type,b=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!b;break e;default:u=!1}if(u)return null;if(g&&typeof g!="function")throw Error(e(231,d,typeof g));return g}var Qp=!1;if(l)try{var Vc={};Object.defineProperty(Vc,"passive",{get:function(){Qp=!0}}),window.addEventListener("test",Vc,Vc),window.removeEventListener("test",Vc,Vc)}catch{Qp=!1}function oM(u,d,g,b,x,y,S,E,I){var Z=Array.prototype.slice.call(arguments,3);try{d.apply(g,Z)}catch(re){this.onError(re)}}var Mc=!1,vd=null,_d=!1,Dp=null,lM={onError:function(u){Mc=!0,vd=u}};function aM(u,d,g,b,x,y,S,E,I){Mc=!1,vd=null,oM.apply(lM,arguments)}function cM(u,d,g,b,x,y,S,E,I){if(aM.apply(this,arguments),Mc){if(Mc){var Z=vd;Mc=!1,vd=null}else throw Error(e(198));_d||(_d=!0,Dp=Z)}}function Fo(u){var d=u,g=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,(d.flags&4098)!==0&&(g=d.return),u=d.return;while(u)}return d.tag===3?g:null}function mv(u){if(u.tag===13){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function gv(u){if(Fo(u)!==u)throw Error(e(188))}function uM(u){var d=u.alternate;if(!d){if(d=Fo(u),d===null)throw Error(e(188));return d!==u?null:u}for(var g=u,b=d;;){var x=g.return;if(x===null)break;var y=x.alternate;if(y===null){if(b=x.return,b!==null){g=b;continue}break}if(x.child===y.child){for(y=x.child;y;){if(y===g)return gv(x),u;if(y===b)return gv(x),d;y=y.sibling}throw Error(e(188))}if(g.return!==b.return)g=x,b=y;else{for(var S=!1,E=x.child;E;){if(E===g){S=!0,g=x,b=y;break}if(E===b){S=!0,b=x,g=y;break}E=E.sibling}if(!S){for(E=y.child;E;){if(E===g){S=!0,g=y,b=x;break}if(E===b){S=!0,b=y,g=x;break}E=E.sibling}if(!S)throw Error(e(189))}}if(g.alternate!==b)throw Error(e(190))}if(g.tag!==3)throw Error(e(188));return g.stateNode.current===g?u:d}function pv(u){return u=uM(u),u!==null?wv(u):null}function wv(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=wv(u);if(d!==null)return d;u=u.sibling}return null}var bv=t.unstable_scheduleCallback,Ov=t.unstable_cancelCallback,hM=t.unstable_shouldYield,dM=t.unstable_requestPaint,Zt=t.unstable_now,fM=t.unstable_getCurrentPriorityLevel,Np=t.unstable_ImmediatePriority,xv=t.unstable_UserBlockingPriority,kd=t.unstable_NormalPriority,mM=t.unstable_LowPriority,yv=t.unstable_IdlePriority,Sd=null,Ds=null;function gM(u){if(Ds&&typeof Ds.onCommitFiberRoot=="function")try{Ds.onCommitFiberRoot(Sd,u,void 0,(u.current.flags&128)===128)}catch{}}var xs=Math.clz32?Math.clz32:bM,pM=Math.log,wM=Math.LN2;function bM(u){return u>>>=0,u===0?32:31-(pM(u)/wM|0)|0}var Cd=64,Pd=4194304;function Lc(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Td(u,d){var g=u.pendingLanes;if(g===0)return 0;var b=0,x=u.suspendedLanes,y=u.pingedLanes,S=g&268435455;if(S!==0){var E=S&~x;E!==0?b=Lc(E):(y&=S,y!==0&&(b=Lc(y)))}else S=g&~x,S!==0?b=Lc(S):y!==0&&(b=Lc(y));if(b===0)return 0;if(d!==0&&d!==b&&(d&x)===0&&(x=b&-b,y=d&-d,x>=y||x===16&&(y&4194240)!==0))return d;if((b&4)!==0&&(b|=g&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=b;0<d;)g=31-xs(d),x=1<<g,b|=u[g],d&=~x;return b}function OM(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xM(u,d){for(var g=u.suspendedLanes,b=u.pingedLanes,x=u.expirationTimes,y=u.pendingLanes;0<y;){var S=31-xs(y),E=1<<S,I=x[S];I===-1?((E&g)===0||(E&b)!==0)&&(x[S]=OM(E,d)):I<=d&&(u.expiredLanes|=E),y&=~E}}function Fp(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function vv(){var u=Cd;return Cd<<=1,(Cd&4194240)===0&&(Cd=64),u}function zp(u){for(var d=[],g=0;31>g;g++)d.push(u);return d}function Bc(u,d,g){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-xs(d),u[d]=g}function yM(u,d){var g=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var b=u.eventTimes;for(u=u.expirationTimes;0<g;){var x=31-xs(g),y=1<<x;d[x]=0,b[x]=-1,u[x]=-1,g&=~y}}function Wp(u,d){var g=u.entangledLanes|=d;for(u=u.entanglements;g;){var b=31-xs(g),x=1<<b;x&d|u[b]&d&&(u[b]|=d),g&=~x}}var pt=0;function _v(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var kv,Up,Sv,Cv,Pv,Zp=!1,Ed=[],Wr=null,Ur=null,Zr=null,$c=new Map,Qc=new Map,Hr=[],vM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tv(u,d){switch(u){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":$c.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qc.delete(d.pointerId)}}function Dc(u,d,g,b,x,y){return u===null||u.nativeEvent!==y?(u={blockedOn:d,domEventName:g,eventSystemFlags:b,nativeEvent:y,targetContainers:[x]},d!==null&&(d=Jc(d),d!==null&&Up(d)),u):(u.eventSystemFlags|=b,d=u.targetContainers,x!==null&&d.indexOf(x)===-1&&d.push(x),u)}function _M(u,d,g,b,x){switch(d){case"focusin":return Wr=Dc(Wr,u,d,g,b,x),!0;case"dragenter":return Ur=Dc(Ur,u,d,g,b,x),!0;case"mouseover":return Zr=Dc(Zr,u,d,g,b,x),!0;case"pointerover":var y=x.pointerId;return $c.set(y,Dc($c.get(y)||null,u,d,g,b,x)),!0;case"gotpointercapture":return y=x.pointerId,Qc.set(y,Dc(Qc.get(y)||null,u,d,g,b,x)),!0}return!1}function Ev(u){var d=zo(u.target);if(d!==null){var g=Fo(d);if(g!==null){if(d=g.tag,d===13){if(d=mv(g),d!==null){u.blockedOn=d,Pv(u.priority,function(){Sv(g)});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){u.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Ad(u){if(u.blockedOn!==null)return!1;for(var d=u.targetContainers;0<d.length;){var g=qp(u.domEventName,u.eventSystemFlags,d[0],u.nativeEvent);if(g===null){g=u.nativeEvent;var b=new g.constructor(g.type,g);Mp=b,g.target.dispatchEvent(b),Mp=null}else return d=Jc(g),d!==null&&Up(d),u.blockedOn=g,!1;d.shift()}return!0}function Av(u,d,g){Ad(u)&&g.delete(d)}function kM(){Zp=!1,Wr!==null&&Ad(Wr)&&(Wr=null),Ur!==null&&Ad(Ur)&&(Ur=null),Zr!==null&&Ad(Zr)&&(Zr=null),$c.forEach(Av),Qc.forEach(Av)}function Nc(u,d){u.blockedOn===d&&(u.blockedOn=null,Zp||(Zp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,kM)))}function Fc(u){function d(x){return Nc(x,u)}if(0<Ed.length){Nc(Ed[0],u);for(var g=1;g<Ed.length;g++){var b=Ed[g];b.blockedOn===u&&(b.blockedOn=null)}}for(Wr!==null&&Nc(Wr,u),Ur!==null&&Nc(Ur,u),Zr!==null&&Nc(Zr,u),$c.forEach(d),Qc.forEach(d),g=0;g<Hr.length;g++)b=Hr[g],b.blockedOn===u&&(b.blockedOn=null);for(;0<Hr.length&&(g=Hr[0],g.blockedOn===null);)Ev(g),g.blockedOn===null&&Hr.shift()}var Xl=Q.ReactCurrentBatchConfig,Id=!0;function SM(u,d,g,b){var x=pt,y=Xl.transition;Xl.transition=null;try{pt=1,Hp(u,d,g,b)}finally{pt=x,Xl.transition=y}}function CM(u,d,g,b){var x=pt,y=Xl.transition;Xl.transition=null;try{pt=4,Hp(u,d,g,b)}finally{pt=x,Xl.transition=y}}function Hp(u,d,g,b){if(Id){var x=qp(u,d,g,b);if(x===null)u0(u,d,b,Rd,g),Tv(u,b);else if(_M(x,u,d,g,b))b.stopPropagation();else if(Tv(u,b),d&4&&-1<vM.indexOf(u)){for(;x!==null;){var y=Jc(x);if(y!==null&&kv(y),y=qp(u,d,g,b),y===null&&u0(u,d,b,Rd,g),y===x)break;x=y}x!==null&&b.stopPropagation()}else u0(u,d,b,null,g)}}var Rd=null;function qp(u,d,g,b){if(Rd=null,u=Lp(b),u=zo(u),u!==null)if(d=Fo(u),d===null)u=null;else if(g=d.tag,g===13){if(u=mv(d),u!==null)return u;u=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;u=null}else d!==u&&(u=null);return Rd=u,null}function Iv(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fM()){case Np:return 1;case xv:return 4;case kd:case mM:return 16;case yv:return 536870912;default:return 16}default:return 16}}var qr=null,Xp=null,Vd=null;function Rv(){if(Vd)return Vd;var u,d=Xp,g=d.length,b,x="value"in qr?qr.value:qr.textContent,y=x.length;for(u=0;u<g&&d[u]===x[u];u++);var S=g-u;for(b=1;b<=S&&d[g-b]===x[y-b];b++);return Vd=x.slice(u,1<b?1-b:void 0)}function Md(u){var d=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&d===13&&(u=13)):u=d,u===10&&(u=13),32<=u||u===13?u:0}function Ld(){return!0}function Vv(){return!1}function Sn(u){function d(g,b,x,y,S){this._reactName=g,this._targetInst=x,this.type=b,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var E in u)u.hasOwnProperty(E)&&(g=u[E],this[E]=g?g(y):y[E]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ld:Vv,this.isPropagationStopped=Vv,this}return ne(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Ld)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Ld)},persist:function(){},isPersistent:Ld}),d}var jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jp=Sn(jl),zc=ne({},jl,{view:0,detail:0}),PM=Sn(zc),Gp,Yp,Wc,Bd=ne({},zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jp,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Wc&&(Wc&&u.type==="mousemove"?(Gp=u.screenX-Wc.screenX,Yp=u.screenY-Wc.screenY):Yp=Gp=0,Wc=u),Gp)},movementY:function(u){return"movementY"in u?u.movementY:Yp}}),Mv=Sn(Bd),TM=ne({},Bd,{dataTransfer:0}),EM=Sn(TM),AM=ne({},zc,{relatedTarget:0}),Kp=Sn(AM),IM=ne({},jl,{animationName:0,elapsedTime:0,pseudoElement:0}),RM=Sn(IM),VM=ne({},jl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),MM=Sn(VM),LM=ne({},jl,{data:0}),Lv=Sn(LM),BM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$M={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DM(u){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(u):(u=QM[u])?!!d[u]:!1}function Jp(){return DM}var NM=ne({},zc,{key:function(u){if(u.key){var d=BM[u.key]||u.key;if(d!=="Unidentified")return d}return u.type==="keypress"?(u=Md(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?$M[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jp,charCode:function(u){return u.type==="keypress"?Md(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Md(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),FM=Sn(NM),zM=ne({},Bd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bv=Sn(zM),WM=ne({},zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jp}),UM=Sn(WM),ZM=ne({},jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),HM=Sn(ZM),qM=ne({},Bd,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),XM=Sn(qM),jM=[9,13,27,32],e0=l&&"CompositionEvent"in window,Uc=null;l&&"documentMode"in document&&(Uc=document.documentMode);var GM=l&&"TextEvent"in window&&!Uc,$v=l&&(!e0||Uc&&8<Uc&&11>=Uc),Qv=" ",Dv=!1;function Nv(u,d){switch(u){case"keyup":return jM.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fv(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Gl=!1;function YM(u,d){switch(u){case"compositionend":return Fv(d);case"keypress":return d.which!==32?null:(Dv=!0,Qv);case"textInput":return u=d.data,u===Qv&&Dv?null:u;default:return null}}function KM(u,d){if(Gl)return u==="compositionend"||!e0&&Nv(u,d)?(u=Rv(),Vd=Xp=qr=null,Gl=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return $v&&d.locale!=="ko"?null:d.data;default:return null}}var JM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zv(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d==="input"?!!JM[u.type]:d==="textarea"}function Wv(u,d,g,b){cv(b),d=Fd(d,"onChange"),0<d.length&&(g=new jp("onChange","change",null,g,b),u.push({event:g,listeners:d}))}var Zc=null,Hc=null;function eL(u){l_(u,0)}function $d(u){var d=ta(u);if(Ve(d))return u}function tL(u,d){if(u==="change")return d}var Uv=!1;if(l){var t0;if(l){var i0="oninput"in document;if(!i0){var Zv=document.createElement("div");Zv.setAttribute("oninput","return;"),i0=typeof Zv.oninput=="function"}t0=i0}else t0=!1;Uv=t0&&(!document.documentMode||9<document.documentMode)}function Hv(){Zc&&(Zc.detachEvent("onpropertychange",qv),Hc=Zc=null)}function qv(u){if(u.propertyName==="value"&&$d(Hc)){var d=[];Wv(d,Hc,u,Lp(u)),fv(eL,d)}}function iL(u,d,g){u==="focusin"?(Hv(),Zc=d,Hc=g,Zc.attachEvent("onpropertychange",qv)):u==="focusout"&&Hv()}function nL(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return $d(Hc)}function sL(u,d){if(u==="click")return $d(d)}function rL(u,d){if(u==="input"||u==="change")return $d(d)}function oL(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var ys=typeof Object.is=="function"?Object.is:oL;function qc(u,d){if(ys(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var g=Object.keys(u),b=Object.keys(d);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var x=g[b];if(!a.call(d,x)||!ys(u[x],d[x]))return!1}return!0}function Xv(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function jv(u,d){var g=Xv(u);u=0;for(var b;g;){if(g.nodeType===3){if(b=u+g.textContent.length,u<=d&&b>=d)return{node:g,offset:d-u};u=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Xv(g)}}function Gv(u,d){return u&&d?u===d?!0:u&&u.nodeType===3?!1:d&&d.nodeType===3?Gv(u,d.parentNode):"contains"in u?u.contains(d):u.compareDocumentPosition?!!(u.compareDocumentPosition(d)&16):!1:!1}function Yv(){for(var u=window,d=He();d instanceof u.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch{g=!1}if(g)u=d.contentWindow;else break;d=He(u.document)}return d}function n0(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d&&(d==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||d==="textarea"||u.contentEditable==="true")}function lL(u){var d=Yv(),g=u.focusedElem,b=u.selectionRange;if(d!==g&&g&&g.ownerDocument&&Gv(g.ownerDocument.documentElement,g)){if(b!==null&&n0(g)){if(d=b.start,u=b.end,u===void 0&&(u=d),"selectionStart"in g)g.selectionStart=d,g.selectionEnd=Math.min(u,g.value.length);else if(u=(d=g.ownerDocument||document)&&d.defaultView||window,u.getSelection){u=u.getSelection();var x=g.textContent.length,y=Math.min(b.start,x);b=b.end===void 0?y:Math.min(b.end,x),!u.extend&&y>b&&(x=b,b=y,y=x),x=jv(g,y);var S=jv(g,b);x&&S&&(u.rangeCount!==1||u.anchorNode!==x.node||u.anchorOffset!==x.offset||u.focusNode!==S.node||u.focusOffset!==S.offset)&&(d=d.createRange(),d.setStart(x.node,x.offset),u.removeAllRanges(),y>b?(u.addRange(d),u.extend(S.node,S.offset)):(d.setEnd(S.node,S.offset),u.addRange(d)))}}for(d=[],u=g;u=u.parentNode;)u.nodeType===1&&d.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<d.length;g++)u=d[g],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var aL=l&&"documentMode"in document&&11>=document.documentMode,Yl=null,s0=null,Xc=null,r0=!1;function Kv(u,d,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;r0||Yl==null||Yl!==He(b)||(b=Yl,"selectionStart"in b&&n0(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Xc&&qc(Xc,b)||(Xc=b,b=Fd(s0,"onSelect"),0<b.length&&(d=new jp("onSelect","select",null,d,g),u.push({event:d,listeners:b}),d.target=Yl)))}function Qd(u,d){var g={};return g[u.toLowerCase()]=d.toLowerCase(),g["Webkit"+u]="webkit"+d,g["Moz"+u]="moz"+d,g}var Kl={animationend:Qd("Animation","AnimationEnd"),animationiteration:Qd("Animation","AnimationIteration"),animationstart:Qd("Animation","AnimationStart"),transitionend:Qd("Transition","TransitionEnd")},o0={},Jv={};l&&(Jv=document.createElement("div").style,"AnimationEvent"in window||(delete Kl.animationend.animation,delete Kl.animationiteration.animation,delete Kl.animationstart.animation),"TransitionEvent"in window||delete Kl.transitionend.transition);function Dd(u){if(o0[u])return o0[u];if(!Kl[u])return u;var d=Kl[u],g;for(g in d)if(d.hasOwnProperty(g)&&g in Jv)return o0[u]=d[g];return u}var e_=Dd("animationend"),t_=Dd("animationiteration"),i_=Dd("animationstart"),n_=Dd("transitionend"),s_=new Map,r_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xr(u,d){s_.set(u,d),r(d,[u])}for(var l0=0;l0<r_.length;l0++){var a0=r_[l0],cL=a0.toLowerCase(),uL=a0[0].toUpperCase()+a0.slice(1);Xr(cL,"on"+uL)}Xr(e_,"onAnimationEnd"),Xr(t_,"onAnimationIteration"),Xr(i_,"onAnimationStart"),Xr("dblclick","onDoubleClick"),Xr("focusin","onFocus"),Xr("focusout","onBlur"),Xr(n_,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),r("onBeforeInput",["compositionend","keypress","textInput","paste"]),r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hL=new Set("cancel close invalid load scroll toggle".split(" ").concat(jc));function o_(u,d,g){var b=u.type||"unknown-event";u.currentTarget=g,cM(b,d,void 0,u),u.currentTarget=null}function l_(u,d){d=(d&4)!==0;for(var g=0;g<u.length;g++){var b=u[g],x=b.event;b=b.listeners;e:{var y=void 0;if(d)for(var S=b.length-1;0<=S;S--){var E=b[S],I=E.instance,Z=E.currentTarget;if(E=E.listener,I!==y&&x.isPropagationStopped())break e;o_(x,E,Z),y=I}else for(S=0;S<b.length;S++){if(E=b[S],I=E.instance,Z=E.currentTarget,E=E.listener,I!==y&&x.isPropagationStopped())break e;o_(x,E,Z),y=I}}}if(_d)throw u=Dp,_d=!1,Dp=null,u}function St(u,d){var g=d[p0];g===void 0&&(g=d[p0]=new Set);var b=u+"__bubble";g.has(b)||(a_(d,u,2,!1),g.add(b))}function c0(u,d,g){var b=0;d&&(b|=4),a_(g,u,b,d)}var Nd="_reactListening"+Math.random().toString(36).slice(2);function Gc(u){if(!u[Nd]){u[Nd]=!0,i.forEach(function(g){g!=="selectionchange"&&(hL.has(g)||c0(g,!1,u),c0(g,!0,u))});var d=u.nodeType===9?u:u.ownerDocument;d===null||d[Nd]||(d[Nd]=!0,c0("selectionchange",!1,d))}}function a_(u,d,g,b){switch(Iv(d)){case 1:var x=SM;break;case 4:x=CM;break;default:x=Hp}g=x.bind(null,d,g,u),x=void 0,!Qp||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(x=!0),b?x!==void 0?u.addEventListener(d,g,{capture:!0,passive:x}):u.addEventListener(d,g,!0):x!==void 0?u.addEventListener(d,g,{passive:x}):u.addEventListener(d,g,!1)}function u0(u,d,g,b,x){var y=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var S=b.tag;if(S===3||S===4){var E=b.stateNode.containerInfo;if(E===x||E.nodeType===8&&E.parentNode===x)break;if(S===4)for(S=b.return;S!==null;){var I=S.tag;if((I===3||I===4)&&(I=S.stateNode.containerInfo,I===x||I.nodeType===8&&I.parentNode===x))return;S=S.return}for(;E!==null;){if(S=zo(E),S===null)return;if(I=S.tag,I===5||I===6){b=y=S;continue e}E=E.parentNode}}b=b.return}fv(function(){var Z=y,re=Lp(g),le=[];e:{var se=s_.get(u);if(se!==void 0){var ye=jp,Ce=u;switch(u){case"keypress":if(Md(g)===0)break e;case"keydown":case"keyup":ye=FM;break;case"focusin":Ce="focus",ye=Kp;break;case"focusout":Ce="blur",ye=Kp;break;case"beforeblur":case"afterblur":ye=Kp;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=Mv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=EM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=UM;break;case e_:case t_:case i_:ye=RM;break;case n_:ye=HM;break;case"scroll":ye=PM;break;case"wheel":ye=XM;break;case"copy":case"cut":case"paste":ye=MM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=Bv}var Te=(d&4)!==0,Ht=!Te&&u==="scroll",N=Te?se!==null?se+"Capture":null:se;Te=[];for(var L=Z,z;L!==null;){z=L;var ae=z.stateNode;if(z.tag===5&&ae!==null&&(z=ae,N!==null&&(ae=Rc(L,N),ae!=null&&Te.push(Yc(L,ae,z)))),Ht)break;L=L.return}0<Te.length&&(se=new ye(se,Ce,null,g,re),le.push({event:se,listeners:Te}))}}if((d&7)===0){e:{if(se=u==="mouseover"||u==="pointerover",ye=u==="mouseout"||u==="pointerout",se&&g!==Mp&&(Ce=g.relatedTarget||g.fromElement)&&(zo(Ce)||Ce[hr]))break e;if((ye||se)&&(se=re.window===re?re:(se=re.ownerDocument)?se.defaultView||se.parentWindow:window,ye?(Ce=g.relatedTarget||g.toElement,ye=Z,Ce=Ce?zo(Ce):null,Ce!==null&&(Ht=Fo(Ce),Ce!==Ht||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(ye=null,Ce=Z),ye!==Ce)){if(Te=Mv,ae="onMouseLeave",N="onMouseEnter",L="mouse",(u==="pointerout"||u==="pointerover")&&(Te=Bv,ae="onPointerLeave",N="onPointerEnter",L="pointer"),Ht=ye==null?se:ta(ye),z=Ce==null?se:ta(Ce),se=new Te(ae,L+"leave",ye,g,re),se.target=Ht,se.relatedTarget=z,ae=null,zo(re)===Z&&(Te=new Te(N,L+"enter",Ce,g,re),Te.target=z,Te.relatedTarget=Ht,ae=Te),Ht=ae,ye&&Ce)t:{for(Te=ye,N=Ce,L=0,z=Te;z;z=Jl(z))L++;for(z=0,ae=N;ae;ae=Jl(ae))z++;for(;0<L-z;)Te=Jl(Te),L--;for(;0<z-L;)N=Jl(N),z--;for(;L--;){if(Te===N||N!==null&&Te===N.alternate)break t;Te=Jl(Te),N=Jl(N)}Te=null}else Te=null;ye!==null&&c_(le,se,ye,Te,!1),Ce!==null&&Ht!==null&&c_(le,Ht,Ce,Te,!0)}}e:{if(se=Z?ta(Z):window,ye=se.nodeName&&se.nodeName.toLowerCase(),ye==="select"||ye==="input"&&se.type==="file")var Ae=tL;else if(zv(se))if(Uv)Ae=rL;else{Ae=nL;var Be=iL}else(ye=se.nodeName)&&ye.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Ae=sL);if(Ae&&(Ae=Ae(u,Z))){Wv(le,Ae,g,re);break e}Be&&Be(u,se,Z),u==="focusout"&&(Be=se._wrapperState)&&Be.controlled&&se.type==="number"&&et(se,"number",se.value)}switch(Be=Z?ta(Z):window,u){case"focusin":(zv(Be)||Be.contentEditable==="true")&&(Yl=Be,s0=Z,Xc=null);break;case"focusout":Xc=s0=Yl=null;break;case"mousedown":r0=!0;break;case"contextmenu":case"mouseup":case"dragend":r0=!1,Kv(le,g,re);break;case"selectionchange":if(aL)break;case"keydown":case"keyup":Kv(le,g,re)}var $e;if(e0)e:{switch(u){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Gl?Nv(u,g)&&(De="onCompositionEnd"):u==="keydown"&&g.keyCode===229&&(De="onCompositionStart");De&&($v&&g.locale!=="ko"&&(Gl||De!=="onCompositionStart"?De==="onCompositionEnd"&&Gl&&($e=Rv()):(qr=re,Xp="value"in qr?qr.value:qr.textContent,Gl=!0)),Be=Fd(Z,De),0<Be.length&&(De=new Lv(De,u,null,g,re),le.push({event:De,listeners:Be}),$e?De.data=$e:($e=Fv(g),$e!==null&&(De.data=$e)))),($e=GM?YM(u,g):KM(u,g))&&(Z=Fd(Z,"onBeforeInput"),0<Z.length&&(re=new Lv("onBeforeInput","beforeinput",null,g,re),le.push({event:re,listeners:Z}),re.data=$e))}l_(le,d)})}function Yc(u,d,g){return{instance:u,listener:d,currentTarget:g}}function Fd(u,d){for(var g=d+"Capture",b=[];u!==null;){var x=u,y=x.stateNode;x.tag===5&&y!==null&&(x=y,y=Rc(u,g),y!=null&&b.unshift(Yc(u,y,x)),y=Rc(u,d),y!=null&&b.push(Yc(u,y,x))),u=u.return}return b}function Jl(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function c_(u,d,g,b,x){for(var y=d._reactName,S=[];g!==null&&g!==b;){var E=g,I=E.alternate,Z=E.stateNode;if(I!==null&&I===b)break;E.tag===5&&Z!==null&&(E=Z,x?(I=Rc(g,y),I!=null&&S.unshift(Yc(g,I,E))):x||(I=Rc(g,y),I!=null&&S.push(Yc(g,I,E)))),g=g.return}S.length!==0&&u.push({event:d,listeners:S})}var dL=/\r\n?/g,fL=/\u0000|\uFFFD/g;function u_(u){return(typeof u=="string"?u:""+u).replace(dL,`
`).replace(fL,"")}function zd(u,d,g){if(d=u_(d),u_(u)!==d&&g)throw Error(e(425))}function Wd(){}var h0=null,d0=null;function f0(u,d){return u==="textarea"||u==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var m0=typeof setTimeout=="function"?setTimeout:void 0,mL=typeof clearTimeout=="function"?clearTimeout:void 0,h_=typeof Promise=="function"?Promise:void 0,gL=typeof queueMicrotask=="function"?queueMicrotask:typeof h_<"u"?function(u){return h_.resolve(null).then(u).catch(pL)}:m0;function pL(u){setTimeout(function(){throw u})}function g0(u,d){var g=d,b=0;do{var x=g.nextSibling;if(u.removeChild(g),x&&x.nodeType===8)if(g=x.data,g==="/$"){if(b===0){u.removeChild(x),Fc(d);return}b--}else g!=="$"&&g!=="$?"&&g!=="$!"||b++;g=x}while(g);Fc(d)}function jr(u){for(;u!=null;u=u.nextSibling){var d=u.nodeType;if(d===1||d===3)break;if(d===8){if(d=u.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return u}function d_(u){u=u.previousSibling;for(var d=0;u;){if(u.nodeType===8){var g=u.data;if(g==="$"||g==="$!"||g==="$?"){if(d===0)return u;d--}else g==="/$"&&d++}u=u.previousSibling}return null}var ea=Math.random().toString(36).slice(2),Ns="__reactFiber$"+ea,Kc="__reactProps$"+ea,hr="__reactContainer$"+ea,p0="__reactEvents$"+ea,wL="__reactListeners$"+ea,bL="__reactHandles$"+ea;function zo(u){var d=u[Ns];if(d)return d;for(var g=u.parentNode;g;){if(d=g[hr]||g[Ns]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(u=d_(u);u!==null;){if(g=u[Ns])return g;u=d_(u)}return d}u=g,g=u.parentNode}return null}function Jc(u){return u=u[Ns]||u[hr],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function ta(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(e(33))}function Ud(u){return u[Kc]||null}var w0=[],ia=-1;function Gr(u){return{current:u}}function Ct(u){0>ia||(u.current=w0[ia],w0[ia]=null,ia--)}function vt(u,d){ia++,w0[ia]=u.current,u.current=d}var Yr={},Vi=Gr(Yr),sn=Gr(!1),Wo=Yr;function na(u,d){var g=u.type.contextTypes;if(!g)return Yr;var b=u.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===d)return b.__reactInternalMemoizedMaskedChildContext;var x={},y;for(y in g)x[y]=d[y];return b&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=x),x}function rn(u){return u=u.childContextTypes,u!=null}function Zd(){Ct(sn),Ct(Vi)}function f_(u,d,g){if(Vi.current!==Yr)throw Error(e(168));vt(Vi,d),vt(sn,g)}function m_(u,d,g){var b=u.stateNode;if(d=d.childContextTypes,typeof b.getChildContext!="function")return g;b=b.getChildContext();for(var x in b)if(!(x in d))throw Error(e(108,me(u)||"Unknown",x));return ne({},g,b)}function Hd(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Yr,Wo=Vi.current,vt(Vi,u),vt(sn,sn.current),!0}function g_(u,d,g){var b=u.stateNode;if(!b)throw Error(e(169));g?(u=m_(u,d,Wo),b.__reactInternalMemoizedMergedChildContext=u,Ct(sn),Ct(Vi),vt(Vi,u)):Ct(sn),vt(sn,g)}var dr=null,qd=!1,b0=!1;function p_(u){dr===null?dr=[u]:dr.push(u)}function OL(u){qd=!0,p_(u)}function Kr(){if(!b0&&dr!==null){b0=!0;var u=0,d=pt;try{var g=dr;for(pt=1;u<g.length;u++){var b=g[u];do b=b(!0);while(b!==null)}dr=null,qd=!1}catch(x){throw dr!==null&&(dr=dr.slice(u+1)),bv(Np,Kr),x}finally{pt=d,b0=!1}}return null}var sa=[],ra=0,Xd=null,jd=0,Wn=[],Un=0,Uo=null,fr=1,mr="";function Zo(u,d){sa[ra++]=jd,sa[ra++]=Xd,Xd=u,jd=d}function w_(u,d,g){Wn[Un++]=fr,Wn[Un++]=mr,Wn[Un++]=Uo,Uo=u;var b=fr;u=mr;var x=32-xs(b)-1;b&=~(1<<x),g+=1;var y=32-xs(d)+x;if(30<y){var S=x-x%5;y=(b&(1<<S)-1).toString(32),b>>=S,x-=S,fr=1<<32-xs(d)+x|g<<x|b,mr=y+u}else fr=1<<y|g<<x|b,mr=u}function O0(u){u.return!==null&&(Zo(u,1),w_(u,1,0))}function x0(u){for(;u===Xd;)Xd=sa[--ra],sa[ra]=null,jd=sa[--ra],sa[ra]=null;for(;u===Uo;)Uo=Wn[--Un],Wn[Un]=null,mr=Wn[--Un],Wn[Un]=null,fr=Wn[--Un],Wn[Un]=null}var Cn=null,Pn=null,It=!1,vs=null;function b_(u,d){var g=Xn(5,null,null,0);g.elementType="DELETED",g.stateNode=d,g.return=u,d=u.deletions,d===null?(u.deletions=[g],u.flags|=16):d.push(g)}function O_(u,d){switch(u.tag){case 5:var g=u.type;return d=d.nodeType!==1||g.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(u.stateNode=d,Cn=u,Pn=jr(d.firstChild),!0):!1;case 6:return d=u.pendingProps===""||d.nodeType!==3?null:d,d!==null?(u.stateNode=d,Cn=u,Pn=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(g=Uo!==null?{id:fr,overflow:mr}:null,u.memoizedState={dehydrated:d,treeContext:g,retryLane:1073741824},g=Xn(18,null,null,0),g.stateNode=d,g.return=u,u.child=g,Cn=u,Pn=null,!0):!1;default:return!1}}function y0(u){return(u.mode&1)!==0&&(u.flags&128)===0}function v0(u){if(It){var d=Pn;if(d){var g=d;if(!O_(u,d)){if(y0(u))throw Error(e(418));d=jr(g.nextSibling);var b=Cn;d&&O_(u,d)?b_(b,g):(u.flags=u.flags&-4097|2,It=!1,Cn=u)}}else{if(y0(u))throw Error(e(418));u.flags=u.flags&-4097|2,It=!1,Cn=u}}}function x_(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Cn=u}function Gd(u){if(u!==Cn)return!1;if(!It)return x_(u),It=!0,!1;var d;if((d=u.tag!==3)&&!(d=u.tag!==5)&&(d=u.type,d=d!=="head"&&d!=="body"&&!f0(u.type,u.memoizedProps)),d&&(d=Pn)){if(y0(u))throw y_(),Error(e(418));for(;d;)b_(u,d),d=jr(d.nextSibling)}if(x_(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(e(317));e:{for(u=u.nextSibling,d=0;u;){if(u.nodeType===8){var g=u.data;if(g==="/$"){if(d===0){Pn=jr(u.nextSibling);break e}d--}else g!=="$"&&g!=="$!"&&g!=="$?"||d++}u=u.nextSibling}Pn=null}}else Pn=Cn?jr(u.stateNode.nextSibling):null;return!0}function y_(){for(var u=Pn;u;)u=jr(u.nextSibling)}function oa(){Pn=Cn=null,It=!1}function _0(u){vs===null?vs=[u]:vs.push(u)}var xL=Q.ReactCurrentBatchConfig;function eu(u,d,g){if(u=g.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(e(309));var b=g.stateNode}if(!b)throw Error(e(147,u));var x=b,y=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===y?d.ref:(d=function(S){var E=x.refs;S===null?delete E[y]:E[y]=S},d._stringRef=y,d)}if(typeof u!="string")throw Error(e(284));if(!g._owner)throw Error(e(290,u))}return u}function Yd(u,d){throw u=Object.prototype.toString.call(d),Error(e(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function v_(u){var d=u._init;return d(u._payload)}function __(u){function d(N,L){if(u){var z=N.deletions;z===null?(N.deletions=[L],N.flags|=16):z.push(L)}}function g(N,L){if(!u)return null;for(;L!==null;)d(N,L),L=L.sibling;return null}function b(N,L){for(N=new Map;L!==null;)L.key!==null?N.set(L.key,L):N.set(L.index,L),L=L.sibling;return N}function x(N,L){return N=oo(N,L),N.index=0,N.sibling=null,N}function y(N,L,z){return N.index=z,u?(z=N.alternate,z!==null?(z=z.index,z<L?(N.flags|=2,L):z):(N.flags|=2,L)):(N.flags|=1048576,L)}function S(N){return u&&N.alternate===null&&(N.flags|=2),N}function E(N,L,z,ae){return L===null||L.tag!==6?(L=mw(z,N.mode,ae),L.return=N,L):(L=x(L,z),L.return=N,L)}function I(N,L,z,ae){var Ae=z.type;return Ae===$?re(N,L,z.props.children,ae,z.key):L!==null&&(L.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===be&&v_(Ae)===L.type)?(ae=x(L,z.props),ae.ref=eu(N,L,z),ae.return=N,ae):(ae=vf(z.type,z.key,z.props,null,N.mode,ae),ae.ref=eu(N,L,z),ae.return=N,ae)}function Z(N,L,z,ae){return L===null||L.tag!==4||L.stateNode.containerInfo!==z.containerInfo||L.stateNode.implementation!==z.implementation?(L=gw(z,N.mode,ae),L.return=N,L):(L=x(L,z.children||[]),L.return=N,L)}function re(N,L,z,ae,Ae){return L===null||L.tag!==7?(L=Jo(z,N.mode,ae,Ae),L.return=N,L):(L=x(L,z),L.return=N,L)}function le(N,L,z){if(typeof L=="string"&&L!==""||typeof L=="number")return L=mw(""+L,N.mode,z),L.return=N,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case D:return z=vf(L.type,L.key,L.props,null,N.mode,z),z.ref=eu(N,null,L),z.return=N,z;case q:return L=gw(L,N.mode,z),L.return=N,L;case be:var ae=L._init;return le(N,ae(L._payload),z)}if(tt(L)||ee(L))return L=Jo(L,N.mode,z,null),L.return=N,L;Yd(N,L)}return null}function se(N,L,z,ae){var Ae=L!==null?L.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return Ae!==null?null:E(N,L,""+z,ae);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case D:return z.key===Ae?I(N,L,z,ae):null;case q:return z.key===Ae?Z(N,L,z,ae):null;case be:return Ae=z._init,se(N,L,Ae(z._payload),ae)}if(tt(z)||ee(z))return Ae!==null?null:re(N,L,z,ae,null);Yd(N,z)}return null}function ye(N,L,z,ae,Ae){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return N=N.get(z)||null,E(L,N,""+ae,Ae);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case D:return N=N.get(ae.key===null?z:ae.key)||null,I(L,N,ae,Ae);case q:return N=N.get(ae.key===null?z:ae.key)||null,Z(L,N,ae,Ae);case be:var Be=ae._init;return ye(N,L,z,Be(ae._payload),Ae)}if(tt(ae)||ee(ae))return N=N.get(z)||null,re(L,N,ae,Ae,null);Yd(L,ae)}return null}function Ce(N,L,z,ae){for(var Ae=null,Be=null,$e=L,De=L=0,gi=null;$e!==null&&De<z.length;De++){$e.index>De?(gi=$e,$e=null):gi=$e.sibling;var rt=se(N,$e,z[De],ae);if(rt===null){$e===null&&($e=gi);break}u&&$e&&rt.alternate===null&&d(N,$e),L=y(rt,L,De),Be===null?Ae=rt:Be.sibling=rt,Be=rt,$e=gi}if(De===z.length)return g(N,$e),It&&Zo(N,De),Ae;if($e===null){for(;De<z.length;De++)$e=le(N,z[De],ae),$e!==null&&(L=y($e,L,De),Be===null?Ae=$e:Be.sibling=$e,Be=$e);return It&&Zo(N,De),Ae}for($e=b(N,$e);De<z.length;De++)gi=ye($e,N,De,z[De],ae),gi!==null&&(u&&gi.alternate!==null&&$e.delete(gi.key===null?De:gi.key),L=y(gi,L,De),Be===null?Ae=gi:Be.sibling=gi,Be=gi);return u&&$e.forEach(function(lo){return d(N,lo)}),It&&Zo(N,De),Ae}function Te(N,L,z,ae){var Ae=ee(z);if(typeof Ae!="function")throw Error(e(150));if(z=Ae.call(z),z==null)throw Error(e(151));for(var Be=Ae=null,$e=L,De=L=0,gi=null,rt=z.next();$e!==null&&!rt.done;De++,rt=z.next()){$e.index>De?(gi=$e,$e=null):gi=$e.sibling;var lo=se(N,$e,rt.value,ae);if(lo===null){$e===null&&($e=gi);break}u&&$e&&lo.alternate===null&&d(N,$e),L=y(lo,L,De),Be===null?Ae=lo:Be.sibling=lo,Be=lo,$e=gi}if(rt.done)return g(N,$e),It&&Zo(N,De),Ae;if($e===null){for(;!rt.done;De++,rt=z.next())rt=le(N,rt.value,ae),rt!==null&&(L=y(rt,L,De),Be===null?Ae=rt:Be.sibling=rt,Be=rt);return It&&Zo(N,De),Ae}for($e=b(N,$e);!rt.done;De++,rt=z.next())rt=ye($e,N,De,rt.value,ae),rt!==null&&(u&&rt.alternate!==null&&$e.delete(rt.key===null?De:rt.key),L=y(rt,L,De),Be===null?Ae=rt:Be.sibling=rt,Be=rt);return u&&$e.forEach(function(JL){return d(N,JL)}),It&&Zo(N,De),Ae}function Ht(N,L,z,ae){if(typeof z=="object"&&z!==null&&z.type===$&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case D:e:{for(var Ae=z.key,Be=L;Be!==null;){if(Be.key===Ae){if(Ae=z.type,Ae===$){if(Be.tag===7){g(N,Be.sibling),L=x(Be,z.props.children),L.return=N,N=L;break e}}else if(Be.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===be&&v_(Ae)===Be.type){g(N,Be.sibling),L=x(Be,z.props),L.ref=eu(N,Be,z),L.return=N,N=L;break e}g(N,Be);break}else d(N,Be);Be=Be.sibling}z.type===$?(L=Jo(z.props.children,N.mode,ae,z.key),L.return=N,N=L):(ae=vf(z.type,z.key,z.props,null,N.mode,ae),ae.ref=eu(N,L,z),ae.return=N,N=ae)}return S(N);case q:e:{for(Be=z.key;L!==null;){if(L.key===Be)if(L.tag===4&&L.stateNode.containerInfo===z.containerInfo&&L.stateNode.implementation===z.implementation){g(N,L.sibling),L=x(L,z.children||[]),L.return=N,N=L;break e}else{g(N,L);break}else d(N,L);L=L.sibling}L=gw(z,N.mode,ae),L.return=N,N=L}return S(N);case be:return Be=z._init,Ht(N,L,Be(z._payload),ae)}if(tt(z))return Ce(N,L,z,ae);if(ee(z))return Te(N,L,z,ae);Yd(N,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,L!==null&&L.tag===6?(g(N,L.sibling),L=x(L,z),L.return=N,N=L):(g(N,L),L=mw(z,N.mode,ae),L.return=N,N=L),S(N)):g(N,L)}return Ht}var la=__(!0),k_=__(!1),Kd=Gr(null),Jd=null,aa=null,k0=null;function S0(){k0=aa=Jd=null}function C0(u){var d=Kd.current;Ct(Kd),u._currentValue=d}function P0(u,d,g){for(;u!==null;){var b=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),u===g)break;u=u.return}}function ca(u,d){Jd=u,k0=aa=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&d)!==0&&(on=!0),u.firstContext=null)}function Zn(u){var d=u._currentValue;if(k0!==u)if(u={context:u,memoizedValue:d,next:null},aa===null){if(Jd===null)throw Error(e(308));aa=u,Jd.dependencies={lanes:0,firstContext:u}}else aa=aa.next=u;return d}var Ho=null;function T0(u){Ho===null?Ho=[u]:Ho.push(u)}function S_(u,d,g,b){var x=d.interleaved;return x===null?(g.next=g,T0(d)):(g.next=x.next,x.next=g),d.interleaved=g,gr(u,b)}function gr(u,d){u.lanes|=d;var g=u.alternate;for(g!==null&&(g.lanes|=d),g=u,u=u.return;u!==null;)u.childLanes|=d,g=u.alternate,g!==null&&(g.childLanes|=d),g=u,u=u.return;return g.tag===3?g.stateNode:null}var Jr=!1;function E0(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C_(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function pr(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function eo(u,d,g){var b=u.updateQueue;if(b===null)return null;if(b=b.shared,(it&2)!==0){var x=b.pending;return x===null?d.next=d:(d.next=x.next,x.next=d),b.pending=d,gr(u,g)}return x=b.interleaved,x===null?(d.next=d,T0(b)):(d.next=x.next,x.next=d),b.interleaved=d,gr(u,g)}function ef(u,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194240)!==0)){var b=d.lanes;b&=u.pendingLanes,g|=b,d.lanes=g,Wp(u,g)}}function P_(u,d){var g=u.updateQueue,b=u.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var x=null,y=null;if(g=g.firstBaseUpdate,g!==null){do{var S={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};y===null?x=y=S:y=y.next=S,g=g.next}while(g!==null);y===null?x=y=d:y=y.next=d}else x=y=d;g={baseState:b.baseState,firstBaseUpdate:x,lastBaseUpdate:y,shared:b.shared,effects:b.effects},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=d:u.next=d,g.lastBaseUpdate=d}function tf(u,d,g,b){var x=u.updateQueue;Jr=!1;var y=x.firstBaseUpdate,S=x.lastBaseUpdate,E=x.shared.pending;if(E!==null){x.shared.pending=null;var I=E,Z=I.next;I.next=null,S===null?y=Z:S.next=Z,S=I;var re=u.alternate;re!==null&&(re=re.updateQueue,E=re.lastBaseUpdate,E!==S&&(E===null?re.firstBaseUpdate=Z:E.next=Z,re.lastBaseUpdate=I))}if(y!==null){var le=x.baseState;S=0,re=Z=I=null,E=y;do{var se=E.lane,ye=E.eventTime;if((b&se)===se){re!==null&&(re=re.next={eventTime:ye,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var Ce=u,Te=E;switch(se=d,ye=g,Te.tag){case 1:if(Ce=Te.payload,typeof Ce=="function"){le=Ce.call(ye,le,se);break e}le=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Te.payload,se=typeof Ce=="function"?Ce.call(ye,le,se):Ce,se==null)break e;le=ne({},le,se);break e;case 2:Jr=!0}}E.callback!==null&&E.lane!==0&&(u.flags|=64,se=x.effects,se===null?x.effects=[E]:se.push(E))}else ye={eventTime:ye,lane:se,tag:E.tag,payload:E.payload,callback:E.callback,next:null},re===null?(Z=re=ye,I=le):re=re.next=ye,S|=se;if(E=E.next,E===null){if(E=x.shared.pending,E===null)break;se=E,E=se.next,se.next=null,x.lastBaseUpdate=se,x.shared.pending=null}}while(!0);if(re===null&&(I=le),x.baseState=I,x.firstBaseUpdate=Z,x.lastBaseUpdate=re,d=x.shared.interleaved,d!==null){x=d;do S|=x.lane,x=x.next;while(x!==d)}else y===null&&(x.shared.lanes=0);jo|=S,u.lanes=S,u.memoizedState=le}}function T_(u,d,g){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var b=u[d],x=b.callback;if(x!==null){if(b.callback=null,b=g,typeof x!="function")throw Error(e(191,x));x.call(b)}}}var tu={},Fs=Gr(tu),iu=Gr(tu),nu=Gr(tu);function qo(u){if(u===tu)throw Error(e(174));return u}function A0(u,d){switch(vt(nu,d),vt(iu,u),vt(Fs,tu),u=d.nodeType,u){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:ki(null,"");break;default:u=u===8?d.parentNode:d,d=u.namespaceURI||null,u=u.tagName,d=ki(d,u)}Ct(Fs),vt(Fs,d)}function ua(){Ct(Fs),Ct(iu),Ct(nu)}function E_(u){qo(nu.current);var d=qo(Fs.current),g=ki(d,u.type);d!==g&&(vt(iu,u),vt(Fs,g))}function I0(u){iu.current===u&&(Ct(Fs),Ct(iu))}var Bt=Gr(0);function nf(u){for(var d=u;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var R0=[];function V0(){for(var u=0;u<R0.length;u++)R0[u]._workInProgressVersionPrimary=null;R0.length=0}var sf=Q.ReactCurrentDispatcher,M0=Q.ReactCurrentBatchConfig,Xo=0,$t=null,ri=null,fi=null,rf=!1,su=!1,ru=0,yL=0;function Mi(){throw Error(e(321))}function L0(u,d){if(d===null)return!1;for(var g=0;g<d.length&&g<u.length;g++)if(!ys(u[g],d[g]))return!1;return!0}function B0(u,d,g,b,x,y){if(Xo=y,$t=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,sf.current=u===null||u.memoizedState===null?SL:CL,u=g(b,x),su){y=0;do{if(su=!1,ru=0,25<=y)throw Error(e(301));y+=1,fi=ri=null,d.updateQueue=null,sf.current=PL,u=g(b,x)}while(su)}if(sf.current=af,d=ri!==null&&ri.next!==null,Xo=0,fi=ri=$t=null,rf=!1,d)throw Error(e(300));return u}function $0(){var u=ru!==0;return ru=0,u}function zs(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fi===null?$t.memoizedState=fi=u:fi=fi.next=u,fi}function Hn(){if(ri===null){var u=$t.alternate;u=u!==null?u.memoizedState:null}else u=ri.next;var d=fi===null?$t.memoizedState:fi.next;if(d!==null)fi=d,ri=u;else{if(u===null)throw Error(e(310));ri=u,u={memoizedState:ri.memoizedState,baseState:ri.baseState,baseQueue:ri.baseQueue,queue:ri.queue,next:null},fi===null?$t.memoizedState=fi=u:fi=fi.next=u}return fi}function ou(u,d){return typeof d=="function"?d(u):d}function Q0(u){var d=Hn(),g=d.queue;if(g===null)throw Error(e(311));g.lastRenderedReducer=u;var b=ri,x=b.baseQueue,y=g.pending;if(y!==null){if(x!==null){var S=x.next;x.next=y.next,y.next=S}b.baseQueue=x=y,g.pending=null}if(x!==null){y=x.next,b=b.baseState;var E=S=null,I=null,Z=y;do{var re=Z.lane;if((Xo&re)===re)I!==null&&(I=I.next={lane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),b=Z.hasEagerState?Z.eagerState:u(b,Z.action);else{var le={lane:re,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null};I===null?(E=I=le,S=b):I=I.next=le,$t.lanes|=re,jo|=re}Z=Z.next}while(Z!==null&&Z!==y);I===null?S=b:I.next=E,ys(b,d.memoizedState)||(on=!0),d.memoizedState=b,d.baseState=S,d.baseQueue=I,g.lastRenderedState=b}if(u=g.interleaved,u!==null){x=u;do y=x.lane,$t.lanes|=y,jo|=y,x=x.next;while(x!==u)}else x===null&&(g.lanes=0);return[d.memoizedState,g.dispatch]}function D0(u){var d=Hn(),g=d.queue;if(g===null)throw Error(e(311));g.lastRenderedReducer=u;var b=g.dispatch,x=g.pending,y=d.memoizedState;if(x!==null){g.pending=null;var S=x=x.next;do y=u(y,S.action),S=S.next;while(S!==x);ys(y,d.memoizedState)||(on=!0),d.memoizedState=y,d.baseQueue===null&&(d.baseState=y),g.lastRenderedState=y}return[y,b]}function A_(){}function I_(u,d){var g=$t,b=Hn(),x=d(),y=!ys(b.memoizedState,x);if(y&&(b.memoizedState=x,on=!0),b=b.queue,N0(M_.bind(null,g,b,u),[u]),b.getSnapshot!==d||y||fi!==null&&fi.memoizedState.tag&1){if(g.flags|=2048,lu(9,V_.bind(null,g,b,x,d),void 0,null),mi===null)throw Error(e(349));(Xo&30)!==0||R_(g,d,x)}return x}function R_(u,d,g){u.flags|=16384,u={getSnapshot:d,value:g},d=$t.updateQueue,d===null?(d={lastEffect:null,stores:null},$t.updateQueue=d,d.stores=[u]):(g=d.stores,g===null?d.stores=[u]:g.push(u))}function V_(u,d,g,b){d.value=g,d.getSnapshot=b,L_(d)&&B_(u)}function M_(u,d,g){return g(function(){L_(d)&&B_(u)})}function L_(u){var d=u.getSnapshot;u=u.value;try{var g=d();return!ys(u,g)}catch{return!0}}function B_(u){var d=gr(u,1);d!==null&&Cs(d,u,1,-1)}function $_(u){var d=zs();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:u},d.queue=u,u=u.dispatch=kL.bind(null,$t,u),[d.memoizedState,u]}function lu(u,d,g,b){return u={tag:u,create:d,destroy:g,deps:b,next:null},d=$t.updateQueue,d===null?(d={lastEffect:null,stores:null},$t.updateQueue=d,d.lastEffect=u.next=u):(g=d.lastEffect,g===null?d.lastEffect=u.next=u:(b=g.next,g.next=u,u.next=b,d.lastEffect=u)),u}function Q_(){return Hn().memoizedState}function of(u,d,g,b){var x=zs();$t.flags|=u,x.memoizedState=lu(1|d,g,void 0,b===void 0?null:b)}function lf(u,d,g,b){var x=Hn();b=b===void 0?null:b;var y=void 0;if(ri!==null){var S=ri.memoizedState;if(y=S.destroy,b!==null&&L0(b,S.deps)){x.memoizedState=lu(d,g,y,b);return}}$t.flags|=u,x.memoizedState=lu(1|d,g,y,b)}function D_(u,d){return of(8390656,8,u,d)}function N0(u,d){return lf(2048,8,u,d)}function N_(u,d){return lf(4,2,u,d)}function F_(u,d){return lf(4,4,u,d)}function z_(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function W_(u,d,g){return g=g!=null?g.concat([u]):null,lf(4,4,z_.bind(null,d,u),g)}function F0(){}function U_(u,d){var g=Hn();d=d===void 0?null:d;var b=g.memoizedState;return b!==null&&d!==null&&L0(d,b[1])?b[0]:(g.memoizedState=[u,d],u)}function Z_(u,d){var g=Hn();d=d===void 0?null:d;var b=g.memoizedState;return b!==null&&d!==null&&L0(d,b[1])?b[0]:(u=u(),g.memoizedState=[u,d],u)}function H_(u,d,g){return(Xo&21)===0?(u.baseState&&(u.baseState=!1,on=!0),u.memoizedState=g):(ys(g,d)||(g=vv(),$t.lanes|=g,jo|=g,u.baseState=!0),d)}function vL(u,d){var g=pt;pt=g!==0&&4>g?g:4,u(!0);var b=M0.transition;M0.transition={};try{u(!1),d()}finally{pt=g,M0.transition=b}}function q_(){return Hn().memoizedState}function _L(u,d,g){var b=so(u);if(g={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null},X_(u))j_(d,g);else if(g=S_(u,d,g,b),g!==null){var x=ji();Cs(g,u,b,x),G_(g,d,b)}}function kL(u,d,g){var b=so(u),x={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null};if(X_(u))j_(d,x);else{var y=u.alternate;if(u.lanes===0&&(y===null||y.lanes===0)&&(y=d.lastRenderedReducer,y!==null))try{var S=d.lastRenderedState,E=y(S,g);if(x.hasEagerState=!0,x.eagerState=E,ys(E,S)){var I=d.interleaved;I===null?(x.next=x,T0(d)):(x.next=I.next,I.next=x),d.interleaved=x;return}}catch{}finally{}g=S_(u,d,x,b),g!==null&&(x=ji(),Cs(g,u,b,x),G_(g,d,b))}}function X_(u){var d=u.alternate;return u===$t||d!==null&&d===$t}function j_(u,d){su=rf=!0;var g=u.pending;g===null?d.next=d:(d.next=g.next,g.next=d),u.pending=d}function G_(u,d,g){if((g&4194240)!==0){var b=d.lanes;b&=u.pendingLanes,g|=b,d.lanes=g,Wp(u,g)}}var af={readContext:Zn,useCallback:Mi,useContext:Mi,useEffect:Mi,useImperativeHandle:Mi,useInsertionEffect:Mi,useLayoutEffect:Mi,useMemo:Mi,useReducer:Mi,useRef:Mi,useState:Mi,useDebugValue:Mi,useDeferredValue:Mi,useTransition:Mi,useMutableSource:Mi,useSyncExternalStore:Mi,useId:Mi,unstable_isNewReconciler:!1},SL={readContext:Zn,useCallback:function(u,d){return zs().memoizedState=[u,d===void 0?null:d],u},useContext:Zn,useEffect:D_,useImperativeHandle:function(u,d,g){return g=g!=null?g.concat([u]):null,of(4194308,4,z_.bind(null,d,u),g)},useLayoutEffect:function(u,d){return of(4194308,4,u,d)},useInsertionEffect:function(u,d){return of(4,2,u,d)},useMemo:function(u,d){var g=zs();return d=d===void 0?null:d,u=u(),g.memoizedState=[u,d],u},useReducer:function(u,d,g){var b=zs();return d=g!==void 0?g(d):d,b.memoizedState=b.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},b.queue=u,u=u.dispatch=_L.bind(null,$t,u),[b.memoizedState,u]},useRef:function(u){var d=zs();return u={current:u},d.memoizedState=u},useState:$_,useDebugValue:F0,useDeferredValue:function(u){return zs().memoizedState=u},useTransition:function(){var u=$_(!1),d=u[0];return u=vL.bind(null,u[1]),zs().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,g){var b=$t,x=zs();if(It){if(g===void 0)throw Error(e(407));g=g()}else{if(g=d(),mi===null)throw Error(e(349));(Xo&30)!==0||R_(b,d,g)}x.memoizedState=g;var y={value:g,getSnapshot:d};return x.queue=y,D_(M_.bind(null,b,y,u),[u]),b.flags|=2048,lu(9,V_.bind(null,b,y,g,d),void 0,null),g},useId:function(){var u=zs(),d=mi.identifierPrefix;if(It){var g=mr,b=fr;g=(b&~(1<<32-xs(b)-1)).toString(32)+g,d=":"+d+"R"+g,g=ru++,0<g&&(d+="H"+g.toString(32)),d+=":"}else g=yL++,d=":"+d+"r"+g.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},CL={readContext:Zn,useCallback:U_,useContext:Zn,useEffect:N0,useImperativeHandle:W_,useInsertionEffect:N_,useLayoutEffect:F_,useMemo:Z_,useReducer:Q0,useRef:Q_,useState:function(){return Q0(ou)},useDebugValue:F0,useDeferredValue:function(u){var d=Hn();return H_(d,ri.memoizedState,u)},useTransition:function(){var u=Q0(ou)[0],d=Hn().memoizedState;return[u,d]},useMutableSource:A_,useSyncExternalStore:I_,useId:q_,unstable_isNewReconciler:!1},PL={readContext:Zn,useCallback:U_,useContext:Zn,useEffect:N0,useImperativeHandle:W_,useInsertionEffect:N_,useLayoutEffect:F_,useMemo:Z_,useReducer:D0,useRef:Q_,useState:function(){return D0(ou)},useDebugValue:F0,useDeferredValue:function(u){var d=Hn();return ri===null?d.memoizedState=u:H_(d,ri.memoizedState,u)},useTransition:function(){var u=D0(ou)[0],d=Hn().memoizedState;return[u,d]},useMutableSource:A_,useSyncExternalStore:I_,useId:q_,unstable_isNewReconciler:!1};function _s(u,d){if(u&&u.defaultProps){d=ne({},d),u=u.defaultProps;for(var g in u)d[g]===void 0&&(d[g]=u[g]);return d}return d}function z0(u,d,g,b){d=u.memoizedState,g=g(b,d),g=g==null?d:ne({},d,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var cf={isMounted:function(u){return(u=u._reactInternals)?Fo(u)===u:!1},enqueueSetState:function(u,d,g){u=u._reactInternals;var b=ji(),x=so(u),y=pr(b,x);y.payload=d,g!=null&&(y.callback=g),d=eo(u,y,x),d!==null&&(Cs(d,u,x,b),ef(d,u,x))},enqueueReplaceState:function(u,d,g){u=u._reactInternals;var b=ji(),x=so(u),y=pr(b,x);y.tag=1,y.payload=d,g!=null&&(y.callback=g),d=eo(u,y,x),d!==null&&(Cs(d,u,x,b),ef(d,u,x))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var g=ji(),b=so(u),x=pr(g,b);x.tag=2,d!=null&&(x.callback=d),d=eo(u,x,b),d!==null&&(Cs(d,u,b,g),ef(d,u,b))}};function Y_(u,d,g,b,x,y,S){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(b,y,S):d.prototype&&d.prototype.isPureReactComponent?!qc(g,b)||!qc(x,y):!0}function K_(u,d,g){var b=!1,x=Yr,y=d.contextType;return typeof y=="object"&&y!==null?y=Zn(y):(x=rn(d)?Wo:Vi.current,b=d.contextTypes,y=(b=b!=null)?na(u,x):Yr),d=new d(g,y),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=cf,u.stateNode=d,d._reactInternals=u,b&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=x,u.__reactInternalMemoizedMaskedChildContext=y),d}function J_(u,d,g,b){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,b),d.state!==u&&cf.enqueueReplaceState(d,d.state,null)}function W0(u,d,g,b){var x=u.stateNode;x.props=g,x.state=u.memoizedState,x.refs={},E0(u);var y=d.contextType;typeof y=="object"&&y!==null?x.context=Zn(y):(y=rn(d)?Wo:Vi.current,x.context=na(u,y)),x.state=u.memoizedState,y=d.getDerivedStateFromProps,typeof y=="function"&&(z0(u,d,y,g),x.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(d=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),d!==x.state&&cf.enqueueReplaceState(x,x.state,null),tf(u,g,x,b),x.state=u.memoizedState),typeof x.componentDidMount=="function"&&(u.flags|=4194308)}function ha(u,d){try{var g="",b=d;do g+=B(b),b=b.return;while(b);var x=g}catch(y){x=`
Error generating stack: `+y.message+`
`+y.stack}return{value:u,source:d,stack:x,digest:null}}function U0(u,d,g){return{value:u,source:null,stack:g??null,digest:d??null}}function Z0(u,d){try{console.error(d.value)}catch(g){setTimeout(function(){throw g})}}var TL=typeof WeakMap=="function"?WeakMap:Map;function ek(u,d,g){g=pr(-1,g),g.tag=3,g.payload={element:null};var b=d.value;return g.callback=function(){pf||(pf=!0,ow=b),Z0(u,d)},g}function tk(u,d,g){g=pr(-1,g),g.tag=3;var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var x=d.value;g.payload=function(){return b(x)},g.callback=function(){Z0(u,d)}}var y=u.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(g.callback=function(){Z0(u,d),typeof b!="function"&&(io===null?io=new Set([this]):io.add(this));var S=d.stack;this.componentDidCatch(d.value,{componentStack:S!==null?S:""})}),g}function ik(u,d,g){var b=u.pingCache;if(b===null){b=u.pingCache=new TL;var x=new Set;b.set(d,x)}else x=b.get(d),x===void 0&&(x=new Set,b.set(d,x));x.has(g)||(x.add(g),u=zL.bind(null,u,d,g),d.then(u,u))}function nk(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function sk(u,d,g,b,x){return(u.mode&1)===0?(u===d?u.flags|=65536:(u.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(d=pr(-1,1),d.tag=2,eo(g,d,1))),g.lanes|=1),u):(u.flags|=65536,u.lanes=x,u)}var EL=Q.ReactCurrentOwner,on=!1;function Xi(u,d,g,b){d.child=u===null?k_(d,null,g,b):la(d,u.child,g,b)}function rk(u,d,g,b,x){g=g.render;var y=d.ref;return ca(d,x),b=B0(u,d,g,b,y,x),g=$0(),u!==null&&!on?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~x,wr(u,d,x)):(It&&g&&O0(d),d.flags|=1,Xi(u,d,b,x),d.child)}function ok(u,d,g,b,x){if(u===null){var y=g.type;return typeof y=="function"&&!fw(y)&&y.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(d.tag=15,d.type=y,lk(u,d,y,b,x)):(u=vf(g.type,null,b,d,d.mode,x),u.ref=d.ref,u.return=d,d.child=u)}if(y=u.child,(u.lanes&x)===0){var S=y.memoizedProps;if(g=g.compare,g=g!==null?g:qc,g(S,b)&&u.ref===d.ref)return wr(u,d,x)}return d.flags|=1,u=oo(y,b),u.ref=d.ref,u.return=d,d.child=u}function lk(u,d,g,b,x){if(u!==null){var y=u.memoizedProps;if(qc(y,b)&&u.ref===d.ref)if(on=!1,d.pendingProps=b=y,(u.lanes&x)!==0)(u.flags&131072)!==0&&(on=!0);else return d.lanes=u.lanes,wr(u,d,x)}return H0(u,d,g,b,x)}function ak(u,d,g){var b=d.pendingProps,x=b.children,y=u!==null?u.memoizedState:null;if(b.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(fa,Tn),Tn|=g;else{if((g&1073741824)===0)return u=y!==null?y.baseLanes|g:g,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null,transitions:null},d.updateQueue=null,vt(fa,Tn),Tn|=u,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=y!==null?y.baseLanes:g,vt(fa,Tn),Tn|=b}else y!==null?(b=y.baseLanes|g,d.memoizedState=null):b=g,vt(fa,Tn),Tn|=b;return Xi(u,d,x,g),d.child}function ck(u,d){var g=d.ref;(u===null&&g!==null||u!==null&&u.ref!==g)&&(d.flags|=512,d.flags|=2097152)}function H0(u,d,g,b,x){var y=rn(g)?Wo:Vi.current;return y=na(d,y),ca(d,x),g=B0(u,d,g,b,y,x),b=$0(),u!==null&&!on?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~x,wr(u,d,x)):(It&&b&&O0(d),d.flags|=1,Xi(u,d,g,x),d.child)}function uk(u,d,g,b,x){if(rn(g)){var y=!0;Hd(d)}else y=!1;if(ca(d,x),d.stateNode===null)hf(u,d),K_(d,g,b),W0(d,g,b,x),b=!0;else if(u===null){var S=d.stateNode,E=d.memoizedProps;S.props=E;var I=S.context,Z=g.contextType;typeof Z=="object"&&Z!==null?Z=Zn(Z):(Z=rn(g)?Wo:Vi.current,Z=na(d,Z));var re=g.getDerivedStateFromProps,le=typeof re=="function"||typeof S.getSnapshotBeforeUpdate=="function";le||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(E!==b||I!==Z)&&J_(d,S,b,Z),Jr=!1;var se=d.memoizedState;S.state=se,tf(d,b,S,x),I=d.memoizedState,E!==b||se!==I||sn.current||Jr?(typeof re=="function"&&(z0(d,g,re,b),I=d.memoizedState),(E=Jr||Y_(d,g,E,b,se,I,Z))?(le||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(d.flags|=4194308)):(typeof S.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=I),S.props=b,S.state=I,S.context=Z,b=E):(typeof S.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{S=d.stateNode,C_(u,d),E=d.memoizedProps,Z=d.type===d.elementType?E:_s(d.type,E),S.props=Z,le=d.pendingProps,se=S.context,I=g.contextType,typeof I=="object"&&I!==null?I=Zn(I):(I=rn(g)?Wo:Vi.current,I=na(d,I));var ye=g.getDerivedStateFromProps;(re=typeof ye=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(E!==le||se!==I)&&J_(d,S,b,I),Jr=!1,se=d.memoizedState,S.state=se,tf(d,b,S,x);var Ce=d.memoizedState;E!==le||se!==Ce||sn.current||Jr?(typeof ye=="function"&&(z0(d,g,ye,b),Ce=d.memoizedState),(Z=Jr||Y_(d,g,Z,b,se,Ce,I)||!1)?(re||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(b,Ce,I),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(b,Ce,I)),typeof S.componentDidUpdate=="function"&&(d.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof S.componentDidUpdate!="function"||E===u.memoizedProps&&se===u.memoizedState||(d.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||E===u.memoizedProps&&se===u.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=Ce),S.props=b,S.state=Ce,S.context=I,b=Z):(typeof S.componentDidUpdate!="function"||E===u.memoizedProps&&se===u.memoizedState||(d.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||E===u.memoizedProps&&se===u.memoizedState||(d.flags|=1024),b=!1)}return q0(u,d,g,b,y,x)}function q0(u,d,g,b,x,y){ck(u,d);var S=(d.flags&128)!==0;if(!b&&!S)return x&&g_(d,g,!1),wr(u,d,y);b=d.stateNode,EL.current=d;var E=S&&typeof g.getDerivedStateFromError!="function"?null:b.render();return d.flags|=1,u!==null&&S?(d.child=la(d,u.child,null,y),d.child=la(d,null,E,y)):Xi(u,d,E,y),d.memoizedState=b.state,x&&g_(d,g,!0),d.child}function hk(u){var d=u.stateNode;d.pendingContext?f_(u,d.pendingContext,d.pendingContext!==d.context):d.context&&f_(u,d.context,!1),A0(u,d.containerInfo)}function dk(u,d,g,b,x){return oa(),_0(x),d.flags|=256,Xi(u,d,g,b),d.child}var X0={dehydrated:null,treeContext:null,retryLane:0};function j0(u){return{baseLanes:u,cachePool:null,transitions:null}}function fk(u,d,g){var b=d.pendingProps,x=Bt.current,y=!1,S=(d.flags&128)!==0,E;if((E=S)||(E=u!==null&&u.memoizedState===null?!1:(x&2)!==0),E?(y=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(x|=1),vt(Bt,x&1),u===null)return v0(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((d.mode&1)===0?d.lanes=1:u.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(S=b.children,u=b.fallback,y?(b=d.mode,y=d.child,S={mode:"hidden",children:S},(b&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=S):y=_f(S,b,0,null),u=Jo(u,b,g,null),y.return=d,u.return=d,y.sibling=u,d.child=y,d.child.memoizedState=j0(g),d.memoizedState=X0,u):G0(d,S));if(x=u.memoizedState,x!==null&&(E=x.dehydrated,E!==null))return AL(u,d,S,b,E,x,g);if(y){y=b.fallback,S=d.mode,x=u.child,E=x.sibling;var I={mode:"hidden",children:b.children};return(S&1)===0&&d.child!==x?(b=d.child,b.childLanes=0,b.pendingProps=I,d.deletions=null):(b=oo(x,I),b.subtreeFlags=x.subtreeFlags&14680064),E!==null?y=oo(E,y):(y=Jo(y,S,g,null),y.flags|=2),y.return=d,b.return=d,b.sibling=y,d.child=b,b=y,y=d.child,S=u.child.memoizedState,S=S===null?j0(g):{baseLanes:S.baseLanes|g,cachePool:null,transitions:S.transitions},y.memoizedState=S,y.childLanes=u.childLanes&~g,d.memoizedState=X0,b}return y=u.child,u=y.sibling,b=oo(y,{mode:"visible",children:b.children}),(d.mode&1)===0&&(b.lanes=g),b.return=d,b.sibling=null,u!==null&&(g=d.deletions,g===null?(d.deletions=[u],d.flags|=16):g.push(u)),d.child=b,d.memoizedState=null,b}function G0(u,d){return d=_f({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function uf(u,d,g,b){return b!==null&&_0(b),la(d,u.child,null,g),u=G0(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function AL(u,d,g,b,x,y,S){if(g)return d.flags&256?(d.flags&=-257,b=U0(Error(e(422))),uf(u,d,S,b)):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(y=b.fallback,x=d.mode,b=_f({mode:"visible",children:b.children},x,0,null),y=Jo(y,x,S,null),y.flags|=2,b.return=d,y.return=d,b.sibling=y,d.child=b,(d.mode&1)!==0&&la(d,u.child,null,S),d.child.memoizedState=j0(S),d.memoizedState=X0,y);if((d.mode&1)===0)return uf(u,d,S,null);if(x.data==="$!"){if(b=x.nextSibling&&x.nextSibling.dataset,b)var E=b.dgst;return b=E,y=Error(e(419)),b=U0(y,b,void 0),uf(u,d,S,b)}if(E=(S&u.childLanes)!==0,on||E){if(b=mi,b!==null){switch(S&-S){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(b.suspendedLanes|S))!==0?0:x,x!==0&&x!==y.retryLane&&(y.retryLane=x,gr(u,x),Cs(b,u,x,-1))}return dw(),b=U0(Error(e(421))),uf(u,d,S,b)}return x.data==="$?"?(d.flags|=128,d.child=u.child,d=WL.bind(null,u),x._reactRetry=d,null):(u=y.treeContext,Pn=jr(x.nextSibling),Cn=d,It=!0,vs=null,u!==null&&(Wn[Un++]=fr,Wn[Un++]=mr,Wn[Un++]=Uo,fr=u.id,mr=u.overflow,Uo=d),d=G0(d,b.children),d.flags|=4096,d)}function mk(u,d,g){u.lanes|=d;var b=u.alternate;b!==null&&(b.lanes|=d),P0(u.return,d,g)}function Y0(u,d,g,b,x){var y=u.memoizedState;y===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:x}:(y.isBackwards=d,y.rendering=null,y.renderingStartTime=0,y.last=b,y.tail=g,y.tailMode=x)}function gk(u,d,g){var b=d.pendingProps,x=b.revealOrder,y=b.tail;if(Xi(u,d,b.children,g),b=Bt.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&mk(u,g,d);else if(u.tag===19)mk(u,g,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}b&=1}if(vt(Bt,b),(d.mode&1)===0)d.memoizedState=null;else switch(x){case"forwards":for(g=d.child,x=null;g!==null;)u=g.alternate,u!==null&&nf(u)===null&&(x=g),g=g.sibling;g=x,g===null?(x=d.child,d.child=null):(x=g.sibling,g.sibling=null),Y0(d,!1,x,g,y);break;case"backwards":for(g=null,x=d.child,d.child=null;x!==null;){if(u=x.alternate,u!==null&&nf(u)===null){d.child=x;break}u=x.sibling,x.sibling=g,g=x,x=u}Y0(d,!0,g,null,y);break;case"together":Y0(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function hf(u,d){(d.mode&1)===0&&u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2)}function wr(u,d,g){if(u!==null&&(d.dependencies=u.dependencies),jo|=d.lanes,(g&d.childLanes)===0)return null;if(u!==null&&d.child!==u.child)throw Error(e(153));if(d.child!==null){for(u=d.child,g=oo(u,u.pendingProps),d.child=g,g.return=d;u.sibling!==null;)u=u.sibling,g=g.sibling=oo(u,u.pendingProps),g.return=d;g.sibling=null}return d.child}function IL(u,d,g){switch(d.tag){case 3:hk(d),oa();break;case 5:E_(d);break;case 1:rn(d.type)&&Hd(d);break;case 4:A0(d,d.stateNode.containerInfo);break;case 10:var b=d.type._context,x=d.memoizedProps.value;vt(Kd,b._currentValue),b._currentValue=x;break;case 13:if(b=d.memoizedState,b!==null)return b.dehydrated!==null?(vt(Bt,Bt.current&1),d.flags|=128,null):(g&d.child.childLanes)!==0?fk(u,d,g):(vt(Bt,Bt.current&1),u=wr(u,d,g),u!==null?u.sibling:null);vt(Bt,Bt.current&1);break;case 19:if(b=(g&d.childLanes)!==0,(u.flags&128)!==0){if(b)return gk(u,d,g);d.flags|=128}if(x=d.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),vt(Bt,Bt.current),b)break;return null;case 22:case 23:return d.lanes=0,ak(u,d,g)}return wr(u,d,g)}var pk,K0,wk,bk;pk=function(u,d){for(var g=d.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},K0=function(){},wk=function(u,d,g,b){var x=u.memoizedProps;if(x!==b){u=d.stateNode,qo(Fs.current);var y=null;switch(g){case"input":x=qe(u,x),b=qe(u,b),y=[];break;case"select":x=ne({},x,{value:void 0}),b=ne({},b,{value:void 0}),y=[];break;case"textarea":x=Ri(u,x),b=Ri(u,b),y=[];break;default:typeof x.onClick!="function"&&typeof b.onClick=="function"&&(u.onclick=Wd)}Ic(g,b);var S;g=null;for(Z in x)if(!b.hasOwnProperty(Z)&&x.hasOwnProperty(Z)&&x[Z]!=null)if(Z==="style"){var E=x[Z];for(S in E)E.hasOwnProperty(S)&&(g||(g={}),g[S]="")}else Z!=="dangerouslySetInnerHTML"&&Z!=="children"&&Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(n.hasOwnProperty(Z)?y||(y=[]):(y=y||[]).push(Z,null));for(Z in b){var I=b[Z];if(E=x!=null?x[Z]:void 0,b.hasOwnProperty(Z)&&I!==E&&(I!=null||E!=null))if(Z==="style")if(E){for(S in E)!E.hasOwnProperty(S)||I&&I.hasOwnProperty(S)||(g||(g={}),g[S]="");for(S in I)I.hasOwnProperty(S)&&E[S]!==I[S]&&(g||(g={}),g[S]=I[S])}else g||(y||(y=[]),y.push(Z,g)),g=I;else Z==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,E=E?E.__html:void 0,I!=null&&E!==I&&(y=y||[]).push(Z,I)):Z==="children"?typeof I!="string"&&typeof I!="number"||(y=y||[]).push(Z,""+I):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&(n.hasOwnProperty(Z)?(I!=null&&Z==="onScroll"&&St("scroll",u),y||E===I||(y=[])):(y=y||[]).push(Z,I))}g&&(y=y||[]).push("style",g);var Z=y;(d.updateQueue=Z)&&(d.flags|=4)}},bk=function(u,d,g,b){g!==b&&(d.flags|=4)};function au(u,d){if(!It)switch(u.tailMode){case"hidden":d=u.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:b.sibling=null}}function Li(u){var d=u.alternate!==null&&u.alternate.child===u.child,g=0,b=0;if(d)for(var x=u.child;x!==null;)g|=x.lanes|x.childLanes,b|=x.subtreeFlags&14680064,b|=x.flags&14680064,x.return=u,x=x.sibling;else for(x=u.child;x!==null;)g|=x.lanes|x.childLanes,b|=x.subtreeFlags,b|=x.flags,x.return=u,x=x.sibling;return u.subtreeFlags|=b,u.childLanes=g,d}function RL(u,d,g){var b=d.pendingProps;switch(x0(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Li(d),null;case 1:return rn(d.type)&&Zd(),Li(d),null;case 3:return b=d.stateNode,ua(),Ct(sn),Ct(Vi),V0(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(u===null||u.child===null)&&(Gd(d)?d.flags|=4:u===null||u.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,vs!==null&&(cw(vs),vs=null))),K0(u,d),Li(d),null;case 5:I0(d);var x=qo(nu.current);if(g=d.type,u!==null&&d.stateNode!=null)wk(u,d,g,b,x),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!b){if(d.stateNode===null)throw Error(e(166));return Li(d),null}if(u=qo(Fs.current),Gd(d)){b=d.stateNode,g=d.type;var y=d.memoizedProps;switch(b[Ns]=d,b[Kc]=y,u=(d.mode&1)!==0,g){case"dialog":St("cancel",b),St("close",b);break;case"iframe":case"object":case"embed":St("load",b);break;case"video":case"audio":for(x=0;x<jc.length;x++)St(jc[x],b);break;case"source":St("error",b);break;case"img":case"image":case"link":St("error",b),St("load",b);break;case"details":St("toggle",b);break;case"input":_i(b,y),St("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!y.multiple},St("invalid",b);break;case"textarea":si(b,y),St("invalid",b)}Ic(g,y),x=null;for(var S in y)if(y.hasOwnProperty(S)){var E=y[S];S==="children"?typeof E=="string"?b.textContent!==E&&(y.suppressHydrationWarning!==!0&&zd(b.textContent,E,u),x=["children",E]):typeof E=="number"&&b.textContent!==""+E&&(y.suppressHydrationWarning!==!0&&zd(b.textContent,E,u),x=["children",""+E]):n.hasOwnProperty(S)&&E!=null&&S==="onScroll"&&St("scroll",b)}switch(g){case"input":Qe(b),di(b,y,!0);break;case"textarea":Qe(b),Jt(b);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(b.onclick=Wd)}b=x,d.updateQueue=b,b!==null&&(d.flags|=4)}else{S=x.nodeType===9?x:x.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=Ue(g)),u==="http://www.w3.org/1999/xhtml"?g==="script"?(u=S.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof b.is=="string"?u=S.createElement(g,{is:b.is}):(u=S.createElement(g),g==="select"&&(S=u,b.multiple?S.multiple=!0:b.size&&(S.size=b.size))):u=S.createElementNS(u,g),u[Ns]=d,u[Kc]=b,pk(u,d,!1,!1),d.stateNode=u;e:{switch(S=No(g,b),g){case"dialog":St("cancel",u),St("close",u),x=b;break;case"iframe":case"object":case"embed":St("load",u),x=b;break;case"video":case"audio":for(x=0;x<jc.length;x++)St(jc[x],u);x=b;break;case"source":St("error",u),x=b;break;case"img":case"image":case"link":St("error",u),St("load",u),x=b;break;case"details":St("toggle",u),x=b;break;case"input":_i(u,b),x=qe(u,b),St("invalid",u);break;case"option":x=b;break;case"select":u._wrapperState={wasMultiple:!!b.multiple},x=ne({},b,{value:void 0}),St("invalid",u);break;case"textarea":si(u,b),x=Ri(u,b),St("invalid",u);break;default:x=b}Ic(g,x),E=x;for(y in E)if(E.hasOwnProperty(y)){var I=E[y];y==="style"?Ac(u,I):y==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&bs(u,I)):y==="children"?typeof I=="string"?(g!=="textarea"||I!=="")&&kn(u,I):typeof I=="number"&&kn(u,""+I):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(n.hasOwnProperty(y)?I!=null&&y==="onScroll"&&St("scroll",u):I!=null&&V(u,y,I,S))}switch(g){case"input":Qe(u),di(u,b,!1);break;case"textarea":Qe(u),Jt(u);break;case"option":b.value!=null&&u.setAttribute("value",""+ge(b.value));break;case"select":u.multiple=!!b.multiple,y=b.value,y!=null?qi(u,!!b.multiple,y,!1):b.defaultValue!=null&&qi(u,!!b.multiple,b.defaultValue,!0);break;default:typeof x.onClick=="function"&&(u.onclick=Wd)}switch(g){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Li(d),null;case 6:if(u&&d.stateNode!=null)bk(u,d,u.memoizedProps,b);else{if(typeof b!="string"&&d.stateNode===null)throw Error(e(166));if(g=qo(nu.current),qo(Fs.current),Gd(d)){if(b=d.stateNode,g=d.memoizedProps,b[Ns]=d,(y=b.nodeValue!==g)&&(u=Cn,u!==null))switch(u.tag){case 3:zd(b.nodeValue,g,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&zd(b.nodeValue,g,(u.mode&1)!==0)}y&&(d.flags|=4)}else b=(g.nodeType===9?g:g.ownerDocument).createTextNode(b),b[Ns]=d,d.stateNode=b}return Li(d),null;case 13:if(Ct(Bt),b=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(It&&Pn!==null&&(d.mode&1)!==0&&(d.flags&128)===0)y_(),oa(),d.flags|=98560,y=!1;else if(y=Gd(d),b!==null&&b.dehydrated!==null){if(u===null){if(!y)throw Error(e(318));if(y=d.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(e(317));y[Ns]=d}else oa(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Li(d),y=!1}else vs!==null&&(cw(vs),vs=null),y=!0;if(!y)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=g,d):(b=b!==null,b!==(u!==null&&u.memoizedState!==null)&&b&&(d.child.flags|=8192,(d.mode&1)!==0&&(u===null||(Bt.current&1)!==0?oi===0&&(oi=3):dw())),d.updateQueue!==null&&(d.flags|=4),Li(d),null);case 4:return ua(),K0(u,d),u===null&&Gc(d.stateNode.containerInfo),Li(d),null;case 10:return C0(d.type._context),Li(d),null;case 17:return rn(d.type)&&Zd(),Li(d),null;case 19:if(Ct(Bt),y=d.memoizedState,y===null)return Li(d),null;if(b=(d.flags&128)!==0,S=y.rendering,S===null)if(b)au(y,!1);else{if(oi!==0||u!==null&&(u.flags&128)!==0)for(u=d.child;u!==null;){if(S=nf(u),S!==null){for(d.flags|=128,au(y,!1),b=S.updateQueue,b!==null&&(d.updateQueue=b,d.flags|=4),d.subtreeFlags=0,b=g,g=d.child;g!==null;)y=g,u=b,y.flags&=14680066,S=y.alternate,S===null?(y.childLanes=0,y.lanes=u,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=S.childLanes,y.lanes=S.lanes,y.child=S.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=S.memoizedProps,y.memoizedState=S.memoizedState,y.updateQueue=S.updateQueue,y.type=S.type,u=S.dependencies,y.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),g=g.sibling;return vt(Bt,Bt.current&1|2),d.child}u=u.sibling}y.tail!==null&&Zt()>ma&&(d.flags|=128,b=!0,au(y,!1),d.lanes=4194304)}else{if(!b)if(u=nf(S),u!==null){if(d.flags|=128,b=!0,g=u.updateQueue,g!==null&&(d.updateQueue=g,d.flags|=4),au(y,!0),y.tail===null&&y.tailMode==="hidden"&&!S.alternate&&!It)return Li(d),null}else 2*Zt()-y.renderingStartTime>ma&&g!==1073741824&&(d.flags|=128,b=!0,au(y,!1),d.lanes=4194304);y.isBackwards?(S.sibling=d.child,d.child=S):(g=y.last,g!==null?g.sibling=S:d.child=S,y.last=S)}return y.tail!==null?(d=y.tail,y.rendering=d,y.tail=d.sibling,y.renderingStartTime=Zt(),d.sibling=null,g=Bt.current,vt(Bt,b?g&1|2:g&1),d):(Li(d),null);case 22:case 23:return hw(),b=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==b&&(d.flags|=8192),b&&(d.mode&1)!==0?(Tn&1073741824)!==0&&(Li(d),d.subtreeFlags&6&&(d.flags|=8192)):Li(d),null;case 24:return null;case 25:return null}throw Error(e(156,d.tag))}function VL(u,d){switch(x0(d),d.tag){case 1:return rn(d.type)&&Zd(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return ua(),Ct(sn),Ct(Vi),V0(),u=d.flags,(u&65536)!==0&&(u&128)===0?(d.flags=u&-65537|128,d):null;case 5:return I0(d),null;case 13:if(Ct(Bt),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(e(340));oa()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return Ct(Bt),null;case 4:return ua(),null;case 10:return C0(d.type._context),null;case 22:case 23:return hw(),null;case 24:return null;default:return null}}var df=!1,Bi=!1,ML=typeof WeakSet=="function"?WeakSet:Set,ke=null;function da(u,d){var g=u.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(b){Ft(u,d,b)}else g.current=null}function J0(u,d,g){try{g()}catch(b){Ft(u,d,b)}}var Ok=!1;function LL(u,d){if(h0=Id,u=Yv(),n0(u)){if("selectionStart"in u)var g={start:u.selectionStart,end:u.selectionEnd};else e:{g=(g=u.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var x=b.anchorOffset,y=b.focusNode;b=b.focusOffset;try{g.nodeType,y.nodeType}catch{g=null;break e}var S=0,E=-1,I=-1,Z=0,re=0,le=u,se=null;t:for(;;){for(var ye;le!==g||x!==0&&le.nodeType!==3||(E=S+x),le!==y||b!==0&&le.nodeType!==3||(I=S+b),le.nodeType===3&&(S+=le.nodeValue.length),(ye=le.firstChild)!==null;)se=le,le=ye;for(;;){if(le===u)break t;if(se===g&&++Z===x&&(E=S),se===y&&++re===b&&(I=S),(ye=le.nextSibling)!==null)break;le=se,se=le.parentNode}le=ye}g=E===-1||I===-1?null:{start:E,end:I}}else g=null}g=g||{start:0,end:0}}else g=null;for(d0={focusedElem:u,selectionRange:g},Id=!1,ke=d;ke!==null;)if(d=ke,u=d.child,(d.subtreeFlags&1028)!==0&&u!==null)u.return=d,ke=u;else for(;ke!==null;){d=ke;try{var Ce=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var Te=Ce.memoizedProps,Ht=Ce.memoizedState,N=d.stateNode,L=N.getSnapshotBeforeUpdate(d.elementType===d.type?Te:_s(d.type,Te),Ht);N.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var z=d.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(ae){Ft(d,d.return,ae)}if(u=d.sibling,u!==null){u.return=d.return,ke=u;break}ke=d.return}return Ce=Ok,Ok=!1,Ce}function cu(u,d,g){var b=d.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var x=b=b.next;do{if((x.tag&u)===u){var y=x.destroy;x.destroy=void 0,y!==void 0&&J0(d,g,y)}x=x.next}while(x!==b)}}function ff(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&u)===u){var b=g.create;g.destroy=b()}g=g.next}while(g!==d)}}function ew(u){var d=u.ref;if(d!==null){var g=u.stateNode;switch(u.tag){case 5:u=g;break;default:u=g}typeof d=="function"?d(u):d.current=u}}function xk(u){var d=u.alternate;d!==null&&(u.alternate=null,xk(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&(delete d[Ns],delete d[Kc],delete d[p0],delete d[wL],delete d[bL])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function yk(u){return u.tag===5||u.tag===3||u.tag===4}function vk(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||yk(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function tw(u,d,g){var b=u.tag;if(b===5||b===6)u=u.stateNode,d?g.nodeType===8?g.parentNode.insertBefore(u,d):g.insertBefore(u,d):(g.nodeType===8?(d=g.parentNode,d.insertBefore(u,g)):(d=g,d.appendChild(u)),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=Wd));else if(b!==4&&(u=u.child,u!==null))for(tw(u,d,g),u=u.sibling;u!==null;)tw(u,d,g),u=u.sibling}function iw(u,d,g){var b=u.tag;if(b===5||b===6)u=u.stateNode,d?g.insertBefore(u,d):g.appendChild(u);else if(b!==4&&(u=u.child,u!==null))for(iw(u,d,g),u=u.sibling;u!==null;)iw(u,d,g),u=u.sibling}var Si=null,ks=!1;function to(u,d,g){for(g=g.child;g!==null;)_k(u,d,g),g=g.sibling}function _k(u,d,g){if(Ds&&typeof Ds.onCommitFiberUnmount=="function")try{Ds.onCommitFiberUnmount(Sd,g)}catch{}switch(g.tag){case 5:Bi||da(g,d);case 6:var b=Si,x=ks;Si=null,to(u,d,g),Si=b,ks=x,Si!==null&&(ks?(u=Si,g=g.stateNode,u.nodeType===8?u.parentNode.removeChild(g):u.removeChild(g)):Si.removeChild(g.stateNode));break;case 18:Si!==null&&(ks?(u=Si,g=g.stateNode,u.nodeType===8?g0(u.parentNode,g):u.nodeType===1&&g0(u,g),Fc(u)):g0(Si,g.stateNode));break;case 4:b=Si,x=ks,Si=g.stateNode.containerInfo,ks=!0,to(u,d,g),Si=b,ks=x;break;case 0:case 11:case 14:case 15:if(!Bi&&(b=g.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){x=b=b.next;do{var y=x,S=y.destroy;y=y.tag,S!==void 0&&((y&2)!==0||(y&4)!==0)&&J0(g,d,S),x=x.next}while(x!==b)}to(u,d,g);break;case 1:if(!Bi&&(da(g,d),b=g.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=g.memoizedProps,b.state=g.memoizedState,b.componentWillUnmount()}catch(E){Ft(g,d,E)}to(u,d,g);break;case 21:to(u,d,g);break;case 22:g.mode&1?(Bi=(b=Bi)||g.memoizedState!==null,to(u,d,g),Bi=b):to(u,d,g);break;default:to(u,d,g)}}function kk(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var g=u.stateNode;g===null&&(g=u.stateNode=new ML),d.forEach(function(b){var x=UL.bind(null,u,b);g.has(b)||(g.add(b),b.then(x,x))})}}function Ss(u,d){var g=d.deletions;if(g!==null)for(var b=0;b<g.length;b++){var x=g[b];try{var y=u,S=d,E=S;e:for(;E!==null;){switch(E.tag){case 5:Si=E.stateNode,ks=!1;break e;case 3:Si=E.stateNode.containerInfo,ks=!0;break e;case 4:Si=E.stateNode.containerInfo,ks=!0;break e}E=E.return}if(Si===null)throw Error(e(160));_k(y,S,x),Si=null,ks=!1;var I=x.alternate;I!==null&&(I.return=null),x.return=null}catch(Z){Ft(x,d,Z)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)Sk(d,u),d=d.sibling}function Sk(u,d){var g=u.alternate,b=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(Ss(d,u),Ws(u),b&4){try{cu(3,u,u.return),ff(3,u)}catch(Te){Ft(u,u.return,Te)}try{cu(5,u,u.return)}catch(Te){Ft(u,u.return,Te)}}break;case 1:Ss(d,u),Ws(u),b&512&&g!==null&&da(g,g.return);break;case 5:if(Ss(d,u),Ws(u),b&512&&g!==null&&da(g,g.return),u.flags&32){var x=u.stateNode;try{kn(x,"")}catch(Te){Ft(u,u.return,Te)}}if(b&4&&(x=u.stateNode,x!=null)){var y=u.memoizedProps,S=g!==null?g.memoizedProps:y,E=u.type,I=u.updateQueue;if(u.updateQueue=null,I!==null)try{E==="input"&&y.type==="radio"&&y.name!=null&&ni(x,y),No(E,S);var Z=No(E,y);for(S=0;S<I.length;S+=2){var re=I[S],le=I[S+1];re==="style"?Ac(x,le):re==="dangerouslySetInnerHTML"?bs(x,le):re==="children"?kn(x,le):V(x,re,le,Z)}switch(E){case"input":Xe(x,y);break;case"textarea":je(x,y);break;case"select":var se=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!y.multiple;var ye=y.value;ye!=null?qi(x,!!y.multiple,ye,!1):se!==!!y.multiple&&(y.defaultValue!=null?qi(x,!!y.multiple,y.defaultValue,!0):qi(x,!!y.multiple,y.multiple?[]:"",!1))}x[Kc]=y}catch(Te){Ft(u,u.return,Te)}}break;case 6:if(Ss(d,u),Ws(u),b&4){if(u.stateNode===null)throw Error(e(162));x=u.stateNode,y=u.memoizedProps;try{x.nodeValue=y}catch(Te){Ft(u,u.return,Te)}}break;case 3:if(Ss(d,u),Ws(u),b&4&&g!==null&&g.memoizedState.isDehydrated)try{Fc(d.containerInfo)}catch(Te){Ft(u,u.return,Te)}break;case 4:Ss(d,u),Ws(u);break;case 13:Ss(d,u),Ws(u),x=u.child,x.flags&8192&&(y=x.memoizedState!==null,x.stateNode.isHidden=y,!y||x.alternate!==null&&x.alternate.memoizedState!==null||(rw=Zt())),b&4&&kk(u);break;case 22:if(re=g!==null&&g.memoizedState!==null,u.mode&1?(Bi=(Z=Bi)||re,Ss(d,u),Bi=Z):Ss(d,u),Ws(u),b&8192){if(Z=u.memoizedState!==null,(u.stateNode.isHidden=Z)&&!re&&(u.mode&1)!==0)for(ke=u,re=u.child;re!==null;){for(le=ke=re;ke!==null;){switch(se=ke,ye=se.child,se.tag){case 0:case 11:case 14:case 15:cu(4,se,se.return);break;case 1:da(se,se.return);var Ce=se.stateNode;if(typeof Ce.componentWillUnmount=="function"){b=se,g=se.return;try{d=b,Ce.props=d.memoizedProps,Ce.state=d.memoizedState,Ce.componentWillUnmount()}catch(Te){Ft(b,g,Te)}}break;case 5:da(se,se.return);break;case 22:if(se.memoizedState!==null){Tk(le);continue}}ye!==null?(ye.return=se,ke=ye):Tk(le)}re=re.sibling}e:for(re=null,le=u;;){if(le.tag===5){if(re===null){re=le;try{x=le.stateNode,Z?(y=x.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(E=le.stateNode,I=le.memoizedProps.style,S=I!=null&&I.hasOwnProperty("display")?I.display:null,E.style.display=dt("display",S))}catch(Te){Ft(u,u.return,Te)}}}else if(le.tag===6){if(re===null)try{le.stateNode.nodeValue=Z?"":le.memoizedProps}catch(Te){Ft(u,u.return,Te)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===u)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===u)break e;for(;le.sibling===null;){if(le.return===null||le.return===u)break e;re===le&&(re=null),le=le.return}re===le&&(re=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Ss(d,u),Ws(u),b&4&&kk(u);break;case 21:break;default:Ss(d,u),Ws(u)}}function Ws(u){var d=u.flags;if(d&2){try{e:{for(var g=u.return;g!==null;){if(yk(g)){var b=g;break e}g=g.return}throw Error(e(160))}switch(b.tag){case 5:var x=b.stateNode;b.flags&32&&(kn(x,""),b.flags&=-33);var y=vk(u);iw(u,y,x);break;case 3:case 4:var S=b.stateNode.containerInfo,E=vk(u);tw(u,E,S);break;default:throw Error(e(161))}}catch(I){Ft(u,u.return,I)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function BL(u,d,g){ke=u,Ck(u)}function Ck(u,d,g){for(var b=(u.mode&1)!==0;ke!==null;){var x=ke,y=x.child;if(x.tag===22&&b){var S=x.memoizedState!==null||df;if(!S){var E=x.alternate,I=E!==null&&E.memoizedState!==null||Bi;E=df;var Z=Bi;if(df=S,(Bi=I)&&!Z)for(ke=x;ke!==null;)S=ke,I=S.child,S.tag===22&&S.memoizedState!==null?Ek(x):I!==null?(I.return=S,ke=I):Ek(x);for(;y!==null;)ke=y,Ck(y),y=y.sibling;ke=x,df=E,Bi=Z}Pk(u)}else(x.subtreeFlags&8772)!==0&&y!==null?(y.return=x,ke=y):Pk(u)}}function Pk(u){for(;ke!==null;){var d=ke;if((d.flags&8772)!==0){var g=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Bi||ff(5,d);break;case 1:var b=d.stateNode;if(d.flags&4&&!Bi)if(g===null)b.componentDidMount();else{var x=d.elementType===d.type?g.memoizedProps:_s(d.type,g.memoizedProps);b.componentDidUpdate(x,g.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var y=d.updateQueue;y!==null&&T_(d,y,b);break;case 3:var S=d.updateQueue;if(S!==null){if(g=null,d.child!==null)switch(d.child.tag){case 5:g=d.child.stateNode;break;case 1:g=d.child.stateNode}T_(d,S,g)}break;case 5:var E=d.stateNode;if(g===null&&d.flags&4){g=E;var I=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":I.autoFocus&&g.focus();break;case"img":I.src&&(g.src=I.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Z=d.alternate;if(Z!==null){var re=Z.memoizedState;if(re!==null){var le=re.dehydrated;le!==null&&Fc(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Bi||d.flags&512&&ew(d)}catch(se){Ft(d,d.return,se)}}if(d===u){ke=null;break}if(g=d.sibling,g!==null){g.return=d.return,ke=g;break}ke=d.return}}function Tk(u){for(;ke!==null;){var d=ke;if(d===u){ke=null;break}var g=d.sibling;if(g!==null){g.return=d.return,ke=g;break}ke=d.return}}function Ek(u){for(;ke!==null;){var d=ke;try{switch(d.tag){case 0:case 11:case 15:var g=d.return;try{ff(4,d)}catch(I){Ft(d,g,I)}break;case 1:var b=d.stateNode;if(typeof b.componentDidMount=="function"){var x=d.return;try{b.componentDidMount()}catch(I){Ft(d,x,I)}}var y=d.return;try{ew(d)}catch(I){Ft(d,y,I)}break;case 5:var S=d.return;try{ew(d)}catch(I){Ft(d,S,I)}}}catch(I){Ft(d,d.return,I)}if(d===u){ke=null;break}var E=d.sibling;if(E!==null){E.return=d.return,ke=E;break}ke=d.return}}var $L=Math.ceil,mf=Q.ReactCurrentDispatcher,nw=Q.ReactCurrentOwner,qn=Q.ReactCurrentBatchConfig,it=0,mi=null,ei=null,Ci=0,Tn=0,fa=Gr(0),oi=0,uu=null,jo=0,gf=0,sw=0,hu=null,ln=null,rw=0,ma=1/0,br=null,pf=!1,ow=null,io=null,wf=!1,no=null,bf=0,du=0,lw=null,Of=-1,xf=0;function ji(){return(it&6)!==0?Zt():Of!==-1?Of:Of=Zt()}function so(u){return(u.mode&1)===0?1:(it&2)!==0&&Ci!==0?Ci&-Ci:xL.transition!==null?(xf===0&&(xf=vv()),xf):(u=pt,u!==0||(u=window.event,u=u===void 0?16:Iv(u.type)),u)}function Cs(u,d,g,b){if(50<du)throw du=0,lw=null,Error(e(185));Bc(u,g,b),((it&2)===0||u!==mi)&&(u===mi&&((it&2)===0&&(gf|=g),oi===4&&ro(u,Ci)),an(u,b),g===1&&it===0&&(d.mode&1)===0&&(ma=Zt()+500,qd&&Kr()))}function an(u,d){var g=u.callbackNode;xM(u,d);var b=Td(u,u===mi?Ci:0);if(b===0)g!==null&&Ov(g),u.callbackNode=null,u.callbackPriority=0;else if(d=b&-b,u.callbackPriority!==d){if(g!=null&&Ov(g),d===1)u.tag===0?OL(Ik.bind(null,u)):p_(Ik.bind(null,u)),gL(function(){(it&6)===0&&Kr()}),g=null;else{switch(_v(b)){case 1:g=Np;break;case 4:g=xv;break;case 16:g=kd;break;case 536870912:g=yv;break;default:g=kd}g=Dk(g,Ak.bind(null,u))}u.callbackPriority=d,u.callbackNode=g}}function Ak(u,d){if(Of=-1,xf=0,(it&6)!==0)throw Error(e(327));var g=u.callbackNode;if(ga()&&u.callbackNode!==g)return null;var b=Td(u,u===mi?Ci:0);if(b===0)return null;if((b&30)!==0||(b&u.expiredLanes)!==0||d)d=yf(u,b);else{d=b;var x=it;it|=2;var y=Vk();(mi!==u||Ci!==d)&&(br=null,ma=Zt()+500,Yo(u,d));do try{NL();break}catch(E){Rk(u,E)}while(!0);S0(),mf.current=y,it=x,ei!==null?d=0:(mi=null,Ci=0,d=oi)}if(d!==0){if(d===2&&(x=Fp(u),x!==0&&(b=x,d=aw(u,x))),d===1)throw g=uu,Yo(u,0),ro(u,b),an(u,Zt()),g;if(d===6)ro(u,b);else{if(x=u.current.alternate,(b&30)===0&&!QL(x)&&(d=yf(u,b),d===2&&(y=Fp(u),y!==0&&(b=y,d=aw(u,y))),d===1))throw g=uu,Yo(u,0),ro(u,b),an(u,Zt()),g;switch(u.finishedWork=x,u.finishedLanes=b,d){case 0:case 1:throw Error(e(345));case 2:Ko(u,ln,br);break;case 3:if(ro(u,b),(b&130023424)===b&&(d=rw+500-Zt(),10<d)){if(Td(u,0)!==0)break;if(x=u.suspendedLanes,(x&b)!==b){ji(),u.pingedLanes|=u.suspendedLanes&x;break}u.timeoutHandle=m0(Ko.bind(null,u,ln,br),d);break}Ko(u,ln,br);break;case 4:if(ro(u,b),(b&4194240)===b)break;for(d=u.eventTimes,x=-1;0<b;){var S=31-xs(b);y=1<<S,S=d[S],S>x&&(x=S),b&=~y}if(b=x,b=Zt()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*$L(b/1960))-b,10<b){u.timeoutHandle=m0(Ko.bind(null,u,ln,br),b);break}Ko(u,ln,br);break;case 5:Ko(u,ln,br);break;default:throw Error(e(329))}}}return an(u,Zt()),u.callbackNode===g?Ak.bind(null,u):null}function aw(u,d){var g=hu;return u.current.memoizedState.isDehydrated&&(Yo(u,d).flags|=256),u=yf(u,d),u!==2&&(d=ln,ln=g,d!==null&&cw(d)),u}function cw(u){ln===null?ln=u:ln.push.apply(ln,u)}function QL(u){for(var d=u;;){if(d.flags&16384){var g=d.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var b=0;b<g.length;b++){var x=g[b],y=x.getSnapshot;x=x.value;try{if(!ys(y(),x))return!1}catch{return!1}}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ro(u,d){for(d&=~sw,d&=~gf,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var g=31-xs(d),b=1<<g;u[g]=-1,d&=~b}}function Ik(u){if((it&6)!==0)throw Error(e(327));ga();var d=Td(u,0);if((d&1)===0)return an(u,Zt()),null;var g=yf(u,d);if(u.tag!==0&&g===2){var b=Fp(u);b!==0&&(d=b,g=aw(u,b))}if(g===1)throw g=uu,Yo(u,0),ro(u,d),an(u,Zt()),g;if(g===6)throw Error(e(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,Ko(u,ln,br),an(u,Zt()),null}function uw(u,d){var g=it;it|=1;try{return u(d)}finally{it=g,it===0&&(ma=Zt()+500,qd&&Kr())}}function Go(u){no!==null&&no.tag===0&&(it&6)===0&&ga();var d=it;it|=1;var g=qn.transition,b=pt;try{if(qn.transition=null,pt=1,u)return u()}finally{pt=b,qn.transition=g,it=d,(it&6)===0&&Kr()}}function hw(){Tn=fa.current,Ct(fa)}function Yo(u,d){u.finishedWork=null,u.finishedLanes=0;var g=u.timeoutHandle;if(g!==-1&&(u.timeoutHandle=-1,mL(g)),ei!==null)for(g=ei.return;g!==null;){var b=g;switch(x0(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Zd();break;case 3:ua(),Ct(sn),Ct(Vi),V0();break;case 5:I0(b);break;case 4:ua();break;case 13:Ct(Bt);break;case 19:Ct(Bt);break;case 10:C0(b.type._context);break;case 22:case 23:hw()}g=g.return}if(mi=u,ei=u=oo(u.current,null),Ci=Tn=d,oi=0,uu=null,sw=gf=jo=0,ln=hu=null,Ho!==null){for(d=0;d<Ho.length;d++)if(g=Ho[d],b=g.interleaved,b!==null){g.interleaved=null;var x=b.next,y=g.pending;if(y!==null){var S=y.next;y.next=x,b.next=S}g.pending=b}Ho=null}return u}function Rk(u,d){do{var g=ei;try{if(S0(),sf.current=af,rf){for(var b=$t.memoizedState;b!==null;){var x=b.queue;x!==null&&(x.pending=null),b=b.next}rf=!1}if(Xo=0,fi=ri=$t=null,su=!1,ru=0,nw.current=null,g===null||g.return===null){oi=1,uu=d,ei=null;break}e:{var y=u,S=g.return,E=g,I=d;if(d=Ci,E.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var Z=I,re=E,le=re.tag;if((re.mode&1)===0&&(le===0||le===11||le===15)){var se=re.alternate;se?(re.updateQueue=se.updateQueue,re.memoizedState=se.memoizedState,re.lanes=se.lanes):(re.updateQueue=null,re.memoizedState=null)}var ye=nk(S);if(ye!==null){ye.flags&=-257,sk(ye,S,E,y,d),ye.mode&1&&ik(y,Z,d),d=ye,I=Z;var Ce=d.updateQueue;if(Ce===null){var Te=new Set;Te.add(I),d.updateQueue=Te}else Ce.add(I);break e}else{if((d&1)===0){ik(y,Z,d),dw();break e}I=Error(e(426))}}else if(It&&E.mode&1){var Ht=nk(S);if(Ht!==null){(Ht.flags&65536)===0&&(Ht.flags|=256),sk(Ht,S,E,y,d),_0(ha(I,E));break e}}y=I=ha(I,E),oi!==4&&(oi=2),hu===null?hu=[y]:hu.push(y),y=S;do{switch(y.tag){case 3:y.flags|=65536,d&=-d,y.lanes|=d;var N=ek(y,I,d);P_(y,N);break e;case 1:E=I;var L=y.type,z=y.stateNode;if((y.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(io===null||!io.has(z)))){y.flags|=65536,d&=-d,y.lanes|=d;var ae=tk(y,E,d);P_(y,ae);break e}}y=y.return}while(y!==null)}Lk(g)}catch(Ae){d=Ae,ei===g&&g!==null&&(ei=g=g.return);continue}break}while(!0)}function Vk(){var u=mf.current;return mf.current=af,u===null?af:u}function dw(){(oi===0||oi===3||oi===2)&&(oi=4),mi===null||(jo&268435455)===0&&(gf&268435455)===0||ro(mi,Ci)}function yf(u,d){var g=it;it|=2;var b=Vk();(mi!==u||Ci!==d)&&(br=null,Yo(u,d));do try{DL();break}catch(x){Rk(u,x)}while(!0);if(S0(),it=g,mf.current=b,ei!==null)throw Error(e(261));return mi=null,Ci=0,oi}function DL(){for(;ei!==null;)Mk(ei)}function NL(){for(;ei!==null&&!hM();)Mk(ei)}function Mk(u){var d=Qk(u.alternate,u,Tn);u.memoizedProps=u.pendingProps,d===null?Lk(u):ei=d,nw.current=null}function Lk(u){var d=u;do{var g=d.alternate;if(u=d.return,(d.flags&32768)===0){if(g=RL(g,d,Tn),g!==null){ei=g;return}}else{if(g=VL(g,d),g!==null){g.flags&=32767,ei=g;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{oi=6,ei=null;return}}if(d=d.sibling,d!==null){ei=d;return}ei=d=u}while(d!==null);oi===0&&(oi=5)}function Ko(u,d,g){var b=pt,x=qn.transition;try{qn.transition=null,pt=1,FL(u,d,g,b)}finally{qn.transition=x,pt=b}return null}function FL(u,d,g,b){do ga();while(no!==null);if((it&6)!==0)throw Error(e(327));g=u.finishedWork;var x=u.finishedLanes;if(g===null)return null;if(u.finishedWork=null,u.finishedLanes=0,g===u.current)throw Error(e(177));u.callbackNode=null,u.callbackPriority=0;var y=g.lanes|g.childLanes;if(yM(u,y),u===mi&&(ei=mi=null,Ci=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||wf||(wf=!0,Dk(kd,function(){return ga(),null})),y=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||y){y=qn.transition,qn.transition=null;var S=pt;pt=1;var E=it;it|=4,nw.current=null,LL(u,g),Sk(g,u),lL(d0),Id=!!h0,d0=h0=null,u.current=g,BL(g),dM(),it=E,pt=S,qn.transition=y}else u.current=g;if(wf&&(wf=!1,no=u,bf=x),y=u.pendingLanes,y===0&&(io=null),gM(g.stateNode),an(u,Zt()),d!==null)for(b=u.onRecoverableError,g=0;g<d.length;g++)x=d[g],b(x.value,{componentStack:x.stack,digest:x.digest});if(pf)throw pf=!1,u=ow,ow=null,u;return(bf&1)!==0&&u.tag!==0&&ga(),y=u.pendingLanes,(y&1)!==0?u===lw?du++:(du=0,lw=u):du=0,Kr(),null}function ga(){if(no!==null){var u=_v(bf),d=qn.transition,g=pt;try{if(qn.transition=null,pt=16>u?16:u,no===null)var b=!1;else{if(u=no,no=null,bf=0,(it&6)!==0)throw Error(e(331));var x=it;for(it|=4,ke=u.current;ke!==null;){var y=ke,S=y.child;if((ke.flags&16)!==0){var E=y.deletions;if(E!==null){for(var I=0;I<E.length;I++){var Z=E[I];for(ke=Z;ke!==null;){var re=ke;switch(re.tag){case 0:case 11:case 15:cu(8,re,y)}var le=re.child;if(le!==null)le.return=re,ke=le;else for(;ke!==null;){re=ke;var se=re.sibling,ye=re.return;if(xk(re),re===Z){ke=null;break}if(se!==null){se.return=ye,ke=se;break}ke=ye}}}var Ce=y.alternate;if(Ce!==null){var Te=Ce.child;if(Te!==null){Ce.child=null;do{var Ht=Te.sibling;Te.sibling=null,Te=Ht}while(Te!==null)}}ke=y}}if((y.subtreeFlags&2064)!==0&&S!==null)S.return=y,ke=S;else e:for(;ke!==null;){if(y=ke,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:cu(9,y,y.return)}var N=y.sibling;if(N!==null){N.return=y.return,ke=N;break e}ke=y.return}}var L=u.current;for(ke=L;ke!==null;){S=ke;var z=S.child;if((S.subtreeFlags&2064)!==0&&z!==null)z.return=S,ke=z;else e:for(S=L;ke!==null;){if(E=ke,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:ff(9,E)}}catch(Ae){Ft(E,E.return,Ae)}if(E===S){ke=null;break e}var ae=E.sibling;if(ae!==null){ae.return=E.return,ke=ae;break e}ke=E.return}}if(it=x,Kr(),Ds&&typeof Ds.onPostCommitFiberRoot=="function")try{Ds.onPostCommitFiberRoot(Sd,u)}catch{}b=!0}return b}finally{pt=g,qn.transition=d}}return!1}function Bk(u,d,g){d=ha(g,d),d=ek(u,d,1),u=eo(u,d,1),d=ji(),u!==null&&(Bc(u,1,d),an(u,d))}function Ft(u,d,g){if(u.tag===3)Bk(u,u,g);else for(;d!==null;){if(d.tag===3){Bk(d,u,g);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(io===null||!io.has(b))){u=ha(g,u),u=tk(d,u,1),d=eo(d,u,1),u=ji(),d!==null&&(Bc(d,1,u),an(d,u));break}}d=d.return}}function zL(u,d,g){var b=u.pingCache;b!==null&&b.delete(d),d=ji(),u.pingedLanes|=u.suspendedLanes&g,mi===u&&(Ci&g)===g&&(oi===4||oi===3&&(Ci&130023424)===Ci&&500>Zt()-rw?Yo(u,0):sw|=g),an(u,d)}function $k(u,d){d===0&&((u.mode&1)===0?d=1:(d=Pd,Pd<<=1,(Pd&130023424)===0&&(Pd=4194304)));var g=ji();u=gr(u,d),u!==null&&(Bc(u,d,g),an(u,g))}function WL(u){var d=u.memoizedState,g=0;d!==null&&(g=d.retryLane),$k(u,g)}function UL(u,d){var g=0;switch(u.tag){case 13:var b=u.stateNode,x=u.memoizedState;x!==null&&(g=x.retryLane);break;case 19:b=u.stateNode;break;default:throw Error(e(314))}b!==null&&b.delete(d),$k(u,g)}var Qk;Qk=function(u,d,g){if(u!==null)if(u.memoizedProps!==d.pendingProps||sn.current)on=!0;else{if((u.lanes&g)===0&&(d.flags&128)===0)return on=!1,IL(u,d,g);on=(u.flags&131072)!==0}else on=!1,It&&(d.flags&1048576)!==0&&w_(d,jd,d.index);switch(d.lanes=0,d.tag){case 2:var b=d.type;hf(u,d),u=d.pendingProps;var x=na(d,Vi.current);ca(d,g),x=B0(null,d,b,u,x,g);var y=$0();return d.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,rn(b)?(y=!0,Hd(d)):y=!1,d.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,E0(d),x.updater=cf,d.stateNode=x,x._reactInternals=d,W0(d,b,u,g),d=q0(null,d,b,!0,y,g)):(d.tag=0,It&&y&&O0(d),Xi(null,d,x,g),d=d.child),d;case 16:b=d.elementType;e:{switch(hf(u,d),u=d.pendingProps,x=b._init,b=x(b._payload),d.type=b,x=d.tag=HL(b),u=_s(b,u),x){case 0:d=H0(null,d,b,u,g);break e;case 1:d=uk(null,d,b,u,g);break e;case 11:d=rk(null,d,b,u,g);break e;case 14:d=ok(null,d,b,_s(b.type,u),g);break e}throw Error(e(306,b,""))}return d;case 0:return b=d.type,x=d.pendingProps,x=d.elementType===b?x:_s(b,x),H0(u,d,b,x,g);case 1:return b=d.type,x=d.pendingProps,x=d.elementType===b?x:_s(b,x),uk(u,d,b,x,g);case 3:e:{if(hk(d),u===null)throw Error(e(387));b=d.pendingProps,y=d.memoizedState,x=y.element,C_(u,d),tf(d,b,null,g);var S=d.memoizedState;if(b=S.element,y.isDehydrated)if(y={element:b,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},d.updateQueue.baseState=y,d.memoizedState=y,d.flags&256){x=ha(Error(e(423)),d),d=dk(u,d,b,g,x);break e}else if(b!==x){x=ha(Error(e(424)),d),d=dk(u,d,b,g,x);break e}else for(Pn=jr(d.stateNode.containerInfo.firstChild),Cn=d,It=!0,vs=null,g=k_(d,null,b,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(oa(),b===x){d=wr(u,d,g);break e}Xi(u,d,b,g)}d=d.child}return d;case 5:return E_(d),u===null&&v0(d),b=d.type,x=d.pendingProps,y=u!==null?u.memoizedProps:null,S=x.children,f0(b,x)?S=null:y!==null&&f0(b,y)&&(d.flags|=32),ck(u,d),Xi(u,d,S,g),d.child;case 6:return u===null&&v0(d),null;case 13:return fk(u,d,g);case 4:return A0(d,d.stateNode.containerInfo),b=d.pendingProps,u===null?d.child=la(d,null,b,g):Xi(u,d,b,g),d.child;case 11:return b=d.type,x=d.pendingProps,x=d.elementType===b?x:_s(b,x),rk(u,d,b,x,g);case 7:return Xi(u,d,d.pendingProps,g),d.child;case 8:return Xi(u,d,d.pendingProps.children,g),d.child;case 12:return Xi(u,d,d.pendingProps.children,g),d.child;case 10:e:{if(b=d.type._context,x=d.pendingProps,y=d.memoizedProps,S=x.value,vt(Kd,b._currentValue),b._currentValue=S,y!==null)if(ys(y.value,S)){if(y.children===x.children&&!sn.current){d=wr(u,d,g);break e}}else for(y=d.child,y!==null&&(y.return=d);y!==null;){var E=y.dependencies;if(E!==null){S=y.child;for(var I=E.firstContext;I!==null;){if(I.context===b){if(y.tag===1){I=pr(-1,g&-g),I.tag=2;var Z=y.updateQueue;if(Z!==null){Z=Z.shared;var re=Z.pending;re===null?I.next=I:(I.next=re.next,re.next=I),Z.pending=I}}y.lanes|=g,I=y.alternate,I!==null&&(I.lanes|=g),P0(y.return,g,d),E.lanes|=g;break}I=I.next}}else if(y.tag===10)S=y.type===d.type?null:y.child;else if(y.tag===18){if(S=y.return,S===null)throw Error(e(341));S.lanes|=g,E=S.alternate,E!==null&&(E.lanes|=g),P0(S,g,d),S=y.sibling}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===d){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}Xi(u,d,x.children,g),d=d.child}return d;case 9:return x=d.type,b=d.pendingProps.children,ca(d,g),x=Zn(x),b=b(x),d.flags|=1,Xi(u,d,b,g),d.child;case 14:return b=d.type,x=_s(b,d.pendingProps),x=_s(b.type,x),ok(u,d,b,x,g);case 15:return lk(u,d,d.type,d.pendingProps,g);case 17:return b=d.type,x=d.pendingProps,x=d.elementType===b?x:_s(b,x),hf(u,d),d.tag=1,rn(b)?(u=!0,Hd(d)):u=!1,ca(d,g),K_(d,b,x),W0(d,b,x,g),q0(null,d,b,!0,u,g);case 19:return gk(u,d,g);case 22:return ak(u,d,g)}throw Error(e(156,d.tag))};function Dk(u,d){return bv(u,d)}function ZL(u,d,g,b){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(u,d,g,b){return new ZL(u,d,g,b)}function fw(u){return u=u.prototype,!(!u||!u.isReactComponent)}function HL(u){if(typeof u=="function")return fw(u)?1:0;if(u!=null){if(u=u.$$typeof,u===X)return 11;if(u===xe)return 14}return 2}function oo(u,d){var g=u.alternate;return g===null?(g=Xn(u.tag,d,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=d,g.type=u.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=u.flags&14680064,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,d=u.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g}function vf(u,d,g,b,x,y){var S=2;if(b=u,typeof u=="function")fw(u)&&(S=1);else if(typeof u=="string")S=5;else e:switch(u){case $:return Jo(g.children,x,y,d);case _:S=8,x|=8;break;case R:return u=Xn(12,g,d,x|2),u.elementType=R,u.lanes=y,u;case j:return u=Xn(13,g,d,x),u.elementType=j,u.lanes=y,u;case oe:return u=Xn(19,g,d,x),u.elementType=oe,u.lanes=y,u;case Se:return _f(g,x,y,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case U:S=10;break e;case Y:S=9;break e;case X:S=11;break e;case xe:S=14;break e;case be:S=16,b=null;break e}throw Error(e(130,u==null?u:typeof u,""))}return d=Xn(S,g,d,x),d.elementType=u,d.type=b,d.lanes=y,d}function Jo(u,d,g,b){return u=Xn(7,u,b,d),u.lanes=g,u}function _f(u,d,g,b){return u=Xn(22,u,b,d),u.elementType=Se,u.lanes=g,u.stateNode={isHidden:!1},u}function mw(u,d,g){return u=Xn(6,u,null,d),u.lanes=g,u}function gw(u,d,g){return d=Xn(4,u.children!==null?u.children:[],u.key,d),d.lanes=g,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function qL(u,d,g,b,x){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zp(0),this.expirationTimes=zp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zp(0),this.identifierPrefix=b,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function pw(u,d,g,b,x,y,S,E,I){return u=new qL(u,d,g,E,I),d===1?(d=1,y===!0&&(d|=8)):d=0,y=Xn(3,null,null,d),u.current=y,y.stateNode=u,y.memoizedState={element:b,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},E0(y),u}function XL(u,d,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:b==null?null:""+b,children:u,containerInfo:d,implementation:g}}function Nk(u){if(!u)return Yr;u=u._reactInternals;e:{if(Fo(u)!==u||u.tag!==1)throw Error(e(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(rn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(e(171))}if(u.tag===1){var g=u.type;if(rn(g))return m_(u,g,d)}return d}function Fk(u,d,g,b,x,y,S,E,I){return u=pw(g,b,!0,u,x,y,S,E,I),u.context=Nk(null),g=u.current,b=ji(),x=so(g),y=pr(b,x),y.callback=d??null,eo(g,y,x),u.current.lanes=x,Bc(u,x,b),an(u,b),u}function kf(u,d,g,b){var x=d.current,y=ji(),S=so(x);return g=Nk(g),d.context===null?d.context=g:d.pendingContext=g,d=pr(y,S),d.payload={element:u},b=b===void 0?null:b,b!==null&&(d.callback=b),u=eo(x,d,S),u!==null&&(Cs(u,x,S,y),ef(u,x,S)),S}function Sf(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function zk(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<d?g:d}}function ww(u,d){zk(u,d),(u=u.alternate)&&zk(u,d)}function jL(){return null}var Wk=typeof reportError=="function"?reportError:function(u){console.error(u)};function bw(u){this._internalRoot=u}Cf.prototype.render=bw.prototype.render=function(u){var d=this._internalRoot;if(d===null)throw Error(e(409));kf(u,d,null,null)},Cf.prototype.unmount=bw.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var d=u.containerInfo;Go(function(){kf(null,u,null,null)}),d[hr]=null}};function Cf(u){this._internalRoot=u}Cf.prototype.unstable_scheduleHydration=function(u){if(u){var d=Cv();u={blockedOn:null,target:u,priority:d};for(var g=0;g<Hr.length&&d!==0&&d<Hr[g].priority;g++);Hr.splice(g,0,u),g===0&&Ev(u)}};function Ow(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function Pf(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function Uk(){}function GL(u,d,g,b,x){if(x){if(typeof b=="function"){var y=b;b=function(){var Z=Sf(S);y.call(Z)}}var S=Fk(d,b,u,0,null,!1,!1,"",Uk);return u._reactRootContainer=S,u[hr]=S.current,Gc(u.nodeType===8?u.parentNode:u),Go(),S}for(;x=u.lastChild;)u.removeChild(x);if(typeof b=="function"){var E=b;b=function(){var Z=Sf(I);E.call(Z)}}var I=pw(u,0,!1,null,null,!1,!1,"",Uk);return u._reactRootContainer=I,u[hr]=I.current,Gc(u.nodeType===8?u.parentNode:u),Go(function(){kf(d,I,g,b)}),I}function Tf(u,d,g,b,x){var y=g._reactRootContainer;if(y){var S=y;if(typeof x=="function"){var E=x;x=function(){var I=Sf(S);E.call(I)}}kf(d,S,u,x)}else S=GL(g,d,u,x,b);return Sf(S)}kv=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var g=Lc(d.pendingLanes);g!==0&&(Wp(d,g|1),an(d,Zt()),(it&6)===0&&(ma=Zt()+500,Kr()))}break;case 13:Go(function(){var b=gr(u,1);if(b!==null){var x=ji();Cs(b,u,1,x)}}),ww(u,1)}},Up=function(u){if(u.tag===13){var d=gr(u,134217728);if(d!==null){var g=ji();Cs(d,u,134217728,g)}ww(u,134217728)}},Sv=function(u){if(u.tag===13){var d=so(u),g=gr(u,d);if(g!==null){var b=ji();Cs(g,u,d,b)}ww(u,d)}},Cv=function(){return pt},Pv=function(u,d){var g=pt;try{return pt=u,d()}finally{pt=g}},Bp=function(u,d,g){switch(d){case"input":if(Xe(u,g),d=g.name,g.type==="radio"&&d!=null){for(g=u;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<g.length;d++){var b=g[d];if(b!==u&&b.form===u.form){var x=Ud(b);if(!x)throw Error(e(90));Ve(b),Xe(b,x)}}}break;case"textarea":je(u,g);break;case"select":d=g.value,d!=null&&qi(u,!!g.multiple,d,!1)}},hv=uw,dv=Go;var YL={usingClientEntryPoint:!1,Events:[Jc,ta,Ud,cv,uv,uw]},fu={findFiberByHostInstance:zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KL={bundleType:fu.bundleType,version:fu.version,rendererPackageName:fu.rendererPackageName,rendererConfig:fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=pv(u),u===null?null:u.stateNode},findFiberByHostInstance:fu.findFiberByHostInstance||jL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ef.isDisabled&&Ef.supportsFiber)try{Sd=Ef.inject(KL),Ds=Ef}catch{}}return cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YL,cn.createPortal=function(u,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ow(d))throw Error(e(200));return XL(u,d,null,g)},cn.createRoot=function(u,d){if(!Ow(u))throw Error(e(299));var g=!1,b="",x=Wk;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(x=d.onRecoverableError)),d=pw(u,1,!1,null,null,g,!1,b,x),u[hr]=d.current,Gc(u.nodeType===8?u.parentNode:u),new bw(d)},cn.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(e(188)):(u=Object.keys(u).join(","),Error(e(268,u)));return u=pv(d),u=u===null?null:u.stateNode,u},cn.flushSync=function(u){return Go(u)},cn.hydrate=function(u,d,g){if(!Pf(d))throw Error(e(200));return Tf(null,u,d,!0,g)},cn.hydrateRoot=function(u,d,g){if(!Ow(u))throw Error(e(405));var b=g!=null&&g.hydratedSources||null,x=!1,y="",S=Wk;if(g!=null&&(g.unstable_strictMode===!0&&(x=!0),g.identifierPrefix!==void 0&&(y=g.identifierPrefix),g.onRecoverableError!==void 0&&(S=g.onRecoverableError)),d=Fk(d,null,u,1,g??null,x,!1,y,S),u[hr]=d.current,Gc(u),b)for(u=0;u<b.length;u++)g=b[u],x=g._getVersion,x=x(g._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[g,x]:d.mutableSourceEagerHydrationData.push(g,x);return new Cf(d)},cn.render=function(u,d,g){if(!Pf(d))throw Error(e(200));return Tf(null,u,d,!1,g)},cn.unmountComponentAtNode=function(u){if(!Pf(u))throw Error(e(40));return u._reactRootContainer?(Go(function(){Tf(null,null,u,!1,function(){u._reactRootContainer=null,u[hr]=null})}),!0):!1},cn.unstable_batchedUpdates=uw,cn.unstable_renderSubtreeIntoContainer=function(u,d,g,b){if(!Pf(g))throw Error(e(200));if(u==null||u._reactInternals===void 0)throw Error(e(38));return Tf(u,d,g,!1,b)},cn.version="18.3.1-next-f1338f8080-20240426",cn}var Kk;function cB(){if(Kk)return vw.exports;Kk=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),vw.exports=aB(),vw.exports}var Jk;function uB(){if(Jk)return Af;Jk=1;var s=cB();return Af.createRoot=s.createRoot,Af.hydrateRoot=s.hydrateRoot,Af}var hB=uB();const dB=Gh(hB);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function fB(){const s={resolve:null,promise:null};return s.promise=new Promise(t=>{s.resolve=t}),s}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mB(s){let t=null;return(...e)=>(t||(t={current:s(...e)}),t.current)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const $i=new Array(256).fill("").map((s,t)=>("0"+t.toString(16)).slice(-2));function gB(){const[s,t,e,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+$i[s>>0&255]+$i[s>>8&255]+$i[s>>16&255]+$i[s>>24&255]+$i[t>>0&255]+$i[t>>8&255]+$i[t>>16&255]+$i[t>>24&255]+$i[e>>0&255]+$i[e>>8&255]+$i[e>>16&255]+$i[e>>24&255]+$i[i>>0&255]+$i[i>>8&255]+$i[i>>16&255]+$i[i>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function pB(s,t){const e=s.extraPlugins||[];return{...s,extraPlugins:[...e,...t.filter(i=>!e.includes(i))]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function S5(s){return!!s&&/^\d+\.\d+\.\d+/.test(s)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function C5(s){return s?["nightly","alpha","internal","nightly-","staging"].some(t=>s.includes(t)):!1}function wB(s){return S5(s)||C5(s)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function bB(s){if(!S5(s))throw new Error(`Invalid semantic version: ${s||"<blank>"}.`);const[t,e,i]=s.split(".");return{major:Number.parseInt(t,10),minor:Number.parseInt(e,10),patch:Number.parseInt(i,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function OB(s){if(C5(s))return 3;const{major:t}=bB(s);switch(!0){case t>=44:return 3;case t>=38:return 2;default:return 1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function xB(){const{CKEDITOR_VERSION:s,CKEDITOR:t}=window;return wB(s)?{source:t?"cdn":"npm",version:s}:null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function yB(){const s=xB();return s?OB(s.version):null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function P5(s,t){switch(t||(t=yB()||void 0),t){case 1:case 2:return s===void 0;case 3:return s==="GPL";default:return!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function vB(s,t){return function(i){P5(i.config.get("licenseKey"))||i.on("collectUsageData",(n,{setUsageData:r})=>{r(`integration.${s}`,t)})}}var _B=Object.defineProperty,kB=(s,t,e)=>t in s?_B(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,hn=(s,t,e)=>kB(s,typeof t!="symbol"?t+"":t,e);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const T5=class E5{constructor(t,e){hn(this,"_lifecycle"),hn(this,"_element"),hn(this,"_releaseLock",null),hn(this,"_value",null),hn(this,"_afterMountCallbacks",[]),hn(this,"_state",{destroyedBeforeInitialization:!1,mountingInProgress:null}),hn(this,"release",mB(()=>{const{_releaseLock:i,_state:n,_element:r,_lifecycle:o}=this;n.mountingInProgress?n.mountingInProgress.then(()=>o.unmount({element:r,mountResult:this.value})).catch(l=>{console.error("Semaphore unmounting error:",l)}).then(i.resolve).then(()=>{this._value=null}):(n.destroyedBeforeInitialization=!0,i.resolve())})),this._element=t,this._lifecycle=e,this._lock()}get value(){return this._value}unsafeSetValue(t){this._value=t,this._afterMountCallbacks.forEach(e=>e(t)),this._afterMountCallbacks=[]}runAfterMount(t){const{_value:e,_afterMountCallbacks:i}=this;e?t(e):i.push(t)}_lock(){const{_semaphores:t}=E5,{_state:e,_element:i,_lifecycle:n}=this,r=t.get(i)||Promise.resolve(null),o=fB();this._releaseLock=o;const l=r.then(()=>e.destroyedBeforeInitialization?Promise.resolve(void 0):(e.mountingInProgress=n.mount().then(a=>(a&&this.unsafeSetValue(a),a)),e.mountingInProgress)).then(async a=>{a&&n.afterMount&&await n.afterMount({element:i,mountResult:a})}).then(()=>o.promise).catch(a=>{console.error("Semaphore mounting error:",a)}).then(()=>{t.get(i)===l&&t.delete(i)});t.set(i,l)}};hn(T5,"_semaphores",new Map);let SB=T5;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const CB="$__CKEditorReactContextMetadata";function PB(s,t){return{...t,[CB]:s}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const TB=yo.createContext(null),EB=s=>!!s&&typeof s=="object"&&"status"in s&&["initializing","initialized","error"].includes(s.status),A5=s=>t=>EB(t)&&t.status===s,eS=A5("initializing"),AB=s=>A5("initialized")(s)&&s.watchdog.state==="ready";/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const IB=vB("react",{version:"9.5.0",frameworkVersion:yo.version});/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function RB(s){return P5(s.licenseKey)?s:pB(s,[IB])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Sw="Lock from React integration (@ckeditor/ckeditor5-react)";class I5 extends yo.Component{constructor(t){super(t),hn(this,"domContainer",yo.createRef()),hn(this,"editorSemaphore",null),this._checkVersion()}_checkVersion(){const{CKEDITOR_VERSION:t}=window;if(!t)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[e]=t.split(".").map(Number);e>=42||t.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}get _semaphoreValue(){const{editorSemaphore:t}=this;return t?t.value:null}get watchdog(){const{_semaphoreValue:t}=this;return t?t.watchdog:null}get editor(){const{_semaphoreValue:t}=this;return t?t.instance:null}shouldComponentUpdate(t){const{props:e,editorSemaphore:i}=this;return t.id!==e.id||t.disableWatchdog!==e.disableWatchdog?!0:(i&&(i.runAfterMount(({instance:n})=>{this._shouldUpdateEditorData(e,t,n)&&n.data.set(t.data)}),"disabled"in t&&i.runAfterMount(({instance:n})=>{t.disabled?n.enableReadOnlyMode(Sw):n.disableReadOnlyMode(Sw)})),!1)}componentDidMount(){eS(this.context)||this._initLifeCycleSemaphore()}componentDidUpdate(){eS(this.context)||this._initLifeCycleSemaphore()}componentWillUnmount(){this._unlockLifeCycleSemaphore()}_unlockLifeCycleSemaphore(){this.editorSemaphore&&(this.editorSemaphore.release(),this.editorSemaphore=null)}_initLifeCycleSemaphore(){this._unlockLifeCycleSemaphore(),this.editorSemaphore=new SB(this.domContainer.current,{mount:async()=>this._initializeEditor(),afterMount:({mountResult:t})=>{const{onReady:e}=this.props;e&&this.domContainer.current!==null&&e(t.instance)},unmount:async({element:t,mountResult:e})=>{const{onAfterDestroy:i}=this.props;try{await this._destroyEditor(e),t.innerHTML=""}finally{i&&i(e.instance)}}})}render(){return yo.createElement("div",{ref:this.domContainer})}async _initializeEditor(){if(this.props.disableWatchdog)return{instance:await this._createEditor(this.domContainer.current,this._getConfig()),watchdog:null};const t=AB(this.context)?new VB(this.context.watchdog):new this.props.editor.EditorWatchdog(this.props.editor,this.props.watchdogConfig),e={current:0};return t.setCreator(async(i,n)=>{var r;const{editorSemaphore:o}=this,{onAfterDestroy:l}=this.props;e.current>0&&l&&((r=o==null?void 0:o.value)!=null&&r.instance)&&l(o.value.instance);const a=await this._createEditor(i,n);return o&&e.current>0&&(o.unsafeSetValue({instance:a,watchdog:t}),setTimeout(()=>{this.props.onReady&&this.props.onReady(t.editor)})),e.current++,a}),t.on("error",(i,{error:n,causesRestart:r})=>{(this.props.onError||console.error)(n,{phase:"runtime",willEditorRestart:r})}),await t.create(this.domContainer.current,this._getConfig()).catch(i=>{(this.props.onError||console.error)(i,{phase:"initialization",willEditorRestart:!1})}),{watchdog:t,instance:t.editor}}_createEditor(t,e){const{contextItemMetadata:i}=this.props;return i&&(e=PB(i,e)),this.props.editor.create(t,RB(e)).then(n=>{if("disabled"in this.props){/* istanbul ignore else -- @preserve */this.props.disabled&&n.enableReadOnlyMode(Sw)}const r=n.model.document,o=n.editing.view.document;return r.on("change:data",l=>{/* istanbul ignore else -- @preserve */this.props.onChange&&this.props.onChange(l,n)}),o.on("focus",l=>{/* istanbul ignore else -- @preserve */this.props.onFocus&&this.props.onFocus(l,n)}),o.on("blur",l=>{/* istanbul ignore else -- @preserve */this.props.onBlur&&this.props.onBlur(l,n)}),n})}async _destroyEditor(t){const{watchdog:e,instance:i}=t;return new Promise((n,r)=>{/* istanbul ignore next -- @preserve */setTimeout(async()=>{try{if(e)return await e.destroy(),n();if(i)return await i.destroy(),n();n()}catch(o){console.error(o),r(o)}})})}_shouldUpdateEditorData(t,e,i){return!(t.data===e.data||i.data.get()===e.data)}_getConfig(){const t=this.props.config||{};return this.props.data&&t.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...t,initialData:t.initialData||this.props.data||""}}}hn(I5,"contextType",TB);class VB{constructor(t){hn(this,"_contextWatchdog"),hn(this,"_id"),hn(this,"_creator"),this._contextWatchdog=t,this._id=gB()}setCreator(t){this._creator=t}create(t,e){return this._contextWatchdog.add({sourceElementOrData:t,config:e,creator:this._creator,id:this._id,type:"editor"})}on(t,e){this._contextWatchdog.on("itemError",(i,{itemId:n,error:r})=>{n===this._id&&e(null,{error:r,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function R5(...s){return t=>{s.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}const MB=fn.memo(fn.forwardRef(({id:s,semaphore:t,rootName:e},i)=>{const n=fn.useRef(null);return fn.useEffect(()=>{let r,o;return t.runAfterMount(({instance:l})=>{if(!n.current)return;o=l;const{ui:a,model:c}=o,h=c.document.getRoot(e);h&&o.ui.getEditableElement(e)&&o.detachEditable(h),r=a.view.createEditable(e,n.current),a.addEditable(r),l.editing.view.forceRender()}),()=>{if(o&&o.state!=="destroyed"&&n.current){const l=o.model.document.getRoot(e);/* istanbul ignore else -- @preserve */l&&o.detachEditable(l)}}},[t.revision]),yo.createElement("div",{key:t.revision,id:s,ref:R5(i,n)})}));MB.displayName="EditorEditable";const LB=fn.forwardRef(({editor:s},t)=>{const e=fn.useRef(null);return fn.useEffect(()=>{const i=e.current;if(!s||!i)return;const n=s.ui.view.toolbar.element;return i.appendChild(n),()=>{i.contains(n)&&i.removeChild(n)}},[s&&s.id]),yo.createElement("div",{ref:R5(e,t)})});LB.displayName="EditorToolbarWrapper";function BB(s,t){const e={};for(let i=0;i<s.length;i++){const n=s[i],r=t(n);Object.hasOwn(e,r)||(e[r]=[]),e[r].push(n)}return e}function Ea(s){return s}function Gm(){}function ax(s){return s==null||typeof s!="object"&&typeof s!="function"}function cx(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}function ux(s){if(ax(s))return s;if(Array.isArray(s)||cx(s)||s instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&s instanceof SharedArrayBuffer)return s.slice(0);const t=Object.getPrototypeOf(s),e=t.constructor;if(s instanceof Date||s instanceof Map||s instanceof Set)return new e(s);if(s instanceof RegExp){const i=new e(s);return i.lastIndex=s.lastIndex,i}if(s instanceof DataView)return new e(s.buffer.slice(0));if(s instanceof Error){const i=new e(s.message);return i.stack=s.stack,i.name=s.name,i.cause=s.cause,i}if(typeof File<"u"&&s instanceof File)return new e([s],s.name,{type:s.type,lastModified:s.lastModified});if(typeof s=="object"){const i=Object.create(t);return Object.assign(i,s)}return s}function tS(s){if(!s||typeof s!="object")return!1;const t=Object.getPrototypeOf(s);return t===null||t===Object.prototype||Object.getPrototypeOf(t)===null?Object.prototype.toString.call(s)==="[object Object]":!1}function l1(s){return typeof s=="object"&&s!==null}function Ym(s){return Object.getOwnPropertySymbols(s).filter(t=>Object.prototype.propertyIsEnumerable.call(s,t))}function Km(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}const V5="[object RegExp]",hx="[object String]",dx="[object Number]",fx="[object Boolean]",Jm="[object Arguments]",M5="[object Symbol]",L5="[object Date]",B5="[object Map]",$5="[object Set]",Q5="[object Array]",$B="[object Function]",D5="[object ArrayBuffer]",xm="[object Object]",QB="[object Error]",N5="[object DataView]",F5="[object Uint8Array]",z5="[object Uint8ClampedArray]",W5="[object Uint16Array]",U5="[object Uint32Array]",DB="[object BigUint64Array]",Z5="[object Int8Array]",H5="[object Int16Array]",q5="[object Int32Array]",NB="[object BigInt64Array]",X5="[object Float32Array]",j5="[object Float64Array]";function FB(s,t){return Qa(s,void 0,s,new Map,t)}function Qa(s,t,e,i=new Map,n=void 0){const r=n==null?void 0:n(s,t,e,i);if(r!=null)return r;if(ax(s))return s;if(i.has(s))return i.get(s);if(Array.isArray(s)){const o=new Array(s.length);i.set(s,o);for(let l=0;l<s.length;l++)o[l]=Qa(s[l],l,e,i,n);return Object.hasOwn(s,"index")&&(o.index=s.index),Object.hasOwn(s,"input")&&(o.input=s.input),o}if(s instanceof Date)return new Date(s.getTime());if(s instanceof RegExp){const o=new RegExp(s.source,s.flags);return o.lastIndex=s.lastIndex,o}if(s instanceof Map){const o=new Map;i.set(s,o);for(const[l,a]of s)o.set(l,Qa(a,l,e,i,n));return o}if(s instanceof Set){const o=new Set;i.set(s,o);for(const l of s)o.add(Qa(l,void 0,e,i,n));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(s))return s.subarray();if(cx(s)){const o=new(Object.getPrototypeOf(s)).constructor(s.length);i.set(s,o);for(let l=0;l<s.length;l++)o[l]=Qa(s[l],l,e,i,n);return o}if(s instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&s instanceof SharedArrayBuffer)return s.slice(0);if(s instanceof DataView){const o=new DataView(s.buffer.slice(0),s.byteOffset,s.byteLength);return i.set(s,o),ul(o,s,e,i,n),o}if(typeof File<"u"&&s instanceof File){const o=new File([s],s.name,{type:s.type});return i.set(s,o),ul(o,s,e,i,n),o}if(s instanceof Blob){const o=new Blob([s],{type:s.type});return i.set(s,o),ul(o,s,e,i,n),o}if(s instanceof Error){const o=new s.constructor;return i.set(s,o),o.message=s.message,o.name=s.name,o.stack=s.stack,o.cause=s.cause,ul(o,s,e,i,n),o}if(typeof s=="object"&&zB(s)){const o=Object.create(Object.getPrototypeOf(s));return i.set(s,o),ul(o,s,e,i,n),o}return s}function ul(s,t,e=s,i,n){const r=[...Object.keys(t),...Ym(t)];for(let o=0;o<r.length;o++){const l=r[o],a=Object.getOwnPropertyDescriptor(s,l);(a==null||a.writable)&&(s[l]=Qa(t[l],l,e,i,n))}}function zB(s){switch(Km(s)){case Jm:case Q5:case D5:case N5:case fx:case L5:case X5:case j5:case Z5:case H5:case q5:case B5:case dx:case xm:case V5:case $5:case hx:case M5:case F5:case z5:case W5:case U5:return!0;default:return!1}}function G5(s,t){return s===t||Number.isNaN(s)&&Number.isNaN(t)}function Y5(s,t,e){return Lu(s,t,void 0,void 0,void 0,void 0,e)}function Lu(s,t,e,i,n,r,o){const l=o(s,t,e,i,n,r);if(l!==void 0)return l;if(typeof s==typeof t)switch(typeof s){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return s===t;case"number":return s===t||Object.is(s,t);case"function":return s===t;case"object":return Hu(s,t,r,o)}return Hu(s,t,r,o)}function Hu(s,t,e,i){if(Object.is(s,t))return!0;let n=Km(s),r=Km(t);if(n===Jm&&(n=xm),r===Jm&&(r=xm),n!==r)return!1;switch(n){case hx:return s.toString()===t.toString();case dx:{const a=s.valueOf(),c=t.valueOf();return G5(a,c)}case fx:case L5:case M5:return Object.is(s.valueOf(),t.valueOf());case V5:return s.source===t.source&&s.flags===t.flags;case $B:return s===t}e=e??new Map;const o=e.get(s),l=e.get(t);if(o!=null&&l!=null)return o===t;e.set(s,t),e.set(t,s);try{switch(n){case B5:{if(s.size!==t.size)return!1;for(const[a,c]of s.entries())if(!t.has(a)||!Lu(c,t.get(a),a,s,t,e,i))return!1;return!0}case $5:{if(s.size!==t.size)return!1;const a=Array.from(s.values()),c=Array.from(t.values());for(let h=0;h<a.length;h++){const f=a[h],m=c.findIndex(w=>Lu(f,w,void 0,s,t,e,i));if(m===-1)return!1;c.splice(m,1)}return!0}case Q5:case F5:case z5:case W5:case U5:case DB:case Z5:case H5:case q5:case NB:case X5:case j5:{if(typeof Buffer<"u"&&Buffer.isBuffer(s)!==Buffer.isBuffer(t)||s.length!==t.length)return!1;for(let a=0;a<s.length;a++)if(!Lu(s[a],t[a],a,s,t,e,i))return!1;return!0}case D5:return s.byteLength!==t.byteLength?!1:Hu(new Uint8Array(s),new Uint8Array(t),e,i);case N5:return s.byteLength!==t.byteLength||s.byteOffset!==t.byteOffset?!1:Hu(new Uint8Array(s),new Uint8Array(t),e,i);case QB:return s.name===t.name&&s.message===t.message;case xm:{if(!(Hu(s.constructor,t.constructor,e,i)||tS(s)&&tS(t)))return!1;const c=[...Object.keys(s),...Ym(s)],h=[...Object.keys(t),...Ym(t)];if(c.length!==h.length)return!1;for(let f=0;f<c.length;f++){const m=c[f],w=s[m];if(!Object.hasOwn(t,m))return!1;const O=t[m];if(!Lu(w,O,m,s,t,e,i))return!1}return!0}default:return!1}}finally{e.delete(s),e.delete(t)}}function xl(s,t){return Y5(s,t,Gm)}function eg(s){return typeof s=="function"}function WB(s){return Number.isSafeInteger(s)&&s>=0}const UB=new RegExp("\\p{Lu}?\\p{Ll}+|[0-9]+|\\p{Lu}+(?!\\p{Ll})|\\p{Emoji_Presentation}|\\p{Extended_Pictographic}|\\p{L}+","gu");function ZB(s){return Array.from(s.match(UB)??[])}function HB(s){return s!=null&&typeof s!="function"&&WB(s.length)}function K5(s){switch(typeof s){case"number":case"symbol":return!1;case"string":return s.includes(".")||s.includes("[")||s.includes("]")}}function J5(s){return Object.is(s,-0)?"-0":s.toString()}function mx(s){const t=[],e=s.length;if(e===0)return t;let i=0,n="",r="",o=!1;for(s.charCodeAt(0)===46&&(t.push(""),i++);i<e;){const l=s[i];r?l==="\\"&&i+1<e?(i++,n+=s[i]):l===r?r="":n+=l:o?l==='"'||l==="'"?r=l:l==="]"?(o=!1,t.push(n),n=""):n+=l:l==="["?(o=!0,n&&(t.push(n),n="")):l==="."?n&&(t.push(n),n=""):n+=l,i++}return n&&t.push(n),t}function Co(s,t,e){if(s==null)return e;switch(typeof t){case"string":{const i=s[t];return i===void 0?K5(t)?Co(s,mx(t),e):e:i}case"number":case"symbol":{typeof t=="number"&&(t=J5(t));const i=s[t];return i===void 0?e:i}default:{if(Array.isArray(t))return qB(s,t,e);Object.is(t==null?void 0:t.valueOf(),-0)?t="-0":t=String(t);const i=s[t];return i===void 0?e:i}}}function qB(s,t,e){if(t.length===0)return e;let i=s;for(let n=0;n<t.length;n++){if(i==null)return e;i=i[t[n]]}return i===void 0?e:i}function XB(s){return function(t){return Co(t,s)}}function ls(s){return s!==null&&(typeof s=="object"||typeof s=="function")}function rp(s,t){return FB(s,(e,i,n,r)=>{const o=t==null?void 0:t(e,i,n,r);if(o!=null)return o;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case dx:case hx:case fx:{const l=new s.constructor(s==null?void 0:s.valueOf());return ul(l,s),l}case Jm:{const l={};return ul(l,s),l.length=s.length,l[Symbol.iterator]=s[Symbol.iterator],l}default:return}})}function yn(s){return rp(s)}const jB=/^(?:0|[1-9]\d*)$/;function GB(s,t=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<t;case"symbol":return!1;case"string":return jB.test(s)}}function iS(s){return s!==null&&typeof s=="object"&&Km(s)==="[object Arguments]"}function YB(s){return typeof s=="symbol"||s instanceof Symbol}function KB(s){return YB(s)?NaN:Number(s)}function JB(s){return s?(s=KB(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}function e$(s){const t=JB(s),e=t%1;return e?t-e:t}function nS(s){return typeof s=="string"||s instanceof String}function eA(s,t,e){const i=Array.isArray(t)?t:typeof t=="string"?mx(t):[t];let n=s;for(let o=0;o<i.length-1;o++){const l=i[o],a=i[o+1];n[l]==null&&(n[l]=GB(a)?[]:{}),n=n[l]}const r=i[i.length-1];return n[r]=e,s}function t$(s,t,{signal:e,edges:i}={}){let n,r=null;const o=i!=null&&i.includes("leading"),l=i==null||i.includes("trailing"),a=()=>{r!==null&&(s.apply(n,r),n=void 0,r=null)},c=()=>{l&&a(),w()};let h=null;const f=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,c()},t)},m=()=>{h!==null&&(clearTimeout(h),h=null)},w=()=>{m(),n=void 0,r=null},O=()=>{m(),a()},v=function(...k){if(e!=null&&e.aborted)return;n=this,r=k;const C=h==null;f(),o&&C&&a()};return v.schedule=f,v.cancel=w,v.flush=O,e==null||e.addEventListener("abort",w,{once:!0}),v}function as(s,t=0,e={}){typeof e!="object"&&(e={});const{signal:i,leading:n=!1,trailing:r=!0,maxWait:o}=e,l=Array(2);n&&(l[0]="leading"),r&&(l[1]="trailing");let a,c=null;const h=t$(function(...w){a=s.apply(this,w),c=null},t,{signal:i,edges:l}),f=function(...w){if(o!=null){if(c===null)c=Date.now();else if(Date.now()-c>=o)return a=s.apply(this,w),c=Date.now(),h.cancel(),h.schedule(),a}return h.apply(this,w),a},m=()=>(h.flush(),a);return f.cancel=h.cancel,f.flush=m,f}function tc(s,t=0,e={}){typeof e!="object"&&(e={});const{leading:i=!0,trailing:n=!0,signal:r}=e;return as(s,t,{leading:i,trailing:n,signal:r,maxWait:t})}function op(s){if(s==null)return"";if(Array.isArray(s))return s.map(op).join(",");const t=String(s);return t==="0"&&Object.is(Number(s),-0)?"-0":t}function i$(s){return typeof Buffer<"u"&&Buffer.isBuffer(s)}function n$(s){const t=s==null?void 0:s.constructor,e=typeof t=="function"?t.prototype:Object.prototype;return s===e}function tA(s){return cx(s)}function s$(s,t){if(s=e$(s),s<1||!Number.isSafeInteger(s))return[];const e=new Array(s);for(let i=0;i<s;i++)e[i]=typeof t=="function"?t(i):i;return e}function r$(s){if(s==null)return[];switch(typeof s){case"object":case"function":return HB(s)?l$(s):n$(s)?o$(s):tg(s);default:return tg(Object(s))}}function tg(s){const t=[];for(const e in s)t.push(e);return t}function o$(s){return tg(s).filter(e=>e!=="constructor")}function l$(s){const t=s$(s.length,i=>`${i}`),e=new Set(t);return i$(s)&&(e.add("offset"),e.add("parent")),tA(s)&&(e.add("buffer"),e.add("byteLength"),e.add("byteOffset")),[...t,...tg(s).filter(i=>!e.has(i))]}function iA(s,...t){for(let e=0;e<t.length;e++)a$(s,t[e]);return s}function a$(s,t){const e=r$(t);for(let i=0;i<e.length;i++){const n=e[i];G5(s[n],t[n])||(s[n]=t[n])}}function sS(s,t){const e={},i=Object.keys(s);for(let n=0;n<i.length;n++){const r=i[n],o=s[r];e[r]=t(o,r,s)}return e}function c$(s,t){switch(t=t??Ea,typeof t){case"string":case"symbol":case"number":case"object":return sS(s,XB(t));case"function":return sS(s,t)}}function As(s){var e;if(typeof s!="object"||s==null)return!1;if(Object.getPrototypeOf(s)===null)return!0;if(Object.prototype.toString.call(s)!=="[object Object]"){const i=s[Symbol.toStringTag];return i==null||!((e=Object.getOwnPropertyDescriptor(s,Symbol.toStringTag))!=null&&e.writable)?!1:s.toString()===`[object ${i}]`}let t=s;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(s)===t}function nA(s,...t){const e=t.slice(0,-1),i=t[t.length-1];let n=s;for(let r=0;r<e.length;r++){const o=e[r];n=ym(n,o,i,new Map)}return n}function ym(s,t,e,i){if(ax(s)&&(s=Object(s)),t==null||typeof t!="object")return s;if(i.has(t))return ux(i.get(t));if(i.set(t,s),Array.isArray(t)){t=t.slice();for(let r=0;r<t.length;r++)t[r]=t[r]??void 0}const n=[...Object.keys(t),...Ym(t)];for(let r=0;r<n.length;r++){const o=n[r];let l=t[o],a=s[o];if(iS(l)&&(l={...l}),iS(a)&&(a={...a}),typeof Buffer<"u"&&Buffer.isBuffer(l)&&(l=yn(l)),Array.isArray(l))if(typeof a=="object"&&a!=null){const h=[],f=Reflect.ownKeys(a);for(let m=0;m<f.length;m++){const w=f[m];h[w]=a[w]}a=h}else a=[];const c=e(a,l,o,s,t,i);c!=null?s[o]=c:Array.isArray(l)||l1(a)&&l1(l)?s[o]=ym(a,l,e,i):a==null&&As(l)?s[o]=ym({},l,e,i):a==null&&tA(l)?s[o]=yn(l):(a===void 0||l!==void 0)&&(s[o]=l)}return s}function gx(s,...t){return nA(s,...t,Gm)}function u$(s,t){if(s==null)return!0;switch(typeof t){case"symbol":case"number":case"object":{if(Array.isArray(t))return rS(s,t);if(typeof t=="number"?t=J5(t):typeof t=="object"&&(Object.is(t==null?void 0:t.valueOf(),-0)?t="-0":t=String(t)),(s==null?void 0:s[t])===void 0)return!0;try{return delete s[t],!0}catch{return!1}}case"string":{if((s==null?void 0:s[t])===void 0&&K5(t))return rS(s,mx(t));try{return delete s[t],!0}catch{return!1}}}}function rS(s,t){const e=Co(s,t.slice(0,-1),s),i=t[t.length-1];if((e==null?void 0:e[i])===void 0)return!0;try{return delete e[i],!0}catch{return!1}}function Po(s){return l1(s)&&s.nodeType===1&&!As(s)}function oS(s,t){if(!Number.isInteger(s)||s<0)throw new Error("n must be a non-negative integer.");let e=0;return(...i)=>{if(++e>=s)return t(...i)}}function a1(s,t,e=Gm){return typeof e!="function"&&(e=Gm),Y5(s,t,(...i)=>{const n=e(...i);if(n!==void 0)return!!n;if(s instanceof Map&&t instanceof Map||s instanceof Set&&t instanceof Set)return a1(Array.from(s),Array.from(t),oS(2,e))})}function h$(s){return typeof s!="string"&&(s=op(s)),s.replace(/['\u2019]/g,"")}function d$(s){return s.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}function px(s){return d$(op(s))}function f$(s){const t=ZB(h$(s).trim());let e="";for(let i=0;i<t.length;i++){const n=t[i];e&&(e+=" "),n===n.toUpperCase()?e+=n:e+=n[0].toUpperCase()+n.slice(1).toLowerCase()}return e}function m$(s){return s.substring(0,1).toUpperCase()+s.substring(1)}function g$(s){return m$(op(s))}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let c1;try{c1={window,document}}catch{/* istanbul ignore next -- @preserve */c1={window:{},document:{}}}var ue=c1;function p$(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const el=p$(),Ie={isMac:sA(el),isWindows:w$(el),isGecko:b$(el),isSafari:O$(el),isiOS:x$(el),isAndroid:y$(el),isBlink:v$(el),get isMediaForcedColors(){return k$()},features:{isRegExpUnicodePropertySupported:_$()}};function sA(s){return s.indexOf("macintosh")>-1}function w$(s){return s.indexOf("windows")>-1}function b$(s){return!!s.match(/gecko\/\d+/)}function O$(s){return s.indexOf(" applewebkit/")>-1&&s.indexOf("chrome")===-1}function x$(s){return!!s.match(/iphone|ipad/i)||sA(s)&&navigator.maxTouchPoints>0}function y$(s){return s.indexOf("android")>-1}function v$(s){return s.indexOf("chrome/")>-1&&s.indexOf("edge/")<0}function _$(){let s=!1;try{s="ć".search(new RegExp("[\\p{L}]","u"))===0}catch{}return s}function k$(){return ue.window.matchMedia?ue.window.matchMedia("(forced-colors: active)").matches:!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function rA(s,t,e,i){e=e||function(a,c){return a===c};const n=Array.isArray(s)?s:Array.prototype.slice.call(s),r=Array.isArray(t)?t:Array.prototype.slice.call(t),o=S$(n,r,e);return i?P$(o,r.length):C$(r,o)}function S$(s,t,e){const i=lS(s,t,e);if(i===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const n=aS(s,i),r=aS(t,i),o=lS(n,r,e),l=s.length-o,a=t.length-o;return{firstIndex:i,lastIndexOld:l,lastIndexNew:a}}function lS(s,t,e){for(let i=0;i<Math.max(s.length,t.length);i++)if(s[i]===void 0||t[i]===void 0||!e(s[i],t[i]))return i;return-1}function aS(s,t){return s.slice(t).reverse()}function C$(s,t){const e=[],{firstIndex:i,lastIndexOld:n,lastIndexNew:r}=t;return r-i>0&&e.push({index:i,type:"insert",values:s.slice(i,r)}),n-i>0&&e.push({index:i+(r-i),type:"delete",howMany:n-i}),e}function P$(s,t){const{firstIndex:e,lastIndexOld:i,lastIndexNew:n}=s;if(e===-1)return Array(t).fill("equal");let r=[];return e>0&&(r=r.concat(Array(e).fill("equal"))),n-e>0&&(r=r.concat(Array(n-e).fill("insert"))),i-e>0&&(r=r.concat(Array(i-e).fill("delete"))),n<t&&(r=r.concat(Array(t-n).fill("equal"))),r}function qa(s,t,e){e=e||function(v,k){return v===k};const i=s.length,n=t.length;if(i>200||n>200||i+n>300)return qa.fastDiff(s,t,e,!0);let r,o;if(n<i){const v=s;s=t,t=v,r="delete",o="insert"}else r="insert",o="delete";const l=s.length,a=t.length,c=a-l,h={},f={};function m(v){const k=(f[v-1]!==void 0?f[v-1]:-1)+1,C=f[v+1]!==void 0?f[v+1]:-1,P=k>C?-1:1;h[v+P]&&(h[v]=h[v+P].slice(0)),h[v]||(h[v]=[]),h[v].push(k>C?r:o);let V=Math.max(k,C),Q=V-v;for(;Q<l&&V<a&&e(s[Q],t[V]);)Q++,V++,h[v].push("equal");return V}let w=0,O;do{for(O=-w;O<c;O++)f[O]=m(O);for(O=c+w;O>c;O--)f[O]=m(O);f[c]=m(c),w++}while(f[c]!==a);return h[c].slice(1)}qa.fastDiff=rA;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function cS(){return function s(){s.called=!0}}class Vr{constructor(t,e){p(this,"source");p(this,"name");p(this,"path");p(this,"stop");p(this,"off");p(this,"return");this.source=t,this.name=e,this.path=[],this.stop=cS(),this.off=cS()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Qi=new Array(256).fill("").map((s,t)=>("0"+t.toString(16)).slice(-2));function ii(){const[s,t,e,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+Qi[s>>0&255]+Qi[s>>8&255]+Qi[s>>16&255]+Qi[s>>24&255]+Qi[t>>0&255]+Qi[t>>8&255]+Qi[t>>16&255]+Qi[t>>24&255]+Qi[e>>0&255]+Qi[e>>8&255]+Qi[e>>16&255]+Qi[e>>24&255]+Qi[i>>0&255]+Qi[i>>8&255]+Qi[i>>16&255]+Qi[i>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Ki={get(s="normal"){return typeof s!="number"?this[s]||this.normal:s},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function T$(s,t){const e=Ki.get(t.priority);let i=0,n=s.length;for(;i<n;){const r=i+n>>1;Ki.get(s[r].priority)<e?n=r:i=r+1}s.splice(i,0,t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const E$="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class A extends Error{constructor(e,i,n){super(A$(e,n));p(this,"context");p(this,"data");this.name="CKEditorError",this.context=i,this.data=n}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,i){if(e.is&&e.is("CKEditorError"))throw e;const n=new A(e.message,i);throw n.stack=e.stack,n}}function We(s,t){console.warn(...lA(s,t))}function ig(s,t){console.error(...lA(s,t))}function oA(s){return`
Read more: ${E$}#error-${s}`}function A$(s,t){const e=new WeakSet,n=t?` ${JSON.stringify(t,(o,l)=>{if(typeof l=="object"&&l!==null){if(e.has(l))return`[object ${l.constructor.name}]`;e.add(l)}return l})}`:"",r=oA(s);return s+n+r}function lA(s,t){const e=oA(s);return t?[s,t,e]:[s,e]}const aA="45.2.1",I$=new Date(2025,5,24);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new A("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=aA;const Aa=Symbol("listeningTo"),u1=Symbol("emitterId"),Or=Symbol("delegations"),cA=gt(Object);function gt(s){if(!s)return cA;class t extends s{on(i,n,r){this.listenTo(this,i,n,r)}once(i,n,r){let o=!1;const l=(a,...c)=>{o||(o=!0,a.off(),n.call(this,a,...c))};this.listenTo(this,i,l,r)}off(i,n){this.stopListening(this,i,n)}listenTo(i,n,r,o={}){let l,a;this[Aa]||(this[Aa]={});const c=this[Aa];Cw(i)||uA(i);const h=Cw(i);(l=c[h])||(l=c[h]={emitter:i,callbacks:{}}),(a=l.callbacks[n])||(a=l.callbacks[n]=[]),a.push(r),B$(this,i,n,r,o)}stopListening(i,n,r){const o=this[Aa];let l=i&&Cw(i);const a=o&&l?o[l]:void 0,c=a&&n?a.callbacks[n]:void 0;if(!(!o||i&&!a||n&&!c))if(r)Pw(this,i,n,r),c.indexOf(r)!==-1&&(c.length===1?delete a.callbacks[n]:Pw(this,i,n,r));else if(c){for(;r=c.pop();)Pw(this,i,n,r);delete a.callbacks[n]}else if(a){for(n in a.callbacks)this.stopListening(i,n);delete o[l]}else{for(l in o)this.stopListening(o[l].emitter);delete this[Aa]}}fire(i,...n){try{const r=i instanceof Vr?i:new Vr(this,i),o=r.name;let l=L$(this,o);if(r.path.push(this),l){l=l.slice();for(let c=0;c<l.length;c++){const h=l[c].callback;if(h.call(this,r,...n),r.off.called&&(delete r.off.called,this._removeEventListener(o,h)),r.stop.called)break}}const a=this[Or];if(a){const c=a.get(o),h=a.get("*");c&&uS(c,r,n),h&&uS(h,r,n)}return r.return}catch(r){/* istanbul ignore next -- @preserve */A.rethrowUnexpectedError(r,this)}}delegate(...i){return{to:(n,r)=>{this[Or]||(this[Or]=new Map),i.forEach(o=>{const l=this[Or].get(o);l?l.set(n,r):this[Or].set(o,new Map([[n,r]]))})}}}stopDelegating(i,n){if(this[Or])if(!i)this[Or].clear();else if(!n)this[Or].delete(i);else{const r=this[Or].get(i);r&&r.delete(n)}}_addEventListener(i,n,r){M$(this,i);const o=h1(this,i),l=Ki.get(r.priority),a={callback:n,priority:l};for(const c of o)T$(c,a)}_removeEventListener(i,n){const r=h1(this,i);for(const o of r)for(let l=0;l<o.length;l++)o[l].callback==n&&(o.splice(l,1),l--)}}return t}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(s=>{gt[s]=cA.prototype[s]});function R$(s,t){const e=s[Aa];return e&&e[t]?e[t].emitter:null}function uA(s,t){s[u1]||(s[u1]=t||ii())}function Cw(s){return s[u1]}function hA(s){return s._events||Object.defineProperty(s,"_events",{value:{}}),s._events}function V$(){return{callbacks:[],childEvents:[]}}function M$(s,t){const e=hA(s);if(e[t])return;let i=t,n=null;const r=[];for(;i!==""&&!e[i];)e[i]=V$(),r.push(e[i]),n&&e[i].childEvents.push(n),n=i,i=i.substr(0,i.lastIndexOf(":"));if(i!==""){for(const o of r)o.callbacks=e[i].callbacks.slice();e[i].childEvents.push(n)}}function h1(s,t){const e=hA(s)[t];if(!e)return[];let i=[e.callbacks];for(let n=0;n<e.childEvents.length;n++){const r=h1(s,e.childEvents[n]);i=i.concat(r)}return i}function L$(s,t){if(!s._events)return null;let e=t;do{const i=s._events[e];if(i&&i.callbacks&&i.callbacks.length)return i.callbacks;const n=e.lastIndexOf(":");e=n>-1?e.substring(0,n):""}while(e);return null}function uS(s,t,e){for(let[i,n]of s){n?typeof n=="function"&&(n=n(t.name)):n=t.name;const r=new Vr(t.source,n);r.path=[...t.path],i.fire(r,...e)}}function B$(s,t,e,i,n){t._addEventListener?t._addEventListener(e,i,n):s._addEventListener.call(t,e,i,n)}function Pw(s,t,e,i){t._removeEventListener?t._removeEventListener(e,i):s._removeEventListener.call(t,e,i)}const qu=Symbol("observableProperties"),hh=Symbol("boundObservables"),Xu=Symbol("boundProperties"),tl=Symbol("decoratedMethods"),hS=Symbol("decoratedOriginal"),dA=ct(gt());function ct(s){var e,i,n,r,o;if(!s)return dA;class t extends(o=s,r=qu,n=tl,i=Xu,e=hh,o){constructor(){super(...arguments);p(this,r);p(this,n);p(this,i);p(this,e)}set(c,h){if(ls(c)){Object.keys(c).forEach(m=>{this.set(m,c[m])},this);return}Tw(this);const f=this[qu];if(c in this&&!f.has(c))throw new A("observable-set-cannot-override",this);Object.defineProperty(this,c,{enumerable:!0,configurable:!0,get(){return f.get(c)},set(m){const w=f.get(c);let O=this.fire(`set:${c}`,c,m,w);O===void 0&&(O=m),(w!==O||!f.has(c))&&(f.set(c,O),this.fire(`change:${c}`,c,O,w))}}),this[c]=h}bind(...c){if(!c.length||!dS(c))throw new A("observable-bind-wrong-properties",this);if(new Set(c).size!==c.length)throw new A("observable-bind-duplicate-properties",this);Tw(this);const h=this[Xu];c.forEach(m=>{if(h.has(m))throw new A("observable-bind-rebind",this)});const f=new Map;return c.forEach(m=>{const w={property:m,to:[]};h.set(m,w),f.set(m,w)}),{to:$$,toMany:Q$,_observable:this,_bindProperties:c,_to:[],_bindings:f}}unbind(...c){if(!this[qu])return;const h=this[Xu],f=this[hh];if(c.length){if(!dS(c))throw new A("observable-unbind-wrong-properties",this);c.forEach(m=>{const w=h.get(m);w&&(w.to.forEach(([O,v])=>{const k=f.get(O),C=k[v];C.delete(w),C.size||delete k[v],Object.keys(k).length||(f.delete(O),this.stopListening(O,"change"))}),h.delete(m))})}else f.forEach((m,w)=>{this.stopListening(w,"change")}),f.clear(),h.clear()}decorate(c){Tw(this);const h=this[c];if(!h)throw new A("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:c});this.on(c,(f,m)=>{f.return=h.apply(this,m)}),this[c]=function(...f){return this.fire(c,f)},this[c][hS]=h,this[tl]||(this[tl]=[]),this[tl].push(c)}stopListening(c,h,f){if(!c&&this[tl]){for(const m of this[tl])this[m]=this[m][hS];delete this[tl]}super.stopListening(c,h,f)}}return t}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(s=>{ct[s]=dA.prototype[s]});function Tw(s){s[qu]||(Object.defineProperty(s,qu,{value:new Map}),Object.defineProperty(s,hh,{value:new Map}),Object.defineProperty(s,Xu,{value:new Map}))}function $$(...s){const t=N$(...s),e=Array.from(this._bindings.keys()),i=e.length;if(!t.callback&&t.to.length>1)throw new A("observable-bind-to-no-callback",this);if(i>1&&t.callback)throw new A("observable-bind-to-extra-callback",this);t.to.forEach(n=>{if(n.properties.length&&n.properties.length!==i)throw new A("observable-bind-to-properties-length",this);n.properties.length||(n.properties=this._bindProperties)}),this._to=t.to,t.callback&&(this._bindings.get(e[0]).callback=t.callback),W$(this._observable,this._to),z$(this),this._bindProperties.forEach(n=>{fA(this._observable,n)})}function Q$(s,t,e){if(this._bindings.size>1)throw new A("observable-bind-to-many-not-one-binding",this);this.to(...D$(s,t),e)}function D$(s,t){const e=s.map(i=>[i,t]);return Array.prototype.concat.apply([],e)}function dS(s){return s.every(t=>typeof t=="string")}function N$(...s){if(!s.length)throw new A("observable-bind-to-parse-error",null);const t={to:[]};let e;return typeof s[s.length-1]=="function"&&(t.callback=s.pop()),s.forEach(i=>{if(typeof i=="string")e.properties.push(i);else if(typeof i=="object")e={observable:i,properties:[]},t.to.push(e);else throw new A("observable-bind-to-parse-error",null)}),t}function F$(s,t,e,i){const n=s[hh],r=n.get(e),o=r||{};o[i]||(o[i]=new Set),o[i].add(t),r||n.set(e,o)}function z$(s){let t;s._bindings.forEach((e,i)=>{s._to.forEach(n=>{t=n.properties[e.callback?0:s._bindProperties.indexOf(i)],e.to.push([n.observable,t]),F$(s._observable,e,n.observable,t)})})}function fA(s,t){const i=s[Xu].get(t);let n;i.callback?n=i.callback.apply(s,i.to.map(r=>r[0][r[1]])):(n=i.to[0],n=n[0][n[1]]),Object.prototype.hasOwnProperty.call(s,t)?s[t]=n:s.set(t,n)}function W$(s,t){t.forEach(e=>{const i=s[hh];let n;i.get(e.observable)||s.listenTo(e.observable,"change",(r,o)=>{n=i.get(e.observable)[o],n&&n.forEach(l=>{fA(s,l.property)})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class U${constructor(){p(this,"_replacedElements");this._replacedElements=[]}replace(t,e){this._replacedElements.push({element:t,newElement:e}),t.style.display="none",e&&t.parentNode.insertBefore(e,t.nextSibling)}restore(){this._replacedElements.forEach(({element:t,newElement:e})=>{t.style.display="",e&&e.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Z$(s){let t=new AbortController;function e(...i){return t.abort(),t=new AbortController,s(t.signal,...i)}return e.abort=()=>t.abort(),e}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function d1(s){let t=0;for(const e of s)t++;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Di(s,t){const e=Math.min(s.length,t.length);for(let i=0;i<e;i++)if(s[i]!=t[i])return i;return s.length==t.length?"same":s.length<t.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Dn(s){return!!(s&&s[Symbol.iterator])}function wi(s,t,e={},i=[]){const n=e&&e.xmlns,r=n?s.createElementNS(n,t):s.createElement(t);for(const o in e)r.setAttribute(o,e[o]);(nS(i)||!Dn(i))&&(i=[i]);for(let o of i)nS(o)&&(o=s.createTextNode(o)),r.appendChild(o);return r}class mA{constructor(t,e){p(this,"_config");this._config=Object.create(null),e&&this.define(fS(e)),t&&this._setObjectToTarget(this._config,t)}set(t,e){this._setToTarget(this._config,t,e)}define(t,e){this._setToTarget(this._config,t,e,!0)}get(t){return this._getFromSource(this._config,t)}*names(){for(const t of Object.keys(this._config))yield t}_setToTarget(t,e,i,n=!1){if(As(e)){this._setObjectToTarget(t,e,n);return}const r=e.split(".");e=r.pop();for(const o of r)As(t[o])||(t[o]=Object.create(null)),t=t[o];if(As(i)){As(t[e])||(t[e]=Object.create(null)),t=t[e],this._setObjectToTarget(t,i,n);return}n&&typeof t[e]<"u"||(t[e]=i)}_getFromSource(t,e){const i=e.split(".");e=i.pop();for(const n of i){if(!As(t[n])){t=null;break}t=t[n]}return t?fS(t[e]):void 0}_setObjectToTarget(t,e,i){Object.keys(e).forEach(n=>{this._setToTarget(t,n,e[n],i)})}}function fS(s){return rp(s,H$)}function H$(s){return Po(s)||typeof s=="function"?s:void 0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function To(s){if(s){if(s.defaultView)return s instanceof s.defaultView.Document;if(s.ownerDocument&&s.ownerDocument.defaultView)return s instanceof s.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ng(s){const t=Object.prototype.toString.apply(s);return t=="[object Window]"||t=="[object global]"}const gA=Zi(gt());function Zi(s){if(!s)return gA;class t extends s{listenTo(i,n,r,o={}){if(To(i)||ng(i)||i instanceof ue.window.EventTarget){const l={capture:!!o.useCapture,passive:!!o.usePassive},a=this._getProxyEmitter(i,l)||new q$(i,l);this.listenTo(a,n,r,o)}else super.listenTo(i,n,r,o)}stopListening(i,n,r){if(To(i)||ng(i)||i instanceof ue.window.EventTarget){const o=this._getAllProxyEmitters(i);for(const l of o)this.stopListening(l,n,r)}else super.stopListening(i,n,r)}_getProxyEmitter(i,n){return R$(this,pA(i,n))}_getAllProxyEmitters(i){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(n=>this._getProxyEmitter(i,n)).filter(n=>!!n)}}return t}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(s=>{Zi[s]=gA.prototype[s]});class q$ extends gt(){constructor(e,i){super();p(this,"_domNode");p(this,"_options");p(this,"_domListeners");uA(this,pA(e,i)),this._domNode=e,this._options=i}attach(e){if(this._domListeners&&this._domListeners[e])return;const i=this._createDomListener(e);this._domNode.addEventListener(e,i,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=i}detach(e){let i;this._domListeners[e]&&(!(i=this._events[e])||!i.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,i,n){this.attach(e),gt().prototype._addEventListener.call(this,e,i,n)}_removeEventListener(e,i){gt().prototype._removeEventListener.call(this,e,i),this.detach(e)}_createDomListener(e){const i=n=>{this.fire(e,n)};return i.removeListener=()=>{this._domNode.removeEventListener(e,i,this._options),delete this._domListeners[e]},i}}function X$(s){return s["data-ck-expando"]||(s["data-ck-expando"]=ii())}function pA(s,t){let e=X$(s);for(const i of Object.keys(t).sort())t[i]&&(e+="-"+i);return e}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function j$(s){const t=[];let e=s;for(;e&&e.nodeType!=Node.DOCUMENT_NODE;)t.unshift(e),e=e.parentNode;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function G$(s){return s instanceof HTMLTextAreaElement?s.value:s.innerHTML}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function wA(s){const t=s.ownerDocument.defaultView.getComputedStyle(s);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function bA(s){if(!s.target)return null;const t=s.target.ownerDocument,e=s.clientX,i=s.clientY;let n=null;return t.caretRangeFromPoint&&t.caretRangeFromPoint(e,i)?n=t.caretRangeFromPoint(e,i):s.rangeParent&&(n=t.createRange(),n.setStart(s.rangeParent,s.rangeOffset),n.collapse(!0)),n}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Mt(s){return Object.prototype.toString.call(s)=="[object Text]"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function lp(s){return Object.prototype.toString.apply(s)=="[object Range]"}function OA(s){return!s||!s.parentNode||s.offsetParent===ue.document.body?null:s.offsetParent}const xA=["top","right","bottom","left","width","height"];class Me{constructor(t){p(this,"top");p(this,"right");p(this,"bottom");p(this,"left");p(this,"width");p(this,"height");p(this,"_source");const e=lp(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),f1(t)||e)if(e){const i=Me.getDomRangeRects(t);If(this,Me.getBoundingRect(i))}else If(this,t.getBoundingClientRect());else if(ng(t)){const{innerWidth:i,innerHeight:n}=t;If(this,{top:0,right:i,bottom:n,left:0,width:i,height:n})}else If(this,t)}clone(){return new Me(this)}moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this}moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this}getIntersection(t){const e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left),width:0,height:0};if(e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0)return null;{const i=new Me(e);return i._source=this._source,i}}getIntersectionArea(t){const e=this.getIntersection(t);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let e=this.clone();if(mS(t))return e;let i=t,n=t.parentNode||t.commonAncestorContainer,r;for(;n&&!mS(n);){const o=Y$(n)==="visible";i instanceof HTMLElement&&gS(i)==="absolute"&&(r=i);const l=gS(n);if(o||r&&(l==="relative"&&o||l!=="relative")){i=n,n=n.parentNode;continue}const a=new Me(n),c=e.getIntersection(a);if(c)c.getArea()<e.getArea()&&(e=c);else return null;i=n,n=n.parentNode}return e}isEqual(t){for(const e of xA)if(this[e]!==t[e])return!1;return!0}contains(t){const e=this.getIntersection(t);return!!(e&&e.isEqual(t))}toAbsoluteRect(){const{scrollX:t,scrollY:e}=ue.window,i=this.clone().moveBy(t,e);if(f1(i._source)){const n=OA(i._source);n&&K$(i,n)}return i}excludeScrollbarsAndBorders(){const t=this._source;let e,i,n;if(ng(t))e=t.innerWidth-t.document.documentElement.clientWidth,i=t.innerHeight-t.document.documentElement.clientHeight,n=t.getComputedStyle(t.document.documentElement).direction;else{const r=wA(t);e=t.offsetWidth-t.clientWidth-r.left-r.right,i=t.offsetHeight-t.clientHeight-r.top-r.bottom,n=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=r.left,this.top+=r.top,this.right-=r.right,this.bottom-=r.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,n==="ltr"?this.right-=e:this.left+=e,this.height-=i,this.bottom-=i,this}static getDomRangeRects(t){const e=[],i=Array.from(t.getClientRects());if(i.length)for(const n of i)e.push(new Me(n));else{let n=t.startContainer;Mt(n)&&(n=n.parentNode);const r=new Me(n.getBoundingClientRect());r.right=r.left,r.width=0,e.push(r)}return e}static getBoundingRect(t){const e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let i=0;for(const n of t)i++,e.left=Math.min(e.left,n.left),e.top=Math.min(e.top,n.top),e.right=Math.max(e.right,n.right),e.bottom=Math.max(e.bottom,n.bottom);return i==0?null:(e.width=e.right-e.left,e.height=e.bottom-e.top,new Me(e))}}function If(s,t){for(const e of xA)s[e]=t[e]}function mS(s){return f1(s)?s===s.ownerDocument.body:!1}function f1(s){return s!==null&&typeof s=="object"&&s.nodeType===1&&typeof s.getBoundingClientRect=="function"}function gS(s){return s instanceof HTMLElement?s.ownerDocument.defaultView.getComputedStyle(s).position:"static"}function Y$(s){return s instanceof HTMLElement?s.ownerDocument.defaultView.getComputedStyle(s).overflow:"visible"}function K$(s,t){const e=new Me(t),i=wA(t);let n=0,r=0;n-=e.left,r-=e.top,n+=t.scrollLeft,r+=t.scrollTop,n-=i.left,r-=i.top,s.moveBy(n,r)}var Ot;let wx=(Ot=class{constructor(t,e){p(this,"_element");p(this,"_callback");Ot._observerInstance||Ot._createObserver(),this._element=t,this._callback=e,Ot._addElementCallback(t,e),Ot._observerInstance.observe(t)}get element(){return this._element}destroy(){Ot._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,e){Ot._elementCallbacks||(Ot._elementCallbacks=new Map);let i=Ot._elementCallbacks.get(t);i||(i=new Set,Ot._elementCallbacks.set(t,i)),i.add(e)}static _deleteElementCallback(t,e){const i=Ot._getElementCallbacks(t);i&&(i.delete(e),i.size||(Ot._elementCallbacks.delete(t),Ot._observerInstance.unobserve(t))),Ot._elementCallbacks&&!Ot._elementCallbacks.size&&(Ot._observerInstance=null,Ot._elementCallbacks=null)}static _getElementCallbacks(t){return Ot._elementCallbacks?Ot._elementCallbacks.get(t):null}static _createObserver(){Ot._observerInstance=new ue.window.ResizeObserver(t=>{for(const e of t){const i=Ot._getElementCallbacks(e.target);if(i)for(const n of i)n(e)}})}},p(Ot,"_observerInstance",null),p(Ot,"_elementCallbacks",null),Ot);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function pS(s,t){s instanceof HTMLTextAreaElement&&(s.value=t),s.innerHTML=t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Oc(s){return t=>t+s}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Da(s){let t=0;for(;s.previousSibling;)s=s.previousSibling,t++;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function yA(s,t,e){s.insertBefore(e,s.childNodes[t]||null)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ju(s){return s&&s.nodeType===Node.COMMENT_NODE}function vA(s){try{ue.document.createAttribute(s)}catch{return!1}return!0}function Mr(s){return s?Mt(s)?Mr(s.parentElement):s.getClientRects?!!s.getClientRects().length:!1:!1}function bx({element:s,target:t,positions:e,limiter:i,fitInViewport:n,viewportOffsetConfig:r}){eg(t)&&(t=t()),eg(i)&&(i=i());const o=OA(s),l=J$(r),a=new Me(s),c=wS(t,l);let h;if(!c||!l.getIntersection(c))return null;const f={targetRect:c,elementRect:a,positionedElementAncestor:o,viewportRect:l};if(!i&&!n)h=new _A(e[0],f);else{if(i){const m=wS(i,l);m&&(f.limiterRect=m)}h=eQ(e,f)}return h}function wS(s,t){const e=new Me(s).getVisible();return e?e.getIntersection(t):null}function J$(s){s=Object.assign({top:0,bottom:0,left:0,right:0},s);const t=new Me(ue.window);return t.top+=s.top,t.height-=s.top,t.bottom-=s.bottom,t.height-=s.bottom,t}function eQ(s,t){const{elementRect:e}=t,i=e.getArea(),n=s.map(l=>new _A(l,t)).filter(l=>!!l.name);let r=0,o=null;for(const l of n){const{limiterIntersectionArea:a,viewportIntersectionArea:c}=l;if(a===i)return l;const h=c**2+a**2;h>r&&(r=h,o=l)}return o}class _A{constructor(t,e){p(this,"name");p(this,"config");p(this,"_positioningFunctionCoordinates");p(this,"_options");p(this,"_cachedRect");p(this,"_cachedAbsoluteRect");const i=t(e.targetRect,e.elementRect,e.viewportRect,e.limiterRect);if(!i)return;const{left:n,top:r,name:o,config:l}=i;this.name=o,this.config=l,this._positioningFunctionCoordinates={left:n,top:r},this._options=e}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const t=this._options.limiterRect;return t?t.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function bS(s){const t=s.parentNode;t&&t.removeChild(s)}function vm(){const s=ue.window.visualViewport;if(!s||!(Ie.isiOS||Ie.isSafari))return{left:0,top:0};const t=Math.max(Math.round(s.offsetLeft),0),e=Math.max(Math.round(s.offsetTop),0);return{left:t,top:e}}function tQ({target:s,viewportOffset:t=0,ancestorOffset:e=0,alignToTop:i,forceScroll:n}){const r=Ox(s);let o=r,l=null;for(t=sQ(t);o;){let a;o==r?a=OS(s):a=OS(l),nQ({parent:a,getRect:()=>Ew(s,o),alignToTop:i,ancestorOffset:e,forceScroll:n});let c=Ew(s,o);const h=Ew(a,o);if(c.height>h.height){const f=c.getIntersection(h);f&&(c=f)}if(iQ({window:o,rect:c,viewportOffset:t,alignToTop:i,forceScroll:n}),o.parent!=o){if(l=o.frameElement,o=o.parent,!l)return}else o=null}}function iQ({window:s,rect:t,alignToTop:e,forceScroll:i,viewportOffset:n}){const r=t.clone().moveBy(0,n.bottom),o=t.clone().moveBy(0,-n.top),l=new Me(s).excludeScrollbarsAndBorders(),a=[o,r],c=e&&i,h=a.every(v=>l.contains(v));let{scrollX:f,scrollY:m}=s;const w=f,O=m;c?m-=l.top-t.top+n.top:h||(SA(o,l)?m-=l.top-t.top+n.top:kA(r,l)&&(e?m+=t.top-l.top-n.top:m+=t.bottom-l.bottom+n.bottom)),h||(CA(t,l)?f-=l.left-t.left+n.left:PA(t,l)&&(f+=t.right-l.right+n.right)),(f!=w||m!==O)&&s.scrollTo(f,m)}function nQ({parent:s,getRect:t,alignToTop:e,forceScroll:i,ancestorOffset:n=0,limiterElement:r}){const o=Ox(s),l=e&&i;let a,c,h;const f=r||o.document.body;for(;s!=f;)c=t(),a=new Me(s).excludeScrollbarsAndBorders(),h=a.contains(c),l?s.scrollTop-=a.top-c.top+n:h||(SA(c,a)?s.scrollTop-=a.top-c.top+n:kA(c,a)&&(e?s.scrollTop+=c.top-a.top-n:s.scrollTop+=c.bottom-a.bottom+n)),h||(CA(c,a)?s.scrollLeft-=a.left-c.left+n:PA(c,a)&&(s.scrollLeft+=c.right-a.right+n)),s=s.parentNode}function kA(s,t){return s.bottom>t.bottom}function SA(s,t){return s.top<t.top}function CA(s,t){return s.left<t.left}function PA(s,t){return s.right>t.right}function Ox(s){return lp(s)?s.startContainer.ownerDocument.defaultView:s.ownerDocument.defaultView}function OS(s){if(lp(s)){let t=s.commonAncestorContainer;return Mt(t)&&(t=t.parentNode),t}else return s.parentNode}function Ew(s,t){const e=Ox(s),i=new Me(s);if(e===t)return i;{let n=e;for(;n!=t;){const r=n.frameElement,o=new Me(r).excludeScrollbarsAndBorders();i.moveBy(o.left,o.top),n=n.parent}}return i}function sQ(s){return typeof s=="number"?{top:s,bottom:s,left:s,right:s}:s}const rQ={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},oQ={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},xS={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},Fe=hQ(),lQ=Object.fromEntries(Object.entries(Fe).map(([s,t])=>{let e;return t in xS?e=xS[t]:e=s.charAt(0).toUpperCase()+s.slice(1),[t,e]}));function ic(s){let t;if(typeof s=="string"){if(t=Fe[s.toLowerCase()],!t)throw new A("keyboard-unknown-key",null,{key:s})}else t=s.keyCode+(s.altKey?Fe.alt:0)+(s.ctrlKey?Fe.ctrl:0)+(s.shiftKey?Fe.shift:0)+(s.metaKey?Fe.cmd:0);return t}function xx(s){return typeof s=="string"&&(s=dQ(s)),s.map(t=>typeof t=="string"?cQ(t):t).reduce((t,e)=>e+t,0)}function sg(s,t){let e=xx(s);const i=Ie.isMac||Ie.isiOS;return Object.entries(i?rQ:oQ).reduce((o,[l,a])=>((e&Fe[l])!=0&&(e&=~Fe[l],o+=a),o),"")+(e?lQ[e]:"")}function aQ(s){return s==Fe.arrowright||s==Fe.arrowleft||s==Fe.arrowup||s==Fe.arrowdown}function yx(s,t){const e=t==="ltr";switch(s){case Fe.arrowleft:return e?"left":"right";case Fe.arrowright:return e?"right":"left";case Fe.arrowup:return"up";case Fe.arrowdown:return"down"}}function cQ(s){if(s.endsWith("!"))return ic(s.slice(0,-1));const t=ic(s);return(Ie.isMac||Ie.isiOS)&&t==Fe.ctrl?Fe.cmd:t}function uQ(s,t){const e=yx(s,t);return e==="down"||e==="right"}function hQ(){const s={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let t=65;t<=90;t++){const e=String.fromCharCode(t);s[e.toLowerCase()]=t}for(let t=48;t<=57;t++)s[t-48]=t;for(let t=112;t<=123;t++)s["f"+(t-111)]=t;return Object.assign(s,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),s}function dQ(s){return s.split("+").map(t=>t.trim())}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const fQ=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig","ur","urd"];function yS(s){return fQ.includes(s)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ut(s){return Array.isArray(s)?s:[s]}/* istanbul ignore else -- @preserve */ue.window.CKEDITOR_TRANSLATIONS||(ue.window.CKEDITOR_TRANSLATIONS={});function mQ(s,t,e=1,i){if(typeof e!="number")throw new A("translation-service-quantity-not-a-number",null,{quantity:e});const n=i||ue.window.CKEDITOR_TRANSLATIONS,r=wQ(n);r===1&&(s=Object.keys(n)[0]);const o=t.id||t.string;if(r===0||!pQ(s,o,n))return e!==1?t.plural:t.string;const l=n[s].dictionary,a=n[s].getPluralForm||(f=>f===1?0:1),c=l[o];if(typeof c=="string")return c;const h=Number(a(e));return c[h]}function gQ(s){return Array.isArray(s)?s.reduce((t,e)=>gx(t,e)):s}function pQ(s,t,e){return!!e[s]&&!!e[s].dictionary[t]}function wQ(s){return Object.keys(s).length}class bQ{constructor({uiLanguage:t="en",contentLanguage:e,translations:i}={}){p(this,"uiLanguage");p(this,"uiLanguageDirection");p(this,"contentLanguage");p(this,"contentLanguageDirection");p(this,"t");p(this,"translations");this.uiLanguage=t,this.contentLanguage=e||this.uiLanguage,this.uiLanguageDirection=yS(this.uiLanguage),this.contentLanguageDirection=yS(this.contentLanguage),this.translations=gQ(i),this.t=(n,r)=>this._t(n,r)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(t,e=[]){e=ut(e),typeof t=="string"&&(t={string:t});const n=!!t.plural?e[0]:1,r=mQ(this.uiLanguage,t,n,this.translations);return OQ(r,e)}}function OQ(s,t){return s.replace(/%(\d+)/g,(e,i)=>i<t.length?t[i]:e)}class vi extends gt(){constructor(e={},i={}){super();p(this,"_items");p(this,"_itemMap");p(this,"_idProperty");p(this,"_bindToCollection");p(this,"_bindToExternalToInternalMap");p(this,"_bindToInternalToExternalMap");p(this,"_skippedIndexesFromExternal");const n=Dn(e);if(n||(i=e),this._items=[],this._itemMap=new Map,this._idProperty=i.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],n)for(const r of e)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,i){return this.addMany([e],i)}addMany(e,i){if(i===void 0)i=this._items.length;else if(i>this._items.length||i<0)throw new A("collection-add-item-invalid-index",this);let n=0;for(const r of e){const o=this._getItemIdBeforeAdding(r),l=i+n;this._items.splice(l,0,r),this._itemMap.set(o,r),this.fire("add",r,l),n++}return this.fire("change",{added:e,removed:[],index:i}),this}get(e){let i;if(typeof e=="string")i=this._itemMap.get(e);else if(typeof e=="number")i=this._items[e];else throw new A("collection-get-invalid-arg",this);return i||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const i=this._idProperty,n=e[i];return n&&this._itemMap.has(n)}}getIndex(e){let i;return typeof e=="string"?i=this._itemMap.get(e):i=e,i?this._items.indexOf(i):-1}remove(e){const[i,n]=this._remove(e);return this.fire("change",{added:[],removed:[i],index:n}),i}map(e,i){return this._items.map(e,i)}forEach(e,i){this._items.forEach(e,i)}find(e,i){return this._items.find(e,i)}filter(e,i){return this._items.filter(e,i)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new A("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:i=>{this._setUpBindToBinding(n=>new i(n))},using:i=>{typeof i=="function"?this._setUpBindToBinding(i):this._setUpBindToBinding(n=>n[i])}}}_setUpBindToBinding(e){const i=this._bindToCollection,n=(r,o,l)=>{const a=i._bindToCollection==this,c=i._bindToInternalToExternalMap.get(o);if(a&&c)this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o);else{const h=e(o);if(!h){this._skippedIndexesFromExternal.push(l);return}let f=l;for(const m of this._skippedIndexesFromExternal)l>m&&f--;for(const m of i._skippedIndexesFromExternal)f>=m&&f++;this._bindToExternalToInternalMap.set(o,h),this._bindToInternalToExternalMap.set(h,o),this.add(h,f);for(let m=0;m<i._skippedIndexesFromExternal.length;m++)f<=i._skippedIndexesFromExternal[m]&&i._skippedIndexesFromExternal[m]++}};for(const r of i)n(null,r,i.getIndex(r));this.listenTo(i,"add",n),this.listenTo(i,"remove",(r,o,l)=>{const a=this._bindToExternalToInternalMap.get(o);a&&this.remove(a),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((c,h)=>(l<h&&c.push(h-1),l>h&&c.push(h),c),[])})}_getItemIdBeforeAdding(e){const i=this._idProperty;let n;if(i in e){if(n=e[i],typeof n!="string")throw new A("collection-add-invalid-id",this);if(this.get(n))throw new A("collection-add-item-already-exists",this)}else e[i]=n=ii();return n}_remove(e){let i,n,r,o=!1;const l=this._idProperty;if(typeof e=="string"?(n=e,r=this._itemMap.get(n),o=!r,r&&(i=this._items.indexOf(r))):typeof e=="number"?(i=e,r=this._items[i],o=!r,r&&(n=r[l])):(r=e,n=r[l],i=this._items.indexOf(r),o=i==-1||!this._itemMap.get(n)),o)throw new A("collection-remove-404",this);this._items.splice(i,1),this._itemMap.delete(n);const a=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(a),this.fire("remove",r,i),[r,i]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Nt(s){const t=s.next();return t.done?null:t.value}class ht extends Zi(ct()){constructor(){super();p(this,"_elements",new Set);p(this,"_externalViews",new Set);p(this,"_blurTimeout",null);this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(e){if(_S(e))this._addElement(e);else if(vS(e))this._addView(e);else{if(!e.element)throw new A("focustracker-add-view-missing-element",{focusTracker:this,view:e});this._addElement(e.element)}}remove(e){_S(e)?this._removeElement(e):vS(e)?this._removeView(e):this._removeElement(e.element)}_addElement(e){if(this._elements.has(e))throw new A("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>{const i=this.externalViews.find(n=>xQ(e,n));i?this._focus(i.element):this._focus(e)},{useCapture:!0}),this.listenTo(e,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(e)}_removeElement(e){this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e)),e===this.focusedElement&&this._blur()}_addView(e){e.element&&this._addElement(e.element),this.listenTo(e.focusTracker,"change:focusedElement",()=>{e.focusTracker.focusedElement?e.element&&this._focus(e.element):this._blur()}),this._externalViews.add(e)}_removeView(e){e.element&&this._removeElement(e.element),this.stopListening(e.focusTracker),this._externalViews.delete(e)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(e){this._clearBlurTimeout(),this.focusedElement=e,this.isFocused=!0}_blur(){this.elements.find(n=>n.contains(document.activeElement))||this.externalViews.find(n=>n.focusTracker.isFocused&&!n.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function vS(s){return"focusTracker"in s&&s.focusTracker instanceof ht}function _S(s){return Po(s)}function xQ(s,t){return kS(s,t)?!0:!!t.focusTracker.externalViews.find(e=>kS(s,e))}function kS(s,t){return!!t.element&&t.element.contains(document.activeElement)&&s.contains(t.element)}class bt{constructor(){p(this,"_listener");this._listener=new(Zi())}listenTo(t){this._listener.listenTo(t,"keydown",(e,i)=>{this._listener.fire("_keydown:"+ic(i),i)})}set(t,e,i={}){const n=xx(t),r=i.priority;this._listener.listenTo(this._listener,"_keydown:"+n,(o,l)=>{i.filter&&!i.filter(l)||(e(l,()=>{l.preventDefault(),l.stopPropagation(),o.stop()}),o.return=!0)},{priority:r})}press(t){return!!this._listener.fire("_keydown:"+ic(t),t)}stopListening(t){this._listener.stopListening(t)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function yQ(s){const t=new Map;for(const e in s)t.set(e,s[e]);return t}function cs(s){return Dn(s)?new Map(s):yQ(s)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function vQ(s,t={}){return new Promise((e,i)=>{const n=t.signal||new AbortController().signal;n.throwIfAborted();const r=setTimeout(o,s);n.addEventListener("abort",l,{once:!0});function o(){n.removeEventListener("abort",l),e()}function l(){clearTimeout(r),i(n.reason)}})}async function _Q(s,t={}){const{maxAttempts:e=4,retryDelay:i=kQ(),signal:n=new AbortController().signal}=t;n.throwIfAborted();for(let r=0;;r++){try{return await s()}catch(o){if(r+1>=e)throw o}await vQ(i(r),{signal:n})}}function kQ(s={}){const{delay:t=1e3,factor:e=2,maxDelay:i=1e4}=s;return n=>Math.min(e**n*t,i)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function SS(s,t,e){const i=s.length,n=t.length;for(let r=i-1;r>=e;r--)s[r+n]=s[r];for(let r=0;r<n;r++)s[e+r]=t[r]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function ap(s,t){let e;function i(...n){i.cancel(),e=setTimeout(()=>s(...n),t)}return i.cancel=()=>{clearTimeout(e)},i}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function vx(s){try{if(!s.startsWith("ey"))return null;const t=atob(s.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(t)}catch{return null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function SQ(){const s=[];for(let t=0;t<256;t++){let e=t;for(let i=0;i<8;i++)e&1?e=3988292384^e>>>1:e=e>>>1;s[t]=e}return s}function CQ(s){const t=Array.isArray(s)?s:[s],e=SQ();let i=-1;const n=t.map(r=>Array.isArray(r)?r.join(""):String(r)).join("");for(let r=0;r<n.length;r++){const o=n.charCodeAt(r);i=i>>>8^e[(i^o)&255]}return i=(i^-1)>>>0,i.toString(16).padStart(8,"0")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function PQ(s){const t=[{name:"address",isVoid:!1},{name:"article",isVoid:!1},{name:"aside",isVoid:!1},{name:"blockquote",isVoid:!1},{name:"details",isVoid:!1},{name:"dialog",isVoid:!1},{name:"dd",isVoid:!1},{name:"div",isVoid:!1},{name:"dl",isVoid:!1},{name:"dt",isVoid:!1},{name:"fieldset",isVoid:!1},{name:"figcaption",isVoid:!1},{name:"figure",isVoid:!1},{name:"footer",isVoid:!1},{name:"form",isVoid:!1},{name:"h1",isVoid:!1},{name:"h2",isVoid:!1},{name:"h3",isVoid:!1},{name:"h4",isVoid:!1},{name:"h5",isVoid:!1},{name:"h6",isVoid:!1},{name:"header",isVoid:!1},{name:"hgroup",isVoid:!1},{name:"hr",isVoid:!0},{name:"li",isVoid:!1},{name:"main",isVoid:!1},{name:"nav",isVoid:!1},{name:"ol",isVoid:!1},{name:"p",isVoid:!1},{name:"section",isVoid:!1},{name:"table",isVoid:!1},{name:"tbody",isVoid:!1},{name:"td",isVoid:!1},{name:"th",isVoid:!1},{name:"thead",isVoid:!1},{name:"tr",isVoid:!1},{name:"ul",isVoid:!1}],e=t.map(o=>o.name).join("|"),i=s.replace(new RegExp(`</?(${e})( .*?)?>`,"g"),`
$&
`).replace(/<br[^>]*>/g,`$&
`).split(`
`);let n=0,r=!1;return i.map(o=>(r=AQ(o,r),!o.length&&!r?"":TQ(o,t)?Rf(o,n++):EQ(o,t)?Rf(o,--n):r==="middle"||r==="last"?Rf(o,0):Rf(o,n))).join("").trimEnd()}function TQ(s,t){return t.some(e=>!(e.isVoid||!new RegExp(`<${e.name}( .*?)?>`).test(s)))}function EQ(s,t){return t.some(e=>new RegExp(`</${e.name}>`).test(s))}function Rf(s,t,e="    "){return`${e.repeat(Math.max(0,t))}${s}
`}function AQ(s,t){const e=/<pre( .*?)?>/.test(s),i=/<\/pre>/.test(s);return e&&i?!1:e?"first":i?"last":t==="first"||t==="middle"?"middle":!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function IQ(s){return!!s&&s.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(s)}function RQ(s){return!!s&&s.length==1&&/[\ud800-\udbff]/.test(s)}function VQ(s){return!!s&&s.length==1&&/[\udc00-\udfff]/.test(s)}function _x(s,t){return RQ(s.charAt(t-1))&&VQ(s.charAt(t))}function kx(s,t){return IQ(s.charAt(t))}const MQ=LQ();function TA(s,t){const e=String(s).matchAll(MQ);return Array.from(e).some(i=>i.index<t&&t<i.index+i[0].length)}function LQ(){const s=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],t=new RegExp("\\p{Regional_Indicator}{2}","u").source,e="(?:"+s.map(n=>n.source).join("|")+")",i=`${t}|${e}(?:‍${e})*`;return new RegExp(i,"ug")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const gu=new WeakMap;let CS=!1;function Sx({view:s,element:t,text:e,isDirectHost:i=!0,keepOnFocus:n=!1}){const r=s.document;gu.has(r)||(gu.set(r,new Map),r.registerPostFixer(l=>Aw(gu.get(r),l)),r.on("change:isComposing",()=>{s.change(l=>Aw(gu.get(r),l))},{priority:"high"})),t.is("editableElement")&&t.on("change:placeholder",(l,a,c)=>o(c)),t.placeholder?o(t.placeholder):e&&o(e),e&&FQ();function o(l){const a={text:l,isDirectHost:i,keepOnFocus:n,hostElement:i?t:null};gu.get(r).set(t,a),s.change(c=>Aw([[t,a]],c))}}function BQ(s,t){return t.hasClass("ck-placeholder")?!1:(s.addClass("ck-placeholder",t),!0)}function $Q(s,t){return t.hasClass("ck-placeholder")?(s.removeClass("ck-placeholder",t),!0):!1}function QQ(s,t){if(!s.isAttached()||DQ(s))return!1;const e=s.document,n=e.selection.anchor;return e.isComposing&&n&&n.parent===s?!1:t||!e.isFocused?!0:!!n&&n.parent!==s}function DQ(s){for(const t of s.getChildren())if(!t.is("uiElement"))return!0;return!1}function Aw(s,t){const e=[];let i=!1;for(const[n,r]of s)r.isDirectHost&&(e.push(n),PS(t,n,r)&&(i=!0));for(const[n,r]of s){if(r.isDirectHost)continue;const o=NQ(n);o&&(e.includes(o)||(r.hostElement=o,PS(t,n,r)&&(i=!0)))}return i}function PS(s,t,e){const{text:i,isDirectHost:n,hostElement:r}=e;let o=!1;return r.getAttribute("data-placeholder")!==i&&(s.setAttribute("data-placeholder",i,r),o=!0),(n||t.childCount==1)&&QQ(r,e.keepOnFocus)?BQ(s,r)&&(o=!0):$Q(s,r)&&(o=!0),o}function NQ(s){if(s.childCount){const t=s.getChild(0);if(t.is("element")&&!t.is("uiElement")&&!t.is("attributeElement"))return t}return null}function FQ(){CS||We("enableplaceholder-deprecated-text-option"),CS=!0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let Il=class{is(){throw new Error("is() method is abstract")}},Rl=class extends gt(Il){constructor(e){super();p(this,"document");p(this,"parent");this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new A("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let i=this;for(;i.parent;)e.unshift(i.index),i=i.parent;return e}getAncestors(e={}){const i=[];let n=e.includeSelf?this:this.parent;for(;n;)i[e.parentFirst?"push":"unshift"](n),n=n.parent;return i}getCommonAncestor(e,i={}){const n=this.getAncestors(i),r=e.getAncestors(i);let o=0;for(;n[o]==r[o]&&n[o];)o++;return o===0?null:n[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const i=this.getPath(),n=e.getPath(),r=Di(i,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return i[r]<n[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,i,n){this.fire(`change:${e}`,i,n),this.parent&&this.parent._fireChange(e,i,n)}toJSON(){const e=ux(this);return delete e.parent,e}};Rl.prototype.is=function(s){return s==="node"||s==="view:node"};let Ii=class m1 extends Rl{constructor(e,i){super(e);p(this,"_textData");this._textData=i}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof m1?this===e||this.data===e.data:!1}_clone(){return new m1(this.document,this.data)}};Ii.prototype.is=function(s){return s==="$text"||s==="view:$text"||s==="text"||s==="view:text"||s==="node"||s==="view:node"};let kr=class extends Il{constructor(e,i,n){super();p(this,"textNode");p(this,"data");p(this,"offsetInText");if(this.textNode=e,i<0||i>e.data.length)throw new A("view-textproxy-wrong-offsetintext",this);if(n<0||i+n>e.data.length)throw new A("view-textproxy-wrong-length",this);this.data=e.data.substring(i,i+n),this.offsetInText=i}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const i=[];let n=e.includeSelf?this.textNode:this.parent;for(;n!==null;)i[e.parentFirst?"push":"unshift"](n),n=n.parent;return i}};kr.prototype.is=function(s){return s==="$textProxy"||s==="view:$textProxy"||s==="textProxy"||s==="view:textProxy"};class rg{constructor(){p(this,"_consumables",new Map)}add(t,e){let i;if(t.is("$text")||t.is("documentFragment")){this._consumables.set(t,!0);return}this._consumables.has(t)?i=this._consumables.get(t):(i=new zQ(t),this._consumables.set(t,i)),i.add(e?Bu(e):t._getConsumables())}test(t,e){const i=this._consumables.get(t);return i===void 0?null:t.is("$text")||t.is("documentFragment")?i:i.test(Bu(e))}consume(t,e){if(t.is("$text")||t.is("documentFragment"))return this.test(t,e)?(this._consumables.set(t,!1),!0):!1;const i=this._consumables.get(t);return i===void 0?!1:i.consume(Bu(e))}revert(t,e){const i=this._consumables.get(t);i!==void 0&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):i.revert(Bu(e)))}static createFrom(t,e){if(e||(e=new rg),t.is("$text"))e.add(t);else if(t.is("element")||t.is("documentFragment")){e.add(t);for(const i of t.getChildren())rg.createFrom(i,e)}return e}}class zQ{constructor(t){p(this,"element");p(this,"_canConsumeName",null);p(this,"_attributes",new Map);this.element=t}add(t){t.name&&(this._canConsumeName=!0);for(const[e,i]of t.attributes)if(i){let n=this._attributes.get(e);(!n||typeof n=="boolean")&&(n=new Map,this._attributes.set(e,n)),n.set(i,!0)}else{if(e=="style"||e=="class")throw new A("viewconsumable-invalid-attribute",this);this._attributes.set(e,!0)}}test(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(const[e,i]of t.attributes){const n=this._attributes.get(e);if(n===void 0)return null;if(n===!1)return!1;if(n!==!0){if(i){const r=n.get(i);if(r===void 0)return null;if(!r)return!1}else for(const r of n.values())if(!r)return!1}}return!0}consume(t){if(!this.test(t))return!1;t.name&&(this._canConsumeName=!1);for(const[e,i]of t.attributes){const n=this._attributes.get(e);if(typeof n=="boolean")for(const[r]of this.element._getConsumables(e,i).attributes)this._attributes.set(r,!1);else if(i)for(const[,r]of this.element._getConsumables(e,i).attributes)n.set(r,!1);else for(const r of n.keys())n.set(r,!1)}return!0}revert(t){t.name&&(this._canConsumeName=!0);for(const[e,i]of t.attributes){const n=this._attributes.get(e);if(n===!1){this._attributes.set(e,!0);continue}if(!(n===void 0||n===!0))if(i)n.get(i)===!1&&n.set(i,!0);else for(const r of n.keys())n.set(r,!0)}}}function Bu(s){const t=[];return"attributes"in s&&s.attributes&&Iw(t,s.attributes),"classes"in s&&s.classes&&Iw(t,s.classes,"class"),"styles"in s&&s.styles&&Iw(t,s.styles,"style"),{name:s.name||!1,attributes:t}}function Iw(s,t,e){if(typeof t=="string"){s.push(e?[e,t]:[t]);return}for(const i of t)Array.isArray(i)?s.push(i):s.push(e?[e,i]:[i])}class Nn{constructor(...t){p(this,"_patterns",[]);this.add(...t)}add(...t){for(let e of t)(typeof e=="string"||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const i of this._patterns){const n=this._isElementMatching(e,i);if(n)return{element:e,pattern:i,match:n}}return null}matchAll(...t){const e=[];for(const i of t)for(const n of this._patterns){const r=this._isElementMatching(i,n);r&&e.push({element:i,pattern:n,match:r})}return e.length>0?e:null}getElementName(){if(this._patterns.length!==1)return null;const t=this._patterns[0],e=t.name;return typeof t!="function"&&e&&!(e instanceof RegExp)?e:null}_isElementMatching(t,e){if(typeof e=="function"){const r=e(t);return!r||typeof r!="object"?r:Bu(r)}const i={};if(e.name&&(i.name=WQ(e.name,t.name),!i.name))return null;const n=[];return e.attributes&&!UQ(e.attributes,t,n)||e.classes&&!ZQ(e.classes,t,n)||e.styles&&!HQ(e.styles,t,n)?null:(n.length&&(i.attributes=n),i)}}function og(s,t){return s===!0||s===t||s instanceof RegExp&&!!String(t).match(s)}function WQ(s,t){return s instanceof RegExp?!!t.match(s):s===t}function Cx(s,t){if(Array.isArray(s))return s.map(i=>typeof i!="object"||i instanceof RegExp?t?[t,i,!0]:[i,!0]:((i.key===void 0||i.value===void 0)&&We("matcher-pattern-missing-key-or-value",i),t?[t,i.key,i.value]:[i.key,i.value]));if(typeof s!="object"||s instanceof RegExp)return[t?[t,s,!0]:[s,!0]];const e=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.push(t?[t,i,s[i]]:[i,s[i]]);return e}function UQ(s,t,e){let i;return typeof s=="object"&&!(s instanceof RegExp)&&!Array.isArray(s)?(s.style!==void 0&&We("matcher-pattern-deprecated-attributes-style-key",s),s.class!==void 0&&We("matcher-pattern-deprecated-attributes-class-key",s)):i=["class","style"],t._collectAttributesMatch(Cx(s),e,i)}function ZQ(s,t,e){return t._collectAttributesMatch(Cx(s,"class"),e)}function HQ(s,t,e){return t._collectAttributesMatch(Cx(s,"style"),e)}class Xa{constructor(t){p(this,"_styles");p(this,"_cachedStyleNames",null);p(this,"_cachedExpandedStyleNames",null);p(this,"_styleProcessor");this._styles={},this._styleProcessor=t}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=XQ(t);for(const[i,n]of e)this._styleProcessor.toNormalizedForm(i,n,this._styles);return this}has(t){if(this.isEmpty)return!1;const i=this._styleProcessor.getReducedForm(t,this._styles).find(([n])=>n===t);return Array.isArray(i)}set(t,e){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,ls(t))for(const[i,n]of Object.entries(t))this._styleProcessor.toNormalizedForm(i,n,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){for(const e of ut(t)){this._cachedStyleNames=null,this._cachedExpandedStyleNames=null;const i=g1(e);u$(this._styles,i),delete this._styles[e],this._cleanEmptyObjectsOnPath(i)}}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!ls(this._styles[t]))return this._styles[t];const i=this._styleProcessor.getReducedForm(t,this._styles).find(([n])=>n===t);if(Array.isArray(i))return i[1]}getStyleNames(t=!1){return this.isEmpty?[]:t?(this._cachedExpandedStyleNames||(this._cachedExpandedStyleNames=this._styleProcessor.getStyleNames(this._styles)),this._cachedExpandedStyleNames):(this._cachedStyleNames||(this._cachedStyleNames=this.getStylesEntries().map(([e])=>e)),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.getStyleNames())if(!t.has(e)||t.getAsString(e)!==this.getAsString(e))return!1;return!0}getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const i of e)t.push(...this._styleProcessor.getReducedForm(i,this._styles));return t}_clone(){const t=new this.constructor(this._styleProcessor);return t.set(this.getNormalized()),t}_getTokensMatch(t,e){const i=[];for(const n of this.getStyleNames(!0))if(og(t,n)){if(e===!0){i.push(n);continue}const r=this.getAsString(n);og(e,r)&&i.push(n)}return i.length?i:void 0}_getConsumables(t){const e=[];if(t){e.push(t);for(const i of this._styleProcessor.getRelatedStyles(t))e.push(i)}else for(const i of this.getStyleNames()){for(const n of this._styleProcessor.getRelatedStyles(i))e.push(n);e.push(i)}return e}_canMergeFrom(t){for(const e of t.getStyleNames())if(this.has(e)&&this.getAsString(e)!==t.getAsString(e))return!1;return!0}_mergeFrom(t){for(const e of t.getStyleNames())this.has(e)||this.set(e,t.getAsString(e))}_isMatching(t){for(const e of t.getStyleNames())if(!this.has(e)||this.getAsString(e)!==t.getAsString(e))return!1;return!0}_cleanEmptyObjectsOnPath(t){const e=t.split(".");if(!(e.length>1))return;const n=e.splice(0,e.length-1).join("."),r=Co(this._styles,n);if(!r)return;!Object.keys(r).length&&this.remove(n)}}class qQ{constructor(){p(this,"_normalizers");p(this,"_extractors");p(this,"_reducers");p(this,"_consumables");this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(t,e,i){if(ls(e)){Rw(i,g1(t),e);return}if(this._normalizers.has(t)){const n=this._normalizers.get(t),{path:r,value:o}=n(e);Rw(i,r,o)}else Rw(i,t,e)}getNormalized(t,e){if(!t)return gx({},e);if(e[t]!==void 0)return e[t];if(this._extractors.has(t)){const i=this._extractors.get(t);if(typeof i=="string")return Co(e,i);const n=i(t,e);if(n)return n}return Co(e,g1(t))}getReducedForm(t,e){const i=this.getNormalized(t,e);return i===void 0?[]:this._reducers.has(t)?this._reducers.get(t)(i):[[t,i]]}getStyleNames(t){const e=new Set;for(const i of this._consumables.keys()){const n=this.getNormalized(i,t);n&&(typeof n!="object"||Object.keys(n).length)&&e.add(i)}for(const i of Object.keys(t))e.add(i);return Array.from(e)}getRelatedStyles(t){return this._consumables.get(t)||[]}setNormalizer(t,e){this._normalizers.set(t,e)}setExtractor(t,e){this._extractors.set(t,e)}setReducer(t,e){this._reducers.set(t,e)}setStyleRelation(t,e){this._mapStyleNames(t,e);for(const i of e)this._mapStyleNames(i,[t])}_mapStyleNames(t,e){this._consumables.has(t)||this._consumables.set(t,[]),this._consumables.get(t).push(...e)}}function XQ(s){let t=null,e=0,i=0,n=null;const r=new Map;if(s==="")return r;s.charAt(s.length-1)!=";"&&(s=s+";");for(let o=0;o<s.length;o++){const l=s.charAt(o);if(t===null)switch(l){case":":n||(n=s.substr(e,o-e),i=o+1);break;case'"':case"'":t=l;break;case";":{const a=s.substr(i,o-i);n&&r.set(n.trim(),a.trim()),n=null,e=o+1;break}}else l===t&&(t=null)}return r}function g1(s){return s.replace("-",".")}function Rw(s,t,e){let i=e;ls(e)&&(i=gx({},Co(s,t),e)),eA(s,t,i)}class Vw{constructor(){p(this,"_set",new Set)}get isEmpty(){return this._set.size==0}get size(){return this._set.size}has(t){return this._set.has(t)}keys(){return Array.from(this._set.keys())}setTo(t){this.clear();for(const e of t.split(/\s+/))e&&this._set.add(e);return this}set(t){for(const e of ut(t))e&&this._set.add(e)}remove(t){for(const e of ut(t))this._set.delete(e)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.keys())if(!t.has(e))return!1;return!0}_clone(){const t=new this.constructor;return t._set=new Set(this._set),t}_getTokensMatch(t){const e=[];if(t===!0){for(const i of this._set.keys())e.push(i);return e}if(typeof t=="string"){for(const i of t.split(/\s+/))if(this._set.has(i))e.push(i);else return;return e}for(const i of this._set.keys())i.match(t)&&e.push(i);return e.length?e:void 0}_getConsumables(t){return t?[t]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(t){for(const e of t._set.keys())this._set.has(e)||this._set.add(e)}_isMatching(t){for(const e of t._set.keys())if(!this._set.has(e))return!1;return!0}}let Lr=class EA extends Rl{constructor(e,i,n,r){super(e);p(this,"name");p(this,"_unsafeAttributesToRender",[]);p(this,"_attrs");p(this,"_children");p(this,"_customProperties",new Map);this.name=i,this._attrs=this._parseAttributes(n),this._children=[],r&&this._insertChild(0,r)}get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const e of this._attrs.keys())e!="class"&&e!="style"&&(yield e)}*getAttributes(){for(const[e,i]of this._attrs.entries())yield[e,String(i)]}getAttribute(e){return this._attrs.has(e)?String(this._attrs.get(e)):void 0}hasAttribute(e,i){return this._attrs.has(e)?i!==void 0?pa(this.name,e)||pu(this.name,e)?this._attrs.get(e).has(i):this._attrs.get(e)===i:!0:!1}isSimilar(e){if(!(e instanceof EA))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size)return!1;for(const[i,n]of this._attrs){const r=e._attrs.get(i);if(r===void 0)return!1;if(typeof n=="string"||typeof r=="string"){if(r!==n)return!1}else if(!n.isSimilar(r))return!1}return!0}hasClass(...e){for(const i of e)if(!this._classes||!this._classes.has(i))return!1;return!0}getClassNames(){const e=this._classes?this._classes.keys():[],i=e[Symbol.iterator]();return Object.assign(e,{next:i.next.bind(i)})}getStyle(e){return this._styles&&this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles&&this._styles.getNormalized(e)}getStyleNames(e){return this._styles?this._styles.getStyleNames(e):[]}hasStyle(...e){for(const i of e)if(!this._styles||!this._styles.has(i))return!1;return!0}findAncestor(...e){const i=new Nn(...e);let n=this.parent;for(;n&&!n.is("documentFragment");){if(i.match(n))return n;n=n.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=this._classes?this._classes.keys().sort().join(","):"",i=this._styles&&String(this._styles),n=Array.from(this._attrs).filter(([r])=>r!="style"&&r!="class").map(r=>`${r[0]}="${r[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(i?` style="${i}"`:"")+(n==""?"":` ${n}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const i=[];if(e)for(const r of this.getChildren())i.push(r._clone(e));const n=new this.constructor(this.document,this.name,this._attrs,i);return n._customProperties=new Map(this._customProperties),n.getFillerOffset=this.getFillerOffset,n._unsafeAttributesToRender=this._unsafeAttributesToRender,n}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,i){this._fireChange("children",this,{index:e});let n=0;const r=jQ(this.document,i);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,n++;return n}_removeChildren(e,i=1){this._fireChange("children",this,{index:e});for(let n=e;n<e+i;n++)this._children[n].parent=null;return this._children.splice(e,i)}_setAttribute(e,i,n=!0){if(this._fireChange("attributes",this),pa(this.name,e)||pu(this.name,e)){let r=this._attrs.get(e);r||(r=pa(this.name,e)?new Xa(this.document.stylesProcessor):new Vw,this._attrs.set(e,r)),n?r.setTo(String(i)):pa(this.name,e)?Array.isArray(i)?r.set(i[0],i[1]):r.set(i):r.set(typeof i=="string"?i.split(/\s+/):i)}else this._attrs.set(e,String(i))}_removeAttribute(e,i){if(this._fireChange("attributes",this),i!==void 0&&(pa(this.name,e)||pu(this.name,e))){const n=this._attrs.get(e);return n?(pu(this.name,e)&&typeof i=="string"&&(i=i.split(/\s+/)),n.remove(i),n.isEmpty?this._attrs.delete(e):!1):!1}return this._attrs.delete(e)}_addClass(e){this._setAttribute("class",e,!1)}_removeClass(e){this._removeAttribute("class",e)}_setStyle(e,i){typeof e!="string"?this._setAttribute("style",e,!1):this._setAttribute("style",[e,i],!1)}_removeStyle(e){this._removeAttribute("style",e)}_collectAttributesMatch(e,i,n){for(const[r,o,l]of e){let a=!1,c=!1;for(const[h,f]of this._attrs)if(!(n&&n.includes(h)||!og(r,h)))if(a=!0,typeof f=="string"){if(og(o,f))i.push([h]),c=!0;else if(!(r instanceof RegExp))return!1}else{const m=f._getTokensMatch(o,l||!0);if(m){c=!0;for(const w of m)i.push([h,w])}else if(!(r instanceof RegExp))return!1}if(!a||!c)return!1}return!0}_getConsumables(e,i){const n=[];if(e){const r=this._attrs.get(e);if(r!==void 0)if(typeof r=="string")n.push([e]);else for(const o of r._getConsumables(i))n.push([e,o])}else for(const[r,o]of this._attrs)if(typeof o=="string")n.push([r]);else for(const l of o._getConsumables())n.push([r,l]);return{name:!e,attributes:n}}_canMergeAttributesFrom(e){if(this.name!=e.name)return!1;for(const[i,n]of e._attrs){const r=this._attrs.get(i);if(r!==void 0){if(typeof r=="string"||typeof n=="string"){if(r!==n)return!1}else if(!r._canMergeFrom(n))return!1}}return!0}_mergeAttributesFrom(e){this._fireChange("attributes",this);for(const[i,n]of e._attrs){const r=this._attrs.get(i);r===void 0||typeof r=="string"||typeof n=="string"?this._setAttribute(i,n):r._mergeFrom(n)}}_canSubtractAttributesOf(e){if(this.name!=e.name)return!1;for(const[i,n]of e._attrs){const r=this._attrs.get(i);if(r===void 0)return!1;if(typeof r=="string"||typeof n=="string"){if(r!==n)return!1}else if(!r._isMatching(n))return!1}return!0}_subtractAttributesOf(e){this._fireChange("attributes",this);for(const[i,n]of e._attrs){const r=this._attrs.get(i);typeof r=="string"||typeof n=="string"?this._attrs.delete(i):(r.remove(n.keys()),r.isEmpty&&this._attrs.delete(i))}}_setCustomProperty(e,i){this._customProperties.set(e,i)}_removeCustomProperty(e){return this._customProperties.delete(e)}_parseAttributes(e){const i=cs(e);for(const[n,r]of i)if(r===null)i.delete(n);else if(pa(this.name,n)){const o=r instanceof Xa?r._clone():new Xa(this.document.stylesProcessor).setTo(String(r));i.set(n,o)}else if(pu(this.name,n)){const o=r instanceof Vw?r._clone():new Vw().setTo(String(r));i.set(n,o)}else typeof r!="string"&&i.set(n,String(r));return i}};Lr.prototype.is=function(s,t){return t?t===this.name&&(s==="element"||s==="view:element"):s==="element"||s==="view:element"||s==="node"||s==="view:node"};function jQ(s,t){if(typeof t=="string")return[new Ii(s,t)];Dn(t)||(t=[t]);const e=[];for(const i of t)typeof i=="string"?e.push(new Ii(s,i)):i instanceof kr?e.push(new Ii(s,i.data)):e.push(i);return e}function pu(s,t){return t=="class"||s=="a"&&t=="rel"}function pa(s,t){return t=="style"}class dh extends Lr{constructor(t,e,i,n){super(t,e,i,n),this.getFillerOffset=GQ}}dh.prototype.is=function(s,t){return t?t===this.name&&(s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"):s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function GQ(){const s=[...this.getChildren()],t=s[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;for(const e of s)if(!e.is("uiElement"))return null;return this.childCount}class cp extends ct(dh){constructor(t,e,i,n){super(t,e,i,n),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",r=>r&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}}cp.prototype.is=function(s,t){return t?t===this.name&&(s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"):s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};const TS=Symbol("rootName");class AA extends cp{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty(TS)}set rootName(t){this._setCustomProperty(TS,t)}set _name(t){this.name=t}}AA.prototype.is=function(s,t){return t?t===this.name&&(s==="rootElement"||s==="view:rootElement"||s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"):s==="rootElement"||s==="view:rootElement"||s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};let dl=class{constructor(t={}){p(this,"direction");p(this,"boundaries");p(this,"singleCharacters");p(this,"shallow");p(this,"ignoreElementEnd");p(this,"_position");p(this,"_boundaryStartParent");p(this,"_boundaryEndParent");if(!t.boundaries&&!t.startPosition)throw new A("view-tree-walker-no-start-position",null);if(t.direction&&t.direction!="forward"&&t.direction!="backward")throw new A("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this._position=we._createAt(t.startPosition):this._position=we._createAt(t.boundaries[t.direction=="backward"?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,i;do i=this.position,e=this.next();while(!e.done&&t(e.value));e.done||(this._position=i)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone()}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,i=t.parent;if(i.parent===null&&t.offset===i.childCount)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let n;if(i&&i.is("view:$text")){if(t.isAtEnd)return this._position=we._createAfter(i),this._next();n=i.data[t.offset]}else n=i.getChild(t.offset);if(typeof n=="string"){let r;this.singleCharacters?r=1:r=(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-t.offset;const o=new kr(i,t.offset,r);return t.offset+=r,this._position=t,this._formatReturnValue("text",o,e,t,r)}if(n&&n.is("view:element")){if(!this.shallow)t=new we(n,0);else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,this._formatReturnValue("elementStart",n,e,t,1)}if(n&&n.is("view:$text")){if(this.singleCharacters)return t=new we(n,0),this._position=t,this._next();let r=n.data.length,o;return n==this._boundaryEndParent?(r=this.boundaries.end.offset,o=new kr(n,0,r),t=we._createAfter(o)):(o=new kr(n,0,n.data.length),t.offset++),this._position=t,this._formatReturnValue("text",o,e,t,r)}return t=we._createAfter(i),this._position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,e,t)}_previous(){let t=this.position.clone();const e=this.position,i=t.parent;if(i.parent===null&&t.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let n;if(i.is("view:$text")){if(t.isAtStart)return this._position=we._createBefore(i),this._previous();n=i.data[t.offset-1]}else n=i.getChild(t.offset-1);if(typeof n=="string"){let r;if(this.singleCharacters)r=1;else{const l=i===this._boundaryStartParent?this.boundaries.start.offset:0;r=t.offset-l}t.offset-=r;const o=new kr(i,t.offset,r);return this._position=t,this._formatReturnValue("text",o,e,t,r)}if(n&&n.is("view:element"))return this.shallow?(t.offset--,this._position=t,this._formatReturnValue("elementStart",n,e,t,1)):(t=new we(n,n.childCount),this._position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",n,e,t));if(n&&n.is("view:$text")){if(this.singleCharacters)return t=new we(n,n.data.length),this._position=t,this._previous();let r=n.data.length,o;if(n==this._boundaryStartParent){const l=this.boundaries.start.offset;o=new kr(n,l,n.data.length-l),r=o.data.length,t=we._createBefore(o)}else o=new kr(n,0,n.data.length),t.offset--;return this._position=t,this._formatReturnValue("text",o,e,t,r)}return t=we._createBefore(i),this._position=t,this._formatReturnValue("elementStart",i,e,t,1)}_formatReturnValue(t,e,i,n,r){return e.is("view:$textProxy")&&(e.offsetInText+e.data.length==e.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(n=we._createAfter(e.textNode),this._position=n):i=we._createAfter(e.textNode)),e.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(n=we._createBefore(e.textNode),this._position=n):i=we._createBefore(e.textNode))),{done:!1,value:{type:t,item:e,previousPosition:i,nextPosition:n,length:r}}}},we=class vr extends Il{constructor(e,i){super();p(this,"parent");p(this,"offset");this.parent=e,this.offset=i}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof cp);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const i=vr._createAt(this),n=i.offset+e;return i.offset=n<0?0:n,i}getLastMatchingPosition(e,i={}){i.startPosition=this;const n=new dl(i);return n.skip(e),n.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const i=this.getAncestors(),n=e.getAncestors();let r=0;for(;i[r]==n[r]&&i[r];)r++;return r===0?null:i[r-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const i=this.parent.is("node")?this.parent.getPath():[],n=e.parent.is("node")?e.parent.getPath():[];i.push(this.offset),n.push(e.offset);const r=Di(i,n);switch(r){case"prefix":return"before";case"extension":return"after";default:return i[r]<n[r]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new dl(e)}clone(){return new vr(this.parent,this.offset)}static _createAt(e,i){if(e instanceof vr)return new this(e.parent,e.offset);{const n=e;if(i=="end")i=n.is("$text")?n.data.length:n.childCount;else{if(i=="before")return this._createBefore(n);if(i=="after")return this._createAfter(n);if(i!==0&&!i)throw new A("view-createpositionat-offset-required",n)}return new vr(n,i)}}static _createAfter(e){if(e.is("$textProxy"))return new vr(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new A("view-position-after-root",e,{root:e});return new vr(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new vr(e.textNode,e.offsetInText);if(!e.parent)throw new A("view-position-before-root",e,{root:e});return new vr(e.parent,e.index)}};we.prototype.is=function(s){return s==="position"||s==="view:position"};let ze=class ho extends Il{constructor(e,i=null){super();p(this,"start");p(this,"end");this.start=e.clone(),this.end=i?i.clone():e.clone()}*[Symbol.iterator](){yield*new dl({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(Vf,{direction:"backward"}),i=this.end.getLastMatchingPosition(Vf);return e.parent.is("$text")&&e.isAtStart&&(e=we._createBefore(e.parent)),i.parent.is("$text")&&i.isAtEnd&&(i=we._createAfter(i.parent)),new ho(e,i)}getTrimmed(){let e=this.start.getLastMatchingPosition(Vf);if(e.isAfter(this.end)||e.isEqual(this.end))return new ho(e,e);let i=this.end.getLastMatchingPosition(Vf,{direction:"backward"});const n=e.nodeAfter,r=i.nodeBefore;return n&&n.is("$text")&&(e=new we(n,0)),r&&r.is("$text")&&(i=new we(r,r.data.length)),new ho(e,i)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,i=!1){e.isCollapsed&&(i=!1);const n=this.containsPosition(e.start)||i&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||i&&this.end.isEqual(e.end);return n&&r}getDifference(e){const i=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&i.push(new ho(this.start,e.start)),this.containsPosition(e.end)&&i.push(new ho(e.end,this.end))):i.push(this.clone()),i}getIntersection(e){if(this.isIntersecting(e)){let i=this.start,n=this.end;return this.containsPosition(e.start)&&(i=e.start),this.containsPosition(e.end)&&(n=e.end),new ho(i,n)}return null}getWalker(e={}){return e.boundaries=this,new dl(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,i=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(i=this.end.parent.previousSibling),e&&e.is("element")&&e===i?e:null}clone(){return new ho(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const i=new dl(e);for(const n of i)yield n.item}*getPositions(e={}){e.boundaries=this;const i=new dl(e);yield i.position;for(const n of i)yield n.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,i,n,r){return new this(new we(e,i),new we(n,r))}static _createFromPositionAndShift(e,i){const n=e,r=e.getShiftedBy(i);return i>0?new this(n,r):new this(r,n)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const i=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(we._createBefore(e),i)}};ze.prototype.is=function(s){return s==="range"||s==="view:range"};function Vf(s){return!!(s.item.is("attributeElement")||s.item.is("uiElement"))}let Er=class IA extends gt(Il){constructor(...e){super();p(this,"_ranges");p(this,"_lastRangeBackward");p(this,"_isFake");p(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const i of this._ranges)(!e||i.start.isBefore(e.start))&&(e=i);return e?e.clone():null}getLastRange(){let e=null;for(const i of this._ranges)(!e||i.end.isAfter(e.end))&&(e=i);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const i of this._ranges){let n=!1;for(const r of e._ranges)if(i.isEqual(r)){n=!0;break}if(!n)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const i=d1(this.getRanges()),n=d1(e.getRanges());if(i!=n)return!1;if(i==0)return!0;for(let r of this.getRanges()){r=r.getTrimmed();let o=!1;for(let l of e.getRanges())if(l=l.getTrimmed(),r.start.isEqual(l.start)&&r.end.isEqual(l.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[i,n,r]=e;if(typeof n=="object"&&(r=n,n=void 0),i===null)this._setRanges([]),this._setFakeOptions(r);else if(i instanceof IA||i instanceof Px)this._setRanges(i.getRanges(),i.isBackward),this._setFakeOptions({fake:i.isFake,label:i.fakeSelectionLabel});else if(i instanceof ze)this._setRanges([i],r&&r.backward),this._setFakeOptions(r);else if(i instanceof we)this._setRanges([new ze(i)]),this._setFakeOptions(r);else if(i instanceof Rl){const o=!!r&&!!r.backward;let l;if(n===void 0)throw new A("view-selection-setto-required-second-parameter",this);n=="in"?l=ze._createIn(i):n=="on"?l=ze._createOn(i):l=new ze(we._createAt(i,n)),this._setRanges([l],o),this._setFakeOptions(r)}else if(Dn(i))this._setRanges(i,r&&r.backward),this._setFakeOptions(r);else throw new A("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,i){if(this.anchor===null)throw new A("view-selection-setfocus-no-ranges",this);const n=we._createAt(e,i);if(n.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.pop(),n.compareWith(r)=="before"?this._addRange(new ze(n,r),!0):this._addRange(new ze(r,n)),this.fire("change")}_setRanges(e,i=!1){e=Array.from(e),this._ranges=[];for(const n of e)this._addRange(n);this._lastRangeBackward=!!i}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,i=!1){if(!(e instanceof ze))throw new A("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!i}_pushRange(e){for(const i of this._ranges)if(e.isIntersecting(i))throw new A("view-selection-range-intersects",this,{addedRange:e,intersectingRange:i});this._ranges.push(new ze(e.start,e.end))}};Er.prototype.is=function(s){return s==="selection"||s==="view:selection"};let Px=class extends gt(Il){constructor(...e){super();p(this,"_selection");this._selection=new Er,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,i){this._selection.setFocus(e,i)}};Px.prototype.is=function(s){return s==="selection"||s=="documentSelection"||s=="view:selection"||s=="view:documentSelection"};class Vl extends Vr{constructor(e,i,n){super(e,i);p(this,"startRange");p(this,"_eventPhase");p(this,"_currentTarget");this.startRange=n,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Mw=Symbol("bubbling contexts");function p1(s){class t extends s{fire(i,...n){try{const r=i instanceof Vr?i:new Vr(this,i),o=Lw(this);if(!o.size)return;if(wu(r,"capturing",this),wa(o,"$capture",r,...n))return r.return;const l=r.startRange||this.selection.getFirstRange(),a=l?l.getContainedElement():null,c=a?!!RA(o,a):!1;let h=a||YQ(l);if(wu(r,"atTarget",h),!c){if(wa(o,"$text",r,...n))return r.return;wu(r,"bubbling",h)}for(;h;){if(h.is("rootElement")){if(wa(o,"$root",r,...n))return r.return}else if(h.is("element")&&wa(o,h.name,r,...n))return r.return;if(wa(o,h,r,...n))return r.return;h=h.parent,wu(r,"bubbling",h)}return wu(r,"bubbling",this),wa(o,"$document",r,...n),r.return}catch(r){/* istanbul ignore next -- @preserve */A.rethrowUnexpectedError(r,this)}}_addEventListener(i,n,r){const o=ut(r.context||"$document"),l=Lw(this);for(const a of o){let c=l.get(a);c||(c=new(gt()),l.set(a,c)),this.listenTo(c,i,n,r)}}_removeEventListener(i,n){const r=Lw(this);for(const o of r.values())this.stopListening(o,i,n)}}return t}{const s=p1(Object);["fire","_addEventListener","_removeEventListener"].forEach(t=>{p1[t]=s.prototype[t]})}function wu(s,t,e){s instanceof Vl&&(s._eventPhase=t,s._currentTarget=e)}function wa(s,t,e,...i){const n=typeof t=="string"?s.get(t):RA(s,t);return n?(n.fire(e,...i),e.stop.called):!1}function RA(s,t){for(const[e,i]of s)if(typeof e=="function"&&e(t))return i;return null}function Lw(s){return s[Mw]||(s[Mw]=new Map),s[Mw]}function YQ(s){if(!s)return null;const t=s.start.parent,e=s.end.parent,i=t.getPath(),n=e.getPath();return i.length>n.length?t:e}let Yh=class extends p1(ct()){constructor(e){super();p(this,"selection");p(this,"roots");p(this,"stylesProcessor");p(this,"_postFixers",new Set);this.selection=new Px,this.roots=new vi({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let i=!1;do for(const n of this._postFixers)if(i=n(e),i)break;while(i)}};const ES=10;class wl extends Lr{constructor(e,i,n,r){super(e,i,n,r);p(this,"_priority",ES);p(this,"_id",null);p(this,"_clonesGroup",null);this.getFillerOffset=KQ}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new A("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const i=super._clone(e);return i._priority=this._priority,i._id=this._id,i}_canMergeAttributesFrom(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canMergeAttributesFrom(e)}_canSubtractAttributesOf(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canSubtractAttributesOf(e)}}p(wl,"DEFAULT_PRIORITY",ES);wl.prototype.is=function(s,t){return t?t===this.name&&(s==="attributeElement"||s==="view:attributeElement"||s==="element"||s==="view:element"):s==="attributeElement"||s==="view:attributeElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function KQ(){if(Bw(this))return null;let s=this.parent;for(;s&&s.is("attributeElement");){if(Bw(s)>1)return null;s=s.parent}return!s||Bw(s)>1?null:this.childCount}function Bw(s){return Array.from(s.getChildren()).filter(t=>!t.is("uiElement")).length}class Tx extends Lr{constructor(t,e,i,n){super(t,e,i,n),this.getFillerOffset=JQ}_insertChild(t,e){if(e&&(e instanceof Rl||Array.from(e).length>0))throw new A("view-emptyelement-cannot-add",[this,e]);return 0}}Tx.prototype.is=function(s,t){return t?t===this.name&&(s==="emptyElement"||s==="view:emptyElement"||s==="element"||s==="view:element"):s==="emptyElement"||s==="view:emptyElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function JQ(){return null}class up extends Lr{constructor(t,e,i,n){super(t,e,i,n),this.getFillerOffset=tD}_insertChild(t,e){if(e&&(e instanceof Rl||Array.from(e).length>0))throw new A("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const i of this.getAttributeKeys())e.setAttribute(i,this.getAttribute(i));return e}}up.prototype.is=function(s,t){return t?t===this.name&&(s==="uiElement"||s==="view:uiElement"||s==="element"||s==="view:element"):s==="uiElement"||s==="view:uiElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function eD(s){s.document.on("arrowKey",(t,e)=>iD(t,e,s.domConverter),{priority:"low"})}function tD(){return null}function iD(s,t,e){if(t.keyCode==Fe.arrowright){const i=t.domTarget.ownerDocument.defaultView.getSelection(),n=i.rangeCount==1&&i.getRangeAt(0).collapsed;if(n||t.shiftKey){const r=i.focusNode,o=i.focusOffset,l=e.domPositionToView(r,o);if(l===null)return;let a=!1;const c=l.getLastMatchingPosition(h=>(h.item.is("uiElement")&&(a=!0),!!(h.item.is("uiElement")||h.item.is("attributeElement"))));if(a){const h=e.viewPositionToDom(c);n?i.collapse(h.parent,h.offset):i.extend(h.parent,h.offset)}}}}class Ex extends Lr{constructor(t,e,i,n){super(t,e,i,n),this.getFillerOffset=nD}_insertChild(t,e){if(e&&(e instanceof Rl||Array.from(e).length>0))throw new A("view-rawelement-cannot-add",[this,e]);return 0}render(t,e){}}Ex.prototype.is=function(s,t){return t?t===this.name&&(s==="rawElement"||s==="view:rawElement"||s==="element"||s==="view:element"):s==="rawElement"||s==="view:rawElement"||s===this.name||s==="view:"+this.name||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function nD(){return null}let bl=class extends gt(Il){constructor(e,i){super();p(this,"document");p(this,"_children",[]);p(this,"_customProperties",new Map);this.document=e,i&&this._insertChild(0,i)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,i){this._fireChange("children",this,{index:e});let n=0;const r=sD(this.document,i);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,n++;return n}_removeChildren(e,i=1){this._fireChange("children",this,{index:e});for(let n=e;n<e+i;n++)this._children[n].parent=null;return this._children.splice(e,i)}_fireChange(e,i,n){this.fire(`change:${e}`,i,n)}_setCustomProperty(e,i){this._customProperties.set(e,i)}_removeCustomProperty(e){return this._customProperties.delete(e)}};bl.prototype.is=function(s){return s==="documentFragment"||s==="view:documentFragment"};function sD(s,t){return typeof t=="string"?[new Ii(s,t)]:(Dn(t)||(t=[t]),Array.from(t).map(e=>typeof e=="string"?new Ii(s,e):e instanceof kr?new Ii(s,e.data):e))}class VA{constructor(t){p(this,"document");p(this,"_cloneGroups",new Map);p(this,"_slotFactory",null);this.document=t}setSelection(...t){this.document.selection._setTo(...t)}setSelectionFocus(t,e){this.document.selection._setFocus(t,e)}createDocumentFragment(t){return new bl(this.document,t)}createText(t){return new Ii(this.document,t)}createAttributeElement(t,e,i={}){const n=new wl(this.document,t,e);return typeof i.priority=="number"&&(n._priority=i.priority),i.id&&(n._id=i.id),i.renderUnsafeAttributes&&n._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),n}createContainerElement(t,e,i={},n={}){let r=null;As(i)?n=i:r=i;const o=new dh(this.document,t,e,r);return n.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),o}createEditableElement(t,e,i={}){const n=new cp(this.document,t,e);return i.renderUnsafeAttributes&&n._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),n}createEmptyElement(t,e,i={}){const n=new Tx(this.document,t,e);return i.renderUnsafeAttributes&&n._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),n}createUIElement(t,e,i){const n=new up(this.document,t,e);return i&&(n.render=i),n}createRawElement(t,e,i,n={}){const r=new Ex(this.document,t,e);return i&&(r.render=i),n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}setAttribute(t,e,i,n){n!==void 0?n._setAttribute(t,e,i):i._setAttribute(t,e)}removeAttribute(t,e,i){i!==void 0?i._removeAttribute(t,e):e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,i){As(t)&&i===void 0?e._setStyle(t):i._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,i){i._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}breakAttributes(t){return t instanceof we?this._breakAttributes(t):this._breakAttributesRange(t)}breakContainer(t){const e=t.parent;if(!e.is("containerElement"))throw new A("view-writer-break-non-container-element",this.document);if(!e.parent)throw new A("view-writer-break-root",this.document);if(t.isAtStart)return we._createBefore(e);if(!t.isAtEnd){const i=e._clone(!1);this.insert(we._createAfter(e),i);const n=new ze(t,we._createAt(e,"end")),r=new we(i,0);this.move(n,r)}return we._createAfter(e)}mergeAttributes(t){const e=t.offset,i=t.parent;if(i.is("$text"))return t;if(i.is("attributeElement")&&i.childCount===0){const o=i.parent,l=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new we(o,l))}const n=i.getChild(e-1),r=i.getChild(e);if(!n||!r)return t;if(n.is("$text")&&r.is("$text"))return IS(n,r);if(n.is("attributeElement")&&r.is("attributeElement")&&n.isSimilar(r)){const o=n.childCount;return n._appendChild(r.getChildren()),r._remove(),this._removeFromClonedElementsGroup(r),this.mergeAttributes(new we(n,o))}return t}mergeContainers(t){const e=t.nodeBefore,i=t.nodeAfter;if(!e||!i||!e.is("containerElement")||!i.is("containerElement"))throw new A("view-writer-merge-containers-invalid-position",this.document);const n=e.getChild(e.childCount-1),r=n instanceof Ii?we._createAt(n,"end"):we._createAt(e,"end");return this.move(ze._createIn(i),we._createAt(e,"end")),this.remove(ze._createOn(i)),r}insert(t,e){e=Dn(e)?[...e]:[e],MA(e,this.document);const i=e.reduce((o,l)=>{const a=o[o.length-1],c=!l.is("uiElement");return!a||a.breakAttributes!=c?o.push({breakAttributes:c,nodes:[l]}):a.nodes.push(l),o},[]);let n=null,r=t;for(const{nodes:o,breakAttributes:l}of i){const a=this._insertNodes(r,o,l);n||(n=a.start),r=a.end}return n?new ze(n,r):new ze(t)}remove(t){const e=t instanceof ze?t:ze._createOn(t);if(bu(e,this.document),e.isCollapsed)return new bl(this.document);const{start:i,end:n}=this._breakAttributesRange(e,!0),r=i.parent,o=n.offset-i.offset,l=r._removeChildren(i.offset,o);for(const c of l)this._removeFromClonedElementsGroup(c);const a=this.mergeAttributes(i);return e.start=a,e.end=a.clone(),new bl(this.document,l)}clear(t,e){bu(t,this.document);const i=t.getWalker({direction:"backward",ignoreElementEnd:!0});for(const n of i){const r=n.item;let o;if(r.is("element")&&e.isSimilar(r))o=ze._createOn(r);else if(!n.nextPosition.isAfter(t.start)&&r.is("$textProxy")){const l=r.getAncestors().find(a=>a.is("element")&&e.isSimilar(a));l&&(o=ze._createIn(l))}o&&(o.end.isAfter(t.end)&&(o.end=t.end),o.start.isBefore(t.start)&&(o.start=t.start),this.remove(o))}}move(t,e){let i;if(e.isAfter(t.end)){e=this._breakAttributes(e,!0);const n=e.parent,r=n.childCount;t=this._breakAttributesRange(t,!0),i=this.remove(t),e.offset+=n.childCount-r}else i=this.remove(t);return this.insert(e,i)}wrap(t,e){if(!(e instanceof wl))throw new A("view-writer-wrap-invalid-attribute",this.document);if(bu(t,this.document),t.isCollapsed){let i=t.start;i.parent.is("element")&&!rD(i.parent)&&(i=i.getLastMatchingPosition(r=>r.item.is("uiElement"))),i=this._wrapPosition(i,e);const n=this.document.selection;return n.isCollapsed&&n.getFirstPosition().isEqual(t.start)&&this.setSelection(i),new ze(i)}else return this._wrapRange(t,e)}unwrap(t,e){if(!(e instanceof wl))throw new A("view-writer-unwrap-invalid-attribute",this.document);if(bu(t,this.document),t.isCollapsed)return t;const{start:i,end:n}=this._breakAttributesRange(t,!0),r=i.parent,o=this._unwrapChildren(r,i.offset,n.offset,e),l=this.mergeAttributes(o.start);l.isEqual(o.start)||o.end.offset--;const a=this.mergeAttributes(o.end);return new ze(l,a)}rename(t,e){const i=new dh(this.document,t,e.getAttributes());return this.insert(we._createAfter(e),i),this.move(ze._createIn(e),we._createAt(i,0)),this.remove(ze._createOn(e)),i}clearClonedElementsGroup(t){this._cloneGroups.delete(t)}createPositionAt(t,e){return we._createAt(t,e)}createPositionAfter(t){return we._createAfter(t)}createPositionBefore(t){return we._createBefore(t)}createRange(t,e){return new ze(t,e)}createRangeOn(t){return ze._createOn(t)}createRangeIn(t){return ze._createIn(t)}createSelection(...t){return new Er(...t)}createSlot(t="children"){if(!this._slotFactory)throw new A("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,t)}_registerSlotFactory(t){this._slotFactory=t}_clearSlotFactory(){this._slotFactory=null}_insertNodes(t,e,i){let n;if(i?n=w1(t):n=t.parent.is("$text")?t.parent.parent:t.parent,!n)throw new A("view-writer-invalid-position-container",this.document);let r;i?r=this._breakAttributes(t,!0):r=t.parent.is("$text")?$w(t):t;const o=n._insertChild(r.offset,e);for(const h of e)this._addToClonedElementsGroup(h);const l=r.getShiftedBy(o),a=this.mergeAttributes(r);a.isEqual(r)||l.offset--;const c=this.mergeAttributes(l);return new ze(a,c)}_wrapChildren(t,e,i,n){let r=e;const o=[];for(;r<i;){const a=t.getChild(r),c=a.is("$text"),h=a.is("attributeElement");if(h&&a._canMergeAttributesFrom(n))a._mergeAttributesFrom(n),o.push(new we(t,r));else if(c||!h||oD(n,a)){const f=n._clone();a._remove(),f._appendChild(a),t._insertChild(r,f),this._addToClonedElementsGroup(f),o.push(new we(t,r))}else this._wrapChildren(a,0,a.childCount,n);r++}let l=0;for(const a of o){if(a.offset-=l,a.offset==e)continue;this.mergeAttributes(a).isEqual(a)||(l++,i--)}return ze._createFromParentsAndOffsets(t,e,t,i)}_unwrapChildren(t,e,i,n){let r=e;const o=[];for(;r<i;){const a=t.getChild(r);if(!a.is("attributeElement")){r++;continue}if(a.isSimilar(n)){const c=a.getChildren(),h=a.childCount;a._remove(),t._insertChild(r,c),this._removeFromClonedElementsGroup(a),o.push(new we(t,r),new we(t,r+h)),r+=h,i+=h-1;continue}if(a._canSubtractAttributesOf(n)){a._subtractAttributesOf(n),o.push(new we(t,r),new we(t,r+1)),r++;continue}this._unwrapChildren(a,0,a.childCount,n),r++}let l=0;for(const a of o){if(a.offset-=l,a.offset==e||a.offset==i)continue;this.mergeAttributes(a).isEqual(a)||(l++,i--)}return ze._createFromParentsAndOffsets(t,e,t,i)}_wrapRange(t,e){const{start:i,end:n}=this._breakAttributesRange(t,!0),r=i.parent,o=this._wrapChildren(r,i.offset,n.offset,e),l=this.mergeAttributes(o.start);l.isEqual(o.start)||o.end.offset--;const a=this.mergeAttributes(o.end);return new ze(l,a)}_wrapPosition(t,e){if(e.isSimilar(t.parent))return AS(t.clone());t.parent.is("$text")&&(t=$w(t));const i=this.createAttributeElement("_wrapPosition-fake-element");i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,t.parent._insertChild(t.offset,i);const n=new ze(t,t.getShiftedBy(1));this.wrap(n,e);const r=new we(i.parent,i.index);i._remove();const o=r.nodeBefore,l=r.nodeAfter;return o&&o.is("view:$text")&&l&&l.is("view:$text")?IS(o,l):AS(r)}_breakAttributesRange(t,e=!1){const i=t.start,n=t.end;if(bu(t,this.document),t.isCollapsed){const a=this._breakAttributes(t.start,e);return new ze(a,a)}const r=this._breakAttributes(n,e),o=r.parent.childCount,l=this._breakAttributes(i,e);return r.offset+=r.parent.childCount-o,new ze(l,r)}_breakAttributes(t,e=!1){const i=t.offset,n=t.parent;if(t.parent.is("emptyElement"))throw new A("view-writer-cannot-break-empty-element",this.document);if(t.parent.is("uiElement"))throw new A("view-writer-cannot-break-ui-element",this.document);if(t.parent.is("rawElement"))throw new A("view-writer-cannot-break-raw-element",this.document);if(!e&&n.is("$text")&&b1(n.parent)||b1(n))return t.clone();if(n.is("$text"))return this._breakAttributes($w(t),e);const r=n.childCount;if(i==r){const o=new we(n.parent,n.index+1);return this._breakAttributes(o,e)}else if(i===0){const o=new we(n.parent,n.index);return this._breakAttributes(o,e)}else{const o=n.index+1,l=n._clone();n.parent._insertChild(o,l),this._addToClonedElementsGroup(l);const a=n.childCount-i,c=n._removeChildren(i,a);l._appendChild(c);const h=new we(n.parent,o);return this._breakAttributes(h,e)}}_addToClonedElementsGroup(t){if(!t.root.is("rootElement"))return;if(t.is("element"))for(const n of t.getChildren())this._addToClonedElementsGroup(n);const e=t.id;if(!e)return;let i=this._cloneGroups.get(e);i||(i=new Set,this._cloneGroups.set(e,i)),i.add(t),t._clonesGroup=i}_removeFromClonedElementsGroup(t){if(t.is("element"))for(const n of t.getChildren())this._removeFromClonedElementsGroup(n);const e=t.id;if(!e)return;const i=this._cloneGroups.get(e);i&&i.delete(t)}}function rD(s){return Array.from(s.getChildren()).some(t=>!t.is("uiElement"))}function w1(s){let t=s.parent;for(;!b1(t);){if(!t)return;t=t.parent}return t}function oD(s,t){return s.priority<t.priority?!0:s.priority>t.priority?!1:s.getIdentity()<t.getIdentity()}function AS(s){const t=s.nodeBefore;if(t&&t.is("$text"))return new we(t,t.data.length);const e=s.nodeAfter;return e&&e.is("$text")?new we(e,0):s}function $w(s){if(s.offset==s.parent.data.length)return new we(s.parent.parent,s.parent.index+1);if(s.offset===0)return new we(s.parent.parent,s.parent.index);const t=s.parent.data.slice(s.offset);return s.parent._data=s.parent.data.slice(0,s.offset),s.parent.parent._insertChild(s.parent.index+1,new Ii(s.root.document,t)),new we(s.parent.parent,s.parent.index+1)}function IS(s,t){const e=s.data.length;return s._data+=t.data,t._remove(),new we(s,e)}const lD=[Ii,wl,dh,Tx,Ex,up];function MA(s,t){for(const e of s){if(!lD.some(i=>e instanceof i))throw new A("view-writer-insert-invalid-node-type",t);e.is("$text")||MA(e.getChildren(),t)}}function b1(s){return s&&(s.is("containerElement")||s.is("documentFragment"))}function bu(s,t){const e=w1(s.start),i=w1(s.end);if(!e||!i||e!==i)throw new A("view-writer-invalid-range-container",t)}const LA=s=>s.createTextNode(" "),BA=s=>{const t=s.createElement("span");return t.dataset.ckeFiller="true",t.innerText=" ",t},$A=s=>{const t=s.createElement("br");return t.dataset.ckeFiller="true",t},Bn=7,fh="⁠".repeat(Bn);function Yi(s){return typeof s=="string"?s.substr(0,Bn)===fh:Mt(s)&&s.data.substr(0,Bn)===fh}function Na(s){return s.data.length==Bn&&Yi(s)}function RS(s){const t=typeof s=="string"?s:s.data;return Yi(s)?t.slice(Bn):t}function aD(s){s.document.on("arrowKey",cD,{priority:"low"})}function cD(s,t){if(t.keyCode==Fe.arrowleft){const e=t.domTarget.ownerDocument.defaultView.getSelection();if(e.rangeCount==1&&e.getRangeAt(0).collapsed){const i=e.getRangeAt(0).startContainer,n=e.getRangeAt(0).startOffset;Yi(i)&&n<=Bn&&e.collapse(i,0)}}}class uD extends ct(){constructor(e,i){super();p(this,"domDocuments",new Set);p(this,"domConverter");p(this,"markedAttributes",new Set);p(this,"markedChildren",new Set);p(this,"markedTexts",new Set);p(this,"selection");p(this,"_inlineFiller",null);p(this,"_fakeSelectionContainer",null);this.domConverter=e,this.selection=i,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),Ie.isBlink&&!Ie.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(e,i){if(e==="text")this.domConverter.mapViewToDom(i.parent)&&this.markedTexts.add(i);else{if(!this.domConverter.mapViewToDom(i))return;if(e==="attributes")this.markedAttributes.add(i);else if(e==="children")this.markedChildren.add(i);else throw new A("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!Ie.isAndroid)return;let e=null;const i=Ie.isBlink&&!Ie.isAndroid?!this.isSelecting:!0;for(const n of this.markedChildren)this._updateChildrenMappings(n);i?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=we._createBefore(e.parent)));for(const n of this.markedAttributes)this._updateAttrs(n);for(const n of this.markedChildren)this._updateChildren(n,{inlineFillerPosition:e});for(const n of this.markedTexts)!this.markedChildren.has(n.parent)&&this.domConverter.mapViewToDom(n.parent)&&this._updateText(n,{inlineFillerPosition:e});if(i)if(e){const n=this.domConverter.viewPositionToDom(e),r=n.parent.ownerDocument;Yi(n.parent)?this._inlineFiller=n.parent:this._inlineFiller=VS(r,n.parent,n.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const i=this.domConverter.mapViewToDom(e);if(!i)return;const n=Array.from(i.childNodes),r=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),o=this._diffNodeLists(n,r),l=this._findUpdateActions(o,n,r,dD);if(l.indexOf("update")!==-1){const a={equal:0,insert:0,delete:0};for(const c of l)if(c==="update"){const h=a.equal+a.insert,f=a.equal+a.delete,m=e.getChild(h);m&&!m.is("uiElement")&&!m.is("rawElement")&&this._updateElementMappings(m,n[f]),bS(r[h]),a.equal++}else a[c]++}}_updateElementMappings(e,i){this.domConverter.unbindDomElement(i),this.domConverter.bindElements(i,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?we._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),i=this.domConverter.viewPositionToDom(e);return!!(i&&Mt(i.parent)&&Yi(i.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!Yi(e))throw new A("view-renderer-filler-was-lost",this);Na(e)?e.remove():e.data=e.data.substr(Bn),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),i=e.parent,n=e.offset;if(!this.domConverter.mapViewToDom(i.root)||!i.is("element")||!hD(i))return!1;const r=e.nodeBefore,o=e.nodeAfter;return!(r instanceof Ii||o instanceof Ii||n===i.getFillerOffset()&&(!r||!r.is("element","br"))||Ie.isAndroid&&(r||o))}_updateText(e,i){const n=this.domConverter.findCorrespondingDomText(e);let o=this.domConverter.viewToDom(e).data;const l=i.inlineFillerPosition;l&&l.parent==e.parent&&l.offset==e.index&&(o=fh+o),this._updateTextNode(n,o)}_updateAttrs(e){const i=this.domConverter.mapViewToDom(e);if(i){for(const n of Array.from(i.attributes)){const r=n.name;e.hasAttribute(r)||this.domConverter.removeDomElementAttribute(i,r)}for(const n of e.getAttributeKeys())this.domConverter.setDomElementAttribute(i,n,e.getAttribute(n),e)}}_updateChildren(e,i){const n=this.domConverter.mapViewToDom(e);if(!n)return;if(Ie.isAndroid){let m=null;for(const w of Array.from(n.childNodes)){if(m&&Mt(m)&&Mt(w)){n.normalize();break}m=w}}const r=i.inlineFillerPosition,o=n.childNodes,l=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));r&&r.parent===e&&VS(n.ownerDocument,l,r.offset);const a=this._diffNodeLists(o,l),c=this._findUpdateActions(a,o,l,fD);let h=0;const f=new Set;for(const m of c)m==="delete"?(f.add(o[h]),bS(o[h])):(m==="equal"||m==="update")&&h++;h=0;for(const m of c)m==="insert"?(yA(n,h,l[h]),h++):m==="update"?(this._updateTextNode(o[h],l[h].data),h++):m==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(l[h])),h++);for(const m of f)m.parentNode||this.domConverter.unbindDomElement(m)}_diffNodeLists(e,i){return e=pD(e,this._fakeSelectionContainer),qa(e,i,mD.bind(null,this.domConverter))}_findUpdateActions(e,i,n,r){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let o=[],l=[],a=[];const c={equal:0,insert:0,delete:0};for(const h of e)h==="insert"?a.push(n[c.equal+c.insert]):h==="delete"?l.push(i[c.equal+c.delete]):(o=o.concat(qa(l,a,r).map(f=>f==="equal"?"update":f)),o.push("equal"),l=[],a=[]),c[h]++;return o.concat(qa(l,a,r).map(h=>h==="equal"?"update":h))}_updateTextNode(e,i){const n=e.data;n!=i&&(Ie.isAndroid&&this.isComposing&&n.replace(/\u00A0/g," ")==i.replace(/\u00A0/g," ")||this._updateTextNodeInternal(e,i))}_updateTextNodeInternal(e,i){const n=rA(e.data,i);for(const r of n)r.type==="insert"?e.insertData(r.index,r.values.join("")):e.deleteData(r.index,r.howMany)}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const i of e.getChildren())this._markDescendantTextToSync(i)}}_updateSelection(){if(Ie.isBlink&&!Ie.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);if(!this.isFocused||!e){!this.selection.isFake&&this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected&&this._removeFakeSelection();return}this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&Ie.isAndroid||this._updateDomSelection(e)}_updateFakeSelection(e){const i=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=wD(i));const n=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(n,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!n.parentElement||n.parentElement!=e)&&e.appendChild(n),n.textContent=this.selection.fakeSelectionLabel||" ";const r=i.getSelection(),o=i.createRange();r.removeAllRanges(),o.selectNodeContents(n),r.addRange(o)}_updateDomSelection(e){const i=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(i))return;const n=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);i.setBaseAndExtent(n.parent,n.offset,r.parent,r.offset),Ie.isGecko&&gD(r,i)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const i=e&&this.domConverter.domSelectionToView(e);return!(i&&this.selection.isEqual(i)||!this.selection.isCollapsed&&this.selection.isSimilar(i))}_fakeSelectionNeedsUpdate(e){const i=this._fakeSelectionContainer,n=e.ownerDocument.getSelection();return!i||i.parentElement!==e||n.anchorNode!==i&&!i.contains(n.anchorNode)?!0:i.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const i=e.getSelection();if(i.rangeCount){const n=e.activeElement,r=this.domConverter.mapDomToView(n);n&&r&&i.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function hD(s){if(s.getAttribute("contenteditable")=="false")return!1;const t=s.findAncestor(e=>e.hasAttribute("contenteditable"));return!t||t.getAttribute("contenteditable")=="true"}function VS(s,t,e){const i=t instanceof Array?t:t.childNodes,n=i[e];if(Mt(n))return n.data=fh+n.data,n;{const r=s.createTextNode(fh);return Array.isArray(t)?i.splice(e,0,r):yA(t,e,r),r}}function dD(s,t){return To(s)&&To(t)&&!Mt(s)&&!Mt(t)&&!ju(s)&&!ju(t)&&s.tagName.toLowerCase()===t.tagName.toLowerCase()}function fD(s,t){return To(s)&&To(t)&&Mt(s)&&Mt(t)}function mD(s,t,e){return t===e?!0:Mt(t)&&Mt(e)?t.data===e.data:!!(s.isBlockFiller(t)&&s.isBlockFiller(e))}function gD(s,t){let e=s.parent,i=s.offset;if(Mt(e)&&Na(e)&&(i=Da(e)+1,e=e.parentNode),e.nodeType!=Node.ELEMENT_NODE||i!=e.childNodes.length-1)return;const n=e.childNodes[i];n&&n.tagName=="BR"&&t.addRange(t.getRangeAt(0))}function pD(s,t){const e=Array.from(s);return e.length==0||!t||e[e.length-1]==t&&e.pop(),e}function wD(s){const t=s.createElement("div");return t.className="ck-fake-selection-container",Object.assign(t.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),t.textContent=" ",t}const bD=$A(ue.document),OD=LA(ue.document),xD=BA(ue.document),Mf="data-ck-unsafe-attribute-",MS="data-ck-unsafe-element";class Kh{constructor(t,{blockFillerMode:e,renderingMode:i="editing"}={}){p(this,"document");p(this,"renderingMode");p(this,"blockFillerMode");p(this,"preElements");p(this,"blockElements");p(this,"inlineObjectElements");p(this,"unsafeElements");p(this,"_domDocument");p(this,"_domToViewMapping",new WeakMap);p(this,"_viewToDomMapping",new WeakMap);p(this,"_fakeSelectionMapping",new WeakMap);p(this,"_rawContentElementMatcher",new Nn);p(this,"_inlineObjectElementMatcher",new Nn);p(this,"_elementsWithTemporaryCustomProperties",new Set);this.document=t,this.renderingMode=i,this.blockFillerMode=e||(i==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?ue.document:ue.document.implementation.createHTMLDocument("")}get domDocument(){return this._domDocument}bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,new Er(e))}fakeSelectionToView(t){return this._fakeSelectionMapping.get(t)}bindElements(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}unbindDomElement(t){const e=this._domToViewMapping.get(t);if(e){this._domToViewMapping.delete(t),this._viewToDomMapping.delete(e);for(const i of t.children)this.unbindDomElement(i)}}bindDocumentFragments(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}shouldRenderAttribute(t,e,i){return this.renderingMode==="data"?!0:(t=t.toLowerCase(),t.startsWith("on")||t==="srcdoc"&&e.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:i==="img"&&(t==="src"||t==="srcset")||i==="source"&&t==="srcset"?!0:!e.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(t,e){if(this.renderingMode==="data"){t.innerHTML=e;return}const i=new DOMParser().parseFromString(e,"text/html"),n=i.createDocumentFragment(),r=i.body.childNodes;for(;r.length>0;)n.appendChild(r[0]);const o=i.createTreeWalker(n,NodeFilter.SHOW_ELEMENT),l=[];let a;for(;a=o.nextNode();)l.push(a);for(const c of l){for(const f of c.getAttributeNames())this.setDomElementAttribute(c,f,c.getAttribute(f));const h=c.tagName.toLowerCase();this._shouldRenameElement(h)&&(QS(h),c.replaceWith(this._createReplacementDomElement(h,c)))}for(;t.firstChild;)t.firstChild.remove();t.append(n)}viewToDom(t,e={}){if(t.is("$text")){const i=this._processDataFromViewText(t);return this._domDocument.createTextNode(i)}else{const i=t;if(this.mapViewToDom(i))if(i.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(i);else return this.mapViewToDom(i);let n;if(i.is("documentFragment"))n=this._domDocument.createDocumentFragment(),e.bind&&this.bindDocumentFragments(n,i);else{if(i.is("uiElement"))return i.name==="$comment"?n=this._domDocument.createComment(i.getCustomProperty("$rawContent")):n=i.render(this._domDocument,this),e.bind&&this.bindElements(n,i),n;this._shouldRenameElement(i.name)?(QS(i.name),n=this._createReplacementDomElement(i.name)):i.hasAttribute("xmlns")?n=this._domDocument.createElementNS(i.getAttribute("xmlns"),i.name):n=this._domDocument.createElement(i.name),i.is("rawElement")&&i.render(n,this),e.bind&&this.bindElements(n,i);for(const r of i.getAttributeKeys())this.setDomElementAttribute(n,r,i.getAttribute(r),i)}if(e.withChildren!==!1)for(const r of this.viewChildrenToDom(i,e))n instanceof HTMLTemplateElement?n.content.appendChild(r):n.appendChild(r);return n}}setDomElementAttribute(t,e,i,n){const r=this.shouldRenderAttribute(e,i,t.tagName.toLowerCase())||n&&n.shouldRenderUnsafeAttribute(e);if(r||We("domconverter-unsafe-attribute-detected",{domElement:t,key:e,value:i}),!vA(e)){We("domconverter-invalid-attribute-detected",{domElement:t,key:e,value:i});return}t.hasAttribute(e)&&!r?t.removeAttribute(e):t.hasAttribute(Mf+e)&&r&&t.removeAttribute(Mf+e),t.setAttribute(r?e:Mf+e,i)}removeDomElementAttribute(t,e){e!=MS&&(t.removeAttribute(e),t.removeAttribute(Mf+e))}*viewChildrenToDom(t,e={}){const i=t.getFillerOffset&&t.getFillerOffset();let n=0;for(const r of t.getChildren()){i===n&&(yield this._getBlockFiller());const o=r.is("element")&&!!r.getCustomProperty("dataPipeline:transparentRendering")&&!Nt(r.getAttributes());if(o&&this.renderingMode=="data")if(r.is("rawElement")){const l=this._domDocument.createElement(r.name);r.render(l,this),yield*[...l.childNodes]}else yield*this.viewChildrenToDom(r,e);else o&&We("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:r}),yield this.viewToDom(r,e);n++}i===n&&(yield this._getBlockFiller())}viewRangeToDom(t){const e=this.viewPositionToDom(t.start),i=this.viewPositionToDom(t.end),n=this._domDocument.createRange();return n.setStart(e.parent,e.offset),n.setEnd(i.parent,i.offset),n}viewPositionToDom(t){const e=t.parent;if(e.is("$text")){const i=this.findCorrespondingDomText(e);if(!i)return null;let n=t.offset;return Yi(i)&&(n+=Bn),i.data&&n>i.data.length&&(n=i.data.length),{parent:i,offset:n}}else{let i,n,r;if(t.offset===0){if(i=this.mapViewToDom(e),!i)return null;r=i.childNodes[0]}else{const l=t.nodeBefore;if(n=l.is("$text")?this.findCorrespondingDomText(l):this.mapViewToDom(l),!n)return null;i=n.parentNode,r=n.nextSibling}if(Mt(r)&&Yi(r))return{parent:r,offset:Bn};const o=n?Da(n)+1:0;return{parent:i,offset:o}}}domToView(t,e={}){const i=[],n=this._domToView(t,e,i),r=n.next().value;return!r||(n.next(),this._processDomInlineNodes(null,i,e),this.blockFillerMode=="br"&&BS(r))||r.is("$text")&&r.data.length==0?null:r}*domChildrenToView(t,e={},i=[]){let n=[];t instanceof HTMLTemplateElement?n=[...t.content.childNodes]:n=[...t.childNodes];for(let r=0;r<n.length;r++){const o=n[r],l=this._domToView(o,e,i),a=l.next().value;a!==null&&(this._isBlockViewElement(a)&&this._processDomInlineNodes(t,i,e),this.blockFillerMode=="br"&&BS(a)||(yield a),l.next())}this._processDomInlineNodes(t,i,e)}domSelectionToView(t){if(SD(t))return new Er([]);if(t.rangeCount===1){let n=t.getRangeAt(0).startContainer;Mt(n)&&(n=n.parentNode);const r=this.fakeSelectionToView(n);if(r)return r}const e=this.isDomSelectionBackward(t),i=[];for(let n=0;n<t.rangeCount;n++){const r=t.getRangeAt(n),o=this.domRangeToView(r);o&&i.push(o)}return new Er(i,{backward:e})}domRangeToView(t){const e=this.domPositionToView(t.startContainer,t.startOffset),i=this.domPositionToView(t.endContainer,t.endOffset);return e&&i?new ze(e,i):null}domPositionToView(t,e=0){if(this.isBlockFiller(t))return this.domPositionToView(t.parentNode,Da(t));const i=this.mapDomToView(t);if(i&&(i.is("uiElement")||i.is("rawElement")))return we._createBefore(i);if(Mt(t)){if(Na(t))return this.domPositionToView(t.parentNode,Da(t));const n=this.findCorrespondingViewText(t);let r=e;return n?(Yi(t)&&(r-=Bn,r=r<0?0:r),new we(n,r)):null}else{if(e===0){const n=this.mapDomToView(t);if(n)return new we(n,0)}else{const n=t.childNodes[e-1];if(Mt(n)&&Na(n)||n&&this.isBlockFiller(n))return this.domPositionToView(n.parentNode,Da(n));const r=Mt(n)?this.findCorrespondingViewText(n):this.mapDomToView(n);if(r&&r.parent)return new we(r.parent,r.index+1)}return null}}mapDomToView(t){return this.getHostViewElement(t)||this._domToViewMapping.get(t)}findCorrespondingViewText(t){if(Na(t))return null;const e=this.getHostViewElement(t);if(e)return e;const i=t.previousSibling;if(i){if(!this.isElement(i))return null;const n=this.mapDomToView(i);if(n){const r=n.nextSibling;return r instanceof Ii?r:null}}else{const n=this.mapDomToView(t.parentNode);if(n){const r=n.getChild(0);return r instanceof Ii?r:null}}return null}mapViewToDom(t){return this._viewToDomMapping.get(t)}findCorrespondingDomText(t){const e=t.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&t.parent&&this.mapViewToDom(t.parent)?this.mapViewToDom(t.parent).childNodes[0]:null}focus(t){const e=this.mapViewToDom(t);if(!e||e.ownerDocument.activeElement===e)return;const{scrollX:i,scrollY:n}=ue.window,r=[];LS(e,o=>{const{scrollLeft:l,scrollTop:a}=o;r.push([l,a])}),e.focus(),LS(e,o=>{const[l,a]=r.shift();o.scrollLeft=l,o.scrollTop=a}),ue.window.scrollTo(i,n)}_clearDomSelection(){const t=this.mapViewToDom(this.document.selection.editableElement);if(!t)return;const e=t.ownerDocument.defaultView.getSelection(),i=this.domSelectionToView(e);i&&i.rangeCount>0&&e.removeAllRanges()}isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE}isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(t){return this.blockFillerMode=="br"?t.isEqualNode(bD):$S(t,this.blockElements)?!0:t.isEqualNode(xD)||vD(t,this.blockElements)}isDomSelectionBackward(t){if(t.isCollapsed)return!1;const e=this._domDocument.createRange();try{e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset)}catch{return!1}const i=e.collapsed;return e.detach(),i}getHostViewElement(t){const e=j$(t);for(e.pop();e.length;){const i=e.pop(),n=this._domToViewMapping.get(i);if(n&&(n.is("uiElement")||n.is("rawElement")))return n}return null}isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset)}registerRawContentMatcher(t){this._rawContentElementMatcher.add(t)}registerInlineObjectMatcher(t){this._inlineObjectElementMatcher.add(t)}_clearTemporaryCustomProperties(){for(const t of this._elementsWithTemporaryCustomProperties)t._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return LA(this._domDocument);case"markedNbsp":return BA(this._domDocument);case"br":return $A(this._domDocument)}}_isDomSelectionPositionCorrect(t,e){if(Mt(t)&&Yi(t)&&e<Bn||this.isElement(t)&&Yi(t.childNodes[e]))return!1;const i=this.mapDomToView(t);return!(i&&(i.is("uiElement")||i.is("rawElement")))}*_domToView(t,e,i){if(this.blockFillerMode!="br"&&$S(t,this.blockElements))return null;const n=this.getHostViewElement(t);if(n)return n;if(ju(t)&&e.skipComments)return null;if(Mt(t)){if(Na(t))return null;{const r=t.data;if(r==="")return null;const o=new Ii(this.document,r);return i.push(o),o}}else{let r=this.mapDomToView(t);if(r)return this._isInlineObjectElement(r)&&i.push(r),r;if(this.isDocumentFragment(t))r=new bl(this.document),e.bind&&this.bindDocumentFragments(t,r);else{r=this._createViewElement(t,e),e.bind&&this.bindElements(t,r);const l=t.attributes;if(l)for(let a=l.length,c=0;c<a;c++)r._setAttribute(l[c].name,l[c].value);if(this._isViewElementWithRawContent(r,e))return r._setCustomProperty("$rawContent",t.innerHTML),this._isBlockViewElement(r)||i.push(r),r;if(ju(t))return r._setCustomProperty("$rawContent",t.data),r}yield r;const o=[];if(e.withChildren!==!1)for(const l of this.domChildrenToView(t,e,o))r._appendChild(l);if(this._isInlineObjectElement(r))i.push(r),this._processDomInlineNodes(null,o,e);else for(const l of o)i.push(l)}}_processDomInlineNodes(t,e,i){if(!e.length||t&&!this.isDocumentFragment(t)&&!this._isBlockDomElement(t))return;let n=!1;for(let r=0;r<e.length;r++){const o=e[r];if(!o.is("$text")){n=!1;continue}let l,a=!1;if(this._isPreFormatted(o))l=RS(o.data);else{l=o.data.replace(/[ \n\t\r]{1,}/g," "),a=/[^\S\u00A0]/.test(l.charAt(l.length-1));const c=r>0?e[r-1]:null,h=r+1<e.length?e[r+1]:null,f=!c||c.is("element")&&c.name=="br"||n,m=h?!1:!Yi(o.data);i.withChildren!==!1&&(f&&(l=l.replace(/^ /,"")),m&&(l=l.replace(/ $/,""))),l=RS(l),this.blockFillerMode!="br"&&o.parent&&(kD(o.parent,l)?(l="",o.parent.parent&&(o.parent.parent._setCustomProperty("$hasBlockFiller",!0),o.parent._remove())):_D(o.parent,l,this.blockElements)&&(l="",o.parent._setCustomProperty("$hasBlockFiller",!0))),l=l.replace(/ \u00A0/g,"  ");const w=h&&h.is("element")&&h.name!="br",O=h&&h.is("$text")&&h.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(l)||!h||w||O)&&(l=l.replace(/\u00A0$/," ")),(f||c&&c.is("element")&&c.name!="br")&&(l=l.replace(/^\u00A0/," "))}l.length==0&&o.parent?(o._remove(),e.splice(r,1),r--):(o._data=l,n=a)}e.length=0}_processDataFromViewText(t){let e=t.data;if(this._isPreFormatted(t))return e;if(e.charAt(0)==" "){const i=this._getTouchingInlineViewNode(t,!1);(i&&i.is("$textProxy")&&this._nodeEndsWithSpace(i)||!i)&&(e=" "+e.substr(1))}if(e.charAt(e.length-1)==" "){const i=this._getTouchingInlineViewNode(t,!0),n=i&&i.is("$textProxy")&&i.data.charAt(0)==" ";(e.charAt(e.length-2)==" "||!i||n)&&(e=e.substr(0,e.length-1)+" ")}return e.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(t){if(this._isPreFormatted(t))return!1;const e=this._processDataFromViewText(t);return e.charAt(e.length-1)==" "}_isPreFormatted(t){if(yD(t,this.preElements))return!0;for(const e of t.getAncestors({parentFirst:!0}))if(!(!e.is("element")||!e.hasStyle("white-space")||e.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(e.getStyle("white-space"));return!1}_getTouchingInlineViewNode(t,e){const i=new dl({startPosition:e?we._createAfter(t):we._createBefore(t),direction:e?"forward":"backward"});for(const{item:n}of i){if(n.is("$textProxy"))return n;if(n.is("element")&&n.getCustomProperty("dataPipeline:transparentRendering"))continue;if(n.is("element","br"))return null;if(this._isInlineObjectElement(n))return n;if(n.is("containerElement"))return null}return null}_isBlockDomElement(t){return this.isElement(t)&&this.blockElements.includes(t.tagName.toLowerCase())}_isBlockViewElement(t){return t.is("element")&&this.blockElements.includes(t.name)}_isInlineObjectElement(t){return t.is("element")?t.name=="br"||this.inlineObjectElements.includes(t.name)||!!this._inlineObjectElementMatcher.match(t):!1}_createViewElement(t,e){if(ju(t))return new up(this.document,"$comment");const i=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();return new Lr(this.document,i)}_isViewElementWithRawContent(t,e){return e.withChildren!==!1&&t.is("element")&&!!this._rawContentElementMatcher.match(t)}_shouldRenameElement(t){const e=t.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(e)}_createReplacementDomElement(t,e){const i=this._domDocument.createElement("span");if(i.setAttribute(MS,t),e){for(;e.firstChild;)i.appendChild(e.firstChild);for(const n of e.getAttributeNames())i.setAttribute(n,e.getAttribute(n))}return i}}function yD(s,t){return s.getAncestors().some(e=>e.is("element")&&t.includes(e.name))}function LS(s,t){let e=s;for(;e;)t(e),e=e.parentElement}function vD(s,t){return s.isEqualNode(OD)&&QA(s,t)&&s.parentNode.childNodes.length===1}function QA(s,t){const e=s.parentNode;return!!e&&!!e.tagName&&t.includes(e.tagName.toLowerCase())}function _D(s,t,e){return t==" "&&s&&s.is("element")&&s.childCount==1&&e.includes(s.name)}function kD(s,t){return t==" "&&s&&s.is("element","span")&&s.childCount==1&&s.hasAttribute("data-cke-filler")}function BS(s){return s.is("element","br")&&s.hasAttribute("data-cke-filler")}function $S(s,t){return s.tagName==="BR"&&QA(s,t)&&s.parentNode.childNodes.length===1}function QS(s){s==="script"&&We("domconverter-unsafe-script-element-detected"),s==="style"&&We("domconverter-unsafe-style-element-detected")}function SD(s){if(!Ie.isGecko||!s.rangeCount)return!1;const t=s.getRangeAt(0).startContainer;try{Object.prototype.toString.call(t)}catch{return!0}return!1}class cr extends Zi(){constructor(e){super();p(this,"view");p(this,"document");p(this,"_isEnabled",!1);this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class yl{constructor(t,e,i){p(this,"view");p(this,"document");p(this,"domEvent");p(this,"domTarget");this.view=t,this.document=t.document,this.domEvent=e,this.domTarget=e.target,iA(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class Qr extends cr{constructor(){super(...arguments);p(this,"useCapture",!1);p(this,"usePassive",!1)}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(n=>{this.listenTo(e,n,(r,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(e){this.stopListening(e)}fire(e,i,n){this.isEnabled&&this.document.fire(e,new yl(this.view,i,n))}}class CD extends Qr{constructor(){super(...arguments);p(this,"domEventType",["keydown","keyup"])}onDomEvent(e){const i={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return ic(this)}};this.fire(e.type,e,i)}}class PD extends cr{constructor(e){super(e);p(this,"_fireSelectionChangeDoneDebounced");this._fireSelectionChangeDoneDebounced=as(i=>{this.document.fire("selectionChangeDone",i)},200)}observe(){const e=this.document;e.on("arrowKey",(i,n)=>{e.selection.isFake&&this.isEnabled&&n.preventDefault()},{context:"$capture"}),e.on("arrowKey",(i,n)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(n.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const i=this.document.selection,n=new Er(i.getRanges(),{backward:i.isBackward,fake:!1});(e==Fe.arrowleft||e==Fe.arrowup)&&n.setTo(n.getFirstPosition()),(e==Fe.arrowright||e==Fe.arrowdown)&&n.setTo(n.getLastPosition());const r={oldSelection:i,newSelection:n,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}let DA=class extends cr{constructor(e){super(e);p(this,"domConverter");p(this,"_config");p(this,"_domElements");p(this,"_mutationObserver");this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const i of this._domElements)this._mutationObserver.observe(i,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const i=this.domConverter,n=new Set,r=new Set;for(const l of e){const a=i.mapDomToView(l.target);a&&(a.is("uiElement")||a.is("rawElement")||l.type==="childList"&&!this._isBogusBrMutation(l)&&r.add(a))}for(const l of e){const a=i.mapDomToView(l.target);if(!(a&&(a.is("uiElement")||a.is("rawElement")))&&l.type==="characterData"){const c=i.findCorrespondingViewText(l.target);c&&!r.has(c.parent)?n.add(c):!c&&Yi(l.target)&&r.add(i.mapDomToView(l.target.parentNode))}}const o=[];for(const l of n)o.push({type:"text",node:l});for(const l of r){const a=i.mapViewToDom(l),c=Array.from(l.getChildren()),h=Array.from(i.domChildrenToView(a,{withChildren:!1}));a1(c,h,TD)||o.push({type:"children",node:l})}o.length&&this.document.fire("mutations",{mutations:o})}_isBogusBrMutation(e){let i=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(i=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),i&&i.is("element","br")}};function TD(s,t){if(!Array.isArray(s))return s===t?!0:s.is("$text")&&t.is("$text")?s.data===t.data:!1}class lg extends Qr{constructor(e){super(e);p(this,"_renderTimeoutId",null);p(this,"_isFocusChanging",!1);p(this,"domEventType",["focus","blur"]);this.useCapture=!0;const i=this.document;i.on("focus",()=>this._handleFocus()),i.on("blur",(n,r)=>this._handleBlur(r)),i.on("beforeinput",()=>{i.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(e){const i=this.document.selection.editableElement;(i===null||i===e.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class ED extends cr{constructor(e){super(e);p(this,"mutationObserver");p(this,"focusObserver");p(this,"selection");p(this,"domConverter");p(this,"_documents",new WeakSet);p(this,"_fireSelectionChangeDoneDebounced");p(this,"_clearInfiniteLoopInterval");p(this,"_documentIsSelectingInactivityTimeoutDebounced");p(this,"_loopbackCounter",0);p(this,"_pendingSelectionChange",new Set);this.mutationObserver=e.getObserver(DA),this.focusObserver=e.getObserver(lg),this.selection=this.document.selection,this.domConverter=e.domConverter,this._fireSelectionChangeDoneDebounced=as(i=>{this.document.fire("selectionChangeDone",i)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=as(()=>this.document.isSelecting=!1,5e3),this.view.document.on("change:isFocused",(i,n,r)=>{if(r&&this._pendingSelectionChange.size){for(const o of Array.from(this._pendingSelectionChange))this._handleSelectionChange(o);this._pendingSelectionChange.clear()}})}observe(e){const i=e.ownerDocument,n=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},r=()=>{this.document.isSelecting&&(this._handleSelectionChange(i),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",n,{priority:"highest"}),this.listenTo(e,"keydown",r,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",r,{priority:"highest",useCapture:!0}),!this._documents.has(i)&&(this.listenTo(i,"mouseup",r,{priority:"highest",useCapture:!0}),this.listenTo(i,"selectionchange",()=>{this.document.isComposing&&!Ie.isAndroid||(this._handleSelectionChange(i),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(i)},{priority:"lowest"}),this._documents.add(i))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e){if(!this.isEnabled)return;const i=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(i.anchorNode))return;this.mutationObserver.flush();const n=this.domConverter.domSelectionToView(i);if(n.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!this.view.document.isFocused&&!this.view.document.isReadOnly){this._pendingSelectionChange.add(e);return}if(this._pendingSelectionChange.delete(e),!(this.selection.isEqual(n)&&this.domConverter.isDomSelectionCorrect(i))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(n))this.view.forceRender();else{const r={oldSelection:this.selection,newSelection:n,domSelection:i};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class AD extends Qr{constructor(e){super(e);p(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);const i=this.document;i.on("compositionstart",()=>{i.isComposing=!0}),i.on("compositionend",()=>{i.isComposing=!1})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class NA{constructor(t,e={}){p(this,"_files");p(this,"_native");this._files=e.cacheFiles?DS(t):null,this._native=t}get files(){return this._files||(this._files=DS(this._native)),this._files}get types(){return this._native.types}getData(t){return this._native.getData(t)}setData(t,e){this._native.setData(t,e)}set effectAllowed(t){this._native.effectAllowed=t}get effectAllowed(){return this._native.effectAllowed}set dropEffect(t){this._native.dropEffect=t}get dropEffect(){return this._native.dropEffect}setDragImage(t,e,i){this._native.setDragImage(t,e,i)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function DS(s){const t=Array.from(s.files||[]),e=Array.from(s.items||[]);return t.length?t:e.filter(i=>i.kind==="file").map(i=>i.getAsFile())}class ID extends Qr{constructor(){super(...arguments);p(this,"domEventType","beforeinput")}onDomEvent(e){const i=e.getTargetRanges(),n=this.view,r=n.document;let o=null,l=null,a=[];if(e.dataTransfer&&(o=new NA(e.dataTransfer)),e.data!==null?l=e.data:o&&(l=o.getData("text/plain")),r.selection.isFake)a=Array.from(r.selection.getRanges()),e.preventDefault();else if(i.length)a=i.map(c=>{let h=n.domConverter.domPositionToView(c.startContainer,c.startOffset);const f=n.domConverter.domPositionToView(c.endContainer,c.endOffset);if(h&&Yi(c.startContainer)&&c.startOffset<Bn){e.preventDefault();let m=Bn-c.startOffset;h=h.getLastMatchingPosition(w=>!!(w.item.is("attributeElement")||w.item.is("uiElement")||w.item.is("$textProxy")&&m--),{direction:"backward",singleCharacters:!0})}if(RD(c.endContainer,c.endOffset)&&e.preventDefault(),h)return n.createRange(h,f);if(f)return n.createRange(f)}).filter(c=>!!c);else if(Ie.isAndroid){const c=e.target.ownerDocument.defaultView.getSelection();a=Array.from(n.domConverter.domSelectionToView(c).getRanges())}if(Ie.isAndroid&&e.inputType=="insertCompositionText"&&l&&l.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[n.createRange(a[0].end)]});return}if(["insertText","insertReplacementText"].includes(e.inputType)&&l&&l.includes(`
`)){const c=l.split(/\n{1,2}/g);let h=a;e.preventDefault();for(let f=0;f<c.length;f++){const m=c[f];m!=""&&(this.fire(e.type,e,{data:m,dataTransfer:o,targetRanges:h,inputType:e.inputType,isComposing:e.isComposing}),h=[r.selection.getFirstRange()]),f+1<c.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:h}),h=[r.selection.getFirstRange()])}return}this.fire(e.type,e,{data:l,dataTransfer:o,targetRanges:a,inputType:e.inputType,isComposing:e.isComposing})}}function RD(s,t){for(;s.parentNode;){if(Mt(s)){if(t!=s.data.length)return!1}else if(t!=s.childNodes.length)return!1;if(t=Da(s)+1,s=s.parentNode,t<s.childNodes.length&&Yi(s.childNodes[t]))return!0}return!1}class VD extends cr{constructor(t){super(t),this.document.on("keydown",(e,i)=>{if(this.isEnabled&&aQ(i.keyCode)){const n=new Vl(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(n,i),n.stop.called&&e.stop()}})}observe(){}stopObserving(){}}class MD extends cr{constructor(t){super(t);const e=this.document;e.on("keydown",(i,n)=>{if(!this.isEnabled||n.keyCode!=Fe.tab||n.ctrlKey)return;const r=new Vl(e,"tab",e.selection.getFirstRange());e.fire(r,n),r.stop.called&&i.stop()})}observe(){}stopObserving(){}}let LD=class extends ct(){constructor(e){super();p(this,"document");p(this,"domConverter");p(this,"domRoots",new Map);p(this,"_renderer");p(this,"_initialDomRootAttributes",new WeakMap);p(this,"_observers",new Map);p(this,"_writer");p(this,"_ongoingChange",!1);p(this,"_postFixersInProgress",!1);p(this,"_renderingDisabled",!1);p(this,"_hasChangedSinceTheLastRendering",!1);this.document=new Yh(e),this.domConverter=new Kh(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new uD(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new VA(this.document),this.addObserver(DA),this.addObserver(lg),this.addObserver(ED),this.addObserver(CD),this.addObserver(PD),this.addObserver(AD),this.addObserver(VD),this.addObserver(ID),this.addObserver(MD),aD(this),eD(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),Ie.isiOS&&this.listenTo(this.document,"blur",(i,n)=>{this.domConverter.mapDomToView(n.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(i,{mutations:n})=>{n.forEach(r=>this._renderer.markToSync(r.type,r.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(e,i="main"){const n=this.document.getRoot(i);n._name=e.tagName.toLowerCase();const r={};for(const{name:l,value:a}of Array.from(e.attributes))r[l]=a,l==="class"?this._writer.addClass(a.split(" "),n):n.hasAttribute(l)||this._writer.setAttribute(l,a,n);this._initialDomRootAttributes.set(e,r);const o=()=>{this._writer.setAttribute("contenteditable",(!n.isReadOnly).toString(),n),n.isReadOnly?this._writer.addClass("ck-read-only",n):this._writer.removeClass("ck-read-only",n)};o(),this.domRoots.set(i,e),this.domConverter.bindElements(e,n),this._renderer.markToSync("children",n),this._renderer.markToSync("attributes",n),this._renderer.domDocuments.add(e.ownerDocument),n.on("change:children",(l,a)=>this._renderer.markToSync("children",a)),n.on("change:attributes",(l,a)=>this._renderer.markToSync("attributes",a)),n.on("change:text",(l,a)=>this._renderer.markToSync("text",a)),n.on("change:isReadOnly",()=>this.change(o)),n.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const l of this._observers.values())l.observe(e,i)}detachDomRoot(e){const i=this.domRoots.get(e);Array.from(i.attributes).forEach(({name:r})=>i.removeAttribute(r));const n=this._initialDomRootAttributes.get(i);for(const r in n)i.setAttribute(r,n[r]);this.domRoots.delete(e),this.domConverter.unbindDomElement(i);for(const r of this._observers.values())r.stopObserving(i)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let i=this._observers.get(e);if(i)return i;i=new e(this),this._observers.set(e,i);for(const[n,r]of this.domRoots)i.observe(r,n);return i.enable(),i}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:i,viewportOffset:n=20,ancestorOffset:r=20}={}){const o=this.document.selection.getFirstRange();if(!o)return;const l=yn({alignToTop:e,forceScroll:i,viewportOffset:n,ancestorOffset:r});typeof n=="number"&&(n={top:n,bottom:n,left:n,right:n});const a={target:this.domConverter.viewRangeToDom(o),viewportOffset:n,ancestorOffset:r,alignToTop:e,forceScroll:i};this.fire("scrollToTheSelection",a,l),tQ(a)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new A("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const i=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),i}catch(i){/* istanbul ignore next -- @preserve */A.rethrowUnexpectedError(i,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(lg).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,i){return we._createAt(e,i)}createPositionAfter(e){return we._createAfter(e)}createPositionBefore(e){return we._createBefore(e)}createRange(e,i){return new ze(e,i)}createRangeOn(e){return ze._createOn(e)}createRangeIn(e){return ze._createIn(e)}createSelection(...e){return new Er(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Bo{is(){throw new Error("is() method is abstract")}}class Is extends Bo{constructor(e,i,n){super();p(this,"textNode");p(this,"data");p(this,"offsetInText");if(this.textNode=e,i<0||i>e.offsetSize)throw new A("model-textproxy-wrong-offsetintext",this);if(n<0||i+n>e.offsetSize)throw new A("model-textproxy-wrong-length",this);this.data=e.data.substring(i,i+n),this.offsetInText=i}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const i=[];let n=e.includeSelf?this:this.parent;for(;n;)i[e.parentFirst?"push":"unshift"](n),n=n.parent;return i}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Is.prototype.is=function(s){return s==="$textProxy"||s==="model:$textProxy"||s==="textProxy"||s==="model:textProxy"};class Tr{constructor(t){p(this,"direction");p(this,"boundaries");p(this,"singleCharacters");p(this,"shallow");p(this,"ignoreElementEnd");p(this,"_position");p(this,"_boundaryStartParent");p(this,"_boundaryEndParent");p(this,"_visitedParent");if(!t||!t.boundaries&&!t.startPosition)throw new A("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if(e!="forward"&&e!="backward")throw new A("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this._position=t.startPosition.clone():this._position=te._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,i,n,r;do n=this.position,r=this._visitedParent,{done:e,value:i}=this.next();while(!e&&t(i));e||(this._position=n,this._visitedParent=r)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone(),this._visitedParent=t.parent}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),i=this._visitedParent;if(i.parent===null&&e.offset===i.maxOffset)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const n=Gu(e,i),r=n||FA(e,i,n);if(r&&r.is("model:element")){if(!this.shallow)e.path.push(0),this._visitedParent=r;else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,il("elementStart",r,t,e,1)}if(r&&r.is("model:$text")){let o;if(this.singleCharacters)o=1;else{let c=r.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),o=c-e.offset}const l=e.offset-r.startOffset,a=new Is(r,l,o);return e.offset+=o,this._position=e,il("text",a,t,e,o)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():il("elementEnd",i,t,e)}_previous(){const t=this.position,e=this.position.clone(),i=this._visitedParent;if(i.parent===null&&e.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const n=e.parent,r=Gu(e,n),o=r||zA(e,n,r);if(o&&o.is("model:element"))return e.offset--,this.shallow?(this._position=e,il("elementStart",o,t,e,1)):(e.path.push(o.maxOffset),this._position=e,this._visitedParent=o,this.ignoreElementEnd?this._previous():il("elementEnd",o,t,e));if(o&&o.is("model:$text")){let l;if(this.singleCharacters)l=1;else{let h=o.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>h&&(h=this.boundaries.start.offset),l=e.offset-h}const a=e.offset-o.startOffset,c=new Is(o,a-l,l);return e.offset-=l,this._position=e,il("text",c,t,e,l)}return e.path.pop(),this._position=e,this._visitedParent=i.parent,il("elementStart",i,t,e,1)}}function il(s,t,e,i,n){return{done:!1,value:{type:s,item:t,previousPosition:e,nextPosition:i,length:n}}}class te extends Bo{constructor(e,i,n="toNone"){super();p(this,"root");p(this,"path");p(this,"stickiness");if(!e.is("element")&&!e.is("documentFragment"))throw new A("model-position-root-invalid",e);if(!Array.isArray(i)||i.length===0)throw new A("model-position-path-incorrect-format",e,{path:i});e.is("rootElement")?i=i.slice():(i=[...e.getPath(),...i],e=e.root),this.root=e,this.path=i,this.stickiness=n}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let i=0;i<this.path.length-1;i++)if(e=e.getChildAtOffset(this.path[i]),!e)throw new A("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new A("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Gu(this,this.parent)}get nodeAfter(){const e=this.parent;return FA(this,e,Gu(this,e))}get nodeBefore(){const e=this.parent;return zA(this,e,Gu(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let i=0;i<this.path.length-1;i++)if(e=e.getChildAtOffset(this.path[i]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const i=Di(this.path,e.path);switch(i){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[i]<e.path[i]?"before":"after"}}getLastMatchingPosition(e,i={}){i.startPosition=this;const n=new Tr(i);return n.skip(e),n.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const i=this.parent;return i.is("element")?i.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const i=Di(this.path,e.path),n=typeof i=="string"?Math.min(this.path.length,e.path.length):i;return this.path.slice(0,n)}getCommonAncestor(e){const i=this.getAncestors(),n=e.getAncestors();let r=0;for(;i[r]==n[r]&&i[r];)r++;return r===0?null:i[r-1]}getShiftedBy(e){const i=this.clone(),n=i.offset+e;return i.offset=n<0?0:n,i}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const i=Math.min(this.path.length,e.path.length);for(let n=0;n<i;n++){const r=this.path[n]-e.path[n];if(r<-1||r>1)return!1;if(r===1)return NS(e,this,n);if(r===-1)return NS(this,e,n)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?O1(this.path,i):O1(e.path,i)}hasSameParentAs(e){if(this.root!==e.root)return!1;const i=this.getParentPath(),n=e.getParentPath();return Di(i,n)=="same"}getTransformedByOperation(e){let i;switch(e.type){case"insert":i=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":i=this._getTransformedByMoveOperation(e);break;case"split":i=this._getTransformedBySplitOperation(e);break;case"merge":i=this._getTransformedByMergeOperation(e);break;default:i=te._createAt(this);break}return i}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const i=e.movedRange;return i.containsPosition(this)||i.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const i=e.movedRange,n=i.containsPosition(this)||i.start.isEqual(this);let r;return n?(r=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(r=r._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?r=te._createAt(e.deletionPosition):r=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),r}_getTransformedByDeletion(e,i){const n=te._createAt(this);if(this.root!=e.root)return n;if(Di(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+i>this.offset)return null;n.offset-=i}}else if(Di(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+i>this.path[r])return null;n.path[r]-=i}}return n}_getTransformedByInsertion(e,i){const n=te._createAt(this);if(this.root!=e.root)return n;if(Di(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(n.offset+=i);else if(Di(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;e.offset<=this.path[r]&&(n.path[r]+=i)}return n}_getTransformedByMove(e,i,n){if(i=i._getTransformedByDeletion(e,n),e.isEqual(i))return te._createAt(this);const r=this._getTransformedByDeletion(e,n);return r===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(n).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,i):r._getTransformedByInsertion(i,n)}_getCombined(e,i){const n=e.path.length-1,r=te._createAt(i);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[n]-e.offset,r.path=[...r.path,...this.path.slice(n+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,i,n="toNone"){if(e.is("model:position"))return new te(e.root,e.path,e.stickiness);{const r=e;if(i=="end")i=r.maxOffset;else{if(i=="before")return this._createBefore(r,n);if(i=="after")return this._createAfter(r,n);if(i!==0&&!i)throw new A("model-createpositionat-offset-required",[this,e])}if(!r.is("element")&&!r.is("documentFragment"))throw new A("model-position-parent-incorrect",[this,e]);const o=r.getPath();return o.push(i),new this(r.root,o,n)}}static _createAfter(e,i){if(!e.parent)throw new A("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,i)}static _createBefore(e,i){if(!e.parent)throw new A("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,i)}static fromJSON(e,i){if(e.root==="$graveyard"){const n=new te(i.graveyard,e.path);return n.stickiness=e.stickiness,n}if(!i.getRoot(e.root))throw new A("model-position-fromjson-no-root",i,{rootName:e.root});return new te(i.getRoot(e.root),e.path,e.stickiness)}}te.prototype.is=function(s){return s==="position"||s==="model:position"};function Gu(s,t){const e=t.getChildAtOffset(s.offset);return e&&e.is("$text")&&e.startOffset<s.offset?e:null}function FA(s,t,e){return e!==null?null:t.getChildAtOffset(s.offset)}function zA(s,t,e){return e!==null?null:t.getChild(t.offsetToIndex(s.offset)-1)}function NS(s,t,e){return!(e+1===s.path.length||!O1(t.path,e+1)||!BD(s,e+1))}function O1(s,t){for(;t<s.length;){if(s[t]!==0)return!1;t++}return!0}function BD(s,t){let e=s.parent,i=s.path.length-1,n=0;for(;i>=t;){if(s.path[i]+n!==e.maxOffset)return!1;n=1,i--,e=e.parent}return!0}let G=class Rt extends Bo{constructor(e,i){super();p(this,"start");p(this,"end");this.start=te._createAt(e),this.end=i?te._createAt(i):te._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Tr({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),i=this.end.getParentPath();return Di(e,i)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,i=!1){e.isCollapsed&&(i=!1);const n=this.containsPosition(e.start)||i&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||i&&this.end.isEqual(e.end);return n&&r}containsItem(e){const i=te._createBefore(e);return this.containsPosition(i)||this.start.isEqual(i)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const i=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&i.push(new Rt(this.start,e.start)),this.containsPosition(e.end)&&i.push(new Rt(e.end,this.end))):i.push(new Rt(this.start,this.end)),i}getIntersection(e){if(this.isIntersecting(e)){let i=this.start,n=this.end;return this.containsPosition(e.start)&&(i=e.start),this.containsPosition(e.end)&&(n=e.end),new Rt(i,n)}return null}getJoined(e,i=!1){let n=this.isIntersecting(e);if(n||(this.start.isBefore(e.start)?n=i?this.end.isTouching(e.start):this.end.isEqual(e.start):n=i?e.end.isTouching(this.start):e.end.isEqual(this.start)),!n)return null;let r=this.start,o=this.end;return e.start.isBefore(r)&&(r=e.start),e.end.isAfter(o)&&(o=e.end),new Rt(r,o)}getMinimalFlatRanges(){const e=[],i=this.start.getCommonPath(this.end).length,n=te._createAt(this.start);let r=n.parent;for(;n.path.length>i+1;){const o=r.maxOffset-n.offset;o!==0&&e.push(new Rt(n,n.getShiftedBy(o))),n.path=n.path.slice(0,-1),n.offset++,r=r.parent}for(;n.path.length<=this.end.path.length;){const o=this.end.path[n.path.length-1],l=o-n.offset;l!==0&&e.push(new Rt(n,n.getShiftedBy(l))),n.offset=o,n.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Tr(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const i=new Tr(e);for(const n of i)yield n.item}*getPositions(e={}){e.boundaries=this;const i=new Tr(e);yield i.position;for(const n of i)yield n.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new Rt(this.start,this.end)]}getTransformedByOperations(e){const i=[new Rt(this.start,this.end)];for(const n of e)for(let r=0;r<i.length;r++){const o=i[r].getTransformedByOperation(n);i.splice(r,1,...o),r+=o.length-1}for(let n=0;n<i.length;n++){const r=i[n];for(let o=n+1;o<i.length;o++){const l=i[o];(r.containsRange(l)||l.containsRange(r)||r.isEqual(l))&&i.splice(o,1)}}return i}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,i=this.end.nodeBefore;return e&&e.is("element")&&e===i?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,i=!1){return this._getTransformedByInsertion(e.position,e.howMany,i)}_getTransformedByMoveOperation(e,i=!1){const n=e.sourcePosition,r=e.howMany,o=e.targetPosition;return this._getTransformedByMove(n,o,r,i)}_getTransformedBySplitOperation(e){const i=this.start._getTransformedBySplitOperation(e);let n=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(n=this.end.getShiftedBy(1)),i.root!=n.root&&(n=this.end.getShiftedBy(-1)),new Rt(i,n)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new Rt(this.start);let i=this.start._getTransformedByMergeOperation(e),n=this.end._getTransformedByMergeOperation(e);return i.root!=n.root&&(n=this.end.getShiftedBy(-1)),i.isAfter(n)?(e.sourcePosition.isBefore(e.targetPosition)?(i=te._createAt(n),i.offset=0):(e.deletionPosition.isEqual(i)||(n=e.deletionPosition),i=e.targetPosition),new Rt(i,n)):new Rt(i,n)}_getTransformedByInsertion(e,i,n=!1){if(n&&this.containsPosition(e))return[new Rt(this.start,e),new Rt(e.getShiftedBy(i),this.end._getTransformedByInsertion(e,i))];{const r=new Rt(this.start,this.end);return r.start=r.start._getTransformedByInsertion(e,i),r.end=r.end._getTransformedByInsertion(e,i),[r]}}_getTransformedByMove(e,i,n,r=!1){if(this.isCollapsed){const m=this.start._getTransformedByMove(e,i,n);return[new Rt(m)]}const o=Rt._createFromPositionAndShift(e,n),l=i._getTransformedByDeletion(e,n);if(this.containsPosition(i)&&!r&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const m=this.start._getTransformedByMove(e,i,n),w=this.end._getTransformedByMove(e,i,n);return[new Rt(m,w)]}let a;const c=this.getDifference(o);let h=null;const f=this.getIntersection(o);if(c.length==1?h=new Rt(c[0].start._getTransformedByDeletion(e,n),c[0].end._getTransformedByDeletion(e,n)):c.length==2&&(h=new Rt(this.start,this.end._getTransformedByDeletion(e,n))),h?a=h._getTransformedByInsertion(l,n,f!==null||r):a=[],f){const m=new Rt(f.start._getCombined(o.start,l),f.end._getCombined(o.start,l));a.length==2?a.splice(1,0,m):a.push(m)}return a}_getTransformedByDeletion(e,i){let n=this.start._getTransformedByDeletion(e,i),r=this.end._getTransformedByDeletion(e,i);return n==null&&r==null?null:(n==null&&(n=e),r==null&&(r=e),new Rt(n,r))}static _createFromPositionAndShift(e,i){const n=e,r=e.getShiftedBy(i);return i>0?new this(n,r):new this(r,n)}static _createIn(e){return new this(te._createAt(e,0),te._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(te._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new A("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const i=e[0];e.sort((o,l)=>o.start.isAfter(l.start)?1:-1);const n=e.indexOf(i),r=new this(i.start,i.end);for(let o=n-1;o>=0&&e[o].end.isEqual(r.start);o--)r.start=te._createAt(e[o].start);for(let o=n+1;o<e.length&&e[o].start.isEqual(r.end);o++)r.end=te._createAt(e[o].end);return r}static fromJSON(e,i){return new this(te.fromJSON(e.start,i),te.fromJSON(e.end,i))}};G.prototype.is=function(s){return s==="range"||s==="model:range"};class WA extends gt(){constructor(){super();p(this,"_modelToViewMapping",new WeakMap);p(this,"_viewToModelMapping",new WeakMap);p(this,"_viewToModelLengthCallbacks",new Map);p(this,"_markerNameToElements",new Map);p(this,"_elementToMarkerNames",new Map);p(this,"_deferredBindingRemovals",new Map);p(this,"_unboundMarkerNames",new Set);p(this,"_cache",new $D);this.on("modelToViewPosition",(e,i)=>{if(i.viewPosition)return;const n=this._modelToViewMapping.get(i.modelPosition.parent);if(!n)throw new A("mapping-model-position-view-parent-not-found",this,{modelPosition:i.modelPosition});i.viewPosition=this.findPositionIn(n,i.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,i)=>{if(i.modelPosition)return;const n=this.findMappedViewAncestor(i.viewPosition),r=this._viewToModelMapping.get(n),o=this._toModelOffset(i.viewPosition.parent,i.viewPosition.offset,n);i.modelPosition=te._createAt(r,o)},{priority:"low"})}bindElements(e,i){this._modelToViewMapping.set(e,i),this._viewToModelMapping.set(i,e)}unbindViewElement(e,i={}){const n=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const r of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(r);i.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e)&&this._cache.stopTracking(e),this._modelToViewMapping.get(n)==e&&this._modelToViewMapping.delete(n))}unbindModelElement(e){const i=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(i)==e&&this._viewToModelMapping.delete(i)&&this._cache.stopTracking(i)}bindElementToMarker(e,i){const n=this._markerNameToElements.get(i)||new Set;n.add(e);const r=this._elementToMarkerNames.get(e)||new Set;r.add(i),this._markerNameToElements.set(i,n),this._elementToMarkerNames.set(e,r)}unbindElementFromMarkerName(e,i){const n=this._markerNameToElements.get(i);n&&(n.delete(e),n.size==0&&this._markerNameToElements.delete(i));const r=this._elementToMarkerNames.get(e);r&&(r.delete(i),r.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,i]of this._deferredBindingRemovals)e.root==i&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new G(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new ze(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const i={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",i),i.modelPosition}toViewPosition(e,i={}){const n={modelPosition:e,mapper:this,isPhantom:i.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition}markerNameToElements(e){const i=this._markerNameToElements.get(e);if(!i)return null;const n=new Set;for(const r of i)if(r.is("attributeElement"))for(const o of r.getElementsWithSameId())n.add(o);else n.add(r);return n}registerViewToModelLength(e,i){this._viewToModelLengthCallbacks.set(e,i)}findMappedViewAncestor(e){let i=e.parent;for(;!this._viewToModelMapping.has(i);)i=i.parent;return i}_toModelOffset(e,i,n){if(n!=e){const o=this._toModelOffset(e.parent,e.index,n),l=this._toModelOffset(e,i,e);return o+l}if(e.is("$text"))return i;let r=0;for(let o=0;o<i;o++)r+=this.getModelLength(e.getChild(o));return r}getModelLength(e){const i=[e];let n=0;for(;i.length>0;){const r=i.pop(),o=r.name&&this._viewToModelLengthCallbacks.size>0&&this._viewToModelLengthCallbacks.get(r.name);if(o)n+=o(r);else if(this._viewToModelMapping.has(r))n+=1;else if(r.is("$text"))n+=r.data.length;else{if(r.is("uiElement"))continue;for(const l of r.getChildren())i.push(l)}}return n}findPositionIn(e,i){if(i===0)return this._moveViewPositionToTextNode(new we(e,0));if(this._viewToModelLengthCallbacks.size==0&&this._viewToModelMapping.has(e)){const r=this._cache.getClosest(e,i);return this._findPositionStartingFrom(r.viewPosition,r.modelOffset,i,e,!0)}else return this._findPositionStartingFrom(new we(e,0),0,i,e,!1)}_findPositionStartingFrom(e,i,n,r,o){let l=e.parent,a=e.offset;if(l.is("$text"))return new we(l,n-i);let c,h=i,f=0;for(;h<n;){if(c=l.getChild(a),!c){if(l==r)throw new A("mapping-model-offset-not-found",this,{modelOffset:n,viewContainer:r});a=l.parent.getChildIndex(l)+1,l=l.parent,o&&this._cache.save(l,a,r,h);continue}o?f=this._getModelLengthAndCache(c,r,h):f=this.getModelLength(c),h+=f,a++}let m=new we(l,a);if(o)for(;m.isAtEnd&&m.parent!==r&&m.parent.parent;){const w=m.parent.parent,O=w.getChildIndex(m.parent)+1;this._cache.save(w,O,r,h),m=new we(w,O)}return h==n?this._moveViewPositionToTextNode(m):this._findPositionStartingFrom(new we(c,0),h-f,n,r,o)}_getModelLengthAndCache(e,i,n){let r=0;if(this._viewToModelMapping.has(e))r=1;else if(e.is("$text"))r=e.data.length;else if(!e.is("uiElement"))for(const o of e.getChildren())r+=this._getModelLengthAndCache(o,i,n+r);return this._cache.save(e.parent,e.index+1,i,n+r),r}_moveViewPositionToTextNode(e){const i=e.nodeBefore,n=e.nodeAfter;return i&&i.is("view:$text")?new we(i,i.data.length):n&&n.is("view:$text")?new we(n,0):e}}class $D extends gt(){constructor(){super(...arguments);p(this,"_cachedMapping",new WeakMap);p(this,"_nodeToCacheListIndex",new WeakMap);p(this,"_invalidateOnChildrenChangeCallback",(e,i,n)=>{this._clearCacheInsideParent(i,n.index)});p(this,"_invalidateOnTextChangeCallback",(e,i)=>{this._clearCacheAfter(i)})}save(e,i,n,r){const o=this._cachedMapping.get(n),l=o.cacheMap.get(r);if(l){const f=e.getChild(i-1),m=l.viewPosition.nodeBefore?this._nodeToCacheListIndex.get(l.viewPosition.nodeBefore):0;this._nodeToCacheListIndex.set(f,m);return}const c={viewPosition:new we(e,i),modelOffset:r};o.maxModelOffset=r>o.maxModelOffset?r:o.maxModelOffset,o.cacheMap.set(r,c);let h=o.cacheList.length-1;for(;h>=0&&o.cacheList[h].modelOffset>r;)h--;if(o.cacheList.splice(h+1,0,c),i>0){const f=e.getChild(i-1);this._nodeToCacheListIndex.set(f,h+1)}}getClosest(e,i){const n=this._cachedMapping.get(e);let r;if(n)if(i>n.maxModelOffset)r=n.cacheList[n.cacheList.length-1];else{const o=n.cacheMap.get(i);o?r=o:r=this._findInCacheList(n.cacheList,i)}else r=this.startTracking(e);return{modelOffset:r.modelOffset,viewPosition:r.viewPosition.clone()}}startTracking(e){const n={viewPosition:new we(e,0),modelOffset:0},r={maxModelOffset:0,cacheList:[n],cacheMap:new Map([[0,n]])};return this._cachedMapping.set(e,r),e.on("change:children",this._invalidateOnChildrenChangeCallback),e.on("change:text",this._invalidateOnTextChangeCallback),n}stopTracking(e){e.off("change:children",this._invalidateOnChildrenChangeCallback),e.off("change:text",this._invalidateOnTextChangeCallback),this._cachedMapping.delete(e)}_clearCacheInsideParent(e,i){if(i==0)this._cachedMapping.has(e)?this._clearCacheAll(e):this._clearCacheInsideParent(e.parent,e.index);else{const n=e.getChild(i-1);this._clearCacheAfter(n)}}_clearCacheAll(e){const i=this._cachedMapping.get(e);i.maxModelOffset>0&&(i.maxModelOffset=0,i.cacheList.length=1,i.cacheMap.clear(),i.cacheMap.set(0,i.cacheList[0]))}_clearCacheAfter(e){const i=this._nodeToCacheListIndex.get(e);if(i===void 0){const r=e.parent;this._cachedMapping.has(r)||this._clearCacheInsideParent(r.parent,r.index);return}let n=e.parent;for(;!this._cachedMapping.has(n);)n=n.parent;this._clearCacheFromCacheIndex(n,i)}_clearCacheFromCacheIndex(e,i){i===0&&(i=1);const n=this._cachedMapping.get(e),r=n.cacheList[i-1];if(!r)return;n.maxModelOffset=r.modelOffset;const o=n.cacheList.splice(i);for(const l of o){n.cacheMap.delete(l.modelOffset);const a=l.viewPosition.nodeBefore;this._nodeToCacheListIndex.delete(a)}}_findInCacheList(e,i){let n=0,r=e.length-1,o=r-n>>1,l=e[o];for(;n<r;)l.modelOffset<i?n=o+1:r=o-1,o=n+(r-n>>1),l=e[o];return l.modelOffset<=i?l:e[o-1]}}class QD{constructor(){p(this,"_consumable",new Map);p(this,"_textProxyRegistry",new Map)}add(t,e){e=Lf(e),t instanceof Is&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map),this._consumable.get(t).set(e,!0)}consume(t,e){return e=Lf(e),t instanceof Is&&(t=this._getSymbolForTextProxy(t)),this.test(t,e)?(this._consumable.get(t).set(e,!1),!0):!1}test(t,e){e=Lf(e),t instanceof Is&&(t=this._getSymbolForTextProxy(t));const i=this._consumable.get(t);if(i===void 0)return null;const n=i.get(e);return n===void 0?null:n}revert(t,e){e=Lf(e),t instanceof Is&&(t=this._getSymbolForTextProxy(t));const i=this.test(t,e);return i===!1?(this._consumable.get(t).set(e,!0),!0):i===!0?!1:null}verifyAllConsumed(t){const e=[];for(const[i,n]of this._consumable)for(const[r,o]of n){const l=r.split(":")[0];o&&t==l&&e.push({event:r,item:i.name||i.description})}if(e.length)throw new A("conversion-model-consumable-not-consumed",null,{items:e})}_getSymbolForTextProxy(t){let e=null;const i=this._textProxyRegistry.get(t.startOffset);if(i){const n=i.get(t.endOffset);n&&(e=n.get(t.parent))}return e||(e=this._addSymbolForTextProxy(t)),e}_addSymbolForTextProxy(t){const e=t.startOffset,i=t.endOffset,n=t.parent,r=Symbol("$textProxy:"+t.data);let o,l;return o=this._textProxyRegistry.get(e),o||(o=new Map,this._textProxyRegistry.set(e,o)),l=o.get(i),l||(l=new Map,o.set(i,l)),l.set(n,r),r}}function Lf(s){const t=s.split(":");return t[0]=="insert"?t[0]:t[0]=="addMarker"||t[0]=="removeMarker"?s:t.length>1?t[0]+":"+t[1]:t[0]}class UA extends gt(){constructor(e){super();p(this,"_conversionApi");p(this,"_firedEventsMap");this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,i,n){const r=this._createConversionApi(n,e.getRefreshedItems());for(const l of e.getMarkersToRemove())this._convertMarkerRemove(l.name,l.range,r);const o=this._reduceChanges(e.getChanges());for(const l of o)l.type==="insert"?this._convertInsert(G._createFromPositionAndShift(l.position,l.length),r):l.type==="reinsert"?this._convertReinsert(G._createFromPositionAndShift(l.position,l.length),r):l.type==="remove"?this._convertRemove(l.position,l.length,l.name,r):this._convertAttribute(l.range,l.attributeKey,l.attributeOldValue,l.attributeNewValue,r);r.mapper.flushDeferredBindings();for(const l of r.mapper.flushUnboundMarkerNames()){const a=i.get(l).getRange();this._convertMarkerRemove(l,a,r),this._convertMarkerAdd(l,a,r)}for(const l of e.getMarkersToAdd())this._convertMarkerAdd(l.name,l.range,r);r.consumable.verifyAllConsumed("insert")}convert(e,i,n,r={}){const o=this._createConversionApi(n,void 0,r);this._convertInsert(e,o);for(const[l,a]of i)this._convertMarkerAdd(l,a,o);o.consumable.verifyAllConsumed("insert")}convertSelection(e,i,n){const r=this._createConversionApi(n);this.fire("cleanSelection",{selection:e},r);const o=e.getFirstPosition().root;if(!r.mapper.toViewElement(o))return;const l=Array.from(i.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(r.consumable,e,l),this.fire("selection",{selection:e},r),!!e.isCollapsed){for(const a of l)if(r.consumable.test(e,"addMarker:"+a.name)){const c=a.getRange();if(!DD(e.getFirstPosition(),a,r.mapper))continue;const h={item:e,markerName:a.name,markerRange:c};this.fire(`addMarker:${a.name}`,h,r)}for(const a of e.getAttributeKeys())if(r.consumable.test(e,"attribute:"+a)){const c={item:e,range:e.getFirstRange(),attributeKey:a,attributeOldValue:null,attributeNewValue:e.getAttribute(a)};this.fire(`attribute:${a}:$text`,c,r)}}}_convertInsert(e,i,n={}){n.doNotAddConsumables||this._addConsumablesForInsert(i.consumable,e);for(const r of e.getWalker({shallow:!0}))this._testAndFire("insert",FS(r),i)}_convertRemove(e,i,n,r){this.fire(`remove:${n}`,{position:e,length:i},r)}_convertAttribute(e,i,n,r,o){this._addConsumablesForRange(o.consumable,e,`attribute:${i}`);for(const l of e){const a={item:l.item,range:G._createFromPositionAndShift(l.previousPosition,l.length),attributeKey:i,attributeOldValue:n,attributeNewValue:r};this._testAndFire(`attribute:${i}`,a,o)}}_convertReinsert(e,i){const n=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(i.consumable,n);for(const r of n.map(FS))this._testAndFire("insert",{...r,reconversion:!0},i)}_convertMarkerAdd(e,i,n){if(i.root.rootName=="$graveyard")return;const r=`addMarker:${e}`;if(n.consumable.add(i,r),this.fire(r,{markerName:e,markerRange:i},n),!!n.consumable.consume(i,r)){this._addConsumablesForRange(n.consumable,i,r);for(const o of i.getItems()){if(!n.consumable.test(o,r))continue;const l={item:o,range:G._createOn(o),markerName:e,markerRange:i};this.fire(r,l,n)}}}_convertMarkerRemove(e,i,n){i.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:i},n)}_reduceChanges(e){const i={changes:e};return this.fire("reduceChanges",i),i.changes}_addConsumablesForInsert(e,i){for(const n of i){const r=n.item;if(e.test(r,"insert")===null){e.add(r,"insert");for(const o of r.getAttributeKeys())e.add(r,"attribute:"+o)}}return e}_addConsumablesForRange(e,i,n){for(const r of i.getItems())e.add(r,n);return e}_addConsumablesForSelection(e,i,n){e.add(i,"selection");for(const r of n)e.add(i,"addMarker:"+r.name);for(const r of i.getAttributeKeys())e.add(i,"attribute:"+r);return e}_testAndFire(e,i,n){const r=ND(e,i),o=i.item.is("$textProxy")?n.consumable._getSymbolForTextProxy(i.item):i.item,l=this._firedEventsMap.get(n),a=l.get(o);if(!a)l.set(o,new Set([r]));else if(!a.has(r))a.add(r);else return;this.fire(r,i,n)}_testAndFireAddAttributes(e,i){const n={item:e,range:G._createOn(e)};for(const r of n.item.getAttributeKeys())n.attributeKey=r,n.attributeOldValue=null,n.attributeNewValue=n.item.getAttribute(r),this._testAndFire(`attribute:${r}`,n,i)}_createConversionApi(e,i=new Set,n={}){const r={...this._conversionApi,consumable:new QD,writer:e,options:n,convertItem:o=>this._convertInsert(G._createOn(o),r),convertChildren:o=>this._convertInsert(G._createIn(o),r,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,r),canReuseView:o=>!i.has(r.mapper.toModelElement(o))};return this._firedEventsMap.set(r,new Map),r}}function DD(s,t,e){const i=t.getRange(),n=Array.from(s.getAncestors());return n.shift(),n.reverse(),!n.some(o=>{if(i.containsItem(o))return!!e.toViewElement(o).getCustomProperty("addHighlight")})}function ND(s,t){const e=t.item.is("element")?t.item.name:"$text";return`${s}:${e}`}function FS(s){return{item:s.item,range:G._createFromPositionAndShift(s.previousPosition,s.length)}}let Ml=class extends Bo{constructor(e){super();p(this,"parent",null);p(this,"_attrs");p(this,"_index",null);p(this,"_startOffset",null);this._attrs=cs(e)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let i=this;for(;i.parent;)e.unshift(i.startOffset),i=i.parent;return e}getAncestors(e={}){const i=[];let n=e.includeSelf?this:this.parent;for(;n;)i[e.parentFirst?"push":"unshift"](n),n=n.parent;return i}getCommonAncestor(e,i={}){const n=this.getAncestors(i),r=e.getAncestors(i);let o=0;for(;n[o]==r[o]&&n[o];)o++;return o===0?null:n[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const i=this.getPath(),n=e.getPath(),r=Di(i,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return i[r]<n[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((i,n)=>(i[n[0]]=n[1],i),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,i){this._attrs.set(e,i)}_setAttributesTo(e){this._attrs=cs(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};Ml.prototype.is=function(s){return s==="node"||s==="model:node"};class Ln extends gt(Bo){constructor(...e){super();p(this,"_lastRangeBackward",!1);p(this,"_attrs",new Map);p(this,"_ranges",[]);e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const i of this._ranges){let n=!1;for(const r of e._ranges)if(i.isEqual(r)){n=!0;break}if(!n)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new G(e.start,e.end)}getFirstRange(){let e=null;for(const i of this._ranges)(!e||i.start.isBefore(e.start))&&(e=i);return e?new G(e.start,e.end):null}getLastRange(){let e=null;for(const i of this._ranges)(!e||i.end.isAfter(e.end))&&(e=i);return e?new G(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[i,n,r]=e;if(typeof n=="object"&&(r=n,n=void 0),i===null)this._setRanges([]);else if(i instanceof Ln)this._setRanges(i.getRanges(),i.isBackward);else if(i&&typeof i.getRanges=="function")this._setRanges(i.getRanges(),i.isBackward);else if(i instanceof G)this._setRanges([i],!!r&&!!r.backward);else if(i instanceof te)this._setRanges([new G(i)]);else if(i instanceof Ml){const o=!!r&&!!r.backward;let l;if(n=="in")l=G._createIn(i);else if(n=="on")l=G._createOn(i);else if(n!==void 0)l=new G(te._createAt(i,n));else throw new A("model-selection-setto-required-second-parameter",[this,i]);this._setRanges([l],o)}else if(Dn(i))this._setRanges(i,r&&!!r.backward);else throw new A("model-selection-setto-not-selectable",[this,i])}_setRanges(e,i=!1){const n=Array.from(e),r=n.some(o=>{if(!(o instanceof G))throw new A("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(l=>!l.isEqual(o))});n.length===this._ranges.length&&!r||(this._replaceAllRanges(n),this._lastRangeBackward=!!i,this.fire("change:range",{directChange:!0}))}setFocus(e,i){if(this.anchor===null)throw new A("model-selection-setfocus-no-ranges",[this,e]);const n=te._createAt(e,i);if(n.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.length&&this._popRange(),n.compareWith(r)=="before"?(this._pushRange(new G(n,r)),this._lastRangeBackward=!0):(this._pushRange(new G(r,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,i){this.getAttribute(e)!==i&&(this._attrs.set(e,i),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const i of this.getRanges()){const n=zS(i.start,e);zD(n,i)&&(yield n);const r=i.getWalker();for(const l of r){const a=l.item;l.type=="elementEnd"&&FD(a,e,i)?yield a:l.type=="elementStart"&&a.is("model:element")&&a.root.document.model.schema.isBlock(a)&&r.jumpTo(te._createAt(a,"end"))}const o=zS(i.end,e);WD(o,i)&&(yield o)}}containsEntireContent(e=this.anchor.root){const i=te._createAt(e,0),n=te._createAt(e,"end");return i.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new G(e.start,e.end))}_checkRange(e){for(let i=0;i<this._ranges.length;i++)if(e.isIntersecting(this._ranges[i]))throw new A("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[i]})}_replaceAllRanges(e){this._removeAllRanges();for(const i of e)this._pushRange(i)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}Ln.prototype.is=function(s){return s==="selection"||s==="model:selection"};function ZA(s,t){return t.has(s)?!1:(t.add(s),s.root.document.model.schema.isBlock(s)&&!!s.parent)}function FD(s,t,e){return ZA(s,t)&&Ax(s,e)}function zS(s,t){const i=s.parent.root.document.model.schema,n=s.parent.getAncestors({parentFirst:!0,includeSelf:!0});let r=!1;const o=n.find(l=>r?!1:(r=i.isLimit(l),!r&&ZA(l,t)));return n.forEach(l=>t.add(l)),o}function Ax(s,t){const e=UD(s);return e?!t.containsRange(G._createOn(e),!0):!0}function zD(s,t){return s?t.isCollapsed||s.isEmpty?!0:t.start.isTouching(te._createAt(s,s.maxOffset))?!1:Ax(s,t):!1}function WD(s,t){return s?t.isCollapsed||s.isEmpty?!0:t.end.isTouching(te._createAt(s,0))?!1:Ax(s,t):!1}function UD(s){const t=s.root.document.model.schema;let e=s.parent;for(;e;){if(t.isBlock(e))return e;e=e.parent}}class pn extends gt(G){constructor(t,e){super(t,e),ZD.call(this)}detach(){this.stopListening()}toRange(){return new G(this.start,this.end)}static fromRange(t){return new pn(t.start,t.end)}}pn.prototype.is=function(s){return s==="liveRange"||s==="model:liveRange"||s=="range"||s==="model:range"};function ZD(){this.listenTo(this.root.document.model,"applyOperation",(s,t)=>{const e=t[0];e.isDocumentOperation&&HD.call(this,e)},{priority:"low"})}function HD(s){const t=this.getTransformedByOperation(s),e=G._createFromRanges(t),i=!e.isEqual(this),n=qD(this,s);let r=null;if(i){e.root.rootName=="$graveyard"&&(s.type=="remove"?r=s.sourcePosition:r=s.deletionPosition);const o=this.toRange();this.start=e.start,this.end=e.end,this.fire("change:range",o,{deletionPosition:r})}else n&&this.fire("change:content",this.toRange(),{deletionPosition:r})}function qD(s,t){switch(t.type){case"insert":return s.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return s.containsPosition(t.sourcePosition)||s.start.isEqual(t.sourcePosition)||s.containsPosition(t.targetPosition);case"split":return s.containsPosition(t.splitPosition)||s.containsPosition(t.insertionPosition)}return!1}let Qt=class x1 extends Ml{constructor(e,i){super(i);p(this,"_data");this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new x1(this.data,this.getAttributes())}static fromJSON(e){return new x1(e.data,e.attributes)}};Qt.prototype.is=function(s){return s==="$text"||s==="model:$text"||s==="text"||s==="model:text"||s==="node"||s==="model:node"};const mh="selection:";class Rs extends gt(Bo){constructor(e){super();p(this,"_selection");this._selection=new XD(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,i){this._selection.setFocus(e,i)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,i){this._selection.setAttribute(e,i)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return mh+e}static _isStoreAttributeKey(e){return e.startsWith(mh)}}Rs.prototype.is=function(s){return s==="selection"||s=="model:selection"||s=="documentSelection"||s=="model:documentSelection"};class XD extends Ln{constructor(e){super();p(this,"markers",new vi({idProperty:"name"}));p(this,"_model");p(this,"_document");p(this,"_attributePriority",new Map);p(this,"_selectionRestorePosition",null);p(this,"_hasChangedRange",!1);p(this,"_overriddenGravityRegister",new Set);p(this,"_observedMarkers",new Set);this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(i,n)=>{const r=n[0];!r.isDocumentOperation||r.type=="marker"||r.type=="rename"||r.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(i,n,r,o)=>{this._updateMarker(n,o)}),this.listenTo(this._document,"change",(i,n)=>{jD(this._model,n)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,i){super.setFocus(e,i),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,i){if(this._setAttribute(e,i)){const n=[e];this.fire("change:attribute",{attributeKeys:n,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const i=[e];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}overrideGravity(){const e=ii();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new A("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const i=this._prepareRange(e);i&&this._ranges.push(i)}_validateSelectionRanges(e){for(const i of e)if(!this._document._validateSelectionRange(i))throw new A("document-selection-wrong-position",this,{range:i})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const i=pn.fromRange(e);return i.on("change:range",(n,r,o)=>{if(this._hasChangedRange=!0,i.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const l=this._ranges.indexOf(i);this._ranges.splice(l,1),i.detach()}}),i}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let i=!1;for(const r of this._model.markers){const o=r.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const l=r.getRange();for(const a of this.getRanges())l.containsRange(a,!a.isCollapsed)&&e.push(r)}const n=Array.from(this.markers);for(const r of e)this.markers.has(r)||(this.markers.add(r),i=!0);for(const r of Array.from(this.markers))e.includes(r)||(this.markers.remove(r),i=!0);i&&this.fire("change:marker",{oldMarkers:n,directChange:!1})}_updateMarker(e,i){const n=e.name.split(":",1)[0];if(!this._observedMarkers.has(n))return;let r=!1;const o=Array.from(this.markers),l=this.markers.has(e);if(!i)l&&(this.markers.remove(e),r=!0);else{let a=!1;for(const c of this.getRanges())if(i.containsRange(c,!c.isCollapsed)){a=!0;break}a&&!l?(this.markers.add(e),r=!0):!a&&l&&(this.markers.remove(e),r=!0)}r&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const i=cs(this._getSurroundingAttributes()),n=cs(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,l]of this._attributePriority)l=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(i);const r=[];for(const[o,l]of this.getAttributes())(!n.has(o)||n.get(o)!==l)&&r.push(o);for(const[o]of n)this.hasAttribute(o)||r.push(o);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(e,i,n=!0){const r=n?"normal":"low";return r=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===i?!1:(this._attrs.set(e,i),this._attributePriority.set(e,r),!0)}_removeAttribute(e,i=!0){const n=i?"normal":"low";return n=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,n),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const i=new Set;for(const[n,r]of this.getAttributes())e.get(n)!==r&&this._removeAttribute(n,!1);for(const[n,r]of e)this._setAttribute(n,r,!1)&&i.add(n);return i}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const i of e.getAttributeKeys())i.startsWith(mh)&&(yield[i.substr(mh.length),e.getAttribute(i)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),i=this._model.schema;if(e.root.rootName=="$graveyard")return null;let n=null;if(this.isCollapsed){const r=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(n=Ou(r,i)),n||(n=Ou(o,i)),!this.isGravityOverridden&&!n){let l=r;for(;l&&!n;)l=l.previousSibling,n=Ou(l,i)}if(!n){let l=o;for(;l&&!n;)l=l.nextSibling,n=Ou(l,i)}n||(n=this.getStoredAttributes())}else{const r=this.getFirstRange();for(const o of r){if(o.item.is("element")&&i.isObject(o.item)){n=Ou(o.item,i);break}if(o.type=="text"){n=o.item.getAttributes();break}}}return n}_fixGraveyardSelection(e){const i=this._model.schema.getNearestSelectionRange(e);i&&this._pushRange(i)}}function Ou(s,t){if(!s)return null;if(s instanceof Is||s instanceof Qt)return s.getAttributes();if(!t.isInline(s))return null;if(!t.isObject(s))return[];const e=[];for(const[i,n]of s.getAttributes())t.checkAttribute("$text",i)&&t.getAttributeProperties(i).copyFromObject!==!1&&e.push([i,n]);return e}function jD(s,t){const e=s.document.differ;for(const i of e.getChanges()){if(i.type!="insert")continue;const n=i.position.parent;i.length===n.maxOffset&&s.enqueueChange(t,o=>{const l=Array.from(n.getAttributeKeys()).filter(a=>a.startsWith(mh));for(const a of l)o.removeAttribute(a,n)})}}class Yu{constructor(t){p(this,"_nodes",[]);p(this,"_offsetToNode",[]);t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(t){return this._nodes[t]||null}getNodeAtOffset(t){return this._offsetToNode[t]||null}getNodeIndex(t){return t.index}getNodeStartOffset(t){return t.startOffset}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new A("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){if(t==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[t];if(!e)throw new A("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.getNodeIndex(e)}_insertNodes(t,e){const i=[];for(const r of e){if(!(r instanceof Ml))throw new A("model-nodelist-insertnodes-not-node",this);i.push(r)}let n=this.indexToOffset(t);SS(this._nodes,i,t),SS(this._offsetToNode,GD(i),n);for(let r=t;r<this._nodes.length;r++)this._nodes[r]._index=r,this._nodes[r]._startOffset=n,n+=this._nodes[r].offsetSize}_removeNodes(t,e=1){if(e==0)return[];let i=this.indexToOffset(t);const n=this._nodes.splice(t,e),r=n[n.length-1],o=r.startOffset+r.offsetSize-i;this._offsetToNode.splice(i,o);for(const l of n)l._index=null,l._startOffset=null;for(let l=t;l<this._nodes.length;l++)this._nodes[l]._index=l,this._nodes[l]._startOffset=i,i+=this._nodes[l].offsetSize;return n}_removeNodesArray(t){if(t.length==0)return;for(const i of t)i._index=null,i._startOffset=null;this._nodes=this._nodes.filter(i=>i.index!==null),this._offsetToNode=this._offsetToNode.filter(i=>i.index!==null);let e=0;for(let i=0;i<this._nodes.length;i++)this._nodes[i]._index=i,this._nodes[i]._startOffset=e,e+=this._nodes[i].offsetSize}toJSON(){return this._nodes.map(t=>t.toJSON())}}function GD(s){const t=[];let e=0;for(const i of s)for(let n=0;n<i.offsetSize;n++)t[e++]=i;return t}let Vt=class _m extends Ml{constructor(e,i,n){super(i);p(this,"name");p(this,"_children",new Yu);this.name=e,n&&this._insertChild(0,n)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let i=this;for(const n of e)i=i.getChildAtOffset(n);return i}findAncestor(e,i={}){let n=i.includeSelf?this:this.parent;for(;n;){if(n.name===e)return n;n=n.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const i of this._children)e.children.push(i.toJSON())}return e}_clone(e=!1){const i=e?KD(this._children):void 0;return new _m(this.name,this.getAttributes(),i)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,i){const n=YD(i);for(const r of n)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,n)}_removeChildren(e,i=1){const n=this._children._removeNodes(e,i);for(const r of n)r.parent=null;return n}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const i of e)i.parent=null}static fromJSON(e){let i;if(e.children){i=[];for(const n of e.children)n.name?i.push(_m.fromJSON(n)):i.push(Qt.fromJSON(n))}return new _m(e.name,e.attributes,i)}};Vt.prototype.is=function(s,t){return t?t===this.name&&(s==="element"||s==="model:element"):s==="element"||s==="model:element"||s==="node"||s==="model:node"};function YD(s){if(typeof s=="string")return[new Qt(s)];Dn(s)||(s=[s]);const t=[];for(const e of s)typeof e=="string"?t.push(new Qt(e)):e instanceof Is?t.push(new Qt(e.data,e.getAttributes())):t.push(e);return t}function KD(s){const t=[];for(const e of s)t.push(e._clone(!0));return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HA{constructor(t){p(this,"_dispatchers");this._dispatchers=t}add(t){for(const e of this._dispatchers)t(e);return this}}class JD extends HA{elementToElement(t){return this.add(wN(t))}elementToStructure(t){return this.add(bN(t))}attributeToElement(t){return this.add(ON(t))}attributeToAttribute(t){return this.add(xN(t))}markerToElement(t){return this.add(yN(t))}markerToHighlight(t){return this.add(_N(t))}markerToData(t){return this.add(vN(t))}}function qA(){return(s,t,e)=>{if(!e.consumable.consume(t.item,s.name))return;const i=e.writer,n=e.mapper.toViewPosition(t.range.start),r=i.createText(t.item.data);i.insert(n,r)}}function XA(){return(s,t,e)=>{e.convertAttributes(t.item),!t.reconversion&&t.item.is("element")&&!t.item.isEmpty&&e.convertChildren(t.item)}}function eN(){return(s,t,e)=>{const i=e.mapper.toViewPosition(t.position),n=t.position.getShiftedBy(t.length),r=e.mapper.toViewPosition(n,{isPhantom:!0}),o=e.writer.createRange(i,r),l=e.writer.remove(o.getTrimmed());for(const a of e.writer.createRangeIn(l).getItems())e.mapper.unbindViewElement(a,{defer:!0})}}function jA(s,t){const e=s.createAttributeElement("span",t.attributes);return t.classes&&e._addClass(t.classes),typeof t.priority=="number"&&(e._priority=t.priority),e._id=t.id,e}function tN(){return(s,t,e)=>{const i=t.selection;if(i.isCollapsed||!e.consumable.consume(i,"selection"))return;const n=[];for(const r of i.getRanges())n.push(e.mapper.toViewRange(r));e.writer.setSelection(n,{backward:i.isBackward})}}function iN(){return(s,t,e)=>{const i=t.selection;if(!i.isCollapsed||!e.consumable.consume(i,"selection"))return;const n=e.writer,r=i.getFirstPosition(),o=e.mapper.toViewPosition(r),l=n.breakAttributes(o);n.setSelection(l)}}function nN(){return(s,t,e)=>{const i=e.writer,n=i.document.selection;for(const r of n.getRanges())r.isCollapsed&&r.end.parent.isAttached()&&e.writer.mergeAttributes(r.start);i.setSelection(null)}}function sN(s){return(t,e,i)=>{if(!i.consumable.test(e.item,t.name))return;const n=s(e.attributeOldValue,i,e),r=s(e.attributeNewValue,i,e);if(!n&&!r)return;i.consumable.consume(e.item,t.name);const o=i.writer,l=o.document.selection;if(e.item instanceof Ln||e.item instanceof Rs)o.wrap(l.getFirstRange(),r);else{let a=i.mapper.toViewRange(e.range);e.attributeOldValue!==null&&n&&(a=o.unwrap(a,n)),e.attributeNewValue!==null&&r&&o.wrap(a,r)}}}function rN(s,t=AN){return(e,i,n)=>{if(!t(i.item,n.consumable,{preflight:!0}))return;const r=s(i.item,n,i);if(!r)return;t(i.item,n.consumable);const o=n.mapper.toViewPosition(i.range.start);n.mapper.bindElements(i.item,r),n.writer.insert(o,r),n.convertAttributes(i.item),e6(r,i.item.getChildren(),n,{reconversion:i.reconversion})}}function oN(s,t){return(e,i,n)=>{if(!t(i.item,n.consumable,{preflight:!0}))return;const r=new Map;n.writer._registerSlotFactory(CN(i.item,r,n));const o=s(i.item,n,i);if(n.writer._clearSlotFactory(),!o)return;PN(i.item,r,n),t(i.item,n.consumable);const l=n.mapper.toViewPosition(i.range.start);n.mapper.bindElements(i.item,o),n.writer.insert(l,o),n.convertAttributes(i.item),TN(o,r,n,{reconversion:i.reconversion})}}function lN(s){return(t,e,i)=>{e.isOpening=!0;const n=s(e,i);e.isOpening=!1;const r=s(e,i);if(!n||!r)return;const o=e.markerRange;if(o.isCollapsed&&!i.consumable.consume(o,t.name))return;for(const c of o)if(!i.consumable.consume(c.item,t.name))return;const l=i.mapper,a=i.writer;a.insert(l.toViewPosition(o.start),n),i.mapper.bindElementToMarker(n,e.markerName),o.isCollapsed||(a.insert(l.toViewPosition(o.end),r),i.mapper.bindElementToMarker(r,e.markerName)),t.stop()}}function aN(){return(s,t,e)=>{const i=e.mapper.markerNameToElements(t.markerName);if(i){for(const n of i)e.mapper.unbindElementFromMarkerName(n,t.markerName),e.writer.clear(e.writer.createRangeOn(n),n);e.writer.clearClonedElementsGroup(t.markerName),s.stop()}}}function cN(s){return(t,e,i)=>{const n=s(e.markerName,i);if(!n)return;const r=e.markerRange;i.consumable.consume(r,t.name)&&(WS(r,!1,i,e,n),WS(r,!0,i,e,n),t.stop())}}function WS(s,t,e,i,n){const r=t?s.start:s.end,o=r.nodeAfter&&r.nodeAfter.is("element")?r.nodeAfter:null,l=r.nodeBefore&&r.nodeBefore.is("element")?r.nodeBefore:null;if(o||l){let c,h;t&&o||!t&&!l?(c=o,h=!0):(c=l,h=!1);const f=e.mapper.toViewElement(c);if(f){uN(f,t,h,e,i,n);return}}const a=e.mapper.toViewPosition(r);hN(a,t,e,i,n)}function uN(s,t,e,i,n,r){const o=`data-${r.group}-${t?"start":"end"}-${e?"before":"after"}`,l=s.hasAttribute(o)?s.getAttribute(o).split(","):[];l.unshift(r.name),i.writer.setAttribute(o,l.join(","),s),i.mapper.bindElementToMarker(s,n.markerName)}function hN(s,t,e,i,n){const r=`${n.group}-${t?"start":"end"}`,o=n.name?{name:n.name}:null,l=e.writer.createUIElement(r,o);e.writer.insert(s,l),e.mapper.bindElementToMarker(l,i.markerName)}function dN(s){return(t,e,i)=>{const n=s(e.markerName,i);if(!n)return;const r=i.mapper.markerNameToElements(e.markerName);if(!r)return;for(const l of r)i.mapper.unbindElementFromMarkerName(l,e.markerName),l.is("containerElement")?(o(`data-${n.group}-start-before`,l),o(`data-${n.group}-start-after`,l),o(`data-${n.group}-end-before`,l),o(`data-${n.group}-end-after`,l)):i.writer.clear(i.writer.createRangeOn(l),l);i.writer.clearClonedElementsGroup(e.markerName),t.stop();function o(l,a){if(a.hasAttribute(l)){const c=new Set(a.getAttribute(l).split(","));c.delete(n.name),c.size==0?i.writer.removeAttribute(l,a):i.writer.setAttribute(l,Array.from(c).join(","),a)}}}}function fN(s){return(t,e,i)=>{if(!i.consumable.test(e.item,t.name))return;const n=s(e.attributeOldValue,i,e),r=s(e.attributeNewValue,i,e);if(!n&&!r)return;i.consumable.consume(e.item,t.name);const o=i.mapper.toViewElement(e.item),l=i.writer;if(!o)throw new A("conversion-attribute-to-attribute-on-text",i.dispatcher,e);if(e.attributeOldValue!==null&&n){let a=n.value;n.key=="style"&&(typeof n.value=="string"?a=new Xa(l.document.stylesProcessor).setTo(n.value).getStylesEntries().map(([c])=>c):a=Object.keys(n.value)),l.removeAttribute(n.key,a,o)}if(e.attributeNewValue!==null&&r){let a=r.value;r.key=="style"&&typeof r.value=="string"&&(a=Object.fromEntries(new Xa(l.document.stylesProcessor).setTo(r.value).getStylesEntries())),l.setAttribute(r.key,a,!1,o)}}}function mN(s){return(t,e,i)=>{if(!e.item||!(e.item instanceof Ln||e.item instanceof Rs)&&!e.item.is("$textProxy"))return;const n=Ix(s,e,i);if(!n||!i.consumable.consume(e.item,t.name))return;const r=i.writer,o=jA(r,n),l=r.document.selection;if(e.item instanceof Ln||e.item instanceof Rs)r.wrap(l.getFirstRange(),o);else{const a=i.mapper.toViewRange(e.range),c=r.wrap(a,o);for(const h of c.getItems())if(h.is("attributeElement")&&h.isSimilar(o)){i.mapper.bindElementToMarker(h,e.markerName);break}}}}function gN(s){return(t,e,i)=>{if(!e.item||!(e.item instanceof Vt))return;const n=Ix(s,e,i);if(!n||!i.consumable.test(e.item,t.name))return;const r=i.mapper.toViewElement(e.item);if(r&&r.getCustomProperty("addHighlight")){i.consumable.consume(e.item,t.name);for(const l of G._createIn(e.item))i.consumable.consume(l.item,t.name);r.getCustomProperty("addHighlight")(r,n,i.writer),i.mapper.bindElementToMarker(r,e.markerName)}}}function pN(s){return(t,e,i)=>{if(e.markerRange.isCollapsed)return;const n=Ix(s,e,i);if(!n)return;const r=jA(i.writer,n),o=i.mapper.markerNameToElements(e.markerName);if(o){for(const l of o)i.mapper.unbindElementFromMarkerName(l,e.markerName),l.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(l),r):l.getCustomProperty("removeHighlight")(l,n.id,i.writer);i.writer.clearClonedElementsGroup(e.markerName),t.stop()}}}function wN(s){const t=GA(s.model),e=gh(s.view,"container");return t.attributes.length&&(t.children=!0),i=>{i.on(`insert:${t.name}`,rN(e,JA(t)),{priority:s.converterPriority||"normal"}),(t.children||t.attributes.length)&&i.on("reduceChanges",KA(t),{priority:"low"})}}function bN(s){const t=GA(s.model),e=gh(s.view,"container");return t.children=!0,i=>{if(i._conversionApi.schema.checkChild(t.name,"$text"))throw new A("conversion-element-to-structure-disallowed-text",i,{elementName:t.name});i.on(`insert:${t.name}`,oN(e,JA(t)),{priority:s.converterPriority||"normal"}),i.on("reduceChanges",KA(t),{priority:"low"})}}function ON(s){s=yn(s);let t=s.model;typeof t=="string"&&(t={key:t});let e=`attribute:${t.key}`;if(t.name&&(e+=":"+t.name),t.values)for(const n of t.values)s.view[n]=gh(s.view[n],"attribute");else s.view=gh(s.view,"attribute");const i=YA(s);return n=>{n.on(e,sN(i),{priority:s.converterPriority||"normal"})}}function xN(s){s=yn(s);let t=s.model;typeof t=="string"&&(t={key:t});let e=`attribute:${t.key}`;if(t.name&&(e+=":"+t.name),t.values)for(const n of t.values)s.view[n]=US(s.view[n]);else s.view=US(s.view);const i=YA(s);return n=>{n.on(e,fN(i),{priority:s.converterPriority||"normal"})}}function yN(s){const t=gh(s.view,"ui");return e=>{e.on(`addMarker:${s.model}`,lN(t),{priority:s.converterPriority||"normal"}),e.on(`removeMarker:${s.model}`,aN(),{priority:s.converterPriority||"normal"})}}function vN(s){s=yn(s);const t=s.model;let e=s.view;return e||(e=i=>({group:t,name:i.substr(s.model.length+1)})),i=>{i.on(`addMarker:${t}`,cN(e),{priority:s.converterPriority||"normal"}),i.on(`removeMarker:${t}`,dN(e),{priority:s.converterPriority||"normal"})}}function _N(s){return t=>{t.on(`addMarker:${s.model}`,mN(s.view),{priority:s.converterPriority||"normal"}),t.on(`addMarker:${s.model}`,gN(s.view),{priority:s.converterPriority||"normal"}),t.on(`removeMarker:${s.model}`,pN(s.view),{priority:s.converterPriority||"normal"})}}function GA(s){return typeof s=="string"&&(s={name:s}),{name:s.name,attributes:s.attributes?ut(s.attributes):[],children:!!s.children}}function gh(s,t){return typeof s=="function"?s:(e,i)=>kN(s,i,t)}function kN(s,t,e){typeof s=="string"&&(s={name:s});let i;const n=t.writer,r=Object.assign({},s.attributes);if(e=="container")i=n.createContainerElement(s.name,r);else if(e=="attribute"){const o={priority:s.priority||wl.DEFAULT_PRIORITY};i=n.createAttributeElement(s.name,r,o)}else i=n.createUIElement(s.name,r);if(s.styles){const o=Object.keys(s.styles);for(const l of o)n.setStyle(l,s.styles[l],i)}if(s.classes){const o=s.classes;if(typeof o=="string")n.addClass(o,i);else for(const l of o)n.addClass(l,i)}return i}function YA(s){return s.model.values?(t,e,i)=>{const n=s.view[t];return n?n(t,e,i):null}:s.view}function US(s){return typeof s=="string"?t=>({key:s,value:t}):typeof s=="object"?s.value?()=>s:t=>({key:s.key,value:t}):s}function Ix(s,t,e){const i=typeof s=="function"?s(t,e):s;return i?(i.priority||(i.priority=10),i.id||(i.id=t.markerName),i):null}function SN(s){return(t,e)=>{if(!t.is("element",s.name))return!1;if(e.type=="attribute"){if(s.attributes.includes(e.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(s.children)return!0}return!1}}function KA(s){const t=SN(s);return(e,i)=>{const n=[];i.reconvertedElements||(i.reconvertedElements=new Set);for(const r of i.changes){const o=r.type=="attribute"?r.range.start.nodeAfter:r.position.parent;if(!o||!t(o,r)){n.push(r);continue}if(!i.reconvertedElements.has(o)){i.reconvertedElements.add(o);const l=te._createBefore(o);let a=n.length;for(let c=n.length-1;c>=0;c--){const h=n[c],m=(h.type=="attribute"?h.range.start:h.position).compareWith(l);if(m=="before"||h.type=="remove"&&m=="same")break;a=c}n.splice(a,0,{type:"remove",name:o.name,position:l,length:1},{type:"reinsert",name:o.name,position:l,length:1})}}i.changes=n}}function JA(s){return(t,e,i={})=>{const n=["insert"];for(const r of s.attributes)t.hasAttribute(r)&&n.push(`attribute:${r}`);return n.every(r=>e.test(t,r))?(i.preflight||n.forEach(r=>e.consume(t,r)),!0):!1}}function CN(s,t,e){return(i,n)=>{const r=i.createContainerElement("$slot");let o=null;if(n==="children")o=Array.from(s.getChildren());else if(typeof n=="function")o=Array.from(s.getChildren()).filter(l=>n(l));else throw new A("conversion-slot-mode-unknown",e.dispatcher,{modeOrFilter:n});return t.set(r,o),r}}function PN(s,t,e){const i=Array.from(t.values()).flat(),n=new Set(i);if(n.size!=i.length)throw new A("conversion-slot-filter-overlap",e.dispatcher,{element:s});if(n.size!=s.childCount)throw new A("conversion-slot-filter-incomplete",e.dispatcher,{element:s})}function TN(s,t,e,i){e.mapper.on("modelToViewPosition",o,{priority:"highest"});let n=null,r=null;for([n,r]of t)e6(s,r,e,i),e.writer.move(e.writer.createRangeIn(n),e.writer.createPositionBefore(n)),e.writer.remove(n);e.mapper.off("modelToViewPosition",o);function o(l,a){const c=a.modelPosition.nodeAfter,h=r.indexOf(c);h<0||(a.viewPosition=a.mapper.findPositionIn(n,h))}}function e6(s,t,e,i){for(const n of t)EN(s.root,n,e,i)||e.convertItem(n)}function EN(s,t,e,i){const{writer:n,mapper:r}=e;if(!i.reconversion)return!1;const o=r.toViewElement(t);return!o||o.root==s||!e.canReuseView(o)?!1:(n.move(n.createRangeOn(o),r.toViewPosition(te._createBefore(t))),!0)}function AN(s,t,{preflight:e}={}){return e?t.test(s,"insert"):t.consume(s,"insert")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function t6(s){const{schema:t,document:e}=s.model;for(const i of e.getRoots())if(i.isEmpty&&!t.checkChild(i,"$text")&&t.checkChild(i,"paragraph"))return s.insertElement("paragraph",i),!0;return!1}function i6(s,t,e){const i=e.createContext(s);return!(!e.checkChild(i,"paragraph")||!e.checkChild(i.push("paragraph"),t))}function n6(s,t){const e=t.createElement("paragraph");return t.insert(e,s),t.createPositionAt(e,0)}class IN extends HA{elementToElement(t){return this.add(s6(t))}elementToAttribute(t){return this.add(MN(t))}attributeToAttribute(t){return this.add(LN(t))}elementToMarker(t){return this.add(BN(t))}dataToMarker(t){return this.add($N(t))}}function ZS(){return(s,t,e)=>{if(!t.modelRange&&e.consumable.consume(t.viewItem,{name:!0})){const{modelRange:i,modelCursor:n}=e.convertChildren(t.viewItem,t.modelCursor);t.modelRange=i,t.modelCursor=n}}}function RN(){return(s,t,{schema:e,consumable:i,writer:n})=>{let r=t.modelCursor;if(!i.test(t.viewItem))return;if(!e.checkChild(r,"$text")){if(!i6(r,"$text",e)||t.viewItem.data.trim().length==0)return;r=n6(r,n)}i.consume(t.viewItem);const o=n.createText(t.viewItem.data);n.insert(o,r),t.modelRange=n.createRange(r,r.getShiftedBy(o.offsetSize)),t.modelCursor=t.modelRange.end}}function VN(s,t){return(e,i)=>{const n=i.newSelection,r=[];for(const l of n.getRanges())r.push(t.toModelRange(l));const o=s.createSelection(r,{backward:n.isBackward});o.isEqual(s.document.selection)||s.change(l=>{l.setSelection(o)})}}function s6(s){s=yn(s);const t=y1(s),e=Rx(s.view),i=e?`element:${e}`:"element";return n=>{n.on(i,t,{priority:s.converterPriority||"normal"})}}function MN(s){s=yn(s),r6(s);const t=o6(s,!1),e=Rx(s.view),i=e?`element:${e}`:"element";return n=>{n.on(i,t,{priority:s.converterPriority||"low"})}}function LN(s){s=yn(s);let t=null;(typeof s.view=="string"||s.view.key)&&(t=NN(s)),r6(s,t);const e=o6(s,!0);return i=>{i.on("element",e,{priority:s.converterPriority||"low"})}}function BN(s){const t=WN(s.model);return s6({...s,model:t})}function $N(s){s=yn(s),s.model||(s.model=n=>n?s.view+":"+n:s.view);const t={view:s.view,model:s.model},e=y1(HS(t,"start")),i=y1(HS(t,"end"));return n=>{n.on(`element:${s.view}-start`,e,{priority:s.converterPriority||"normal"}),n.on(`element:${s.view}-end`,i,{priority:s.converterPriority||"normal"});const r=Ki.low,o=Ki.highest,l=Ki.get(s.converterPriority)/o;n.on("element",QN(t),{priority:r+l})}}function QN(s){return(t,e,i)=>{const n=`data-${s.view}`;if(!i.consumable.test(e.viewItem,{attributes:n+"-end-after"})&&!i.consumable.test(e.viewItem,{attributes:n+"-start-after"})&&!i.consumable.test(e.viewItem,{attributes:n+"-end-before"})&&!i.consumable.test(e.viewItem,{attributes:n+"-start-before"}))return;e.modelRange||Object.assign(e,i.convertChildren(e.viewItem,e.modelCursor)),i.consumable.consume(e.viewItem,{attributes:n+"-end-after"})&&r(e.modelRange.end,e.viewItem.getAttribute(n+"-end-after").split(",")),i.consumable.consume(e.viewItem,{attributes:n+"-start-after"})&&r(e.modelRange.end,e.viewItem.getAttribute(n+"-start-after").split(",")),i.consumable.consume(e.viewItem,{attributes:n+"-end-before"})&&r(e.modelRange.start,e.viewItem.getAttribute(n+"-end-before").split(",")),i.consumable.consume(e.viewItem,{attributes:n+"-start-before"})&&r(e.modelRange.start,e.viewItem.getAttribute(n+"-start-before").split(","));function r(o,l){for(const a of l){const c=s.model(a,i),h=i.writer.createElement("$marker",{"data-name":c});i.writer.insert(h,o),e.modelCursor.isEqual(o)?e.modelCursor=e.modelCursor.getShiftedBy(1):e.modelCursor=e.modelCursor._getTransformedByInsertion(o,1),e.modelRange=e.modelRange._getTransformedByInsertion(o,1)[0]}}}}function Rx(s){return typeof s=="string"?s:typeof s=="object"&&typeof s.name=="string"?s.name:null}function y1(s){const t=new Nn(s.view);return(e,i,n)=>{const r=t.match(i.viewItem);if(!r)return;const o=r.match;if(o.name=!0,!n.consumable.test(i.viewItem,o))return;const l=DN(s.model,i.viewItem,n);l&&n.safeInsert(l,i.modelCursor)&&(n.consumable.consume(i.viewItem,o),n.convertChildren(i.viewItem,l),n.updateConversionResult(l,i))}}function DN(s,t,e){return s instanceof Function?s(t,e):e.writer.createElement(s)}function NN(s){typeof s.view=="string"&&(s.view={key:s.view});const t=s.view.key,e=typeof s.view.value>"u"?/[\s\S]*/:s.view.value;let i;return t=="class"||t=="style"?i={[t=="class"?"classes":"styles"]:e}:i={attributes:{[t]:e}},s.view.name&&(i.name=s.view.name),s.view=i,t}function r6(s,t=null){const e=t===null?!0:r=>r.getAttribute(t),i=typeof s.model!="object"?s.model:s.model.key,n=typeof s.model!="object"||typeof s.model.value>"u"?e:s.model.value;s.model={key:i,value:n}}function o6(s,t){const e=new Nn(s.view);return(i,n,r)=>{if(!n.modelRange&&t)return;const o=e.match(n.viewItem);if(!o||(FN(s.view,n.viewItem)?o.match.name=!0:delete o.match.name,!r.consumable.test(n.viewItem,o.match)))return;const l=s.model.key,a=typeof s.model.value=="function"?s.model.value(n.viewItem,r,n):s.model.value;if(a===null)return;n.modelRange||Object.assign(n,r.convertChildren(n.viewItem,n.modelCursor)),zN(n.modelRange,{key:l,value:a},t,r)&&(r.consumable.test(n.viewItem,{name:!0})&&(o.match.name=!0),r.consumable.consume(n.viewItem,o.match))}}function FN(s,t){const e=typeof s=="function"?s(t):s;return typeof e=="object"&&!Rx(e)?!1:!e.classes&&!e.attributes&&!e.styles}function zN(s,t,e,i){let n=!1;for(const r of Array.from(s.getItems({shallow:e})))i.schema.checkAttribute(r,t.key)&&(n=!0,!r.hasAttribute(t.key)&&i.writer.setAttribute(t.key,t.value,r));return n}function WN(s){return(t,e)=>{const i=typeof s=="string"?s:s(t,e);return e.writer.createElement("$marker",{"data-name":i})}}function HS(s,t){const e=(i,n)=>{const r=i.getAttribute("name"),o=s.model(r,n);return n.writer.createElement("$marker",{"data-name":o})};return{view:`${s.view}-${t}`,model:e}}class UN extends ct(){constructor(e,i){super();p(this,"model");p(this,"view");p(this,"mapper");p(this,"downcastDispatcher");this.model=e,this.view=new LD(i),this.mapper=new WA,this.downcastDispatcher=new UA({mapper:this.mapper,schema:e.schema});const n=this.model.document,r=n.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(n,"change",()=>{this.view.change(l=>{this.downcastDispatcher.convertChanges(n.differ,o,l),this.downcastDispatcher.convertSelection(r,o,l)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",VN(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",qA(),{priority:"lowest"}),this.downcastDispatcher.on("insert",XA(),{priority:"lowest"}),this.downcastDispatcher.on("remove",eN(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",nN()),this.downcastDispatcher.on("selection",tN(),{priority:"low"}),this.downcastDispatcher.on("selection",iN(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(l=>{if(l.rootName=="$graveyard")return null;const a=new AA(this.view.document,l.name);return a.rootName=l.rootName,this.mapper.bindElements(l,a),a})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const i=typeof e=="string"?e:e.name,n=this.model.markers.get(i);if(!n)throw new A("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:i});this.model.change(()=>{this.model.markers._refresh(n)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}let ZN=class extends ct(){constructor(){super();p(this,"_sourceDefinitions",{});p(this,"_attributeProperties",Object.create(null));p(this,"_customChildChecks",new Map);p(this,"_customAttributeChecks",new Map);p(this,"_genericCheckSymbol",Symbol("$generic"));p(this,"_compiledDefinitions");this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,i)=>{i[0]=new vo(i[0])},{priority:"highest"}),this.on("checkChild",(e,i)=>{i[0]=new vo(i[0]),i[1]=this.getDefinition(i[1])},{priority:"highest"})}register(e,i){if(this._sourceDefinitions[e])throw new A("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},i)],this._clearCache()}extend(e,i){if(!this._sourceDefinitions[e])throw new A("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},i)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let i;return typeof e=="string"?i=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?i="$text":i=e.name,this.getDefinitions()[i]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const i=this.getDefinition(e);return!!(i&&i.isBlock)}isLimit(e){const i=this.getDefinition(e);return i?!!(i.isLimit||i.isObject):!1}isObject(e){const i=this.getDefinition(e);return i?!!(i.isObject||i.isLimit&&i.isSelectable&&i.isContent):!1}isInline(e){const i=this.getDefinition(e);return!!(i&&i.isInline)}isSelectable(e){const i=this.getDefinition(e);return i?!!(i.isSelectable||i.isObject):!1}isContent(e){const i=this.getDefinition(e);return i?!!(i.isContent||i.isObject):!1}checkChild(e,i){return i?this._checkContextMatch(e,i):!1}checkAttribute(e,i){const n=this.getDefinition(e.last);if(!n)return!1;const r=this._evaluateAttributeChecks(e,i);return r!==void 0?r:n.allowAttributes.includes(i)}checkMerge(e,i){if(e instanceof te){const n=e.nodeBefore,r=e.nodeAfter;if(!(n instanceof Vt))throw new A("schema-check-merge-no-element-before",this);if(!(r instanceof Vt))throw new A("schema-check-merge-no-element-after",this);return this.checkMerge(n,r)}if(this.isLimit(e)||this.isLimit(i))return!1;for(const n of i.getChildren())if(!this.checkChild(e,n))return!1;return!0}addChildCheck(e,i){const n=i!==void 0?i:this._genericCheckSymbol,r=this._customChildChecks.get(n)||[];r.push(e),this._customChildChecks.set(n,r)}addAttributeCheck(e,i){const n=i!==void 0?i:this._genericCheckSymbol,r=this._customAttributeChecks.get(n)||[];r.push(e),this._customAttributeChecks.set(n,r)}setAttributeProperties(e,i){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),i)}getAttributeProperties(e){return this._attributeProperties[e]||Object.create(null)}getLimitElement(e){let i;for(e instanceof te?i=e.parent:i=(e instanceof G?[e]:Array.from(e.getRanges())).reduce((r,o)=>{const l=o.getCommonAncestor();return r?r.getCommonAncestor(l,{includeSelf:!0}):l},null);!this.isLimit(i)&&i.parent;)i=i.parent;return i}checkAttributeInSelection(e,i){if(e.isCollapsed){const r=[...e.getFirstPosition().getAncestors(),new Qt("",e.getAttributes())];return this.checkAttribute(r,i)}else{const n=e.getRanges();for(const r of n)for(const o of r)if(this.checkAttribute(o.item,i))return!0}return!1}*getValidRanges(e,i){e=l9(e);for(const n of e)yield*this._getValidRangesForRange(n,i)}getNearestSelectionRange(e,i="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new G(e);let n,r;const o=e.getAncestors().reverse().find(l=>this.isLimit(l))||e.root;(i=="both"||i=="backward")&&(n=new Tr({boundaries:G._createIn(o),startPosition:e,direction:"backward"})),(i=="both"||i=="forward")&&(r=new Tr({boundaries:G._createIn(o),startPosition:e}));for(const l of o9(n,r)){const a=l.walker==n?"elementEnd":"elementStart",c=l.value;if(c.type==a&&this.isObject(c.item))return G._createOn(c.item);if(this.checkChild(c.nextPosition,"$text"))return new G(c.nextPosition)}return null}findAllowedParent(e,i){let n=e.parent;for(;n;){if(this.checkChild(n,i))return n;if(this.isLimit(n))return null;n=n.parent}return null}setAllowedAttributes(e,i,n){const r=n.model;for(const[o,l]of Object.entries(i))r.schema.checkAttribute(e,o)&&n.setAttribute(o,l,e)}removeDisallowedAttributes(e,i){for(const n of e)if(n.is("$text"))qS(this,n,i);else{const o=G._createIn(n).getPositions();for(const l of o){const a=l.nodeBefore||l.parent;qS(this,a,i)}}}getAttributesWithProperty(e,i,n){const r={};for(const[o,l]of e.getAttributes()){const a=this.getAttributeProperties(o);a[i]!==void 0&&(n===void 0||n===a[i])&&(r[o]=l)}return r}createContext(e){return new vo(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},i=this._sourceDefinitions,n=Object.keys(i);for(const o of n)e[o]=HN(i[o],o);const r=Object.values(e);for(const o of r)qN(e,o),XN(e,o),jN(e,o),GN(e,o);for(const o of r)YN(e,o);for(const o of r)KN(e,o);for(const o of r)JN(e,o);for(const o of r)t9(e,o);for(const o of r)i9(e,o);this._compiledDefinitions=e9(e)}_checkContextMatch(e,i){const n=e.last;let r=this._evaluateChildChecks(e,i);if(r=r!==void 0?r:i.allowIn.includes(n.name),!r)return!1;const o=this.getDefinition(n),l=e.trimLast();return o?l.length==0?!0:this._checkContextMatch(l,o):!1}_evaluateChildChecks(e,i){const n=this._customChildChecks.get(this._genericCheckSymbol)||[],r=this._customChildChecks.get(i.name)||[];for(const o of[...n,...r]){const l=o(e,i);if(l!==void 0)return l}}_evaluateAttributeChecks(e,i){const n=this._customAttributeChecks.get(this._genericCheckSymbol)||[],r=this._customAttributeChecks.get(i)||[];for(const o of[...n,...r]){const l=o(e,i);if(l!==void 0)return l}}*_getValidRangesForRange(e,i){let n=e.start,r=e.start;for(const o of e.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(G._createIn(o),i)),this.checkAttribute(o,i)||(n.isEqual(r)||(yield new G(n,r)),n=te._createAfter(o)),r=te._createAfter(o);n.isEqual(r)||(yield new G(n,r))}findOptimalInsertionRange(e,i){const n=e.getSelectedElement();if(n&&this.isObject(n)&&!this.isInline(n))return i=="before"||i=="after"?new G(te._createAt(n,i)):G._createOn(n);const r=Nt(e.getSelectedBlocks());if(!r)return new G(e.focus);if(r.isEmpty)return new G(te._createAt(r,0));const o=te._createAfter(r);return e.focus.isTouching(o)?new G(o):new G(te._createBefore(r))}};class vo{constructor(t){p(this,"_items");if(t instanceof vo)return t;let e;typeof t=="string"?e=[t]:Array.isArray(t)?e=t:e=t.getAncestors({includeSelf:!0}),this._items=e.map(r9)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(t){const e=new vo([t]);return e._items=[...this._items,...e._items],e}trimLast(){const t=new vo([]);return t._items=this._items.slice(0,-1),t}getItem(t){return this._items[t]}*getNames(){yield*this._items.map(t=>t.name)}endsWith(t){return Array.from(this.getNames()).join(" ").endsWith(t)}startsWith(t){return Array.from(this.getNames()).join(" ").startsWith(t)}}function HN(s,t){const e={name:t,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return n9(s,e),Us(s,e,"allowIn"),Us(s,e,"allowChildren"),Us(s,e,"disallowIn"),Us(s,e,"disallowChildren"),Us(s,e,"allowContentOf"),Us(s,e,"allowWhere"),Us(s,e,"allowAttributes"),Us(s,e,"disallowAttributes"),Us(s,e,"allowAttributesOf"),Us(s,e,"inheritTypesFrom"),s9(s,e),e}function qN(s,t){for(const e of t.allowIn){const i=s[e];i?i.allowChildren.add(t.name):t.allowIn.delete(e)}}function XN(s,t){for(const e of t.allowChildren){const i=s[e];i?i.allowIn.add(t.name):t.allowChildren.delete(e)}}function jN(s,t){for(const e of t.disallowIn){const i=s[e];i?i.disallowChildren.add(t.name):t.disallowIn.delete(e)}}function GN(s,t){for(const e of t.disallowChildren){const i=s[e];i?i.disallowIn.add(t.name):t.disallowChildren.delete(e)}}function YN(s,t){for(const e of t.disallowChildren)t.allowChildren.delete(e);for(const e of t.disallowIn)t.allowIn.delete(e);for(const e of t.disallowAttributes)t.allowAttributes.delete(e)}function KN(s,t){for(const e of t.allowContentOf){const i=s[e];i&&(i.disallowChildren.forEach(n=>{t.allowChildren.has(n)||(t.disallowChildren.add(n),s[n].disallowIn.add(t.name))}),i.allowChildren.forEach(n=>{t.disallowChildren.has(n)||(t.allowChildren.add(n),s[n].allowIn.add(t.name))}))}}function JN(s,t){for(const e of t.allowWhere){const i=s[e];i&&(i.disallowIn.forEach(n=>{t.allowIn.has(n)||(t.disallowIn.add(n),s[n].disallowChildren.add(t.name))}),i.allowIn.forEach(n=>{t.disallowIn.has(n)||(t.allowIn.add(n),s[n].allowChildren.add(t.name))}))}}function e9(s){const t={};for(const e of Object.values(s))t[e.name]={name:e.name,isBlock:!!e.isBlock,isContent:!!e.isContent,isInline:!!e.isInline,isLimit:!!e.isLimit,isObject:!!e.isObject,isSelectable:!!e.isSelectable,allowIn:Array.from(e.allowIn).filter(i=>!!s[i]),allowChildren:Array.from(e.allowChildren).filter(i=>!!s[i]),allowAttributes:Array.from(e.allowAttributes)};return t}function t9(s,t){for(const e of t.allowAttributesOf){const i=s[e];if(!i)return;i.allowAttributes.forEach(n=>{t.disallowAttributes.has(n)||t.allowAttributes.add(n)})}}function i9(s,t){for(const e of t.inheritTypesFrom){const i=s[e];if(i){const n=Object.keys(i).filter(r=>r.startsWith("is"));for(const r of n)r in t||(t[r]=i[r])}}}function n9(s,t){for(const e of s){const i=Object.keys(e).filter(n=>n.startsWith("is"));for(const n of i)t[n]=!!e[n]}}function Us(s,t,e){for(const i of s){let n=i[e];typeof n=="string"&&(n=[n]),Array.isArray(n)&&n.forEach(r=>t[e].add(r))}}function s9(s,t){for(const e of s){const i=e.inheritAllFrom;i&&(t.allowContentOf.add(i),t.allowWhere.add(i),t.allowAttributesOf.add(i),t.inheritTypesFrom.add(i))}}function r9(s){return typeof s=="string"||s.is("documentFragment")?{name:typeof s=="string"?s:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:s.is("element")?s.name:"$text",*getAttributeKeys(){yield*s.getAttributeKeys()},getAttribute(t){return s.getAttribute(t)}}}function*o9(s,t){let e=!1;for(;!e;){if(e=!0,s){const i=s.next();i.done||(e=!1,yield{walker:s,value:i.value})}if(t){const i=t.next();i.done||(e=!1,yield{walker:t,value:i.value})}}}function*l9(s){for(const t of s)yield*t.getMinimalFlatRanges()}function qS(s,t,e){for(const i of t.getAttributeKeys())s.checkAttribute(t,i)||e.removeAttribute(i,t)}class a9 extends gt(){constructor(e){super();p(this,"conversionApi");p(this,"_splitParts",new Map);p(this,"_cursorParents",new Map);p(this,"_modelCursor",null);p(this,"_emptyElementsToKeep",new Set);this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(i,n)=>this._convertItem(i,n),convertChildren:(i,n)=>this._convertChildren(i,n),safeInsert:(i,n)=>this._safeInsert(i,n),updateConversionResult:(i,n)=>this._updateConversionResult(i,n),splitToAllowedParent:(i,n)=>this._splitToAllowedParent(i,n),getSplitParts:i=>this._getSplitParts(i),keepEmptyElement:i=>this._keepEmptyElement(i)}}convert(e,i,n=["$root"]){this.fire("viewCleanup",e),this._modelCursor=u9(n,i),this.conversionApi.writer=i,this.conversionApi.consumable=rg.createFrom(e),this.conversionApi.store={};const{modelRange:r}=this._convertItem(e,this._modelCursor),o=i.createDocumentFragment();if(r){this._removeEmptyElements();const l=this._modelCursor.parent,a=l._removeChildren(0,l.childCount);o._insertChild(0,a),o.markers=c9(o,i)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(e,i){const n={viewItem:e,modelCursor:i,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,n,this.conversionApi):e.is("$text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof G))throw new A("view-conversion-dispatcher-incorrect-result",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor}}_convertChildren(e,i){let n=i.is("position")?i:te._createAt(i,0);const r=new G(n);for(const o of Array.from(e.getChildren())){const l=this._convertItem(o,n);l.modelRange instanceof G&&(r.end=l.modelRange.end,n=l.modelCursor)}return{modelRange:r,modelCursor:n}}_safeInsert(e,i){const n=this._splitToAllowedParent(e,i);return n?(this.conversionApi.writer.insert(e,n.position),!0):!1}_updateConversionResult(e,i){const n=this._getSplitParts(e),r=this.conversionApi.writer;i.modelRange||(i.modelRange=r.createRange(r.createPositionBefore(e),r.createPositionAfter(n[n.length-1])));const o=this._cursorParents.get(e);o?i.modelCursor=r.createPositionAt(o,0):i.modelCursor=i.modelRange.end}_splitToAllowedParent(e,i){const{schema:n,writer:r}=this.conversionApi;let o=n.findAllowedParent(i,e);if(o){if(o===i.parent)return{position:i};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return i6(i,e,n)?{position:n6(i,r)}:null;const l=this.conversionApi.writer.split(i,o),a=[];for(const h of l.range.getWalker())if(h.type=="elementEnd")a.push(h.item);else{const f=a.pop(),m=h.item;this._registerSplitPair(f,m)}const c=l.range.end.parent;return this._cursorParents.set(e,c),{position:l.position,cursorParent:c}}_registerSplitPair(e,i){this._splitParts.has(e)||this._splitParts.set(e,[e]);const n=this._splitParts.get(e);this._splitParts.set(i,n),n.push(i)}_getSplitParts(e){let i;return this._splitParts.has(e)?i=this._splitParts.get(e):i=[e],i}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){const e=new Map;for(const i of this._splitParts.keys())if(i.isEmpty&&!this._emptyElementsToKeep.has(i)){const n=e.get(i.parent)||[];n.push(i),this._splitParts.delete(i),e.set(i.parent,n)}for(const[i,n]of e)i._removeChildrenArray(n);e.size&&this._removeEmptyElements()}}function c9(s,t){const e=new Set,i=new Map,n=G._createIn(s).getItems();for(const r of n)r.is("element","$marker")&&e.add(r);for(const r of e){const o=r.getAttribute("data-name"),l=t.createPositionBefore(r);i.has(o)?i.get(o).end=l.clone():i.set(o,new G(l.clone())),t.remove(r)}return i}function u9(s,t){let e;for(const i of new vo(s)){const n={};for(const o of i.getAttributeKeys())n[o]=i.getAttribute(o);const r=t.createElement(i.name,n);e&&t.insert(r,e),e=te._createAt(r,0)}return e}class h9{getHtml(t){const i=ue.document.implementation.createHTMLDocument("").createElement("div");return i.appendChild(t),i.innerHTML}}class d9{constructor(t){p(this,"domParser");p(this,"domConverter");p(this,"htmlWriter");p(this,"skipComments",!0);this.domParser=new DOMParser,this.domConverter=new Kh(t,{renderingMode:"data"}),this.htmlWriter=new h9}toData(t){const e=this.domConverter.viewToDom(t);return this.htmlWriter.getHtml(e)}toView(t){const e=this._toDom(t);return this.domConverter.domToView(e,{skipComments:this.skipComments})}registerRawContentMatcher(t){this.domConverter.registerRawContentMatcher(t)}useFillerType(t){this.domConverter.blockFillerMode=t=="marked"?"markedNbsp":"nbsp"}_toDom(t){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(t.trim().slice(0,1e4))||(t=`<body>${t}</body>`);const e=this.domParser.parseFromString(t,"text/html"),i=e.createDocumentFragment(),n=e.body.childNodes;for(;n.length>0;)i.appendChild(n[0]);return i}}class f9 extends gt(){constructor(e,i){super();p(this,"model");p(this,"mapper");p(this,"downcastDispatcher");p(this,"upcastDispatcher");p(this,"viewDocument");p(this,"stylesProcessor");p(this,"htmlProcessor");p(this,"processor");p(this,"_viewWriter");this.model=e,this.mapper=new WA,this.downcastDispatcher=new UA({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",qA(),{priority:"lowest"}),this.downcastDispatcher.on("insert",XA(),{priority:"lowest"}),this.upcastDispatcher=new a9({schema:e.schema}),this.viewDocument=new Yh(i),this.stylesProcessor=i,this.htmlProcessor=new d9(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new VA(this.viewDocument),this.upcastDispatcher.on("text",RN(),{priority:"lowest"}),this.upcastDispatcher.on("element",ZS(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",ZS(),{priority:"lowest"}),ct().prototype.decorate.call(this,"init"),ct().prototype.decorate.call(this,"set"),ct().prototype.decorate.call(this,"get"),ct().prototype.decorate.call(this,"toView"),ct().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},t6)},{priority:"lowest"})}get(e={}){const{rootName:i="main",trim:n="empty"}=e;if(!this._checkIfRootsExists([i]))throw new A("datacontroller-get-non-existent-root",this);const r=this.model.document.getRoot(i);return r.isAttached()||We("datacontroller-get-detached-root",this),n==="empty"&&!this.model.hasContent(r,{ignoreWhitespaces:!0})?"":this.stringify(r,e)}stringify(e,i={}){const n=this.toView(e,i);return this.processor.toData(n)}toView(e,i={}){const n=this.viewDocument,r=this._viewWriter;this.mapper.clearBindings();const o=G._createIn(e),l=new bl(n);this.mapper.bindElements(e,l);const a=e.is("documentFragment")?e.markers:m9(e);return this.downcastDispatcher.convert(o,a,r,i),l}init(e){if(this.model.document.version)throw new A("datacontroller-init-document-not-empty",this);let i={};if(typeof e=="string"?i.main=e:i=e,!this._checkIfRootsExists(Object.keys(i)))throw new A("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},n=>{for(const r of Object.keys(i)){const o=this.model.document.getRoot(r);n.insert(this.parse(i[r],o),o,0)}}),Promise.resolve()}set(e,i={}){let n={};if(typeof e=="string"?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new A("datacontroller-set-non-existent-root",this);this.model.enqueueChange(i.batchType||{},r=>{r.setSelection(null),r.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const o of Object.keys(n)){const l=this.model.document.getRoot(o);r.remove(r.createRangeIn(l)),r.insert(this.parse(n[o],l),l,0)}})}parse(e,i="$root"){const n=this.processor.toView(e);return this.toModel(n,i)}toModel(e,i="$root"){return this.model.change(n=>this.upcastDispatcher.convert(e,n,i))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const i of e)if(!this.model.document.getRoot(i))return!1;return!0}}function m9(s){const t=[],e=s.root.document;if(!e)return new Map;const i=G._createIn(s);for(const n of e.model.markers){const r=n.getRange(),o=r.isCollapsed,l=r.start.isEqual(i.start)||r.end.isEqual(i.end);if(o&&l)t.push([n.name,r]);else{const a=i.getIntersection(r);a&&t.push([n.name,a])}}return t.sort(([n,r],[o,l])=>{if(r.end.compareWith(l.start)!=="after")return 1;if(r.start.compareWith(l.end)!=="before")return-1;switch(r.start.compareWith(l.start)){case"before":return 1;case"after":return-1;default:switch(r.end.compareWith(l.end)){case"before":return 1;case"after":return-1;default:return o.localeCompare(n)}}}),new Map(t)}class g9{constructor(t,e){p(this,"_helpers",new Map);p(this,"_downcast");p(this,"_upcast");this._downcast=ut(t),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=ut(e),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(t,e){const i=this._downcast.includes(e);if(!this._upcast.includes(e)&&!i)throw new A("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:t,dispatchers:[e],isDowncast:i})}for(t){if(!this._helpers.has(t))throw new A("conversion-for-unknown-group",this);return this._helpers.get(t)}elementToElement(t){this.for("downcast").elementToElement(t);for(const{model:e,view:i}of Qw(t))this.for("upcast").elementToElement({model:e,view:i,converterPriority:t.converterPriority})}attributeToElement(t){this.for("downcast").attributeToElement(t);for(const{model:e,view:i}of Qw(t))this.for("upcast").elementToAttribute({view:i,model:e,converterPriority:t.converterPriority})}attributeToAttribute(t){this.for("downcast").attributeToAttribute(t);for(const{model:e,view:i}of Qw(t))this.for("upcast").attributeToAttribute({view:i,model:e})}_createConversionHelpers({name:t,dispatchers:e,isDowncast:i}){if(this._helpers.has(t))throw new A("conversion-group-exists",this);const n=i?new JD(e):new IN(e);this._helpers.set(t,n)}}function*Qw(s){if(s.model.values)for(const t of s.model.values){const e={key:s.model.key,value:t},i=s.view[t],n=s.upcastAlso?s.upcastAlso[t]:void 0;yield*XS(e,i,n)}else yield*XS(s.model,s.view,s.upcastAlso)}function*XS(s,t,e){if(yield{model:s,view:t},e)for(const i of ut(e))yield{model:s,view:i}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Fn{constructor(t){p(this,"baseVersion");p(this,"isDocumentOperation");p(this,"batch");this.baseVersion=t,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}function Vx(s,t){const e=a6(t),i=e.reduce((o,l)=>o+l.offsetSize,0),n=s.parent;bh(s);const r=s.index;return n._insertChild(r,e),wh(n,r+e.length),wh(n,r),new G(s,s.getShiftedBy(i))}function l6(s){if(!s.isFlat)throw new A("operation-utils-remove-range-not-flat",this);const t=s.start.parent;bh(s.start),bh(s.end);const e=t._removeChildren(s.start.index,s.end.index-s.start.index);return wh(t,s.start.index),e}function ph(s,t){if(!s.isFlat)throw new A("operation-utils-move-range-not-flat",this);const e=l6(s);return t=t._getTransformedByDeletion(s.start,s.end.offset-s.start.offset),Vx(t,e)}function p9(s,t,e){bh(s.start),bh(s.end);for(const i of s.getItems({shallow:!0})){const n=i.is("$textProxy")?i.textNode:i;e!==null?n._setAttribute(t,e):n._removeAttribute(t),wh(n.parent,n.index)}wh(s.end.parent,s.end.index)}function a6(s){const t=[];function e(i){if(typeof i=="string")t.push(new Qt(i));else if(i instanceof Is)t.push(new Qt(i.data,i.getAttributes()));else if(i instanceof Ml)t.push(i);else if(Dn(i))for(const n of i)e(n)}e(s);for(let i=1;i<t.length;i++){const n=t[i],r=t[i-1];n instanceof Qt&&r instanceof Qt&&c6(n,r)&&(t.splice(i-1,2,new Qt(r.data+n.data,r.getAttributes())),i--)}return t}function wh(s,t){const e=s.getChild(t-1),i=s.getChild(t);if(e&&i&&e.is("$text")&&i.is("$text")&&c6(e,i)){const n=new Qt(e.data+i.data,e.getAttributes());s._removeChildren(t-1,2),s._insertChild(t-1,n)}}function bh(s){const t=s.textNode,e=s.parent;if(t){const i=s.offset-t.startOffset,n=t.index;e._removeChildren(n,1);const r=new Qt(t.data.substr(0,i),t.getAttributes()),o=new Qt(t.data.substr(i),t.getAttributes());e._insertChild(n,[r,o])}}function c6(s,t){const e=s.getAttributes(),i=t.getAttributes();for(const n of e){if(n[1]!==t.getAttribute(n[0]))return!1;i.next()}return i.next().done}class ot extends Fn{constructor(e,i,n,r){super(r);p(this,"sourcePosition");p(this,"howMany");p(this,"targetPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=i,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[G._createFromPositionAndShift(this.sourcePosition,this.howMany),G._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new ot(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new ot(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,i=this.targetPosition.parent,n=this.sourcePosition.offset,r=this.targetPosition.offset;if(n+this.howMany>e.maxOffset)throw new A("move-operation-nodes-do-not-exist",this);if(e===i&&n<r&&r<n+this.howMany)throw new A("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&Di(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=n&&this.targetPosition.path[o]<n+this.howMany)throw new A("move-operation-node-into-itself",this)}}_execute(){ph(G._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,i){const n=te.fromJSON(e.sourcePosition,i),r=te.fromJSON(e.targetPosition,i);return new this(n,e.howMany,r,e.baseVersion)}}class xi extends Fn{constructor(e,i,n){super(n);p(this,"position");p(this,"nodes");p(this,"shouldReceiveAttributes");this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new Yu(a6(i)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new Yu([...this.nodes].map(n=>n._clone(!0))),i=new xi(this.position,e,this.baseVersion);return i.shouldReceiveAttributes=this.shouldReceiveAttributes,i}getReversed(){const e=this.position.root.document.graveyard,i=new te(e,[0]);return new ot(this.position,this.nodes.maxOffset,i,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new A("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new Yu([...e].map(i=>i._clone(!0))),Vx(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,i){const n=[];for(const o of e.nodes)o.name?n.push(Vt.fromJSON(o)):n.push(Qt.fromJSON(o));const r=new xi(te.fromJSON(e.position,i),n,e.baseVersion);return r.shouldReceiveAttributes=e.shouldReceiveAttributes,r}}class wt extends Fn{constructor(e,i,n,r,o){super(o);p(this,"splitPosition");p(this,"howMany");p(this,"insertionPosition");p(this,"graveyardPosition");this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=i,this.insertionPosition=n,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new te(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new G(this.splitPosition,e)}get affectedSelectable(){const e=[G._createFromPositionAndShift(this.splitPosition,0),G._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(G._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new wt(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,i=new te(e,[0]);return new Ut(this.moveTargetPosition,this.howMany,this.splitPosition,i,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,i=this.splitPosition.offset;if(!e||e.maxOffset<i)throw new A("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new A("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new A("split-operation-graveyard-position-invalid",this)}else throw new A("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)ph(G._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const n=e._clone();Vx(this.insertionPosition,n)}const i=new G(te._createAt(e,this.splitPosition.offset),te._createAt(e,e.maxOffset));ph(i,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const i=e.path.slice(0,-1);return i[i.length-1]++,new te(e.root,i,"toPrevious")}static fromJSON(e,i){const n=te.fromJSON(e.splitPosition,i),r=te.fromJSON(e.insertionPosition,i),o=e.graveyardPosition?te.fromJSON(e.graveyardPosition,i):null;return new this(n,e.howMany,r,o,e.baseVersion)}}class Ut extends Fn{constructor(e,i,n,r,o){super(o);p(this,"sourcePosition");p(this,"howMany");p(this,"targetPosition");p(this,"graveyardPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=i,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new te(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new G(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[G._createOn(e),G._createFromPositionAndShift(this.targetPosition,0),G._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Ut(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),i=this.sourcePosition.path.slice(0,-1),n=new te(this.sourcePosition.root,i)._getTransformedByMergeOperation(this);return new wt(e,this.howMany,n,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,i=this.targetPosition.parent;if(e.parent)if(i.parent){if(this.howMany!=e.maxOffset)throw new A("merge-operation-how-many-invalid",this)}else throw new A("merge-operation-target-position-invalid",this);else throw new A("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,i=G._createIn(e);ph(i,this.targetPosition),ph(G._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,i){const n=te.fromJSON(e.sourcePosition,i),r=te.fromJSON(e.targetPosition,i),o=te.fromJSON(e.graveyardPosition,i);return new this(n,e.howMany,r,o,e.baseVersion)}}class en extends Fn{constructor(e,i,n,r,o,l){super(l);p(this,"name");p(this,"oldRange");p(this,"newRange");p(this,"affectsData");p(this,"_markers");this.name=e,this.oldRange=i?i.clone():null,this.newRange=n?n.clone():null,this.affectsData=o,this._markers=r}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new en(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new en(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,i){return new en(e.name,e.oldRange?G.fromJSON(e.oldRange,i):null,e.newRange?G.fromJSON(e.newRange,i):null,i.model.markers,e.affectsData,e.baseVersion)}}class Gt extends Fn{constructor(e,i,n,r,o){super(o);p(this,"range");p(this,"key");p(this,"oldValue");p(this,"newValue");this.range=e.clone(),this.key=i,this.oldValue=n===void 0?null:n,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new Gt(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Gt(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new A("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!xl(e.getAttribute(this.key),this.oldValue))throw new A("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new A("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){xl(this.oldValue,this.newValue)||p9(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,i){return new Gt(G.fromJSON(e.range,i),e.key,e.oldValue,e.newValue,e.baseVersion)}}class ai extends Fn{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new ai(this.baseVersion)}getReversed(){return new ai(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class On extends Fn{constructor(e,i,n,r){super(r);p(this,"position");p(this,"oldName");p(this,"newName");this.position=e,this.position.stickiness="toNext",this.oldName=i,this.newName=n}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new On(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new On(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof Vt){if(e.name!==this.oldName)throw new A("rename-operation-wrong-name",this)}else throw new A("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,i){return new On(te.fromJSON(e.position,i),e.oldName,e.newName,e.baseVersion)}}class Ar extends Fn{constructor(e,i,n,r,o){super(o);p(this,"root");p(this,"key");p(this,"oldValue");p(this,"newValue");this.root=e,this.key=i,this.oldValue=n===void 0?null:n,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Ar(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Ar(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new A("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new A("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new A("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,i){if(!i.getRoot(e.root))throw new A("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new Ar(i.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class ir extends Fn{constructor(e,i,n,r,o){super(o);p(this,"rootName");p(this,"elementName");p(this,"isAdd");p(this,"_document");if(this.rootName=e,this.elementName=i,this.isAdd=n,this._document=r,!this._document.getRoot(this.rootName)){const l=this._document.createRoot(this.elementName,this.rootName);l._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new ir(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new ir(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,i){return new ir(e.rootName,e.elementName,e.isAdd,i,e.baseVersion)}}const ms={};ms[Gt.className]=Gt;ms[xi.className]=xi;ms[en.className]=en;ms[ot.className]=ot;ms[ai.className]=ai;ms[Fn.className]=Fn;ms[On.className]=On;ms[Ar.className]=Ar;ms[ir.className]=ir;ms[wt.className]=wt;ms[Ut.className]=Ut;class w9{static fromJSON(t,e){return ms[t.__className].fromJSON(t,e)}}const v1=new Map;function Je(s,t,e){let i=v1.get(s);i||(i=new Map,v1.set(s,i)),i.set(t,e)}function b9(s,t){const e=v1.get(s);return e&&e.has(t)?e.get(t):O9}function O9(s){return[s]}function jS(s,t,e={}){const i=b9(s.constructor,t.constructor);try{return s=s.clone(),i(s,t,e)}catch(n){throw n}}function x9(s,t,e){s=s.slice(),t=t.slice();const i=new y9(e.document,e.useRelations,e.forceWeakRemove);i.setOriginalOperations(s),i.setOriginalOperations(t);const n=i.originalOperations;if(s.length==0||t.length==0)return{operationsA:s,operationsB:t,originalOperations:n};const r=new WeakMap;for(const a of s)r.set(a,0);const o={nextBaseVersionA:s[s.length-1].baseVersion+1,nextBaseVersionB:t[t.length-1].baseVersion+1,originalOperationsACount:s.length,originalOperationsBCount:t.length};let l=0;for(;l<s.length;){const a=s[l],c=r.get(a);if(c==t.length){l++;continue}const h=t[c],f=jS(a,h,i.getContext(a,h,!0)),m=jS(h,a,i.getContext(h,a,!1));i.updateRelation(a,h),i.setOriginalOperations(f,a),i.setOriginalOperations(m,h);for(const w of f)r.set(w,c+m.length);s.splice(l,1,...f),t.splice(c,1,...m)}return YS(s),YS(t),GS(s,o.nextBaseVersionB),GS(t,o.nextBaseVersionA),{operationsA:s,operationsB:t,originalOperations:n}}class y9{constructor(t,e,i=!1){p(this,"originalOperations");p(this,"_history");p(this,"_useRelations");p(this,"_forceWeakRemove");p(this,"_relations");this.originalOperations=new Map,this._history=t.history,this._useRelations=e,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(t,e=null){const i=e?this.originalOperations.get(e):null;for(const n of t)this.originalOperations.set(n,i||n)}updateRelation(t,e){if(t instanceof ot)e instanceof Ut?t.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(t.targetPosition)?this._setRelation(t,e,"insertAtSource"):t.targetPosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"insertBetween"):t.targetPosition.isAfter(e.sourcePosition)&&this._setRelation(t,e,"moveTargetAfter"):e instanceof ot&&(t.targetPosition.isEqual(e.sourcePosition)||t.targetPosition.isBefore(e.sourcePosition)?this._setRelation(t,e,"insertBefore"):this._setRelation(t,e,"insertAfter"));else if(t instanceof wt){if(e instanceof Ut)t.splitPosition.isBefore(e.sourcePosition)&&this._setRelation(t,e,"splitBefore");else if(e instanceof ot)if(t.splitPosition.isEqual(e.sourcePosition)||t.splitPosition.isBefore(e.sourcePosition))this._setRelation(t,e,"splitBefore");else{const i=G._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(t.splitPosition)){const n=i.end.offset-t.splitPosition.offset,r=t.splitPosition.offset-i.start.offset;this._setRelation(t,e,{howMany:n,offset:r})}}}else if(t instanceof Ut)e instanceof Ut?(t.targetPosition.isEqual(e.sourcePosition)||this._setRelation(t,e,"mergeTargetNotMoved"),t.sourcePosition.isEqual(e.targetPosition)&&this._setRelation(t,e,"mergeSourceNotMoved"),t.sourcePosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeSameElement")):e instanceof wt?t.sourcePosition.isEqual(e.splitPosition)&&this._setRelation(t,e,"splitAtSource"):e instanceof ot&&e.howMany>0&&(t.sourcePosition.isEqual(e.sourcePosition.getShiftedBy(e.howMany))&&this._setRelation(t,e,"mergeSourceAffected"),t.targetPosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeTargetWasBefore"));else if(t instanceof en){const i=t.newRange;if(!i)return;if(e instanceof Ut){const n=i.start.isEqual(e.targetPosition),r=i.start.isEqual(e.deletionPosition),o=i.end.isEqual(e.deletionPosition),l=i.end.isEqual(e.sourcePosition);(n||r||o||l)&&this._setRelation(t,e,{wasInLeftElement:n,wasStartBeforeMergedElement:r,wasEndBeforeMergedElement:o,wasInRightElement:l})}}}getContext(t,e,i){return{aIsStrong:i,aWasUndone:this._wasUndone(t),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(t,e):null,baRelation:this._useRelations?this._getRelation(e,t):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(t){const e=this.originalOperations.get(t);return e.wasUndone||this._history.isUndoneOperation(e)}_getRelation(t,e){const i=this.originalOperations.get(e),n=this._history.getUndoneOperation(i);if(!n)return null;const r=this.originalOperations.get(t),o=this._relations.get(r);return o&&o.get(n)||null}_setRelation(t,e,i){const n=this.originalOperations.get(t),r=this.originalOperations.get(e);let o=this._relations.get(n);o||(o=new Map,this._relations.set(n,o)),o.set(r,i)}}function GS(s,t){for(const e of s)e.baseVersion=t++}function YS(s){const t=new Map;for(let e=0;e<s.length;e++){const i=s[e];i instanceof en&&(i.baseVersion!==-1?t.set(i.name,{op:i,ranges:i.newRange?[i.newRange]:[]}):(i.newRange&&t.get(i.name).ranges.push(i.newRange),s.splice(e,1),e--))}for(const{op:e,ranges:i}of t.values())i.length?e.newRange=G._createFromRanges(i):e.newRange=null}Je(Gt,Gt,(s,t,e)=>{if(s.key===t.key&&s.range.start.hasSameParentAs(t.range.start)){const i=s.range.getDifference(t.range).map(r=>new Gt(r,s.key,s.oldValue,s.newValue,0)),n=s.range.getIntersection(t.range);return n&&e.aIsStrong&&i.push(new Gt(n,t.key,t.newValue,s.newValue,0)),i.length==0?[new ai(0)]:i}else return[s]});Je(Gt,xi,(s,t)=>{if(s.range.start.hasSameParentAs(t.position)&&s.range.containsPosition(t.position)){const i=s.range._getTransformedByInsertion(t.position,t.howMany,!t.shouldReceiveAttributes).map(n=>new Gt(n,s.key,s.oldValue,s.newValue,s.baseVersion));if(t.shouldReceiveAttributes){const n=u6(t,s.key,s.oldValue);n&&i.unshift(n)}return i}return s.range=s.range._getTransformedByInsertion(t.position,t.howMany,!1)[0],[s]});function u6(s,t,e){const n=s.nodes.getNode(0).getAttribute(t);if(n==e)return null;const r=new G(s.position,s.position.getShiftedBy(s.howMany));return new Gt(r,t,n,e,0)}Je(Gt,Ut,(s,t)=>{const e=[];s.range.start.hasSameParentAs(t.deletionPosition)&&(s.range.containsPosition(t.deletionPosition)||s.range.start.isEqual(t.deletionPosition))&&e.push(G._createFromPositionAndShift(t.graveyardPosition,1));const i=s.range._getTransformedByMergeOperation(t);return i.isCollapsed||e.push(i),e.map(n=>new Gt(n,s.key,s.oldValue,s.newValue,s.baseVersion))});Je(Gt,ot,(s,t)=>v9(s.range,t).map(i=>new Gt(i,s.key,s.oldValue,s.newValue,s.baseVersion)));function v9(s,t){const e=G._createFromPositionAndShift(t.sourcePosition,t.howMany);let i=null,n=[];e.containsRange(s,!0)?i=s:s.start.hasSameParentAs(e.start)?(n=s.getDifference(e),i=s.getIntersection(e)):n=[s];const r=[];for(let o of n){o=o._getTransformedByDeletion(t.sourcePosition,t.howMany);const l=t.getMovedRangeStart(),a=o.start.hasSameParentAs(l),c=o._getTransformedByInsertion(l,t.howMany,a);r.push(...c)}return i&&r.push(i._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]),r}Je(Gt,wt,(s,t)=>{if(s.range.end.isEqual(t.insertionPosition))return t.graveyardPosition||s.range.end.offset++,[s];if(s.range.start.hasSameParentAs(t.splitPosition)&&s.range.containsPosition(t.splitPosition)){const e=s.clone();return e.range=new G(t.moveTargetPosition.clone(),s.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),s.range.end=t.splitPosition.clone(),s.range.end.stickiness="toPrevious",[s,e]}return s.range=s.range._getTransformedBySplitOperation(t),[s]});Je(xi,Gt,(s,t)=>{const e=[s];if(s.shouldReceiveAttributes&&s.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(s.position)){const i=u6(s,t.key,t.newValue);i&&e.push(i)}return e});Je(xi,xi,(s,t,e)=>s.position.isEqual(t.position)&&e.aIsStrong?[s]:(s.position=s.position._getTransformedByInsertOperation(t),[s]));Je(xi,ot,(s,t)=>(s.position=s.position._getTransformedByMoveOperation(t),[s]));Je(xi,wt,(s,t)=>(s.position=s.position._getTransformedBySplitOperation(t),[s]));Je(xi,Ut,(s,t)=>(s.position=s.position._getTransformedByMergeOperation(t),[s]));Je(en,xi,(s,t)=>(s.oldRange&&(s.oldRange=s.oldRange._getTransformedByInsertOperation(t)[0]),s.newRange&&(s.newRange=s.newRange._getTransformedByInsertOperation(t)[0]),[s]));Je(en,en,(s,t,e)=>{if(s.name==t.name)if(e.aIsStrong)s.oldRange=t.newRange?t.newRange.clone():null;else return[new ai(0)];return[s]});Je(en,Ut,(s,t)=>(s.oldRange&&(s.oldRange=s.oldRange._getTransformedByMergeOperation(t)),s.newRange&&(s.newRange=s.newRange._getTransformedByMergeOperation(t)),[s]));Je(en,ot,(s,t)=>{const e=[s];if(s.oldRange&&(s.oldRange=G._createFromRanges(s.oldRange._getTransformedByMoveOperation(t))),s.newRange){const i=s.newRange._getTransformedByMoveOperation(t);s.newRange=i[0];for(let n=1;n<i.length;n++){const r=s.clone();r.oldRange=null,r.newRange=i[n],r.baseVersion=-1,e.push(r)}}return e});Je(en,wt,(s,t,e)=>{if(s.oldRange&&(s.oldRange=s.oldRange._getTransformedBySplitOperation(t)),s.newRange){if(e.abRelation){const i=s.newRange._getTransformedBySplitOperation(t);return s.newRange.start.isEqual(t.splitPosition)?e.abRelation.wasStartBeforeMergedElement?s.newRange.start=te._createAt(t.insertionPosition):e.abRelation.wasInLeftElement?s.newRange.start=te._createAt(s.newRange.start):s.newRange.start=te._createAt(t.moveTargetPosition):s.newRange.start=i.start,s.newRange.end.isEqual(t.splitPosition)?s.newRange.end.isEqual(t.splitPosition)&&e.abRelation.wasEndBeforeMergedElement?s.newRange.end=te._createAt(t.insertionPosition):e.abRelation.wasInRightElement?s.newRange.end=te._createAt(t.moveTargetPosition):s.newRange.end=te._createAt(s.newRange.end):s.newRange.end=i.end,[s]}s.newRange=s.newRange._getTransformedBySplitOperation(t)}return[s]});Je(Ut,xi,(s,t)=>(s.sourcePosition.hasSameParentAs(t.position)&&(s.howMany+=t.howMany),s.sourcePosition=s.sourcePosition._getTransformedByInsertOperation(t),s.targetPosition=s.targetPosition._getTransformedByInsertOperation(t),[s]));Je(Ut,Ut,(s,t,e)=>{if(s.sourcePosition.isEqual(t.sourcePosition)&&s.targetPosition.isEqual(t.targetPosition))if(e.bWasUndone){const i=t.graveyardPosition.path.slice();return i.push(0),s.sourcePosition=new te(t.graveyardPosition.root,i),s.howMany=0,[s]}else return[new ai(0)];if(s.sourcePosition.isEqual(t.sourcePosition)&&!s.targetPosition.isEqual(t.targetPosition)&&!e.bWasUndone&&e.abRelation!="splitAtSource"){const i=s.targetPosition.root.rootName=="$graveyard",n=t.targetPosition.root.rootName=="$graveyard";if(n&&!i||!(i&&!n)&&e.aIsStrong){const a=t.targetPosition._getTransformedByMergeOperation(t),c=s.targetPosition._getTransformedByMergeOperation(t);return[new ot(a,s.howMany,c,0)]}else return[new ai(0)]}return s.sourcePosition.hasSameParentAs(t.targetPosition)&&(s.howMany+=t.howMany),s.sourcePosition=s.sourcePosition._getTransformedByMergeOperation(t),s.targetPosition=s.targetPosition._getTransformedByMergeOperation(t),(!s.graveyardPosition.isEqual(t.graveyardPosition)||!e.aIsStrong)&&(s.graveyardPosition=s.graveyardPosition._getTransformedByMergeOperation(t)),[s]});Je(Ut,ot,(s,t,e)=>{const i=G._createFromPositionAndShift(t.sourcePosition,t.howMany);return t.type=="remove"&&!e.bWasUndone&&s.deletionPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(s.sourcePosition)?[new ai(0)]:(t.sourcePosition.getShiftedBy(t.howMany).isEqual(s.sourcePosition)?s.sourcePosition.stickiness="toNone":t.targetPosition.isEqual(s.sourcePosition)&&e.abRelation=="mergeSourceAffected"?s.sourcePosition.stickiness="toNext":t.sourcePosition.isEqual(s.targetPosition)?(s.targetPosition.stickiness="toNone",s.howMany-=t.howMany):t.targetPosition.isEqual(s.targetPosition)&&e.abRelation=="mergeTargetWasBefore"?(s.targetPosition.stickiness="toPrevious",s.howMany+=t.howMany):(s.sourcePosition.hasSameParentAs(t.targetPosition)&&(s.howMany+=t.howMany),s.sourcePosition.hasSameParentAs(t.sourcePosition)&&(s.howMany-=t.howMany)),s.sourcePosition=s.sourcePosition._getTransformedByMoveOperation(t),s.targetPosition=s.targetPosition._getTransformedByMoveOperation(t),s.sourcePosition.stickiness="toPrevious",s.targetPosition.stickiness="toNext",s.graveyardPosition.isEqual(t.targetPosition)||(s.graveyardPosition=s.graveyardPosition._getTransformedByMoveOperation(t)),[s])});Je(Ut,wt,(s,t,e)=>{if(t.graveyardPosition&&(s.graveyardPosition=s.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),s.deletionPosition.isEqual(t.graveyardPosition)&&(s.howMany=t.howMany)),s.targetPosition.isEqual(t.splitPosition)&&(t.graveyardPosition&&s.deletionPosition.isEqual(t.graveyardPosition)||e.abRelation=="mergeTargetNotMoved"))return s.sourcePosition=s.sourcePosition._getTransformedBySplitOperation(t),[s];if(s.sourcePosition.isEqual(t.splitPosition)){if(e.abRelation=="mergeSourceNotMoved")return s.howMany=0,s.targetPosition=s.targetPosition._getTransformedBySplitOperation(t),[s];if(e.abRelation=="mergeSameElement"||s.sourcePosition.offset>0)return s.sourcePosition=t.moveTargetPosition.clone(),s.targetPosition=s.targetPosition._getTransformedBySplitOperation(t),[s]}return s.sourcePosition.hasSameParentAs(t.splitPosition)&&(s.howMany=t.splitPosition.offset),s.sourcePosition=s.sourcePosition._getTransformedBySplitOperation(t),s.targetPosition=s.targetPosition._getTransformedBySplitOperation(t),[s]});Je(ot,xi,(s,t)=>{const i=G._createFromPositionAndShift(s.sourcePosition,s.howMany)._getTransformedByInsertOperation(t,!1)[0];return s.sourcePosition=i.start,s.howMany=i.end.offset-i.start.offset,s.targetPosition.isEqual(t.position)||(s.targetPosition=s.targetPosition._getTransformedByInsertOperation(t)),[s]});Je(ot,ot,(s,t,e)=>{const i=G._createFromPositionAndShift(s.sourcePosition,s.howMany),n=G._createFromPositionAndShift(t.sourcePosition,t.howMany);let r=e.aIsStrong,o=!e.aIsStrong;e.abRelation=="insertBefore"||e.baRelation=="insertAfter"?o=!0:(e.abRelation=="insertAfter"||e.baRelation=="insertBefore")&&(o=!1);let l;if(s.targetPosition.isEqual(t.targetPosition)&&o?l=s.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):l=s.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),KS(s,t)&&KS(t,s))return[t.getReversed()];if(i.containsPosition(t.targetPosition)&&i.containsRange(n,!0))return i.start=i.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),i.end=i.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),Fa([i],l);if(n.containsPosition(s.targetPosition)&&n.containsRange(i,!0))return i.start=i.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),i.end=i.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),Fa([i],l);const h=Di(s.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if(h=="prefix"||h=="extension")return i.start=i.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),i.end=i.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),Fa([i],l);s.type=="remove"&&t.type!="remove"&&!e.aWasUndone&&!e.forceWeakRemove?r=!0:s.type!="remove"&&t.type=="remove"&&!e.bWasUndone&&!e.forceWeakRemove&&(r=!1);const f=[],m=i.getDifference(n);for(const O of m){O.start=O.start._getTransformedByDeletion(t.sourcePosition,t.howMany),O.end=O.end._getTransformedByDeletion(t.sourcePosition,t.howMany);const v=Di(O.start.getParentPath(),t.getMovedRangeStart().getParentPath())=="same",k=O._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,v);f.push(...k)}const w=i.getIntersection(n);return w!==null&&r&&(w.start=w.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),w.end=w.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),f.length===0?f.push(w):f.length==1?n.start.isBefore(i.start)||n.start.isEqual(i.start)?f.unshift(w):f.push(w):f.splice(1,0,w)),f.length===0?[new ai(s.baseVersion)]:Fa(f,l)});Je(ot,wt,(s,t,e)=>{let i=s.targetPosition.clone();(!s.targetPosition.isEqual(t.insertionPosition)||!t.graveyardPosition||e.abRelation=="moveTargetAfter")&&(i=s.targetPosition._getTransformedBySplitOperation(t));const n=G._createFromPositionAndShift(s.sourcePosition,s.howMany);if(n.end.isEqual(t.insertionPosition))return t.graveyardPosition||s.howMany++,s.targetPosition=i,[s];if(n.start.hasSameParentAs(t.splitPosition)&&n.containsPosition(t.splitPosition)){let l=new G(t.splitPosition,n.end);l=l._getTransformedBySplitOperation(t);const a=[new G(n.start,t.splitPosition),l];return Fa(a,i)}s.targetPosition.isEqual(t.splitPosition)&&e.abRelation=="insertAtSource"&&(i=t.moveTargetPosition),s.targetPosition.isEqual(t.insertionPosition)&&e.abRelation=="insertBetween"&&(i=s.targetPosition);const o=[n._getTransformedBySplitOperation(t)];if(t.graveyardPosition){const l=n.start.isEqual(t.graveyardPosition)||n.containsPosition(t.graveyardPosition);s.howMany>1&&l&&!e.aWasUndone&&o.push(G._createFromPositionAndShift(t.insertionPosition,1))}return Fa(o,i)});Je(ot,Ut,(s,t,e)=>{const i=G._createFromPositionAndShift(s.sourcePosition,s.howMany);if(t.deletionPosition.hasSameParentAs(s.sourcePosition)&&i.containsPosition(t.sourcePosition)){if(s.type=="remove"&&!e.forceWeakRemove){if(!e.aWasUndone){const o=[];let l=t.graveyardPosition.clone(),a=t.targetPosition._getTransformedByMergeOperation(t);const c=s.targetPosition.getTransformedByOperation(t);s.howMany>1&&(o.push(new ot(s.sourcePosition,s.howMany-1,c,0)),l=l._getTransformedByMove(s.sourcePosition,c,s.howMany-1),a=a._getTransformedByMove(s.sourcePosition,c,s.howMany-1));const h=t.deletionPosition._getCombined(s.sourcePosition,c),f=new ot(l,1,h,0),m=f.getMovedRangeStart().path.slice();m.push(0);const w=new te(f.targetPosition.root,m);a=a._getTransformedByMove(l,h,1);const O=new ot(a,t.howMany,w,0);return o.push(f),o.push(O),o}}else if(s.howMany==1)return e.bWasUndone?(s.sourcePosition=t.graveyardPosition.clone(),s.targetPosition=s.targetPosition._getTransformedByMergeOperation(t),[s]):[new ai(0)]}const r=G._createFromPositionAndShift(s.sourcePosition,s.howMany)._getTransformedByMergeOperation(t);return s.sourcePosition=r.start,s.howMany=r.end.offset-r.start.offset,s.targetPosition=s.targetPosition._getTransformedByMergeOperation(t),[s]});Je(On,xi,(s,t)=>(s.position=s.position._getTransformedByInsertOperation(t),[s]));Je(On,Ut,(s,t)=>s.position.isEqual(t.deletionPosition)?(s.position=t.graveyardPosition.clone(),s.position.stickiness="toNext",[s]):(s.position=s.position._getTransformedByMergeOperation(t),[s]));Je(On,ot,(s,t)=>(s.position=s.position._getTransformedByMoveOperation(t),[s]));Je(On,On,(s,t,e)=>{if(s.position.isEqual(t.position))if(e.aIsStrong)s.oldName=t.newName;else return[new ai(0)];return[s]});Je(On,wt,(s,t)=>{const e=s.position.path,i=t.splitPosition.getParentPath();if(Di(e,i)=="same"&&!t.graveyardPosition){const n=new On(s.position.getShiftedBy(1),s.oldName,s.newName,0);return[s,n]}return s.position=s.position._getTransformedBySplitOperation(t),[s]});Je(Ar,Ar,(s,t,e)=>{if(s.root===t.root&&s.key===t.key){if(!e.aIsStrong||s.newValue===t.newValue)return[new ai(0)];s.oldValue=t.newValue}return[s]});Je(ir,ir,(s,t)=>s.rootName===t.rootName&&s.isAdd===t.isAdd?[new ai(0)]:[s]);Je(wt,xi,(s,t)=>(s.splitPosition.hasSameParentAs(t.position)&&s.splitPosition.offset<t.position.offset&&(s.howMany+=t.howMany),s.splitPosition=s.splitPosition._getTransformedByInsertOperation(t),s.insertionPosition=s.insertionPosition._getTransformedByInsertOperation(t),[s]));Je(wt,Ut,(s,t,e)=>{if(!s.graveyardPosition&&!e.bWasUndone&&s.splitPosition.hasSameParentAs(t.sourcePosition)){const i=t.graveyardPosition.path.slice();i.push(0);const n=new te(t.graveyardPosition.root,i),r=wt.getInsertionPosition(new te(t.graveyardPosition.root,i)),o=new wt(n,0,r,null,0);return s.splitPosition=s.splitPosition._getTransformedByMergeOperation(t),s.insertionPosition=wt.getInsertionPosition(s.splitPosition),s.graveyardPosition=o.insertionPosition.clone(),s.graveyardPosition.stickiness="toNext",[o,s]}return s.splitPosition.hasSameParentAs(t.deletionPosition)&&!s.splitPosition.isAfter(t.deletionPosition)&&s.howMany--,s.splitPosition.hasSameParentAs(t.targetPosition)&&(s.howMany+=t.howMany),s.splitPosition=s.splitPosition._getTransformedByMergeOperation(t),s.insertionPosition=wt.getInsertionPosition(s.splitPosition),s.graveyardPosition&&(s.graveyardPosition=s.graveyardPosition._getTransformedByMergeOperation(t)),[s]});Je(wt,ot,(s,t,e)=>{const i=G._createFromPositionAndShift(t.sourcePosition,t.howMany);if(s.graveyardPosition){const r=i.start.isEqual(s.graveyardPosition)||i.containsPosition(s.graveyardPosition);if(!e.bWasUndone&&r){const o=s.splitPosition._getTransformedByMoveOperation(t),l=s.graveyardPosition._getTransformedByMoveOperation(t),a=l.path.slice();a.push(0);const c=new te(l.root,a);return[new ot(o,s.howMany,c,0)]}s.graveyardPosition=s.graveyardPosition._getTransformedByMoveOperation(t)}const n=s.splitPosition.isEqual(t.targetPosition);if(n&&(e.baRelation=="insertAtSource"||e.abRelation=="splitBefore"))return s.howMany+=t.howMany,s.splitPosition=s.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),s.insertionPosition=wt.getInsertionPosition(s.splitPosition),[s];if(n&&e.abRelation&&e.abRelation.howMany){const{howMany:r,offset:o}=e.abRelation;return s.howMany+=r,s.splitPosition=s.splitPosition.getShiftedBy(o),[s]}if(s.splitPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(s.splitPosition)){const r=t.howMany-(s.splitPosition.offset-t.sourcePosition.offset);return s.howMany-=r,s.splitPosition.hasSameParentAs(t.targetPosition)&&s.splitPosition.offset<t.targetPosition.offset&&(s.howMany+=t.howMany),s.splitPosition=t.sourcePosition.clone(),s.insertionPosition=wt.getInsertionPosition(s.splitPosition),[s]}return t.sourcePosition.isEqual(t.targetPosition)||(s.splitPosition.hasSameParentAs(t.sourcePosition)&&s.splitPosition.offset<=t.sourcePosition.offset&&(s.howMany-=t.howMany),s.splitPosition.hasSameParentAs(t.targetPosition)&&s.splitPosition.offset<t.targetPosition.offset&&(s.howMany+=t.howMany)),s.splitPosition.stickiness="toNone",s.splitPosition=s.splitPosition._getTransformedByMoveOperation(t),s.splitPosition.stickiness="toNext",s.graveyardPosition?s.insertionPosition=s.insertionPosition._getTransformedByMoveOperation(t):s.insertionPosition=wt.getInsertionPosition(s.splitPosition),[s]});Je(wt,wt,(s,t,e)=>{if(s.splitPosition.isEqual(t.splitPosition)){if(!s.graveyardPosition&&!t.graveyardPosition)return[new ai(0)];if(s.graveyardPosition&&t.graveyardPosition&&s.graveyardPosition.isEqual(t.graveyardPosition))return[new ai(0)];if(e.abRelation=="splitBefore")return s.howMany=0,s.graveyardPosition=s.graveyardPosition._getTransformedBySplitOperation(t),[s]}if(s.graveyardPosition&&t.graveyardPosition&&s.graveyardPosition.isEqual(t.graveyardPosition)){const i=s.splitPosition.root.rootName=="$graveyard",n=t.splitPosition.root.rootName=="$graveyard";if(n&&!i||!(i&&!n)&&e.aIsStrong){const a=[];return t.howMany&&a.push(new ot(t.moveTargetPosition,t.howMany,t.splitPosition,0)),s.howMany&&a.push(new ot(s.splitPosition,s.howMany,s.moveTargetPosition,0)),a}else return[new ai(0)]}if(s.graveyardPosition&&(s.graveyardPosition=s.graveyardPosition._getTransformedBySplitOperation(t)),s.splitPosition.isEqual(t.insertionPosition)&&e.abRelation=="splitBefore")return s.howMany++,[s];if(t.splitPosition.isEqual(s.insertionPosition)&&e.baRelation=="splitBefore"){const i=t.insertionPosition.path.slice();i.push(0);const n=new te(t.insertionPosition.root,i),r=new ot(s.insertionPosition,1,n,0);return[s,r]}return s.splitPosition.hasSameParentAs(t.splitPosition)&&s.splitPosition.offset<t.splitPosition.offset&&(s.howMany-=t.howMany),s.splitPosition=s.splitPosition._getTransformedBySplitOperation(t),s.insertionPosition=wt.getInsertionPosition(s.splitPosition),[s]});function KS(s,t){return s.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)===null}function Fa(s,t){const e=[];for(let i=0;i<s.length;i++){const n=s[i],r=new ot(n.start,n.end.offset-n.start.offset,t,0);e.push(r);for(let o=i+1;o<s.length;o++)s[o]=s[o]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];t=t._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return e}class qt extends gt(te){constructor(t,e,i="toNone"){if(super(t,e,i),!this.root.is("rootElement"))throw new A("model-liveposition-root-not-rootelement",t);_9.call(this)}detach(){this.stopListening()}toPosition(){return new te(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}qt.prototype.is=function(s){return s==="livePosition"||s==="model:livePosition"||s=="position"||s==="model:position"};function _9(){this.listenTo(this.root.document.model,"applyOperation",(s,t)=>{const e=t[0];e.isDocumentOperation&&k9.call(this,e)},{priority:"low"})}function k9(s){const t=this.getTransformedByOperation(s);if(!this.isEqual(t)){const e=this.toPosition();this.path=t.path,this.root=t.root,this.fire("change",e)}}class ba{constructor(t={}){p(this,"operations");p(this,"isUndoable");p(this,"isLocal");p(this,"isUndo");p(this,"isTyping");typeof t=="string"&&(t=t==="transparent"?{isUndoable:!1}:{},We("batch-constructor-deprecated-string-type"));const{isUndoable:e=!0,isLocal:i=!0,isUndo:n=!1,isTyping:r=!1}=t;this.operations=[],this.isUndoable=e,this.isLocal=i,this.isUndo=n,this.isTyping=r}get type(){return We("batch-type-deprecated"),"default"}get baseVersion(){for(const t of this.operations)if(t.baseVersion!==null)return t.baseVersion;return null}addOperation(t){return t.isDocumentOperation&&(t.batch=this,this.operations.push(t)),t}}const uh=class uh{constructor(t){p(this,"_markerCollection");p(this,"_changesInElement",new Map);p(this,"_elementsSnapshots",new Map);p(this,"_elementChildrenSnapshots",new Map);p(this,"_elementState",new Map);p(this,"_changedMarkers",new Map);p(this,"_changedRoots",new Map);p(this,"_changeCount",0);p(this,"_cachedChanges",null);p(this,"_cachedChangesWithGraveyard",null);p(this,"_refreshedItems",new Set);this._markerCollection=t}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(t){const e=t;switch(e.type){case"insert":{if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const i of e.range.getItems({shallow:!0}))this._isInInsertedElement(i.parent)||this._markAttribute(i);break}case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;const i=this._isInInsertedElement(e.sourcePosition.parent),n=this._isInInsertedElement(e.targetPosition.parent);i||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),n||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);const r=G._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const o of r.getItems({shallow:!0}))this._setElementState(o,"move");break}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);const i=G._createFromPositionAndShift(e.position,1);for(const n of this._markerCollection.getMarkersIntersectingRange(i)){const r=n.getData();this.bufferMarkerChange(n.name,r,r)}this._setElementState(e.position.nodeAfter,"rename");break}case"split":{const i=e.splitPosition.parent;if(!this._isInInsertedElement(i)){this._markRemove(i,e.splitPosition.offset,e.howMany);const n=G._createFromPositionAndShift(e.splitPosition,e.howMany);for(const r of n.getItems({shallow:!0}))this._setElementState(r,"move")}this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&(this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1),this._setElementState(e.graveyardPosition.nodeAfter,"move"));break}case"merge":{const i=e.sourcePosition.parent;this._isInInsertedElement(i.parent)||this._markRemove(i.parent,i.startOffset,1);const n=e.graveyardPosition.parent;this._markInsert(n,e.graveyardPosition.offset,1),this._setElementState(i,"move");const r=e.targetPosition.parent;if(!this._isInInsertedElement(r)){this._markInsert(r,e.targetPosition.offset,i.maxOffset);const o=G._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const l of o.getItems({shallow:!0}))this._setElementState(l,"move")}break}case"detachRoot":case"addRoot":{const i=e.affectedSelectable;if(!i._isLoaded||i.isAttached()==e.isAdd)return;this._bufferRootStateChange(e.rootName,e.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!e.root._isLoaded)return;const i=e.root.rootName;this._bufferRootAttributeChange(i,e.key,e.oldValue,e.newValue);break}}this._cachedChanges=null}bufferMarkerChange(t,e,i){e.range&&e.range.root.is("rootElement")&&!e.range.root._isLoaded&&(e.range=null),i.range&&i.range.root.is("rootElement")&&!i.range.root._isLoaded&&(i.range=null);let n=this._changedMarkers.get(t);n?n.newMarkerData=i:(n={newMarkerData:i,oldMarkerData:e},this._changedMarkers.set(t,n)),n.oldMarkerData.range==null&&i.range==null&&this._changedMarkers.delete(t)}getMarkersToRemove(){const t=[];for(const[e,i]of this._changedMarkers)i.oldMarkerData.range!=null&&t.push({name:e,range:i.oldMarkerData.range});return t}getMarkersToAdd(){const t=[];for(const[e,i]of this._changedMarkers)i.newMarkerData.range!=null&&t.push({name:e,range:i.newMarkerData.range});return t}getChangedMarkers(){return Array.from(this._changedMarkers).map(([t,e])=>({name:t,data:{oldRange:e.oldMarkerData.range,newRange:e.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:t,oldMarkerData:e}of this._changedMarkers.values()){if(t.affectsData!==e.affectsData)return!0;if(t.affectsData){const i=t.range&&!e.range,n=!t.range&&e.range,r=t.range&&e.range&&!t.range.isEqual(e.range);if(i||n||r)return!0}}return!1}getChanges(t={}){if(this._cachedChanges)return t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let e=[];for(const i of this._changesInElement.keys()){const n=this._changesInElement.get(i).sort((h,f)=>h.offset===f.offset?h.type!=f.type?h.type=="remove"?-1:1:0:h.offset<f.offset?-1:1),r=this._elementChildrenSnapshots.get(i),o=eC(i.getChildren()),l=S9(r.length,n);let a=0,c=0;for(const h of l)if(h==="i"){const f=this._getDiffActionForNode(o[a].node,"insert"),m=this._elementsSnapshots.get(o[a].node),w=this._getInsertDiff(i,a,f,o[a],m);e.push(w),a++}else if(h==="r"){const f=this._getDiffActionForNode(r[c].node,"remove"),m=this._getRemoveDiff(i,a,f,r[c]);e.push(m),c++}else if(h==="a"){const f=r[c].attributes,m=o[a].attributes;let w;if(o[a].name=="$text")w=new G(te._createAt(i,a),te._createAt(i,a+1));else{const v=i.offsetToIndex(a);w=new G(te._createAt(i,a),te._createAt(i.getChild(v),0))}const O=this._getAttributesDiff(w,f,m);e.push(...O),a++,c++}else a++,c++}e.sort((i,n)=>i.position.root!=n.position.root?i.position.root.rootName<n.position.root.rootName?-1:1:i.position.isEqual(n.position)?i.changeCount-n.changeCount:i.position.isBefore(n.position)?-1:1);for(let i=1,n=0;i<e.length;i++){const r=e[n],o=e[i],l=r.type=="remove"&&o.type=="remove"&&r.name=="$text"&&o.name=="$text"&&r.position.isEqual(o.position),a=r.type=="insert"&&o.type=="insert"&&r.name=="$text"&&o.name=="$text"&&r.position.parent==o.position.parent&&r.position.offset+r.length==o.position.offset,c=r.type=="attribute"&&o.type=="attribute"&&r.position.parent==o.position.parent&&r.range.isFlat&&o.range.isFlat&&r.position.offset+r.length==o.position.offset&&r.attributeKey==o.attributeKey&&r.attributeOldValue==o.attributeOldValue&&r.attributeNewValue==o.attributeNewValue;l||a||c?(r.length++,c&&(r.range.end=r.range.end.getShiftedBy(1)),e[i]=null):n=i}e=e.filter(i=>i);for(const i of e)delete i.changeCount,i.type=="attribute"&&(delete i.position,delete i.length);return this._changeCount=0,this._cachedChangesWithGraveyard=e,this._cachedChanges=e.filter(C9),t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(t=>{const e={...t};return e.state!==void 0&&delete e.attributes,e})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(t){if(this._isInInsertedElement(t.parent))return;this._markRemove(t.parent,t.startOffset,t.offsetSize),this._markInsert(t.parent,t.startOffset,t.offsetSize),this._refreshedItems.add(t),this._setElementState(t,"refresh");const e=G._createOn(t);for(const i of this._markerCollection.getMarkersIntersectingRange(e)){const n=i.getData();this.bufferMarkerChange(i.name,n,n)}this._cachedChanges=null}_bufferRootLoad(t){if(t.isAttached()){this._bufferRootStateChange(t.rootName,!0),this._markInsert(t,0,t.maxOffset);for(const e of t.getAttributeKeys())this._bufferRootAttributeChange(t.rootName,e,null,t.getAttribute(e));for(const e of this._markerCollection)if(e.getRange().root==t){const i=e.getData();this.bufferMarkerChange(e.name,{...i,range:null},i)}}}_bufferRootStateChange(t,e){if(!this._changedRoots.has(t)){this._changedRoots.set(t,{name:t,state:e?"attached":"detached"});return}const i=this._changedRoots.get(t);i.state!==void 0?(delete i.state,i.attributes===void 0&&this._changedRoots.delete(t)):i.state=e?"attached":"detached"}_bufferRootAttributeChange(t,e,i,n){const r=this._changedRoots.get(t)||{name:t},o=r.attributes||{};if(o[e]){const l=o[e];n===l.oldValue?delete o[e]:l.newValue=n}else o[e]={oldValue:i,newValue:n};Object.entries(o).length===0?(delete r.attributes,r.state===void 0&&this._changedRoots.delete(t)):(r.attributes=o,this._changedRoots.set(t,r))}_markInsert(t,e,i){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const n={type:"insert",offset:e,howMany:i,count:this._changeCount++};this._markChange(t,n)}_markRemove(t,e,i){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const n={type:"remove",offset:e,howMany:i,count:this._changeCount++};this._markChange(t,n),this._removeAllNestedChanges(t,e,i)}_markAttribute(t){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e)}_markChange(t,e){this._makeSnapshots(t);const i=this._getChangesForElement(t);this._handleChange(e,i),i.push(e);for(let n=0;n<i.length;n++)i[n].howMany<1&&(i.splice(n,1),n--)}_setElementState(t,e){if(!t.is("element"))return;const i=uh._statesPriority.indexOf(this._elementState.get(t));uh._statesPriority.indexOf(e)>i&&this._elementState.set(t,e)}_getDiffActionForNode(t,e){if(!t.is("element")||!this._elementsSnapshots.has(t))return e;const i=this._elementState.get(t);return!i||i=="move"?e:i}_getChangesForElement(t){let e;return this._changesInElement.has(t)?e=this._changesInElement.get(t):(e=[],this._changesInElement.set(t,e)),e}_makeSnapshots(t){if(this._elementChildrenSnapshots.has(t))return;const e=eC(t.getChildren());this._elementChildrenSnapshots.set(t,e);for(const i of e)this._elementsSnapshots.set(i.node,i)}_handleChange(t,e){t.nodesToHandle=t.howMany;for(const i of e){const n=t.offset+t.howMany,r=i.offset+i.howMany;if(t.type=="insert"&&(i.type=="insert"&&(t.offset<=i.offset?i.offset+=t.howMany:t.offset<r&&(i.howMany+=t.nodesToHandle,t.nodesToHandle=0)),i.type=="remove"&&t.offset<i.offset&&(i.offset+=t.howMany),i.type=="attribute")){if(t.offset<=i.offset)i.offset+=t.howMany;else if(t.offset<r){const o=i.howMany;i.howMany=t.offset-i.offset,e.unshift({type:"attribute",offset:n,howMany:o-i.howMany,count:this._changeCount++})}}if(t.type=="remove"){if(i.type=="insert"){if(n<=i.offset)i.offset-=t.howMany;else if(n<=r)if(t.offset<i.offset){const o=n-i.offset;i.offset=t.offset,i.howMany-=o,t.nodesToHandle-=o}else i.howMany-=t.nodesToHandle,t.nodesToHandle=0;else if(t.offset<=i.offset)t.nodesToHandle-=i.howMany,i.howMany=0;else if(t.offset<r){const o=r-t.offset;i.howMany-=o,t.nodesToHandle-=o}}if(i.type=="remove"&&(n<=i.offset?i.offset-=t.howMany:t.offset<i.offset&&(t.nodesToHandle+=i.howMany,i.howMany=0)),i.type=="attribute"){if(n<=i.offset)i.offset-=t.howMany;else if(t.offset<i.offset){const o=n-i.offset;i.offset=t.offset,i.howMany-=o}else if(t.offset<r)if(n<=r){const o=i.howMany;i.howMany=t.offset-i.offset;const l=o-i.howMany-t.nodesToHandle;e.unshift({type:"attribute",offset:t.offset,howMany:l,count:this._changeCount++})}else i.howMany-=r-t.offset}}if(t.type=="attribute"){if(i.type=="insert")if(t.offset<i.offset&&n>i.offset){if(n>r){const o={type:"attribute",offset:r,howMany:n-r,count:this._changeCount++};this._handleChange(o,e),e.push(o)}t.nodesToHandle=i.offset-t.offset,t.howMany=t.nodesToHandle}else t.offset>=i.offset&&t.offset<r&&(n>r?(t.nodesToHandle=n-r,t.offset=r):t.nodesToHandle=0);if(i.type=="remove"&&t.offset<i.offset&&n>i.offset){const o={type:"attribute",offset:i.offset,howMany:n-i.offset,count:this._changeCount++};this._handleChange(o,e),e.push(o),t.nodesToHandle=i.offset-t.offset,t.howMany=t.nodesToHandle}i.type=="attribute"&&(t.offset>=i.offset&&n<=r?(t.nodesToHandle=0,t.howMany=0,t.offset=0):t.offset<=i.offset&&n>=r&&(i.howMany=0))}}t.howMany=t.nodesToHandle,delete t.nodesToHandle}_getInsertDiff(t,e,i,n,r){const o={type:"insert",position:te._createAt(t,e),name:n.name,attributes:new Map(n.attributes),length:1,changeCount:this._changeCount++,action:i};return i!="insert"&&r&&(o.before={name:r.name,attributes:new Map(r.attributes)}),o}_getRemoveDiff(t,e,i,n){return{type:"remove",action:i,position:te._createAt(t,e),name:n.name,attributes:new Map(n.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(t,e,i){const n=[];i=new Map(i);for(const[r,o]of e){const l=i.has(r)?i.get(r):null;l!==o&&n.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:r,attributeOldValue:o,attributeNewValue:l,changeCount:this._changeCount++}),i.delete(r)}for(const[r,o]of i)n.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:r,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return n}_isInInsertedElement(t){const e=t.parent;if(!e)return!1;const i=this._changesInElement.get(e),n=t.startOffset;if(i){for(const r of i)if(r.type=="insert"&&n>=r.offset&&n<r.offset+r.howMany)return!0}return this._isInInsertedElement(e)}_removeAllNestedChanges(t,e,i){const n=new G(te._createAt(t,e),te._createAt(t,e+i));for(const r of n.getItems({shallow:!0}))r.is("element")&&(this._changesInElement.delete(r),this._removeAllNestedChanges(r,0,r.maxOffset))}};p(uh,"_statesPriority",[void 0,"refresh","rename","move"]);let _1=uh;function JS(s){return{node:s,name:s.is("$text")?"$text":s.name,attributes:new Map(s.getAttributes())}}function eC(s){const t=[];for(const e of s)if(e.is("$text"))for(let i=0;i<e.data.length;++i)t.push(JS(e));else t.push(JS(e));return t}function S9(s,t){const e=[];let i=0,n=0;for(const r of t){if(r.offset>i){for(let o=0;o<r.offset-i;o++)e.push("e");n+=r.offset-i}if(r.type=="insert"){for(let o=0;o<r.howMany;o++)e.push("i");i=r.offset+r.howMany}else if(r.type=="remove"){for(let o=0;o<r.howMany;o++)e.push("r");i=r.offset,n+=r.howMany}else{if(r.howMany>1500)for(let o=0;o<r.howMany;o++)e.push("a");else e.push(..."a".repeat(r.howMany).split(""));i=r.offset+r.howMany,n+=r.howMany}}if(n<s)for(let r=0;r<s-n-i;r++)e.push("e");return e}function C9(s){const t="position"in s&&s.position.root.rootName=="$graveyard",e="range"in s&&s.range.root.rootName=="$graveyard";return!t&&!e}class P9{constructor(){p(this,"_operations",[]);p(this,"_undoPairs",new Map);p(this,"_undoneOperations",new Set);p(this,"_baseVersionToOperationIndex",new Map);p(this,"_version",0);p(this,"_gaps",new Map)}get version(){return this._version}set version(t){this._operations.length&&t>this._version+1&&this._gaps.set(this._version,t),this._version=t}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(t){if(t.baseVersion!==this.version)throw new A("model-document-history-addoperation-incorrect-version",this,{operation:t,historyVersion:this.version});this._operations.push(t),this._version++,this._baseVersionToOperationIndex.set(t.baseVersion,this._operations.length-1)}getOperations(t,e=this.version){if(!this._operations.length)return[];const i=this._operations[0];t===void 0&&(t=i.baseVersion);let n=e-1;for(const[l,a]of this._gaps)t>l&&t<a&&(t=a),n>l&&n<a&&(n=l-1);if(n<i.baseVersion||t>this.lastOperation.baseVersion)return[];let r=this._baseVersionToOperationIndex.get(t);r===void 0&&(r=0);let o=this._baseVersionToOperationIndex.get(n);return o===void 0&&(o=this._operations.length-1),this._operations.slice(r,o+1)}getOperation(t){const e=this._baseVersionToOperationIndex.get(t);if(e!==void 0)return this._operations[e]}setOperationAsUndone(t,e){this._undoPairs.set(e,t),this._undoneOperations.add(t)}isUndoingOperation(t){return this._undoPairs.has(t)}isUndoneOperation(t){return this._undoneOperations.has(t)}getUndoneOperation(t){return this._undoPairs.get(t)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class ag extends Vt{constructor(e,i,n="main"){super(i);p(this,"rootName");p(this,"_document");p(this,"_isAttached",!0);p(this,"_isLoaded",!0);this._document=e,this.rootName=n}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}ag.prototype.is=function(s,t){return t?t===this.name&&(s==="rootElement"||s==="model:rootElement"||s==="element"||s==="model:element"):s==="rootElement"||s==="model:rootElement"||s==="element"||s==="model:element"||s==="node"||s==="model:node"};const tC="$graveyard";class T9 extends gt(){constructor(e){super();p(this,"model");p(this,"history");p(this,"selection");p(this,"roots");p(this,"differ");p(this,"isReadOnly");p(this,"_postFixers");p(this,"_hasSelectionChangedFromTheLastChangeBlock");this.model=e,this.history=new P9,this.selection=new Rs(this),this.roots=new vi({idProperty:"rootName"}),this.differ=new _1(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",tC),this.listenTo(e,"applyOperation",(i,n)=>{const r=n[0];r.isDocumentOperation&&this.differ.bufferOperation(r)},{priority:"high"}),this.listenTo(e,"applyOperation",(i,n)=>{const r=n[0];r.isDocumentOperation&&this.history.addOperation(r)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(i,n,r,o,l)=>{const a={...n.getData(),range:o};this.differ.bufferMarkerChange(n.name,l,a),r===null&&n.on("change",(c,h)=>{const f=n.getData();this.differ.bufferMarkerChange(n.name,{...f,range:h},f)})}),this.registerPostFixer(i=>{let n=!1;for(const r of this.roots)!r.isAttached()&&!r.isEmpty&&(i.remove(i.createRangeIn(r)),n=!0);for(const r of this.model.markers)r.getRange().root.isAttached()||(i.removeMarker(r),n=!0);return n})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(tC)}createRoot(e="$root",i="main"){if(this.roots.get(i))throw new A("model-document-createroot-name-exists",this,{name:i});const n=new ag(this,e,i);return this.roots.add(n),n}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(i=>i.rootName)}getRoots(e=!1){return this.roots.filter(i=>i!=this.graveyard&&(e||i.isAttached())&&i._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=ux(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),i=this.model,n=i.schema,r=i.createPositionFromPath(e,[0]);return n.getNearestSelectionRange(r)||i.createRange(r)}_validateSelectionRange(e){return e.start.isValid()&&e.end.isValid()&&iC(e.start)&&iC(e.end)}_callPostFixers(e){let i=!1;do for(const n of this._postFixers)if(this.selection.refresh(),i=n(e),i)break;while(i)}}function iC(s){const t=s.textNode;if(t){const e=t.data,i=s.offset-t.startOffset;return!_x(e,i)&&!kx(e,i)}return!0}class E9 extends gt(){constructor(){super(...arguments);p(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(e){const i=e instanceof Ia?e.name:e;return this._markers.has(i)}get(e){return this._markers.get(e)||null}_set(e,i,n=!1,r=!1){const o=e instanceof Ia?e.name:e;if(o.includes(","))throw new A("markercollection-incorrect-marker-name",this);const l=this._markers.get(o);if(l){const h=l.getData(),f=l.getRange();let m=!1;return f.isEqual(i)||(l._attachLiveRange(pn.fromRange(i)),m=!0),n!=l.managedUsingOperations&&(l._managedUsingOperations=n,m=!0),typeof r=="boolean"&&r!=l.affectsData&&(l._affectsData=r,m=!0),m&&this.fire(`update:${o}`,l,f,i,h),l}const a=pn.fromRange(i),c=new Ia(o,a,n,r);return this._markers.set(o,c),this.fire(`update:${o}`,c,null,i,{...c.getData(),range:null}),c}_remove(e){const i=e instanceof Ia?e.name:e,n=this._markers.get(i);return n?(this._markers.delete(i),this.fire(`update:${i}`,n,n.getRange(),null,n.getData()),this._destroyMarker(n),!0):!1}_refresh(e){const i=e instanceof Ia?e.name:e,n=this._markers.get(i);if(!n)throw new A("markercollection-refresh-marker-not-exists",this);const r=n.getRange();this.fire(`update:${i}`,n,r,r,n.getData())}*getMarkersAtPosition(e){for(const i of this)i.getRange().containsPosition(e)&&(yield i)}*getMarkersIntersectingRange(e){for(const i of this)i.getRange().getIntersection(e)!==null&&(yield i)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const i of this._markers.values())i.name.startsWith(e+":")&&(yield i)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class Ia extends gt(Bo){constructor(e,i,n,r){super();p(this,"name");p(this,"_managedUsingOperations");p(this,"_affectsData");p(this,"_liveRange");this.name=e,this._liveRange=this._attachLiveRange(i),this._managedUsingOperations=n,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new A("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new A("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new A("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new A("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new A("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Ia.prototype.is=function(s){return s==="marker"||s==="model:marker"};class A9 extends Fn{constructor(e,i){super(null);p(this,"sourcePosition");p(this,"howMany");this.sourcePosition=e.clone(),this.howMany=i}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new A("detach-operation-on-document-node",this)}_execute(){l6(G._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class Gs extends Bo{constructor(e){super();p(this,"markers",new Map);p(this,"_children",new Yu);e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let i=this;for(const n of e)i=i.getChildAtOffset(n);return i}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const i of this._children)e.push(i.toJSON());return e}static fromJSON(e){const i=[];for(const n of e)n.name?i.push(Vt.fromJSON(n)):i.push(Qt.fromJSON(n));return new Gs(i)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,i){const n=I9(i);for(const r of n)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,n)}_removeChildren(e,i=1){const n=this._children._removeNodes(e,i);for(const r of n)r.parent=null;return n}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const i of e)i.parent=null}}Gs.prototype.is=function(s){return s==="documentFragment"||s==="model:documentFragment"};function I9(s){return typeof s=="string"?[new Qt(s)]:(Dn(s)||(s=[s]),Array.from(s).map(t=>typeof t=="string"?new Qt(t):t instanceof Is?new Qt(t.data,t.getAttributes()):t))}class R9{constructor(t,e){p(this,"model");p(this,"batch");this.model=t,this.batch=e}createText(t,e){return new Qt(t,e)}createElement(t,e){return new Vt(t,e)}createDocumentFragment(){return new Gs}cloneElement(t,e=!0){return t._clone(e)}insert(t,e,i=0){if(this._assertWriterUsedCorrectly(),t instanceof Qt&&t.data=="")return;const n=te._createAt(e,i);if(t.parent)if(rC(t.root,n.root)){this.move(G._createOn(t),n);return}else{if(t.root.document)throw new A("model-writer-insert-forbidden-move",this);this.remove(t)}const r=n.root.document?n.root.document.version:null,o=t instanceof Gs?t._removeChildren(0,t.childCount):t,l=new xi(n,o,r);if(t instanceof Qt&&(l.shouldReceiveAttributes=!0),this.batch.addOperation(l),this.model.applyOperation(l),t instanceof Gs)for(const[a,c]of t.markers){const h=te._createAt(c.root,0),m={range:new G(c.start._getCombined(h,n),c.end._getCombined(h,n)),usingOperation:!0,affectsData:!0};this.model.markers.has(a)?this.updateMarker(a,m):this.addMarker(a,m)}}insertText(t,e,i,n){e instanceof Gs||e instanceof Vt||e instanceof te?this.insert(this.createText(t),e,i):this.insert(this.createText(t,e),i,n)}insertElement(t,e,i,n){e instanceof Gs||e instanceof Vt||e instanceof te?this.insert(this.createElement(t),e,i):this.insert(this.createElement(t,e),i,n)}append(t,e){this.insert(t,e,"end")}appendText(t,e,i){e instanceof Gs||e instanceof Vt?this.insert(this.createText(t),e,"end"):this.insert(this.createText(t,e),i,"end")}appendElement(t,e,i){e instanceof Gs||e instanceof Vt?this.insert(this.createElement(t),e,"end"):this.insert(this.createElement(t,e),i,"end")}setAttribute(t,e,i){if(this._assertWriterUsedCorrectly(),i instanceof G){const n=i.getMinimalFlatRanges();for(const r of n)nC(this,t,e,r)}else sC(this,t,e,i)}setAttributes(t,e){for(const[i,n]of cs(t))this.setAttribute(i,n,e)}removeAttribute(t,e){if(this._assertWriterUsedCorrectly(),e instanceof G){const i=e.getMinimalFlatRanges();for(const n of i)nC(this,t,null,n)}else sC(this,t,null,e)}clearAttributes(t){this._assertWriterUsedCorrectly();const e=i=>{for(const n of i.getAttributeKeys())this.removeAttribute(n,i)};if(!(t instanceof G))e(t);else for(const i of t.getItems())e(i)}move(t,e,i){if(this._assertWriterUsedCorrectly(),!(t instanceof G))throw new A("writer-move-invalid-range",this);if(!t.isFlat)throw new A("writer-move-range-not-flat",this);const n=te._createAt(e,i);if(n.isEqual(t.start))return;if(this._addOperationForAffectedMarkers("move",t),!rC(t.root,n.root))throw new A("writer-move-different-document",this);const r=t.root.document?t.root.document.version:null,o=new ot(t.start,t.end.offset-t.start.offset,n,r);this.batch.addOperation(o),this.model.applyOperation(o)}remove(t){this._assertWriterUsedCorrectly();const i=(t instanceof G?t:G._createOn(t)).getMinimalFlatRanges().reverse();for(const n of i)this._addOperationForAffectedMarkers("move",n),V9(n.start,n.end.offset-n.start.offset,this.batch,this.model)}merge(t){this._assertWriterUsedCorrectly();const e=t.nodeBefore,i=t.nodeAfter;if(this._addOperationForAffectedMarkers("merge",t),!(e instanceof Vt))throw new A("writer-merge-no-element-before",this);if(!(i instanceof Vt))throw new A("writer-merge-no-element-after",this);t.root.document?this._merge(t):this._mergeDetached(t)}createPositionFromPath(t,e,i){return this.model.createPositionFromPath(t,e,i)}createPositionAt(t,e){return this.model.createPositionAt(t,e)}createPositionAfter(t){return this.model.createPositionAfter(t)}createPositionBefore(t){return this.model.createPositionBefore(t)}createRange(t,e){return this.model.createRange(t,e)}createRangeIn(t){return this.model.createRangeIn(t)}createRangeOn(t){return this.model.createRangeOn(t)}createSelection(...t){return this.model.createSelection(...t)}_mergeDetached(t){const e=t.nodeBefore,i=t.nodeAfter;this.move(G._createIn(i),te._createAt(e,"end")),this.remove(i)}_merge(t){const e=te._createAt(t.nodeBefore,"end"),i=te._createAt(t.nodeAfter,0),n=t.root.document.graveyard,r=new te(n,[0]),o=t.root.document.version,l=new Ut(i,t.nodeAfter.maxOffset,e,r,o);this.batch.addOperation(l),this.model.applyOperation(l)}rename(t,e){if(this._assertWriterUsedCorrectly(),!(t instanceof Vt))throw new A("writer-rename-not-element-instance",this);const i=t.root.document?t.root.document.version:null,n=new On(te._createBefore(t),t.name,e,i);this.batch.addOperation(n),this.model.applyOperation(n)}split(t,e){this._assertWriterUsedCorrectly();let i=t.parent;if(!i.parent)throw new A("writer-split-element-no-parent",this);if(e||(e=i.parent),!t.parent.getAncestors({includeSelf:!0}).includes(e))throw new A("writer-split-invalid-limit-element",this);let n,r;do{const o=i.root.document?i.root.document.version:null,l=i.maxOffset-t.offset,a=wt.getInsertionPosition(t),c=new wt(t,l,a,null,o);this.batch.addOperation(c),this.model.applyOperation(c),!n&&!r&&(n=i,r=t.parent.nextSibling),t=this.createPositionAfter(t.parent),i=t.parent}while(i!==e);return{position:t,range:new G(te._createAt(n,"end"),te._createAt(r,0))}}wrap(t,e){if(this._assertWriterUsedCorrectly(),!t.isFlat)throw new A("writer-wrap-range-not-flat",this);const i=e instanceof Vt?e:new Vt(e);if(i.childCount>0)throw new A("writer-wrap-element-not-empty",this);if(i.parent!==null)throw new A("writer-wrap-element-attached",this);this.insert(i,t.start);const n=new G(t.start.getShiftedBy(1),t.end.getShiftedBy(1));this.move(n,te._createAt(i,0))}unwrap(t){if(this._assertWriterUsedCorrectly(),t.parent===null)throw new A("writer-unwrap-element-no-parent",this);this.move(G._createIn(t),this.createPositionAfter(t)),this.remove(t)}addMarker(t,e){if(this._assertWriterUsedCorrectly(),!e||typeof e.usingOperation!="boolean")throw new A("writer-addmarker-no-usingoperation",this);const i=e.usingOperation,n=e.range,r=e.affectsData===void 0?!1:e.affectsData;if(this.model.markers.has(t))throw new A("writer-addmarker-marker-exists",this);if(!n)throw new A("writer-addmarker-no-range",this);return i?(xu(this,t,null,n,r),this.model.markers.get(t)):this.model.markers._set(t,n,i,r)}updateMarker(t,e){this._assertWriterUsedCorrectly();const i=typeof t=="string"?t:t.name,n=this.model.markers.get(i);if(!n)throw new A("writer-updatemarker-marker-not-exists",this);if(!e){We("writer-updatemarker-reconvert-using-editingcontroller",{markerName:i}),this.model.markers._refresh(n);return}const r=typeof e.usingOperation=="boolean",o=typeof e.affectsData=="boolean",l=o?e.affectsData:n.affectsData;if(!r&&!e.range&&!o)throw new A("writer-updatemarker-wrong-options",this);const a=n.getRange(),c=e.range?e.range:a;if(r&&e.usingOperation!==n.managedUsingOperations){e.usingOperation?xu(this,i,null,c,l):(xu(this,i,a,null,l),this.model.markers._set(i,c,void 0,l));return}n.managedUsingOperations?xu(this,i,a,c,l):this.model.markers._set(i,c,void 0,l)}removeMarker(t){this._assertWriterUsedCorrectly();const e=typeof t=="string"?t:t.name;if(!this.model.markers.has(e))throw new A("writer-removemarker-no-marker",this);const i=this.model.markers.get(e);if(!i.managedUsingOperations){this.model.markers._remove(e);return}const n=i.getRange();xu(this,e,n,null,i.affectsData)}addRoot(t,e="$root"){this._assertWriterUsedCorrectly();const i=this.model.document.getRoot(t);if(i&&i.isAttached())throw new A("writer-addroot-root-exists",this);const n=this.model.document,r=new ir(t,e,!0,n,n.version);return this.batch.addOperation(r),this.model.applyOperation(r),this.model.document.getRoot(t)}detachRoot(t){this._assertWriterUsedCorrectly();const e=typeof t=="string"?this.model.document.getRoot(t):t;if(!e||!e.isAttached())throw new A("writer-detachroot-no-root",this);for(const r of this.model.markers)r.getRange().root===e&&this.removeMarker(r);for(const r of e.getAttributeKeys())this.removeAttribute(r,e);this.remove(this.createRangeIn(e));const i=this.model.document,n=new ir(e.rootName,e.name,!1,i,i.version);this.batch.addOperation(n),this.model.applyOperation(n)}setSelection(...t){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...t)}setSelectionFocus(t,e){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(t,e)}setSelectionAttribute(t,e){if(this._assertWriterUsedCorrectly(),typeof t=="string")this._setSelectionAttribute(t,e);else for(const[i,n]of cs(t))this._setSelectionAttribute(i,n)}removeSelectionAttribute(t){if(this._assertWriterUsedCorrectly(),typeof t=="string")this._removeSelectionAttribute(t);else for(const e of t)this._removeSelectionAttribute(e)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(t){this.model.document.selection._restoreGravity(t)}_setSelectionAttribute(t,e){const i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){const n=Rs._getStoreAttributeKey(t);this.setAttribute(n,e,i.anchor.parent)}i._setAttribute(t,e)}_removeSelectionAttribute(t){const e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){const i=Rs._getStoreAttributeKey(t);this.removeAttribute(i,e.anchor.parent)}e._removeAttribute(t)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new A("writer-incorrect-use",this)}_addOperationForAffectedMarkers(t,e){for(const i of this.model.markers){if(!i.managedUsingOperations)continue;const n=i.getRange();let r=!1;if(t==="move"){const o=e;r=o.containsPosition(n.start)||o.start.isEqual(n.start)||o.containsPosition(n.end)||o.end.isEqual(n.end)}else{const o=e,l=o.nodeBefore,a=o.nodeAfter,c=n.start.parent==l&&n.start.isAtEnd,h=n.end.parent==a&&n.end.offset==0,f=n.end.nodeAfter==a,m=n.start.nodeAfter==a;r=c||h||f||m}r&&this.updateMarker(i.name,{range:n})}}}function nC(s,t,e,i){const n=s.model,r=n.document;let o=i.start,l,a,c;for(const f of i.getWalker({shallow:!0}))c=f.item.getAttribute(t),l&&a!=c&&(a!=e&&h(),o=l),l=f.nextPosition,a=c;l instanceof te&&l!=o&&a!=e&&h();function h(){const f=new G(o,l),m=f.root.document?r.version:null,w=new Gt(f,t,a,e,m);s.batch.addOperation(w),n.applyOperation(w)}}function sC(s,t,e,i){const n=s.model,r=n.document,o=i.getAttribute(t);let l,a;if(o!=e){if(i.root===i){const h=i.document?r.version:null;a=new Ar(i,t,o,e,h)}else{l=new G(te._createBefore(i),s.createPositionAfter(i));const h=l.root.document?r.version:null;a=new Gt(l,t,o,e,h)}s.batch.addOperation(a),n.applyOperation(a)}}function xu(s,t,e,i,n){const r=s.model,o=r.document,l=new en(t,e,i,r.markers,!!n,o.version);s.batch.addOperation(l),r.applyOperation(l)}function V9(s,t,e,i){let n;if(s.root.document){const r=i.document,o=new te(r.graveyard,[0]);n=new ot(s,t,o,r.version)}else n=new A9(s,t);e.addOperation(n),i.applyOperation(n)}function rC(s,t){return s===t||s instanceof ag&&t instanceof ag}function M9(s){s.document.registerPostFixer(t=>L9(t,s))}function L9(s,t){const e=t.document.selection,i=t.schema,n=[];let r=!1;for(const o of e.getRanges()){const l=Mx(o,i);l&&!l.isEqual(o)?(n.push(l),r=!0):n.push(o)}return r&&s.setSelection(D9(n),{backward:e.isBackward}),!1}function Mx(s,t){return s.isCollapsed?B9(s,t):$9(s,t)}function B9(s,t){const e=s.start,i=t.getNearestSelectionRange(e);if(!i){const r=e.getAncestors().reverse().find(o=>t.isObject(o));return r?G._createOn(r):null}if(!i.isCollapsed)return i;const n=i.start;return e.isEqual(n)?null:new G(n)}function $9(s,t){const{start:e,end:i}=s,n=t.checkChild(e,"$text"),r=t.checkChild(i,"$text"),o=t.getLimitElement(e),l=t.getLimitElement(i);if(o===l){if(n&&r)return null;if(Q9(e,i,t)){const f=e.nodeAfter&&t.isSelectable(e.nodeAfter)?null:t.getNearestSelectionRange(e,"forward"),w=i.nodeBefore&&t.isSelectable(i.nodeBefore)?null:t.getNearestSelectionRange(i,"backward"),O=f?f.start:e,v=w?w.end:i;return new G(O,v)}}const a=o&&!o.is("rootElement"),c=l&&!l.is("rootElement");if(a||c){const h=e.nodeAfter&&i.nodeBefore&&e.nodeAfter.parent===i.nodeBefore.parent,f=a&&(!h||!lC(e.nodeAfter,t)),m=c&&(!h||!lC(i.nodeBefore,t));let w=e,O=i;return f&&(w=te._createBefore(oC(o,t))),m&&(O=te._createAfter(oC(l,t))),new G(w,O)}return null}function oC(s,t){let e=s,i=e;for(;t.isLimit(i)&&i.parent;)e=i,i=i.parent;return e}function Q9(s,t,e){const i=s.nodeAfter&&!e.isLimit(s.nodeAfter)||e.checkChild(s,"$text"),n=t.nodeBefore&&!e.isLimit(t.nodeBefore)||e.checkChild(t,"$text");return i||n}function D9(s){const t=[...s],e=new Set;let i=1;for(;i<t.length;){const r=t[i],o=t.slice(0,i);for(const[l,a]of o.entries())if(!e.has(l)){if(r.isEqual(a))e.add(l);else if(r.isIntersecting(a)){e.add(l),e.add(i);const c=r.getJoined(a);t.push(c)}}i++}return t.filter((r,o)=>!e.has(o))}function lC(s,t){return s&&t.isSelectable(s)}function N9(s,t,e={}){if(t.isCollapsed)return;const i=t.getFirstRange();if(i.root.rootName=="$graveyard")return;const n=s.schema;s.change(r=>{if(!e.doNotResetEntireContent&&j9(n,t)){X9(r,t);return}const o={};if(!e.doNotAutoparagraph){const c=t.getSelectedElement();c&&Object.assign(o,n.getAttributesWithProperty(c,"copyOnReplace",!0))}let l,a;e.doNotFixSelection?(l=qt.fromPosition(i.start,"toPrevious"),a=qt.fromPosition(i.end,"toNext")):[l,a]=F9(i),l.isTouching(a)||r.remove(r.createRange(l,a)),e.leaveUnmerged||(W9(r,l,a),n.removeDisallowedAttributes(l.parent.getChildren(),r)),m6(r,t,l),!e.doNotAutoparagraph&&H9(n,l)&&f6(r,l,t,o),l.detach(),a.detach()})}function F9(s){const t=s.root.document.model,e=s.start;let i=s.end;if(t.hasContent(s,{ignoreMarkers:!0})){const n=z9(i);if(n&&i.isTouching(t.createPositionAt(n,0))){const r=t.createSelection(s);t.modifySelection(r,{direction:"backward"});const o=r.getLastPosition(),l=t.createRange(o,i);t.hasContent(l,{ignoreMarkers:!0})||(i=o)}}return[qt.fromPosition(e,"toPrevious"),qt.fromPosition(i,"toNext")]}function z9(s){const t=s.parent,e=t.root.document.model.schema,i=t.getAncestors({parentFirst:!0,includeSelf:!0});for(const n of i){if(e.isLimit(n))return null;if(e.isBlock(n))return n}}function W9(s,t,e){const i=s.model;if(!Lx(s.model.schema,t,e))return;const[n,r]=Z9(t,e);!n||!r||(!i.hasContent(n,{ignoreMarkers:!0})&&i.hasContent(r,{ignoreMarkers:!0})?d6(s,t,e,n.parent):h6(s,t,e,n.parent))}function h6(s,t,e,i){const n=t.parent,r=e.parent;if(!(n==i||r==i)){for(t=s.createPositionAfter(n),e=s.createPositionBefore(r),e.isEqual(t)||s.insert(r,t),s.merge(t);e.parent.isEmpty;){const o=e.parent;e=s.createPositionBefore(o),s.remove(o)}Lx(s.model.schema,t,e)&&h6(s,t,e,i)}}function d6(s,t,e,i){const n=t.parent,r=e.parent;if(!(n==i||r==i)){for(t=s.createPositionAfter(n),e=s.createPositionBefore(r),e.isEqual(t)||s.insert(n,e);t.parent.isEmpty;){const o=t.parent;t=s.createPositionBefore(o),s.remove(o)}e=s.createPositionBefore(r),U9(s,e),Lx(s.model.schema,t,e)&&d6(s,t,e,i)}}function U9(s,t){const e=t.nodeBefore,i=t.nodeAfter;e.name!=i.name&&s.rename(e,i.name),s.clearAttributes(e),s.setAttributes(Object.fromEntries(i.getAttributes()),e),s.merge(t)}function Lx(s,t,e){const i=t.parent,n=e.parent;return i==n||s.isLimit(i)||s.isLimit(n)?!1:q9(t,e,s)}function Z9(s,t){const e=s.getAncestors(),i=t.getAncestors();let n=0;for(;e[n]&&e[n]==i[n];)n++;return[e[n],i[n]]}function H9(s,t){const e=s.checkChild(t,"$text"),i=s.checkChild(t,"paragraph");return!e&&i}function q9(s,t,e){const i=new G(s,t);for(const n of i.getWalker())if(e.isLimit(n.item))return!1;return!0}function f6(s,t,e,i={}){const n=s.createElement("paragraph");s.model.schema.setAllowedAttributes(n,i,s),s.insert(n,t),m6(s,e,s.createPositionAt(n,0))}function X9(s,t){const e=s.model.schema.getLimitElement(t);s.remove(s.createRangeIn(e)),f6(s,s.createPositionAt(e,0),t)}function j9(s,t){const e=s.getLimitElement(t);if(!t.containsEntireContent(e))return!1;const i=t.getFirstRange();return i.start.parent==i.end.parent?!1:s.checkChild(e,"paragraph")}function m6(s,t,e){t instanceof Rs?s.setSelection(e):t.setTo(e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function G9(s,t){return s.change(e=>{const i=e.createDocumentFragment(),n=t.getFirstRange();if(!n||n.isCollapsed)return i;const r=n.start.root,o=n.start.getCommonPath(n.end),l=r.getNodeByPath(o);let a;n.start.parent==n.end.parent?a=n:a=e.createRange(e.createPositionAt(l,n.start.path[o.length]),e.createPositionAt(l,n.end.path[o.length]+1));const c=a.end.offset-a.start.offset;for(const h of a.getItems({shallow:!0}))h.is("$textProxy")?e.appendText(h.data,h.getAttributes(),i):e.append(e.cloneElement(h,!0),i);if(a!=n){const h=n._getTransformedByMove(a.start,e.createPositionAt(i,0),c)[0],f=e.createRange(e.createPositionAt(i,0),h.start),m=e.createRange(h.end,e.createPositionAt(i,"end"));aC(m,e),aC(f,e)}return i})}function aC(s,t){const e=[];Array.from(s.getItems({direction:"backward"})).map(i=>t.createRangeOn(i)).filter(i=>(i.start.isAfter(s.start)||i.start.isEqual(s.start))&&(i.end.isBefore(s.end)||i.end.isEqual(s.end))).forEach(i=>{e.push(i.start.parent),t.remove(i)}),e.forEach(i=>{let n=i;for(;n.parent&&n.isEmpty;){const r=t.createRangeOn(n);n=n.parent,t.remove(r)}})}function Y9(s,t,e){return s.change(i=>{const n=e||s.document.selection;n.isCollapsed||s.deleteContent(n,{doNotAutoparagraph:!0});const r=new K9(s,i,n.anchor),o=[];let l;if(t.is("documentFragment")){if(t.markers.size){const h=[];for(const[f,m]of t.markers){const{start:w,end:O}=m,v=w.isEqual(O);h.push({position:w,name:f,isCollapsed:v},{position:O,name:f,isCollapsed:v})}h.sort(({position:f},{position:m})=>f.isBefore(m)?1:-1);for(const{position:f,name:m,isCollapsed:w}of h){let O=null,v=null;const k=f.parent===t&&f.isAtStart,C=f.parent===t&&f.isAtEnd;!k&&!C?(O=i.createElement("$marker"),i.insert(O,f)):w&&(v=k?"start":"end"),o.push({name:m,element:O,collapsed:v})}}l=t.getChildren()}else l=[t];r.handleNodes(l);let a=r.getSelectionRange();if(t.is("documentFragment")&&o.length){const h=a?pn.fromRange(a):null,f={};for(let m=o.length-1;m>=0;m--){const{name:w,element:O,collapsed:v}=o[m],k=!f[w];if(k&&(f[w]=[]),O){const C=i.createPositionAt(O,"before");f[w].push(C),i.remove(O)}else{const C=r.getAffectedRange();if(!C){v&&f[w].push(r.position);continue}v?f[w].push(C[v]):f[w].push(k?C.start:C.end)}}for(const[m,[w,O]]of Object.entries(f))w&&O&&w.root===O.root&&w.root.document&&!i.model.markers.has(m)&&i.addMarker(m,{usingOperation:!0,affectsData:!0,range:new G(w,O)});h&&(a=h.toRange(),h.detach())}/* istanbul ignore else -- @preserve */a&&(n instanceof Rs?i.setSelection(a):n.setTo(a));const c=r.getAffectedRange()||s.createRange(n.anchor);return r.destroy(),c})}class K9{constructor(t,e,i){p(this,"model");p(this,"writer");p(this,"position");p(this,"canMergeWith");p(this,"schema");p(this,"_documentFragment");p(this,"_documentFragmentPosition");p(this,"_firstNode",null);p(this,"_lastNode",null);p(this,"_lastAutoParagraph",null);p(this,"_filterAttributesOf",[]);p(this,"_affectedStart",null);p(this,"_affectedEnd",null);p(this,"_nodeToSelect",null);this.model=t,this.writer=e,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._documentFragment=e.createDocumentFragment(),this._documentFragmentPosition=e.createPositionAt(this._documentFragment,0)}handleNodes(t){for(const e of Array.from(t))this._handleNode(e);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(t){const e=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(t);if(i.isAfter(e)){this._lastNode=t;/* istanbul ignore if -- @preserve */if(this.position.parent!=t||!this.position.isAtEnd)throw new A("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?G._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new G(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(t){if(!this._checkAndSplitToAllowedPosition(t)){this.schema.isObject(t)||this._handleDisallowedNode(t);return}this._appendToFragment(t),this._firstNode||(this._firstNode=t),this._lastNode=t}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const t=qt.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=t.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=t.toPosition(),t.detach()}_handleDisallowedNode(t){t.is("element")&&this.handleNodes(t.getChildren())}_appendToFragment(t){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,t))throw new A("insertcontent-wrong-position",this,{node:t,position:this.position});this.writer.insert(t,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(t.offsetSize),this.schema.isObject(t)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=t:this._nodeToSelect=null,this._filterAttributesOf.push(t)}_setAffectedBoundaries(t){this._affectedStart||(this._affectedStart=qt.fromPosition(t,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(t))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=qt.fromPosition(t,"toNext"))}_mergeOnLeft(){const t=this._firstNode;if(!(t instanceof Vt)||!this._canMergeLeft(t))return;const e=qt._createBefore(t);e.stickiness="toNext";const i=qt.fromPosition(this.position,"toNext");this._affectedStart.isEqual(e)&&(this._affectedStart.detach(),this._affectedStart=qt._createAt(e.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=qt._createAt(e.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_mergeOnRight(){const t=this._lastNode;if(!(t instanceof Vt)||!this._canMergeRight(t))return;const e=qt._createAfter(t);e.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(e))throw new A("insertcontent-invalid-insertion-position",this);this.position=te._createAt(e.nodeBefore,"end");const i=qt.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(e)&&(this._affectedEnd.detach(),this._affectedEnd=qt._createAt(e.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=qt._createAt(e.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_canMergeLeft(t){const e=t.previousSibling;return e instanceof Vt&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(e,t)}_canMergeRight(t){const e=t.nextSibling;return e instanceof Vt&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(t,e)}_insertAutoParagraph(){this._insertPartialFragment();const t=this.writer.createElement("paragraph");this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0)}_checkAndSplitToAllowedPosition(t){const e=this._getAllowedIn(this.position.parent,t);if(!e)return!1;for(e!=this.position.parent&&this._insertPartialFragment();e!=this.position.parent;)if(this.position.isAtStart){const i=this.position.parent;this.position=this.writer.createPositionBefore(i),i.isEmpty&&i.parent===e&&this.writer.remove(i)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const i=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=i,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,t)||this._insertAutoParagraph(),!0}_getAllowedIn(t,e){return this.schema.checkChild(t,e)||this.schema.checkChild(t,"paragraph")&&this.schema.checkChild("paragraph",e)?t:this.schema.isLimit(t)?null:this._getAllowedIn(t.parent,e)}}function J9(s,t,e,i={}){if(!s.schema.isObject(t))throw new A("insertobject-element-not-an-object",s,{object:t});const n=e||s.document.selection;let r=n;i.findOptimalPosition&&s.schema.isBlock(t)&&(r=s.createSelection(s.schema.findOptimalInsertionRange(n,i.findOptimalPosition)));const o=Nt(n.getSelectedBlocks()),l={};return o&&Object.assign(l,s.schema.getAttributesWithProperty(o,"copyOnReplace",!0)),s.change(a=>{r.isCollapsed||s.deleteContent(r,{doNotAutoparagraph:!0});let c=t;const h=r.anchor.parent;!s.schema.checkChild(h,t)&&s.schema.checkChild(h,"paragraph")&&s.schema.checkChild("paragraph",t)&&(c=a.createElement("paragraph"),a.insert(t,c)),s.schema.setAllowedAttributes(c,l,a);const f=s.insertContent(c,r);return f.isCollapsed||i.setSelection&&e8(a,t,i.setSelection,l),f})}function e8(s,t,e,i){const n=s.model;if(e=="on"){s.setSelection(t,"on");return}if(e!="after")throw new A("insertobject-invalid-place-parameter-value",n);let r=t.nextSibling;if(n.schema.isInline(t)){s.setSelection(t,"after");return}!(r&&n.schema.checkChild(r,"$text"))&&n.schema.checkChild(t.parent,"paragraph")&&(r=s.createElement("paragraph"),n.schema.setAllowedAttributes(r,i,s),n.insertContent(r,s.createPositionAfter(t))),r&&s.setSelection(r,0)}const t8=' ,.?!:;"-()';function i8(s,t,e={}){const i=s.schema,n=e.direction!="backward",r=e.unit?e.unit:"character",o=!!e.treatEmojiAsSingleUnit,l=t.focus,a=new Tr({boundaries:o8(l,n),singleCharacters:!0,direction:n?"forward":"backward"}),c={walker:a,schema:i,isForward:n,unit:r,treatEmojiAsSingleUnit:o};let h;for(;h=a.next();){if(h.done)return;const f=n8(c,h.value);if(f){t instanceof Rs?s.change(m=>{m.setSelectionFocus(f)}):t.setFocus(f);return}}}function n8(s,t){const{isForward:e,walker:i,unit:n,schema:r,treatEmojiAsSingleUnit:o}=s,{type:l,item:a,nextPosition:c}=t;if(l=="text")return s.unit==="word"?r8(i,e):s8(i,n,o);if(l==(e?"elementStart":"elementEnd")){if(r.isSelectable(a))return te._createAt(a,e?"after":"before");if(r.checkChild(c,"$text"))return c}else{if(r.isLimit(a)){i.skip(()=>!0);return}if(r.checkChild(c,"$text"))return c}}function s8(s,t,e){const i=s.position.textNode;if(i){const n=i.data;let r=s.position.offset-i.startOffset;for(;_x(n,r)||t=="character"&&kx(n,r)||e&&TA(n,r);)s.next(),r=s.position.offset-i.startOffset}return s.position}function r8(s,t){let e=s.position.textNode;for(e||(e=t?s.position.nodeAfter:s.position.nodeBefore);e&&e.is("$text");){const i=s.position.offset-e.startOffset;if(a8(e,i,t))e=t?s.position.nodeAfter:s.position.nodeBefore;else{if(l8(e.data,i,t))break;s.next()}}return s.position}function o8(s,t){const e=s.root,i=te._createAt(e,t?"end":0);return t?new G(s,i):new G(i,s)}function l8(s,t,e){const i=t+(e?0:-1);return t8.includes(s.charAt(i))}function a8(s,t,e){return t===(e?s.offsetSize:0)}let c8=class extends ct(){constructor(){super();p(this,"markers");p(this,"document");p(this,"schema");p(this,"_pendingChanges");p(this,"_currentWriter");this.markers=new E9,this.document=new T9(this),this.schema=new ZN,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,i)=>{i[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),M9(this),this.document.registerPostFixer(t6),this.on("insertContent",(e,[i,n])=>{e.return=Y9(this,i,n)}),this.on("insertObject",(e,[i,n,r])=>{e.return=J9(this,i,n,r)}),this.on("canEditAt",e=>{const i=!this.document.isReadOnly;e.return=i,i||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new ba,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(i){/* istanbul ignore next -- @preserve */A.rethrowUnexpectedError(i,this)}}enqueueChange(e,i){try{e?typeof e=="function"?(i=e,e=new ba):e instanceof ba||(e=new ba(e)):e=new ba,this._pendingChanges.push({batch:e,callback:i}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(n){/* istanbul ignore next -- @preserve */A.rethrowUnexpectedError(n,this)}}applyOperation(e){e._execute()}insertContent(e,i,n,...r){const o=Dw(i,n);return this.fire("insertContent",[e,o,n,...r])}insertObject(e,i,n,r,...o){const l=Dw(i,n);return this.fire("insertObject",[e,l,r,r,...o])}deleteContent(e,i){N9(this,e,i)}modifySelection(e,i){i8(this,e,i)}getSelectedContent(e){return G9(this,e)}hasContent(e,i={}){const n=e instanceof G?e:G._createIn(e);if(n.isCollapsed)return!1;const{ignoreWhitespaces:r=!1,ignoreMarkers:o=!1}=i;if(!o){for(const l of this.markers.getMarkersIntersectingRange(n))if(l.affectsData)return!0}for(const l of n.getItems())if(this.schema.isContent(l))if(l.is("$textProxy"))if(r){if(l.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){const i=Dw(e);return this.fire("canEditAt",[i])}createPositionFromPath(e,i,n){return new te(e,i,n)}createPositionAt(e,i){return te._createAt(e,i)}createPositionAfter(e){return te._createAfter(e)}createPositionBefore(e){return te._createBefore(e)}createRange(e,i){return new G(e,i)}createRangeIn(e){return G._createIn(e)}createRangeOn(e){return G._createOn(e)}createSelection(...e){return new Ln(...e)}createBatch(e){return new ba(e)}createOperationFromJSON(e){return w9.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const i=this._pendingChanges[0].batch;this._currentWriter=new R9(this,i);const n=this._pendingChanges[0].callback(this._currentWriter);e.push(n),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function Dw(s,t){if(s)return s instanceof Ln||s instanceof Rs?s:s instanceof Ml?t||t===0?new Ln(s,t):s.is("rootElement")?new Ln(s,"in"):new Ln(s,"on"):new Ln(s)}class u8 extends Qr{constructor(){super(...arguments);p(this,"domEventType","click")}onDomEvent(e){this.fire(e.type,e)}}class hp extends Qr{constructor(){super(...arguments);p(this,"domEventType",["mousedown","mouseup","mouseover","mouseout"])}onDomEvent(e){this.fire(e.type,e)}}class h8 extends Qr{constructor(){super(...arguments);p(this,"domEventType",["touchstart","touchend","touchmove"])}onDomEvent(e){this.fire(e.type,e)}}class zn{constructor(t){p(this,"document");this.document=t}createDocumentFragment(t){return new bl(this.document,t)}createElement(t,e,i){return new Lr(this.document,t,e,i)}createText(t){return new Ii(this.document,t)}clone(t,e=!1){return t._clone(e)}appendChild(t,e){return e._appendChild(t)}insertChild(t,e,i){return i._insertChild(t,e)}removeChildren(t,e,i){return i._removeChildren(t,e)}remove(t){const e=t.parent;return e?this.removeChildren(e.getChildIndex(t),1,e):[]}replace(t,e){const i=t.parent;if(i){const n=i.getChildIndex(t);return this.removeChildren(n,1,i),this.insertChild(n,e,i),!0}return!1}unwrapElement(t){const e=t.parent;if(e){const i=e.getChildIndex(t);this.remove(t),this.insertChild(i,t.getChildren(),e)}}rename(t,e){const i=new Lr(this.document,t,e.getAttributes(),e.getChildren());return this.replace(e,i)?i:null}setAttribute(t,e,i){i._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,i){As(t)&&i===void 0?e._setStyle(t):i._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,i){i._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}createPositionAt(t,e){return we._createAt(t,e)}createPositionAfter(t){return we._createAfter(t)}createPositionBefore(t){return we._createBefore(t)}createRange(t,e){return new ze(t,e)}createRangeOn(t){return ze._createOn(t)}createRangeIn(t){return ze._createIn(t)}createSelection(...t){return new Er(...t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const d8=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,f8=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,m8=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,g8=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,p8=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,w8=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,b8=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function g6(s){return s.startsWith("#")?d8.test(s):s.startsWith("rgb")?f8.test(s)||m8.test(s):s.startsWith("hsl")?g8.test(s)||p8.test(s):b8.has(s.toLowerCase())}const O8=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function x8(s){return O8.includes(s)}const y8=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function Bx(s){return y8.test(s)}const v8=/^[+-]?[0-9]*([.][0-9]+)?%$/;function _8(s){return v8.test(s)}const k8=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function S8(s){return k8.includes(s)}const C8=["center","top","bottom","left","right"];function P8(s){return C8.includes(s)}const T8=["fixed","scroll","local"];function E8(s){return T8.includes(s)}const A8=/^url\(/;function I8(s){return A8.test(s)}function Ku(s=""){if(s==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const t=$x(s),e=t[0],i=t[2]||e,n=t[1]||e,r=t[3]||n;return{top:e,bottom:i,right:n,left:r}}function km(s){return t=>{const{top:e,right:i,bottom:n,left:r}=t,o=[];return[e,i,r,n].every(l=>!!l)?o.push([s,R8(t)]):(e&&o.push([s+"-top",e]),i&&o.push([s+"-right",i]),n&&o.push([s+"-bottom",n]),r&&o.push([s+"-left",r])),o}}function R8({top:s,right:t,bottom:e,left:i}){const n=[];return i!==t?n.push(s,t,e,i):e!==s?n.push(s,t,e):t!==s?n.push(s,t):n.push(s),n.join(" ")}function V8(s){return t=>({path:s,value:Ku(t)})}function $x(s){const t=s.trim().slice(0,1500).matchAll(w8);return Array.from(t).map(e=>e[0])}function p6(s){s.setNormalizer("background",M8()),s.setNormalizer("background-color",L8()),s.setReducer("background",B8()),s.setStyleRelation("background",["background-color"])}function M8(){return s=>{const t={},e=$x(s);for(const i of e)S8(i)?(t.repeat=t.repeat||[],t.repeat.push(i)):P8(i)?(t.position=t.position||[],t.position.push(i)):E8(i)?t.attachment=i:g6(i)?t.color=i:I8(i)&&(t.image=i);return{path:"background",value:t}}}function L8(){return s=>({path:"background.color",value:s})}function B8(){return s=>{const t=[];return t.push(["background-color",s.color]),t}}function w6(s){s.setNormalizer("border",$8()),s.setNormalizer("border-top",Bf("top")),s.setNormalizer("border-right",Bf("right")),s.setNormalizer("border-bottom",Bf("bottom")),s.setNormalizer("border-left",Bf("left")),s.setNormalizer("border-color",Nw("color")),s.setNormalizer("border-width",Nw("width")),s.setNormalizer("border-style",Nw("style")),s.setNormalizer("border-top-color",jn("color","top")),s.setNormalizer("border-top-style",jn("style","top")),s.setNormalizer("border-top-width",jn("width","top")),s.setNormalizer("border-right-color",jn("color","right")),s.setNormalizer("border-right-style",jn("style","right")),s.setNormalizer("border-right-width",jn("width","right")),s.setNormalizer("border-bottom-color",jn("color","bottom")),s.setNormalizer("border-bottom-style",jn("style","bottom")),s.setNormalizer("border-bottom-width",jn("width","bottom")),s.setNormalizer("border-left-color",jn("color","left")),s.setNormalizer("border-left-style",jn("style","left")),s.setNormalizer("border-left-width",jn("width","left")),s.setExtractor("border-top",$f("top")),s.setExtractor("border-right",$f("right")),s.setExtractor("border-bottom",$f("bottom")),s.setExtractor("border-left",$f("left")),s.setExtractor("border-top-color","border.color.top"),s.setExtractor("border-right-color","border.color.right"),s.setExtractor("border-bottom-color","border.color.bottom"),s.setExtractor("border-left-color","border.color.left"),s.setExtractor("border-top-width","border.width.top"),s.setExtractor("border-right-width","border.width.right"),s.setExtractor("border-bottom-width","border.width.bottom"),s.setExtractor("border-left-width","border.width.left"),s.setExtractor("border-top-style","border.style.top"),s.setExtractor("border-right-style","border.style.right"),s.setExtractor("border-bottom-style","border.style.bottom"),s.setExtractor("border-left-style","border.style.left"),s.setReducer("border-color",km("border-color")),s.setReducer("border-style",km("border-style")),s.setReducer("border-width",km("border-width")),s.setReducer("border-top",Qf("top")),s.setReducer("border-right",Qf("right")),s.setReducer("border-bottom",Qf("bottom")),s.setReducer("border-left",Qf("left")),s.setReducer("border",D8()),s.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),s.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),s.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),s.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),s.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),s.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),s.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),s.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function $8(){return s=>{const{color:t,style:e,width:i}=b6(s);return{path:"border",value:{color:Ku(t),style:Ku(e),width:Ku(i)}}}}function Bf(s){return t=>{const{color:e,style:i,width:n}=b6(t),r={};return e!==void 0&&(r.color={[s]:e}),i!==void 0&&(r.style={[s]:i}),n!==void 0&&(r.width={[s]:n}),{path:"border",value:r}}}function Nw(s){return t=>({path:"border",value:Q8(t,s)})}function Q8(s,t){return{[t]:Ku(s)}}function jn(s,t){return e=>({path:"border",value:{[s]:{[t]:e}}})}function $f(s){return(t,e)=>{if(e.border)return $u(e.border,s)}}function $u(s,t){const e={};return s.width&&s.width[t]&&(e.width=s.width[t]),s.style&&s.style[t]&&(e.style=s.style[t]),s.color&&s.color[t]&&(e.color=s.color[t]),e}function b6(s){const t={},e=$x(s);for(const i of e)Bx(i)||/thin|medium|thick/.test(i)?t.width=i:x8(i)?t.style=i:t.color=i;return t}function D8(){return t=>{const e=$u(t,"top"),i=$u(t,"right"),n=$u(t,"bottom"),r=$u(t,"left"),o=[e,i,n,r],l={width:s(o,"width"),style:s(o,"style"),color:s(o,"color")},a=Ra(l,"all");return a.length?a:[...Object.entries(l).reduce((h,[f,m])=>(m&&(h.push([`border-${f}`,m]),o.forEach(w=>delete w[f])),h),[]),...Ra(e,"top"),...Ra(i,"right"),...Ra(n,"bottom"),...Ra(r,"left")]};function s(t,e){return t.map(i=>i[e]).reduce((i,n)=>i==n?i:null)}}function Qf(s){return t=>Ra(t,s)}function Ra(s,t){const e=[];if(s&&s.width&&e.push("width"),s&&s.style&&e.push("style"),s&&s.color&&e.push("color"),e.length==3){const i=e.map(n=>s[n]).join(" ");return[t=="all"?["border",i]:[`border-${t}`,i]]}return t=="all"?[]:e.map(i=>[`border-${t}-${i}`,s[i]])}function N8(s){s.setNormalizer("padding",V8("padding")),s.setNormalizer("padding-top",t=>({path:"padding.top",value:t})),s.setNormalizer("padding-right",t=>({path:"padding.right",value:t})),s.setNormalizer("padding-bottom",t=>({path:"padding.bottom",value:t})),s.setNormalizer("padding-left",t=>({path:"padding.left",value:t})),s.setReducer("padding",km("padding")),s.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class O6{constructor(t){p(this,"crashes",[]);p(this,"state","initializing");p(this,"_crashNumberLimit");p(this,"_now",Date.now);p(this,"_minimumNonErrorTimePeriod");p(this,"_boundErrorHandler");p(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof t.crashNumberLimit=="number"?t.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof t.minimumNonErrorTimePeriod=="number"?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=e=>{const i="error"in e?e.error:e.reason;i instanceof Error&&this._handleError(i,e)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}off(t,e){this._listeners[t]=this._listeners[t].filter(i=>i!==e)}_fire(t,...e){const i=this._listeners[t]||[];for(const n of i)n.apply(this,[null,...e])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e instanceof ErrorEvent?e.filename:void 0,lineno:e instanceof ErrorEvent?e.lineno:void 0,colno:e instanceof ErrorEvent?e.colno:void 0,date:this._now()});const i=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:i}),i?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&t.context!==void 0&&t.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(t)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const t=this.crashes[this.crashes.length-1].date,e=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(t-e)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function k1(s,t=new Set){const e=[s],i=new Set;let n=0;for(;e.length>n;){const r=e[n++];if(!(i.has(r)||!F8(r)||t.has(r)))if(i.add(r),Symbol.iterator in r)try{for(const o of r)e.push(o)}catch{}else for(const o in r)o!=="defaultValue"&&e.push(r[o])}return i}function F8(s){const t=Object.prototype.toString.call(s),e=typeof s;return!(e==="number"||e==="boolean"||e==="string"||e==="symbol"||e==="function"||t==="[object Date]"||t==="[object RegExp]"||t==="[object Module]"||s===void 0||s===null||s._watchdogExcluded||s instanceof EventTarget||s instanceof Event)}function x6(s,t,e=new Set){if(s===t&&z8(s))return!0;const i=k1(s,e),n=k1(t,e);for(const r of i)if(n.has(r))return!0;return!1}function z8(s){return typeof s=="object"&&s!==null}class y6 extends O6{constructor(e,i={}){super(i);p(this,"_editor",null);p(this,"_lifecyclePromise",null);p(this,"_throttledSave");p(this,"_data");p(this,"_lastDocumentVersion");p(this,"_elementOrData");p(this,"_initUsingData",!0);p(this,"_editables",{});p(this,"_config");p(this,"_excludedProps");this._throttledSave=tc(this._save.bind(this),typeof i.saveInterval=="number"?i.saveInterval:5e3),e&&(this._creator=(n,r)=>e.create(n,r)),this._destructor=n=>n.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},i=[],n=this._config.rootsAttributes||{},r={};for(const[l,a]of Object.entries(this._data.roots))a.isLoaded?(e[l]="",r[l]=n[l]||{}):i.push(l);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:i,rootsAttributes:r,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(W8),this._initUsingData?this.create(e,o,o.context):Po(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,i=this._config,n){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(i)||{},this._config.context=n,this._creator(e,this._config))).then(r=>{this._editor=r,r.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=r.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(i){console.error(i,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,i=e.model.document.roots.filter(a=>a.isAttached()&&a.rootName!="$graveyard"),{plugins:n}=e,r=n.has("CommentsRepository")&&n.get("CommentsRepository"),o=n.has("TrackChanges")&&n.get("TrackChanges"),l={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};i.forEach(a=>{l.roots[a.rootName]={content:JSON.stringify(Array.from(a.getChildren())),attributes:JSON.stringify(Array.from(a.getAttributes())),isLoaded:a._isLoaded}});for(const a of e.model.markers)a._affectsData&&(l.markers[a.name]={rangeJSON:a.getRange().toJSON(),usingOperation:a._managedUsingOperations,affectsData:a._affectsData});return r&&(l.commentThreads=JSON.stringify(r.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(l.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),l}_getEditables(){const e={};for(const i of this.editor.model.document.getRootNames()){const n=this.editor.ui.getEditableElement(i);n&&(e[i]=n)}return e}_isErrorComingFromThisItem(e){return x6(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return rp(e,(i,n)=>{if(Po(i)||n==="context")return i})}}class W8{constructor(t){p(this,"editor");p(this,"_data");this.editor=t,this._data=t.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",t=>{t.stop(),this.editor.model.enqueueChange({isUndoable:!1},e=>{this._restoreCollaborationData(),this._restoreEditorData(e)}),this.editor.data.fire("ready")},{priority:999})}_createNode(t,e){if("name"in e){const i=t.createElement(e.name,e.attributes);if(e.children)for(const n of e.children)i._appendChild(this._createNode(t,n));return i}else return t.createText(e.data,e.attributes)}_restoreEditorData(t){const e=this.editor;Object.entries(this._data.roots).forEach(([i,{content:n,attributes:r}])=>{const o=JSON.parse(n),l=JSON.parse(r),a=e.model.document.getRoot(i);for(const[c,h]of l)t.setAttribute(c,h,a);for(const c of o){const h=this._createNode(t,c);t.insert(h,a,"end")}}),Object.entries(this._data.markers).forEach(([i,n])=>{const{document:r}=e.model,{rangeJSON:{start:o,end:l},...a}=n,c=r.getRoot(o.root),h=t.createPositionFromPath(c,o.path,o.stickiness),f=t.createPositionFromPath(c,l.path,l.stickiness),m=t.createRange(h,f);t.addMarker(i,{range:m,...a})})}_restoreCollaborationData(){const t=JSON.parse(this._data.commentThreads),e=JSON.parse(this._data.suggestions);t.forEach(i=>{const n=this.editor.config.get("collaboration.channelId"),r=this.editor.plugins.get("CommentsRepository");r.hasCommentThread(i.threadId)&&r.getCommentThread(i.threadId).remove(),r.addCommentThread({channelId:n,...i})}),e.forEach(i=>{const n=this.editor.plugins.get("TrackChangesEditing");if(n.hasSuggestion(i.id)){const r=n.getSuggestion(i.id);r.attributes=i.attributes}else n.addSuggestionData(i)})}}const Ju=Symbol("MainQueueId");class U8 extends O6{constructor(e,i={}){super(i);p(this,"_watchdogs",new Map);p(this,"_watchdogConfig");p(this,"_context",null);p(this,"_contextProps",new Set);p(this,"_actionQueues",new Z8);p(this,"_contextConfig");p(this,"_item");this._watchdogConfig=i,this._creator=n=>e.create(n),this._destructor=n=>n.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(Ju,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const i=cC(e);return Promise.all(i.map(n=>this._actionQueues.enqueue(n.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let r;if(this._watchdogs.has(n.id))throw new Error(`Item with the given id is already added: '${n.id}'.`);if(n.type==="editor")return r=new y6(null,this._watchdogConfig),r.setCreator(n.creator),r._setExcludedProperties(this._contextProps),n.destructor&&r.setDestructor(n.destructor),this._watchdogs.set(n.id,r),r.on("error",(o,{error:l,causesRestart:a})=>{this._fire("itemError",{itemId:n.id,error:l}),a&&this._actionQueues.enqueue(n.id,()=>new Promise(c=>{const h=()=>{r.off("restart",h),this._fire("itemRestart",{itemId:n.id}),c()};r.on("restart",h)}))}),r.create(n.sourceElementOrData,n.config,this._context);throw new Error(`Not supported item type: '${n.type}'.`)})))}remove(e){const i=cC(e);return Promise.all(i.map(n=>this._actionQueues.enqueue(n,()=>{const r=this._getWatchdog(n);return this._watchdogs.delete(n),r.destroy()})))}destroy(){return this._actionQueues.enqueue(Ju,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Ju,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=k1(this._context),Promise.all(Array.from(this._watchdogs.values()).map(i=>(i._setExcludedProperties(this._contextProps),i.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(i=>i.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const i=this._watchdogs.get(e);if(!i)throw new Error(`Item with the given id was not registered: ${e}.`);return i}_isErrorComingFromThisItem(e){for(const i of this._watchdogs.values())if(i._isErrorComingFromThisItem(e))return!1;return x6(this._context,e.context)}}class Z8{constructor(){p(this,"_onEmptyCallbacks",[]);p(this,"_queues",new Map);p(this,"_activeActions",0)}onEmpty(t){this._onEmptyCallbacks.push(t)}enqueue(t,e){const i=t===Ju;this._activeActions++,this._queues.get(t)||this._queues.set(t,Promise.resolve());const r=(i?Promise.all(this._queues.values()):Promise.all([this._queues.get(Ju),this._queues.get(t)])).then(e),o=r.catch(()=>{});return this._queues.set(t,o),r.finally(()=>{this._activeActions--,this._queues.get(t)===o&&this._activeActions===0&&this._onEmptyCallbacks.forEach(l=>l())})}}function cC(s){return Array.isArray(s)?s:[s]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class F extends ct(){constructor(e){super();p(this,"editor");p(this,"_disableStack",new Set);this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",uC,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",uC),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function uC(s){s.return=!1,s.stop()}class Le extends ct(){constructor(e){super();p(this,"editor");p(this,"_isEnabledBasedOnSelection");p(this,"_affectsData");p(this,"_disableStack");this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",i=>{if(!this.affectsData)return;const n=e.model.document.selection,o=!(n.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(n);(e.isReadOnly||this._isEnabledBasedOnSelection&&!o)&&(i.return=!1,i.stop())},{priority:"highest"}),this.on("execute",i=>{this.isEnabled||i.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",hC,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",hC),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function hC(s){s.return=!1,s.stop()}class v6 extends gt(){constructor(e,i=[],n=[]){super();p(this,"_context");p(this,"_plugins",new Map);p(this,"_availablePlugins");p(this,"_contextPlugins");this._context=e,this._availablePlugins=new Map;for(const r of i)r.pluginName&&this._availablePlugins.set(r.pluginName,r);this._contextPlugins=new Map;for(const[r,o]of n)this._contextPlugins.set(r,o),this._contextPlugins.set(o,r),r.pluginName&&this._availablePlugins.set(r.pluginName,r)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const i=this._plugins.get(e);if(!i){let n=e;throw typeof e=="function"&&(n=e.pluginName||e.name),new A("plugincollection-plugin-not-loaded",this._context,{plugin:n})}return i}has(e){return this._plugins.has(e)}init(e,i=[],n=[]){const r=this,o=this._context;O(e),k(e);const l=e.filter($=>!m($,i)),a=[...v(l)];q(a,n);const c=Q(a);return D(c,"init").then(()=>D(c,"afterInit")).then(()=>c);function h($){return typeof $=="function"}function f($){return h($)&&!!$.isContextPlugin}function m($,_){return _.some(R=>R===$||w($)===R||w(R)===$)}function w($){return h($)?$.pluginName||$.name:$}function O($,_=new Set){$.forEach(R=>{h(R)&&(_.has(R)||(_.add(R),R.pluginName&&!r._availablePlugins.has(R.pluginName)&&r._availablePlugins.set(R.pluginName,R),R.requires&&O(R.requires,_)))})}function v($,_=new Set){return $.map(R=>h(R)?R:r._availablePlugins.get(R)).reduce((R,U)=>_.has(U)?R:(_.add(U),U.requires&&(k(U.requires,U),v(U.requires,_).forEach(Y=>R.add(Y))),R.add(U)),new Set)}function k($,_=null){$.map(R=>h(R)?R:r._availablePlugins.get(R)||R).forEach(R=>{C(R,_),P(R,_),V(R,_)})}function C($,_){if(!h($))throw _?new A("plugincollection-soft-required",o,{missingPlugin:$,requiredBy:w(_)}):new A("plugincollection-plugin-not-found",o,{plugin:$})}function P($,_){if(f(_)&&!f($))throw new A("plugincollection-context-required",o,{plugin:w($),requiredBy:w(_)})}function V($,_){if(_&&m($,i))throw new A("plugincollection-required",o,{plugin:w($),requiredBy:w(_)})}function Q($){return $.map(_=>{let R=r._contextPlugins.get(_);return R=R||new _(o),r._add(_,R),R})}function D($,_){return $.reduce((R,U)=>!U[_]||r._contextPlugins.has(U)?R:R.then(U[_].bind(U)),Promise.resolve())}function q($,_){for(const R of _){if(typeof R!="function")throw new A("plugincollection-replace-plugin-invalid-type",null,{pluginItem:R});const U=R.pluginName;if(!U)throw new A("plugincollection-replace-plugin-missing-name",null,{pluginItem:R});if(R.requires&&R.requires.length)throw new A("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:U});const Y=r._availablePlugins.get(U);if(!Y)throw new A("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:U});const X=$.indexOf(Y);if(X===-1){if(r._contextPlugins.has(Y))return;throw new A("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:U})}if(Y.requires&&Y.requires.length)throw new A("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:U});$.splice(X,1,R),r._availablePlugins.set(U,R)}}}destroy(){const e=[];for(const[,i]of this)typeof i.destroy=="function"&&!this._contextPlugins.has(i)&&e.push(i.destroy());return Promise.all(e)}_add(e,i){this._plugins.set(e,i);const n=e.pluginName;if(n){if(this._plugins.has(n))throw new A("plugincollection-plugin-name-conflict",null,{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:e});this._plugins.set(n,i)}}}var Om;let dC=(Om=class{constructor(t){p(this,"config");p(this,"plugins");p(this,"locale");p(this,"t");p(this,"editors");p(this,"_contextOwner",null);const{translations:e,...i}=t||{};this.config=new mA(i,this.constructor.defaultConfig);const n=this.constructor.builtinPlugins;this.config.define("plugins",n),this.plugins=new v6(this,n);const r=this.config.get("language")||{};this.locale=new bQ({uiLanguage:typeof r=="string"?r:r.ui,contentLanguage:this.config.get("language.content"),translations:e}),this.t=this.locale.t,this.editors=new vi}initPlugins(){const t=this.config.get("plugins")||[],e=this.config.get("substitutePlugins")||[];for(const i of t.concat(e)){if(typeof i!="function")throw new A("context-initplugins-constructor-only",null,{Plugin:i});if(i.isContextPlugin!==!0)throw new A("context-initplugins-invalid-plugin",null,{Plugin:i})}return this.plugins.init(t,[],e)}destroy(){return Promise.all(Array.from(this.editors,t=>t.destroy())).then(()=>this.plugins.destroy())}_addEditor(t,e){if(this._contextOwner)throw new A("context-addeditor-private-context");this.editors.add(t),e&&(this._contextOwner=t)}_removeEditor(t){return this.editors.has(t)&&this.editors.remove(t),this._contextOwner===t?this.destroy():Promise.resolve()}_getEditorConfig(){const t={};for(const e of this.config.names())["plugins","removePlugins","extraPlugins"].includes(e)||(t[e]=this.config.get(e));return t}static create(t){return new Promise(e=>{const i=new this(t);e(i.initPlugins().then(()=>i))})}},p(Om,"defaultConfig"),p(Om,"builtinPlugins"),Om);class dp extends ct(){constructor(e){super();p(this,"context");this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}class H8{constructor(){p(this,"_commands");this._commands=new Map}add(t,e){this._commands.set(t,e)}get(t){return this._commands.get(t)}execute(t,...e){const i=this.get(t);if(!i)throw new A("commandcollection-command-not-found",this,{commandName:t});return i.execute(...e)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const t of this.commands())t.destroy()}}class q8 extends bt{constructor(e){super();p(this,"editor");this.editor=e}set(e,i,n={}){if(typeof i=="string"){const r=i;i=(o,l)=>{this.editor.execute(r),l()}}super.set(e,i,n)}}const Fw="contentEditing",fC="common";class X8{constructor(t){p(this,"keystrokeInfos",new Map);p(this,"_editor");this._editor=t;const e=t.config.get("menuBar.isVisible"),i=t.locale.t;this.addKeystrokeInfoCategory({id:Fw,label:i("Content editing keystrokes"),description:i("These keyboard shortcuts allow for quick access to content editing features.")});const n=[{label:i("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:i("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:i("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:i("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:i("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:i("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];e&&n.push({label:i("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:i("User interface and content navigation keystrokes"),description:i("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:n}]})}addKeystrokeInfoCategory({id:t,label:e,description:i,groups:n}){this.keystrokeInfos.set(t,{id:t,label:e,description:i,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:t,id:fC}),n&&n.forEach(r=>{this.addKeystrokeInfoGroup({categoryId:t,...r})})}addKeystrokeInfoGroup({categoryId:t=Fw,id:e,label:i,keystrokes:n}){const r=this.keystrokeInfos.get(t);if(!r)throw new A("accessibility-unknown-keystroke-info-category",this._editor,{groupId:e,categoryId:t});r.groups.set(e,{id:e,label:i,keystrokes:n||[]})}addKeystrokeInfos({categoryId:t=Fw,groupId:e=fC,keystrokes:i}){if(!this.keystrokeInfos.has(t))throw new A("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:t,keystrokes:i});const n=this.keystrokeInfos.get(t);if(!n.groups.has(e))throw new A("accessibility-unknown-keystroke-info-group",this._editor,{groupId:e,categoryId:t,keystrokes:i});n.groups.get(e).keystrokes.push(...i)}}function j8(s){return{sessionId:eF(),pageSessionId:tF(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:G8(s),plugins:Y8(s.plugins),distribution:K8(),env:J8(),integration:Object.create(null),menuBar:{isVisible:!!s.config.get("menuBar.isVisible")},language:{ui:s.locale.uiLanguage,content:s.locale.contentLanguage},toolbar:{main:zw(s.config.get("toolbar")),block:zw(s.config.get("blockToolbar")),balloon:zw(s.config.get("balloonToolbar"))}}}function G8(s){return Object.getPrototypeOf(s).constructor.editorName}function Y8(s){return Array.from(s).filter(([t])=>!!t.pluginName).map(([t])=>{const{pluginName:e,isContextPlugin:i,isOfficialPlugin:n,isPremiumPlugin:r}=t;return{isContext:!!i,isOfficial:!!n,isPremium:!!r,name:e}})}function zw(s){if(!s)return;const t=Array.isArray(s)?{items:s}:s,e=r(t.items||[]);return{isMultiline:e.includes("-"),shouldNotGroupWhenFull:!!t.shouldNotGroupWhenFull,items:n(e)};function n(o){return o.filter(l=>l!=="|"&&l!=="-")}function r(o){return o.flatMap(l=>typeof l=="string"?[l]:r(l.items))}}function K8(){return{channel:window[Symbol.for("cke distribution")]||"sh"}}function J8(){let s="unknown",t="unknown";return Ie.isMac?s="mac":Ie.isWindows?s="windows":Ie.isiOS?s="ios":Ie.isAndroid&&(s="android"),Ie.isGecko?t="gecko":Ie.isBlink?t="blink":Ie.isSafari&&(t="safari"),{os:s,browser:t}}function eF(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",ii()),localStorage.getItem("__ckeditor-session-id")}function tF(){return ue.window.CKEDITOR_PAGE_SESSION_ID=ue.window.CKEDITOR_PAGE_SESSION_ID||ii(),ue.window.CKEDITOR_PAGE_SESSION_ID}class Va extends ct(){constructor(e={}){super();p(this,"accessibility");p(this,"commands");p(this,"config");p(this,"conversion");p(this,"data");p(this,"editing");p(this,"locale");p(this,"model");p(this,"plugins");p(this,"keystrokes");p(this,"t");p(this,"_context");p(this,"_readOnlyLocks");if("sanitizeHtml"in e)throw new A("editor-config-sanitizehtml-not-supported");const i=this.constructor,{translations:n,...r}=i.defaultConfig||{},{translations:o=n,...l}=e,a=e.language||r.language;this._context=e.context||new dC({language:a,translations:o}),this._context._addEditor(this,!e.context);const c=Array.from(i.builtinPlugins||[]);this.config=new mA(l,r),this.config.define("plugins",c),this.config.define(this._context._getEditorConfig()),f(this.config),this.plugins=new v6(this,c,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new H8,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new c8,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const h=new qQ;this.data=new f9(this.model,h),this.editing=new UN(this.model,h),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new g9([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new q8(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new X8(this),m(this);function f(w){let O=w.get("licenseKey");if(!O&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(O=window.CKEDITOR_GLOBAL_LICENSE_KEY,w.set("licenseKey",O)),!O)throw new A("license-key-missing")}function m(w){const O=w.config.get("licenseKey"),v=window[Symbol.for("cke distribution")]||"sh";function k(U){w.enableReadOnlyMode(Symbol("invalidLicense")),w._showLicenseError(U)}function C(U){const Y=U.split(".");return Y.length!=3?null:Y[1]}function P(U){return["exp","jti","vc"].every(X=>X in U)}function V(U){return Object.getOwnPropertyNames(U).sort().filter(j=>j!="vc"&&U[j]!=null).map(j=>U[j])}function Q(U){const{hostname:Y}=new URL(window.location.href);if(U.includes(Y))return!0;const X=Y.split(".");return U.filter(j=>j.includes("*")).map(j=>j.split(".")).filter(j=>j.length<=X.length).map(j=>Array(X.length-j.length).fill(j[0]==="*"?"*":"").concat(j)).some(j=>X.every((oe,xe)=>j[xe]===oe||j[xe]==="*"))}function D(U){const Y=U[0].toUpperCase()+U.slice(1),X=U==="evaluation"?"an":"a";console.info(`%cCKEditor 5 ${Y} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(`⚠️ You are using ${X} ${U} license of CKEditor 5${U==="trial"?" which is for evaluation purposes only":""}. For production usage, please obtain a production license at https://portal.ckeditor.com/`)}if(O=="GPL"){v=="cloud"&&k("distributionChannel");return}const q=C(O);if(!q){k("invalid");return}const $=vx(q);if(!$){k("invalid");return}if(!P($)){k("invalid");return}if($.distributionChannel&&!ut($.distributionChannel).includes(v)){k("distributionChannel");return}if(CQ(V($))!=$.vc.toLowerCase()){k("invalid");return}if(new Date($.exp*1e3)<I$){k("expired");return}const R=$.licensedHosts;if(R&&R.length>0&&!Q(R)){k("domainLimit");return}if(["evaluation","trial"].includes($.licenseType)&&$.exp*1e3<Date.now()){k("expired");return}if(["development","evaluation","trial"].includes($.licenseType)){const{licenseType:U}=$;window.CKEDITOR_WARNING_SUPPRESSIONS=window.CKEDITOR_WARNING_SUPPRESSIONS||{},window.CKEDITOR_WARNING_SUPPRESSIONS[U]||(D(U),window.CKEDITOR_WARNING_SUPPRESSIONS[U]=!0)}if(["evaluation","trial"].includes($.licenseType)){const U=$.licenseType,Y=setTimeout(()=>{k(`${U}Limit`)},6e5);w.on("destroy",()=>{clearTimeout(Y)})}$.usageEndpoint&&w.once("ready",()=>{const U={requestId:ii(),requestTime:Math.round(Date.now()/1e3),license:O,editor:iF(w)};w._sendUsageRequest($.usageEndpoint,U).then(Y=>{const{status:X,message:j}=Y;j&&console.warn(j),X!="ok"&&k("usageLimit")},()=>{ig("license-key-validation-endpoint-not-reachable",{url:$.usageEndpoint})})},{priority:"high"})}}static get editorName(){return"Editor"}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new A("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new A("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new A("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,i=e.get("plugins"),n=e.get("removePlugins")||[],r=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(i.concat(r),n,o)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(i=>this.once("ready",i))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...i){try{return this.commands.execute(e,...i)}catch(n){/* istanbul ignore next -- @preserve */A.rethrowUnexpectedError(n,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}_showLicenseError(e,i){setTimeout(()=>{if(e=="invalid")throw new A("invalid-license-key");if(e=="expired")throw new A("license-key-expired");if(e=="domainLimit")throw new A("license-key-domain-limit");if(e=="featureNotAllowed")throw new A("license-key-plugin-not-allowed",null,{pluginName:i});if(e=="evaluationLimit")throw new A("license-key-evaluation-limit");if(e=="trialLimit")throw new A("license-key-trial-limit");if(e=="developmentLimit")throw new A("license-key-development-limit");if(e=="usageLimit")throw new A("license-key-usage-limit");if(e=="distributionChannel")throw new A("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(e,i){const n=new Headers({"Content-Type":"application/json"}),r=await fetch(new URL(e),{method:"POST",headers:n,body:JSON.stringify(i)});if(!r.ok)throw new Error(`HTTP Response: ${r.status}`);return r.json()}}p(Va,"defaultConfig"),p(Va,"builtinPlugins"),p(Va,"Context",dC),p(Va,"EditorWatchdog",y6),p(Va,"ContextWatchdog",U8);function iF(s){const t=j8(s);function e(i,n){if(Co(t,i)!==void 0)throw new A("editor-usage-data-path-already-set",{path:i});eA(t,i,n)}return s.fire("collectUsageData",{setUsageData:e}),t}function nF(s){if(!eg(s.updateSourceElement))throw new A("attachtoform-missing-elementapi-interface",s);const t=s.sourceElement;if(sF(t)&&t.form){let e;const i=t.form,n=()=>s.updateSourceElement();eg(i.submit)&&(e=i.submit,i.submit=()=>{n(),e.apply(i)}),i.addEventListener("submit",n),s.on("destroy",()=>{i.removeEventListener("submit",n),e&&(i.submit=e)})}}function sF(s){return!!s&&s.tagName.toLowerCase()==="textarea"}function S1(s){class t extends s{constructor(){super(...arguments);p(this,"sourceElement")}updateSourceElement(n){if(!this.sourceElement)throw new A("editor-missing-sourceelement",this);const r=this.config.get("updateSourceElementOnDestroy"),o=this.sourceElement instanceof HTMLTextAreaElement;if(!r&&!o){pS(this.sourceElement,"");return}const l=typeof n=="string"?n:this.data.get();pS(this.sourceElement,l)}}return t}S1.updateSourceElement=S1(Object).prototype.updateSourceElement;class Eo extends dp{constructor(){super(...arguments);p(this,"_actions")}static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new vi({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new A("pendingactions-add-invalid-message",this);const i=new(ct());return i.set("message",e),this._actions.add(i),this.hasAny=!0,i}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let rF=class extends ct(){constructor(){super();p(this,"total");p(this,"_reader");p(this,"_data");const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=i=>{this.loaded=i.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const i=this._reader;return this.total=e.size,new Promise((n,r)=>{i.onload=()=>{const o=i.result;this._data=o,n(o)},i.onerror=()=>{r("error")},i.onabort=()=>{r("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}};class bo extends F{constructor(){super(...arguments);p(this,"loaders",new vi);p(this,"_loadersMap",new Map);p(this,"_pendingAction",null)}static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[Eo]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,i)=>i?e/i*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return We("filerepository-no-upload-adapter"),null;const i=new mC(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(i),this._loadersMap.set(e,i),e instanceof Promise&&i.file.then(n=>{this._loadersMap.set(n,i)}).catch(()=>{}),i.on("change:uploaded",()=>{let n=0;for(const r of this.loaders)n+=r.uploaded;this.uploaded=n}),i.on("change:uploadTotal",()=>{let n=0;for(const r of this.loaders)r.uploadTotal&&(n+=r.uploadTotal);this.uploadTotal=n}),i}destroyLoader(e){const i=e instanceof mC?e:this.getLoader(e);i._destroy(),this.loaders.remove(i),this._loadersMap.forEach((n,r)=>{n===i&&this._loadersMap.delete(r)})}_updatePendingAction(){const e=this.editor.plugins.get(Eo);if(this.loaders.length){if(!this._pendingAction){const i=this.editor.t,n=r=>`${i("Upload in progress")} ${parseInt(r)}%.`;this._pendingAction=e.add(n(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",n)}}else e.remove(this._pendingAction),this._pendingAction=null}}class mC extends ct(){constructor(e,i){super();p(this,"id");p(this,"_filePromiseWrapper");p(this,"_adapter");p(this,"_reader");this.id=ii(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=i(this),this._reader=new rF,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(n,r)=>r?n/r*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new A("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new A("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const i={};return i.promise=new Promise((n,r)=>{i.rejecter=r,i.isFulfilled=!1,e.then(o=>{i.isFulfilled=!0,n(o)}).catch(o=>{i.isFulfilled=!0,r(o)})}),i}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */var gC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>',oF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',lF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',aF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',_6='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',cF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',uF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',hF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',k6='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',pC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',Qx='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',xc='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',S6='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',Jh='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',dF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037H5.06l5.058-5.078L6.617 9.15a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v4.354a3.478 3.478 0 0 1 1.5.049V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.147 2.147 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.642-3.11 2.129 2.129 0 0 0-1.873-.978ZM8.089 17.635v2.388h2.389l7.046-7.046-2.39-2.39-7.045 7.048Zm11.282-6.507a.637.637 0 0 0 .139-.692.603.603 0 0 0-.139-.205l-1.49-1.488a.63.63 0 0 0-.899 0l-1.166 1.163 2.39 2.39 1.165-1.168Z"/></svg>',wC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',fF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>',mF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',gF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',pF='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',wF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',fp='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>',bF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8.5 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 8.5 8.25Z"/><path clip-rule="evenodd" d="M14 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 14 8.25Z"/><path clip-rule="evenodd" d="M7.127 12.088a.75.75 0 1 0-1.254.824C6.88 14.444 8.423 15.25 10 15.25c1.578 0 3.12-.805 4.127-2.338a.75.75 0 0 0-1.254-.824C12.13 13.221 11.048 13.75 10 13.75c-1.047 0-2.13-.529-2.873-1.662Z"/><path d="M10 19a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0-1.5a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"/></svg>',OF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',xF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',Ww='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',yF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',vF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',_F='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',kF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',SF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',C6='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',CF='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>',PF='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>',TF='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',EF='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>',AF='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>',IF='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>',RF='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>',VF='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>',MF='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>',LF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',P6='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',Dx='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',cg='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',BF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',Nx='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',ug='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',T6='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',E6='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',A6='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',$F='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',QF='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',DF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',NF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',FF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',zF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',C1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',WF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',UF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',Ll='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',ZF=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`,bC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',HF='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',qF='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',XF=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.734 6.375H1.75a.75.75 0 0 1 0-1.5h1.984a2.626 2.626 0 0 1 5.032 0h9.48a.75.75 0 0 1 0 1.5h-9.48a2.626 2.626 0 0 1-5.032 0Zm1.141-.75a1.375 1.375 0 1 1 2.75 0 1.375 1.375 0 0 1-2.75 0ZM16.263 14.625h1.983a.75.75 0 0 1 0 1.5h-1.983a2.626 2.626 0 0 1-5.033 0H1.75a.75.75 0 0 1 0-1.5h9.48a2.626 2.626 0 0 1 5.033 0Zm-1.142.75a1.375 1.375 0 1 1-2.75 0 1.375 1.375 0 0 1 2.75 0Z"/></svg>
`,jF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m6.395 9.196 2.545-.007V6.498a.598.598 0 0 1 .598-.598h.299a.598.598 0 0 1 .598.598v6.877a.598.598 0 0 1-.598.598h-.299a.598.598 0 0 1-.598-.598v-2.691l-2.545.007v2.691a.598.598 0 0 1-.598.598h-.299a.598.598 0 0 1-.598-.598V6.505a.598.598 0 0 1 .598-.598h.299a.598.598 0 0 1 .598.598v2.691Z"/><path d="M15.094 13.417V6.462a.562.562 0 0 0-.562-.562h-.782a1 1 0 0 0-.39.08l-1.017.43a.562.562 0 0 0-.343.517v.197c0 .4.406.67.775.519l.819-.337v6.111c0 .31.251.562.561.562h.377c.31 0 .562-.251.562-.562Z"/><path d="M0 15.417v1.5h1.5v-1.5H0Z"/><path d="M18.5 15.417v1.5H20v-1.5h-1.5Z"/><path d="M18.5 12.333v1.5H20v-1.5h-1.5Z"/><path d="M18.5 9.25v1.5H20v-1.5h-1.5Z"/><path d="M18.5 6.167v1.5H20v-1.5h-1.5Z"/><path d="M0 18.5v.5a1 1 0 0 0 1 1h.5v-1.5H0Z"/><path d="M3.083 18.5V20h1.5v-1.5h-1.5Z"/><path d="M6.167 18.5V20h1.5v-1.5h-1.5Z"/><path d="M9.25 18.5V20h1.5v-1.5h-1.5Z"/><path d="M12.333 18.5V20h1.5v-1.5h-1.5Z"/><path d="M15.417 18.5V20h1.5v-1.5h-1.5Z"/><path d="M18.5 18.5V20h.5a1 1 0 0 0 1-1v-.5h-1.5Z"/><path clip-rule="evenodd" d="M0 1a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v3.583h-1.5V1.5h-17v12.333H0V1Z"/></svg>',OC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z"/></svg>',GF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>',YF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',KF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>',JF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>',ez='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',xC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>',tz='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',iz='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',Fx='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',yC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',nz='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',Uw,vC;function I6(){return vC||(vC=1,Uw={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Uw}var sz=I6();const _C=Gh(sz);var kC={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function SC(s){var t,e=[],i=1,n;if(typeof s=="string")if(_C[s])e=_C[s].slice(),n="rgb";else if(s==="transparent")i=0,n="rgb",e=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(s)){var r=s.slice(1),o=r.length,l=o<=4;i=1,l?(e=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],o===4&&(i=parseInt(r[3]+r[3],16)/255)):(e=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],o===8&&(i=parseInt(r[6]+r[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),n="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(s)){var a=t[1],c=a==="rgb",r=a.replace(/a$/,"");n=r;var o=r==="cmyk"?4:r==="gray"?1:3;e=t[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(m,w){if(/%$/.test(m))return w===o?parseFloat(m)/100:r==="rgb"?parseFloat(m)*255/100:parseFloat(m);if(r[w]==="h"){if(/deg$/.test(m))return parseFloat(m);if(kC[m]!==void 0)return kC[m]}return parseFloat(m)}),a===r&&e.push(1),i=c||e[o]===void 0?1:e[o],e=e.slice(0,o)}else s.length>10&&/[0-9](?:\s|\/)/.test(s)&&(e=s.match(/([0-9]+)/g).map(function(h){return parseFloat(h)}),n=s.match(/([a-z])/ig).join("").toLowerCase());else isNaN(s)?Array.isArray(s)||s.length?(e=[s[0],s[1],s[2]],n="rgb",i=s.length===4?s[3]:1):s instanceof Object&&(s.r!=null||s.red!=null||s.R!=null?(n="rgb",e=[s.r||s.red||s.R||0,s.g||s.green||s.G||0,s.b||s.blue||s.B||0]):(n="hsl",e=[s.h||s.hue||s.H||0,s.s||s.saturation||s.S||0,s.l||s.lightness||s.L||s.b||s.brightness]),i=s.a||s.alpha||s.opacity||1,s.opacity!=null&&(i/=100)):(n="rgb",e=[s>>>16,(s&65280)>>>8,s&255]);return{space:n,values:e,alpha:i}}var Zw,CC;function R6(){if(CC)return Zw;CC=1;const s=I6(),t={};for(const n of Object.keys(s))t[s[n]]=n;const e={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Zw=e;for(const n of Object.keys(e)){if(!("channels"in e[n]))throw new Error("missing channels property: "+n);if(!("labels"in e[n]))throw new Error("missing channel labels property: "+n);if(e[n].labels.length!==e[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:r,labels:o}=e[n];delete e[n].channels,delete e[n].labels,Object.defineProperty(e[n],"channels",{value:r}),Object.defineProperty(e[n],"labels",{value:o})}e.rgb.hsl=function(n){const r=n[0]/255,o=n[1]/255,l=n[2]/255,a=Math.min(r,o,l),c=Math.max(r,o,l),h=c-a;let f,m;c===a?f=0:r===c?f=(o-l)/h:o===c?f=2+(l-r)/h:l===c&&(f=4+(r-o)/h),f=Math.min(f*60,360),f<0&&(f+=360);const w=(a+c)/2;return c===a?m=0:w<=.5?m=h/(c+a):m=h/(2-c-a),[f,m*100,w*100]},e.rgb.hsv=function(n){let r,o,l,a,c;const h=n[0]/255,f=n[1]/255,m=n[2]/255,w=Math.max(h,f,m),O=w-Math.min(h,f,m),v=function(k){return(w-k)/6/O+1/2};return O===0?(a=0,c=0):(c=O/w,r=v(h),o=v(f),l=v(m),h===w?a=l-o:f===w?a=1/3+r-l:m===w&&(a=2/3+o-r),a<0?a+=1:a>1&&(a-=1)),[a*360,c*100,w*100]},e.rgb.hwb=function(n){const r=n[0],o=n[1];let l=n[2];const a=e.rgb.hsl(n)[0],c=1/255*Math.min(r,Math.min(o,l));return l=1-1/255*Math.max(r,Math.max(o,l)),[a,c*100,l*100]},e.rgb.cmyk=function(n){const r=n[0]/255,o=n[1]/255,l=n[2]/255,a=Math.min(1-r,1-o,1-l),c=(1-r-a)/(1-a)||0,h=(1-o-a)/(1-a)||0,f=(1-l-a)/(1-a)||0;return[c*100,h*100,f*100,a*100]};function i(n,r){return(n[0]-r[0])**2+(n[1]-r[1])**2+(n[2]-r[2])**2}return e.rgb.keyword=function(n){const r=t[n];if(r)return r;let o=1/0,l;for(const a of Object.keys(s)){const c=s[a],h=i(n,c);h<o&&(o=h,l=a)}return l},e.keyword.rgb=function(n){return s[n]},e.rgb.xyz=function(n){let r=n[0]/255,o=n[1]/255,l=n[2]/255;r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92,l=l>.04045?((l+.055)/1.055)**2.4:l/12.92;const a=r*.4124+o*.3576+l*.1805,c=r*.2126+o*.7152+l*.0722,h=r*.0193+o*.1192+l*.9505;return[a*100,c*100,h*100]},e.rgb.lab=function(n){const r=e.rgb.xyz(n);let o=r[0],l=r[1],a=r[2];o/=95.047,l/=100,a/=108.883,o=o>.008856?o**(1/3):7.787*o+16/116,l=l>.008856?l**(1/3):7.787*l+16/116,a=a>.008856?a**(1/3):7.787*a+16/116;const c=116*l-16,h=500*(o-l),f=200*(l-a);return[c,h,f]},e.hsl.rgb=function(n){const r=n[0]/360,o=n[1]/100,l=n[2]/100;let a,c,h;if(o===0)return h=l*255,[h,h,h];l<.5?a=l*(1+o):a=l+o-l*o;const f=2*l-a,m=[0,0,0];for(let w=0;w<3;w++)c=r+1/3*-(w-1),c<0&&c++,c>1&&c--,6*c<1?h=f+(a-f)*6*c:2*c<1?h=a:3*c<2?h=f+(a-f)*(2/3-c)*6:h=f,m[w]=h*255;return m},e.hsl.hsv=function(n){const r=n[0];let o=n[1]/100,l=n[2]/100,a=o;const c=Math.max(l,.01);l*=2,o*=l<=1?l:2-l,a*=c<=1?c:2-c;const h=(l+o)/2,f=l===0?2*a/(c+a):2*o/(l+o);return[r,f*100,h*100]},e.hsv.rgb=function(n){const r=n[0]/60,o=n[1]/100;let l=n[2]/100;const a=Math.floor(r)%6,c=r-Math.floor(r),h=255*l*(1-o),f=255*l*(1-o*c),m=255*l*(1-o*(1-c));switch(l*=255,a){case 0:return[l,m,h];case 1:return[f,l,h];case 2:return[h,l,m];case 3:return[h,f,l];case 4:return[m,h,l];case 5:return[l,h,f]}},e.hsv.hsl=function(n){const r=n[0],o=n[1]/100,l=n[2]/100,a=Math.max(l,.01);let c,h;h=(2-o)*l;const f=(2-o)*a;return c=o*a,c/=f<=1?f:2-f,c=c||0,h/=2,[r,c*100,h*100]},e.hwb.rgb=function(n){const r=n[0]/360;let o=n[1]/100,l=n[2]/100;const a=o+l;let c;a>1&&(o/=a,l/=a);const h=Math.floor(6*r),f=1-l;c=6*r-h,(h&1)!==0&&(c=1-c);const m=o+c*(f-o);let w,O,v;switch(h){default:case 6:case 0:w=f,O=m,v=o;break;case 1:w=m,O=f,v=o;break;case 2:w=o,O=f,v=m;break;case 3:w=o,O=m,v=f;break;case 4:w=m,O=o,v=f;break;case 5:w=f,O=o,v=m;break}return[w*255,O*255,v*255]},e.cmyk.rgb=function(n){const r=n[0]/100,o=n[1]/100,l=n[2]/100,a=n[3]/100,c=1-Math.min(1,r*(1-a)+a),h=1-Math.min(1,o*(1-a)+a),f=1-Math.min(1,l*(1-a)+a);return[c*255,h*255,f*255]},e.xyz.rgb=function(n){const r=n[0]/100,o=n[1]/100,l=n[2]/100;let a,c,h;return a=r*3.2406+o*-1.5372+l*-.4986,c=r*-.9689+o*1.8758+l*.0415,h=r*.0557+o*-.204+l*1.057,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,c=c>.0031308?1.055*c**(1/2.4)-.055:c*12.92,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,a=Math.min(Math.max(0,a),1),c=Math.min(Math.max(0,c),1),h=Math.min(Math.max(0,h),1),[a*255,c*255,h*255]},e.xyz.lab=function(n){let r=n[0],o=n[1],l=n[2];r/=95.047,o/=100,l/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,l=l>.008856?l**(1/3):7.787*l+16/116;const a=116*o-16,c=500*(r-o),h=200*(o-l);return[a,c,h]},e.lab.xyz=function(n){const r=n[0],o=n[1],l=n[2];let a,c,h;c=(r+16)/116,a=o/500+c,h=c-l/200;const f=c**3,m=a**3,w=h**3;return c=f>.008856?f:(c-16/116)/7.787,a=m>.008856?m:(a-16/116)/7.787,h=w>.008856?w:(h-16/116)/7.787,a*=95.047,c*=100,h*=108.883,[a,c,h]},e.lab.lch=function(n){const r=n[0],o=n[1],l=n[2];let a;a=Math.atan2(l,o)*360/2/Math.PI,a<0&&(a+=360);const h=Math.sqrt(o*o+l*l);return[r,h,a]},e.lch.lab=function(n){const r=n[0],o=n[1],a=n[2]/360*2*Math.PI,c=o*Math.cos(a),h=o*Math.sin(a);return[r,c,h]},e.rgb.ansi16=function(n,r=null){const[o,l,a]=n;let c=r===null?e.rgb.hsv(n)[2]:r;if(c=Math.round(c/50),c===0)return 30;let h=30+(Math.round(a/255)<<2|Math.round(l/255)<<1|Math.round(o/255));return c===2&&(h+=60),h},e.hsv.ansi16=function(n){return e.rgb.ansi16(e.hsv.rgb(n),n[2])},e.rgb.ansi256=function(n){const r=n[0],o=n[1],l=n[2];return r===o&&o===l?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(o/255*5)+Math.round(l/255*5)},e.ansi16.rgb=function(n){let r=n%10;if(r===0||r===7)return n>50&&(r+=3.5),r=r/10.5*255,[r,r,r];const o=(~~(n>50)+1)*.5,l=(r&1)*o*255,a=(r>>1&1)*o*255,c=(r>>2&1)*o*255;return[l,a,c]},e.ansi256.rgb=function(n){if(n>=232){const c=(n-232)*10+8;return[c,c,c]}n-=16;let r;const o=Math.floor(n/36)/5*255,l=Math.floor((r=n%36)/6)/5*255,a=r%6/5*255;return[o,l,a]},e.rgb.hex=function(n){const o=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".substring(o.length)+o},e.hex.rgb=function(n){const r=n.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!r)return[0,0,0];let o=r[0];r[0].length===3&&(o=o.split("").map(f=>f+f).join(""));const l=parseInt(o,16),a=l>>16&255,c=l>>8&255,h=l&255;return[a,c,h]},e.rgb.hcg=function(n){const r=n[0]/255,o=n[1]/255,l=n[2]/255,a=Math.max(Math.max(r,o),l),c=Math.min(Math.min(r,o),l),h=a-c;let f,m;return h<1?f=c/(1-h):f=0,h<=0?m=0:a===r?m=(o-l)/h%6:a===o?m=2+(l-r)/h:m=4+(r-o)/h,m/=6,m%=1,[m*360,h*100,f*100]},e.hsl.hcg=function(n){const r=n[1]/100,o=n[2]/100,l=o<.5?2*r*o:2*r*(1-o);let a=0;return l<1&&(a=(o-.5*l)/(1-l)),[n[0],l*100,a*100]},e.hsv.hcg=function(n){const r=n[1]/100,o=n[2]/100,l=r*o;let a=0;return l<1&&(a=(o-l)/(1-l)),[n[0],l*100,a*100]},e.hcg.rgb=function(n){const r=n[0]/360,o=n[1]/100,l=n[2]/100;if(o===0)return[l*255,l*255,l*255];const a=[0,0,0],c=r%1*6,h=c%1,f=1-h;let m=0;switch(Math.floor(c)){case 0:a[0]=1,a[1]=h,a[2]=0;break;case 1:a[0]=f,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=h;break;case 3:a[0]=0,a[1]=f,a[2]=1;break;case 4:a[0]=h,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=f}return m=(1-o)*l,[(o*a[0]+m)*255,(o*a[1]+m)*255,(o*a[2]+m)*255]},e.hcg.hsv=function(n){const r=n[1]/100,o=n[2]/100,l=r+o*(1-r);let a=0;return l>0&&(a=r/l),[n[0],a*100,l*100]},e.hcg.hsl=function(n){const r=n[1]/100,l=n[2]/100*(1-r)+.5*r;let a=0;return l>0&&l<.5?a=r/(2*l):l>=.5&&l<1&&(a=r/(2*(1-l))),[n[0],a*100,l*100]},e.hcg.hwb=function(n){const r=n[1]/100,o=n[2]/100,l=r+o*(1-r);return[n[0],(l-r)*100,(1-l)*100]},e.hwb.hcg=function(n){const r=n[1]/100,l=1-n[2]/100,a=l-r;let c=0;return a<1&&(c=(l-a)/(1-a)),[n[0],a*100,c*100]},e.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]},e.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]},e.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]},e.gray.hsl=function(n){return[0,0,n[0]]},e.gray.hsv=e.gray.hsl,e.gray.hwb=function(n){return[0,100,n[0]]},e.gray.cmyk=function(n){return[0,0,0,n[0]]},e.gray.lab=function(n){return[n[0],0,0]},e.gray.hex=function(n){const r=Math.round(n[0]/100*255)&255,l=((r<<16)+(r<<8)+r).toString(16).toUpperCase();return"000000".substring(l.length)+l},e.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]},Zw}var Hw,PC;function rz(){if(PC)return Hw;PC=1;const s=R6();function t(){const r={},o=Object.keys(s);for(let l=o.length,a=0;a<l;a++)r[o[a]]={distance:-1,parent:null};return r}function e(r){const o=t(),l=[r];for(o[r].distance=0;l.length;){const a=l.pop(),c=Object.keys(s[a]);for(let h=c.length,f=0;f<h;f++){const m=c[f],w=o[m];w.distance===-1&&(w.distance=o[a].distance+1,w.parent=a,l.unshift(m))}}return o}function i(r,o){return function(l){return o(r(l))}}function n(r,o){const l=[o[r].parent,r];let a=s[o[r].parent][r],c=o[r].parent;for(;o[c].parent;)l.unshift(o[c].parent),a=i(s[o[c].parent][c],a),c=o[c].parent;return a.conversion=l,a}return Hw=function(r){const o=e(r),l={},a=Object.keys(o);for(let c=a.length,h=0;h<c;h++){const f=a[h];o[f].parent!==null&&(l[f]=n(f,o))}return l},Hw}var qw,TC;function oz(){if(TC)return qw;TC=1;const s=R6(),t=rz(),e={},i=Object.keys(s);function n(o){const l=function(...a){const c=a[0];return c==null?c:(c.length>1&&(a=c),o(a))};return"conversion"in o&&(l.conversion=o.conversion),l}function r(o){const l=function(...a){const c=a[0];if(c==null)return c;c.length>1&&(a=c);const h=o(a);if(typeof h=="object")for(let f=h.length,m=0;m<f;m++)h[m]=Math.round(h[m]);return h};return"conversion"in o&&(l.conversion=o.conversion),l}return i.forEach(o=>{e[o]={},Object.defineProperty(e[o],"channels",{value:s[o].channels}),Object.defineProperty(e[o],"labels",{value:s[o].labels});const l=t(o);Object.keys(l).forEach(c=>{const h=l[c];e[o][c]=r(h),e[o][c].raw=n(h)})}),qw=e,qw}var V6=oz();const lz=Gh(V6),M6=iB({__proto__:null,default:lz},[V6]),Oh=(s,t=0,e=1)=>s>e?e:s<t?t:s,Ai=(s,t=0,e=Math.pow(10,t))=>Math.round(e*s)/e,az=s=>fz(P1(s)),P1=s=>(s[0]==="#"&&(s=s.substring(1)),s.length<6?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16),a:s.length===4?Ai(parseInt(s[3]+s[3],16)/255,2):1}:{r:parseInt(s.substring(0,2),16),g:parseInt(s.substring(2,4),16),b:parseInt(s.substring(4,6),16),a:s.length===8?Ai(parseInt(s.substring(6,8),16)/255,2):1}),cz=s=>dz(hz(s)),uz=({h:s,s:t,v:e,a:i})=>{const n=(200-t)*e/100;return{h:Ai(s),s:Ai(n>0&&n<200?t*e/100/(n<=100?n:200-n)*100:0),l:Ai(n/2),a:Ai(i,2)}},T1=s=>{const{h:t,s:e,l:i}=uz(s);return`hsl(${t}, ${e}%, ${i}%)`},hz=({h:s,s:t,v:e,a:i})=>{s=s/360*6,t=t/100,e=e/100;const n=Math.floor(s),r=e*(1-t),o=e*(1-(s-n)*t),l=e*(1-(1-s+n)*t),a=n%6;return{r:Ai([e,o,r,r,l,e][a]*255),g:Ai([l,e,e,o,r,r][a]*255),b:Ai([r,r,l,e,e,o][a]*255),a:Ai(i,2)}},Df=s=>{const t=s.toString(16);return t.length<2?"0"+t:t},dz=({r:s,g:t,b:e,a:i})=>{const n=i<1?Df(Ai(i*255)):"";return"#"+Df(s)+Df(t)+Df(e)+n},fz=({r:s,g:t,b:e,a:i})=>{const n=Math.max(s,t,e),r=n-Math.min(s,t,e),o=r?n===s?(t-e)/r:n===t?2+(e-s)/r:4+(s-t)/r:0;return{h:Ai(60*(o<0?o+6:o)),s:Ai(n?r/n*100:0),v:Ai(n/255*100),a:i}},L6=(s,t)=>{if(s===t)return!0;for(const e in s)if(s[e]!==t[e])return!1;return!0},mz=(s,t)=>s.toLowerCase()===t.toLowerCase()?!0:L6(P1(s),P1(t)),EC={},B6=s=>{let t=EC[s];return t||(t=document.createElement("template"),t.innerHTML=s,EC[s]=t),t},zx=(s,t,e)=>{s.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e}))};let ja=!1;const E1=s=>"touches"in s,gz=s=>ja&&!E1(s)?!1:(ja||(ja=E1(s)),!0),AC=(s,t)=>{const e=E1(t)?t.touches[0]:t,i=s.el.getBoundingClientRect();zx(s.el,"move",s.getMove({x:Oh((e.pageX-(i.left+window.pageXOffset))/i.width),y:Oh((e.pageY-(i.top+window.pageYOffset))/i.height)}))},pz=(s,t)=>{const e=t.keyCode;e>40||s.xy&&e<37||e<33||(t.preventDefault(),zx(s.el,"move",s.getMove({x:e===39?.01:e===37?-.01:e===34?.05:e===33?-.05:e===35?1:e===36?-1:0,y:e===40?.01:e===38?-.01:0},!0)))};class $6{constructor(t,e,i,n){const r=B6(`<div role="slider" tabindex="0" part="${e}" ${i}><div part="${e}-pointer"></div></div>`);t.appendChild(r.content.cloneNode(!0));const o=t.querySelector(`[part=${e}]`);o.addEventListener("mousedown",this),o.addEventListener("touchstart",this),o.addEventListener("keydown",this),this.el=o,this.xy=n,this.nodes=[o.firstChild,o]}set dragging(t){const e=t?document.addEventListener:document.removeEventListener;e(ja?"touchmove":"mousemove",this),e(ja?"touchend":"mouseup",this)}handleEvent(t){switch(t.type){case"mousedown":case"touchstart":if(t.preventDefault(),!gz(t)||!ja&&t.button!=0)return;this.el.focus(),AC(this,t),this.dragging=!0;break;case"mousemove":case"touchmove":t.preventDefault(),AC(this,t);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":pz(this,t);break}}style(t){t.forEach((e,i)=>{for(const n in e)this.nodes[i].style.setProperty(n,e[n])})}}class wz extends $6{constructor(t){super(t,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:t}){this.h=t,this.style([{left:`${t/360*100}%`,color:T1({h:t,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${Ai(t)}`)}getMove(t,e){return{h:e?Oh(this.h+t.x*360,0,360):360*t.x}}}class bz extends $6{constructor(t){super(t,"saturation",'aria-label="Color"',!0)}update(t){this.hsva=t,this.style([{top:`${100-t.v}%`,left:`${t.s}%`,color:T1(t)},{"background-color":T1({h:t.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${Ai(t.s)}%, Brightness ${Ai(t.v)}%`)}getMove(t,e){return{s:e?Oh(this.hsva.s+t.x*100,0,100):t.x*100,v:e?Oh(this.hsva.v-t.y*100,0,100):Math.round(100-t.y*100)}}}const Oz=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',xz="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",yz="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",Nf=Symbol("same"),Xw=Symbol("color"),IC=Symbol("hsva"),jw=Symbol("update"),RC=Symbol("parts"),VC=Symbol("css"),MC=Symbol("sliders");class vz extends HTMLElement{static get observedAttributes(){return["color"]}get[VC](){return[Oz,xz,yz]}get[MC](){return[bz,wz]}get color(){return this[Xw]}set color(t){if(!this[Nf](t)){const e=this.colorModel.toHsva(t);this[jw](e),this[Xw]=t}}constructor(){super();const t=B6(`<style>${this[VC].join("")}</style>`),e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),e.addEventListener("move",this),this[RC]=this[MC].map(i=>new i(e))}connectedCallback(){if(this.hasOwnProperty("color")){const t=this.color;delete this.color,this.color=t}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(t,e,i){const n=this.colorModel.fromAttr(i);this[Nf](n)||(this.color=n)}handleEvent(t){const e=this[IC],i={...e,...t.detail};this[jw](i);let n;!L6(i,e)&&!this[Nf](n=this.colorModel.fromHsva(i))&&(this[Xw]=n,zx(this,"color-changed",{value:n}))}[Nf](t){return this.color&&this.colorModel.equal(t,this.color)}[jw](t){this[IC]=t,this[RC].forEach(e=>e.update(t))}}const _z={defaultColor:"#000",toHsva:az,fromHsva:({h:s,s:t,v:e})=>cz({h:s,s:t,v:e,a:1}),equal:mz,fromAttr:s=>s};class kz extends vz{get colorModel(){return _z}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class hi extends vi{constructor(e=[]){super(e,{idProperty:"viewUid"});p(this,"_parentElement");this.on("add",(i,n,r)=>{this._renderViewIntoCollectionParent(n,r)}),this.on("remove",(i,n)=>{n.element&&this._parentElement&&n.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const i of this)this._renderViewIntoCollectionParent(i)}delegate(...e){if(!e.length||!Sz(e))throw new A("ui-viewcollection-delegate-wrong-events",this);return{to:i=>{for(const n of this)for(const r of e)n.delegate(r).to(i);this.on("add",(n,r)=>{for(const o of e)r.delegate(o).to(i)}),this.on("remove",(n,r)=>{for(const o of e)r.stopDelegating(o,i)})}}}_renderViewIntoCollectionParent(e,i){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[i])}remove(e){return super.remove(e)}}function Sz(s){return s.every(t=>typeof t=="string")}const Cz="http://www.w3.org/1999/xhtml";class Qn extends gt(){constructor(e){super();p(this,"ns");p(this,"tag");p(this,"text");p(this,"attributes");p(this,"children");p(this,"eventListeners");p(this,"_isRendered");p(this,"_revertData");Object.assign(this,BC(LC(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=DC(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new A("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(i){if(i.children)for(const n of i.children)hg(n)?yield n:Wx(n)&&(yield*e(n))}yield*e(this)}static bind(e,i){return{to(n,r){return new Pz({eventNameOrFunction:n,attribute:n,observable:e,emitter:i,callback:r})},if(n,r,o){return new Q6({observable:e,emitter:i,attribute:n,valueIfTrue:r,callback:o})}}}static extend(e,i){if(e._isRendered)throw new A("template-extend-render",[this,e]);z6(e,BC(LC(i)))}_renderNode(e){let i;if(e.node?i=this.tag&&this.text:i=this.tag?this.text:!this.text,i)throw new A("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let i=e.node;return i||(i=e.node=document.createElementNS(this.ns||Cz,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),i}_renderText(e){let i=e.node;return i?e.revertData.text=i.textContent:i=e.node=document.createTextNode(""),Sm(this.text)?this._bindToObservable({schema:this.text,updater:Ez(i),data:e}):i.textContent=this.text.join(""),i}_renderAttributes(e){if(!this.attributes)return;const i=e.node,n=e.revertData;for(const r in this.attributes){const o=i.getAttribute(r),l=this.attributes[r];n&&(n.attributes[r]=o);const a=QC(l)?l[0].ns:null;if(Sm(l)){const c=QC(l)?l[0].value:l;n&&NC(r)&&c.unshift(o),this._bindToObservable({schema:c,updater:Az(i,r,a),data:e})}else if(r=="style"&&typeof l[0]!="string")this._renderStyleAttribute(l[0],e);else{n&&o&&NC(r)&&l.unshift(o);const c=l.map(h=>h&&(h.value||h)).reduce((h,f)=>h.concat(f),[]).reduce(F6,"");nc(c)||i.setAttributeNS(a,r,c)}}}_renderStyleAttribute(e,i){const n=i.node;for(const r in e){const o=e[r];Sm(o)?this._bindToObservable({schema:[o],updater:Iz(n,r),data:i}):n.style[r]=o}}_renderElementChildren(e){const i=e.node,n=e.intoFragment?document.createDocumentFragment():i,r=e.isApplying;let o=0;for(const l of this.children)if(Ux(l)){if(!r){l.setParent(i);for(const a of l)n.appendChild(a.element)}}else if(hg(l))r||(l.isRendered||l.render(),n.appendChild(l.element));else if(To(l))n.appendChild(l);else if(r){const a=e.revertData,c=DC();a.children.push(c),l._renderNode({intoFragment:!1,node:n.childNodes[o++],isApplying:!0,revertData:c})}else n.appendChild(l.render());e.intoFragment&&i.appendChild(n)}_setUpListeners(e){if(this.eventListeners)for(const i in this.eventListeners){const n=this.eventListeners[i].map(r=>{const[o,l]=i.split("@");return r.activateDomEventListener(o,l,e)});e.revertData&&e.revertData.bindings.push(n)}}_bindToObservable({schema:e,updater:i,data:n}){const r=n.revertData;D6(e,i,n);const o=e.filter(l=>!nc(l)).filter(l=>l.observable).map(l=>l.activateAttributeListener(e,i,n));r&&r.bindings.push(o)}_revertTemplateFromNode(e,i){for(const r of i.bindings)for(const o of r)o();if(i.text){e.textContent=i.text;return}const n=e;for(const r in i.attributes){const o=i.attributes[r];o===null?n.removeAttribute(r):n.setAttribute(r,o)}for(let r=0;r<i.children.length;++r)this._revertTemplateFromNode(n.childNodes[r],i.children[r])}}class ed{constructor(t){p(this,"attribute");p(this,"observable");p(this,"emitter");p(this,"callback");this.attribute=t.attribute,this.observable=t.observable,this.emitter=t.emitter,this.callback=t.callback}getValue(t){const e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}activateAttributeListener(t,e,i){const n=()=>D6(t,e,i);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,n),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,n)}}}class Pz extends ed{constructor(e){super(e);p(this,"eventNameOrFunction");this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,i,n){const r=(o,l)=>{(!i||l.target.matches(i))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(l):this.observable.fire(this.eventNameOrFunction,l))};return this.emitter.listenTo(n.node,e,r),()=>{this.emitter.stopListening(n.node,e,r)}}}class Q6 extends ed{constructor(e){super(e);p(this,"valueIfTrue");this.valueIfTrue=e.valueIfTrue}getValue(e){const i=super.getValue(e);return nc(i)?!1:this.valueIfTrue||!0}}function Sm(s){return s?(s.value&&(s=s.value),Array.isArray(s)?s.some(Sm):s instanceof ed):!1}function Tz(s,t){return s.map(e=>e instanceof ed?e.getValue(t):e)}function D6(s,t,{node:e}){const i=Tz(s,e);let n;s.length==1&&s[0]instanceof Q6?n=i[0]:n=i.reduce(F6,""),nc(n)?t.remove():t.set(n)}function Ez(s){return{set(t){s.textContent=t},remove(){s.textContent=""}}}function Az(s,t,e){return{set(i){s.setAttributeNS(e,t,i)},remove(){s.removeAttributeNS(e,t)}}}function Iz(s,t){return{set(e){s.style[t]=e},remove(){s.style[t]=null}}}function LC(s){return rp(s,e=>{if(e&&(e instanceof ed||Wx(e)||hg(e)||Ux(e)))return e})}function BC(s){if(typeof s=="string"?s=Mz(s):s.text&&Lz(s),s.on&&(s.eventListeners=Vz(s.on),delete s.on),!s.text){s.attributes&&Rz(s.attributes);const t=[];if(s.children)if(Ux(s.children))t.push(s.children);else for(const e of s.children)Wx(e)||hg(e)||To(e)?t.push(e):t.push(new Qn(e));s.children=t}return s}function Rz(s){for(const t in s)s[t].value&&(s[t].value=ut(s[t].value)),N6(s,t)}function Vz(s){for(const t in s)N6(s,t);return s}function Mz(s){return{text:[s]}}function Lz(s){s.text=ut(s.text)}function N6(s,t){s[t]=ut(s[t])}function F6(s,t){return nc(t)?s:nc(s)?t:`${s} ${t}`}function $C(s,t){for(const e in t)s[e]?s[e].push(...t[e]):s[e]=t[e]}function z6(s,t){if(t.attributes&&(s.attributes||(s.attributes={}),$C(s.attributes,t.attributes)),t.eventListeners&&(s.eventListeners||(s.eventListeners={}),$C(s.eventListeners,t.eventListeners)),t.text&&s.text.push(...t.text),t.children&&t.children.length){if(s.children.length!=t.children.length)throw new A("ui-template-extend-children-mismatch",s);let e=0;for(const i of t.children)z6(s.children[e++],i)}}function nc(s){return!s&&s!==0}function hg(s){return s instanceof he}function Wx(s){return s instanceof Qn}function Ux(s){return s instanceof hi}function QC(s){return ls(s[0])&&s[0].ns}function DC(){return{children:[],bindings:[],attributes:{}}}function NC(s){return s=="class"||s=="style"}class he extends Zi(ct()){constructor(e){super();p(this,"element");p(this,"isRendered");p(this,"locale");p(this,"t");p(this,"template");p(this,"_viewCollections");p(this,"_unboundChildren");p(this,"_bindTemplate");this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new vi,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(i,n)=>{n.locale=e,n.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Qn.bind(this,this)}createCollection(e){const i=new hi(e);return this._viewCollections.add(i),i}registerChild(e){Dn(e)||(e=[e]);for(const i of e)this._unboundChildren.add(i)}deregisterChild(e){Dn(e)||(e=[e]);for(const i of e)this._unboundChildren.remove(i)}setTemplate(e){this.template=new Qn(e)}extendTemplate(e){Qn.extend(this.template,e)}render(){if(this.isRendered)throw new A("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Dr({emitter:s,activator:t,callback:e,contextElements:i,listenerOptions:n}){s.listenTo(document,"mousedown",(r,o)=>{if(!t())return;const l=typeof o.composedPath=="function"?o.composedPath():[],a=typeof i=="function"?i():i;for(const c of a)if(c.contains(o.target)||l.includes(c))return;e()},n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function dg(s){class t extends s{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...i){super(...i),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Bl({view:s}){s.listenTo(s.element,"submit",(t,e)=>{e.preventDefault(),s.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mp({keystrokeHandler:s,focusTracker:t,gridItems:e,numberOfColumns:i,uiLanguageDirection:n}){const r=typeof i=="number"?()=>i:i;s.set("arrowright",o((c,h)=>n==="rtl"?a(c,h.length):l(c,h.length))),s.set("arrowleft",o((c,h)=>n==="rtl"?l(c,h.length):a(c,h.length))),s.set("arrowup",o((c,h)=>{let f=c-r();return f<0&&(f=c+r()*Math.floor(h.length/r()),f>h.length-1&&(f-=r())),f})),s.set("arrowdown",o((c,h)=>{let f=c+r();return f>h.length-1&&(f=c%r()),f}));function o(c){return h=>{const f=e.find(O=>O.element===t.focusedElement),m=e.getIndex(f),w=c(m,e);e.get(w).focus(),h.stopPropagation(),h.preventDefault()}}function l(c,h){return c===h-1?0:c+1}function a(c,h){return c===0?h-1:c-1}}const ep=class ep extends he{constructor(){super();const t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",t.if("isVisible","ck-hidden",e=>!e),"ck-reset_all-excluded",t.if("isColorInherited","ck-icon_inherit-color")],viewBox:t.to("viewBox"),"aria-hidden":!0}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const e=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg");if(!e)throw new A("ui-iconview-invalid-svg",this);const i=e.getAttribute("viewBox");i&&(this.viewBox=i);for(const{name:n,value:r}of Array.from(e.attributes))ep.presentationalAttributeNames.includes(n)&&this.element.setAttribute(n,r);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;e.childNodes.length>0;)this.element.appendChild(e.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}};p(ep,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);let Vs=ep;class W6 extends he{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const t=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:t.to("style"),id:t.to("id")},children:[{text:t.to("text")}]})}}class ve extends he{constructor(e,i=new W6){super(e);p(this,"children");p(this,"labelView");p(this,"iconView");p(this,"keystrokeView");p(this,"_focusDelayed",null);const n=this.bindTemplate,r=ii();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${r}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(i),this.iconView=new Vs,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.iconView.bind("content").to(this,"icon"),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",n.to("class"),n.if("isEnabled","ck-disabled",l=>!l),n.if("isVisible","ck-hidden",l=>!l),n.to("isOn",l=>l?"ck-on":"ck-off"),n.if("withText","ck-button_with-text"),n.if("withKeystroke","ck-button_with-keystroke")],role:n.to("role"),type:n.to("type",l=>l||"button"),tabindex:n.to("tabindex"),"aria-checked":n.to("_ariaChecked"),"aria-pressed":n.to("_ariaPressed"),"aria-label":n.to("ariaLabel"),"aria-labelledby":n.to("ariaLabelledBy"),"aria-disabled":n.if("isEnabled",!0,l=>!l),"data-cke-tooltip-text":n.to("_tooltipString"),"data-cke-tooltip-position":n.to("tooltipPosition")},children:this.children,on:{click:n.to(l=>{this.isEnabled?this.fire("execute"):l.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(l,a,c)=>!a||FC(c)?!1:String(!!l)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(l,a,c)=>!a||!FC(c)?!1:String(!!l)),Ie.isSafari&&(this._focusDelayed||(this._focusDelayed=ap(()=>this.focus(),0)),o.on.mousedown=n.to(()=>{this._focusDelayed()}),o.on.mouseup=n.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&this.children.add(this.iconView),this.on("change:icon",(e,i,n,r)=>{n&&!r?this.children.add(this.iconView,0):!n&&r&&this.children.remove(this.iconView)}),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){const e=new he;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",i=>sg(i))}]}),e}_getTooltipString(e,i,n){return e?typeof e=="string"?e:(n&&(n=sg(n)),e instanceof Function?e(i,n):`${i}${n?` (${n})`:""}`):""}}function FC(s){switch(s){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class Nr extends he{constructor(e,i={}){super(e);p(this,"children");p(this,"iconView");const n=this.bindTemplate;this.set("label",i.label||""),this.set("class",i.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",n.to("class")]},children:this.children}),i.icon&&(this.iconView=new Vs,this.iconView.content=i.icon,this.children.add(this.iconView));const r=new he(e);r.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:n.to("label")}]}),this.children.add(r)}}class Kt extends gt(){constructor(e){super();p(this,"focusables");p(this,"focusTracker");p(this,"keystrokeHandler");p(this,"actions");if(this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const i in e.actions){let n=e.actions[i];typeof n=="string"&&(n=[n]);for(const r of n)e.keystrokeHandler.set(r,(o,l)=>{this[i](),l()},e.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(Gw)||null}get last(){return this.focusables.filter(Gw).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((i,n)=>{const r=i.element===this.focusTracker.focusedElement;return r&&(e=n),r}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){const e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}chain(e){const i=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(e,"forwardCycle",n=>{const r=i();this.focusNext(),r!==i()&&n.stop()},{priority:"low"}),this.listenTo(e,"backwardCycle",n=>{const r=i();this.focusPrevious(),r!==i()&&n.stop()},{priority:"low"})}unchain(e){this.stopListening(e)}_focus(e,i){e&&this.focusTracker.focusedElement!==e.element&&e.focus(i)}_getDomFocusableItem(e){const i=this.focusables.length;if(!i)return null;const n=this.current;if(n===null)return this[e===1?"first":"last"];let r=this.focusables.get(n),o=(n+i+e)%i;do{const l=this.focusables.get(o);if(Gw(l)){r=l;break}o=(o+i+e)%i}while(o!==n);return r}}function Gw(s){return yc(s)&&Mr(s.element)}function yc(s){return"focus"in s&&typeof s.focus=="function"}function U6(s){return yc(s)&&"focusCycler"in s&&s.focusCycler instanceof Kt}function Bz(s){class t extends s{constructor(...n){super(...n);p(this,"_onDragBound",this._onDrag.bind(this));p(this,"_onDragEndBound",this._onDragEnd.bind(this));p(this,"_lastDraggingCoordinates",{x:0,y:0});this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(ue.document,"mouseup",this._onDragEndBound),this.listenTo(ue.document,"touchend",this._onDragEndBound),this.listenTo(ue.document,"mousemove",this._onDragBound),this.listenTo(ue.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(ue.document,"mouseup",this._onDragEndBound),this.stopListening(ue.document,"touchend",this._onDragEndBound),this.stopListening(ue.document,"mousemove",this._onDragBound),this.stopListening(ue.document,"touchmove",this._onDragBound)}_onDragStart(n,r){if(!this._isHandleElementPressed(r))return;this._attachDragListeners();let o=0,l=0;r instanceof MouseEvent?(o=r.clientX,l=r.clientY):(o=r.touches[0].clientX,l=r.touches[0].clientY),this._lastDraggingCoordinates={x:o,y:l},this.isDragging=!0}_onDrag(n,r){if(!this.isDragging){this._detachDragListeners();return}let o=0,l=0;r instanceof MouseEvent?(o=r.clientX,l=r.clientY):(o=r.touches[0].clientX,l=r.touches[0].clientY),r.preventDefault(),this.fire("drag",{deltaX:Math.round(o-this._lastDraggingCoordinates.x),deltaY:Math.round(l-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:o,y:l}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(n){return this.dragHandleElement?this.dragHandleElement===n.target||n.target instanceof HTMLElement&&this.dragHandleElement.contains(n.target):!1}}return t}class $z extends he{constructor(e){super(e);p(this,"children");p(this,"keystrokes");p(this,"focusCycler");p(this,"_focusTracker");p(this,"_focusables");this.children=this.createCollection(),this.keystrokes=new bt,this._focusTracker=new ht,this._focusables=new hi,this.focusCycler=new Kt({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(const i of e){const n=new ve(this.locale);let r;n.on("execute",()=>i.onExecute()),i.onCreate&&i.onCreate(n);for(r in i)r!="onExecute"&&r!="onCreate"&&n.set(r,i[r]);this.children.add(n)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}}class Qz extends he{constructor(e){super(e);p(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const Ps={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},zC=Oc("px"),tp=class tp extends Bz(he){constructor(e,{getCurrentDomRoot:i,getViewportOffset:n,keystrokeHandlerOptions:r}){super(e);p(this,"parts");p(this,"headerView");p(this,"closeButtonView");p(this,"actionsView");p(this,"contentView");p(this,"keystrokes");p(this,"focusTracker");p(this,"wasMoved",!1);p(this,"_getCurrentDomRoot");p(this,"_getViewportOffset");p(this,"_focusables");p(this,"_focusCycler");const o=this.bindTemplate,l=e.t;this.set("className",""),this.set("ariaLabel",l("Editor dialog")),this.set("isModal",!1),this.set("position",Ps.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=i,this._getViewportOffset=n,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new bt,this.focusTracker=new ht,this._focusables=new hi,this._focusCycler=new Kt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"},keystrokeHandlerOptions:r}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",o.if("isModal","ck-dialog-overlay__transparent",a=>!a),o.if("_isVisible","ck-hidden",a=>!a)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",o.if("isModal","ck-dialog_modal"),o.to("className")],role:"dialog","aria-label":o.to("ariaLabel"),style:{top:o.to("_top",a=>zC(a)),left:o.to("_left",a=>zC(a)),visibility:o.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(e,i)=>{e.defaultPrevented||(this.fire("close",{source:"escKeyPress"}),i())}),this.on("drag",(e,{deltaX:i,deltaY:n})=>{this.wasMoved=!0,this.moveBy(i,n)}),this.listenTo(ue.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(ue.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(e,i,n)=>{n&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:e,title:i,hasCloseButton:n=!0,content:r,actionButtons:o}){i&&(this.headerView=new Nr(this.locale,{icon:e}),n&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=i,this.ariaLabel=i,this.parts.add(this.headerView,0)),r&&(r instanceof he&&(r=[r]),this.contentView=new Qz(this.locale),this.contentView.children.addMany(r),this.parts.add(this.contentView)),o&&(this.actionsView=new $z(this.locale),this.actionsView.setButtons(o),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(e,i){const n=this._getViewportRect(),r=this._getDialogRect();e+r.width>n.right&&(e=n.right-r.width),e<n.left&&(e=n.left),i<n.top&&(i=n.top),this._moveTo(e,i)}_moveTo(e,i){this._left=e,this._top=i}moveBy(e,i){this.moveTo(this._left+e,this._top+i)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const e=this._getViewportRect();let i=this.position,n;this._getCurrentDomRoot()?n=this._getVisibleDomRootRect(e):i=Ps.SCREEN_CENTER;const r=tp.defaultOffset,o=this._getDialogRect();switch(i){case Ps.EDITOR_TOP_SIDE:{if(n){const l=this.locale.contentLanguageDirection==="ltr"?n.right-o.width-r:n.left+r;this.moveTo(l,n.top+r)}else this._moveOffScreen();break}case Ps.EDITOR_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-o.width/2),Math.round(n.top+n.height/2-o.height/2)):this._moveOffScreen();break}case Ps.SCREEN_CENTER:{this.moveTo(Math.round((e.width-o.width)/2),Math.round((e.height-o.height)/2));break}case Ps.EDITOR_TOP_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-o.width/2),n.top+r):this._moveOffScreen();break}case Ps.EDITOR_BOTTOM_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-o.width/2),n.bottom-o.height-r):this._moveOffScreen();break}case Ps.EDITOR_ABOVE_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-o.width/2),n.top-o.height-r):this._moveOffScreen();break}case Ps.EDITOR_BELOW_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-o.width/2),n.bottom+r):this._moveOffScreen();break}}}_getVisibleDomRootRect(e){let i=new Me(this._getCurrentDomRoot()).getVisible();if(i){if(i=e.getIntersection(i),!i)return null}else return null;return i}_getDialogRect(){return new Me(this.element.firstElementChild)}_getViewportRect(){const e=new Me(ue.window);if(this.isModal)return e;const i={top:0,bottom:0,left:0,right:0,...this._getViewportOffset()};return e.top+=i.top,e.height-=i.top,e.bottom-=i.bottom,e.height-=i.bottom,e.left+=i.left,e.right-=i.right,e.width-=i.left+i.right,e}_updateFocusCyclableItems(){const e=[];if(this.contentView)for(const i of this.contentView.children)yc(i)&&e.push(i);this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element),U6(i)&&this._focusCycler.chain(i.focusCycler)})}_createCloseButton(){const e=new ve(this.locale),i=this.locale.t;return e.set({label:i("Close"),tooltip:!0,icon:xc}),e.on("execute",()=>this.fire("close",{source:"closeButton"})),e}};p(tp,"defaultOffset",15);let xh=tp;const Ts=class Ts extends F{constructor(e){super(e);p(this,"view");p(this,"_onHide");const i=e.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),e.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:i("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),Ts._visibleDialogPlugin===this&&this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(e,i)=>{this._show(i)}),this.on("show",(e,i)=>{i.onShow&&i.onShow(this)},{priority:"low"}),this.on("hide",()=>{Ts._visibleDialogPlugin&&Ts._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const e=this.editor;e.keystrokes.set("Ctrl+F6",(i,n)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?e.editing.view.focus():this.view.focus(),n())})}_initMultiRootIntegration(){const e=this.editor.model;e.document.on("change:data",()=>{if(!this.view)return;const i=e.document.differ.getChangedRoots();for(const n of i)n.state&&this.view.updatePosition()})}show(e){this.hide(),this.fire(`show:${e.id}`,e)}_show({id:e,icon:i,title:n,hasCloseButton:r=!0,content:o,actionButtons:l,className:a,isModal:c,position:h,onHide:f,keystrokeHandlerOptions:m}){const w=this.editor;this.view=new xh(w.locale,{getCurrentDomRoot:()=>w.editing.view.getDomRoot(w.model.document.selection.anchor.root.rootName),getViewportOffset:()=>w.ui.viewportOffset,keystrokeHandlerOptions:m});const O=this.view;O.on("close",()=>{this.hide()}),w.ui.view.body.add(O),w.keystrokes.listenTo(O.element),h||(h=c?Ps.SCREEN_CENTER:Ps.EDITOR_CENTER),c&&this._lockBodyScroll(),O.set({position:h,_isVisible:!0,className:a,isModal:c}),O.setupParts({icon:i,title:n,hasCloseButton:r,content:o,actionButtons:l}),this.id=e,f&&(this._onHide=f),this.isOpen=!0,Ts._visibleDialogPlugin=this}hide(){Ts._visibleDialogPlugin&&Ts._visibleDialogPlugin.fire(`hide:${Ts._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const e=this.editor,i=this.view;i.isModal&&this._unlockBodyScroll(),i.contentView&&i.contentView.reset(),e.ui.view.body.remove(i),e.ui.focusTracker.remove(i.element),e.keystrokes.stopListening(i.element),i.destroy(),e.editing.view.focus(),this.id=null,this.isOpen=!1,Ts._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}};p(Ts,"_visibleDialogPlugin");let yh=Ts;class vc extends ve{constructor(e,i=new W6){super(e,i);p(this,"_checkIconHolderView",new Dz);this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const n=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",n.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(r,o)=>r||o)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",e=>this.isToggleable&&e),this.on("change:_hasCheck",(e,i,n)=>{const{children:r,_checkIconHolderView:o}=this;n?r.add(o,0):r.remove(o)})}}class Dz extends he{constructor(){super();p(this,"children");p(this,"_checkIconView",this._createCheckIconView());const e=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",e.to("isOn",i=>i?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(e,i,n)=>{const{children:r,_checkIconView:o}=this;n&&!r.has(o)?r.add(o):!n&&r.has(o)&&r.remove(o)})}_createCheckIconView(){const e=new Vs;return e.content=Jh,e.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),e}}class ci extends vc{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class Jn extends he{constructor(e){super(e);p(this,"id");this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${ii()}`;const i=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:i.to("for")},children:[{text:i.to("text")}]})}}class Nz extends he{constructor(t,e){super(t);const i=t.t,n=new Jn;n.text=i("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":n.id,role:"document",tabindex:-1},children:[wi(document,"p",{},i("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(e.values())),n]})}focus(){this.element.focus()}_createCategories(t){return t.map(e=>{const i=[wi(document,"h3",{},e.label),...Array.from(e.groups.values()).map(n=>this._createGroup(n)).flat()];return e.description&&i.splice(1,0,wi(document,"p",{},e.description)),wi(document,"section",{},i)})}_createGroup(t){const e=t.keystrokes.sort((n,r)=>n.label.localeCompare(r.label)).map(n=>this._createGroupRow(n)).flat(),i=[wi(document,"dl",{},e)];return t.label&&i.unshift(wi(document,"h4",{},t.label)),i}_createGroupRow(t){const e=this.locale.t,i=wi(document,"dt"),n=wi(document,"dd"),r=zz(t.keystroke),o=[];for(const l of r)o.push(l.map(Fz).join(""));return i.innerHTML=t.label,n.innerHTML=o.join(", ")+(t.mayRequireFn&&Ie.isMac?` ${e("(may require <kbd>Fn</kbd>)")}`:""),[i,n]}}function Fz(s){return sg(s).split("+").map(t=>`<kbd>${t}</kbd>`).join("+")}function zz(s){return typeof s=="string"?[[s]]:typeof s[0]=="string"?[s]:s}class Wz extends F{constructor(){super(...arguments);p(this,"contentView",null)}static get requires(){return[yh]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{const n=this._createButton(ve);return n.set({tooltip:!0,withText:!1,label:i("Accessibility help")}),n}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const n=this._createButton(ci);return n.label=i("Accessibility"),n}),e.keystrokes.set("Alt+0",(n,r)=>{this._toggleDialog(),r()}),this._setupRootLabels()}_createButton(e){const i=this.editor,n=i.plugins.get("Dialog"),r=i.locale,o=new e(r);return o.set({keystroke:"Alt+0",icon:gC,isToggleable:!0}),o.on("execute",()=>this._toggleDialog()),o.bind("isOn").to(n,"id",l=>l==="accessibilityHelp"),o}_setupRootLabels(){const e=this.editor,i=e.editing.view,n=e.t;e.ui.on("ready",()=>{i.change(o=>{for(const l of i.document.roots)r(o,l)}),e.on("addRoot",(o,l)=>{const a=e.editing.view.document.getRoot(l.rootName);i.change(c=>r(c,a))},{priority:"low"})});function r(o,l){const c=[l.getAttribute("aria-label"),n("Press %0 for help.",[sg("Alt+0")])].filter(h=>h).join(". ");o.setAttribute("aria-label",c,l)}}_toggleDialog(){const e=this.editor,i=e.plugins.get("Dialog"),n=e.locale.t;this.contentView||(this.contentView=new Nz(e.locale,e.accessibility.keystrokeInfos)),i.id==="accessibilityHelp"?i.hide():i.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:n("Accessibility help"),icon:gC,hasCloseButton:!0,content:this.contentView})}}const Yn=class Yn extends hi{constructor(e,i=[]){super(i);p(this,"locale");p(this,"_bodyCollectionContainer");this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Qn({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render(),(!Yn._bodyWrapper||!Yn._bodyWrapper.isConnected)&&(Yn._bodyWrapper=wi(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(Yn._bodyWrapper)),Yn._bodyWrapper.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove(),Yn._bodyWrapper&&!Yn._bodyWrapper.childElementCount&&(Yn._bodyWrapper.remove(),delete Yn._bodyWrapper)}};p(Yn,"_bodyWrapper");let A1=Yn;class td extends ve{constructor(e){super(e);p(this,"toggleSwitchView");this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new he;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}class WC extends Z6(ve){}class Uz extends Z6(vc){}function Z6(s){class t extends s{constructor(...n){super(...n);p(this,"buttonView");p(this,"_fileInputView");this.buttonView=this,this._fileInputView=new Zz(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return t}class Zz extends he{constructor(t){super(t),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:e.to("acceptedType"),multiple:e.to("allowMultipleFiles")},on:{change:e.to(()=>{var i,n;(n=(i=this.element)==null?void 0:i.files)!=null&&n.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}class H6 extends he{constructor(e,i){super(e);p(this,"buttonView");p(this,"children");const n=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),i&&this.children.addMany(i),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",n.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:n.if("isCollapsed","hidden"),"aria-labelledby":n.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const e=new ve(this.locale),i=e.bindTemplate;return e.set({withText:!0,icon:fp}),e.extendTemplate({attributes:{"aria-expanded":i.to("isOn",n=>String(n))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",n=>!n),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function fg(s,t){const e=s.t,i={Black:e("Black"),"Dim grey":e("Dim grey"),Grey:e("Grey"),"Light grey":e("Light grey"),White:e("White"),Red:e("Red"),Orange:e("Orange"),Yellow:e("Yellow"),"Light green":e("Light green"),Green:e("Green"),Aquamarine:e("Aquamarine"),Turquoise:e("Turquoise"),"Light blue":e("Light blue"),Blue:e("Blue"),Purple:e("Purple")};return t.map(n=>{const r=i[n.label];return r&&r!=n.label&&(n.label=r),n})}function mg(s){return s.map(Hz).filter(t=>!!t)}function Hz(s){return typeof s=="string"?{model:s,label:s,hasBorder:!1,view:{name:"span",styles:{color:s}}}:{model:s.color,label:s.label||s.color,hasBorder:s.hasBorder===void 0?!1:s.hasBorder,view:{name:"span",styles:{color:`${s.color}`}}}}class q6 extends ve{constructor(t){super(t);const e=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=gF,this.extendTemplate({attributes:{style:{backgroundColor:e.to("color",i=>Ie.isMediaForcedColors?null:i)},class:["ck","ck-color-grid__tile",e.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class UC extends he{constructor(e,i){super(e);p(this,"columns");p(this,"items");p(this,"focusTracker");p(this,"keystrokes");const n=i&&i.colorDefinitions?i.colorDefinitions:[];this.columns=(i==null?void 0:i.columns)||5;const r={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new ht,this.keystrokes=new bt,this.items.on("add",(o,l)=>{l.isOn=l.color===this.selectedColor}),n.forEach(o=>{const l=new q6;l.set({color:o.color,label:o.label,tooltip:!0,hasBorder:o.options.hasBorder}),l.on("execute",()=>{this.fire("execute",{value:o.color,hasBorder:o.options.hasBorder,label:o.label})}),this.items.add(l)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:r}}),this.on("change:selectedColor",(o,l,a)=>{for(const c of this.items)c.isOn=c.color===a})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){var e;super.render();for(const i of this.items)this.focusTracker.add(i.element);this.items.on("add",(i,n)=>{this.focusTracker.add(n.element)}),this.items.on("remove",(i,n)=>{this.focusTracker.remove(n.element)}),this.keystrokes.listenTo(this.element),mp({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:(e=this.locale)==null?void 0:e.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function X6(s,t){if(!s)return"";const e=j6(s);if(!e)return"";if(e.space===t)return s;if(!Gz(e))return"";const n=M6[e.space][t];if(!n)return"";const r=n(e.space==="hex"?e.hexValue:e.values);return jz(r,t)}function qz(s){if(!s)return"";const t=j6(s);return t?t.space==="hex"?t.hexValue:X6(s,"hex"):"#000"}function Xz(s,t){customElements.get(s)===void 0&&customElements.define(s,t)}function jz(s,t){switch(t){case"hex":return`#${s}`;case"rgb":return`rgb(${s[0]}, ${s[1]}, ${s[2]})`;case"hsl":return`hsl(${s[0]}, ${s[1]}%, ${s[2]}%)`;case"hwb":return`hwb(${s[0]}, ${s[1]}, ${s[2]})`;case"lab":return`lab(${s[0]}% ${s[1]} ${s[2]})`;case"lch":return`lch(${s[0]}% ${s[1]} ${s[2]})`;default:return""}}function j6(s){if(s.startsWith("#")){const e=SC(s);return{space:"hex",values:e.values,hexValue:s,alpha:e.alpha}}const t=SC(s);return t.space?t:null}function Gz(s){return Object.keys(M6).includes(s.space)}class jt extends he{constructor(e,i){super(e);p(this,"fieldView");p(this,"labelView");p(this,"statusView");p(this,"fieldWrapperChildren");const n=`ck-labeled-field-view-${ii()}`,r=`ck-labeled-field-view-status-${ii()}`;this.fieldView=i(this,n,r),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(n),this.statusView=this._createStatusView(r),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(l,a)=>l||a);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",l=>!l),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const i=new Jn(this.locale);return i.for=e,i.bind("text").to(this,"label"),i}_createStatusView(e){const i=new he(this.locale),n=this.bindTemplate;return i.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",n.if("errorText","ck-labeled-field-view__status_error"),n.if("_statusText","ck-hidden",r=>!r)],id:e,role:n.if("errorText","alert")},children:[{text:n.to("_statusText")}]}),i}focus(e){this.fieldView.focus(e)}}class Yz extends he{constructor(e){super(e);p(this,"focusTracker");this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new ht,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const i=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",i.if("isFocused","ck-input_focused"),i.if("isEmpty","ck-input-text_empty"),i.if("hasError","ck-error")],id:i.to("id"),placeholder:i.to("placeholder"),tabindex:i.to("tabIndex"),readonly:i.to("isReadOnly"),"aria-invalid":i.if("hasError",!0),"aria-describedby":i.to("ariaDescribedById"),"aria-label":i.to("ariaLabel")},on:{input:i.to((...n)=>{this.fire("input",...n),this._updateIsEmpty()}),change:i.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,i,n)=>{this._setDomElementValue(n),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=Kz(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function Kz(s){return!s.value}class G6 extends Yz{constructor(t){super(t),this.set("inputMode","text");const e=this.bindTemplate;this.extendTemplate({attributes:{inputmode:e.to("inputMode")}})}}class Y6 extends G6{constructor(t){super(t),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class Jz extends G6{constructor(t,{min:e,max:i,step:n}={}){super(t);const r=this.bindTemplate;this.set("min",e),this.set("max",i),this.set("step",n),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:r.to("min"),max:r.to("max"),step:r.to("step")}})}}class eW extends he{constructor(e){super(e);p(this,"children");const i=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",i.to("position",n=>`ck-dropdown__panel_${n}`),i.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:i.to(n=>{n.target.tagName.toLocaleLowerCase()!=="input"&&n.preventDefault()})}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():We("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}const Za=class Za extends he{constructor(e,i,n){super(e);p(this,"buttonView");p(this,"panelView");p(this,"focusTracker");p(this,"keystrokes");p(this,"listView");p(this,"toolbarView");p(this,"menuView");const r=this.bindTemplate;this.buttonView=i,this.panelView=n,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new bt,this.focusTracker=new ht,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",r.to("class"),r.if("isEnabled","ck-disabled",o=>!o)],id:r.to("id"),"aria-describedby":r.to("ariaDescribedById")},children:[i,n]}),i.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":r.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(i,n,r)=>{if(r)if(this.panelPosition==="auto"){const o=Za._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._defaultPanelPositionName}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const e=(i,n)=>{this.isOpen&&(this.isOpen=!1,n())};this.keystrokes.set("arrowdown",(i,n)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,n())}),this.keystrokes.set("arrowright",(i,n)=>{this.isOpen&&n()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:i,southEast:n,southWest:r,northEast:o,northWest:l,southMiddleEast:a,southMiddleWest:c,northMiddleEast:h,northMiddleWest:f}=Za.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[n,r,a,c,e,o,l,h,f,i]:[r,n,c,a,e,l,o,f,h,i]}get _defaultPanelPositionName(){return this.locale.uiLanguageDirection==="rtl"?"sw":"se"}};p(Za,"defaultPanelPositions",{south:(e,i)=>({top:e.bottom,left:e.left-(i.width-e.width)/2,name:"s"}),southEast:e=>({top:e.bottom,left:e.left,name:"se"}),southWest:(e,i)=>({top:e.bottom,left:e.left-i.width+e.width,name:"sw"}),southMiddleEast:(e,i)=>({top:e.bottom,left:e.left-(i.width-e.width)/4,name:"sme"}),southMiddleWest:(e,i)=>({top:e.bottom,left:e.left-(i.width-e.width)*3/4,name:"smw"}),north:(e,i)=>({top:e.top-i.height,left:e.left-(i.width-e.width)/2,name:"n"}),northEast:(e,i)=>({top:e.top-i.height,left:e.left,name:"ne"}),northWest:(e,i)=>({top:e.top-i.height,left:e.left-i.width+e.width,name:"nw"}),northMiddleEast:(e,i)=>({top:e.top-i.height,left:e.left-(i.width-e.width)/4,name:"nme"}),northMiddleWest:(e,i)=>({top:e.top-i.height,left:e.left-(i.width-e.width)*3/4,name:"nmw"})}),p(Za,"_getOptimalPosition",bx);let I1=Za;class K6 extends ve{constructor(e){super(e);p(this,"arrowView");this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",i=>String(i))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Vs;return e.content=fp,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}class us extends he{constructor(e){super(e);p(this,"children");const i=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",i.if("isVisible","ck-hidden",n=>!n)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class Zx extends he{constructor(t){super(t),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class Cm extends he{constructor(e,i=new Jn){super(e);p(this,"labelView");p(this,"items");p(this,"children");const n=this.bindTemplate,r=new $l(e);this.set({label:"",isVisible:!0}),this.labelView=i,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,r]),r.set({role:"group",ariaLabelledBy:i.id}),r.focusTracker.destroy(),r.keystrokes.destroy(),this.items=r.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",n.if("isVisible","ck-hidden",o=>!o)]},children:this.children})}focus(){if(this.items){const e=this.items.find(i=>!(i instanceof Zx));e&&e.focus()}}}class $l extends he{constructor(e){super(e);p(this,"focusables");p(this,"items");p(this,"focusTracker");p(this,"keystrokes");p(this,"_focusCycler");p(this,"_listItemGroupToChangeListeners",new WeakMap);const i=this.bindTemplate;this.focusables=new hi,this.items=this.createCollection(),this.focusTracker=new ht,this.keystrokes=new bt,this._focusCycler=new Kt({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:i.to("role"),"aria-label":i.to("ariaLabel"),"aria-labelledby":i.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const e of this.items)e instanceof Cm?this._registerFocusableItemsGroup(e):e instanceof us&&this._registerFocusableListItem(e);this.items.on("change",(e,i)=>{for(const n of i.removed)n instanceof Cm?this._deregisterFocusableItemsGroup(n):n instanceof us&&this._deregisterFocusableListItem(n);for(const n of Array.from(i.added).reverse())n instanceof Cm?this._registerFocusableItemsGroup(n,i.index):this._registerFocusableListItem(n,i.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,i){this.focusTracker.add(e.element),this.focusables.add(e,i)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(i,n)=>{for(const r of n.removed)this._deregisterFocusableListItem(r);for(const r of Array.from(n.added).reverse())this._registerFocusableListItem(r,this.items.getIndex(e)+n.index)}}_registerFocusableItemsGroup(e,i){Array.from(e.items).forEach((r,o)=>{const l=typeof i<"u"?i+o:void 0;this._registerFocusableListItem(r,l)});const n=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,n),e.items.on("change",n)}_deregisterFocusableItemsGroup(e){for(const i of e.items)this._deregisterFocusableListItem(i);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}}const ZC=Oc("px"),tW={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},In=class In extends he{constructor(e){super(e);p(this,"content");p(this,"_pinWhenIsVisibleCallback");p(this,"_resizeObserver");const i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",i.to("position",n=>`ck-balloon-panel_${n}`),i.if("isVisible","ck-balloon-panel_visible"),i.if("withArrow","ck-balloon-panel_with-arrow"),i.to("class")],style:{top:i.to("top",ZC),left:i.to("left",ZC)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){const i=Pm(e.target);if(i&&!Mr(i))return!1;this.show();const n=In.defaultPositions,r=Object.assign({},{element:this.element,positions:[n.southArrowNorth,n.southArrowNorthMiddleWest,n.southArrowNorthMiddleEast,n.southArrowNorthWest,n.southArrowNorthEast,n.northArrowSouth,n.northArrowSouthMiddleWest,n.northArrowSouthMiddleEast,n.northArrowSouthWest,n.northArrowSouthEast,n.viewportStickyNorth],limiter:ue.document.body,fitInViewport:!0},e),o=In._getOptimalPosition(r)||tW,l=parseInt(o.left),a=parseInt(o.top),c=o.name,h=o.config||{},{withArrow:f=!0}=h;return this.top=a,this.left=l,this.position=c,this.withArrow=f,!0}pin(e){this.unpin(),this._startPinning(e)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){if(!this.attachTo(e))return!1;let i=Pm(e.target);const n=e.limiter?Pm(e.limiter):ue.document.body;if(this.listenTo(ue.document,"scroll",(r,o)=>{const l=o.target,a=i&&l.contains(i),c=n&&l.contains(n);(a||c||!i||!n)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(ue.window,"resize",()=>{this.attachTo(e)}),!this._resizeObserver&&(i&&Mt(i)&&(i=i.parentElement),i)){const r=()=>{Mr(i)||this.unpin()};this._resizeObserver=new wx(i,r)}return!0}_stopPinning(){this.stopListening(ue.document,"scroll"),this.stopListening(ue.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(e={}){const{sideOffset:i=In.arrowSideOffset,heightOffset:n=In.arrowHeightOffset,stickyVerticalOffset:r=In.stickyVerticalOffset,config:o}=e;return{northWestArrowSouthWest:(c,h)=>({top:l(c,h),left:c.left-i,name:"arrow_sw",...o&&{config:o}}),northWestArrowSouthMiddleWest:(c,h)=>({top:l(c,h),left:c.left-h.width*.25-i,name:"arrow_smw",...o&&{config:o}}),northWestArrowSouth:(c,h)=>({top:l(c,h),left:c.left-h.width/2,name:"arrow_s",...o&&{config:o}}),northWestArrowSouthMiddleEast:(c,h)=>({top:l(c,h),left:c.left-h.width*.75+i,name:"arrow_sme",...o&&{config:o}}),northWestArrowSouthEast:(c,h)=>({top:l(c,h),left:c.left-h.width+i,name:"arrow_se",...o&&{config:o}}),northArrowSouthWest:(c,h)=>({top:l(c,h),left:c.left+c.width/2-i,name:"arrow_sw",...o&&{config:o}}),northArrowSouthMiddleWest:(c,h)=>({top:l(c,h),left:c.left+c.width/2-h.width*.25-i,name:"arrow_smw",...o&&{config:o}}),northArrowSouth:(c,h)=>({top:l(c,h),left:c.left+c.width/2-h.width/2,name:"arrow_s",...o&&{config:o}}),northArrowSouthMiddleEast:(c,h)=>({top:l(c,h),left:c.left+c.width/2-h.width*.75+i,name:"arrow_sme",...o&&{config:o}}),northArrowSouthEast:(c,h)=>({top:l(c,h),left:c.left+c.width/2-h.width+i,name:"arrow_se",...o&&{config:o}}),northEastArrowSouthWest:(c,h)=>({top:l(c,h),left:c.right-i,name:"arrow_sw",...o&&{config:o}}),northEastArrowSouthMiddleWest:(c,h)=>({top:l(c,h),left:c.right-h.width*.25-i,name:"arrow_smw",...o&&{config:o}}),northEastArrowSouth:(c,h)=>({top:l(c,h),left:c.right-h.width/2,name:"arrow_s",...o&&{config:o}}),northEastArrowSouthMiddleEast:(c,h)=>({top:l(c,h),left:c.right-h.width*.75+i,name:"arrow_sme",...o&&{config:o}}),northEastArrowSouthEast:(c,h)=>({top:l(c,h),left:c.right-h.width+i,name:"arrow_se",...o&&{config:o}}),southWestArrowNorthWest:c=>({top:a(c),left:c.left-i,name:"arrow_nw",...o&&{config:o}}),southWestArrowNorthMiddleWest:(c,h)=>({top:a(c),left:c.left-h.width*.25-i,name:"arrow_nmw",...o&&{config:o}}),southWestArrowNorth:(c,h)=>({top:a(c),left:c.left-h.width/2,name:"arrow_n",...o&&{config:o}}),southWestArrowNorthMiddleEast:(c,h)=>({top:a(c),left:c.left-h.width*.75+i,name:"arrow_nme",...o&&{config:o}}),southWestArrowNorthEast:(c,h)=>({top:a(c),left:c.left-h.width+i,name:"arrow_ne",...o&&{config:o}}),southArrowNorthWest:c=>({top:a(c),left:c.left+c.width/2-i,name:"arrow_nw",...o&&{config:o}}),southArrowNorthMiddleWest:(c,h)=>({top:a(c),left:c.left+c.width/2-h.width*.25-i,name:"arrow_nmw",...o&&{config:o}}),southArrowNorth:(c,h)=>({top:a(c),left:c.left+c.width/2-h.width/2,name:"arrow_n",...o&&{config:o}}),southArrowNorthMiddleEast:(c,h)=>({top:a(c),left:c.left+c.width/2-h.width*.75+i,name:"arrow_nme",...o&&{config:o}}),southArrowNorthEast:(c,h)=>({top:a(c),left:c.left+c.width/2-h.width+i,name:"arrow_ne",...o&&{config:o}}),southEastArrowNorthWest:c=>({top:a(c),left:c.right-i,name:"arrow_nw",...o&&{config:o}}),southEastArrowNorthMiddleWest:(c,h)=>({top:a(c),left:c.right-h.width*.25-i,name:"arrow_nmw",...o&&{config:o}}),southEastArrowNorth:(c,h)=>({top:a(c),left:c.right-h.width/2,name:"arrow_n",...o&&{config:o}}),southEastArrowNorthMiddleEast:(c,h)=>({top:a(c),left:c.right-h.width*.75+i,name:"arrow_nme",...o&&{config:o}}),southEastArrowNorthEast:(c,h)=>({top:a(c),left:c.right-h.width+i,name:"arrow_ne",...o&&{config:o}}),westArrowEast:(c,h)=>({top:c.top+c.height/2-h.height/2,left:c.left-h.width-n,name:"arrow_e",...o&&{config:o}}),eastArrowWest:(c,h)=>({top:c.top+c.height/2-h.height/2,left:c.right+n,name:"arrow_w",...o&&{config:o}}),viewportStickyNorth:(c,h,f)=>{const m=new Me(ue.document.body).getIntersection(f.getVisible());if(!m)return null;const w=m.getVisible();return!c.getIntersection(w)||!(w.top-c.top-r<h.height&&w.bottom-c.bottom<h.height)?null:{top:w.top+r,left:c.left+c.width/2-h.width/2,name:"arrowless",config:{withArrow:!1,...o}}}};function l(c,h){return c.top-h.height-n}function a(c){return c.bottom+n}}};p(In,"arrowSideOffset",25),p(In,"arrowHeightOffset",10),p(In,"stickyVerticalOffset",20),p(In,"_getOptimalPosition",bx),p(In,"defaultPositions",In.generatePositions());let Gi=In;function Pm(s){return Po(s)?s:lp(s)?s.commonAncestorContainer:typeof s=="function"?Pm(s()):null}class J6 extends he{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class iW extends he{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function nW(s){return s.bindTemplate.to(t=>{t.target===s.element&&t.preventDefault()})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function eI(s){if(Array.isArray(s))return{items:s,removeItems:[]};const t={items:[],removeItems:[]};return s?{...t,...s}:t}const sW={alignLeft:_6,bold:k6,importExport:kF,paragraph:zF,plus:UF,text:iz,threeVerticalDots:Fx,pilcrow:WF,dragIndicator:wF};class vl extends he{constructor(e,i){super(e);p(this,"options");p(this,"items");p(this,"focusTracker");p(this,"keystrokes");p(this,"itemsView");p(this,"children");p(this,"focusables");p(this,"_focusCycler");p(this,"_behavior");const n=this.bindTemplate,r=this.t;this.options=i||{},this.set("ariaLabel",r("Editor toolbar")),this.set("maxWidth","auto"),this.set("role","toolbar"),this.set("isGrouping",!!this.options.shouldGroupWhenFull),this.items=this.createCollection(),this.focusTracker=new ht,this.keystrokes=new bt,this.set("class",void 0),this.set("isCompact",!1),this.set("isVertical",!1),this.itemsView=new rW(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=e.uiLanguageDirection==="rtl";this._focusCycler=new Kt({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const l=["ck","ck-toolbar",n.to("class"),n.if("isCompact","ck-toolbar_compact"),n.if("isGrouping","ck-toolbar_grouping"),n.if("isVertical","ck-toolbar_vertical")];this.options.shouldGroupWhenFull&&this.options.isFloating&&l.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:l,role:n.to("role"),"aria-label":n.to("ariaLabel"),style:{maxWidth:n.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:nW(this)}}),this._behavior=this.options.shouldGroupWhenFull?new qC(this):new HC(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e);this.items.on("add",(e,i)=>{this.focusTracker.add(i)}),this.items.on("remove",(e,i)=>{this.focusTracker.remove(i)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,i,n){this.items.addMany(this._buildItemsFromConfig(e,i,n))}switchBehavior(e){this._behavior.type!==e&&(this._behavior.destroy(),this.itemsView.children.clear(),this.focusables.clear(),e==="dynamic"?(this._behavior=new qC(this),this._behavior.render(this),this._behavior.refreshItems()):(this._behavior=new HC(this),this._behavior.render(this)))}_buildItemsFromConfig(e,i,n){const r=eI(e),o=n||r.removeItems;return this._cleanItemsConfiguration(r.items,i,o).map(a=>ls(a)?this._createNestedToolbarDropdown(a,i,o):a==="|"?new J6:a==="-"?new iW:i.create(a)).filter(a=>!!a)}_cleanItemsConfiguration(e,i,n){const r=e.filter((o,l,a)=>o==="|"?!0:n.indexOf(o)!==-1?!1:o==="-"?this.options.shouldGroupWhenFull?(We("toolbarview-line-break-ignored-when-grouping-items",a),!1):!0:!ls(o)&&!i.has(o)?(We("toolbarview-item-unavailable",{item:o}),!1):!0);return this._cleanSeparatorsAndLineBreaks(r)}_cleanSeparatorsAndLineBreaks(e){const i=l=>l!=="-"&&l!=="|",n=e.length,r=e.findIndex(i);if(r===-1)return[];const o=n-e.slice().reverse().findIndex(i);return e.slice(r,o).filter((l,a,c)=>i(l)?!0:!(a>0&&c[a-1]===l))}_createNestedToolbarDropdown(e,i,n){let{label:r,icon:o,items:l,tooltip:a=!0,withText:c=!1}=e;if(l=this._cleanItemsConfiguration(l,i,n),!l.length)return null;const h=this.locale,f=xn(h);return r||We("toolbarview-nested-toolbar-dropdown-missing-label",e),f.class="ck-toolbar__nested-toolbar-dropdown",f.buttonView.set({label:r,tooltip:a,withText:!!c}),o!==!1?f.buttonView.icon=sW[o]||o||Fx:f.buttonView.withText=!0,Hx(f,()=>f.toolbarView._buildItemsFromConfig(l,i,n)),f}}class rW extends he{constructor(e){super(e);p(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class HC{constructor(t){p(this,"type","static");t.isGrouping=!1,t.itemsView.children.bindTo(t.items).using(e=>e),t.focusables.bindTo(t.items).using(e=>yc(e)?e:null)}render(){}destroy(){}}class qC{constructor(t){p(this,"type","dynamic");p(this,"view");p(this,"viewChildren");p(this,"viewFocusables");p(this,"viewItemsView");p(this,"viewFocusTracker");p(this,"viewLocale");p(this,"ungroupedItems");p(this,"groupedItems");p(this,"groupedItemsDropdown");p(this,"resizeObserver",null);p(this,"cachedPadding",null);p(this,"shouldUpdateGroupingOnNextResize",!1);p(this,"viewElement");this.view=t,this.viewChildren=t.children,this.viewFocusables=t.focusables,this.viewItemsView=t.itemsView,this.viewFocusTracker=t.focusTracker,this.viewLocale=t.locale,this.view.isGrouping=!0,this.ungroupedItems=t.createCollection(),this.groupedItems=t.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),t.itemsView.children.bindTo(this.ungroupedItems).using(e=>e),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),t.children.on("change",this._updateFocusCyclableItems.bind(this)),t.items.on("change",(e,i)=>{const n=i.index,r=Array.from(i.added);for(const o of i.removed)n>=this.ungroupedItems.length?this.groupedItems.remove(o):this.ungroupedItems.remove(o);for(let o=n;o<n+r.length;o++){const l=r[o-n];o>this.ungroupedItems.length?this.groupedItems.add(l,o-this.ungroupedItems.length):this.ungroupedItems.add(l,o)}this._updateGrouping()})}render(t){this.viewElement=t.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(t)}destroy(){this.groupedItemsDropdown.destroy(),this.viewChildren.length>1&&(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last)),this.resizeObserver.destroy()}refreshItems(){const t=this.view;if(t.items.length){for(let e=0;e<t.items.length;e++){const i=[...t.items][e];this.ungroupedItems.add(i,e)}this._updateGrouping()}}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!Mr(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const t=this.groupedItems.length;let e;for(;this._areItemsOverflowing;)this._groupLastItem(),e=!0;if(!e&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==t&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const t=this.viewElement,e=this.viewLocale.uiLanguageDirection,i=new Me(t.lastChild),n=new Me(t);if(!this.cachedPadding){const r=ue.window.getComputedStyle(t),o=e==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(r[o])}return e==="ltr"?i.right>n.right-this.cachedPadding:i.left<n.left+this.cachedPadding}_enableGroupingOnResize(){let t;this.resizeObserver=new wx(this.viewElement,e=>{(!t||t!==e.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),t=e.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(t){t.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new J6),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const t=this.viewLocale,e=t.t,i=xn(t);return i.class="ck-toolbar__grouped-dropdown",i.panelPosition=t.uiLanguageDirection==="ltr"?"sw":"se",Hx(i,this.groupedItems),i.buttonView.set({label:e("Show more items"),tooltip:!0,tooltipPosition:t.uiLanguageDirection==="rtl"?"se":"sw",icon:Fx}),i}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(t=>{yc(t)&&this.viewFocusables.add(t)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class _c extends he{constructor(e,i){super(e);p(this,"children");p(this,"actionView");p(this,"arrowView");p(this,"keystrokes");p(this,"focusTracker");const n=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(i),this.arrowView=this._createArrowView(),this.keystrokes=new bt,this.focusTracker=new ht,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",n.to("class"),n.if("isVisible","ck-hidden",r=>!r),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,i)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),i())}),this.keystrokes.set("arrowleft",(e,i)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),i())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){const i=e||new ve;return e||i.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),i.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),i.delegate("execute").to(this),i}_createArrowView(){const e=new ve,i=e.bindTemplate;return e.icon=fp,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":i.to("isOn"),"aria-haspopup":!0,"aria-expanded":i.to("isOn",n=>String(n))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}function xn(s,t=K6){const e=typeof t=="function"?new t(s):t,i=new eW(s),n=new I1(s,e,i);return e.bind("isEnabled").to(n),e instanceof _c?e.arrowView.bind("isOn").to(n,"isOpen"):e.bind("isOn").to(n,"isOpen"),oW(n),n}function Hx(s,t,e={}){s.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),s.isOpen?XC(s,t,e):s.once("change:isOpen",()=>XC(s,t,e),{priority:"highest"}),e.enableActiveItemFocusOnDropdownOpen&&qx(s,()=>s.toolbarView.items.find(i=>i.isOn))}function XC(s,t,e){const i=s.locale,n=i.t,r=s.toolbarView=new vl(i),o=typeof t=="function"?t():t;r.ariaLabel=e.ariaLabel||n("Dropdown toolbar"),e.maxWidth&&(r.maxWidth=e.maxWidth),e.class&&(r.class=e.class),e.isCompact&&(r.isCompact=e.isCompact),e.isVertical&&(r.isVertical=!0),o instanceof hi?r.items.bindTo(o).using(l=>l):r.items.addMany(o),s.panelView.children.add(r),s.focusTracker.add(r),r.items.delegate("execute").to(s)}function Ql(s,t,e={}){s.isOpen?jC(s,t,e):s.once("change:isOpen",()=>jC(s,t,e),{priority:"highest"}),qx(s,()=>s.listView.items.find(i=>i instanceof us?i.children.first.isOn:!1))}function jC(s,t,e){const i=s.locale,n=s.listView=new $l(i),r=typeof t=="function"?t():t;n.ariaLabel=e.ariaLabel,n.role=e.role,iI(s,n.items,r,i),s.panelView.children.add(n),n.items.delegate("execute").to(s)}function qx(s,t){s.on("change:isOpen",()=>{if(!s.isOpen)return;const e=t();e&&(typeof e.focus=="function"?e.focus():We("ui-dropdown-focus-child-on-open-child-missing-focus",{view:e}))},{priority:Ki.low-10})}function oW(s){lW(s),aW(s),cW(s),uW(s),hW(s),dW(s)}function lW(s){Dr({emitter:s,activator:()=>s.isRendered&&s.isOpen,callback:()=>{s.isOpen=!1},contextElements:()=>[s.element,...tI(s.focusTracker).filter(t=>!s.element.contains(t))]})}function tI(s){return[...s.elements,...s.externalViews.flatMap(t=>tI(t.focusTracker))]}function aW(s){s.on("execute",t=>{t.source instanceof td||(s.isOpen=!1)})}function cW(s){s.focusTracker.on("change:isFocused",(t,e,i)=>{i||!s.isOpen||(s.isOpen=!1)})}function uW(s){s.keystrokes.set("arrowdown",(t,e)=>{s.isOpen&&(s.panelView.focus(),e())}),s.keystrokes.set("arrowup",(t,e)=>{s.isOpen&&(s.panelView.focusLast(),e())})}function hW(s){s.on("change:isOpen",(t,e,i)=>{if(i)return;s.focusTracker.elements.some(r=>r.contains(ue.document.activeElement))&&s.buttonView.focus()})}function dW(s){s.on("change:isOpen",(t,e,i)=>{i&&s.panelView.focus()},{priority:"low"})}function iI(s,t,e,i){fW(t),t.bindTo(e).using(n=>{if(n.type==="separator")return new Zx(i);if(n.type==="group"){const r=new Cm(i);return r.set({label:n.label}),iI(s,r.items,n.items,i),r.items.delegate("execute").to(s),r}else if(n.type==="button"||n.type==="switchbutton"){const r=n.model.role==="menuitemcheckbox"||n.model.role==="menuitemradio",o=new us(i);let l;return n.type==="button"?(l=new vc(i),l.set({isToggleable:r})):l=new td(i),l.bind(...Object.keys(n.model)).to(n.model),l.delegate("execute").to(o),o.children.add(l),o}return null})}function fW(s){let t=0;const e=r=>!(r instanceof us)||!(r.children.first instanceof vc)?null:r.children.first,i=r=>{const o=e(r);return!o||!o.isToggleable?null:o},n=r=>{for(const o of s){const l=e(o);l&&(l.hasCheckSpace=r)}};s.on("change",(r,o)=>{const l=t>0;for(const c of o.removed)i(c)&&t--;for(const c of o.added){const h=e(c);h&&(h.isToggleable&&t++,h.hasCheckSpace=t>0)}const a=t>0;l!==a&&n(a)})}const wn=(s,t,e)=>{const i=new Y6(s.locale);return i.set({id:t,ariaDescribedById:e}),i.bind("isReadOnly").to(s,"isEnabled",n=>!n),i.bind("hasError").to(s,"errorText",n=>!!n),i.on("input",()=>{s.errorText=null}),s.bind("isEmpty","isFocused","placeholder").to(i),i},nI=(s,t,e)=>{const i=new Jz(s.locale);return i.set({id:t,ariaDescribedById:e,inputMode:"numeric"}),i.bind("isReadOnly").to(s,"isEnabled",n=>!n),i.bind("hasError").to(s,"errorText",n=>!!n),i.on("input",()=>{s.errorText=null}),s.bind("isEmpty","isFocused","placeholder").to(i),i},sI=(s,t,e)=>{const i=xn(s.locale);return i.set({id:t,ariaDescribedById:e}),i.bind("isEnabled").to(s),i},mW=150;class gW extends he{constructor(e,i={}){super(e);p(this,"hexInputRow");p(this,"_debounceColorPickerEvent");p(this,"_config");this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const n=this.createCollection();i.hideInput||n.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:n}),this._config=i,this._debounceColorPickerEvent=as(r=>{this.set("color",r),this.fire("colorSelected",{color:this.color})},mW,{leading:!0}),this.on("set:color",(r,o,l)=>{r.return=X6(l,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=Yw(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),Yw(this.color)!=Yw(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),Xz("hex-color-picker",kz),this.picker=ue.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const e=document.createElement("style");e.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)}this.picker.addEventListener("color-changed",e=>{const i=e.detail.value;this._debounceColorPickerEvent(i)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(Ie.isGecko||Ie.isiOS||Ie.isSafari||Ie.isBlink)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const n=[...this.picker.shadowRoot.children].filter(r=>r.getAttribute("role")==="slider").map(r=>new pW(r));this.slidersView=this.createCollection(),n.forEach(r=>{this.slidersView.add(r)})}_createInputRow(){const e=this._createColorInput();return new bW(this.locale,e)}_createColorInput(){const e=new jt(this.locale,wn),{t:i}=this.locale;return e.set({label:i("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",n=>e.isFocused?e.fieldView.value:n.startsWith("#")?n.substring(1):n),e.fieldView.on("input",()=>{const n=e.fieldView.element.value;if(n){const r=rI(n);r&&this._debounceColorPickerEvent(r)}}),e}isValid(){const{t:e}=this.locale;return this._config.hideInput?!0:(this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=e('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function Yw(s){let t=qz(s);return t||(t="#000"),t.length===4&&(t="#"+[t[1],t[1],t[2],t[2],t[3],t[3]].join("")),t.toLowerCase()}class pW extends he{constructor(t){super(),this.element=t}focus(){this.element.focus()}}class wW extends he{constructor(t){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class bW extends he{constructor(e,i){super(e);p(this,"children");p(this,"inputView");this.inputView=i,this.children=this.createCollection([new wW,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return rI(this.inputView.fieldView.element.value)}}function rI(s){if(!s)return null;const t=s.trim().replace(/^#/,"");return![3,4,6,8].includes(t.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(t)?null:`#${t}`}class OW extends ct(vi){constructor(t){super(t),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(t,e){return this.find(i=>i.color===t.color)?this:super.add(t,e)}hasColor(t){return!!this.find(e=>e.color===t)}}class xW extends he{constructor(e,{colors:i,columns:n,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:l,colorPickerLabel:a,focusTracker:c,focusables:h}){super(e);p(this,"items");p(this,"colorDefinitions");p(this,"focusTracker");p(this,"columns");p(this,"documentColors");p(this,"documentColorsCount");p(this,"staticColorsGrid");p(this,"documentColorsGrid");p(this,"colorPickerButtonView");p(this,"removeColorButtonView");p(this,"_focusables");p(this,"_documentColorsLabel");p(this,"_removeButtonLabel");p(this,"_colorPickerLabel");const f=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=c,this.items=this.createCollection(),this.colorDefinitions=i,this.columns=n,this.documentColors=new OW,this.documentColorsCount=l,this._focusables=h,this._removeButtonLabel=r,this._colorPickerLabel=a,this._documentColorsLabel=o,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",f.if("isVisible","ck-hidden",m=>!m)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,i){const n=e.document,r=this.documentColorsCount;this.documentColors.clear();for(const o of n.getRoots()){const l=e.createRangeIn(o);for(const a of l.getItems())if(a.is("$textProxy")&&a.hasAttribute(i)&&(this._addColorToDocumentColors(a.getAttribute(i)),this.documentColors.length>=r))return}}updateSelectedColors(){const e=this.documentColorsGrid,i=this.staticColorsGrid,n=this.selectedColor;i.selectedColor=n,e&&(e.selectedColor=n)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const e=Qn.bind(this.documentColors,this.documentColors),i=new he(this.locale);i.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(i),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new ve,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:mF,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const e=new ve;return e.set({withText:!0,icon:OF,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){const e=new UC(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(i,n)=>{this.fire("execute",{value:n.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=Qn.bind(this.documentColors,this.documentColors),i=new UC(this.locale,{columns:this.columns});return i.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),i.items.bindTo(this.documentColors).using(n=>{var o;const r=new q6;return r.set({color:n.color,hasBorder:(o=n.options)==null?void 0:o.hasBorder}),n.label&&r.set({label:n.label,tooltip:!0}),r.on("execute",()=>{this.fire("execute",{value:n.color,source:"documentColorsGrid"})}),r}),this.documentColors.on("change:isEmpty",(n,r,o)=>{o&&(i.selectedColor=null)}),i}_addColorToDocumentColors(e){const i=this.colorDefinitions.find(n=>n.color===e);i?this.documentColors.add(Object.assign({},i)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}class yW extends he{constructor(e,{focusTracker:i,focusables:n,keystrokes:r,colorPickerViewConfig:o}){super(e);p(this,"items");p(this,"colorPickerView");p(this,"saveButtonView");p(this,"cancelButtonView");p(this,"actionBarView");p(this,"focusTracker");p(this,"keystrokes");p(this,"_focusables");p(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=i,this.keystrokes=r,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=n,this._colorPickerViewConfig=o;const l=this.bindTemplate,{saveButtonView:a,cancelButtonView:c}=this._createActionButtons();this.saveButtonView=a,this.cancelButtonView=c,this.actionBarView=this._createActionBarView({saveButtonView:a,cancelButtonView:c}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",l.if("isVisible","ck-hidden",h=>!h)]},children:this.items})}render(){super.render();const e=new gW(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(i,n,r)=>{e.color=r}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){const e=i=>i.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const i of this.colorPickerView.slidersView)this.focusTracker.add(i.element),this._focusables.add(i);const e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:i}){const n=new he,r=this.createCollection();return r.add(e),r.add(i),n.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:r}),n}_createActionButtons(){const e=this.locale,i=e.t,n=new ve(e),r=new ve(e);return n.set({icon:Jh,class:"ck-button-save",type:"button",withText:!1,label:i("Accept")}),r.set({icon:xc,class:"ck-button-cancel",type:"button",withText:!1,label:i("Cancel")}),n.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),r.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:n,cancelButtonView:r}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,i)=>{this.fire("execute",{value:i.color,source:"colorPicker"}),this.set("selectedColor",i.color)})}}class vW extends he{constructor(e,{colors:i,columns:n,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:l,colorPickerLabel:a,colorPickerViewConfig:c}){super(e);p(this,"focusTracker");p(this,"keystrokes");p(this,"items");p(this,"colorGridsFragmentView");p(this,"colorPickerFragmentView");p(this,"_focusCycler");p(this,"_focusables");p(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=new ht,this.keystrokes=new bt,this._focusables=new hi,this._colorPickerViewConfig=c,this._focusCycler=new Kt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new xW(e,{colors:i,columns:n,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:l,colorPickerLabel:a,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new yW(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:c}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(h,f,m)=>{this.colorGridsFragmentView.set("selectedColor",m),this.colorPickerFragmentView.set("selectedColor",m)}),this.colorGridsFragmentView.on("change:selectedColor",(h,f,m)=>{this.set("selectedColor",m)}),this.colorPickerFragmentView.on("change:selectedColor",(h,f,m)=>{this.set("selectedColor",m)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,i){this.colorGridsFragmentView.updateDocumentColors(e,i)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class _W{constructor(t){p(this,"editor");p(this,"_components",new Map);this.editor=t}*names(){for(const t of this._components.values())yield t.originalName}add(t,e){this._components.set(Kw(t),{callback:e,originalName:t})}create(t){if(!this.has(t))throw new A("componentfactory-item-missing",this,{name:t});return this._components.get(Kw(t)).callback(this.editor.locale)}has(t){return this._components.has(Kw(t))}}function Kw(s){return String(s).toLowerCase()}const GC="ck-tooltip",pi=class pi extends Zi(){constructor(e){super();p(this,"tooltipTextView");p(this,"balloonPanelView");p(this,"_currentElementWithTooltip",null);p(this,"_currentTooltipPosition",null);p(this,"_mutationObserver",null);p(this,"_pinTooltipDebounced");p(this,"_unpinTooltipDebounced");p(this,"_watchdogExcluded");if(pi._editors.add(e),pi._instance)return pi._instance;pi._instance=this,this.tooltipTextView=new he(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new Gi(e.locale),this.balloonPanelView.class=GC,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=kW(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=as(this._pinTooltip,600),this._unpinTooltipDebounced=as(this._unpinTooltip,400),this.listenTo(ue.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(ue.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(ue.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(ue.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(ue.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(ue.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const i=e.ui.view&&e.ui.view.body;pi._editors.delete(e),this.stopListening(e.ui),i&&i.has(this.balloonPanelView)&&i.remove(this.balloonPanelView),pi._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),pi._instance=null)}static getPositioningFunctions(e){const i=pi.defaultBalloonPositions;return{s:[i.southArrowNorth,i.southArrowNorthEast,i.southArrowNorthWest],n:[i.northArrowSouth],e:[i.eastArrowWest],w:[i.westArrowEast],sw:[i.southArrowNorthEast],se:[i.southArrowNorthWest]}[e]}_onKeyDown(e,i){i.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),i.stopPropagation())}_onEnterOrFocus(e,{target:i}){const n=Jw(i);if(!n){e.name==="focus"&&this._unpinTooltip();return}if(n===this._currentElementWithTooltip){this._unpinTooltipDebounced.cancel();return}this._unpinTooltip(),e.name==="focus"&&!n.matches(":hover")||n.matches("[data-cke-tooltip-instant]")?this._pinTooltip(n,eb(n)):this._pinTooltipDebounced(n,eb(n))}_onLeaveOrBlur(e,{target:i,relatedTarget:n}){if(e.name==="mouseleave"){if(!Po(i))return;const r=this.balloonPanelView.element,o=r&&(r===n||r.contains(n)),l=!o&&i===r;if(o){this._unpinTooltipDebounced.cancel();return}if(!l&&this._currentElementWithTooltip&&i!==this._currentElementWithTooltip)return;const a=Jw(i),c=Jw(n);(l||a&&a!==c)&&(this._pinTooltipDebounced.cancel(),this._currentElementWithTooltip&&this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]")||a&&a.matches("[data-cke-tooltip-instant]")?this._unpinTooltip():this._unpinTooltipDebounced())}else{if(this._currentElementWithTooltip&&i!==this._currentElementWithTooltip)return;this._pinTooltipDebounced.cancel(),this._unpinTooltipDebounced()}}_onScroll(e,{target:i}){this._currentElementWithTooltip&&(i.contains(this.balloonPanelView.element)&&i.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:i,position:n,cssClass:r}){this._unpinTooltip();const o=Nt(pi._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=i,this.balloonPanelView.class=[GC,r].filter(l=>l).join(" "),this.balloonPanelView.pin({target:e,positions:pi.getPositioningFunctions(n)}),this._mutationObserver.attach(e);for(const l of pi._editors)this.listenTo(l.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=n}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of pi._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const e=eb(this._currentElementWithTooltip);if(!Mr(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:pi.getPositioningFunctions(e.position)})}};p(pi,"defaultBalloonPositions",Gi.generatePositions({heightOffset:5,sideOffset:13})),p(pi,"_editors",new Set),p(pi,"_instance",null);let R1=pi;function Jw(s){return Po(s)?s.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function eb(s){return{text:s.dataset.ckeTooltipText,position:s.dataset.ckeTooltipPosition||"s",cssClass:s.dataset.ckeTooltipClass||""}}function kW(s){const t=new MutationObserver(()=>{s()});return{attach(e){t.observe(e,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){t.disconnect()}}}const SW=50,CW=350;class oI extends Zi(){constructor(e,i={}){super();p(this,"editor");p(this,"_balloonView",null);p(this,"_showBalloonThrottled",tc(()=>this._showBalloon(),50,{leading:!0}));p(this,"_lastFocusedEditableElement",null);p(this,"_balloonClass");this.editor=e,this._balloonClass=i.balloonClass,e.on("ready",()=>this._handleEditorReady())}destroy(){const e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const e=this.editor;this._isEnabled()&&e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(i,n,r)=>{this._updateLastFocusedEditableElement(),r?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(i,n,r)=>{this._updateLastFocusedEditableElement(),r&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_getNormalizedConfig(){return{side:this.editor.locale.contentLanguageDirection==="ltr"?"right":"left",position:"border",verticalOffset:0,horizontalOffset:5}}_showBalloon(){const e=this._getBalloonAttachOptions();e&&(this._balloonView||(this._balloonView=this._createBalloonView()),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_createBalloonView(){const e=this.editor,i=new Gi,n=this._createBadgeContent();return i.content.add(n),this._balloonClass&&(i.class=this._balloonClass),e.ui.view.body.add(i),i}_getBalloonAttachOptions(){if(!this._lastFocusedEditableElement)return null;const e=this._getNormalizedConfig(),i=e.side==="right"?PW(this._lastFocusedEditableElement,e):TW(this._lastFocusedEditableElement,e);return{target:this._lastFocusedEditableElement,positions:[i]}}_updateLastFocusedEditableElement(){const e=this.editor,i=e.ui.focusTracker.isFocused,n=e.ui.focusTracker.focusedElement;if(!i||!n){this._lastFocusedEditableElement=null;return}const r=Array.from(e.ui.getEditableElementsNames()).map(o=>e.ui.getEditableElement(o));r.includes(n)?this._lastFocusedEditableElement=n:this._lastFocusedEditableElement=r[0]}}function PW(s,t){return lI(s,t,(e,i)=>e.left+e.width-i.width-t.horizontalOffset)}function TW(s,t){return lI(s,t,e=>e.left+t.horizontalOffset)}function lI(s,t,e){return(i,n)=>{const r=new Me(s);if(r.width<CW||r.height<SW)return null;let o;t.position==="inside"?o=r.bottom-n.height:o=r.bottom-n.height/2,o-=t.verticalOffset;const l=e(r,n),c=i.clone().moveTo(l,o).getIntersection(n.clone().moveTo(l,o)).getVisible();return!c||c.getArea()<n.getArea()?null:{top:o,left:l,name:`position_${t.position}-side_${t.side}`,config:{withArrow:!1}}}}const EW="Powered by";class AW extends oI{constructor(t){super(t,{balloonClass:"ck-powered-by-balloon"})}_isEnabled(){const t=this.editor;if(t.config.get("ui.poweredBy.forceVisible"))return!0;const i=t.config.get("licenseKey");if(i=="GPL")return!0;const n=vx(i.split(".")[1]);return n?!n.whiteLabel:!0}_createBadgeContent(){return new IW(this.editor.locale,this._getNormalizedConfig().label)}_getNormalizedConfig(){const t=super._getNormalizedConfig(),e=this.editor.config.get("ui.poweredBy")||{},i=e.position||t.position,n=i==="inside"?5:t.verticalOffset;return{position:i,side:e.side||t.side,label:e.label===void 0?EW:e.label,verticalOffset:e.verticalOffset!==void 0?e.verticalOffset:n,horizontalOffset:e.horizontalOffset!==void 0?e.horizontalOffset:t.horizontalOffset,forceVisible:!!e.forceVisible}}}class IW extends he{constructor(t,e){super(t);const i=new Vs,n=this.bindTemplate;i.set({content:ZF,isColorInherited:!1}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...e?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[e]}]:[],i],on:{dragstart:n.to(r=>r.preventDefault())}}]})}}class RW extends oI{constructor(e){super(e,{balloonClass:"ck-evaluation-badge-balloon"});p(this,"licenseTypeMessage",{evaluation:"For evaluation purposes only",trial:"For evaluation purposes only",development:"For development purposes only"})}_isEnabled(){const i=this.editor.config.get("licenseKey"),n=YC(i);return!!(n&&this.licenseTypeMessage[n])}_createBadgeContent(){const e=this.editor.config.get("licenseKey"),i=YC(e);return new VW(this.editor.locale,this.licenseTypeMessage[i])}_getNormalizedConfig(){const e=super._getNormalizedConfig(),i=this.editor.config.get("ui.poweredBy")||{},n=i.position||e.position,r=i.side||e.side;return{position:n,side:r==="left"?"right":"left",verticalOffset:e.verticalOffset,horizontalOffset:e.horizontalOffset}}}class VW extends he{constructor(t,e){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-evaluation-badge"],"aria-hidden":!0},children:[{tag:"span",attributes:{class:["ck","ck-evaluation-badge__label"]},children:[e]}]})}}function YC(s){if(s=="GPL")return"GPL";const t=vx(s.split(".")[1]);return t?t.licenseType||"production":null}const KC={POLITE:"polite",ASSERTIVE:"assertive"};class MW{constructor(t){p(this,"editor");p(this,"view");this.editor=t,t.once("ready",()=>{for(const e of Object.values(KC))this.announce("",e)})}announce(t,e=KC.POLITE){const i=this.editor;if(!i.ui.view)return;this.view||(this.view=new LW(i.locale),i.ui.view.body.add(this.view));const{politeness:n,isUnsafeHTML:r}=typeof e=="string"?{politeness:e}:e;let o=this.view.regionViews.find(l=>l.politeness===n);o||(o=new BW(i,n),this.view.regionViews.add(o)),o.announce({announcement:t,isUnsafeHTML:r})}}class LW extends he{constructor(e){super(e);p(this,"regionViews");this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class BW extends he{constructor(e,i){super(e.locale);p(this,"politeness");p(this,"_domConverter");p(this,"_pruneAnnouncementsInterval");this.setTemplate({tag:"div",attributes:{"aria-live":i,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=i,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:i}){if(!e.trim().length)return;const n=document.createElement("li");i?this._domConverter.setContentOf(n,e):n.innerText=e,this._listElement.appendChild(n)}get _listElement(){return this.element.querySelector("ul")}}class id extends us{constructor(t,e){super(t);const i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:i.to("mouseenter")}}),this.delegate("mouseenter").to(e)}}const Ff=5,Oa={toggleMenusAndFocusItemsOnHover(s){s.on("menu:mouseenter",t=>{if(!(!s.isFocusBorderEnabled&&!s.isOpen)){if(s.isOpen)for(const e of s.menus){const i=t.path[0],n=i instanceof id&&i.children.first===e;e.isOpen=(t.path.includes(e)||n)&&e.isEnabled}t.source.focus()}})},focusCycleMenusOnArrows(s){const t=s.locale.uiLanguageDirection==="rtl";s.on("menu:arrowright",i=>{e(i.source,t?-1:1)}),s.on("menu:arrowleft",i=>{e(i.source,t?1:-1)});function e(i,n){const r=s.children.getIndex(i),o=i.isOpen,l=s.children.length,a=s.children.get((r+l+n)%l);i.isOpen=!1,o&&(a.isOpen=!0),a.buttonView.focus()}},closeMenusWhenTheBarCloses(s){s.on("change:isOpen",()=>{s.isOpen||s.menus.forEach(t=>{t.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(s){s.on("menu:change:isOpen",(t,e,i)=>{i&&s.menus.filter(n=>t.source.parentMenuView===n.parentMenuView&&t.source!==n&&n.isOpen).forEach(n=>{n.isOpen=!1})})},closeOnClickOutside(s){Dr({emitter:s,activator:()=>s.isOpen,callback:()=>s.close(),contextElements:()=>s.children.map(t=>t.element)})},enableFocusHighlightOnInteraction(s){let t=!1;s.on("change:isOpen",(e,i,n)=>{n||(t||(s.isFocusBorderEnabled=!1),t=!1)}),s.listenTo(s.element,"keydown",()=>{t=!0},{useCapture:!0}),s.listenTo(s.element,"keyup",()=>{t=!1},{useCapture:!0}),s.listenTo(s.element,"focus",()=>{t&&(s.isFocusBorderEnabled=!0)},{useCapture:!0})}},ao={openAndFocusPanelOnArrowDownKey(s){s.keystrokes.set("arrowdown",(t,e)=>{s.isEnabled&&s.focusTracker.focusedElement===s.buttonView.element&&(s.isOpen||(s.isOpen=!0),s.panelView.focus(),e())})},openOnArrowRightKey(s){const t=s.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";s.keystrokes.set(t,(e,i)=>{s.focusTracker.focusedElement!==s.buttonView.element||!s.isEnabled||(s.isOpen||(s.isOpen=!0),s.panelView.focus(),i())})},openOnButtonClick(s){s.buttonView.on("execute",()=>{s.isOpen=!0})},toggleOnButtonClick(s){s.buttonView.on("execute",()=>{s.isOpen=!s.isOpen})},openAndFocusOnEnterKeyPress(s){s.keystrokes.set("enter",(t,e)=>{s.focusTracker.focusedElement===s.buttonView.element&&(s.isOpen=!0,s.panelView.focus(),e())})},closeOnArrowLeftKey(s){const t=s.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";s.keystrokes.set(t,(e,i)=>{s.isOpen&&(s.isOpen=!1,s.focus(),i())})},closeOnEscKey(s){s.keystrokes.set("esc",(t,e)=>{s.isOpen&&(s.isOpen=!1,s.focus(),e())})},closeOnParentClose(s){s.parentMenuView.on("change:isOpen",(t,e,i)=>{!i&&t.source===s.parentMenuView&&(s.isOpen=!1)})}},$W={southEast:s=>({top:s.bottom,left:s.left,name:"se"}),southWest:(s,t)=>({top:s.bottom,left:s.left-t.width+s.width,name:"sw"}),northEast:(s,t)=>({top:s.top-t.height,left:s.left,name:"ne"}),northWest:(s,t)=>({top:s.top-t.height,left:s.left-t.width+s.width,name:"nw"}),eastSouth:s=>({top:s.top,left:s.right-Ff,name:"es"}),eastNorth:(s,t)=>({top:s.top-t.height,left:s.right-Ff,name:"en"}),westSouth:(s,t)=>({top:s.top,left:s.left-t.width+Ff,name:"ws"}),westNorth:(s,t)=>({top:s.top-t.height,left:s.left-t.width+Ff,name:"wn"})},QW=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditingEnhanced",items:["menuBar:sourceEditingEnhanced"]},{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"fullscreen",items:["menuBar:fullscreen"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable","menuBar:insertTableLayout"]},{groupId:"insertInline",items:["menuBar:link","menuBar:bookmark","menuBar:comment","menuBar:insertMergeField","menuBar:emoji"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function DW(s){let t;return!("items"in s)||!s.items?t={items:yn(QW),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...s}:t={items:s.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...s},t}function NW({normalizedConfig:s,locale:t,componentFactory:e,extraItems:i}){const n=yn(s);return JC(s,n,i),FW(s,n),JC(s,n,n.addItems),zW(s,n,e),aI(s,n),WW(n,t),n}function FW(s,t){const e=t.removeItems,i=[];t.items=t.items.filter(({menuId:n})=>e.includes(n)?(i.push(n),!1):!0),kc(t.items,n=>{n.groups=n.groups.filter(({groupId:r})=>e.includes(r)?(i.push(r),!1):!0);for(const r of n.groups)r.items=r.items.filter(o=>{const l=cI(o);return e.includes(l)?(i.push(l),!1):!0})});for(const n of e)i.includes(n)||We("menu-bar-item-could-not-be-removed",{menuBarConfig:s,itemName:n})}function JC(s,t,e){const i=[];if(e.length!=0){for(const n of e){const r=HW(n.position),o=qW(n.position);if(UW(n))if(!o)r==="start"?(t.items.unshift(n.menu),i.push(n)):r==="end"&&(t.items.push(n.menu),i.push(n));else{const l=t.items.findIndex(a=>a.menuId===o);l!=-1?r==="before"?(t.items.splice(l,0,n.menu),i.push(n)):r==="after"&&(t.items.splice(l+1,0,n.menu),i.push(n)):e2(t,n.menu,o,r)&&i.push(n)}else ZW(n)?kc(t.items,l=>{if(l.menuId===o)r==="start"?(l.groups.unshift(n.group),i.push(n)):r==="end"&&(l.groups.push(n.group),i.push(n));else{const a=l.groups.findIndex(c=>c.groupId===o);a!==-1&&(r==="before"?(l.groups.splice(a,0,n.group),i.push(n)):r==="after"&&(l.groups.splice(a+1,0,n.group),i.push(n)))}}):e2(t,n.item,o,r)&&i.push(n)}for(const n of e)i.includes(n)||We("menu-bar-item-could-not-be-added",{menuBarConfig:s,addedItemConfig:n})}}function e2(s,t,e,i){let n=!1;return kc(s.items,r=>{for(const{groupId:o,items:l}of r.groups){if(n)return;if(o===e)i==="start"?(l.unshift(t),n=!0):i==="end"&&(l.push(t),n=!0);else{const a=l.findIndex(c=>cI(c)===e);a!==-1&&(i==="before"?(l.splice(a,0,t),n=!0):i==="after"&&(l.splice(a+1,0,t),n=!0))}}}),n}function zW(s,t,e){kc(t.items,i=>{for(const n of i.groups)n.items=n.items.filter(r=>{const o=typeof r=="string"&&!e.has(r);return o&&!t.isUsingDefaultConfig&&We("menu-bar-item-unavailable",{menuBarConfig:s,parentMenuConfig:yn(i),componentName:r}),!o})})}function aI(s,t){const e=t.isUsingDefaultConfig;let i=!1;if(t.items=t.items.filter(n=>n.groups.length?!0:(tb(s,n,e),!1)),!t.items.length){tb(s,s,e);return}kc(t.items,n=>{n.groups=n.groups.filter(r=>r.items.length?!0:(i=!0,!1));for(const r of n.groups)r.items=r.items.filter(o=>uI(o)&&!o.groups.length?(tb(s,o,e),i=!0,!1):!0)}),i&&aI(s,t)}function tb(s,t,e){e||We("menu-bar-menu-empty",{menuBarConfig:s,emptyMenuConfig:t})}function WW(s,t){const e=t.t,i={File:e({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:e({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:e({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:e({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:e({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:e({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:e({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:e({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:e({string:"Font",id:"MENU_BAR_MENU_FONT"})};kc(s.items,n=>{n.label in i&&(n.label=i[n.label])})}function kc(s,t){if(Array.isArray(s))for(const i of s)e(i);function e(i){t(i);for(const n of i.groups)for(const r of n.items)uI(r)&&e(r)}}function UW(s){return typeof s=="object"&&"menu"in s}function ZW(s){return typeof s=="object"&&"group"in s}function HW(s){return s.startsWith("start")?"start":s.startsWith("end")?"end":s.startsWith("after")?"after":"before"}function qW(s){const t=s.match(/^[^:]+:(.+)/);return t?t[1]:null}function cI(s){return typeof s=="string"?s:s.menuId}function uI(s){return typeof s=="object"&&"menuId"in s}class XW extends ct(){constructor(e){super();p(this,"editor");p(this,"componentFactory");p(this,"focusTracker");p(this,"tooltipManager");p(this,"poweredBy");p(this,"evaluationBadge");p(this,"ariaLiveAnnouncer");p(this,"isReady",!1);p(this,"_editableElementsMap",new Map);p(this,"_focusableToolbarDefinitions",[]);p(this,"_extraMenuBarElements",[]);p(this,"_lastFocusedForeignElement",null);p(this,"_domEmitter");const i=e.editing.view;this.editor=e,this.componentFactory=new _W(e),this.focusTracker=new ht,this.tooltipManager=new R1(e),this.poweredBy=new AW(e),this.evaluationBadge=new RW(e),this.ariaLiveAnnouncer=new MW(e),this._initViewportOffset(this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(i.document,"layoutChanged",this.update.bind(this)),this.listenTo(i,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking(),this._initVisualViewportSupport()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy(),this.evaluationBadge.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[],this._domEmitter&&this._domEmitter.stopListening()}setEditableElement(e,i){this._editableElementsMap.set(e,i),i.ckeditorInstance||(i.ckeditorInstance=this.editor),this.focusTracker.add(i);const n=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(i)};this.isReady?n():this.once("ready",n)}removeEditableElement(e){const i=this._editableElementsMap.get(e);i&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(i),this.focusTracker.remove(i),i.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,i={}){e.isRendered?(this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:i})}extendMenuBar(e){this._extraMenuBarElements.push(e)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}initMenuBar(e){const i=e.element;this.focusTracker.add(i),this.editor.keystrokes.listenTo(i);const n=DW(this.editor.config.get("menuBar")||{});e.fillFromConfig(n,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(r,o)=>{i.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),o())}),this.editor.keystrokes.set("Alt+F9",(r,o)=>{i.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),e.isFocusBorderEnabled=!0,e.focus(),o())})}_readViewportOffsetFromConfig(){const e=this.editor,i=e.config.get("ui.viewportOffset");if(i)return i;const n=e.config.get("toolbar.viewportTopOffset");return n?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:n}):{top:0}}_initFocusTracking(){const e=this.editor;let i;e.keystrokes.set("Alt+F10",(n,r)=>{this._saveLastFocusedForeignElement();const o=this._getCurrentFocusedToolbarDefinition();(!o||!i)&&(i=this._getFocusableCandidateToolbarDefinitions());for(let l=0;l<i.length;l++){const a=i.shift();if(i.push(a),a!==o&&this._focusFocusableCandidateToolbar(a)){o&&o.options.afterBlur&&o.options.afterBlur();break}}r()}),e.keystrokes.set("Esc",(n,r)=>{const o=this._getCurrentFocusedToolbarDefinition();o&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):e.editing.view.focus(),o.options.afterBlur&&o.options.afterBlur(),r())})}_saveLastFocusedForeignElement(){const e=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(e)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(e)&&(this._lastFocusedForeignElement=e)}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const i of this._focusableToolbarDefinitions){const{toolbarView:n,options:r}=i;(Mr(n.element)||r.beforeFocus)&&e.push(i)}return e.sort((i,n)=>t2(i)-t2(n)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:i,options:{beforeFocus:n}}=e;return n&&n(),Mr(i.element)?(i.focus(),!0):!1}_handleScrollToTheSelection(e,i){const n={top:0,bottom:0,left:0,right:0,...this.viewportOffset};i.viewportOffset.top+=n.top,i.viewportOffset.bottom+=n.bottom,i.viewportOffset.left+=n.left,i.viewportOffset.right+=n.right}_bindBodyCollectionWithFocusTracker(){const e=this.view.body;for(const i of e)this.focusTracker.add(i.element);e.on("add",(i,n)=>{this.focusTracker.add(n.element)}),e.on("remove",(i,n)=>{this.focusTracker.remove(n.element)})}_initViewportOffset(e){this.on("set:viewportOffset",(i,n,r)=>{const o=this._getVisualViewportTopOffset(r);r.visualTop!==o&&(i.return={...r,visualTop:o})}),this.set("viewportOffset",e)}_initVisualViewportSupport(){if(!ue.window.visualViewport)return;const e=()=>{const i=this._getVisualViewportTopOffset(this.viewportOffset);this.viewportOffset.visualTop!==i&&(this.viewportOffset={...this.viewportOffset,visualTop:i})};this._domEmitter=new(Zi()),this._domEmitter.listenTo(ue.window.visualViewport,"scroll",e),this._domEmitter.listenTo(ue.window.visualViewport,"resize",e)}_getVisualViewportTopOffset(e){const i=vm().top,n=e.top||0;return i>n?0:n-i}}function t2(s){const{toolbarView:t,options:e}=s;let i=10;return Mr(t.element)&&i--,e.isContextual&&(i-=2),i}class jW extends he{constructor(e){super(e);p(this,"body");p(this,"menuBarView");p(this,"toolbar");this.body=new A1(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class GW extends jW{constructor(e){super(e);p(this,"top");p(this,"main");p(this,"_voiceLabelView");this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,i=new Jn;return i.text=e("Rich Text Editor"),i.extendTemplate({attributes:{class:"ck-voice-label"}}),i}}class YW extends he{constructor(e,i,n){super(e);p(this,"name",null);p(this,"_editingView");p(this,"_editableElement");p(this,"_hasExternalElement");this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=n,this._hasExternalElement=!!this._editableElement,this._editingView=i}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?n(this):i(this);function i(r){e.change(o=>{const l=e.document.getRoot(r.name);o.addClass(r.isFocused?"ck-focused":"ck-blurred",l),o.removeClass(r.isFocused?"ck-blurred":"ck-focused",l)})}function n(r){e.once("change:isRenderingInProgress",(o,l,a)=>{a?n(r):i(r)})}}}class KW extends YW{constructor(e,i,n,r={}){super(e,i,n);p(this,"_options");this._options=r,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const e=this._editingView;e.change(i=>{const n=e.document.getRoot(this.name);i.setAttribute("aria-label",this.getEditableAriaLabel(),n)})}getEditableAriaLabel(){const e=this.locale.t,i=this._options.label,n=this._editableElement,r=this.name;if(typeof i=="string")return i;if(typeof i=="object")return i[r];if(typeof i=="function")return i(this);if(n){const o=n.getAttribute("aria-label");if(o)return o}return e("Rich Text Editor. Editing area: %0",r)}}class Ti extends he{constructor(e,i={}){super(e);p(this,"children");const n=this.bindTemplate;this.set("class",["ck","ck-form__row",...ut(i.class||[])]),this.children=this.createCollection(),i.children&&i.children.forEach(r=>this.children.add(r)),this.set("_role",null),this.set("_ariaLabelledBy",null),i.labelView&&this.set({_role:"group",_ariaLabelledBy:i.labelView.id}),this.setTemplate({tag:"div",attributes:{class:n.to("class",r=>r.join(" ")),role:n.to("_role"),"aria-labelledby":n.to("_ariaLabelledBy")},children:this.children})}}class vh extends dp{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(t,e)=>{window.alert(e.message)},{priority:"lowest"})}showSuccess(t,e={}){this._showNotification({message:t,type:"success",namespace:e.namespace,title:e.title})}showInfo(t,e={}){this._showNotification({message:t,type:"info",namespace:e.namespace,title:e.title})}showWarning(t,e={}){this._showNotification({message:t,type:"warning",namespace:e.namespace,title:e.title})}_showNotification(t){const e=t.namespace?`show:${t.type}:${t.namespace}`:`show:${t.type}`;this.fire(e,{message:t.message,type:t.type,title:t.title||""})}}class _l extends ct(){constructor(t,e){super(),e&&iA(this,e),t&&this.set(t)}}const zf=Oc("px");class hs extends F{constructor(e){super(e);p(this,"positionLimiter");p(this,"visibleStack");p(this,"_viewToStack",new Map);p(this,"_idToStack",new Map);p(this,"_view",null);p(this,"_rotatorView",null);p(this,"_fakePanelsView",null);this.positionLimiter=()=>{const i=this.editor.editing.view,r=i.document.selection.editableElement;return r?i.domConverter.mapViewToDom(r.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new A("contextualballoon-add-view-exist",[this,e]);const i=e.stackId||"main";if(!this._idToStack.has(i)){this._idToStack.set(i,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(i)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(i);return}const n=this._idToStack.get(i);e.singleViewMode&&this.showStack(i),n.set(e.view,e),this._viewToStack.set(e.view,n),n===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new A("contextualballoon-remove-view-not-exist",[this,e]);const i=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(i.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(i.values())[i.size-2])),i.size===1?(this._idToStack.delete(this._getStackId(i)),this._numberOfStacks=this._idToStack.size):i.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:{...this.editor.ui.viewportOffset,top:this.editor.ui.viewportOffset.visualTop}})),e}showStack(e){this.visibleStack=e;const i=this._idToStack.get(e);if(!i)throw new A("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==i&&this._showView(Array.from(i.values()).pop())}_createPanelView(){this._view=new Gi(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(n=>n[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let i=e.indexOf(this._visibleStack)+1;e[i]||(i=0),this.showStack(this._getStackId(e[i]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let i=e.indexOf(this._visibleStack)-1;e[i]||(i=e.length-1),this.showStack(this._getStackId(e[i]))}_createRotatorView(){const e=new JW(this.editor.locale),i=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(n,r)=>!r&&n>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(n,r)=>{if(r<2)return"";const o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return i("%0 of %1",[o,r])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new eU(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(i,n)=>!n&&i>=2?Math.min(i-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:i="",withArrow:n=!0,singleViewMode:r=!1}){this.view.class=i,this.view.withArrow=n,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),r&&(this._singleViewMode=!0)}}class JW extends he{constructor(e){super(e);p(this,"focusTracker");p(this,"buttonPrevView");p(this,"buttonNextView");p(this,"content");const i=e.t,n=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new ht,this.buttonPrevView=this._createButtonView(i("Previous"),Ll),this.buttonNextView=this._createButtonView(i("Next"),P6),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",n.to("isNavigationVisible",r=>r?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:n.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,i){const n=new ve(this.locale);return n.set({label:e,icon:i,tooltip:!0}),n}}class eU extends he{constructor(e,i){super(e);p(this,"content");p(this,"_balloonPanelView");const n=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=i,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",n.to("numberOfPanels",r=>r?"":"ck-hidden")],style:{top:n.to("top",zf),left:n.to("left",zf),width:n.to("width",zf),height:n.to("height",zf)}},children:this.content}),this.on("change:numberOfPanels",(r,o,l,a)=>{l>a?this._addPanels(l-a):this._removePanels(a-l),this.updatePosition()})}_addPanels(e){for(;e--;){const i=new he;i.setTemplate({tag:"div"}),this.content.add(i),this.registerChild(i)}}_removePanels(e){for(;e--;){const i=this.content.last;this.content.remove(i),this.deregisterChild(i),i.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:i}=this._balloonPanelView,{width:n,height:r}=new Me(this._balloonPanelView.element);Object.assign(this,{top:e,left:i,width:n,height:r})}}}const xa=Oc("px");class tU extends he{constructor(e){super(e);p(this,"content");p(this,"contentPanelElement");p(this,"_contentPanelPlaceholder");const i=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Qn({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:i.to("isSticky",n=>n?"block":"none"),height:i.to("isSticky",n=>n?xa(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Qn({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",i.if("isSticky","ck-sticky-panel__content_sticky"),i.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:i.to("isSticky",n=>n?xa(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:i.to("_stickyTopOffset",n=>n&&xa(n)),bottom:i.to("_stickyBottomOffset",n=>n&&xa(n)),marginLeft:i.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(ue.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()}),ue.window.visualViewport&&(this.listenTo(ue.window.visualViewport,"scroll",()=>{this.checkIfShouldBeSticky()}),this.listenTo(ue.window.visualViewport,"resize",()=>{this.checkIfShouldBeSticky()}))}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const e=new Me(this.limiterElement);let i=e.getVisible();if(i){const o=new Me(ue.window);o.top+=this.viewportTopOffset,o.height-=this.viewportTopOffset,i=i.getIntersection(o)}const{left:n,top:r}=vm();if(e.moveBy(n,r),i&&i.moveBy(n,r),i&&e.top<i.top)if(this._contentPanelRect.height+this.limiterBottomOffset>i.height){const o=Math.max(e.bottom-i.bottom,0)+this.limiterBottomOffset;this._contentPanelRect.height+o+1<e.height?this._stickToBottomOfLimiter(o):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(i.top):this._unstick();else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=xa(-ue.window.scrollX+vm().left)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=xa(-ue.window.scrollX+vm().left)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Me(this.contentPanelElement)}}class iU extends jt{constructor(e,i){const n=e.t,r=Object.assign({},{showResetButton:!0,showIcon:!0,creator:wn},i);super(e,r.creator);p(this,"iconView");p(this,"resetButtonView");p(this,"_viewConfig");this.label=i.label,this._viewConfig=r,this._viewConfig.showIcon&&(this.iconView=new Vs,this.iconView.content=LF,this.fieldWrapperChildren.add(this.iconView,0),this.extendTemplate({attributes:{class:"ck-search__query_with-icon"}})),this._viewConfig.showResetButton&&(this.resetButtonView=new ve(e),this.resetButtonView.set({label:n("Clear"),icon:xc,class:"ck-search__reset",isVisible:!1,tooltip:!0}),this.resetButtonView.on("execute",()=>{this.reset(),this.focus(),this.fire("reset")}),this.resetButtonView.bind("isVisible").to(this.fieldView,"isEmpty",o=>!o),this.fieldWrapperChildren.add(this.resetButtonView),this.extendTemplate({attributes:{class:"ck-search__query_with-reset"}}))}reset(){this.fieldView.reset(),this._viewConfig.showResetButton&&(this.resetButtonView.isVisible=!1)}}class hI extends he{constructor(){super();const t=this.bindTemplate;this.set({isVisible:!1,primaryText:"",secondaryText:""}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__info",t.if("isVisible","ck-hidden",e=>!e)],tabindex:-1},children:[{tag:"span",children:[{text:[t.to("primaryText")]}]},{tag:"span",children:[{text:[t.to("secondaryText")]}]}]})}focus(){this.element.focus()}}class nU extends he{constructor(e){super(e);p(this,"focusTracker");p(this,"children");p(this,"_focusCycler");this.children=this.createCollection(),this.focusTracker=new ht,this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__results"],tabindex:-1},children:this.children}),this._focusCycler=new Kt({focusables:this.children,focusTracker:this.focusTracker})}render(){super.render();for(const e of this.children)this.focusTracker.add(e.element)}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}class sU extends he{constructor(e,i){super(e);p(this,"focusTracker");p(this,"keystrokes");p(this,"resultsView");p(this,"filteredView");p(this,"infoView");p(this,"queryView");p(this,"focusCycler");p(this,"_config");this._config=i,this.filteredView=i.filteredView,this.queryView=this._createSearchTextQueryView(),this.focusTracker=new ht,this.keystrokes=new bt,this.resultsView=new nU(e),this.children=this.createCollection(),this.focusableChildren=this.createCollection([this.queryView,this.resultsView]),this.set("isEnabled",!0),this.set("resultsCount",0),this.set("totalItemsCount",0),i.infoView&&i.infoView.instance?this.infoView=i.infoView.instance:(this.infoView=new hI,this._enableDefaultInfoViewBehavior(),this.on("render",()=>{this.search("")})),this.resultsView.children.addMany([this.infoView,this.filteredView]),this.focusCycler=new Kt({focusables:this.focusableChildren,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.on("search",(n,{resultsCount:r,totalItemsCount:o})=>{this.resultsCount=r,this.totalItemsCount=o}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search",i.class||null],tabindex:"-1"},children:this.children})}render(){super.render(),this.children.addMany([this.queryView,this.resultsView]);const e=i=>i.stopPropagation();for(const i of this.focusableChildren)this.focusTracker.add(i.element);this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}focus(){this.queryView.focus()}reset(){this.queryView.reset(),this.search(""),this.filteredView.element.scrollTo(0,0)}search(e){const i=e?new RegExp(px(e),"ig"):null,n=this.filteredView.filter(i);this.fire("search",{query:e,...n})}_createSearchTextQueryView(){const e=new iU(this.locale,this._config.queryView);return this.listenTo(e.fieldView,"input",()=>{this.search(e.fieldView.element.value)}),e.on("reset",()=>this.reset()),e.bind("isEnabled").to(this),e}_enableDefaultInfoViewBehavior(){const e=this.locale.t,i=this.infoView;this.on("search",(r,o)=>{if(o.resultsCount)i.set({isVisible:!1});else{const l=this._config.infoView&&this._config.infoView.text;let a,c;o.totalItemsCount?l!=null&&l.notFound?(a=l.notFound.primary,c=l.notFound.secondary):(a=e("No results found"),c=""):l!=null&&l.noSearchableItems?(a=l.noSearchableItems.primary,c=l.noSearchableItems.secondary):(a=e("No searchable items"),c=""),i.set({primaryText:n(a,o),secondaryText:n(c,o),isVisible:!0})}});function n(r,{query:o,resultsCount:l,totalItemsCount:a}){return typeof r=="function"?r(o,l,a):r}}}class rU extends vc{constructor(e){super(e);p(this,"arrowView");const i=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",n=>String(n)),"data-cke-tooltip-disabled":i.to("isOn")},on:{mouseenter:i.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Vs;return e.content=fp,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}}class oU extends he{constructor(e){super(e);p(this,"children");const i=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",i.to("position",n=>`ck-menu-bar__menu__panel_position_${n}`),i.if("isVisible","ck-hidden",n=>!n)],tabindex:"-1"},children:this.children,on:{selectstart:i.to(n=>{n.target.tagName.toLocaleLowerCase()!=="input"&&n.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}}const ip=class ip extends he{constructor(e){super(e);p(this,"buttonView");p(this,"panelView");p(this,"focusTracker");p(this,"keystrokes");const i=this.bindTemplate;this.buttonView=new rU(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new oU(e),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new bt,this.focusTracker=new ht,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",i.to("class"),i.if("isEnabled","ck-disabled",n=>!n),i.if("parentMenuView","ck-menu-bar__menu_top-level",n=>!n)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),ao.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(ao.openOnButtonClick(this),ao.openOnArrowRightKey(this),ao.closeOnArrowLeftKey(this),ao.openAndFocusOnEnterKeyPress(this),ao.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),ao.openAndFocusPanelOnArrowDownKey(this),ao.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(e,i)=>{this.fire("arrowright"),i()}),this.keystrokes.set("arrowleft",(e,i)=>{this.fire("arrowleft"),i()})}_repositionPanelOnOpen(){this.on("change:isOpen",(e,i,n)=>{if(!n)return;const r=ip._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=r?r.name:this._defaultMenuPositionName})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:e,southWest:i,northEast:n,northWest:r,westSouth:o,eastSouth:l,westNorth:a,eastNorth:c}=$W;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[l,c,o,a]:[e,i,n,r]:this.parentMenuView?[o,a,l,c]:[i,e,r,n]}get _defaultMenuPositionName(){return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?"es":"se":this.parentMenuView?"ws":"sw"}};p(ip,"_getOptimalPosition",bx);let nr=ip;class _h extends $l{constructor(t){super(t),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const t=Array.from(this.items).some(e=>{const i=i2(e);return i&&i.isToggleable});this.items.forEach(e=>{const i=i2(e);i&&(i.hasCheckSpace=t)})}}function i2(s){return s instanceof us?s.children.map(t=>lU(t)?t.buttonView:t).find(t=>t instanceof vc):null}function lU(s){return typeof s=="object"&&"buttonView"in s&&s.buttonView instanceof ve}class dI extends Uz{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const n2=["mouseenter","arrowleft","arrowright","change:isOpen"];class aU extends he{constructor(e){super(e);p(this,"children");p(this,"menus",[]);const i=e.t,n=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",n.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":i("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,i,n=[]){const r=this.locale,l=NW({normalizedConfig:e,locale:r,componentFactory:i,extraItems:n}).items.map(a=>this._createMenu({componentFactory:i,menuDefinition:a}));this.children.addMany(l)}render(){super.render(),Oa.toggleMenusAndFocusItemsOnHover(this),Oa.closeMenusWhenTheBarCloses(this),Oa.closeMenuWhenAnotherOnTheSameLevelOpens(this),Oa.focusCycleMenusOnArrows(this),Oa.closeOnClickOutside(this),Oa.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const e of this.children)e.isOpen=!1}disable(){for(const e of this.children)e.isEnabled=!1}enable(){for(const e of this.children)e.isEnabled=!0}registerMenu(e,i=null){i?(e.delegate(...n2).to(i),e.parentMenuView=i):e.delegate(...n2).to(this,n=>"menu:"+n),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:i,parentMenuView:n}){const r=this.locale,o=new nr(r);return this.registerMenu(o,n),o.buttonView.set({label:i.label}),o.once("change:isOpen",()=>{const l=new _h(r);l.ariaLabel=i.label,o.panelView.children.add(l),l.items.addMany(this._createMenuItems({menuDefinition:i,parentMenuView:o,componentFactory:e}))}),o}_createMenuItems({menuDefinition:e,parentMenuView:i,componentFactory:n}){const r=this.locale,o=[];for(const l of e.groups){for(const a of l.items){const c=new id(r,i);if(ls(a))c.children.add(this._createMenu({componentFactory:n,menuDefinition:a,parentMenuView:i}));else{const h=this._createMenuItemContentFromFactory({componentName:a,componentFactory:n,parentMenuView:i});if(!h)continue;c.children.add(h)}o.push(c)}l!==e.groups[e.groups.length-1]&&o.push(new Zx(r))}return o}_createMenuItemContentFromFactory({componentName:e,parentMenuView:i,componentFactory:n}){const r=n.create(e);return r instanceof nr||r instanceof ci||r instanceof dI?(this._registerMenuTree(r,i),r.on("execute",()=>{this.close()}),r):(We("menu-bar-component-unsupported",{componentName:e,componentView:r}),null)}_registerMenuTree(e,i){if(!(e instanceof nr)){e.delegate("mouseenter").to(i);return}this.registerMenu(e,i);const n=e.panelView.children.filter(o=>o instanceof _h)[0];if(!n){e.delegate("mouseenter").to(i);return}const r=n.items.filter(o=>o instanceof us);for(const o of r)this._registerMenuTree(o.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(i,n,r)=>{clearTimeout(e),r?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(o=>o.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class fI{constructor(t,e=20){p(this,"model");p(this,"limit");p(this,"_isLocked");p(this,"_size");p(this,"_batch",null);p(this,"_changeCallback");p(this,"_selectionChangeCallback");this.model=t,this._size=0,this.limit=e,this._isLocked=!1,this._changeCallback=(i,n)=>{n.isLocal&&n.isUndoable&&n!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(t){this._size+=t,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(t=!1){(!this.isLocked||t)&&(this._batch=null,this._size=0)}}class cU extends Le{constructor(e,i){super(e);p(this,"_buffer");this._buffer=new fI(e.model,i),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const i=this.editor.model,n=i.document,r=e.text||"",o=r.length;let l=n.selection;if(e.selection?l=e.selection:e.range&&(l=i.createSelection(e.range)),!i.canEditAt(l))return;const a=e.resultRange;i.enqueueChange(this._buffer.batch,c=>{this._buffer.lock();const h=Array.from(n.selection.getAttributes());i.deleteContent(l),r&&i.insertContent(c.createText(r,h),l),a?c.setSelection(a):l.is("documentSelection")||c.setSelection(l),this._buffer.unlock(),this._buffer.input(o)})}}const mI=["insertText","insertReplacementText"],uU=[...mI,"insertCompositionText"];class hU extends cr{constructor(e){super(e);p(this,"focusObserver");this.focusObserver=e.getObserver(lg);const i=Ie.isAndroid?uU:mI,n=e.document;n.on("beforeinput",(r,o)=>{if(!this.isEnabled)return;const{data:l,targetRanges:a,inputType:c,domEvent:h,isComposing:f}=o;if(!i.includes(c))return;this.focusObserver.flush();const m=new Vr(n,"insertText");n.fire(m,new yl(e,h,{text:l,selection:e.createSelection(a),isComposing:f})),m.stop.called&&r.stop()}),Ie.isAndroid||n.on("compositionend",(r,{data:o,domEvent:l})=>{this.isEnabled&&o&&n.fire("insertText",new yl(e,l,{text:o,isComposing:!0}))},{priority:"low"})}observe(){}stopObserving(){}}class gI extends F{constructor(){super(...arguments);p(this,"_typingQueue")}static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.model,n=e.editing.view,r=e.editing.mapper,o=i.document.selection;this._typingQueue=new dU(e),n.addObserver(hU);const l=new cU(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",l),e.commands.add("input",l),this.listenTo(n.document,"beforeinput",()=>{this._typingQueue.flush("next beforeinput")},{priority:"high"}),this.listenTo(n.document,"insertText",(a,c)=>{const{text:h,selection:f}=c;if(n.document.selection.isFake&&f&&n.document.selection.isSimilar(f)&&c.preventDefault(),f&&Array.from(f.getRanges()).some(v=>!v.isCollapsed)&&c.preventDefault(),!l.isEnabled){c.preventDefault();return}let m;f?m=Array.from(f.getRanges()).map(v=>r.toModelRange(v)).map(v=>Mx(v,i.schema)||v):m=Array.from(o.getRanges());let w=h;if(Ie.isAndroid){const v=Array.from(m[0].getItems()).reduce((k,C)=>k+(C.is("$textProxy")?C.data:""),"");if(v&&(v.length<=w.length?w.startsWith(v)&&(w=w.substring(v.length),m[0].start=m[0].start.getShiftedBy(v.length)):v.startsWith(w)&&(m[0].start=m[0].start.getShiftedBy(w.length),w="")),w.length==0&&m[0].isCollapsed)return}const O={text:w,selection:i.createSelection(m)};this._typingQueue.push(O,!!c.isComposing),c.domEvent.defaultPrevented&&this._typingQueue.flush("beforeinput default prevented")}),Ie.isAndroid?this.listenTo(n.document,"keydown",(a,c)=>{o.isCollapsed||c.keyCode!=229||!n.document.isComposing||s2(i,l)}):this.listenTo(n.document,"compositionstart",()=>{o.isCollapsed||s2(i,l)},{priority:"high"}),this.listenTo(n.document,"mutations",(a,{mutations:c})=>{if(this._typingQueue.hasAffectedElements())for(const{node:h}of c){const f=mU(h,r),m=r.toModelElement(f);if(this._typingQueue.isElementAffected(m)){this._typingQueue.flush("mutations");return}}}),this.listenTo(n.document,"compositionend",()=>{this._typingQueue.flush("before composition end")},{priority:"high"}),this.listenTo(n.document,"compositionend",()=>{this._typingQueue.flush("after composition end");const a=[];if(this._typingQueue.hasAffectedElements())for(const c of this._typingQueue.flushAffectedElements()){const h=r.toViewElement(c);h&&a.push({type:"children",node:h})}(a.length||!Ie.isAndroid)&&n.document.fire("mutations",{mutations:a})},{priority:"lowest"})}destroy(){super.destroy(),this._typingQueue.destroy()}}class dU{constructor(t){p(this,"editor");p(this,"flushDebounced",as(()=>this.flush("timeout"),50));p(this,"_queue",[]);p(this,"_isComposing",!1);p(this,"_affectedElements",new Set);this.editor=t}destroy(){for(this.flushDebounced.cancel(),this._affectedElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(t,e){const i={text:t.text};if(t.selection){i.selectionRanges=[];for(const n of t.selection.getRanges())i.selectionRanges.push(pn.fromRange(n)),this._affectedElements.add(n.start.parent)}this._queue.push(i),this._isComposing||(this._isComposing=e),this.flushDebounced()}shift(){const t=this._queue.shift(),e={text:t.text};if(t.selectionRanges){const i=t.selectionRanges.map(n=>fU(n)).filter(n=>!!n);i.length&&(e.selection=this.editor.model.createSelection(i))}return e}flush(t){const e=this.editor,i=e.model,n=e.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const o=e.commands.get("insertText").buffer;i.enqueueChange(o.batch,()=>{for(o.lock();this._queue.length;){const l=this.shift();e.execute("insertText",l)}o.unlock(),this._isComposing||this._affectedElements.clear(),this._isComposing=!1}),n.scrollToTheSelection()}isElementAffected(t){return this._affectedElements.has(t)}hasAffectedElements(){return this._affectedElements.size>0}flushAffectedElements(){const t=Array.from(this._affectedElements);return this._affectedElements.clear(),t}}function s2(s,t){if(!t.isEnabled)return;const e=t.buffer;e.lock(),s.enqueueChange(e.batch,()=>{s.deleteContent(s.document.selection)}),e.unlock()}function fU(s){const t=s.toRange();return s.detach(),t.root.rootName=="$graveyard"?null:t}function mU(s,t){let e=s.is("$text")?s.parent:s;for(;!t.toModelElement(e);)e=e.parent;return e}class r2 extends Le{constructor(e,i){super(e);p(this,"direction");p(this,"_buffer");this.direction=i,this._buffer=new fI(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){const i=this.editor.model,n=i.document;i.enqueueChange(this._buffer.batch,r=>{this._buffer.lock();const o=r.createSelection(e.selection||n.selection);if(!i.canEditAt(o))return;const l=e.sequence||1,a=o.isCollapsed;if(o.isCollapsed&&i.modifySelection(o,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(l)){this._replaceEntireContentWithParagraph(r);return}if(this._shouldReplaceFirstBlockWithParagraph(o,l)){this.editor.execute("paragraph",{selection:o});return}if(o.isCollapsed)return;let c=0;o.getFirstRange().getMinimalFlatRanges().forEach(h=>{c+=d1(h.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),i.deleteContent(o,{doNotResetEntireContent:a,direction:this.direction}),this._buffer.input(c),r.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const i=this.editor.model,r=i.document.selection,o=i.schema.getLimitElement(r);if(!(r.isCollapsed&&r.containsEntireContent(o))||!i.schema.checkChild(o,"paragraph"))return!1;const a=o.getChild(0);return!(a&&a.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){const i=this.editor.model,r=i.document.selection,o=i.schema.getLimitElement(r),l=e.createElement("paragraph");e.remove(e.createRangeIn(o)),e.insert(l,o),e.setSelection(l,0)}_shouldReplaceFirstBlockWithParagraph(e,i){const n=this.editor.model;if(i>1||this.direction!="backward"||!e.isCollapsed)return!1;const r=e.getFirstPosition(),o=n.schema.getLimitElement(r),l=o.getChild(0);return!(r.parent!=l||!e.containsEntireContent(l)||!n.schema.checkChild(o,"paragraph")||l.name=="paragraph")}}const gU="character",o2="word",pU="codePoint",po="selection",Ma="backward",Qu="forward",pI={deleteContent:{unit:po,direction:Ma},deleteContentBackward:{unit:pU,direction:Ma},deleteWordBackward:{unit:o2,direction:Ma},deleteHardLineBackward:{unit:po,direction:Ma},deleteSoftLineBackward:{unit:po,direction:Ma},deleteContentForward:{unit:gU,direction:Qu},deleteWordForward:{unit:o2,direction:Qu},deleteHardLineForward:{unit:po,direction:Qu},deleteSoftLineForward:{unit:po,direction:Qu}};class wU extends cr{constructor(t){super(t);const e=t.document;let i=0;e.on("keydown",()=>{i++}),e.on("keyup",()=>{i=0}),e.on("beforeinput",(n,r)=>{if(!this.isEnabled)return;const{targetRanges:o,domEvent:l,inputType:a}=r,c=pI[a];if(!c)return;const h={direction:c.direction,unit:c.unit,sequence:i};h.unit==po&&(h.selectionToRemove=t.createSelection(o[0])),a==="deleteContentBackward"&&(Ie.isAndroid&&(h.sequence=1),OU(o)&&(h.unit=po,h.selectionToRemove=t.createSelection(o)));const f=new Vl(e,"delete",o[0]);e.fire(f,new yl(t,l,h)),f.stop.called&&n.stop()}),Ie.isBlink&&bU(this)}observe(){}stopObserving(){}}function bU(s){const t=s.view,e=t.document;let i=null,n=!1;e.on("keydown",(l,{keyCode:a})=>{i=a,n=!1}),e.on("keyup",(l,{keyCode:a,domEvent:c})=>{const h=e.selection,f=s.isEnabled&&a==i&&r(a)&&!h.isCollapsed&&!n;if(i=null,f){const m=h.getFirstRange(),w=new Vl(e,"delete",m),O={unit:po,direction:o(a),selectionToRemove:h};e.fire(w,new yl(t,c,O))}}),e.on("beforeinput",(l,{inputType:a})=>{const c=pI[a];r(i)&&c&&c.direction==o(i)&&(n=!0)},{priority:"high"}),e.on("beforeinput",(l,{inputType:a,data:c})=>{i==Fe.delete&&a=="insertText"&&c==""&&l.stop()},{priority:"high"});function r(l){return l==Fe.backspace||l==Fe.delete}function o(l){return l==Fe.backspace?Ma:Qu}}function OU(s){if(s.length!=1||s[0].isCollapsed)return!1;const t=s[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let e=0;for(const{nextPosition:i,item:n}of t){if(i.parent.is("$text")){const r=i.parent.data,o=i.offset;if(_x(r,o)||kx(r,o)||TA(r,o))continue;e++}else(n.is("containerElement")||n.is("emptyElement"))&&e++;if(e>1)return!0}return!1}class Dl extends F{constructor(){super(...arguments);p(this,"_undoOnBackspace")}static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.editing.view,n=i.document,r=e.model.document;i.addObserver(wU),this._undoOnBackspace=!1;const o=new r2(e,"forward");e.commands.add("deleteForward",o),e.commands.add("forwardDelete",o),e.commands.add("delete",new r2(e,"backward")),this.listenTo(n,"delete",(l,a)=>{n.isComposing||a.preventDefault();const{direction:c,sequence:h,selectionToRemove:f,unit:m}=a,w=c==="forward"?"deleteForward":"delete",O={sequence:h};if(m=="selection"){const v=Array.from(f.getRanges()).map(k=>e.editing.mapper.toModelRange(k)).map(k=>Mx(k,e.model.schema)||k);O.selection=e.model.createSelection(v)}else O.unit=m;e.execute(w,O),i.scrollToTheSelection()},{priority:"low"}),this.listenTo(n,"keydown",(l,a)=>{if(n.isComposing||a.keyCode!=Fe.backspace||!r.selection.isCollapsed)return;const c=e.model.schema.getLimitElement(r.selection),h=e.model.createPositionAt(c,0);if(h.isTouching(r.selection.getFirstPosition())){a.preventDefault();const f=e.model.schema.getNearestSelectionRange(h,"forward");if(!f)return;const m=i.createSelection(e.editing.mapper.toViewRange(f)),w=m.getFirstRange(),O=new Vl(document,"delete",w),v={unit:"selection",direction:"backward",selectionToRemove:m};n.fire(O,new yl(i,a.domEvent,v))}}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(n,"delete",(l,a)=>{this._undoOnBackspace&&a.direction=="backward"&&a.sequence==1&&a.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),a.preventDefault(),l.stop())},{context:"$capture"}),this.listenTo(r,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class Xx extends F{static get requires(){return[gI,Dl]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function wI(s,t){let e=s.start;return{text:Array.from(s.getWalker({ignoreElementEnd:!1})).reduce((n,{item:r})=>r.is("$text")||r.is("$textProxy")?n+r.data:(e=t.createPositionAfter(r),""),""),range:t.createRange(e,s.end)}}class jx extends ct(){constructor(e,i){super();p(this,"model");p(this,"testCallback");p(this,"_hasMatch");this.model=e,this.testCallback=i,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const i=this.model.document;this.listenTo(i.selection,"change:range",(n,{directChange:r})=>{if(r){if(!i.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(i,"change:data",(n,r)=>{r.isUndo||!r.isLocal||this._evaluateTextBeforeSelection("data",{batch:r})})}_evaluateTextBeforeSelection(e,i={}){const n=this.model,o=n.document.selection,l=n.createRange(n.createPositionAt(o.focus.parent,0),o.focus),{text:a,range:c}=wI(l,n),h=this.testCallback(a);if(!h&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!h,h){const f=Object.assign(i,{text:a,range:c});typeof h=="object"&&Object.assign(f,h),this.fire(`matched:${e}`,f)}}}class gg extends F{constructor(e){super(e);p(this,"attributes");p(this,"_overrideUid");p(this,"_isNextGravityRestorationSkipped",!1);this.attributes=new Set,this._overrideUid=null}static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.model,n=e.editing.view,r=e.locale,o=i.document.selection;this.listenTo(n.document,"arrowKey",(l,a)=>{if(!o.isCollapsed||a.shiftKey||a.altKey||a.ctrlKey)return;const c=a.keyCode==Fe.arrowright,h=a.keyCode==Fe.arrowleft;if(!c&&!h)return;const f=r.contentLanguageDirection;let m=!1;f==="ltr"&&c||f==="rtl"&&h?m=this._handleForwardMovement(a):m=this._handleBackwardMovement(a),m===!0&&l.stop()},{context:"$text",priority:"highest"}),this.listenTo(o,"change:range",(l,a)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!a.directChange&&Gn(o.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const i=this.attributes,n=this.editor.model,r=n.document.selection,o=r.getFirstPosition();return this._isGravityOverridden||o.isAtStart&&xr(r,i)?!1:Gn(o,i)?(e&&vu(e),xr(r,i)&&Gn(o,i,!0)?yu(n,i):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){const i=this.attributes,n=this.editor.model,r=n.document.selection,o=r.getFirstPosition();return this._isGravityOverridden?(e&&vu(e),this._restoreGravity(),Gn(o,i,!0)?yu(n,i):Wf(n,i,o),!0):o.isAtStart?xr(r,i)?(e&&vu(e),Wf(n,i,o),!0):!1:!xr(r,i)&&Gn(o,i,!0)?(e&&vu(e),Wf(n,i,o),!0):l2(o,i)?o.isAtEnd&&!xr(r,i)&&Gn(o,i)?(e&&vu(e),Wf(n,i,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const e=this.editor,i=e.model,n=i.document.selection,r=e.editing.view.document;e.editing.view.addObserver(hp),e.editing.view.addObserver(h8);let o=!1,l=!1;this.listenTo(r,"touchstart",()=>{l=!1,o=!0}),this.listenTo(r,"mousedown",()=>{l=!0}),this.listenTo(r,"selectionChange",()=>{const a=this.attributes;if(!l&&!o||(l=!1,o=!1,!n.isCollapsed)||!xr(n,a))return;const c=n.getFirstPosition();Gn(c,a)&&(c.isAtStart||Gn(c,a,!0)?yu(i,a):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const i=this.editor.model,n=i.document.selection,r=this.attributes;this.listenTo(i,"insertContent",()=>{const o=n.getFirstPosition();xr(n,r)&&Gn(o,r)&&yu(i,r)},{priority:"low"})}_handleDeleteContentAfterNode(){const e=this.editor,i=e.model,n=i.document.selection,r=e.editing.view;let o=!1,l=!1;this.listenTo(r.document,"delete",(a,c)=>{o=c.direction==="backward"},{priority:"high"}),this.listenTo(i,"deleteContent",()=>{if(!o)return;const a=n.getFirstPosition();l=xr(n,this.attributes)&&!l2(a,this.attributes)},{priority:"high"}),this.listenTo(i,"deleteContent",()=>{o&&(o=!1,!l&&e.model.enqueueChange(()=>{const a=n.getFirstPosition();xr(n,this.attributes)&&Gn(a,this.attributes)&&(a.isAtStart||Gn(a,this.attributes,!0)?yu(i,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function xr(s,t){for(const e of t)if(s.hasAttribute(e))return!0;return!1}function Wf(s,t,e){const i=e.nodeBefore;s.change(n=>{if(i){const r=[],o=s.schema.isObject(i)&&s.schema.isInline(i);for(const[l,a]of i.getAttributes())s.schema.checkAttribute("$text",l)&&(!o||s.schema.getAttributeProperties(l).copyFromObject!==!1)&&r.push([l,a]);n.setSelectionAttribute(r)}else n.removeSelectionAttribute(t)})}function yu(s,t){s.change(e=>{e.removeSelectionAttribute(t)})}function vu(s){s.preventDefault()}function l2(s,t){const e=s.getShiftedBy(-1);return Gn(e,t)}function Gn(s,t,e=!1){const{nodeBefore:i,nodeAfter:n}=s;for(const r of t){const o=i?i.getAttribute(r):void 0,l=n?n.getAttribute(r):void 0;if(!(e&&(o===void 0||l===void 0))&&l!==o)return!0}return!1}const a2={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"½",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"⅓",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"⅔",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"¼",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"¾",null]},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:ya('"'),to:[null,"“",null,"”"]},quotesSecondary:{from:ya("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:ya("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:ya('"'),to:[null,"“",null,"”"]},quotesPrimaryPl:{from:ya('"'),to:[null,"„",null,"”"]},quotesSecondaryPl:{from:ya("'"),to:[null,"‚",null,"’"]}},c2={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},xU=["symbols","mathematical","typography","quotes"];class yU extends F{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("typing",{transformations:{include:xU}})}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const t=this.editor,e=t.model,i=t.plugins.get("Delete"),n=SU(t.config.get("typing.transformations")),r=l=>{for(const a of n)if(a.from.test(l))return{normalizedTransformation:a}},o=new jx(t.model,r);o.on("matched:data",(l,a)=>{if(!a.batch.isTyping)return;const{from:c,to:h}=a.normalizedTransformation,f=c.exec(a.text),m=h(f.slice(1)),w=a.range;let O=f.index;e.enqueueChange(v=>{for(let k=1;k<f.length;k++){const C=f[k],P=m[k-1];if(P==null){O+=C.length;continue}const V=w.start.getShiftedBy(O),Q=e.createRange(V,V.getShiftedBy(C.length)),D=kU(V);e.insertContent(v.createText(P,D),Q),O+=P.length}e.enqueueChange(()=>{i.requestUndoOnBackspace()})})}),o.bind("isEnabled").to(this)}}function vU(s){return typeof s=="string"?new RegExp(`(${px(s)})$`):s}function _U(s){return typeof s=="string"?()=>[s]:s instanceof Array?()=>s:s}function kU(s){return(s.textNode?s.textNode:s.nodeAfter).getAttributes()}function ya(s){return new RegExp(`(^|\\s)(${s})([^${s}]*)(${s})$`)}function SU(s){const t=s.extra||[],e=s.remove||[],i=r=>!e.includes(r),n=s.include.concat(t).filter(i);return CU(n).filter(i).map(r=>typeof r=="string"&&a2[r]?a2[r]:r).filter(r=>typeof r=="object").map(r=>({from:vU(r.from),to:_U(r.to)}))}function CU(s){const t=new Set;for(const e of s)if(typeof e=="string"&&c2[e])for(const i of c2[e])t.add(i);else t.add(e);return Array.from(t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function gp(s,t,e,i){return i.createRange(u2(s,t,e,!0,i),u2(s,t,e,!1,i))}function u2(s,t,e,i,n){let r=s.textNode||(i?s.nodeBefore:s.nodeAfter),o=null;for(;r&&r.getAttribute(t)==e;)o=r,r=i?r.previousSibling:r.nextSibling;return o?n.createPositionAt(o,i?"before":"after"):s}function bI(s,t,e,i){const n=s.editing.view,r=new Set;n.document.registerPostFixer(o=>{const l=s.model.document.selection;let a=!1;if(l.hasAttribute(t)){const c=gp(l.getFirstPosition(),t,l.getAttribute(t),s.model),h=s.editing.mapper.toViewRange(c);for(const f of h.getItems())f.is("element",e)&&!f.hasClass(i)&&(o.addClass(i,f),r.add(f),a=!0)}return a}),s.conversion.for("editingDowncast").add(o=>{o.on("insert",l,{priority:"highest"}),o.on("remove",l,{priority:"highest"}),o.on("attribute",l,{priority:"highest"}),o.on("selection",l,{priority:"highest"});function l(){n.change(a=>{for(const c of r.values())a.removeClass(i,c),r.delete(c)})}})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function co(s,t,e,i){let n,r=null;typeof i=="function"?n=i:(r=s.commands.get(i),n=()=>{s.execute(i)}),s.model.document.on("change:data",(o,l)=>{if(r&&!r.isEnabled||!t.isEnabled)return;const a=Nt(s.model.document.selection.getRanges());if(!a.isCollapsed||l.isUndo||!l.isLocal)return;const c=Array.from(s.model.document.differ.getChanges()),h=c[0];if(c.length!=1||h.type!=="insert"||h.name!="$text"||h.length!=1)return;const f=h.position.parent;if(f.is("element","codeBlock")||f.is("element","listItem")&&typeof i!="function"&&!["numberedList","bulletedList","todoList"].includes(i)||r&&r.value===!0)return;const m=f.getChild(0),w=s.model.createRangeOn(m);if(!w.containsRange(a)&&!a.end.isEqual(w.end))return;const O=e.exec(m.data.substr(0,a.end.offset));O&&s.model.enqueueChange(v=>{const k=v.createPositionAt(f,0),C=v.createPositionAt(f,O[0].length),P=new pn(k,C);if(n({match:O})!==!1){v.remove(P);const Q=s.model.document.selection.getFirstRange(),D=v.createRangeIn(f);f.isEmpty&&!D.isEqual(Q)&&!D.containsRange(Q,!0)&&v.remove(f)}P.detach(),s.model.enqueueChange(()=>{s.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function va(s,t,e,i){let n,r;e instanceof RegExp?n=e:r=e,r=r||(o=>{let l;const a=[],c=[];for(;(l=n.exec(o))!==null&&!(l&&l.length<4);){let{index:h,"1":f,"2":m,"3":w}=l;const O=f+m+w;h+=l[0].length-O.length;const v=[h,h+f.length],k=[h+f.length+m.length,h+f.length+m.length+w.length];a.push(v),a.push(k),c.push([h+f.length,h+f.length+m.length])}return{remove:a,format:c}}),s.model.document.on("change:data",(o,l)=>{if(l.isUndo||!l.isLocal||!t.isEnabled)return;const a=s.model,c=a.document.selection;if(!c.isCollapsed)return;const h=Array.from(a.document.differ.getChanges()),f=h[0];if(h.length!=1||f.type!=="insert"||f.name!="$text"||f.length!=1)return;const m=c.focus,w=m.parent,{text:O,range:v}=PU(a.createRange(a.createPositionAt(w,0),m),a),k=r(O),C=h2(v.start,k.format,a),P=h2(v.start,k.remove,a);C.length&&P.length&&a.enqueueChange(V=>{if(i(V,C)!==!1){for(const D of P.reverse())V.remove(D);a.enqueueChange(()=>{s.plugins.get("Delete").requestUndoOnBackspace()})}})})}function h2(s,t,e){return t.filter(i=>i[0]!==void 0&&i[1]!==void 0).map(i=>e.createRange(s.getShiftedBy(i[0]),s.getShiftedBy(i[1])))}function PU(s,t){let e=s.start;return{text:Array.from(s.getItems()).reduce((n,r)=>!(r.is("$text")||r.is("$textProxy"))||r.getAttribute("code")?(e=t.createPositionAfter(r),""):n+r.data,""),range:t.createRange(e,s.end)}}class TU extends F{static get requires(){return[Dl]}static get pluginName(){return"Autoformat"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const t=this.editor.commands;t.get("bulletedList")&&co(this.editor,this,/^[*-]\s$/,"bulletedList"),t.get("numberedList")&&co(this.editor,this,/^1[.|)]\s$/,"numberedList"),t.get("todoList")&&co(this.editor,this,/^\[\s?\]\s$/,"todoList"),t.get("checkTodoList")&&co(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const t=this.editor.commands;if(t.get("bold")){const e=Uf(this.editor,"bold");va(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,e),va(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,e)}if(t.get("italic")){const e=Uf(this.editor,"italic");va(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,e),va(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,e)}if(t.get("code")){const e=Uf(this.editor,"code");va(this.editor,this,/(`)([^`]+)(`)$/g,e)}if(t.get("strikethrough")){const e=Uf(this.editor,"strikethrough");va(this.editor,this,/(~~)([^~]+)(~~)$/g,e)}}_addHeadingAutoformats(){const t=this.editor.commands.get("heading");t&&t.modelElements.filter(e=>e.match(/^heading[1-6]$/)).forEach(e=>{const i=e[7],n=new RegExp(`^(#{${i}})\\s$`);co(this.editor,this,n,()=>{if(!t.isEnabled||t.value===e)return!1;this.editor.execute("heading",{value:e})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&co(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const t=this.editor,e=t.model.document.selection;t.commands.get("codeBlock")&&co(t,this,/^```$/,()=>{if(e.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&co(this.editor,this,/^---$/,"horizontalLine")}}function Uf(s,t){return(e,i)=>{if(!s.commands.get(t).isEnabled)return!1;const r=s.model.schema.getValidRanges(i,t);for(const o of r)e.setAttribute(t,!0,o);e.removeSelectionAttribute(t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class EU extends F{constructor(e){super(e);p(this,"adapter");p(this,"_debouncedSave");p(this,"_lastDocumentVersion");p(this,"_savePromise");p(this,"_domEmitter");p(this,"_config");p(this,"_pendingActions");p(this,"_makeImmediateSave");p(this,"_action",null);const i=e.config.get("autosave")||{},n=i.waitingTime||1e3;this.set("state","synchronized"),this._debouncedSave=as(this._save.bind(this),n),this._lastDocumentVersion=e.model.document.version,this._savePromise=null,this._domEmitter=new(Zi()),this._config=i,this._pendingActions=e.plugins.get(Eo),this._makeImmediateSave=!1}static get pluginName(){return"Autosave"}static get isOfficialPlugin(){return!0}static get requires(){return[Eo]}init(){const e=this.editor,i=e.model.document;this.listenTo(e,"ready",()=>{this.listenTo(i,"change:data",(n,r)=>{this._saveCallbacks.length&&r.isLocal&&(this.state==="synchronized"&&(this.state="waiting",this._setPendingAction()),this.state==="waiting"&&this._debouncedSave())})}),this.listenTo(e,"destroy",()=>this._flush(),{priority:"highest"});/* istanbul ignore next -- @preserve */this._domEmitter.listenTo(window,"beforeunload",(n,r)=>{this._pendingActions.hasAny&&(r.returnValue=this._pendingActions.first.message)})}destroy(){this._domEmitter.stopListening(),super.destroy()}save(){return this._debouncedSave.cancel(),this._save()}_flush(){this._debouncedSave.flush()}_save(){return this._savePromise?(this._makeImmediateSave=this.editor.model.document.version>this._lastDocumentVersion,this._savePromise):(this._setPendingAction(),this.state="saving",this._lastDocumentVersion=this.editor.model.document.version,this._savePromise=Promise.resolve().then(()=>Promise.all(this._saveCallbacks.map(e=>e(this.editor)))).finally(()=>{this._savePromise=null}).then(()=>{if(this._makeImmediateSave)return this._makeImmediateSave=!1,this._save();this.editor.model.document.version>this._lastDocumentVersion?(this.state="waiting",this._debouncedSave()):(this.state="synchronized",this._pendingActions.remove(this._action),this._action=null)}).catch(e=>{throw this.state="error",this.state="saving",this._debouncedSave(),e}),this._savePromise)}_setPendingAction(){const e=this.editor.t;this._action||(this._action=this._pendingActions.add(e("Saving changes")))}get _saveCallbacks(){const e=[];return this.adapter&&this.adapter.save&&e.push(this.adapter.save),this._config.save&&e.push(this._config.save),e}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Gx extends Le{constructor(e,i){super(e);p(this,"attributeKey");this.attributeKey=i}refresh(){const e=this.editor.model,i=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(i.selection,this.attributeKey)}execute(e={}){const i=this.editor.model,r=i.document.selection,o=e.forceValue===void 0?!this.value:e.forceValue;i.change(l=>{if(r.isCollapsed)o?l.setSelectionAttribute(this.attributeKey,!0):l.removeSelectionAttribute(this.attributeKey);else{const a=i.schema.getValidRanges(r.getRanges(),this.attributeKey);for(const c of a)o?l.setAttribute(this.attributeKey,o,c):l.removeAttribute(this.attributeKey,c)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,i=e.schema,n=e.document.selection;if(n.isCollapsed)return n.hasAttribute(this.attributeKey);for(const r of n.getRanges())for(const o of r.getItems())if(i.checkAttribute(o,this.attributeKey))return o.hasAttribute(this.attributeKey);return!1}}const _a="bold";class AU extends F{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:_a}),t.model.schema.setAttributeProperties(_a,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:_a,view:"strong",upcastAlso:["b",i=>{const n=i.getStyle("font-weight");return n&&(n=="bold"||Number(n)>=600)?{name:!0,styles:["font-weight"]}:null}]}),t.commands.add(_a,new Gx(t,_a)),t.keystrokes.set("CTRL+B",_a),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Bold text"),keystroke:"CTRL+B"}]})}}function Yx({editor:s,commandName:t,plugin:e,icon:i,label:n,keystroke:r}){return o=>{const l=s.commands.get(t),a=new o(s.locale);return a.set({label:n,icon:i,keystroke:r,isToggleable:!0}),a.bind("isEnabled").to(l,"isEnabled"),a.bind("isOn").to(l,"value"),a instanceof ci?a.set({role:"menuitemcheckbox"}):a.set({tooltip:!0}),e.listenTo(a,"execute",()=>{s.execute(t),s.editing.view.focus()}),a}}const ib="bold";class IU extends F{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,i=Yx({editor:t,commandName:ib,plugin:this,icon:k6,label:e("Bold"),keystroke:"CTRL+B"});t.ui.componentFactory.add(ib,()=>i(ve)),t.ui.componentFactory.add("menuBar:"+ib,()=>i(ci))}}class RU extends F{static get requires(){return[AU,IU]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const nl="code",VU="ck-code_selected";class MU extends F{static get pluginName(){return"CodeEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[gg]}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:nl}),t.model.schema.setAttributeProperties(nl,{isFormatting:!0,copyOnEnter:!1}),t.conversion.attributeToElement({model:nl,view:"code"}),t.commands.add(nl,new Gx(t,nl)),t.plugins.get(gg).registerAttribute(nl),bI(t,nl,"code",VU),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Move out of an inline code style"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}}const nb="code";class LU extends F{static get pluginName(){return"CodeUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,i=Yx({editor:t,commandName:nb,plugin:this,icon:fF,label:e("Code")});t.ui.componentFactory.add(nb,()=>i(ve)),t.ui.componentFactory.add("menuBar:"+nb,()=>i(ci))}}class BU extends F{static get requires(){return[MU,LU]}static get pluginName(){return"Code"}static get isOfficialPlugin(){return!0}}const ka="italic";class $U extends F{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:ka}),t.model.schema.setAttributeProperties(ka,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:ka,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),t.commands.add(ka,new Gx(t,ka)),t.keystrokes.set("CTRL+I",ka),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Italic text"),keystroke:"CTRL+I"}]})}}const sb="italic";class QU extends F{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,i=Yx({editor:t,commandName:sb,plugin:this,icon:SF,keystroke:"CTRL+I",label:e("Italic")});t.ui.componentFactory.add(sb,()=>i(ve)),t.ui.componentFactory.add("menuBar:"+sb,()=>i(ci))}}class DU extends F{static get requires(){return[$U,QU]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function*OI(s,t){for(const e of t)e&&s.getAttributeProperties(e[0]).copyOnEnter&&(yield e)}class NU extends Le{execute(){this.editor.model.change(t=>{this.enterBlock(t),this.fire("afterExecute",{writer:t})})}enterBlock(t){const e=this.editor.model,i=e.document.selection,n=e.schema,r=i.isCollapsed,o=i.getFirstRange(),l=o.start.parent,a=o.end.parent;if(n.isLimit(l)||n.isLimit(a))return!r&&l==a&&e.deleteContent(i),!1;if(r){const c=OI(t.model.schema,i.getAttributes());return d2(t,o.start),t.setSelectionAttribute(c),!0}else{const c=!(o.start.isAtStart&&o.end.isAtEnd),h=l==a;if(e.deleteContent(i,{leaveUnmerged:c}),c){if(h)return d2(t,i.focus),!0;t.setSelection(a,0)}}return!1}}function d2(s,t){s.split(t),s.setSelection(t.parent.nextSibling,0)}const FU={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class xI extends cr{constructor(t){super(t);const e=this.document;let i=!1;e.on("keydown",(n,r)=>{i=r.shiftKey}),e.on("beforeinput",(n,r)=>{if(!this.isEnabled)return;let o=r.inputType;Ie.isSafari&&i&&o=="insertParagraph"&&(o="insertLineBreak");const l=r.domEvent,a=FU[o];if(!a)return;const c=new Vl(e,"enter",r.targetRanges[0]);e.fire(c,new yl(t,l,{isSoft:a.isSoft})),c.stop.called&&n.stop()})}observe(){}stopObserving(){}}class pp extends F{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,i=e.document,n=this.editor.t;e.addObserver(xI),t.commands.add("enter",new NU(t)),this.listenTo(i,"enter",(r,o)=>{i.isComposing||o.preventDefault(),!o.isSoft&&(t.execute("enter"),e.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class zU extends Le{execute(){const t=this.editor.model,e=t.document;t.change(i=>{UU(t,i,e.selection),this.fire("afterExecute",{writer:i})})}refresh(){const t=this.editor.model,e=t.document;this.isEnabled=WU(t.schema,e.selection)}}function WU(s,t){if(t.rangeCount>1)return!1;const e=t.anchor;if(!e||!s.checkChild(e,"softBreak"))return!1;const i=t.getFirstRange(),n=i.start.parent,r=i.end.parent;return!((V1(n,s)||V1(r,s))&&n!==r)}function UU(s,t,e){const i=e.isCollapsed,n=e.getFirstRange(),r=n.start.parent,o=n.end.parent,l=r==o;if(i){const a=OI(s.schema,e.getAttributes());f2(s,t,n.end),t.removeSelectionAttribute(e.getAttributeKeys()),t.setSelectionAttribute(a)}else{const a=!(n.start.isAtStart&&n.end.isAtEnd);s.deleteContent(e,{leaveUnmerged:a}),l?f2(s,t,e.focus):a&&t.setSelection(o,0)}}function f2(s,t,e){const i=t.createElement("softBreak");s.insertContent(i,e),t.setSelection(i,"after")}function V1(s,t){return s.is("rootElement")?!1:t.isLimit(s)||V1(s.parent,t)}class yI extends F{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model.schema,i=t.conversion,n=t.editing.view,r=n.document,o=this.editor.t;e.register("softBreak",{allowWhere:"$text",isInline:!0}),i.for("upcast").elementToElement({model:"softBreak",view:"br"}),i.for("downcast").elementToElement({model:"softBreak",view:(l,{writer:a})=>a.createEmptyElement("br")}),n.addObserver(xI),t.commands.add("shiftEnter",new zU(t)),this.listenTo(r,"enter",(l,a)=>{r.isComposing||a.preventDefault(),a.isSoft&&(t.execute("shiftEnter"),n.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:o("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ZU extends gt(){constructor(){super(...arguments);p(this,"_stack",[])}add(e,i){const n=this._stack,r=n[0];this._insertDescriptor(e);const o=n[0];r!==o&&!rb(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:i})}remove(e,i){const n=this._stack,r=n[0];this._removeDescriptor(e);const o=n[0];r!==o&&!rb(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:i})}_insertDescriptor(e){const i=this._stack,n=i.findIndex(o=>o.id===e.id);if(rb(e,i[n]))return;n>-1&&i.splice(n,1);let r=0;for(;i[r]&&HU(i[r],e);)r++;i.splice(r,0,e)}_removeDescriptor(e){const i=this._stack,n=i.findIndex(r=>r.id===e);n>-1&&i.splice(n,1)}}function rb(s,t){return s&&t&&s.priority==t.priority&&pg(s.classes)==pg(t.classes)}function HU(s,t){return s.priority>t.priority?!0:s.priority<t.priority?!1:pg(s.classes)>pg(t.classes)}function pg(s){return Array.isArray(s)?s.sort().join(","):s}const qU="ck-widget",m2="ck-widget_selected";function Wt(s){return s.is("element")?!!s.getCustomProperty("widget"):!1}function nd(s,t,e={}){if(!s.is("containerElement"))throw new A("widget-to-widget-wrong-element-type",null,{element:s});return t.setAttribute("contenteditable","false",s),t.addClass(qU,s),t.setCustomProperty("widget",!0,s),s.getFillerOffset=KU,t.setCustomProperty("widgetLabel",[],s),e.label&&GU(s,e.label),e.hasSelectionHandle&&JU(s,t),vI(s,t),s}function XU(s,t,e){if(t.classes&&e.addClass(ut(t.classes),s),t.attributes)for(const i in t.attributes)e.setAttribute(i,t.attributes[i],s)}function jU(s,t,e){if(t.classes&&e.removeClass(ut(t.classes),s),t.attributes)for(const i in t.attributes)e.removeAttribute(i,s)}function vI(s,t,e=XU,i=jU){const n=new ZU;n.on("change:top",(l,a)=>{a.oldDescriptor&&i(s,a.oldDescriptor,a.writer),a.newDescriptor&&e(s,a.newDescriptor,a.writer)});const r=(l,a,c)=>n.add(a,c),o=(l,a,c)=>n.remove(a,c);t.setCustomProperty("addHighlight",r,s),t.setCustomProperty("removeHighlight",o,s)}function GU(s,t){s.getCustomProperty("widgetLabel").push(t)}function YU(s){return s.getCustomProperty("widgetLabel").reduce((e,i)=>typeof i=="function"?e?e+". "+i():i():e?e+". "+i:i,"")}function Kx(s,t,e={}){return t.addClass(["ck-editor__editable","ck-editor__nested-editable"],s),e.withAriaRole!==!1&&t.setAttribute("role","textbox",s),t.setAttribute("tabindex","-1",s),e.label&&t.setAttribute("aria-label",e.label,s),t.setAttribute("contenteditable",s.isReadOnly?"false":"true",s),s.on("change:isReadOnly",(i,n,r)=>{t.setAttribute("contenteditable",r?"false":"true",s)}),s.on("change:isFocused",(i,n,r)=>{r?t.addClass("ck-editor__nested-editable_focused",s):t.removeClass("ck-editor__nested-editable_focused",s)}),vI(s,t),s}function _I(s,t){const e=s.getSelectedElement();if(e){const i=fo(s);if(i)return t.createRange(t.createPositionAt(e,i))}return t.schema.findOptimalInsertionRange(s)}function KU(){return null}function JU(s,t){const e=t.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(i){const n=this.toDomElement(i),r=new Vs;return r.set("content",pF),r.render(),n.appendChild(r.element),n});t.insert(t.createPositionAt(s,0),e),t.addClass(["ck-widget_with-selection-handle"],s)}function Jx(s){const t=l=>{const{width:a,paddingLeft:c,paddingRight:h}=l.ownerDocument.defaultView.getComputedStyle(l);return parseFloat(a)-(parseFloat(c)||0)-(parseFloat(h)||0)},e=s.parentElement;if(!e)return 0;let i=t(e);const n=5;let r=0,o=e;for(;isNaN(i);){if(o=o.parentElement,++r>n)return 0;i=t(o)}return i}function eZ(s,t=new Me(s)){const e=Jx(s);return e?t.width/e*100:0}const _r="widget-type-around";function sl(s,t,e){return!!s&&Wt(s)&&!e.isInline(t)}function tZ(s){return s.closest(".ck-widget__type-around__button")}function iZ(s){return s.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function nZ(s,t){const e=s.closest(".ck-widget");return t.mapDomToView(e)}function fo(s){return s.getAttribute(_r)}const kI=["before","after"],sZ=new DOMParser().parseFromString(HF,"image/svg+xml").firstChild,g2="ck-widget__type-around_disabled";class rZ extends F{constructor(){super(...arguments);p(this,"_currentFakeCaretModelElement",null)}static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[pp,Dl]}init(){const e=this.editor,i=e.editing.view;this.on("change:isEnabled",(n,r,o)=>{i.change(l=>{for(const a of i.document.roots)o?l.removeClass(g2,a):l.addClass(g2,a)}),o||e.model.change(l=>{l.removeSelectionAttribute(_r)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,i){const n=this.editor,r=n.editing.view,o=n.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);n.execute("insertParagraph",{position:n.model.createPositionAt(e,i),attributes:o}),r.focus(),r.scrollToTheSelection()}_listenToIfEnabled(e,i,n,r){this.listenTo(e,i,(...o)=>{this.isEnabled&&n(...o)},r)}_insertParagraphAccordingToFakeCaretPosition(){const n=this.editor.model.document.selection,r=fo(n);if(!r)return!1;const o=n.getSelectedElement();return this._insertParagraph(o,r),!0}_enableTypeAroundUIInjection(){const e=this.editor,i=e.model.schema,n=e.locale.t,r={before:n("Insert paragraph before block"),after:n("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(o,l,a)=>{const c=a.mapper.toViewElement(l.item);c&&sl(c,l.item,i)&&(oZ(a.writer,r,c),c.getCustomProperty("widgetLabel").push(()=>this.isEnabled?n("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,i=e.model,n=i.document.selection,r=i.schema,o=e.editing.view;this._listenToIfEnabled(o.document,"arrowKey",(a,c)=>{this._handleArrowKeyPress(a,c)},{context:[Wt,"$text"],priority:"high"}),this._listenToIfEnabled(n,"change:range",(a,c)=>{c.directChange&&e.model.change(h=>{h.removeSelectionAttribute(_r)})}),this._listenToIfEnabled(i.document,"change:data",()=>{const a=n.getSelectedElement();if(a){const c=e.editing.mapper.toViewElement(a);if(sl(c,a,r))return}e.model.change(c=>{c.removeSelectionAttribute(_r)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(a,c,h)=>{const f=h.writer;if(this._currentFakeCaretModelElement){const v=h.mapper.toViewElement(this._currentFakeCaretModelElement);v&&(f.removeClass(kI.map(l),v),this._currentFakeCaretModelElement=null)}const m=c.selection.getSelectedElement();if(!m)return;const w=h.mapper.toViewElement(m);if(!sl(w,m,r))return;const O=fo(c.selection);O&&(f.addClass(l(O),w),this._currentFakeCaretModelElement=m)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(a,c,h)=>{h||e.model.change(f=>{f.removeSelectionAttribute(_r)})});function l(a){return`ck-widget_type-around_show-fake-caret_${a}`}}_handleArrowKeyPress(e,i){const n=this.editor,r=n.model,o=r.document.selection,l=r.schema,a=n.editing.view,c=i.keyCode,h=uQ(c,n.locale.contentLanguageDirection),f=a.document.selection.getSelectedElement(),m=n.editing.mapper.toModelElement(f);let w;sl(f,m,l)?w=this._handleArrowKeyPressOnSelectedWidget(h):o.isCollapsed?w=this._handleArrowKeyPressWhenSelectionNextToAWidget(h):i.shiftKey||(w=this._handleArrowKeyPressWhenNonCollapsedSelection(h)),w&&(i.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const n=this.editor.model,r=n.document.selection,o=fo(r);return n.change(l=>{if(o){if(!(o===(e?"after":"before")))return l.removeSelectionAttribute(_r),!0}else return l.setSelectionAttribute(_r,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const i=this.editor,n=i.model,r=n.schema,o=i.plugins.get("Widget"),l=o._getObjectElementNextToSelection(e),a=i.editing.mapper.toViewElement(l);return sl(a,l,r)?(n.change(c=>{o._setSelectionOverElement(l),c.setSelectionAttribute(_r,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const i=this.editor,n=i.model,r=n.schema,o=i.editing.mapper,l=n.document.selection,a=e?l.getLastPosition().nodeBefore:l.getFirstPosition().nodeAfter,c=o.toViewElement(a);return sl(c,a,r)?(n.change(h=>{h.setSelection(a,"on"),h.setSelectionAttribute(_r,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,i=e.editing.view;this._listenToIfEnabled(i.document,"mousedown",(n,r)=>{const o=tZ(r.domTarget);if(!o)return;const l=iZ(o),a=nZ(o,i.domConverter),c=e.editing.mapper.toModelElement(a);this._insertParagraph(c,l),r.preventDefault(),n.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,i=e.model.document.selection,n=e.editing.view;this._listenToIfEnabled(n.document,"enter",(r,o)=>{if(r.eventPhase!="atTarget")return;const l=i.getSelectedElement(),a=e.editing.mapper.toViewElement(l),c=e.model.schema;let h;this._insertParagraphAccordingToFakeCaretPosition()?h=!0:sl(a,l,c)&&(this._insertParagraph(l,o.isSoft?"before":"after"),h=!0),h&&(o.preventDefault(),r.stop())},{context:Wt})}_enableInsertingParagraphsOnTypingKeystroke(){const i=this.editor.editing.view.document;this._listenToIfEnabled(i,"insertText",(n,r)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(r.selection=i.selection)},{priority:"high"}),Ie.isAndroid?this._listenToIfEnabled(i,"keydown",(n,r)=>{r.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(i,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"highest"})}_enableDeleteIntegration(){const e=this.editor,i=e.editing.view,n=e.model,r=n.schema;this._listenToIfEnabled(i.document,"delete",(o,l)=>{if(o.eventPhase!="atTarget")return;const a=fo(n.document.selection);if(!a)return;const c=l.direction,h=n.document.selection.getSelectedElement(),f=a==="before",m=c=="forward";if(f===m)e.execute("delete",{selection:n.createSelection(h,"on")});else{const O=r.getNearestSelectionRange(n.createPositionAt(h,a),c);if(O)if(!O.isCollapsed)n.change(v=>{v.setSelection(O),e.execute(m?"deleteForward":"delete")});else{const v=n.createSelection(O.start);if(n.modifySelection(v,{direction:c}),!v.focus.isEqual(O.start))n.change(k=>{k.setSelection(O),e.execute(m?"deleteForward":"delete")});else{const k=cZ(r,O.start.parent);n.deleteContent(n.createSelection(k,"on"),{doNotAutoparagraph:!0})}}}l.preventDefault(),o.stop()},{context:Wt})}_enableInsertContentIntegration(){const e=this.editor,i=this.editor.model,n=i.document.selection;this._listenToIfEnabled(e.model,"insertContent",(r,[o,l])=>{if(l&&!l.is("documentSelection"))return;const a=fo(n);if(a)return r.stop(),i.change(c=>{const h=n.getSelectedElement(),f=i.createPositionAt(h,a),m=c.createSelection(f),w=i.insertContent(o,m);return c.setSelection(m),w})},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,n=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(r,o)=>{const[,l,a={}]=o;if(l&&!l.is("documentSelection"))return;const c=fo(n);c&&(a.findOptimalPosition=c,o[3]=a)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,n=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(r,[o])=>{if(o&&!o.is("documentSelection"))return;fo(n)&&r.stop()},{priority:"high"})}}function oZ(s,t,e){const i=s.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(n){const r=this.toDomElement(n);return lZ(r,t),aZ(r),r});s.insert(s.createPositionAt(e,"end"),i)}function lZ(s,t){for(const e of kI){const i=new Qn({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${e}`],title:t[e],"aria-hidden":"true"},children:[s.ownerDocument.importNode(sZ,!0)]});s.appendChild(i.render())}}function aZ(s){const t=new Qn({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});s.appendChild(t.render())}function cZ(s,t){let e=t;for(const i of t.getAncestors({parentFirst:!0})){if(i.childCount>1||s.isLimit(i))break;e=i}return e}function uZ(s){const t=s.model;return(e,i)=>{const n=i.keyCode==Fe.arrowup,r=i.keyCode==Fe.arrowdown,o=i.shiftKey,l=t.document.selection;if(!n&&!r)return;const a=r;if(o&&fZ(l,a))return;const c=hZ(s,l,a);if(c){if(c.isCollapsed){if(l.isCollapsed)return;if(o)return}(c.isCollapsed||dZ(s,c,a))&&(t.change(h=>{const f=a?c.end:c.start;if(o){const m=t.createSelection(l.anchor);m.setFocus(f),h.setSelection(m)}else h.setSelection(f)}),e.stop(),i.preventDefault(),i.stopPropagation())}}}function hZ(s,t,e){const i=s.model;if(e){const n=t.isCollapsed?t.focus:t.getLastPosition(),r=p2(i,n,"forward");if(!r)return null;const o=i.createRange(n,r),l=w2(i.schema,o,"backward");return l?i.createRange(n,l):null}else{const n=t.isCollapsed?t.focus:t.getFirstPosition(),r=p2(i,n,"backward");if(!r)return null;const o=i.createRange(r,n),l=w2(i.schema,o,"forward");return l?i.createRange(l,n):null}}function p2(s,t,e){const i=s.schema,n=s.createRangeIn(t.root),r=e=="forward"?"elementStart":"elementEnd";for(const{previousPosition:o,item:l,type:a}of n.getWalker({startPosition:t,direction:e})){if(i.isLimit(l)&&!i.isInline(l))return o;if(a==r&&i.isBlock(l))return null}return null}function w2(s,t,e){const i=e=="backward"?t.end:t.start;if(s.checkChild(i,"$text"))return i;for(const{nextPosition:n}of t.getWalker({direction:e}))if(s.checkChild(n,"$text"))return n;return null}function dZ(s,t,e){const i=s.model,n=s.view.domConverter;if(e){const c=i.createSelection(t.start);i.modifySelection(c),!c.focus.isAtEnd&&!t.start.isEqual(c.focus)&&(t=i.createRange(c.focus,t.end))}const r=s.mapper.toViewRange(t),o=n.viewRangeToDom(r),l=Me.getDomRangeRects(o);let a;for(const c of l){if(a===void 0){a=Math.round(c.bottom);continue}if(Math.round(c.top)>=a)return!1;a=Math.max(a,Math.round(c.bottom))}return!0}function fZ(s,t){return!s.isCollapsed&&s.isBackward==t}class Sc extends F{constructor(){super(...arguments);p(this,"_previouslySelected",new Set)}static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[rZ,Dl]}init(){const e=this.editor,i=e.editing.view,n=i.document,r=e.t;this.editor.editing.downcastDispatcher.on("selection",(o,l,a)=>{const c=a.writer,h=l.selection;if(h.isCollapsed)return;const f=h.getSelectedElement();if(!f)return;const m=e.editing.mapper.toViewElement(f);Wt(m)&&a.consumable.consume(h,"selection")&&c.setSelection(c.createRangeOn(m),{fake:!0,label:YU(m)})}),this.editor.editing.downcastDispatcher.on("selection",(o,l,a)=>{this._clearPreviouslySelectedWidgets(a.writer);const c=a.writer,h=c.document.selection;let f=null;for(const m of h.getRanges())for(const w of m){const O=w.item;Wt(O)&&!pZ(O,f)&&(c.addClass(m2,O),this._previouslySelected.add(O),f=O)}},{priority:"low"}),i.addObserver(hp),this.listenTo(n,"mousedown",(...o)=>this._onMousedown(...o)),this.listenTo(n,"arrowKey",(...o)=>{this._handleSelectionChangeOnArrowKeyPress(...o)},{context:[Wt,"$text"]}),this.listenTo(n,"arrowKey",(...o)=>{this._preventDefaultOnArrowKeyPress(...o)},{context:"$root"}),this.listenTo(n,"arrowKey",uZ(this.editor.editing),{context:"$text"}),this.listenTo(n,"delete",(o,l)=>{this._handleDelete(l.direction=="forward")&&(l.preventDefault(),o.stop())},{context:"$root"}),this.listenTo(n,"tab",(o,l)=>{o.eventPhase=="atTarget"&&(l.shiftKey||this._selectFirstNestedEditable()&&(l.preventDefault(),o.stop()))},{context:Wt,priority:"low"}),this.listenTo(n,"tab",(o,l)=>{l.shiftKey&&this._selectAncestorWidget()&&(l.preventDefault(),o.stop())},{priority:"low"}),this.listenTo(n,"keydown",(o,l)=>{l.keystroke==Fe.esc&&this._selectAncestorWidget()&&(l.preventDefault(),o.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:r("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:r("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:r("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:r("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:r("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:r("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,i){const n=this.editor,r=n.editing.view,o=r.document;let l=i.target;if(!l)return;if(i.domEvent.detail>=3){this._selectBlockContent(l)&&i.preventDefault();return}if(!Wt(l)){const c=mZ(l);if(!c)return;if(Wt(c))l=c;else{const h=gZ(r,i);if(h&&Wt(h))l=h;else return}}Ie.isAndroid&&i.preventDefault(),o.isFocused||r.focus();const a=n.editing.mapper.toModelElement(l);this._setSelectionOverElement(a)}_selectBlockContent(e){const i=this.editor,n=i.model,r=i.editing.mapper,o=n.schema,l=r.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),a=wZ(r.toModelElement(l),n.schema);return a?(n.change(c=>{const h=o.isLimit(a)?null:bZ(c.createPositionAfter(a),o),f=c.createPositionAt(a,0),m=h?c.createPositionAt(h,0):c.createPositionAt(a,"end");c.setSelection(c.createRange(f,m))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,i){const n=i.keyCode,r=this.editor.model,o=r.schema,l=r.document.selection,a=l.getSelectedElement(),c=yx(n,this.editor.locale.contentLanguageDirection),h=c=="down"||c=="right",f=c=="up"||c=="down";if(a&&o.isObject(a)){const w=h?l.getLastPosition():l.getFirstPosition(),O=o.getNearestSelectionRange(w,h?"forward":"backward");O&&(r.change(v=>{v.setSelection(O)}),i.preventDefault(),e.stop());return}if(!l.isCollapsed&&!i.shiftKey){const w=l.getFirstPosition(),O=l.getLastPosition(),v=w.nodeAfter,k=O.nodeBefore;(v&&o.isObject(v)||k&&o.isObject(k))&&(r.change(C=>{C.setSelection(h?O:w)}),i.preventDefault(),e.stop());return}if(!l.isCollapsed)return;const m=this._getObjectElementNextToSelection(h);if(m&&o.isObject(m)){if(o.isInline(m)&&f)return;this._setSelectionOverElement(m),i.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,i){const n=this.editor.model,r=n.schema,o=n.document.selection.getSelectedElement();o&&r.isObject(o)&&(i.preventDefault(),e.stop())}_handleDelete(e){const n=this.editor.model.document.selection;if(!this.editor.model.canEditAt(n)||!n.isCollapsed)return;const r=this._getObjectElementNextToSelection(e);if(r)return this.editor.model.change(o=>{let l=n.anchor.parent;for(;l.isEmpty;){const a=l;l=a.parent,o.remove(a)}this._setSelectionOverElement(r)}),!0}_setSelectionOverElement(e){this.editor.model.change(i=>{i.setSelection(i.createRangeOn(e))})}_getObjectElementNextToSelection(e){const i=this.editor.model,n=i.schema,r=i.document.selection,o=i.createSelection(r);if(i.modifySelection(o,{direction:e?"forward":"backward"}),o.isEqual(r))return null;const l=e?o.focus.nodeBefore:o.focus.nodeAfter;return l&&n.isObject(l)?l:null}_clearPreviouslySelectedWidgets(e){for(const i of this._previouslySelected)e.removeClass(m2,i);this._previouslySelected.clear()}_selectFirstNestedEditable(){const e=this.editor,n=this.editor.editing.view.document;for(const r of n.selection.getFirstRange().getItems())if(r.is("editableElement")){const o=e.editing.mapper.toModelElement(r);/* istanbul ignore next -- @preserve */if(!o)continue;const l=e.model.createPositionAt(o,0),a=e.model.schema.getNearestSelectionRange(l,"forward");return e.model.change(c=>{c.setSelection(a)}),!0}return!1}_selectAncestorWidget(){const e=this.editor,i=e.editing.mapper,r=e.editing.view.document.selection.getFirstPosition().parent,l=(r.is("$text")?r.parent:r).findAncestor(Wt);if(!l)return!1;const a=i.toModelElement(l);/* istanbul ignore next -- @preserve */return a?(e.model.change(c=>{c.setSelection(a,"on")}),!0):!1}}function mZ(s){let t=s;for(;t;){if(t.is("editableElement")||Wt(t))return t;t=t.parent}return null}function gZ(s,t){const e=bA(t.domEvent);let i=null;if(e?i=s.domConverter.domRangeToView(e):i=s.createRange(s.createPositionAt(t.target,0)),!i)return null;const n=i.start;if(!n.parent)return null;let r=n.parent;return n.parent.is("editableElement")&&(n.isAtEnd&&n.nodeBefore?r=n.nodeBefore:n.isAtStart&&n.nodeAfter&&(r=n.nodeAfter)),r.is("$text")?r.parent:r}function pZ(s,t){return t?Array.from(s.getAncestors()).includes(t):!1}function wZ(s,t){for(const e of s.getAncestors({includeSelf:!0,parentFirst:!0})){if(t.checkChild(e,"$text"))return e;if(t.isLimit(e)&&!t.isObject(e))break}return null}function bZ(s,t){const e=new Tr({startPosition:s});for(const{item:i}of e){if(t.isLimit(i)||!i.is("element"))return null;if(t.checkChild(i,"$text"))return i}return null}class wg extends F{constructor(){super(...arguments);p(this,"_toolbarDefinitions",new Map);p(this,"_balloon")}static get requires(){return[hs]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const i=e.plugins.get("BalloonToolbar");this.listenTo(i,"show",n=>{OZ(e.editing.view.document.selection)&&n.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:i,items:n,getRelatedElement:r,balloonClassName:o="ck-toolbar-container",positions:l}){if(!n.length){We("widget-toolbar-no-items",{toolbarId:e});return}const a=this.editor,c=a.t,h=new vl(a.locale);if(h.ariaLabel=i||c("Widget toolbar"),this._toolbarDefinitions.has(e))throw new A("widget-toolbar-duplicated",this,{toolbarId:e});const f={view:h,getRelatedElement:r,balloonClassName:o,itemsConfig:n,positions:l,initialized:!1};a.ui.addToolbar(h,{isContextual:!0,beforeFocus:()=>{const m=r(a.editing.view.document.selection);m&&this._showToolbar(f,m)},afterBlur:()=>{this._hideToolbar(f)}}),this._toolbarDefinitions.set(e,f)}_updateToolbarsVisibility(){let e=0,i=null,n=null;for(const r of this._toolbarDefinitions.values()){const o=r.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!o)this._isToolbarInBalloon(r)&&this._hideToolbar(r);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(r)&&this._hideToolbar(r);else{const l=o.getAncestors().length;l>e&&(e=l,i=o,n=r)}}n&&this._showToolbar(n,i)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,i){this._isToolbarVisible(e)?b2(this.editor,i,e.positions):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:SI(this.editor,i,e.positions),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const n of this._toolbarDefinitions.values())if(this._isToolbarVisible(n)){const r=n.getRelatedElement(this.editor.editing.view.document.selection);b2(this.editor,r,e.positions)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function b2(s,t,e){const i=s.plugins.get("ContextualBalloon"),n=SI(s,t,e);i.updatePosition(n)}function SI(s,t,e){const i=s.editing.view,n=Gi.defaultPositions;return{target:i.domConverter.mapViewToDom(t),positions:e||[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,n.viewportStickyNorth]}}function OZ(s){const t=s.getSelectedElement();return!!(t&&Wt(t))}class xZ extends ct(){constructor(e){super();p(this,"_referenceCoordinates");p(this,"_options");p(this,"_originalWidth");p(this,"_originalHeight");p(this,"_originalWidthPercents");p(this,"_aspectRatio");this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,i,n){const r=new Me(i);this.activeHandlePosition=_Z(e),this._referenceCoordinates=yZ(i,kZ(this.activeHandlePosition)),this._originalWidth=r.width,this._originalHeight=r.height,this._aspectRatio=r.width/r.height;const o=n.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(o):this._originalWidthPercents=eZ(n,r)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function yZ(s,t){const e=new Me(s),i=t.split("-"),n={x:i[1]=="right"?e.right:e.left,y:i[0]=="bottom"?e.bottom:e.top};return n.x+=s.ownerDocument.defaultView.scrollX,n.y+=s.ownerDocument.defaultView.scrollY,n}function vZ(s){return`ck-widget__resizer__handle-${s}`}function _Z(s){const t=["top-left","top-right","bottom-right","bottom-left"];for(const e of t)if(s.classList.contains(vZ(e)))return e}function kZ(s){const t=s.split("-"),e={top:"bottom",bottom:"top",left:"right",right:"left"};return`${e[t[0]]}-${e[t[1]]}`}class SZ extends he{constructor(){super();const t=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",t.to("_viewPosition",e=>e?`ck-orientation-${e}`:"")],style:{display:t.if("_isVisible","none",e=>!e)}},children:[{text:t.to("_label")}]})}_bindToState(t,e){this.bind("_isVisible").to(e,"proposedWidth",e,"proposedHeight",(i,n)=>i!==null&&n!==null),this.bind("_label").to(e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",e,"proposedWidthPercents",(i,n,r)=>t.unit==="px"?`${i}×${n}`:`${r}%`),this.bind("_viewPosition").to(e,"activeHandlePosition",e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",(i,n,r)=>n<50||r<50?"above-center":i)}_dismiss(){this.unbind(),this._isVisible=!1}}class O2 extends ct(){constructor(e){super();p(this,"_state");p(this,"_sizeView");p(this,"_options");p(this,"_viewResizerWrapper",null);p(this,"_initialViewWidth");this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(i,n)=>i&&n),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",i=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),i.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(i=>{i.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(i=>{i.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,i=this._options.viewElement;this._options.editor.editing.view.change(r=>{const o=r.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(l){const a=this.toDomElement(l);return e._appendHandles(a),e._appendSizeUI(a),a});r.insert(r.createPositionAt(i,"end"),o),r.addClass("ck-widget_with-resizer",i),this._viewResizerWrapper=o,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new xZ(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const i=this._proposeNewSize(e);this._options.editor.editing.view.change(h=>{const f=this._options.unit||"%",m=(f==="%"?i.widthPercents:i.width)+f;h.setStyle("width",m,this._options.viewElement)});const r=this._getHandleHost(),o=new Me(r),l=Math.round(o.width),a=Math.round(o.height),c=new Me(r);i.width=Math.round(c.width),i.height=Math.round(c.height),this.redraw(o),this.state.update({...i,handleHostWidth:l,handleHostHeight:a})}commit(){const e=this._options.unit||"%",i=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(i)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const i=this._domResizerWrapper;if(!TZ(i))return;const n=i.parentElement,r=this._getHandleHost(),o=this._viewResizerWrapper,l=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let a;if(n.isSameNode(r)){const c=e||new Me(r);a=[c.width+"px",c.height+"px",void 0,void 0]}else a=[r.offsetWidth+"px",r.offsetHeight+"px",r.offsetLeft+"px",r.offsetTop+"px"];Di(l,a)!=="same"&&this._options.editor.editing.view.change(c=>{c.setStyle({width:a[0],height:a[1],left:a[2],top:a[3]},o)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(i=>{i.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const i=this.state,n=PZ(e),r=this._options.isCentered?this._options.isCentered(this):!0,o={x:i._referenceCoordinates.x-(n.x+i.originalWidth),y:n.y-i.originalHeight-i._referenceCoordinates.y};r&&i.activeHandlePosition.endsWith("-right")&&(o.x=n.x-(i._referenceCoordinates.x+i.originalWidth)),r&&(o.x*=2);let l=Math.abs(i.originalWidth+o.x),a=Math.abs(i.originalHeight+o.y);return(l/i.aspectRatio>a?"width":"height")=="width"?a=l/i.aspectRatio:l=a*i.aspectRatio,{width:Math.round(l),height:Math.round(a),widthPercents:Math.min(Math.round(i.originalWidthPercents/i.originalWidth*l*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const i=["top-left","top-right","bottom-right","bottom-left"];for(const n of i)e.appendChild(new Qn({tag:"div",attributes:{class:`ck-widget__resizer__handle ${CZ(n)}`}}).render())}_appendSizeUI(e){this._sizeView=new SZ,this._sizeView.render(),e.appendChild(this._sizeView.element)}}function CZ(s){return`ck-widget__resizer__handle-${s}`}function PZ(s){return{x:s.pageX,y:s.pageY}}function TZ(s){return s&&s.ownerDocument&&s.ownerDocument.contains(s)}class ob extends F{constructor(){super(...arguments);p(this,"_resizers",new Map);p(this,"_observer");p(this,"_redrawSelectedResizerThrottled")}static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.editing,i=ue.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(hp),this._observer=new(Zi()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(i,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(i,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=tc(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[r,o]of this._resizers)r.isAttached()||(this._resizers.delete(r),o.destroy())},{priority:"lowest"}),this._observer.listenTo(ue.window,"resize",this._redrawSelectedResizerThrottled);const n=this.editor.editing.view.document.selection;n.on("change",()=>{const r=n.getSelectedElement(),o=this.getResizerByViewElement(r)||null;o?this.select(o):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const i=new O2(e),n=this.editor.plugins;if(i.attach(),n.has("WidgetToolbarRepository")){const l=n.get("WidgetToolbarRepository");i.on("begin",()=>{l.forceDisabled("resize")},{priority:"lowest"}),i.on("cancel",()=>{l.clearForceDisabled("resize")},{priority:"highest"}),i.on("commit",()=>{l.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,i);const o=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(o)==i&&this.select(i),i}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const i of this._resizers.values())if(i.containsHandle(e))return i}_mouseDownListener(e,i){const n=i.domTarget;O2.isResizeHandle(n)&&(this._activeResizer=this._getResizerByHandle(n)||null,this._activeResizer&&(this._activeResizer.begin(n),e.stop(),i.preventDefault()))}_mouseMoveListener(e,i){this._activeResizer&&this._activeResizer.updateSize(i)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}var EZ=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],Du=s=>{let t=0;for(let e=0;e<s.length;e++){let i=s[e],n=EZ.indexOf(i);t=t*83+n}return t},lb=s=>{let t=s/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},ab=s=>{let t=Math.max(0,Math.min(1,s));return t<=.0031308?Math.trunc(t*12.92*255+.5):Math.trunc((1.055*Math.pow(t,.4166666666666667)-.055)*255+.5)},AZ=s=>s<0?-1:1,cb=(s,t)=>AZ(s)*Math.pow(Math.abs(s),t),x2=class extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}},IZ=s=>{if(!s||s.length<6)throw new x2("The blurhash string must be at least 6 characters");let t=Du(s[0]),e=Math.floor(t/9)+1,i=t%9+1;if(s.length!==4+2*i*e)throw new x2(`blurhash length mismatch: length is ${s.length} but it should be ${4+2*i*e}`)},RZ=s=>{let t=s>>16,e=s>>8&255,i=s&255;return[lb(t),lb(e),lb(i)]},VZ=(s,t)=>{let e=Math.floor(s/361),i=Math.floor(s/19)%19,n=s%19;return[cb((e-9)/9,2)*t,cb((i-9)/9,2)*t,cb((n-9)/9,2)*t]},MZ=(s,t,e,i)=>{IZ(s),i=i|1;let n=Du(s[0]),r=Math.floor(n/9)+1,o=n%9+1,l=(Du(s[1])+1)/166,a=new Array(o*r);for(let f=0;f<a.length;f++)if(f===0){let m=Du(s.substring(2,6));a[f]=RZ(m)}else{let m=Du(s.substring(4+f*2,6+f*2));a[f]=VZ(m,l*i)}let c=t*4,h=new Uint8ClampedArray(c*e);for(let f=0;f<e;f++)for(let m=0;m<t;m++){let w=0,O=0,v=0;for(let V=0;V<r;V++)for(let Q=0;Q<o;Q++){let D=Math.cos(Math.PI*m*Q/t)*Math.cos(Math.PI*f*V/e),q=a[Q+V*o];w+=q[0]*D,O+=q[1]*D,v+=q[2]*D}let k=ab(w),C=ab(O),P=ab(v);h[4*m+0+f*c]=k,h[4*m+1+f*c]=C,h[4*m+2+f*c]=P,h[4*m+3+f*c]=255}return h},LZ=MZ;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class BZ extends F{static get pluginName(){return"CKBoxUI"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor;t.commands.get("ckbox")&&(t.ui.componentFactory.add("ckbox",()=>this._createFileToolbarButton()),t.ui.componentFactory.add("menuBar:ckbox",()=>this._createFileMenuBarButton()),t.plugins.has("ImageInsertUI")&&t.plugins.get("ImageInsertUI").registerIntegration({name:"assetManager",observable:()=>t.commands.get("ckbox"),buttonViewCreator:()=>this._createImageToolbarButton(),formViewCreator:()=>this._createImageDropdownButton(),menuBarButtonViewCreator:e=>this._createImageMenuBarButton(e?"insertOnly":"insertNested")}))}_createButton(t){const e=this.editor,i=e.locale,n=new t(i),r=e.commands.get("ckbox");return n.bind("isOn","isEnabled").to(r,"value","isEnabled"),n.on("execute",()=>{e.execute("ckbox")}),n}_createFileToolbarButton(){const t=this.editor.locale.t,e=this._createButton(ve);return e.icon=pC,e.label=t("Open file manager"),e.tooltip=!0,e}_createImageToolbarButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),i=this._createButton(ve);return i.icon=Ww,i.bind("label").to(e,"isImageSelected",n=>t(n?"Replace image with file manager":"Insert image with file manager")),i.tooltip=!0,i}_createImageDropdownButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),i=this._createButton(ve);return i.icon=Ww,i.withText=!0,i.bind("label").to(e,"isImageSelected",n=>t(n?"Replace with file manager":"Insert with file manager")),i.on("execute",()=>{e.dropdownView.isOpen=!1}),i}_createFileMenuBarButton(){const t=this.editor.locale.t,e=this._createButton(ci);return e.icon=pC,e.withText=!0,e.label=t("File"),e}_createImageMenuBarButton(t){const e=this.editor.locale.t,i=this.editor.locale.t,n=this._createButton(ci);switch(n.icon=Ww,n.withText=!0,t){case"insertOnly":n.label=e("Image");break;case"insertNested":n.label=i("With file manager");break}return n}}function CI(s){const t=[];let e=0;for(const n in s){const r=parseInt(n,10);isNaN(r)||(r>e&&(e=r),t.push(`${s[n]} ${n}w`))}const i=[{srcset:t.join(","),sizes:`(max-width: ${e}px) 100vw, ${e}px`,type:"image/webp"}];return{imageFallbackUrl:s.default,imageSources:i}}function $Z(s,t){var r,o,l,a;const[,e]=s.value.split("."),i=JSON.parse(atob(e)),n=((o=(r=i.auth)==null?void 0:r.ckbox)==null?void 0:o.workspaces)||[i.aud];return t?((a=(l=i.auth)==null?void 0:l.ckbox)==null?void 0:a.role)=="superadmin"||n.includes(t)?t:null:n[0]}const _u=32;function QZ(s){if(s)try{const t=`${_u}px`,e=document.createElement("canvas");e.setAttribute("width",t),e.setAttribute("height",t);const i=e.getContext("2d");/* istanbul ignore next -- @preserve */if(!i)return;const n=i.createImageData(_u,_u),r=LZ(s,_u,_u);return n.data.set(r),i.putImageData(n,0,0),e.toDataURL()}catch{return}}function wp({url:s,method:t="GET",data:e,onUploadProgress:i,signal:n,authorization:r}){const o=new XMLHttpRequest;o.open(t,s.toString()),o.setRequestHeader("Authorization",r),o.setRequestHeader("CKBox-Version","CKEditor 5"),o.responseType="json";const l=()=>{o.abort()};return new Promise((a,c)=>{n.throwIfAborted(),n.addEventListener("abort",l),o.addEventListener("loadstart",()=>{n.addEventListener("abort",l)}),o.addEventListener("loadend",()=>{n.removeEventListener("abort",l)}),o.addEventListener("error",()=>{c()}),o.addEventListener("abort",()=>{c()}),o.addEventListener("load",()=>{const h=o.response;if(!h||h.statusCode>=400)return c(h&&h.message);a(h)});/* istanbul ignore else -- @preserve */i&&o.upload.addEventListener("progress",h=>{i(h)}),o.send(e)})}const DZ={"image/gif":"gif","image/jpeg":"jpg","image/png":"png","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"};function NZ(s){return DZ[s]}async function FZ(s,t){try{const e=await fetch(s,{method:"HEAD",cache:"force-cache",...t});return e.ok&&e.headers.get("content-type")||""}catch{return""}}function zZ(s){const t=s.name,e=/\.(?<ext>[^.]+)$/;return t.match(e).groups.ext.toLowerCase()}const WZ=1e3;class UZ extends Le{constructor(e){super(e);p(this,"_chosenAssets",new Set);p(this,"_wrapper",null);this._initListeners()}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(){this.fire("ckbox:open")}_getValue(){return this._wrapper!==null}_checkEnabled(){const e=this.editor.commands.get("insertImage"),i=this.editor.commands.get("link");return!(!e.isEnabled&&!i.isEnabled)}_prepareOptions(){const i=this.editor.config.get("ckbox"),n=i.dialog,r=i.categories,o=i.view,l=i.upload;return{theme:i.theme,language:i.language,tokenUrl:i.tokenUrl,serviceOrigin:i.serviceOrigin,forceDemoLabel:i.forceDemoLabel,choosableFileExtensions:i.choosableFileExtensions,assets:{onChoose:a=>this.fire("ckbox:choose",a)},dialog:{onClose:()=>this.fire("ckbox:close"),width:n&&n.width,height:n&&n.height},categories:r&&{icons:r.icons},view:o&&{openLastView:o.openLastView,startupFolderId:o.startupFolderId,startupCategoryId:o.startupCategoryId,hideMaximizeButton:o.hideMaximizeButton},upload:l&&{componentsHideTimeout:l.componentsHideTimeout,dialogMinimizeTimeout:l.dialogMinimizeTimeout}}}_initListeners(){const e=this.editor,i=e.model,n=!e.config.get("ckbox.ignoreDataId"),r=e.config.get("ckbox.downloadableFiles");this.on("ckbox",()=>{this.refresh()},{priority:"low"}),this.on("ckbox:open",()=>{!this.isEnabled||this.value||(this._wrapper=wi(document,"div",{class:"ck ckbox-wrapper"}),document.body.appendChild(this._wrapper),window.CKBox.mount(this._wrapper,this._prepareOptions()))}),this.on("ckbox:close",()=>{this.value&&(this._wrapper.remove(),this._wrapper=null,e.editing.view.focus())}),this.on("ckbox:choose",(o,l)=>{if(!this.isEnabled)return;const a=e.commands.get("insertImage"),c=e.commands.get("link"),h=ZZ({assets:l,downloadableFilesConfig:r,isImageAllowed:a.isEnabled,isLinkAllowed:c.isEnabled}),f=h.length;f!==0&&(i.change(m=>{for(const w of h){const O=w===h[f-1],v=f===1;this._insertAsset(w,O,m,v),n&&(setTimeout(()=>this._chosenAssets.delete(w),WZ),this._chosenAssets.add(w))}}),e.editing.view.focus())}),this.listenTo(e,"destroy",()=>{this.fire("ckbox:close"),this._chosenAssets.clear()})}_insertAsset(e,i,n,r){const a=this.editor.model.document.selection;n.removeSelectionAttribute("linkHref"),e.type==="image"?this._insertImage(e):this._insertLink(e,n,r),i||n.setSelection(a.getLastPosition())}_insertImage(e){const i=this.editor,{imageFallbackUrl:n,imageSources:r,imageTextAlternative:o,imageWidth:l,imageHeight:a,imagePlaceholder:c}=e.attributes;i.execute("insertImage",{source:{src:n,sources:r,alt:o,width:l,height:a,...c?{placeholder:c}:null}})}_insertLink(e,i,n){const r=this.editor,o=r.model,l=o.document.selection,{linkName:a,linkHref:c}=e.attributes;if(l.isCollapsed){const h=cs(l.getAttributes()),f=i.createText(a,h);if(!n){const w=l.getLastPosition(),O=w.parent;O.name==="paragraph"&&O.isEmpty||r.execute("insertParagraph",{position:w});const v=o.insertContent(f);i.setSelection(v),r.execute("link",c);return}const m=o.insertContent(f);i.setSelection(m)}r.execute("link",c)}}function ZZ({downloadableFilesConfig:s,assets:t,isImageAllowed:e,isLinkAllowed:i}){return t.map(n=>qZ(n)?{id:n.data.id,type:"image",attributes:PI(n)}:{id:n.data.id,type:"link",attributes:HZ(n,s)}).filter(n=>n.type==="image"?e:i)}function PI(s){const{imageFallbackUrl:t,imageSources:e}=CI(s.data.imageUrls),{description:i,width:n,height:r,blurHash:o}=s.data.metadata,l=QZ(o);return{imageFallbackUrl:t,imageSources:e,imageTextAlternative:i||"",imageWidth:n,imageHeight:r,...l?{imagePlaceholder:l}:null}}function HZ(s,t){return{linkName:s.data.name,linkHref:XZ(s,t)}}function qZ(s){const t=s.data.metadata;return t?t.width&&t.height:!1}function XZ(s,t){const e=new URL(s.data.url);return jZ(s,t)&&e.searchParams.set("download","true"),e.toString()}function jZ(s,t){return typeof t=="function"?t(s):!0}const GZ="lark";class sc extends F{constructor(){super(...arguments);p(this,"_token")}static get pluginName(){return"CKBoxUtils"}static get isOfficialPlugin(){return!0}static get requires(){return["CloudServices"]}init(){const e=this.editor,i=!!e.config.get("ckbox"),n=!!window.CKBox;if(!i&&!n)return;e.config.define("ckbox",{serviceOrigin:"https://api.ckbox.io",defaultUploadCategories:null,ignoreDataId:!1,language:e.locale.uiLanguage,theme:GZ,tokenUrl:e.config.get("cloudServices.tokenUrl")});const r=e.plugins.get("CloudServices"),o=e.config.get("cloudServices.tokenUrl"),l=e.config.get("ckbox.tokenUrl");if(!l)throw new A("ckbox-plugin-missing-token-url",this);l==o?this._token=Promise.resolve(r.token):this._token=r.registerTokenUrl(l),this._token=this._token.then(async a=>(await this._authorizePrivateCategoriesAccess(a.value),a))}getToken(){return this._token}async getWorkspaceId(){const e=this.editor.t,i=e("Cannot access default workspace."),n=this.editor.config.get("ckbox.defaultUploadWorkspaceId"),r=$Z(await this._token,n);if(r==null)throw ig("ckbox-access-default-workspace-error"),i;return r}async getCategoryIdForFile(e,i){const n=this.editor.t,r=n("Cannot determine a category for the uploaded file."),o=this.editor.config.get("ckbox.defaultUploadCategories"),l=this._getAvailableCategories(i),a=typeof e=="string"?NZ(await FZ(e,i)):zZ(e),c=await l;if(!c)throw r;if(o){const f=Object.keys(o).find(m=>o[m].find(w=>w.toLowerCase()==a));if(f){const m=c.find(w=>w.id===f||w.name===f);if(!m)throw r;return m.id}}const h=c.find(f=>f.extensions.find(m=>m.toLowerCase()==a));if(!h)throw r;return h.id}async _getAvailableCategories(e){const n=this.editor,r=this._token,{signal:o}=e,l=n.config.get("ckbox.serviceOrigin"),a=await this.getWorkspaceId();try{const h=[];let f=0,m;do{const w=await c(f);h.push(...w.items),m=w.totalCount-(f+50),f+=50}while(m>0);return h}catch{o.throwIfAborted(),ig("ckbox-fetch-category-http-error");return}async function c(h){const f=new URL("categories",l);return f.searchParams.set("limit",String(50)),f.searchParams.set("offset",String(h)),f.searchParams.set("workspaceId",a),wp({url:f,signal:o,authorization:(await r).value})}}async _authorizePrivateCategoriesAccess(e){const i=this.editor.config.get("ckbox.serviceOrigin"),n=new FormData;n.set("token",e),await fetch(`${i}/categories/authorizePrivateAccess`,{method:"POST",credentials:"include",mode:"no-cors",body:n})}}class YZ extends F{static get requires(){return["ImageUploadEditing","ImageUploadProgress",bo,ey]}static get pluginName(){return"CKBoxUploadAdapter"}static get isOfficialPlugin(){return!0}async afterInit(){const t=this.editor,e=!!t.config.get("ckbox"),i=!!window.CKBox;if(!e&&!i)return;const n=t.plugins.get(bo),r=t.plugins.get(sc);n.createUploadAdapter=a=>new KZ(a,t,r);const o=!t.config.get("ckbox.ignoreDataId"),l=t.plugins.get("ImageUploadEditing");o&&l.on("uploadComplete",(a,{imageElement:c,data:h})=>{t.model.change(f=>{f.setAttribute("ckboxImageId",h.ckboxImageId,c)})})}}class KZ{constructor(t,e,i){p(this,"loader");p(this,"token");p(this,"editor");p(this,"controller");p(this,"serviceOrigin");p(this,"ckboxUtils");this.loader=t,this.token=i.getToken(),this.ckboxUtils=i,this.editor=e,this.controller=new AbortController,this.serviceOrigin=e.config.get("ckbox.serviceOrigin")}async upload(){const t=this.ckboxUtils,e=this.editor.t,i=await this.loader.file,n=await t.getCategoryIdForFile(i,{signal:this.controller.signal}),r=new URL("assets",this.serviceOrigin),o=new FormData;r.searchParams.set("workspaceId",await t.getWorkspaceId()),o.append("categoryId",n),o.append("file",i);const l={method:"POST",url:r,data:o,onUploadProgress:a=>{/* istanbul ignore else -- @preserve */a.lengthComputable&&(this.loader.uploadTotal=a.total,this.loader.uploaded=a.loaded)},signal:this.controller.signal,authorization:(await this.token).value};return wp(l).then(async a=>{const c=CI(a.imageUrls);return{ckboxImageId:a.id,default:c.imageFallbackUrl,sources:c.imageSources}}).catch(()=>{const a=e("Cannot upload file:")+` ${i.name}.`;return Promise.reject(a)})}abort(){this.controller.abort()}}const y2="NoPermission";class ey extends F{static get pluginName(){return"CKBoxEditing"}static get isOfficialPlugin(){return!0}static get requires(){return["LinkEditing","PictureEditing",YZ,sc]}init(){const t=this.editor;this._shouldBeInitialised()&&(this._checkImagePlugins(),_2()&&t.commands.add("ckbox",new UZ(t)),nH(t).then(e=>{e||this._blockImageCommands()}))}afterInit(){const t=this.editor;this._shouldBeInitialised()&&(t.config.get("ckbox.ignoreDataId")||(this._initSchema(),this._initConversion(),this._initFixers()))}_shouldBeInitialised(){return!!this.editor.config.get("ckbox")||_2()}_blockImageCommands(){const t=this.editor,e=t.commands.get("uploadImage"),i=t.commands.get("ckboxImageEdit");e&&(e.isAccessAllowed=!1,e.forceDisabled(y2)),i&&i.forceDisabled(y2)}_checkImagePlugins(){const t=this.editor;!t.plugins.has("ImageBlockEditing")&&!t.plugins.has("ImageInlineEditing")&&ig("ckbox-plugin-image-feature-missing",t)}_initSchema(){const e=this.editor.model.schema;e.extend("$text",{allowAttributes:"ckboxLinkId"}),e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["ckboxImageId","ckboxLinkId"]}),e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["ckboxImageId","ckboxLinkId"]}),e.addAttributeCheck(i=>{if(!i.last.getAttribute("linkHref"))return!1},"ckboxLinkId")}_initConversion(){const t=this.editor;t.conversion.for("downcast").add(i=>{i.on("attribute:ckboxLinkId:imageBlock",(n,r,o)=>{const{writer:l,mapper:a,consumable:c}=o;if(!c.consume(r.item,n.name))return;const f=[...a.toViewElement(r.item).getChildren()].find(m=>m.name==="a");f&&(r.item.hasAttribute("ckboxLinkId")?l.setAttribute("data-ckbox-resource-id",r.item.getAttribute("ckboxLinkId"),f):l.removeAttribute("data-ckbox-resource-id",f))},{priority:"low"}),i.on("attribute:ckboxLinkId",(n,r,o)=>{const{writer:l,mapper:a,consumable:c}=o;if(c.consume(r.item,n.name)){if(r.attributeOldValue){const h=v2(l,r.attributeOldValue);l.unwrap(a.toViewRange(r.range),h)}if(r.attributeNewValue){const h=v2(l,r.attributeNewValue);if(r.item.is("selection")){const f=l.document.selection;l.wrap(f.getFirstRange(),h)}else l.wrap(a.toViewRange(r.range),h)}}},{priority:"low"})}),t.conversion.for("upcast").add(i=>{i.on("element:a",(n,r,o)=>{const{writer:l,consumable:a}=o;if(!r.viewItem.getAttribute("href"))return;const c={attributes:["data-ckbox-resource-id"]};if(!a.consume(r.viewItem,c))return;const h=r.viewItem.getAttribute("data-ckbox-resource-id");if(h)if(r.modelRange)for(let f of r.modelRange.getItems())f.is("$textProxy")&&(f=f.textNode),iH(f)&&l.setAttribute("ckboxLinkId",h,f);else{const f=r.modelCursor.nodeBefore||r.modelCursor.parent;l.setAttribute("ckboxLinkId",h,f)}},{priority:"low"})}),t.conversion.for("downcast").attributeToAttribute({model:"ckboxImageId",view:"data-ckbox-resource-id"}),t.conversion.for("upcast").elementToAttribute({model:{key:"ckboxImageId",value:i=>i.getAttribute("data-ckbox-resource-id")},view:{attributes:{"data-ckbox-resource-id":/[\s\S]+/}}});const e=t.commands.get("replaceImageSource");e&&this.listenTo(e,"cleanupImage",(i,[n,r])=>{n.removeAttribute("ckboxImageId",r)})}_initFixers(){const t=this.editor,e=t.model,i=e.document.selection;e.document.registerPostFixer(JZ(t)),e.document.registerPostFixer(eH(i))}}function JZ(s){return t=>{let e=!1;const i=s.model,n=s.commands.get("ckbox");if(!n)return e;for(const r of i.document.differ.getChanges()){if(r.type!=="insert"&&r.type!=="attribute")continue;const o=r.type==="insert"?new G(r.position,r.position.getShiftedBy(r.length)):r.range,l=r.type==="attribute"&&r.attributeKey==="linkHref"&&r.attributeNewValue===null;for(const a of o.getItems()){if(l&&a.hasAttribute("ckboxLinkId")){t.removeAttribute("ckboxLinkId",a),e=!0;continue}const c=tH(a,n._chosenAssets);for(const h of c){const f=h.type==="image"?"ckboxImageId":"ckboxLinkId";h.id!==a.getAttribute(f)&&(t.setAttribute(f,h.id,a),e=!0)}}}return e}}function eH(s){return t=>!s.hasAttribute("linkHref")&&s.hasAttribute("ckboxLinkId")?(t.removeSelectionAttribute("ckboxLinkId"),!0):!1}function tH(s,t){const e=s.is("element","imageInline")||s.is("element","imageBlock"),i=s.hasAttribute("linkHref");return[...t].filter(n=>{if(n.type==="image"&&e)return n.attributes.imageFallbackUrl===s.getAttribute("src");if(n.type==="link"&&i)return n.attributes.linkHref===s.getAttribute("linkHref")})}function v2(s,t){const e=s.createAttributeElement("a",{"data-ckbox-resource-id":t},{priority:5});return s.setCustomProperty("link",!0,e),e}function iH(s){return!!(s.is("$text")||s.is("element","imageInline")||s.is("element","imageBlock"))}function _2(){return!!window.CKBox}async function nH(s){const t=s.plugins.get(sc),e=s.config.get("ckbox.serviceOrigin"),i=new URL("permissions",e),{value:n}=await t.getToken(),r=await wp({url:i,authorization:n,signal:new AbortController().signal});return Object.values(r).some(o=>o["asset:create"])}class sH extends F{static get pluginName(){return"CKBox"}static get isOfficialPlugin(){return!0}static get requires(){return[ey,BZ]}}function rH(s){const t=TI(s);return e=>e.is("element","imageInline")||e.is("element","imageBlock")?e.hasAttribute("ckboxImageId")?!0:e.hasAttribute("src")?t(e.getAttribute("src")):!1:!1}function TI(s){if(Array.isArray(s)){const t=s.map(TI);return e=>t.some(i=>i(e))}if(s=="origin"){const t=ue.window.location.origin;return e=>new URL(e,ue.document.baseURI).origin==t}return typeof s=="function"?s:s instanceof RegExp?t=>!!(t.match(s)||t.replace(/^https?:\/\//,"").match(s)):()=>!1}class oH extends Le{constructor(e){super(e);p(this,"_wrapper",null);p(this,"_processInProgress",new Set);p(this,"_canEdit");p(this,"_prepareOptions");p(this,"_updateUiDelayed",ap(()=>this.editor.ui.update(),0));this.value=!1,this._canEdit=rH(e.config.get("ckbox.allowExternalImagesEditing")),this._prepareOptions=Z$((i,n)=>this._prepareOptionsAbortable(i,n)),this._prepareListeners()}refresh(){const e=this.editor;this.value=this._getValue();const i=e.model.document.selection.getSelectedElement();this.isEnabled=!!i&&this._canEdit(i)&&!this._checkIfElementIsBeingProcessed(i)}execute(){if(this._getValue())return;const e=wi(document,"div",{class:"ck ckbox-wrapper"});this._wrapper=e,this.value=!0,document.body.appendChild(this._wrapper);const n={element:this.editor.model.document.selection.getSelectedElement(),controller:new AbortController};this._prepareOptions(n).then(r=>window.CKBox.mountImageEditor(e,r),r=>{const o=this.editor,l=o.t;o.plugins.get(vh).showWarning(l("Failed to determine category of edited image."),{namespace:"ckbox"}),console.error(r),this._handleImageEditorClose()})}destroy(){this._handleImageEditorClose(),this._prepareOptions.abort(),this._updateUiDelayed.cancel();for(const e of this._processInProgress.values())e.controller.abort();super.destroy()}_getValue(){return this._wrapper!==null}async _prepareOptionsAbortable(e,i){const n=this.editor,r=n.config.get("ckbox"),o=n.plugins.get(sc),{element:l}=i;let a;const c=l.getAttribute("ckboxImageId");if(c)a={assetId:c};else{const h=new URL(l.getAttribute("src"),document.baseURI).href,f=await o.getCategoryIdForFile(h,{signal:e});a={imageUrl:h,uploadCategoryId:f}}return{...a,imageEditing:{allowOverwrite:!1},tokenUrl:r.tokenUrl,...r.serviceOrigin&&{serviceOrigin:r.serviceOrigin},onClose:()=>this._handleImageEditorClose(),onSave:h=>this._handleImageEditorSave(i,h)}}_prepareListeners(){this.listenTo(this.editor.model.document,"change:data",()=>{this._getProcessingStatesOfDeletedImages().forEach(i=>{i.controller.abort()})})}_getProcessingStatesOfDeletedImages(){const e=[];for(const i of this._processInProgress.values())i.element.root.rootName=="$graveyard"&&e.push(i);return e}_checkIfElementIsBeingProcessed(e){for(const{element:i}of this._processInProgress)if(xl(i,e))return!0;return!1}_handleImageEditorClose(){this._wrapper&&(this._wrapper.remove(),this._wrapper=null,this.editor.editing.view.focus(),this._updateUiDelayed(),this.refresh())}_handleImageEditorSave(e,i){const n=this.editor.locale.t,r=this.editor.plugins.get(vh),o=this.editor.plugins.get(Eo),l=o.add(n("Processing the edited image."));this._processInProgress.add(e),this._showImageProcessingIndicator(e.element,i),this.refresh(),this._waitForAssetProcessed(i.data.id,e.controller.signal).then(a=>{this._replaceImage(e.element,a)},a=>{this.editor.editing.reconvertItem(e.element),!e.controller.signal.aborted&&(!a||a instanceof A?r.showWarning(n("Server failed to process the image."),{namespace:"ckbox"}):console.error(a))}).finally(()=>{this._processInProgress.delete(e),o.remove(l),this.refresh()})}async _getAssetStatusFromServer(e,i){const n=this.editor.plugins.get(sc),r=new URL("assets/"+e,this.editor.config.get("ckbox.serviceOrigin")),o=await wp({url:r,signal:i,authorization:(await n.getToken()).value}),l=o.metadata.metadataProcessingStatus;if(!l||l=="queued")throw new A("ckbox-image-not-processed");return{data:{...o}}}async _waitForAssetProcessed(e,i){const n=await _Q(()=>this._getAssetStatusFromServer(e,i),{signal:i,maxAttempts:5});if(n.data.metadata.metadataProcessingStatus!="success")throw new A("ckbox-image-processing-failed");return n}_showImageProcessingIndicator(e,i){const n=this.editor;n.editing.view.change(r=>{const o=n.editing.mapper.toViewElement(e),a=this.editor.plugins.get("ImageUtils").findViewImgElement(o);r.removeStyle("aspect-ratio",a),r.setAttribute("width",i.data.metadata.width,a),r.setAttribute("height",i.data.metadata.height,a),r.setStyle("width",`${i.data.metadata.width}px`,a),r.setStyle("height",`${i.data.metadata.height}px`,a),r.addClass("image-processing",o)})}_replaceImage(e,i){const n=this.editor,{imageFallbackUrl:r,imageSources:o,imageWidth:l,imageHeight:a,imagePlaceholder:c}=PI(i),h=Array.from(n.model.document.selection.getRanges());n.model.change(f=>{f.setSelection(e,"on"),n.execute("insertImage",{imageType:e.is("element","imageInline")?"imageInline":null,source:{src:r,sources:o,width:l,height:a,...c?{placeholder:c}:null,...e.hasAttribute("alt")?{alt:e.getAttribute("alt")}:null}});const m=e.getChildren();e=n.model.document.selection.getSelectedElement();for(const w of m)f.append(f.cloneElement(w),e);f.setAttribute("ckboxImageId",i.data.id,e),f.setSelection(h)})}}class lH extends F{static get pluginName(){return"CKBoxImageEditEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ey,sc,Eo,vh,"ImageUtils","ImageEditing"]}init(){const{editor:t}=this;t.commands.add("ckboxImageEdit",new oH(t))}}class aH extends F{static get pluginName(){return"CKBoxImageEditUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("ckboxImageEdit",e=>{const i=t.commands.get("ckboxImageEdit"),n=t.commands.get("uploadImage"),r=new ve(e),o=e.t;return r.set({icon:dF,tooltip:!0}),r.bind("label").to(n,"isAccessAllowed",l=>o(l?"Edit image":"You have no image editing permissions.")),r.bind("isOn").to(i,"value",i,"isEnabled",(l,a)=>l&&a),r.bind("isEnabled").to(i),this.listenTo(r,"execute",()=>{t.execute("ckboxImageEdit"),t.editing.view.focus()}),r})}}class cH extends F{static get pluginName(){return"CKBoxImageEdit"}static get isOfficialPlugin(){return!0}static get requires(){return[lH,aH]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class kh extends Qr{constructor(e){super(e);p(this,"domEventType",["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"]);const i=this.document;this.listenTo(i,"paste",n("clipboardInput"),{priority:"low"}),this.listenTo(i,"drop",n("clipboardInput"),{priority:"low"}),this.listenTo(i,"dragover",n("dragging"),{priority:"low"});function n(r){return(o,l)=>{l.preventDefault();const a=l.dropRange?[l.dropRange]:null,c=new Vr(i,r);i.fire(c,{dataTransfer:l.dataTransfer,method:o.name,targetRanges:a,target:l.target,domEvent:l.domEvent}),c.stop.called&&l.stopPropagation()}}}onDomEvent(e){const i="clipboardData"in e?e.clipboardData:e.dataTransfer,n=e.type=="drop"||e.type=="paste",r={dataTransfer:new NA(i,{cacheFiles:n})};if(e.type=="drop"||e.type=="dragover"){const o=bA(e);r.dropRange=o&&this.view.domConverter.domRangeToView(o)}this.fire(e.type,e,r)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function uH(s){return s=s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(s.includes("</p><p>")||s.includes("<br>"))&&(s=`<p>${s}</p>`),s}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function hH(s){return s.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>e.length==1?" ":e).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const k2=["figcaption","li"],S2=["ol","ul"];function EI(s,t){if(t.is("$text")||t.is("$textProxy"))return t.data;if(t.is("element","img")&&t.hasAttribute("alt"))return t.getAttribute("alt");if(t.is("element","br"))return`
`;let e="",i=null;for(const n of t.getChildren())e+=dH(n,i)+EI(s,n),i=n;if(t.is("rawElement")){const n=document.createElement("div");t.render(n,s),e+=AI(n)}return e}function AI(s){let t="";if(s.nodeType===Node.TEXT_NODE)return s.textContent;if(s.tagName==="BR")return`
`;for(const e of s.childNodes)t+=AI(e);return t}function dH(s,t){return t?s.is("element","li")&&!s.isEmpty&&s.getChild(0).is("containerElement")||S2.includes(s.name)&&S2.includes(t.name)?`

`:!s.is("containerElement")&&!t.is("containerElement")?"":k2.includes(s.name)||k2.includes(t.name)?`
`:s.is("element")&&s.getCustomProperty("dataPipeline:transparentRendering")||t.is("element")&&t.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}class eh extends F{constructor(){super(...arguments);p(this,"_markersToCopy",new Map)}static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(e,i){this._markersToCopy.set(e,i)}_copySelectedFragmentWithMarkers(e,i,n=r=>r.model.getSelectedContent(r.model.document.selection)){return this.editor.model.change(r=>{const o=r.model.document.selection;r.setSelection(i);const l=this._insertFakeMarkersIntoSelection(r,r.model.document.selection,e),a=n(r),c=this._removeFakeMarkersInsideElement(r,a);for(const[h,f]of Object.entries(l)){c[h]||(c[h]=r.createRangeIn(a));for(const m of f)r.remove(m)}a.markers.clear();for(const[h,f]of Object.entries(c))a.markers.set(h,f);return r.setSelection(o),a})}_pasteMarkersIntoTransformedElement(e,i){const n=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(r=>{const o=this._insertFakeMarkersElements(r,n),l=i(r),a=this._removeFakeMarkersInsideElement(r,l);for(const c of Object.values(o).flat())r.remove(c);for(const[c,h]of Object.entries(a))r.model.markers.has(c)||r.addMarker(c,{usingOperation:!0,affectsData:!0,range:h});return l})}_pasteFragmentWithMarkers(e){const i=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(const n of i)e.markers.set(n.name,n.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,i,n={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const r=this._markersToCopy.get(e);this._markersToCopy.set(e,n),i(),r?this._markersToCopy.set(e,r):this._markersToCopy.delete(e)}_isMarkerCopyable(e,i){const n=this._getMarkerClipboardConfig(e);if(!n)return!1;if(!i)return!0;const{allowedActions:r}=n;return r==="all"||r.includes(i)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){const[i]=e.split(":");return this._markersToCopy.get(i)||null}_insertFakeMarkersIntoSelection(e,i,n){const r=this._getCopyableMarkersFromSelection(e,i,n);return this._insertFakeMarkersElements(e,r)}_getCopyableMarkersFromSelection(e,i,n){const r=Array.from(i.getRanges()),o=new Set(r.flatMap(a=>Array.from(e.model.markers.getMarkersIntersectingRange(a)))),l=a=>{if(!this._isMarkerCopyable(a.name,n))return!1;const{copyPartiallySelected:h}=this._getMarkerClipboardConfig(a.name);if(!h){const f=a.getRange();return r.some(m=>m.containsRange(f,!0))}return!0};return Array.from(o).filter(l).map(a=>({name:n==="dragstart"?this._getUniqueMarkerName(a.name):a.name,range:a.getRange()}))}_getPasteMarkersFromRangeMap(e,i=null){const{model:n}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([o,l])=>{if(!this._hasMarkerConfiguration(o))return[{name:o,range:l}];if(this._isMarkerCopyable(o,i)){const a=this._getMarkerClipboardConfig(o),c=n.markers.has(o)&&n.markers.get(o).getRange().root.rootName==="$graveyard";return(a.duplicateOnPaste||c)&&(o=this._getUniqueMarkerName(o)),[{name:o,range:l}]}return[]})}_insertFakeMarkersElements(e,i){const n={},r=i.flatMap(o=>{const{start:l,end:a}=o.range;return[{position:l,marker:o,type:"start"},{position:a,marker:o,type:"end"}]}).sort(({position:o},{position:l})=>o.isBefore(l)?1:-1);for(const{position:o,marker:l,type:a}of r){const c=e.createElement("$marker",{"data-name":l.name,"data-type":a});n[l.name]||(n[l.name]=[]),n[l.name].push(c),e.insert(c,o)}return n}_removeFakeMarkersInsideElement(e,i){const r=this._getAllFakeMarkersFromElement(e,i).reduce((o,l)=>{const a=l.markerElement&&e.createPositionBefore(l.markerElement);let c=o[l.name],h=!1;return c!=null&&c.start&&(c!=null&&c.end)&&(this._getMarkerClipboardConfig(l.name).duplicateOnPaste?o[this._getUniqueMarkerName(l.name)]=o[l.name]:h=!0,c=null),h||(o[l.name]={...c,[l.type]:a}),l.markerElement&&e.remove(l.markerElement),o},{});return c$(r,o=>new G(o.start||e.createPositionFromPath(i,[0]),o.end||e.createPositionAt(i,"end")))}_getAllFakeMarkersFromElement(e,i){const n=Array.from(e.createRangeIn(i)).flatMap(({item:l})=>{if(!l.is("element","$marker"))return[];const a=l.getAttribute("data-name"),c=l.getAttribute("data-type");return[{markerElement:l,name:a,type:c}]}),r=[],o=[];for(const l of n)l.type==="end"&&(n.some(c=>c.name===l.name&&c.type==="start")||r.push({markerElement:null,name:l.name,type:"start"})),l.type==="start"&&(n.some(c=>c.name===l.name&&c.type==="end")||o.unshift({markerElement:null,name:l.name,type:"end"}));return[...r,...n,...o]}_getUniqueMarkerName(e){const i=e.split(":"),n=ii().substring(1,6);return i.length===3?`${i.slice(0,2).join(":")}:${n}`:`${i.join(":")}:${n}`}}class vn extends F{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[eh]}init(){this.editor.editing.view.addObserver(kh),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(t,e,i){const n=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:i==="cut"},()=>{const r=n._copySelectedFragmentWithMarkers(i,e);this.fire("outputTransformation",{dataTransfer:t,content:r,method:i})})}_setupPasteDrop(){const t=this.editor,e=t.model,i=t.editing.view,n=i.document,r=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(n,"clipboardInput",(o,l)=>{l.method=="paste"&&!t.model.canEditAt(t.model.document.selection)&&o.stop()},{priority:"highest"}),this.listenTo(n,"clipboardInput",(o,l)=>{const a=l.dataTransfer;let c;if(l.content)c=l.content;else{let m="";a.getData("text/html")?m=hH(a.getData("text/html")):a.getData("text/plain")&&(m=uH(a.getData("text/plain"))),c=this.editor.data.htmlProcessor.toView(m)}const h=new Vr(this,"inputTransformation"),f=a.getData("application/ckeditor5-editor-id")||null;this.fire(h,{content:c,dataTransfer:a,sourceEditorId:f,targetRanges:l.targetRanges,method:l.method}),h.stop.called&&o.stop(),i.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(o,l)=>{if(l.content.isEmpty)return;const c=this.editor.data.toModel(l.content,"$clipboardHolder");c.childCount!=0&&(o.stop(),e.change(()=>{this.fire("contentInsertion",{content:c,method:l.method,sourceEditorId:l.sourceEditorId,dataTransfer:l.dataTransfer,targetRanges:l.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(o,l)=>{l.resultRange=r._pasteFragmentWithMarkers(l.content)},{priority:"low"})}_setupCopyCut(){const t=this.editor,e=t.model.document,n=t.editing.view.document,r=(o,l)=>{const a=l.dataTransfer;l.preventDefault(),this._fireOutputTransformationEvent(a,e.selection,o.name)};this.listenTo(n,"copy",r,{priority:"low"}),this.listenTo(n,"cut",(o,l)=>{t.model.canEditAt(t.model.document.selection)?r(o,l):l.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(o,l)=>{const a=t.data.toView(l.content,{isClipboardPipeline:!0});n.fire("clipboardOutput",{dataTransfer:l.dataTransfer,content:a,method:l.method})},{priority:"low"}),this.listenTo(n,"clipboardOutput",(o,l)=>{l.content.isEmpty||(l.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(l.content)),l.dataTransfer.setData("text/plain",EI(t.data.htmlProcessor.domConverter,l.content)),l.dataTransfer.setData("application/ckeditor5-editor-id",this.editor.id)),l.method=="cut"&&t.model.deleteContent(e.selection)},{priority:"low"})}}const ub=Oc("px");let fH=class extends he{constructor(){super();const t=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",t.if("isVisible","ck-hidden",e=>!e)],style:{left:t.to("left",e=>ub(e)),top:t.to("top",e=>ub(e)),width:t.to("width",e=>ub(e))}}})}};class Zf extends F{constructor(){super(...arguments);p(this,"removeDropMarkerDelayed",ap(()=>this.removeDropMarker(),40));p(this,"_updateDropMarkerThrottled",tc(e=>this._updateDropMarker(e),40));p(this,"_reconvertMarkerThrottled",tc(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0));p(this,"_dropTargetLineView",new fH);p(this,"_domEmitter",new(Zi()));p(this,"_scrollables",new Map)}static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,i,n,r,o,l){this.removeDropMarkerDelayed.cancel();const a=C2(this.editor,e,i,n,r,o,l);/* istanbul ignore next -- @preserve */if(a){if(l&&l.containsRange(a))return this.removeDropMarker();this._updateDropMarkerThrottled(a)}}getFinalDropRange(e,i,n,r,o,l){const a=C2(this.editor,e,i,n,r,o,l);return this.removeDropMarker(),a}removeDropMarker(){const e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(i=>{i.removeMarker("drop-target")})}_setupDropMarker(){const e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(i,{writer:n})=>{if(e.model.schema.checkChild(i.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(n);i.markerRange.isCollapsed?this._updateDropTargetLine(i.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){const i=this.editor,n=i.model.markers;i.model.change(r=>{n.has("drop-target")?n.get("drop-target").getRange().isEqual(e)||r.updateMarker("drop-target",{range:e}):r.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(i){const n=this.toDomElement(i);return n.append("⁠",i.createElement("span"),"⁠"),n})}_updateDropTargetLine(e){const i=this.editor.editing,n=e.start.nodeBefore,r=e.start.nodeAfter,o=e.start.parent,l=n?i.mapper.toViewElement(n):null,a=l?i.view.domConverter.mapViewToDom(l):null,c=r?i.mapper.toViewElement(r):null,h=c?i.view.domConverter.mapViewToDom(c):null,f=i.mapper.toViewElement(o);if(!f)return;const m=i.view.domConverter.mapViewToDom(f),w=this._getScrollableRect(f),{scrollX:O,scrollY:v}=ue.window,k=a?new Me(a):null,C=h?new Me(h):null,P=new Me(m).excludeScrollbarsAndBorders(),V=k?k.bottom:P.top,Q=C?C.top:P.bottom,D=ue.window.getComputedStyle(m),q=V<=Q?(V+Q)/2:Q;if(w.top<q&&q<w.bottom){const $=P.left+parseFloat(D.paddingLeft),_=P.right-parseFloat(D.paddingRight),R=Math.max($+O,w.left),U=Math.min(_+O,w.right);this._dropTargetLineView.set({isVisible:!0,left:R,top:q+v,width:U-R})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){const i=e.root.rootName;let n;if(this._scrollables.has(i))n=this._scrollables.get(i).domElement;else{const r=this.editor.editing.view.domConverter.mapViewToDom(e);n=gH(r),this._domEmitter.listenTo(n,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const o=new wx(n,this._reconvertMarkerThrottled);this._scrollables.set(i,{domElement:n,resizeObserver:o})}return new Me(n).excludeScrollbarsAndBorders()}}function C2(s,t,e,i,n,r,o){const l=s.model,a=s.editing.mapper;let h=P2(s,t);for(;h;){if(!r){if(l.schema.checkChild(h,"$text")){if(e){const f=e[0].start,m=a.toModelPosition(f);if(!o||Array.from(o.getItems({shallow:!0})).every(O=>l.schema.checkChild(m,O))){if(l.schema.checkChild(m,"$text"))return l.createRange(m);if(f)return Hf(s,P2(s,f.parent),i,n)}}}else if(l.schema.isInline(h))return Hf(s,h,i,n)}if(l.schema.isBlock(h))return Hf(s,h,i,n);if(l.schema.checkChild(h,"$block")){const f=Array.from(h.getChildren()).filter(O=>O.is("element")&&!mH(s,O));let m=0,w=f.length;if(w==0)return l.createRange(l.createPositionAt(h,"end"));for(;m<w-1;){const O=Math.floor((m+w)/2);II(s,f[O],i,n)=="before"?w=O:m=O}return Hf(s,f[m],i,n)}h=h.parent}return null}function mH(s,t){const e=s.editing.mapper,i=s.editing.view.domConverter,n=e.toViewElement(t);if(!n)return!0;const r=i.mapViewToDom(n);return ue.window.getComputedStyle(r).float!="none"}function Hf(s,t,e,i){const n=s.model;return n.createRange(n.createPositionAt(t,II(s,t,e,i)))}function II(s,t,e,i){const n=s.editing.mapper,r=s.editing.view.domConverter,o=n.toViewElement(t),l=r.mapViewToDom(o),a=new Me(l);return s.model.schema.isInline(t)?e<(a.left+a.right)/2?"before":"after":i<(a.top+a.bottom)/2?"before":"after"}function P2(s,t){const e=s.editing.mapper,i=s.editing.view,n=e.toModelElement(t);if(n)return n;const r=i.createPositionBefore(t),o=e.findMappedViewAncestor(r);return e.toModelElement(o)}function gH(s){let t=s;do{t=t.parentElement;const e=ue.window.getComputedStyle(t).overflowY;if(e=="auto"||e=="scroll")break}while(t.tagName!="BODY");return t}class pH extends F{constructor(){super(...arguments);p(this,"_isBlockDragging",!1);p(this,"_domEmitter",new(Zi()))}static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(this.listenTo(e,"change:isReadOnly",(i,n,r)=>{r?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),Ie.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){const n=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(n,"dragstart",(r,o)=>this._handleBlockDragStart(o)),this._domEmitter.listenTo(ue.document,"dragover",(r,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(ue.document,"drop",(r,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(ue.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&n.setAttribute("draggable","true"),this.on("change:isEnabled",(r,o,l)=>{n.setAttribute("draggable",l?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;const i=this.editor.model,n=i.document.selection,r=this.editor.editing.view,o=Array.from(n.getSelectedBlocks()),l=i.createRange(i.createPositionBefore(o[0]),i.createPositionAfter(o[o.length-1]));i.change(a=>a.setSelection(l)),this._isBlockDragging=!0,r.focus(),r.getObserver(kh).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;const i=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),n=e.clientY,r=document.elementFromPoint(i,n),o=this.editor.editing.view;!r||!r.closest(".ck-editor__editable")||o.getObserver(kh).onDomEvent({...e,type:e.type,dataTransfer:e.dataTransfer,target:r,clientX:i,clientY:n,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class wH extends F{constructor(){super(...arguments);p(this,"_draggedRange");p(this,"_draggingUid");p(this,"_draggableElement");p(this,"_clearDraggableAttributesDelayed",ap(()=>this._clearDraggableAttributes(),40));p(this,"_blockMode",!1);p(this,"_domEmitter",new(Zi()));p(this,"_previewContainer")}static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[vn,Sc,Zf,pH]}init(){const e=this.editor,i=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,i.addObserver(kh),i.addObserver(hp),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(n,r,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(n,r,o)=>{o||this._finalizeDragging(!1)}),Ie.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,i=e.model,n=e.editing.view,r=n.document,o=e.plugins.get(Zf);this.listenTo(r,"dragstart",(l,a)=>{var v;if((v=a.target)!=null&&v.is("editableElement")){a.preventDefault();return}if(this._prepareDraggedRange(a.target),!this._draggedRange){a.preventDefault();return}this._draggingUid=ii(),a.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",a.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const c=i.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(a.dataTransfer,c,"dragstart");const{dataTransfer:f,domTarget:m,domEvent:w}=a,{clientX:O}=w;this._updatePreview({dataTransfer:f,domTarget:m,clientX:O}),a.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(r,"dragend",(l,a)=>{this._finalizeDragging(!a.dataTransfer.isCanceled&&a.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(ue.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(r,"dragenter",()=>{this.isEnabled&&n.focus()}),this.listenTo(r,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(r,"dragging",(l,a)=>{if(!this.isEnabled){a.dataTransfer.dropEffect="none";return}const{clientX:c,clientY:h}=a.domEvent;o.updateDropMarker(a.target,a.targetRanges,c,h,this._blockMode,this._draggedRange),this._draggedRange||(a.dataTransfer.dropEffect="copy"),Ie.isGecko||(a.dataTransfer.effectAllowed=="copy"?a.dataTransfer.dropEffect="copy":["all","copyMove"].includes(a.dataTransfer.effectAllowed)&&(a.dataTransfer.dropEffect="move")),l.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,n=e.editing.view.document,r=e.plugins.get(Zf);this.listenTo(n,"clipboardInput",(o,l)=>{if(l.method!="drop")return;const{clientX:a,clientY:c}=l.domEvent,h=r.getFinalDropRange(l.target,l.targetRanges,a,c,this._blockMode,this._draggedRange);if(!h){this._finalizeDragging(!1),o.stop();return}if(this._draggedRange&&this._draggingUid!=l.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),T2(l.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(h,!0)){this._finalizeDragging(!1),o.stop();return}l.targetRanges=[e.editing.mapper.toViewRange(h)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(vn);e.on("contentInsertion",(i,n)=>{if(!this.isEnabled||n.method!=="drop")return;const r=n.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(r))},{priority:"high"}),e.on("contentInsertion",(i,n)=>{if(!this.isEnabled||n.method!=="drop")return;const r=T2(n.dataTransfer)=="move",o=!n.resultRange||!n.resultRange.isCollapsed;this._finalizeDragging(o&&r)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,i=e.editing.view,n=i.document;this.listenTo(n,"mousedown",(r,o)=>{if(Ie.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let l=E2(o.target);if(Ie.isBlink&&!e.isReadOnly&&!l&&!n.selection.isCollapsed){const a=n.selection.getSelectedElement();(!a||!Wt(a))&&(l=n.selection.editableElement)}l&&(i.change(a=>{a.setAttribute("draggable","true",l)}),this._draggableElement=e.editing.mapper.toModelElement(l))}),this.listenTo(n,"mouseup",()=>{Ie.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(i=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&i.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){const i=this.editor,n=i.model;i.plugins.get(Zf).removeDropMarker(),this._clearDraggableAttributes(),i.plugins.has("WidgetToolbarRepository")&&i.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&n.change(o=>{const l=n.createSelection(this._draggedRange);n.deleteContent(l,{doNotAutoparagraph:!0});const a=l.getFirstPosition().parent;a.isEmpty&&!n.schema.checkChild(a,"$text")&&n.schema.checkChild(a,"paragraph")&&o.insertElement("paragraph",a,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){const i=this.editor,n=i.model,r=n.document.selection,o=e?E2(e):null;if(o){const h=i.editing.mapper.toModelElement(o);this._draggedRange=pn.fromRange(n.createRangeOn(h)),this._blockMode=n.schema.isBlock(h),i.plugins.has("WidgetToolbarRepository")&&i.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(r.isCollapsed&&!r.getFirstPosition().parent.isEmpty)return;const l=Array.from(r.getSelectedBlocks()),a=r.getFirstRange();if(l.length==0){this._draggedRange=pn.fromRange(a);return}const c=RI(n,l);if(l.length>1)this._draggedRange=pn.fromRange(c),this._blockMode=!0;else if(l.length==1){const h=a.start.isTouching(c.start)&&a.end.isTouching(c.end);this._draggedRange=pn.fromRange(h?c:a),this._blockMode=h}n.change(h=>h.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:i,clientX:n}){const r=this.editor.editing.view,o=r.document.selection.editableElement,l=r.domConverter.mapViewToDom(o),a=ue.window.getComputedStyle(l);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=wi(ue.document,"div",{style:"position: fixed; left: -999999px;"}),ue.document.body.appendChild(this._previewContainer));const c=new Me(l);if(l.contains(i))return;const h=parseFloat(a.paddingLeft),f=wi(ue.document,"div");f.className="ck ck-content",f.style.width=a.width,f.style.paddingLeft=`${c.left-n+h}px`,Ie.isiOS&&(f.style.backgroundColor="white"),r.domConverter.setContentOf(f,e.getData("text/html")),e.setDragImage(f,0,0),this._previewContainer.appendChild(f)}}function T2(s){return Ie.isGecko?s.dropEffect:["all","copyMove"].includes(s.effectAllowed)?"move":"copy"}function E2(s){if(s.is("editableElement"))return null;if(s.hasClass("ck-widget__selection-handle"))return s.findAncestor(Wt);if(Wt(s))return s;const t=s.findAncestor(e=>Wt(e)||e.is("editableElement"));return Wt(t)?t:null}function RI(s,t){const e=t[0],i=t[t.length-1],n=e.getCommonAncestor(i),r=s.createPositionBefore(e),o=s.createPositionAfter(i);if(n&&n.is("element")&&!s.schema.isLimit(n)){const l=s.createRangeOn(n),a=r.isTouching(l.start),c=o.isTouching(l.end);if(a&&c)return RI(s,[n])}return s.createRange(r,o)}class bH extends F{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[vn]}init(){const t=this.editor,e=t.model,i=t.editing.view,n=e.document.selection;i.addObserver(kh),t.plugins.get(vn).on("contentInsertion",(r,o)=>{OH(o.content,e)&&e.change(l=>{const a=Array.from(n.getAttributes()).filter(([h])=>e.schema.getAttributeProperties(h).isFormatting);n.isCollapsed||e.deleteContent(n,{doNotAutoparagraph:!0}),a.push(...n.getAttributes());const c=l.createRangeIn(o.content);for(const h of c.getItems())for(const f of a)e.schema.checkAttribute(h,f[0])&&l.setAttribute(f[0],f[1],h)})})}}function OH(s,t){let e=t.createRangeIn(s);if(s.childCount==1){const i=s.getChild(0);i.is("element")&&t.schema.isBlock(i)&&!t.schema.isObject(i)&&!t.schema.isLimit(i)&&(e=t.createRangeIn(i))}for(const i of e.getItems())if(!t.schema.isInline(i)||Array.from(i.getAttributeKeys()).find(r=>t.schema.getAttributeProperties(r).isFormatting))return!1;return!0}class VI extends F{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[eh,vn,wH,bH]}init(){const t=this.editor,e=this.editor.t;t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Copy selected content"),keystroke:"CTRL+C"},{label:e("Paste content"),keystroke:"CTRL+V"},{label:e("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const xH={autoRefresh:!0},A2=36e5,yH=5e3;class ty extends ct(){constructor(e,i={}){super();p(this,"_refresh");p(this,"_options");p(this,"_tokenRefreshTimeout");p(this,"_isDestroyed",!1);if(!e)throw new A("token-missing-token-url",this);i.initValue&&this._validateTokenValue(i.initValue),this.set("value",i.initValue),typeof e=="function"?this._refresh=e:this._refresh=()=>vH(e),this._options={...xH,...i}}init(){return new Promise((e,i)=>{if(!this.value){this.refreshToken().then(e).catch(i);return}this._options.autoRefresh&&this._registerRefreshTokenTimeout(),e(this)})}refreshToken(){const e=this._options.autoRefresh;return this._refresh().then(i=>(this._validateTokenValue(i),this.set("value",i),e&&this._registerRefreshTokenTimeout(),this)).catch(i=>{throw We("token-refresh-failed",{autoRefresh:e}),e&&this._registerRefreshTokenTimeout(yH),i})}destroy(){this._isDestroyed=!0,clearTimeout(this._tokenRefreshTimeout)}_validateTokenValue(e){const i=typeof e=="string",n=!/^".*"$/.test(e),r=i&&e.split(".").length===3;if(!(n&&r))throw new A("token-not-in-jwt-format",this)}_registerRefreshTokenTimeout(e){if(clearTimeout(this._tokenRefreshTimeout),this._isDestroyed)return;const i=e||this._getTokenRefreshTimeoutTime();this._tokenRefreshTimeout=setTimeout(()=>{this.refreshToken()},i)}_getTokenRefreshTimeoutTime(){try{const[,e]=this.value.split("."),{exp:i}=JSON.parse(atob(e));return i?Math.floor((i*1e3-Date.now())/2):A2}catch{return A2}}static create(e,i={}){return new ty(e,i).init()}}function vH(s){return new Promise((t,e)=>{const i=new XMLHttpRequest;i.open("GET",s),i.addEventListener("load",()=>{const n=i.status,r=i.response;return n<200||n>299?e(new A("token-cannot-download-new-token",null)):t(r)}),i.addEventListener("error",()=>e(new Error("Network Error"))),i.addEventListener("abort",()=>e(new Error("Abort"))),i.send()})}const M1=/^data:(\S*?);base64,/;class _H extends gt(){constructor(e,i,n){super();p(this,"file");p(this,"xhr");p(this,"_token");p(this,"_apiAddress");if(!e)throw new A("fileuploader-missing-file",null);if(!i)throw new A("fileuploader-missing-token",null);if(!n)throw new A("fileuploader-missing-api-address",null);this.file=SH(e)?kH(e):e,this._token=i,this._apiAddress=n}onProgress(e){return this.on("progress",(i,n)=>e(n)),this}onError(e){return this.once("error",(i,n)=>e(n)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const e=new XMLHttpRequest;e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e}_attachXHRListeners(){const e=this.xhr,i=n=>()=>this.fire("error",n);e.addEventListener("error",i("Network Error")),e.addEventListener("abort",i("Abort"));/* istanbul ignore else -- @preserve */e.upload&&e.upload.addEventListener("progress",n=>{n.lengthComputable&&this.fire("progress",{total:n.total,uploaded:n.loaded})}),e.addEventListener("load",()=>{const n=e.status,r=e.response;if(n<200||n>299)return this.fire("error",r.message||r.error)})}_sendRequest(){const e=new FormData,i=this.xhr;return e.append("file",this.file),new Promise((n,r)=>{i.addEventListener("load",()=>{const o=i.status,l=i.response;return o<200||o>299?l.message?r(new A("fileuploader-uploading-data-failed",this,{message:l.message})):r(l.error):n(l)}),i.addEventListener("error",()=>r(new Error("Network Error"))),i.addEventListener("abort",()=>r(new Error("Abort"))),i.send(e)})}}function kH(s,t=512){try{const e=s.match(M1)[1],i=atob(s.replace(M1,"")),n=[];for(let r=0;r<i.length;r+=t){const o=i.slice(r,r+t),l=new Array(o.length);for(let a=0;a<o.length;a++)l[a]=o.charCodeAt(a);n.push(new Uint8Array(l))}return new Blob(n,{type:e})}catch{throw new A("fileuploader-decoding-image-data-error",null)}}function SH(s){var t;return typeof s!="string"?!1:!!((t=s.match(M1))!=null&&t.length)}class CH{constructor(t,e){p(this,"_token");p(this,"_apiAddress");if(!t)throw new A("uploadgateway-missing-token",null);if(!e)throw new A("uploadgateway-missing-api-address",null);this._token=t,this._apiAddress=e}upload(t){return new _H(t,this._token,this._apiAddress)}}class PH extends dp{static get pluginName(){return"CloudServicesCore"}static get isOfficialPlugin(){return!0}createToken(t,e){return new ty(t,e)}createUploadGateway(t,e){return new CH(t,e)}}class TH extends dp{constructor(){super(...arguments);p(this,"tokenUrl");p(this,"uploadUrl");p(this,"webSocketUrl");p(this,"bundleVersion");p(this,"token",null);p(this,"_tokens",new Map)}static get pluginName(){return"CloudServices"}static get isOfficialPlugin(){return!0}static get requires(){return[PH]}async init(){const i=this.context.config.get("cloudServices")||{};for(const[o,l]of Object.entries(i))this[o]=l;if(!this.tokenUrl){this.token=null;return}const r=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl);try{this.token=await r.init(),this._tokens.set(this.tokenUrl,this.token)}catch(o){throw r.destroy(),o}}async registerTokenUrl(e){if(this._tokens.has(e))return this.getTokenFor(e);const n=await this.context.plugins.get("CloudServicesCore").createToken(e).init();return this._tokens.set(e,n),n}getTokenFor(e){const i=this._tokens.get(e);if(!i)throw new A("cloudservices-token-not-registered",this);return i}destroy(){super.destroy();for(const e of this._tokens.values())e.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function bg(s){const t=s.t,e=s.config.get("codeBlock.languages");for(const i of e)i.label==="Plain text"&&(i.label=t("Plain text")),i.class===void 0&&(i.class=`language-${i.language}`);return e}function Og(s,t,e){const i={};for(const n of s)if(t==="class"){const r=n[t].split(" ").shift();i[r]=n[e]}else i[n[t]]=n[e];return i}function iy(s){return s.data.match(/^(\s*)/)[0]}function EH(s,t){const e=s.createDocumentFragment(),i=t.split(`
`),n=i.reduce((r,o,l)=>(r.push(o),l<i.length-1&&r.push(s.createElement("br")),r),[]);return s.appendChild(n,e),e}function L1(s){const t=s.document.selection,e=[];if(t.isCollapsed)return[t.anchor];const i=t.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(const{item:n}of i){let r=n.is("$textProxy")?n.textNode:n;const o=r.parent;if(!o.is("element","codeBlock")||r.is("element","softBreak"))continue;for(;r.previousSibling&&!r.previousSibling.is("element","softBreak");)r=r.previousSibling;const l=r.is("$text")?r.startOffset+iy(r).length:r.startOffset,a=s.createPositionAt(o,l);e.every(c=>!c.isEqual(a))&&e.push(a)}return e}function MI(s){const t=Nt(s.getSelectedBlocks());return!!t&&t.is("element","codeBlock")}function I2(s,t){return t.is("rootElement")||s.isLimit(t)?!1:s.checkChild(t.parent,"codeBlock")}function R2(s,t,e,i){const n=Og(t,"language","label"),r=e.getAttribute("language");if(r in n){const o=n[r];return s(i==="enter"?"Entering %0 code snippet":"Leaving %0 code snippet",o)}return s(i==="enter"?"Entering code snippet":"Leaving code snippet")}function LI(s,t){for(s.textNode&&(s=t.createPositionBefore(s.textNode));s.nodeBefore&&!s.nodeBefore.is("element","softBreak");)s=t.createPositionBefore(s.nodeBefore);const e=s.nodeAfter;return e&&e.is("$text")?e:null}class AH extends Le{constructor(e){super(e);p(this,"_lastLanguage");this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const i=this.editor,n=i.model,r=n.document.selection,l=bg(i)[0],a=Array.from(r.getSelectedBlocks()),c=e.forceValue==null?!this.value:e.forceValue,h=IH(e,this._lastLanguage,l.language);n.change(f=>{c?this._applyCodeBlock(f,a,h):this._removeCodeBlock(f,a)})}_getValue(){const e=this.editor.model.document.selection,i=Nt(e.getSelectedBlocks());return!!(i!=null&&i.is("element","codeBlock"))?i.getAttribute("language"):!1}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,i=this.editor.model.schema,n=Nt(e.getSelectedBlocks());return n?I2(i,n):!1}_applyCodeBlock(e,i,n){this._lastLanguage=n;const r=this.editor.model.schema,o=i.filter(l=>I2(r,l));for(const l of o)e.rename(l,"codeBlock"),e.setAttribute("language",n,l),r.removeDisallowedAttributes([l],e),Array.from(l.getChildren()).filter(a=>!r.checkChild(l,a)).forEach(a=>e.remove(a));o.reverse().forEach((l,a)=>{const c=o[a+1];l.previousSibling===c&&(e.appendElement("softBreak",c),e.merge(e.createPositionBefore(l)))})}_removeCodeBlock(e,i){const n=i.filter(r=>r.is("element","codeBlock"));for(const r of n){const o=e.createRangeOn(r);for(const l of Array.from(o.getItems()).reverse())if(l.is("element","softBreak")&&l.parent.is("element","codeBlock")){const{position:a}=e.split(e.createPositionBefore(l)),c=a.nodeAfter;e.rename(c,"paragraph"),e.removeAttribute("language",c),e.remove(l)}e.rename(r,"paragraph"),e.removeAttribute("language",r)}}}function IH(s,t,e){return s.language?s.language:s.usePreviousLanguageChoice&&t?t:e}class RH extends Le{constructor(e){super(e);p(this,"_indentSequence");this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const i=this.editor.model;i.change(n=>{const r=L1(i);for(const o of r){const l=n.createText(this._indentSequence);i.insertContent(l,o)}})}_checkEnabled(){return this._indentSequence?MI(this.editor.model.document.selection):!1}}class VH extends Le{constructor(e){super(e);p(this,"_indentSequence");this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const i=this.editor.model;i.change(()=>{const n=L1(i);for(const r of n){const o=V2(i,r,this._indentSequence);o&&i.deleteContent(i.createSelection(o))}})}_checkEnabled(){if(!this._indentSequence)return!1;const e=this.editor.model;return MI(e.document.selection)?L1(e).some(i=>V2(e,i,this._indentSequence)):!1}}function V2(s,t,e){const i=LI(t,s);if(!i)return null;const n=iy(i),r=n.lastIndexOf(e);if(r+e.length!==n.length||r===-1)return null;const{parent:o,startOffset:l}=i;return s.createRange(s.createPositionAt(o,l+r),s.createPositionAt(o,l+r+e.length))}function M2(s,t,e=!1){const i=Og(t,"language","class"),n=Og(t,"language","label");return(r,o,l)=>{const{writer:a,mapper:c,consumable:h}=l;if(!h.consume(o.item,"insert"))return;const f=o.item.getAttribute("language"),m=c.toViewPosition(s.createPositionBefore(o.item)),w={};e&&(w["data-language"]=n[f],w.spellcheck="false");const O=i[f]?{class:i[f]}:void 0,v=a.createContainerElement("code",O),k=a.createContainerElement("pre",w,v);a.insert(m,k),c.bindElements(o.item,v)}}function MH(s){return(t,e,i)=>{if(e.item.parent.name!=="codeBlock")return;const{writer:n,mapper:r,consumable:o}=i;if(!o.consume(e.item,"insert"))return;const l=r.toViewPosition(s.createPositionBefore(e.item));n.insert(l,n.createText(`
`))}}function LH(s,t){const e=Og(t,"class","language"),i=t[0].language;return(n,r,o)=>{const l=r.viewItem,a=l.parent;if(!a||!a.is("element","pre")||r.modelCursor.findAncestor("codeBlock"))return;const{consumable:c,writer:h}=o;if(!c.test(l,{name:!0}))return;const f=h.createElement("codeBlock"),m=[...l.getClassNames()];m.length||m.push("");for(const w of m){const O=e[w];if(O){h.setAttribute("language",O,f);break}}f.hasAttribute("language")||h.setAttribute("language",i,f),o.convertChildren(l,f),o.safeInsert(f,r.modelCursor)&&(c.consume(l,{name:!0}),o.updateConversionResult(f,r))}}function BH(){return(s,t,{consumable:e,writer:i})=>{let n=t.modelCursor;if(!e.test(t.viewItem)||!n.findAncestor("codeBlock"))return;e.consume(t.viewItem);const o=t.viewItem.data.split(`
`).map(a=>i.createText(a)),l=o[o.length-1];for(const a of o)if(i.insert(a,n),n=n.getShiftedBy(a.offsetSize),a!==l){const c=i.createElement("softBreak");i.insert(c,n),n=i.createPositionAfter(c)}t.modelRange=i.createRange(t.modelCursor,n),t.modelCursor=n}}function $H(){return(s,t,{consumable:e})=>{const i=t.viewItem;if(i.findAncestor("pre"))return;const n=Array.from(i.getChildren()),r=n.find(o=>o.is("element","code"));if(r)for(const o of n)o===r||!o.is("$text")||e.consume(o,{name:!0})}}const BI="paragraph";class QH extends F{static get pluginName(){return"CodeBlockEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[yI]}constructor(t){super(t),t.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"go",label:"Go"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:"	"})}init(){const t=this.editor,e=t.model.schema,i=t.model,n=t.editing.view,r=bg(t);t.commands.add("codeBlock",new AH(t)),t.commands.add("indentCodeBlock",new RH(t)),t.commands.add("outdentCodeBlock",new VH(t)),this.listenTo(n.document,"tab",(o,l)=>{const a=l.shiftKey?"outdentCodeBlock":"indentCodeBlock";t.commands.get(a).isEnabled&&(t.execute(a),l.stopPropagation(),l.preventDefault(),o.stop())},{context:"pre"}),e.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",disallowChildren:"$inlineObject",allowAttributes:["language"],allowAttributesOf:"$listItem",isBlock:!0}),e.addAttributeCheck((o,l)=>{const a=o.getItem(o.length-2);if(e.getAttributeProperties(l).isFormatting&&a&&a.name=="codeBlock")return!1}),t.editing.downcastDispatcher.on("insert:codeBlock",M2(i,r,!0)),t.data.downcastDispatcher.on("insert:codeBlock",M2(i,r)),t.data.downcastDispatcher.on("insert:softBreak",MH(i),{priority:"high"}),t.data.upcastDispatcher.on("element:code",LH(n,r)),t.data.upcastDispatcher.on("text",BH()),t.data.upcastDispatcher.on("element:pre",$H(),{priority:"high"}),this.listenTo(t.editing.view.document,"clipboardInput",(o,l)=>{let a=i.createRange(i.document.selection.anchor);if(l.targetRanges&&(a=t.editing.mapper.toModelRange(l.targetRanges[0])),!a.start.parent.is("element","codeBlock"))return;const c=l.dataTransfer.getData("text/plain"),h=new zn(t.editing.view.document);l.content=EH(h,c)}),t.plugins.has("ClipboardPipeline")&&t.plugins.get(vn).on("contentInsertion",(o,l)=>{const a=t.model,c=a.document.selection;c.anchor.parent.is("element","codeBlock")&&a.change(h=>{const f=h.createRangeIn(l.content);for(const m of[...f.getItems()])m.is("node")&&!e.checkChild(c.anchor,m)&&h.remove(m)})}),this.listenTo(i,"getSelectedContent",(o,[l])=>{const a=l.anchor;l.isCollapsed||!a.parent.is("element","codeBlock")||!a.hasSameParentAs(l.focus)||i.change(c=>{const h=o.return;if(a.parent.is("element")&&(h.childCount>1||l.containsEntireContent(a.parent))){const m=c.createElement("codeBlock",a.parent.getAttributes());c.append(h,m);const w=c.createDocumentFragment();c.append(m,w),o.return=w;return}const f=h.getChild(0);e.checkAttribute(f,"code")&&c.setAttribute("code",!0,f)})})}afterInit(){const t=this.editor,e=t.commands,i=e.get("indent"),n=e.get("outdent");i&&i.registerChildCommand(e.get("indentCodeBlock"),{priority:"highest"}),n&&n.registerChildCommand(e.get("outdentCodeBlock")),this.listenTo(t.editing.view.document,"enter",(r,o)=>{t.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(!NH(t,o.isSoft)&&!FH(t,o.isSoft)&&DH(t),o.preventDefault(),r.stop())},{context:"pre"}),this._initAriaAnnouncements()}_initAriaAnnouncements(){const{model:t,ui:e,t:i}=this.editor,n=bg(this.editor);let r=null;t.document.selection.on("change:range",()=>{const o=t.document.selection.focus.parent;!e||r===o||!o.is("element")||(r&&r.is("element","codeBlock")&&e.ariaLiveAnnouncer.announce(R2(i,n,r,"leave")),o.is("element","codeBlock")&&e.ariaLiveAnnouncer.announce(R2(i,n,o,"enter")),r=o)})}}function DH(s){const t=s.model,e=t.document,i=e.selection.getLastPosition();let n;const r=LI(i,t);r&&r.is("$text")&&(n=iy(r)),s.model.change(o=>{s.execute("shiftEnter"),n&&o.insertText(n,e.selection.anchor)})}function NH(s,t){const i=s.model.document,n=s.editing.view,r=i.selection.getLastPosition(),o=r.nodeAfter;return t||!i.selection.isCollapsed||!r.isAtStart||!al(o)?!1:(s.model.change(l=>{s.execute("enter");const a=i.selection.anchor.parent.previousSibling;l.rename(a,BI),l.setSelection(a,"in"),s.model.schema.removeDisallowedAttributes([a],l),l.remove(o)}),n.scrollToTheSelection(),!0)}function FH(s,t){const e=s.model,i=e.document,n=s.editing.view,r=i.selection.getLastPosition(),o=r.nodeBefore;let l;if(t||!i.selection.isCollapsed||!r.isAtEnd||!o||!o.previousSibling)return!1;if(al(o)&&al(o.previousSibling))l=e.createRange(e.createPositionBefore(o.previousSibling),e.createPositionAfter(o));else if(hb(o)&&al(o.previousSibling)&&al(o.previousSibling.previousSibling))l=e.createRange(e.createPositionBefore(o.previousSibling.previousSibling),e.createPositionAfter(o));else if(hb(o)&&al(o.previousSibling)&&hb(o.previousSibling.previousSibling)&&o.previousSibling.previousSibling&&al(o.previousSibling.previousSibling.previousSibling))l=e.createRange(e.createPositionBefore(o.previousSibling.previousSibling.previousSibling),e.createPositionAfter(o));else return!1;return s.model.change(a=>{a.remove(l),s.execute("enter");const c=i.selection.anchor.parent;a.rename(c,BI),s.model.schema.removeDisallowedAttributes([c],a)}),n.scrollToTheSelection(),!0}function hb(s){return s&&s.is("$text")&&!s.data.match(/\S/)}function al(s){return s&&s.is("element","softBreak")}class zH extends F{static get pluginName(){return"CodeBlockUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,i=t.ui.componentFactory,n=bg(t),r=this._getLanguageListItemDefinitions(n),o=t.commands.get("codeBlock");i.add("codeBlock",l=>{const a=xn(l,_c),c=a.buttonView,h=e("Insert code block");return c.set({label:h,tooltip:!0,icon:wC,isToggleable:!0}),c.bind("isOn").to(o,"value",f=>!!f),c.on("execute",()=>{t.execute("codeBlock",{usePreviousLanguageChoice:!0}),t.editing.view.focus()}),a.on("execute",f=>{t.execute("codeBlock",{language:f.source._codeBlockLanguage,forceValue:!0}),t.editing.view.focus()}),a.class="ck-code-block-dropdown",a.bind("isEnabled").to(o),Ql(a,r,{role:"menu",ariaLabel:h}),a}),i.add("menuBar:codeBlock",l=>{const a=new nr(l);a.buttonView.set({role:"menuitem",label:e("Code block"),icon:wC}),a.bind("isEnabled").to(o);const c=new _h(l);c.set({ariaLabel:e("Insert code block")});for(const h of r){const f=new id(l,a),m=new ci(l);m.bind(...Object.keys(h.model)).to(h.model),m.set({isToggleable:!0,role:"menuitemcheckbox"}),m.delegate("execute").to(a),m.on("execute",()=>{t.execute("codeBlock",{language:h.model._codeBlockLanguage,forceValue:o.value!=h.model._codeBlockLanguage}),t.editing.view.focus()}),f.children.add(m),c.items.add(f)}return a.panelView.children.add(c),a})}_getLanguageListItemDefinitions(t){const i=this.editor.commands.get("codeBlock"),n=new vi;for(const r of t){const o={type:"button",model:new _l({_codeBlockLanguage:r.language,label:r.label,role:"menuitemradio",withText:!0})};o.model.bind("isOn").to(i,"value",l=>l===o.model._codeBlockLanguage),n.add(o)}return n}}class WH extends F{static get requires(){return[QH,zH]}static get pluginName(){return"CodeBlock"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class UH extends XW{constructor(e,i){super(e);p(this,"view");p(this,"_toolbarConfig");p(this,"_elementReplacer");this.view=i,this._toolbarConfig=eI(e.config.get("toolbar")),this._elementReplacer=new U$,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){const i=this.editor,n=this.view,r=i.editing.view,o=n.editable,l=r.document.getRoot();o.name=l.rootName,n.render();const a=o.element;this.setEditableElement(o.name,a),n.editable.bind("isFocused").to(this.focusTracker),r.attachDomRoot(a),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),n.menuBarView&&this.initMenuBar(n.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const e=this.view,i=this.editor.editing.view;this._elementReplacer.restore(),i.getDomRoot(e.editable.name)&&i.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({visualTop:i})=>i||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){const e=this.editor,i=e.editing.view,n=i.document.getRoot(),r=e.sourceElement;let o;const l=e.config.get("placeholder");l&&(o=typeof l=="string"?l:l[this.view.editable.name]),!o&&r&&r.tagName.toLowerCase()==="textarea"&&(o=r.getAttribute("placeholder")),o&&(n.placeholder=o),Sx({view:i,element:n,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:e}=this.view,i=this.editor.plugins.get("ContextualBalloon");i.on("getPositionOptions",r=>{const o=r.return;if(!o||!e.isSticky||!e.element)return;const l=new Me(e.element).height,a=typeof o.target=="function"?o.target():o.target,c=typeof o.limiter=="function"?o.limiter():o.limiter;if(a&&c&&new Me(a).height>=new Me(c).height-l)return;const h={...o.viewportOffsetConfig},f=(h.top||0)+l;r.return={...o,viewportOffsetConfig:{...h,top:f}}},{priority:"low"});const n=()=>{i.visibleView&&i.updatePosition()};this.listenTo(e,"change:isSticky",n),this.listenTo(this.editor.ui,"change:viewportOffset",n)}_handleScrollToTheSelectionWithStickyPanel(e,i,n){const r=this.view.stickyPanel;if(r.isSticky){const o=new Me(r.element).height;i.viewportOffset.top+=o}else{const o=()=>{this.editor.editing.view.scrollToTheSelection(n)};this.listenTo(r,"change:isSticky",o),setTimeout(()=>{this.stopListening(r,"change:isSticky",o)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const e=this.view.stickyPanel,i=this.editor.plugins.get("Dialog");i.on("show",()=>{const n=i.view;n.on("moveTo",(r,o)=>{if(!e.isSticky||n.wasMoved||n.isModal)return;const l=new Me(e.contentPanelElement);o[1]<l.bottom+xh.defaultOffset&&(o[1]=l.bottom+xh.defaultOffset)},{priority:"high"})},{priority:"low"})}}class ZH extends GW{constructor(e,i,n={}){super(e);p(this,"stickyPanel");p(this,"toolbar");p(this,"editable");this.stickyPanel=new tU(e),this.toolbar=new vl(e,{shouldGroupWhenFull:n.shouldToolbarGroupWhenFull}),n.useMenuBar&&(this.menuBarView=new aU(e)),this.editable=new KW(e,i,void 0,{label:n.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class HH extends S1(Va){constructor(e,i={}){if(!Tm(e)&&i.initialData!==void 0)throw new A("editor-create-initial-data",null);super(i);p(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",qH(e)),Tm(e)&&(this.sourceElement=e),this.model.document.createRoot();const n=!this.config.get("toolbar.shouldNotGroupWhenFull"),r=this.config.get("menuBar"),o=new ZH(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:n,useMenuBar:r.isVisible,label:this.config.get("label")});this.ui=new UH(this,o),nF(this)}static get editorName(){return"ClassicEditor"}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,i={}){return new Promise(n=>{const r=new this(e,i);n(r.initPlugins().then(()=>r.ui.init(Tm(e)?e:null)).then(()=>r.data.init(r.config.get("initialData"))).then(()=>r.fire("ready")).then(()=>r))})}}function qH(s){return Tm(s)?G$(s):s}function Tm(s){return Po(s)}var Em={exports:{}},XH=Em.exports,L2;function jH(){return L2||(L2=1,function(s){((t,e)=>{s.exports?s.exports=e():t.fuzzysort=e()})(XH,t=>{var e=(W,B)=>{if(!W||!B)return ne;var K=O(W);be(B)||(B=w(B));var me=K.bitflags;return(me&B._bitflags)!==me?ne:k(K,B)},i=(W,B,K)=>{if(!W)return K!=null&&K.all?v(B,K):ee;var me=O(W),ge=me.bitflags,pe=me.containsSpace,de=f((K==null?void 0:K.threshold)||0),Qe=(K==null?void 0:K.limit)||Se,Ve=0,He=0,qe=B.length;function _i(kn){Ve<Qe?(fe.add(kn),++Ve):(++He,kn._score>fe.peek()._score&&fe.replaceTop(kn))}if(K!=null&&K.key)for(var ni=K.key,Xe=0;Xe<qe;++Xe){var di=B[Xe],et=xe(di,ni);if(et&&(be(et)||(et=w(et)),(ge&et._bitflags)===ge)){var tt=k(me,et);tt!==ne&&(tt._score<de||(tt.obj=di,_i(tt)))}}else if(K!=null&&K.keys){var qi=K.keys,Ri=qi.length;e:for(var Xe=0;Xe<qe;++Xe){var di=B[Xe];{for(var si=0,je=0;je<Ri;++je){var ni=qi[je],et=xe(di,ni);if(!et){j[je]=M;continue}be(et)||(et=w(et)),j[je]=et,si|=et._bitflags}if((ge&si)!==ge)continue}if(pe)for(let lt=0;lt<me.spaceSearches.length;lt++)Y[lt]=H;for(var je=0;je<Ri;++je){if(et=j[je],et===M){oe[je]=M;continue}if(oe[je]=k(me,et,!1,pe),oe[je]===ne){oe[je]=M;continue}if(pe)for(let dt=0;dt<me.spaceSearches.length;dt++){if(X[dt]>-1e3&&Y[dt]>H){var Jt=(Y[dt]+X[dt])/4;Jt>Y[dt]&&(Y[dt]=Jt)}X[dt]>Y[dt]&&(Y[dt]=X[dt])}}if(pe){for(let lt=0;lt<me.spaceSearches.length;lt++)if(Y[lt]===H)continue e}else{var Ue=!1;for(let lt=0;lt<Ri;lt++)if(oe[lt]._score!==H){Ue=!0;break}if(!Ue)continue}var ki=new a(Ri);for(let lt=0;lt<Ri;lt++)ki[lt]=oe[lt];if(pe){var At=0;for(let lt=0;lt<me.spaceSearches.length;lt++)At+=Y[lt]}else{var At=H;for(let dt=0;dt<Ri;dt++){var tt=ki[dt];if(tt._score>-1e3&&At>H){var Jt=(At+tt._score)/4;Jt>At&&(At=Jt)}tt._score>At&&(At=tt._score)}}if(ki.obj=di,ki._score=At,K!=null&&K.scoreFn){if(At=K.scoreFn(ki),!At)continue;At=f(At),ki._score=At}At<de||_i(ki)}}else for(var Xe=0;Xe<qe;++Xe){var et=B[Xe];if(et&&(be(et)||(et=w(et)),(ge&et._bitflags)===ge)){var tt=k(me,et);tt!==ne&&(tt._score<de||_i(tt))}}if(Ve===0)return ee;for(var bs=new Array(Ve),Xe=Ve-1;Xe>=0;--Xe)bs[Xe]=fe.poll();return bs.total=Ve+He,bs},n=(W,B="<b>",K="</b>")=>{for(var me=typeof B=="function"?B:void 0,ge=W.target,pe=ge.length,de=W.indexes,Qe="",Ve=0,He=0,qe=!1,_i=[],ni=0;ni<pe;++ni){var Xe=ge[ni];if(de[He]===ni){if(++He,qe||(qe=!0,me?(_i.push(Qe),Qe=""):Qe+=B),He===de.length){me?(Qe+=Xe,_i.push(me(Qe,Ve++)),Qe="",_i.push(ge.substr(ni+1))):Qe+=Xe+K+ge.substr(ni+1);break}}else qe&&(qe=!1,me?(_i.push(me(Qe,Ve++)),Qe=""):Qe+=K);Qe+=Xe}return me?_i:Qe},r=W=>{typeof W=="number"?W=""+W:typeof W!="string"&&(W="");var B=V(W);return c(W,{_targetLower:B._lower,_targetLowerCodes:B.lowerCodes,_bitflags:B.bitflags})},o=()=>{q.clear(),$.clear()};class l{get indexes(){return this._indexes.slice(0,this._indexes.len).sort((B,K)=>B-K)}set indexes(B){return this._indexes=B}highlight(B,K){return n(this,B,K)}get score(){return h(this._score)}set score(B){this._score=f(B)}}class a extends Array{get score(){return h(this._score)}set score(B){this._score=f(B)}}var c=(W,B)=>{const K=new l;return K.target=W,K.obj=B.obj??ne,K._score=B._score??H,K._indexes=B._indexes??[],K._targetLower=B._targetLower??"",K._targetLowerCodes=B._targetLowerCodes??ne,K._nextBeginningIndexes=B._nextBeginningIndexes??ne,K._bitflags=B._bitflags??0,K},h=W=>W===H?0:W>1?W:Math.E**(((-W+1)**.04307-1)*-2),f=W=>W===0?H:W>1?W:1-Math.pow(Math.log(W)/-2+1,1/.04307),m=W=>{typeof W=="number"?W=""+W:typeof W!="string"&&(W=""),W=W.trim();var B=V(W),K=[];if(B.containsSpace){var me=W.split(/\s+/);me=[...new Set(me)];for(var ge=0;ge<me.length;ge++)if(me[ge]!==""){var pe=V(me[ge]);K.push({lowerCodes:pe.lowerCodes,_lower:me[ge].toLowerCase(),containsSpace:!1})}}return{lowerCodes:B.lowerCodes,_lower:B._lower,containsSpace:B.containsSpace,bitflags:B.bitflags,spaceSearches:K}},w=W=>{if(W.length>999)return r(W);var B=q.get(W);return B!==void 0||(B=r(W),q.set(W,B)),B},O=W=>{if(W.length>999)return m(W);var B=$.get(W);return B!==void 0||(B=m(W),$.set(W,B)),B},v=(W,B)=>{var K=[];K.total=W.length;var me=(B==null?void 0:B.limit)||Se;if(B!=null&&B.key)for(var ge=0;ge<W.length;ge++){var pe=W[ge],de=xe(pe,B.key);if(de!=ne){be(de)||(de=w(de));var Qe=c(de.target,{_score:de._score,obj:pe});if(K.push(Qe),K.length>=me)return K}}else if(B!=null&&B.keys)for(var ge=0;ge<W.length;ge++){for(var pe=W[ge],Ve=new a(B.keys.length),He=B.keys.length-1;He>=0;--He){var de=xe(pe,B.keys[He]);if(!de){Ve[He]=M;continue}be(de)||(de=w(de)),de._score=H,de._indexes.len=0,Ve[He]=de}if(Ve.obj=pe,Ve._score=H,K.push(Ve),K.length>=me)return K}else for(var ge=0;ge<W.length;ge++){var de=W[ge];if(de!=ne&&(be(de)||(de=w(de)),de._score=H,de._indexes.len=0,K.push(de),K.length>=me))return K}return K},k=(W,B,K=!1,me=!1)=>{if(K===!1&&W.containsSpace)return C(W,B,me);for(var ge=W._lower,pe=W.lowerCodes,de=pe[0],Qe=B._targetLowerCodes,Ve=pe.length,He=Qe.length,Xe=0,qe=0,_i=0;;){var ni=de===Qe[qe];if(ni){if(_[_i++]=qe,++Xe,Xe===Ve)break;de=pe[Xe]}if(++qe,qe>=He)return ne}var Xe=0,di=!1,et=0,tt=B._nextBeginningIndexes;tt===ne&&(tt=B._nextBeginningIndexes=D(B.target)),qe=_[0]===0?0:tt[_[0]-1];var qi=0;if(qe!==He)for(;;)if(qe>=He){if(Xe<=0||(++qi,qi>200))break;--Xe;var Ri=R[--et];qe=tt[Ri]}else{var ni=pe[Xe]===Qe[qe];if(ni){if(R[et++]=qe,++Xe,Xe===Ve){di=!0;break}++qe}else qe=tt[qe]}var si=Ve<=1?-1:B._targetLower.indexOf(ge,_[0]),je=!!~si,Jt=je?si===0||B._nextBeginningIndexes[si-1]===si:!1;if(je&&!Jt){for(var Ue=0;Ue<tt.length;Ue=tt[Ue])if(!(Ue<=si)){for(var ki=0;ki<Ve&&pe[ki]===B._targetLowerCodes[Ue+ki];ki++);if(ki===Ve){si=Ue,Jt=!0;break}}}var At=lt=>{for(var dt=0,Ac=0,Os=1;Os<Ve;++Os)lt[Os]-lt[Os-1]!==1&&(dt-=lt[Os],++Ac);var Ic=lt[Ve-1]-lt[0]-(Ve-1);if(dt-=(12+Ic)*Ac,lt[0]!==0&&(dt-=lt[0]*lt[0]*.2),!di)dt*=1e3;else{for(var No=1,Os=tt[0];Os<He;Os=tt[Os])++No;No>24&&(dt*=(No-24)*10)}return dt-=(He-Ve)/2,je&&(dt/=1+Ve*Ve*1),Jt&&(dt/=1+Ve*Ve*1),dt-=(He-Ve)/2,dt};if(di)if(Jt){for(var Ue=0;Ue<Ve;++Ue)_[Ue]=si+Ue;var bs=_,kn=At(_)}else var bs=R,kn=At(R);else{if(je)for(var Ue=0;Ue<Ve;++Ue)_[Ue]=si+Ue;var bs=_,kn=At(bs)}B._score=kn;for(var Ue=0;Ue<Ve;++Ue)B._indexes[Ue]=bs[Ue];B._indexes.len=Ve;const Qs=new l;return Qs.target=B.target,Qs._score=B._score,Qs._indexes=B._indexes,Qs},C=(W,B,K)=>{for(var me=new Set,ge=0,pe=ne,de=0,Qe=W.spaceSearches,Ve=Qe.length,He=0,qe=()=>{for(let Jt=He-1;Jt>=0;Jt--)B._nextBeginningIndexes[U[Jt*2+0]]=U[Jt*2+1]},_i=!1,je=0;je<Ve;++je){X[je]=H;var ni=Qe[je];if(pe=k(ni,B),K){if(pe===ne)continue;_i=!0}else if(pe===ne)return qe(),ne;var Xe=je===Ve-1;if(!Xe){var di=pe._indexes,et=!0;for(let Ue=0;Ue<di.len-1;Ue++)if(di[Ue+1]-di[Ue]!==1){et=!1;break}if(et){var tt=di[di.len-1]+1,qi=B._nextBeginningIndexes[tt-1];for(let Ue=tt-1;Ue>=0&&qi===B._nextBeginningIndexes[Ue];Ue--)B._nextBeginningIndexes[Ue]=tt,U[He*2+0]=Ue,U[He*2+1]=qi,He++}}ge+=pe._score/Ve,X[je]=pe._score/Ve,pe._indexes[0]<de&&(ge-=(de-pe._indexes[0])*2),de=pe._indexes[0];for(var Ri=0;Ri<pe._indexes.len;++Ri)me.add(pe._indexes[Ri])}if(K&&!_i)return ne;qe();var si=k(W,B,!0);if(si!==ne&&si._score>ge){if(K)for(var je=0;je<Ve;++je)X[je]=si._score/Ve;return si}K&&(pe=B),pe._score=ge;var je=0;for(let Jt of me)pe._indexes[je++]=Jt;return pe._indexes.len=je,pe},P=W=>W.replace(new RegExp("\\p{Script=Latin}+","gu"),B=>B.normalize("NFD")).replace(/[\u0300-\u036f]/g,""),V=W=>{W=P(W);for(var B=W.length,K=W.toLowerCase(),me=[],ge=0,pe=!1,de=0;de<B;++de){var Qe=me[de]=K.charCodeAt(de);if(Qe===32){pe=!0;continue}var Ve=Qe>=97&&Qe<=122?Qe-97:Qe>=48&&Qe<=57?26:Qe<=127?30:31;ge|=1<<Ve}return{lowerCodes:me,bitflags:ge,containsSpace:pe,_lower:K}},Q=W=>{for(var B=W.length,K=[],me=0,ge=!1,pe=!1,de=0;de<B;++de){var Qe=W.charCodeAt(de),Ve=Qe>=65&&Qe<=90,He=Ve||Qe>=97&&Qe<=122||Qe>=48&&Qe<=57,qe=Ve&&!ge||!pe||!He;ge=Ve,pe=He,qe&&(K[me++]=de)}return K},D=W=>{W=P(W);for(var B=W.length,K=Q(W),me=[],ge=K[0],pe=0,de=0;de<B;++de)ge>de?me[de]=ge:(ge=K[++pe],me[de]=ge===void 0?B:ge);return me},q=new Map,$=new Map,_=[],R=[],U=[],Y=[],X=[],j=[],oe=[],xe=(W,B)=>{var K=W[B];if(K!==void 0)return K;if(typeof B=="function")return B(W);var me=B;Array.isArray(B)||(me=B.split("."));for(var ge=me.length,pe=-1;W&&++pe<ge;)W=W[me[pe]];return W},be=W=>typeof W=="object"&&typeof W._bitflags=="number",Se=1/0,H=-Se,ee=[];ee.total=0;var ne=null,M=r(""),J=W=>{var B=[],K=0,me={},ge=pe=>{for(var de=0,Qe=B[de],Ve=1;Ve<K;){var He=Ve+1;de=Ve,He<K&&B[He]._score<B[Ve]._score&&(de=He),B[de-1>>1]=B[de],Ve=1+(de<<1)}for(var qe=de-1>>1;de>0&&Qe._score<B[qe]._score;qe=(de=qe)-1>>1)B[de]=B[qe];B[de]=Qe};return me.add=pe=>{var de=K;B[K++]=pe;for(var Qe=de-1>>1;de>0&&pe._score<B[Qe]._score;Qe=(de=Qe)-1>>1)B[de]=B[Qe];B[de]=pe},me.poll=pe=>{if(K!==0){var de=B[0];return B[0]=B[--K],ge(),de}},me.peek=pe=>{if(K!==0)return B[0]},me.replaceTop=pe=>{B[0]=pe,ge()},me},fe=J();return{single:e,go:i,prepare:r,cleanup:o}})}(Em)),Em.exports}var GH=jH();const YH=Gh(GH);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2023, Koala Interactive SAS
 * For licensing, see https://github.com/koala-interactive/is-emoji-supported/blob/master/LICENSE.md
 */function KH(s){const t=JH();/* istanbul ignore next -- @preserve */if(!t)return!1;const e=25,i=20,n=Math.floor(e/2);t.font=n+"px Arial, Sans-Serif",t.textBaseline="top",t.canvas.width=i*2,t.canvas.height=e,t.clearRect(0,0,i*2,e),t.fillStyle="#FF0000",t.fillText(s,0,22),t.fillStyle="#0000FF",t.fillText(s,i,22);const r=t.getImageData(0,0,i,e).data,o=r.length;let l=0;for(;l<o&&!r[l+3];l+=4);/* istanbul ignore next -- @preserve */if(l>=o)return!1;const a=i+l/4%i,c=Math.floor(l/4/i),h=t.getImageData(a,c,1,1).data;/* istanbul ignore next -- @preserve */if(r[l]!==h[0]||r[l+2]!==h[2])return!1;/* istanbul ignore next -- @preserve */return!(t.measureText(s).width>=i)}function JH(){try{return document.createElement("canvas").getContext("2d",{willReadFrequently:!0})}catch{/* istanbul ignore next -- @preserve */return null}}const eq={0:"default",1:"light",2:"medium-light",3:"medium",4:"medium-dark",5:"dark"},tq={"🫩":16,"🫨":15.1,"🫠":14,"😶‍🌫️":13.1,"🧑‍💻":12.1,"🥰":11,"🤪":5,"⚕️":4,"🤣":3,"👋🏽":2,"😀":1,"😐":.7,"😂":.6},B2=24,np=class np extends F{static get pluginName(){return"EmojiUtils"}static get isOfficialPlugin(){return!0}isEmojiSupported(t,e,i){return t.version<=e?this.hasZwj(t.emoji)?this.isEmojiZwjSupported(t,i):!0:!1}getEmojiSupportedVersionByOs(){for(const[t,e]of Object.entries(tq))if(np._isEmojiSupported(t))return e;return 0}hasZwj(t){return t.includes("‍")}isEmojiZwjSupported(t,e){return this.getNodeWidth(e,t.emoji)<B2*1.8}getNodeWidth(t,e){const i=document.createElement("span");i.textContent=e,t.appendChild(i);const n=i.offsetWidth;return t.removeChild(i),n}createEmojiWidthTestingContainer(){const t=document.createElement("div");return t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.left="-9999px",t.style.whiteSpace="nowrap",t.style.fontSize=B2+"px",t}normalizeEmojiSkinTone(t){const e={...t,skins:{default:t.emoji}};return t.skins&&t.skins.forEach(i=>{const n=eq[i.tone];e.skins[n]=i.emoji}),e}isEmojiCategoryAllowed(t){return t.group!==2}};p(np,"_isEmojiSupported",KH);let B1=np;const iq="https://cdn.ckeditor.com/ckeditor5/data/emoji/{version}/en.json",nq=16,Ha=class Ha extends F{constructor(e){super(e);p(this,"_items");p(this,"_url");p(this,"_repositoryPromise");e.config.define("emoji",{version:void 0,skinTone:"default",definitionsUrl:void 0,useCustomFont:!1}),this._url=this._getUrl(),this._repositoryPromise=new Promise(i=>{this._repositoryPromiseResolveCallback=i}),this._items=null}static get requires(){return[B1]}static get pluginName(){return"EmojiRepository"}static get isOfficialPlugin(){return!0}async init(){return this._warnAboutCdnUse(),await this._loadAndCacheEmoji(),this._items=this._getItems(),this._items?this._repositoryPromiseResolveCallback(!0):(We("emoji-repository-empty"),this._repositoryPromiseResolveCallback(!1))}getEmojiByQuery(e){return this._items?e.split(/\s/).filter(Boolean).some(r=>r.length>=2)?YH.go(e,this._items,{threshold:.6,keys:["emoticon","annotation",r=>e.split(/\s/).filter(Boolean).flatMap(a=>{var c;return(c=r.tags)==null?void 0:c.filter(h=>h.startsWith(a))}).join()]}).map(r=>r.obj):[]:[]}getEmojiCategories(){const e=this._getItems();if(!e)return[];const{t:i}=this.editor.locale,n=[{title:i("Smileys & Expressions"),icon:"😄",groupId:0},{title:i("Gestures & People"),icon:"👋",groupId:1},{title:i("Animals & Nature"),icon:"🐻",groupId:3},{title:i("Food & Drinks"),icon:"🍎",groupId:4},{title:i("Travel & Places"),icon:"🚘",groupId:5},{title:i("Activities"),icon:"🏀",groupId:6},{title:i("Objects"),icon:"💡",groupId:7},{title:i("Symbols"),icon:"🔵",groupId:8},{title:i("Flags"),icon:"🏁",groupId:9}],r=BB(e,o=>o.group);return n.map(o=>({...o,items:r[o.groupId]}))}getSkinTones(){const{t:e}=this.editor.locale;return[{id:"default",icon:"👋",tooltip:e("Default skin tone")},{id:"light",icon:"👋🏻",tooltip:e("Light skin tone")},{id:"medium-light",icon:"👋🏼",tooltip:e("Medium Light skin tone")},{id:"medium",icon:"👋🏽",tooltip:e("Medium skin tone")},{id:"medium-dark",icon:"👋🏾",tooltip:e("Medium Dark skin tone")},{id:"dark",icon:"👋🏿",tooltip:e("Dark skin tone")}]}isReady(){return this._repositoryPromise}_getUrl(){const{definitionsUrl:e,version:i}=this.editor.config.get("emoji");if(!e||e==="cdn"){const n=i||nq,r=new URL(iq.replace("{version}",n.toString()));return r.searchParams.set("editorVersion",aA),r}return i&&We("emoji-repository-redundant-version"),new URL(e)}_warnAboutCdnUse(){const e=this.editor,i=e.config.get("emoji"),n=e.config.get("licenseKey"),r=window[Symbol.for("cke distribution")];n!=="GPL"&&r!=="cloud"&&(i&&i.definitionsUrl||We("emoji-repository-cdn-use"))}_getItems(){const e=Ha._results[this._url.href];return e&&e.length?e:null}async _loadAndCacheEmoji(){if(Ha._results[this._url.href])return;const e=await fetch(this._url,{cache:"force-cache"}).then(i=>i.ok?i.json():[]).catch(()=>[]);Ha._results[this._url.href]=this._normalizeEmoji(e)}_normalizeEmoji(e){const i=this.editor,n=i.config.get("emoji.useCustomFont"),r=i.plugins.get("EmojiUtils"),o=e.filter(h=>r.isEmojiCategoryAllowed(h));if(n)return o.map(h=>r.normalizeEmojiSkinTone(h));const l=r.getEmojiSupportedVersionByOs(),a=r.createEmojiWidthTestingContainer();document.body.appendChild(a);const c=o.filter(h=>r.isEmojiSupported(h,l,a)).map(h=>r.normalizeEmojiSkinTone(h));return a.remove(),c}};p(Ha,"_results",{});let xg=Ha;const Sa=":",db=":__EMOJI_SHOW_ALL:",fb=":__EMOJI_HINT:";class sq extends F{constructor(e){super(e);p(this,"_emojiDropdownLimit");p(this,"_skinTone");this.editor.config.define("emoji",{dropdownLimit:6}),this._emojiDropdownLimit=e.config.get("emoji.dropdownLimit"),this._skinTone=e.config.get("emoji.skinTone"),this._setupMentionConfiguration(e)}static get requires(){return[xg,Xx,"Mention"]}static get pluginName(){return"EmojiMention"}static get isOfficialPlugin(){return!0}_setupMentionConfiguration(e){const i=e.config.get("mergeFields.prefix"),n=e.config.get("mention.feeds"),r=i?i[0]===Sa:!1;if(n.filter(c=>!c._isEmojiMarker).some(c=>c.marker===Sa)||r){We("emoji-config-marker-already-used",{marker:Sa});return}if(n.some(c=>c._isEmojiMarker))return;const a={_isEmojiMarker:!0,marker:Sa,dropdownLimit:this._emojiDropdownLimit,itemRenderer:this._customItemRendererFactory(this.editor.t),feed:this._queryEmojiCallbackFactory()};this.editor.config.set("mention.feeds",[...n,a])}async init(){const e=this.editor;this.emojiPickerPlugin=e.plugins.has("EmojiPicker")?e.plugins.get("EmojiPicker"):null,this.emojiRepositoryPlugin=e.plugins.get("EmojiRepository"),this._isEmojiRepositoryAvailable=await this.emojiRepositoryPlugin.isReady(),this._isEmojiRepositoryAvailable&&e.once("ready",this._overrideMentionExecuteListener.bind(this))}_customItemRendererFactory(e){return i=>{const n=document.createElement("button");n.classList.add("ck"),n.classList.add("ck-button"),n.classList.add("ck-button_with-text"),n.id=`mention-list-item-id${i.id.slice(0,-1)}`,n.type="button",n.tabIndex=-1;const r=document.createElement("span");return r.classList.add("ck"),r.classList.add("ck-button__label"),n.appendChild(r),i.id===fb?(n.classList.add("ck-list-item-button"),n.classList.add("ck-disabled"),r.textContent=e("Keep on typing to see the emoji.")):i.id===db?r.textContent=e("Show all emoji..."):r.textContent=`${i.text} ${i.id}`,n}}_overrideMentionExecuteListener(){const e=this.editor;e.commands.get("mention").on("execute",(i,n)=>{const r=n[0];if(r.marker===Sa&&(i.stop(),r.mention.id!==fb))if(r.mention.id===db){const o=[...r.range.getItems()].filter(a=>a.is("$textProxy")).map(a=>a.data).reduce((a,c)=>a+c,"");e.model.change(a=>{e.model.deleteContent(a.createSelection(r.range))});const l=this.emojiPickerPlugin;l.showUI(o.slice(1)),setTimeout(()=>{l.emojiPickerView.focus()})}else e.execute("insertText",{text:r.mention.text,range:r.range})},{priority:"high"})}_queryEmojiCallbackFactory(){return e=>{if(e.startsWith(" "))return[];if(e.startsWith(Sa))return[];if(!this._isEmojiRepositoryAvailable)return[];const i=this.emojiRepositoryPlugin.getEmojiByQuery(e).map(r=>{let o=r.skins[this._skinTone]||r.skins.default;return this.emojiPickerPlugin&&(o=r.skins[this.emojiPickerPlugin.skinTone]||r.skins.default),{id:`:${r.annotation}:`,text:o}});if(!this.emojiPickerPlugin)return i.slice(0,this._emojiDropdownLimit);const n={id:e.length>1?db:fb};return[...i.slice(0,this._emojiDropdownLimit-1),n]}}}class rq extends Le{refresh(){const e=this.editor.model,i=e.schema,n=e.document.selection;this.isEnabled=i.checkChild(n.getFirstPosition(),"$text")}execute(t=""){this.editor.plugins.get("EmojiPicker").showUI(t)}}class oq extends he{constructor(e,{categoryName:i,emojiCategories:n,getEmojiByQuery:r,skinTone:o}){super(e);p(this,"tiles");p(this,"focusTracker");p(this,"keystrokes");p(this,"emojiCategories");p(this,"cachedTiles");p(this,"_getEmojiByQuery");this.set("isEmpty",!0),this.set("categoryName",i),this.set("skinTone",o),this.tiles=this.createCollection(),this.cachedTiles=this.createCollection(),this.focusTracker=new ht,this.keystrokes=new bt,this._getEmojiByQuery=r,this.emojiCategories=n;const l=this.bindTemplate;this.setTemplate({tag:"div",children:[{tag:"div",attributes:{role:"grid",class:["ck","ck-emoji__grid"]},children:this.tiles}],attributes:{role:"tabpanel",class:["ck","ck-emoji__tiles",l.if("isEmpty","ck-hidden",a=>a)]}}),mp({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>ue.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy(),this.focusTracker.destroy()}focus(){const e=this.tiles.first;e&&e.focus()}filter(e){const{matchingItems:i,allItems:n}=e?this._getItemsByQuery(e.source):this._getItemsByCategory();return this._updateGrid(i),this.set("isEmpty",i.length===0),{resultsCount:i.length,totalItemsCount:n.length}}_getItemsByQuery(e){return{matchingItems:this._getEmojiByQuery(e),allItems:this.emojiCategories.flatMap(i=>i.items)}}_getItemsByCategory(){const e=this.emojiCategories.find(n=>n.title===this.categoryName),{items:i}=e;return{matchingItems:i,allItems:i}}_updateGrid(e){[...this.tiles].forEach(i=>{this.focusTracker.remove(i),this.tiles.remove(i)}),e.map(i=>{const n=i.skins[this.skinTone]||i.skins.default;return this.cachedTiles.get(n)||this._createTile(n,i.annotation)}).forEach(i=>{this.tiles.add(i),this.focusTracker.add(i)})}_createTile(e,i){const n=new ve(this.locale);return n.viewUid=e,n.extendTemplate({attributes:{class:["ck-emoji__tile"]}}),n.set({label:e,tooltip:i,withText:!0,ariaLabel:i,ariaLabelledBy:void 0}),n.on("execute",()=>{this.fire("execute",{name:i,emoji:e})}),this.cachedTiles.add(n),n}}class lq extends he{constructor(e,{emojiCategories:i,categoryName:n}){super(e);p(this,"focusTracker");p(this,"keystrokes");p(this,"focusCycler");p(this,"buttonViews");this.buttonViews=this.createCollection(i.map(r=>this._createCategoryButton(r))),this.focusTracker=new ht,this.keystrokes=new bt,this.focusCycler=new Kt({focusables:this.buttonViews,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowleft",focusNext:"arrowright"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-emoji__categories-list"],role:"tablist"},children:this.buttonViews}),this.on("change:categoryName",(r,o,l,a)=>{const c=this.buttonViews.find(f=>f.tooltip===a);c&&(c.isOn=!1);const h=this.buttonViews.find(f=>f.tooltip===l);h.isOn=!0}),this.set("categoryName",n)}render(){super.render(),this.buttonViews.forEach(e=>{this.focusTracker.add(e)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),this.buttonViews.destroy()}focus(){this.buttonViews.first.focus()}enableCategories(){this.buttonViews.forEach(e=>{e.isEnabled=!0})}disableCategories(){this.buttonViews.forEach(e=>{e.set({class:"",isEnabled:!1,isOn:!1})})}_createCategoryButton(e){const i=new ve,n=i.bindTemplate;return i.extendTemplate({attributes:{"aria-selected":n.to("isOn",r=>r.toString()),class:["ck-emoji__category-item"]}}),i.set({ariaLabel:e.title,label:e.icon,role:"tab",tooltip:e.title,withText:!0,ariaLabelledBy:void 0}),i.on("execute",()=>{this.categoryName=e.title}),i.on("change:isEnabled",()=>{i.isEnabled&&i.tooltip===this.categoryName&&(i.isOn=!0)}),i}}class aq extends he{constructor(e,{gridView:i,resultsView:n}){super(e);p(this,"inputView");p(this,"gridView");this.gridView=i;const r=e.t;this.inputView=new sU(this.locale,{queryView:{label:r("Find an emoji (min. 2 characters)"),creator:wn},filteredView:this.gridView,infoView:{instance:n}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search"],tabindex:"-1"},children:[this.inputView.queryView]}),this.inputView.delegate("search").to(this)}destroy(){super.destroy(),this.inputView.destroy()}search(e){const i=e?new RegExp(px(e),"ig"):null,n=this.gridView.filter(i);this.inputView.fire("search",{query:e,...n})}setInputValue(e){e?this.inputView.queryView.fieldView.value=e:this.inputView.queryView.fieldView.reset()}getInputValue(){return this.inputView.queryView.fieldView.element.value}focus(){this.inputView.focus()}}class cq extends he{constructor(e,{skinTone:i,skinTones:n}){super(e);p(this,"dropdownView");p(this,"_skinTones");this.set("skinTone",i),this._skinTones=n;const r=e.t,o=r("Select skin tone"),l=xn(e),a=new vi;for(const{id:c,icon:h,tooltip:f}of this._skinTones){const m={type:"button",model:new _l({value:c,label:h,ariaLabel:f,tooltip:f,tooltipPosition:"e",role:"menuitemradio",withText:!0,ariaLabelledBy:void 0})};m.model.bind("isOn").to(this,"skinTone",w=>w===c),a.add(m)}Ql(l,a,{ariaLabel:o,role:"menu"}),l.buttonView.set({label:this._getSkinTone().icon,ariaLabel:o,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:o}),this.dropdownView=l,this.listenTo(l,"execute",c=>{this.skinTone=c.source.value}),l.buttonView.bind("label").to(this,"skinTone",()=>this._getSkinTone().icon),l.buttonView.bind("ariaLabel").to(this,"skinTone",()=>`${this._getSkinTone().tooltip}, ${o}`),this.setTemplate({tag:"div",attributes:{class:["ck","ck-emoji__skin-tone"]},children:[l]})}focus(){this.dropdownView.buttonView.focus()}_getSkinTone(){return this._skinTones.find(e=>e.id===this.skinTone)}}class uq extends he{constructor(e,{emojiCategories:i,getEmojiByQuery:n,skinTone:r,skinTones:o}){super(e);p(this,"items");p(this,"focusTracker");p(this,"keystrokes");p(this,"focusCycler");p(this,"searchView");p(this,"toneView");p(this,"categoriesView");p(this,"gridView");p(this,"infoView");const l=i[0].title;this.gridView=new oq(e,{categoryName:l,emojiCategories:i,getEmojiByQuery:n,skinTone:r}),this.infoView=new hI,this.searchView=new aq(e,{gridView:this.gridView,resultsView:this.infoView}),this.categoriesView=new lq(e,{emojiCategories:i,categoryName:l}),this.toneView=new cq(e,{skinTone:r,skinTones:o}),this.items=this.createCollection([this.searchView,this.toneView,this.categoriesView,this.gridView,this.infoView]),this.focusTracker=new ht,this.keystrokes=new bt,this.focusCycler=new Kt({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",children:[{tag:"div",children:[this.searchView,this.toneView],attributes:{class:["ck","ck-emoji__search"]}},this.categoriesView,this.gridView,{tag:"div",children:[this.infoView],attributes:{class:["ck","ck-search__results"]}}],attributes:{tabindex:"-1",class:["ck","ck-emoji","ck-search"]}}),this._setupEventListeners()}render(){super.render(),this.focusTracker.add(this.searchView.element),this.focusTracker.add(this.toneView.element),this.focusTracker.add(this.categoriesView.element),this.focusTracker.add(this.gridView.element),this.focusTracker.add(this.infoView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.searchView.focus()}_setupEventListeners(){const e=this.locale.t;this.searchView.on("search",(i,n)=>{n.query?this.categoriesView.disableCategories():this.categoriesView.enableCategories()}),this.searchView.on("search",(i,n)=>{n.query.length===1?this.infoView.set({primaryText:e("Keep on typing to see the emoji."),secondaryText:e("The query must contain at least two characters."),isVisible:!0}):n.resultsCount?this.infoView.set({isVisible:!1}):this.infoView.set({primaryText:e('No emojis were found matching "%0".',n.query),secondaryText:e("Please try a different phrase or check the spelling."),isVisible:!0})}),this.searchView.on("search",()=>{this.fire("update"),this.gridView.element.scrollTo(0,0)}),this.categoriesView.on("change:categoryName",(i,n,r)=>{this.gridView.categoryName=r,this.searchView.search("")}),this.toneView.on("change:skinTone",(i,n,r)=>{this.gridView.skinTone=r,this.searchView.search(this.searchView.getInputValue())})}}class hq extends he{constructor(e){super(e);p(this,"backButtonView");p(this,"focusTracker",new ht);p(this,"keystrokes",new bt);p(this,"children");p(this,"_focusables",new hi);p(this,"_focusCycler");this.backButtonView=this._createBackButton(),this.children=this.createCollection([this._createHeaderView()]),this._focusCycler=new Kt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form","ck-emoji-picker-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),[...this.children.filter(yc),this.backButtonView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element),U6(i)&&this._focusCycler.chain(i.focusCycler)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBackButton(){const e=this.locale.t,i=new ve(this.locale);return i.set({class:"ck-button-back",label:e("Back"),icon:Ll,tooltip:!0}),i.delegate("execute").to(this,"cancel"),i}_createHeaderView(){const e=this.locale.t,i=new Nr(this.locale,{label:e("Emoji picker")});return i.children.add(this.backButtonView,0),i}}const uo="emoji-picker";class dq extends F{static get requires(){return[xg,hs,yh,Xx]}static get pluginName(){return"EmojiPicker"}static get isOfficialPlugin(){return!0}async init(){const t=this.editor;if(this.balloonPlugin=t.plugins.get("ContextualBalloon"),this.emojiRepositoryPlugin=t.plugins.get("EmojiRepository"),!await this.emojiRepositoryPlugin.isReady())return;const e=new rq(t);t.commands.add("emoji",e),t.ui.componentFactory.add("emoji",()=>{const i=this._createButton(ve,e);return i.set({tooltip:!0}),i}),t.ui.componentFactory.add("menuBar:emoji",()=>this._createButton(ci,e)),this._setupConversion()}destroy(){super.destroy(),this.emojiPickerView&&this.emojiPickerView.destroy()}get skinTone(){return this.emojiPickerView?this.emojiPickerView.gridView.skinTone:this.editor.config.get("emoji.skinTone")}showUI(t=""){this._showFakeVisualSelection(),this.emojiPickerView||(this.emojiPickerView=this._createEmojiPickerView()),t&&this.emojiPickerView.searchView.setInputValue(t),this.emojiPickerView.searchView.search(t),this.emojiPickerFormView||(this.emojiPickerFormView=this._createEmojiPickerFormView()),this.balloonPlugin.hasView(this.emojiPickerFormView)||(this.emojiPickerFormView.backButtonView.isVisible=!!this.balloonPlugin.visibleView,this.balloonPlugin.add({view:this.emojiPickerFormView,position:this._getBalloonPositionData(),balloonClassName:"ck-emoji-picker-balloon"})),this.emojiPickerView.focus()}_createButton(t,e){const i=new t(this.editor.locale),n=this.editor.locale.t;return i.bind("isEnabled").to(e,"isEnabled"),i.set({label:n("Emoji"),icon:bF,isToggleable:!0}),i.on("execute",()=>{this.editor.editing.view.scrollToTheSelection(),this.showUI()}),i}_createEmojiPickerView(){const t=new uq(this.editor.locale,{emojiCategories:this.emojiRepositoryPlugin.getEmojiCategories(),skinTone:this.editor.config.get("emoji.skinTone"),skinTones:this.emojiRepositoryPlugin.getSkinTones(),getEmojiByQuery:e=>this.emojiRepositoryPlugin.getEmojiByQuery(e)});return this.listenTo(t.gridView,"execute",(e,i)=>{const n=this.editor,r=i.emoji;this._hideUI(),n.execute("insertText",{text:r})}),t}_createEmojiPickerFormView(){const t=new hq(this.editor.locale);return t.children.add(this.emojiPickerView),this.listenTo(this.emojiPickerView,"update",()=>{this.balloonPlugin.visibleView===t&&this.balloonPlugin.updatePosition()}),this.listenTo(t,"cancel",()=>{this._hideUI()}),t.keystrokes.set("Esc",(e,i)=>{this._hideUI(),i()}),Dr({emitter:t,contextElements:[this.balloonPlugin.view.element],callback:()=>{this._hideUI(!1)},activator:()=>this.balloonPlugin.visibleView===t}),t}_hideUI(t=!0){this.balloonPlugin.remove(this.emojiPickerFormView),this.emojiPickerView.searchView.setInputValue(""),t&&this.editor.editing.view.focus(),this._hideFakeVisualSelection()}_setupConversion(){const t=this.editor;t.conversion.for("editingDowncast").markerToHighlight({model:uo,view:{classes:["ck-fake-emoji-selection"]}}),t.conversion.for("editingDowncast").markerToElement({model:uo,view:(e,{writer:i})=>{if(!e.markerRange.isCollapsed)return null;const n=i.createUIElement("span");return i.addClass(["ck-fake-emoji-selection","ck-fake-emoji-selection_collapsed"],n),n}})}_getBalloonPositionData(){const t=this.editor.editing.view,e=t.document;return{target:()=>t.domConverter.viewRangeToDom(e.selection.getFirstRange())}}_showFakeVisualSelection(){const t=this.editor.model;t.change(e=>{const i=t.document.selection.getFirstRange();if(t.markers.has(uo))e.updateMarker(uo,{range:i});else if(i.start.isAtEnd){const n=i.start.getLastMatchingPosition(({item:r})=>!t.schema.isContent(r),{boundaries:i});e.addMarker(uo,{usingOperation:!1,affectsData:!1,range:e.createRange(n,i.end)})}else e.addMarker(uo,{usingOperation:!1,affectsData:!1,range:i})})}_hideFakeVisualSelection(){const t=this.editor.model;t.markers.has(uo)&&t.change(e=>{e.removeMarker(uo)})}}let fq=class extends F{static get requires(){return[sq,dq]}static get pluginName(){return"Emoji"}static get isOfficialPlugin(){return!0}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class mq extends Le{constructor(t){super(t),this.affectsData=!1}execute(){const t=this.editor.model,e=t.document.selection;let i=t.schema.getLimitElement(e);if(e.containsEntireContent(i)||!$2(t.schema,i))do if(i=i.parent,!i)return;while(!$2(t.schema,i));t.change(n=>{n.setSelection(i,"in")})}}function $2(s,t){return s.isLimit(t)&&(s.checkChild(t,"$text")||s.checkChild(t,"paragraph"))}const gq=xx("Ctrl+A");class pq extends F{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=t.editing.view.document;t.commands.add("selectAll",new mq(t)),this.listenTo(n,"keydown",(r,o)=>{ic(o)===gq&&(t.execute("selectAll"),o.preventDefault())}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Select all"),keystroke:"CTRL+A"}]})}}class wq extends F{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("selectAll",()=>{const e=this._createButton(ve);return e.set({tooltip:!0}),e}),t.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(ci))}_createButton(t){const e=this.editor,i=e.locale,n=e.commands.get("selectAll"),r=new t(e.locale),o=i.t;return r.set({label:o("Select all"),icon:qF,keystroke:"Ctrl+A"}),r.bind("isEnabled").to(n,"isEnabled"),this.listenTo(r,"execute",()=>{e.execute("selectAll"),e.editing.view.focus()}),r}}class bq extends F{static get requires(){return[pq,wq]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class $I extends Le{constructor(e){super(e);p(this,"_stack",[]);p(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(i,n)=>{n[1]={...n[1]};const r=n[1];r.batchType||(r.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(i,n)=>{n[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const i=this.editor.model.document.selection,n={ranges:i.hasOwnRange?Array.from(i.getRanges()):[],isBackward:i.isBackward};this._stack.push({batch:e,selection:n}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,i,n){const r=this.editor.model,o=r.document,l=[],a=e.map(h=>h.getTransformedByOperations(n)),c=a.flat();for(const h of a){const f=h.filter(m=>m.root!=o.graveyard).filter(m=>!xq(m,c));f.length&&(Oq(f),l.push(f[0]))}l.length&&r.change(h=>{h.setSelection(l,{backward:i})})}_undo(e,i){const n=this.editor.model,r=n.document;this._createdBatches.add(i);const o=e.operations.slice().filter(l=>l.isDocumentOperation);o.reverse();for(const l of o){const a=l.baseVersion+1,c=Array.from(r.history.getOperations(a)),f=x9([l.getReversed()],c,{useRelations:!0,document:this.editor.model.document,forceWeakRemove:!0}).operationsA;for(let m of f){const w=m.affectedSelectable;w&&!n.canEditAt(w)&&(m=new ai(m.baseVersion)),i.addOperation(m),n.applyOperation(m),r.history.setOperationAsUndone(l,m)}}}}function Oq(s){s.sort((t,e)=>t.start.isBefore(e.start)?-1:1);for(let t=1;t<s.length;t++){const i=s[t-1].getJoined(s[t],!0);i&&(t--,s.splice(t,2,i))}}function xq(s,t){return t.some(e=>e!==s&&e.containsRange(s,!0))}class yq extends $I{execute(t=null){const e=t?this._stack.findIndex(r=>r.batch==t):this._stack.length-1,i=this._stack.splice(e,1)[0],n=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(n,()=>{this._undo(i.batch,n);const r=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,r)}),this.fire("revert",i.batch,n),this.refresh()}}class vq extends $I{execute(){const t=this._stack.pop(),e=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(e,()=>{const n=t.batch.operations[t.batch.operations.length-1].baseVersion+1,r=this.editor.model.document.history.getOperations(n);this._restoreSelection(t.selection.ranges,t.selection.isBackward,r),this._undo(t.batch,e)}),this.refresh()}}class _q extends F{constructor(){super(...arguments);p(this,"_undoCommand");p(this,"_redoCommand");p(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.t;this._undoCommand=new yq(e),this._redoCommand=new vq(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(n,r)=>{const o=r[0];if(!o.isDocumentOperation)return;const l=o.batch,a=this._redoCommand.createdBatches.has(l),c=this._undoCommand.createdBatches.has(l);this._batchRegistry.has(l)||(this._batchRegistry.add(l),l.isUndoable&&(a?this._undoCommand.addBatch(l):c||(this._undoCommand.addBatch(l),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(n,r,o)=>{this._redoCommand.addBatch(o)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:i("Undo"),keystroke:"CTRL+Z"},{label:i("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class kq extends F{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale,i=t.t,n=e.uiLanguageDirection=="ltr"?yC:bC,r=e.uiLanguageDirection=="ltr"?bC:yC;this._addButtonsToFactory("undo",i("Undo"),"CTRL+Z",n),this._addButtonsToFactory("redo",i("Redo"),"CTRL+Y",r)}_addButtonsToFactory(t,e,i,n){const r=this.editor;r.ui.componentFactory.add(t,()=>{const o=this._createButton(ve,t,e,i,n);return o.set({tooltip:!0}),o}),r.ui.componentFactory.add("menuBar:"+t,()=>this._createButton(ci,t,e,i,n))}_createButton(t,e,i,n,r){const o=this.editor,l=o.locale,a=o.commands.get(e),c=new t(l);return c.set({label:i,icon:r,keystroke:n}),c.bind("isEnabled").to(a,"isEnabled"),this.listenTo(c,"execute",()=>{o.execute(e),o.editing.view.focus()}),c}}class QI extends F{static get requires(){return[_q,kq]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Sq extends F{static get requires(){return[Wz,VI,pp,bq,yI,Xx,QI]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Cq extends Le{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}refresh(){const t=this.editor.model,e=t.document,i=Nt(e.selection.getSelectedBlocks());this.value=!!i&&i.is("element","paragraph"),this.isEnabled=!!i&&Q2(i,t.schema)}execute(t={}){const e=this.editor.model,i=e.document,n=t.selection||i.selection;e.canEditAt(n)&&e.change(r=>{const o=n.getSelectedBlocks();for(const l of o)!l.is("element","paragraph")&&Q2(l,e.schema)&&r.rename(l,"paragraph")})}}function Q2(s,t){return t.checkChild(s.parent,"paragraph")&&!t.isObject(s)}class Pq extends Le{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}execute(t){const e=this.editor.model,i=t.attributes;let n=t.position;return e.canEditAt(n)?e.change(r=>{if(n=this._findPositionToInsertParagraph(n,r),!n)return null;const o=r.createElement("paragraph");return i&&e.schema.setAllowedAttributes(o,i,r),e.insertContent(o,n),r.setSelection(o,"in"),r.createPositionAt(o,0)}):null}_findPositionToInsertParagraph(t,e){const i=this.editor.model;if(i.schema.checkChild(t,"paragraph"))return t;const n=i.schema.findAllowedParent(t,"paragraph");if(!n)return null;const r=t.parent,o=i.schema.checkChild(r,"$text");return r.isEmpty||o&&t.isAtEnd?i.createPositionAfter(r):!r.isEmpty&&o&&t.isAtStart?i.createPositionBefore(r):e.split(t,n).position}}const sp=class sp extends F{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model;t.commands.add("paragraph",new Cq(t)),t.commands.add("insertParagraph",new Pq(t)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion.for("upcast").elementToElement({model:(i,{writer:n})=>!sp.paragraphLikeElements.has(i.name)||i.isEmpty?null:n.createElement("paragraph"),view:/.+/,converterPriority:"low"})}};p(sp,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let yg=sp;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Tq extends Le{constructor(e,i){super(e);p(this,"modelElements");this.modelElements=i}refresh(){const e=Nt(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(i=>D2(e,i,this.editor.model.schema))}execute(e){const i=this.editor.model,n=i.document,r=e.value;i.change(o=>{const l=Array.from(n.selection.getSelectedBlocks()).filter(a=>D2(a,r,i.schema));for(const a of l)a.is("element",r)||o.rename(a,r)})}}function D2(s,t,e){return e.checkChild(s.parent,t)&&!e.isObject(s)}const N2="paragraph";class Eq extends F{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[yg]}init(){const t=this.editor,e=t.config.get("heading.options"),i=[];for(const n of e)n.model!=="paragraph"&&(t.model.schema.register(n.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(n),i.push(n.model));this._addDefaultH1Conversion(t),t.commands.add("heading",new Tq(t,i))}afterInit(){const t=this.editor,e=t.commands.get("enter"),i=t.config.get("heading.options");e&&this.listenTo(e,"afterExecute",(n,r)=>{const o=t.model.document.selection.getFirstPosition().parent;i.some(a=>o.is("element",a.model))&&!o.is("element",N2)&&o.childCount===0&&r.writer.rename(o,N2)})}_addDefaultH1Conversion(t){t.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Ki.low+1})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Aq(s){const t=s.t,e={Paragraph:t("Paragraph"),"Heading 1":t("Heading 1"),"Heading 2":t("Heading 2"),"Heading 3":t("Heading 3"),"Heading 4":t("Heading 4"),"Heading 5":t("Heading 5"),"Heading 6":t("Heading 6")};return s.config.get("heading.options").map(i=>{const n=e[i.title];return n&&n!=i.title&&(i.title=n),i})}class Iq extends F{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,i=Aq(t),n=e("Choose heading"),r=e("Heading");t.ui.componentFactory.add("heading",o=>{const l={},a=new vi,c=t.commands.get("heading"),h=t.commands.get("paragraph"),f=[c];for(const w of i){const O={type:"button",model:new _l({label:w.title,class:w.class,role:"menuitemradio",withText:!0})};w.model==="paragraph"?(O.model.bind("isOn").to(h,"value"),O.model.set("commandName","paragraph"),f.push(h)):(O.model.bind("isOn").to(c,"value",v=>v===w.model),O.model.set({commandName:"heading",commandValue:w.model})),a.add(O),l[w.model]=w.title}const m=xn(o);return Ql(m,a,{ariaLabel:r,role:"menu"}),m.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),m.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),m.bind("isEnabled").toMany(f,"isEnabled",(...w)=>w.some(O=>O)),m.buttonView.bind("label").to(c,"value",h,"value",(w,O)=>{const v=O?"paragraph":w;return typeof v=="boolean"||!l[v]?n:l[v]}),m.buttonView.bind("ariaLabel").to(c,"value",h,"value",(w,O)=>{const v=O?"paragraph":w;return typeof v=="boolean"||!l[v]?r:`${l[v]}, ${r}`}),this.listenTo(m,"execute",w=>{const{commandName:O,commandValue:v}=w.source;t.execute(O,v?{value:v}:void 0),t.editing.view.focus()}),m}),t.ui.componentFactory.add("menuBar:heading",o=>{const l=new nr(o),a=t.commands.get("heading"),c=t.commands.get("paragraph"),h=[a],f=new _h(o);l.set({class:"ck-heading-dropdown"}),f.set({ariaLabel:e("Heading"),role:"menu"}),l.buttonView.set({label:e("Heading")}),l.panelView.children.add(f);for(const m of i){const w=new id(o,l),O=new ci(o);w.children.add(O),f.items.add(w),O.set({isToggleable:!0,label:m.title,role:"menuitemradio",class:m.class}),O.delegate("execute").to(l),O.on("execute",()=>{const v=m.model==="paragraph"?"paragraph":"heading";t.execute(v,{value:m.model}),t.editing.view.focus()}),m.model==="paragraph"?(O.bind("isOn").to(c,"value"),h.push(c)):O.bind("isOn").to(a,"value",v=>v===m.model)}return l.bind("isEnabled").toMany(h,"isEnabled",(...m)=>m.some(w=>w)),l})}}class Rq extends F{static get requires(){return[Eq,Iq]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Vq extends Le{refresh(){const t=this.editor.model,e=t.schema,i=t.document.selection,n=F2(i);this.isEnabled=Mq(i,e,t),this.value=n?n.getAttribute("value")||"":null}execute(t){const e=this.editor.model,i=e.document.selection;e.change(n=>{let r;this.value!==null?r=F2(i):(r=n.createElement("rawHtml"),e.insertObject(r,null,null,{setSelection:"on"})),n.setAttribute("value",t,r)})}}function Mq(s,t,e){const i=Lq(s,e);return t.checkChild(i,"rawHtml")}function Lq(s,t){const i=_I(s,t).start.parent;return i.isEmpty&&!i.is("rootElement")?i.parent:i}function F2(s){const t=s.getSelectedElement();return t&&t.is("element","rawHtml")?t:null}class Bq extends F{constructor(e){super(e);p(this,"_widgetButtonViewReferences",new Set);e.config.define("htmlEmbed",{showPreviews:!1,sanitizeHtml:i=>(We("html-embed-provide-sanitize-function"),{html:i,hasChanged:!1})})}static get pluginName(){return"HtmlEmbedEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.model.schema.register("rawHtml",{inheritAllFrom:"$blockObject",allowAttributes:["value"]}),e.commands.add("htmlEmbed",new Vq(e)),this._setupConversion()}_setupConversion(){const e=this.editor,i=e.t,n=e.editing.view,r=this._widgetButtonViewReferences,o=e.config.get("htmlEmbed");this.editor.editing.view.on("render",()=>{for(const f of r){if(f.element&&f.element.isConnected)return;f.destroy(),r.delete(f)}},{priority:"lowest"}),e.data.registerRawContentMatcher({name:"div",classes:"raw-html-embed"}),e.conversion.for("upcast").elementToElement({view:{name:"div",classes:"raw-html-embed"},model:(f,{writer:m})=>m.createElement("rawHtml",{value:f.getCustomProperty("$rawContent")})}),e.conversion.for("dataDowncast").elementToElement({model:"rawHtml",view:(f,{writer:m})=>m.createRawElement("div",{class:"raw-html-embed"},function(w){w.innerHTML=f.getAttribute("value")||""})}),e.conversion.for("editingDowncast").elementToStructure({model:{name:"rawHtml",attributes:["value"]},view:(f,{writer:m})=>{let w,O,v;const k=m.createRawElement("div",{class:"raw-html-embed__content-wrapper"},function(V){w=V,l({editor:e,domElement:V,state:O,props:v}),w.addEventListener("mousedown",()=>{if(O.isEditable){const Q=e.model;Q.document.selection.getSelectedElement()!==f&&Q.change(q=>q.setSelection(f,"on"))}},!0)}),C={makeEditable(){O=Object.assign({},O,{isEditable:!0}),l({domElement:w,editor:e,state:O,props:v}),n.change(V=>{V.setAttribute("data-cke-ignore-events","true",k)}),w.querySelector("textarea").focus()},save(V){V!==O.getRawHtmlValue()?(e.execute("htmlEmbed",V),e.editing.view.focus()):this.cancel()},cancel(){O=Object.assign({},O,{isEditable:!1}),l({domElement:w,editor:e,state:O,props:v}),e.editing.view.focus(),n.change(V=>{V.removeAttribute("data-cke-ignore-events",k)})}};O={showPreviews:o.showPreviews,isEditable:!1,getRawHtmlValue:()=>f.getAttribute("value")||""},v={sanitizeHtml:o.sanitizeHtml,textareaPlaceholder:i("Paste raw HTML here..."),onEditClick(){C.makeEditable()},onSaveClick(V){C.save(V)},onCancelClick(){C.cancel()}};const P=m.createContainerElement("div",{class:"raw-html-embed","data-html-embed-label":i("HTML snippet"),dir:e.locale.uiLanguageDirection},k);return m.setCustomProperty("rawHtmlApi",C,P),m.setCustomProperty("rawHtml",!0,P),nd(P,m,{label:i("HTML snippet"),hasSelectionHandle:!0})}});function l({editor:f,domElement:m,state:w,props:O}){m.textContent="";const v=m.ownerDocument;let k;if(w.isEditable){const P={isDisabled:!1,placeholder:O.textareaPlaceholder};k=c({domDocument:v,state:w,props:P}),m.append(k)}else if(w.showPreviews){const P={sanitizeHtml:O.sanitizeHtml};m.append(h({domDocument:v,state:w,props:P,editor:f}))}else{const P={isDisabled:!0,placeholder:O.textareaPlaceholder};m.append(c({domDocument:v,state:w,props:P}))}const C={onEditClick:O.onEditClick,onSaveClick:()=>{O.onSaveClick(k.value)},onCancelClick:O.onCancelClick};m.prepend(a({editor:f,domDocument:v,state:w,props:C}))}function a({editor:f,domDocument:m,state:w,props:O}){const v=wi(m,"div",{class:"raw-html-embed__buttons-wrapper"});if(w.isEditable){const k=mb(f,"save",O.onSaveClick),C=mb(f,"cancel",O.onCancelClick);v.append(k.element,C.element),r.add(k).add(C)}else{const k=mb(f,"edit",O.onEditClick);v.append(k.element),r.add(k)}return v}function c({domDocument:f,state:m,props:w}){const O=wi(f,"textarea",{placeholder:w.placeholder,class:"ck ck-reset ck-input ck-input-text raw-html-embed__source"});return O.disabled=w.isDisabled,O.value=m.getRawHtmlValue(),O}function h({editor:f,domDocument:m,state:w,props:O}){const v=O.sanitizeHtml(w.getRawHtmlValue()),k=w.getRawHtmlValue().length>0?i("No preview available"):i("Empty snippet content"),C=wi(m,"div",{class:"ck ck-reset_all raw-html-embed__preview-placeholder"},k),P=wi(m,"div",{class:"raw-html-embed__preview-content",dir:f.locale.contentLanguageDirection}),Q=m.createRange().createContextualFragment(v.html);return P.appendChild(Q),wi(m,"div",{class:"raw-html-embed__preview"},[C,P])}}}function mb(s,t,e){const{t:i}=s.locale,n=new ve(s.locale),r=s.commands.get("htmlEmbed");return n.set({class:`raw-html-embed__${t}-button`,icon:C1,tooltip:!0,tooltipPosition:s.locale.uiLanguageDirection==="rtl"?"e":"w"}),n.render(),t==="edit"?(n.set({icon:C1,label:i("Edit source")}),n.bind("isEnabled").to(r)):t==="save"?(n.set({icon:Jh,label:i("Save changes")}),n.bind("isEnabled").to(r)):n.set({icon:xc,label:i("Cancel")}),n.on("execute",e),n}class $q extends F{static get pluginName(){return"HtmlEmbedUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,i=t.locale.t;t.ui.componentFactory.add("htmlEmbed",()=>{const n=this._createButton(ve);return n.set({tooltip:!0,label:i("Insert HTML")}),n}),t.ui.componentFactory.add("menuBar:htmlEmbed",()=>{const n=this._createButton(ci);return n.set({label:i("HTML snippet")}),n})}_createButton(t){const e=this.editor,i=e.commands.get("htmlEmbed"),n=new t(e.locale);return n.set({icon:xF}),n.bind("isEnabled").to(i,"isEnabled"),this.listenTo(n,"execute",()=>{e.execute("htmlEmbed"),e.editing.view.focus(),e.editing.view.document.selection.getSelectedElement().getCustomProperty("rawHtmlApi").makeEditable()}),n}}class Qq extends F{static get requires(){return[Bq,$q,Sc]}static get pluginName(){return"HtmlEmbed"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function sr(s,t,e,i){t&&Dq(s,t,i),e&&rr(s,e,i)}function rr(s,t,e){if(t.attributes)for(const[i,n]of Object.entries(t.attributes))s.setAttribute(i,n,e);t.styles&&s.setStyle(t.styles,e),t.classes&&s.addClass(t.classes,e)}function Dq(s,t,e){if(t.attributes)for(const[i]of Object.entries(t.attributes))s.removeAttribute(i,e);if(t.styles)for(const i of Object.keys(t.styles))s.removeStyle(i,e);t.classes&&s.removeClass(t.classes,e)}function Nq(s,t){const e=yn(s);let i="attributes";for(i in t)i=="classes"?e[i]=Array.from(new Set([...s[i]||[],...t[i]])):e[i]={...s[i],...t[i]};return e}function Ca(s,t,e,i,n){const r=t.getAttribute(e),o={};for(const l of["attributes","styles","classes"]){if(l!=i){r&&r[l]&&(o[l]=r[l]);continue}if(i=="classes"){const c=new Set(r&&r.classes||[]);n(c),c.size&&(o[l]=Array.from(c));continue}const a=new Map(Object.entries(r&&r[l]||{}));n(a),a.size&&(o[l]=Object.fromEntries(a))}Object.keys(o).length?t.is("documentSelection")?s.setSelectionAttribute(e,o):s.setAttribute(e,o,t):r&&(t.is("documentSelection")?s.removeSelectionAttribute(e):s.removeAttribute(e,t))}function Fq(s){return f$(s).replace(/ /g,"")}function rs(s){return`html${Fq(s)}Attributes`}function ny({model:s}){return(t,e)=>e.writer.createElement(s,{htmlContent:t.getCustomProperty("$rawContent")})}function zq(s,{view:t,isInline:e}){const i=s.t;return(n,{writer:r})=>{const o=i("HTML object"),l=bp(t,n,r),a=n.getAttribute(rs(t));r.addClass("html-object-embed__content",l),a&&rr(r,a,l);const c=r.createContainerElement(e?"span":"div",{class:"html-object-embed","data-html-object-embed-label":o},l);return nd(c,r,{label:o})}}function bp(s,t,e){return e.createRawElement(s,null,(i,n)=>{n.setContentOf(i,t.getAttribute("htmlContent"))})}function Wq({view:s,model:t,allowEmpty:e},i){return r=>{r.on(`element:${s}`,(o,l,a)=>{let c=i.processViewAttributes(l.viewItem,a);if(!(!c&&!a.consumable.test(l.viewItem,{name:!0}))){if(c=c||{},a.consumable.consume(l.viewItem,{name:!0}),l.modelRange||(l=Object.assign(l,a.convertChildren(l.viewItem,l.modelCursor))),e&&l.modelRange.isCollapsed&&Object.keys(c).length){const h=a.writer.createElement("htmlEmptyElement");if(!a.safeInsert(h,l.modelCursor))return;const f=a.getSplitParts(h);l.modelRange=a.writer.createRange(l.modelRange.start,a.writer.createPositionAfter(f[f.length-1])),a.updateConversionResult(h,l),n(h,c,a);return}for(const h of l.modelRange.getItems())n(h,c,a)}},{priority:"low"})};function n(r,o,l){if(l.schema.checkAttribute(r,t)){const a=r.getAttribute(t),c=Nq(o,a||{});l.writer.setAttribute(t,c,r)}}}function z2({model:s,view:t},e){return(i,{writer:n,consumable:r})=>{if(!i.hasAttribute(s))return null;const o=n.createContainerElement(t),l=i.getAttribute(s);return r.consume(i,`attribute:${s}`),rr(n,l,o),o.getFillerOffset=()=>null,e?nd(o,n):o}}function Uq({priority:s,view:t}){return(e,i)=>{if(!e)return;const{writer:n}=i,r=n.createAttributeElement(t,null,{priority:s});return rr(n,e,r),r}}function rc({view:s},t){return e=>{e.on(`element:${s}`,(i,n,r)=>{if(!n.modelRange||n.modelRange.isCollapsed)return;const o=t.processViewAttributes(n.viewItem,r);o&&r.writer.setAttribute(rs(n.viewItem.name),o,n.modelRange)},{priority:"low"})}}function Sh({view:s,model:t}){return e=>{e.on(`attribute:${rs(s)}:${t}`,(i,n,r)=>{if(!r.consumable.consume(n.item,i.name))return;const{attributeOldValue:o,attributeNewValue:l}=n,a=r.writer,c=r.mapper.toViewElement(n.item);sr(a,o,l,c)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */var W2={block:[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"horizontalLine",view:"hr"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6","$text"],allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowIn:["$root","$container"],allowChildren:["paragraph","htmlP","htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlHr",view:"hr",isEmpty:!0,modelSchema:{inheritAllFrom:"$blockObject"}}],inline:[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref"},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}]};class oc extends F{constructor(){super(...arguments);p(this,"_definitions",[])}static get pluginName(){return"DataSchema"}static get isOfficialPlugin(){return!0}init(){for(const e of W2.block)this.registerBlockElement(e);for(const e of W2.inline)this.registerInlineElement(e)}registerBlockElement(e){this._definitions.push({...e,isBlock:!0})}registerInlineElement(e){this._definitions.push({...e,isInline:!0})}extendBlockElement(e){this._extendDefinition({...e,isBlock:!0})}extendInlineElement(e){this._extendDefinition({...e,isInline:!0})}getDefinitionsForView(e,i=!1){const n=new Set;for(const r of this._getMatchingViewDefinitions(e)){if(i)for(const o of this._getReferences(r.model))n.add(o);n.add(r)}return n}getDefinitionsForModel(e){return this._definitions.filter(i=>i.model==e)}_getMatchingViewDefinitions(e){return this._definitions.filter(i=>i.view&&Zq(e,i.view))}*_getReferences(e){const i=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"],n=this._definitions.filter(r=>r.model==e);for(const{modelSchema:r}of n)if(r)for(const o of i)for(const l of ut(r[o]||[])){const a=this._definitions.filter(c=>c.model==l);for(const c of a)l!==e&&(yield*this._getReferences(c.model),yield c)}}_extendDefinition(e){const i=Array.from(this._definitions.entries()).filter(([,n])=>n.model==e.model);if(i.length==0){this._definitions.push(e);return}for(const[n,r]of i)this._definitions[n]=nA({},r,e,(o,l)=>Array.isArray(o)?o.concat(l):void 0)}}function Zq(s,t){return typeof s=="string"?s===t:s instanceof RegExp?s.test(t):!1}class Dt extends F{constructor(e){super(e);p(this,"_dataSchema");p(this,"_allowedAttributes");p(this,"_disallowedAttributes");p(this,"_allowedElements");p(this,"_disallowedElements");p(this,"_dataInitialized");p(this,"_coupledAttributes");this._dataSchema=e.plugins.get("DataSchema"),this._allowedAttributes=new Nn,this._disallowedAttributes=new Nn,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get isOfficialPlugin(){return!0}static get requires(){return[oc,Sc]}loadAllowedConfig(e){for(const i of e){const n=i.name||/[\s\S]+/,r=Z2(i);this.allowElement(n),r.forEach(o=>this.allowAttributes(o))}}loadDisallowedConfig(e){for(const i of e){const n=i.name||/[\s\S]+/,r=Z2(i);r.length==0?this.disallowElement(n):r.forEach(o=>this.disallowAttributes(o))}}loadAllowedEmptyElementsConfig(e){for(const i of e)this.allowEmptyElement(i)}allowElement(e){for(const i of this._dataSchema.getDefinitionsForView(e,!0))this._addAllowedElement(i),this._coupledAttributes=null}disallowElement(e){for(const i of this._dataSchema.getDefinitionsForView(e,!1))this._disallowedElements.add(i.view)}allowEmptyElement(e){for(const i of this._dataSchema.getDefinitionsForView(e,!0))i.isInline&&this._dataSchema.extendInlineElement({...i,allowEmpty:!0})}allowAttributes(e){this._allowedAttributes.add(e)}disallowAttributes(e){this._disallowedAttributes.add(e)}processViewAttributes(e,i){const{consumable:n}=i;return U2(e,this._disallowedAttributes,n),Hq(e,U2(e,this._allowedAttributes,n))}_addAllowedElement(e){if(!this._allowedElements.has(e)){if(this._allowedElements.add(e),"appliesToBlock"in e&&typeof e.appliesToBlock=="string")for(const i of this._dataSchema.getDefinitionsForModel(e.appliesToBlock))i.isBlock&&this._addAllowedElement(i);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(e)},{priority:Ki.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(const e of this._allowedElements)this._fireRegisterEvent(e)},{priority:Ki.highest+1})}_registerElementHandlers(){this.on("register",(e,i)=>{const n=this.editor.model.schema;if(i.isObject&&!n.isRegistered(i.model))this._registerObjectElement(i);else if(i.isBlock)this._registerBlockElement(i);else if(i.isInline)this._registerInlineElement(i);else throw new A("data-filter-invalid-definition",null,i);e.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){const e=this.editor.model,i=e.document.selection;e.document.registerPostFixer(n=>{const r=e.document.differ.getChanges();let o=!1;const l=this._getCoupledAttributesMap();for(const a of r){if(a.type!="attribute"||a.attributeNewValue!==null)continue;const c=l.get(a.attributeKey);if(c)for(const{item:h}of a.range.getWalker())for(const f of c)h.hasAttribute(f)&&(n.removeAttribute(f,h),o=!0)}return o}),this.listenTo(i,"change:attribute",(n,{attributeKeys:r})=>{const o=new Set,l=this._getCoupledAttributesMap();for(const a of r){if(i.hasAttribute(a))continue;const c=l.get(a);if(c)for(const h of c)i.hasAttribute(h)&&o.add(h)}o.size!=0&&e.change(a=>{for(const c of o)a.removeSelectionAttribute(c)})})}_registerAssociatedHtmlAttributesPostFixer(){const e=this.editor.model;e.document.registerPostFixer(i=>{const n=e.document.differ.getChanges();let r=!1;for(const o of n)if(!(o.type!=="insert"||o.name==="$text"))for(const l of o.attributes.keys())!l.startsWith("html")||!l.endsWith("Attributes")||e.schema.checkAttribute(o.name,l)||(i.removeAttribute(l,o.position.nodeAfter),r=!0);return r})}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(const e of this._allowedElements)if(e.coupledAttribute&&e.model){const i=this._coupledAttributes.get(e.coupledAttribute);i?i.push(e.model):this._coupledAttributes.set(e.coupledAttribute,[e.model])}return this._coupledAttributes}_fireRegisterEvent(e){e.view&&this._disallowedElements.has(e.view)||this.fire(e.view?`register:${e.view}`:"register",e)}_registerObjectElement(e){const i=this.editor,n=i.model.schema,r=i.conversion,{view:o,model:l}=e;n.register(l,e.modelSchema);/* istanbul ignore next: paranoid check -- @preserve */o&&(n.extend(e.model,{allowAttributes:[rs(o),"htmlContent"]}),i.data.registerRawContentMatcher({name:o}),r.for("upcast").elementToElement({view:o,model:ny(e),converterPriority:Ki.low+2}),r.for("upcast").add(rc(e,this)),r.for("editingDowncast").elementToStructure({model:{name:l,attributes:[rs(o)]},view:zq(i,e)}),r.for("dataDowncast").elementToElement({model:l,view:(a,{writer:c})=>bp(o,a,c)}),r.for("dataDowncast").add(Sh(e)))}_registerBlockElement(e){const i=this.editor,n=i.model.schema,r=i.conversion,{view:o,model:l}=e;if(!n.isRegistered(e.model)){if(!e.modelSchema||(n.register(e.model,e.modelSchema),!o))return;r.for("upcast").elementToElement({model:l,view:o,converterPriority:Ki.low+2}),r.for("downcast").elementToElement({model:l,view:(a,{writer:c})=>e.isEmpty?c.createEmptyElement(o):c.createContainerElement(o)})}o&&(n.extend(e.model,{allowAttributes:rs(o)}),r.for("upcast").add(rc(e,this)),r.for("downcast").add(Sh(e)))}_registerInlineElement(e){const i=this.editor,n=i.model.schema,r=i.conversion,o=e.model;if(!e.appliesToBlock&&(n.extend("$text",{allowAttributes:o}),e.attributeProperties&&n.setAttributeProperties(o,e.attributeProperties),r.for("upcast").add(Wq(e,this)),r.for("downcast").attributeToElement({model:o,view:Uq(e)}),!!e.allowEmpty)){if(n.setAttributeProperties(o,{copyFromObject:!1}),!n.isRegistered("htmlEmptyElement")){n.register("htmlEmptyElement",{inheritAllFrom:"$inlineObject"});const l=a=>Array.from(a.getAttributeKeys()).some(c=>c.startsWith("html"));i.model.document.registerPostFixer(a=>{const c=i.model.document.differ.getChanges(),h=new Set;for(const f of c)if(f.type!=="remove"){if(f.type==="attribute"&&f.attributeNewValue===null)for(const{item:m}of f.range)m.is("element","htmlEmptyElement")&&!l(m)&&h.add(m);if(f.type==="insert"&&f.position.nodeAfter){const m=f.position.nodeAfter;for(const{item:w}of a.createRangeOn(m))w.is("element","htmlEmptyElement")&&!l(w)&&h.add(w)}}for(const f of h)a.remove(f);return h.size>0})}i.data.htmlProcessor.domConverter.registerInlineObjectMatcher(l=>l.name==e.view&&l.isEmpty&&Array.from(l.getAttributeKeys()).length?{name:!0}:null),r.for("editingDowncast").elementToElement({model:"htmlEmptyElement",view:z2(e,!0)}),r.for("dataDowncast").elementToElement({model:"htmlEmptyElement",view:z2(e)})}}}function U2(s,t,e){const i=t.matchAll(s)||[],n=s.document.stylesProcessor;return i.reduce((r,{match:o})=>{for(const[l,a]of o.attributes||[])if(l=="style"){const c=a,h=n.getRelatedStyles(c).filter(f=>f.split("-").length>c.split("-").length).sort((f,m)=>m.split("-").length-f.split("-").length);for(const f of h)e.consume(s,{styles:[f]})&&r.styles.push(f);e.consume(s,{styles:[c]})&&r.styles.push(c)}else if(l=="class"){const c=a;e.consume(s,{classes:[c]})&&r.classes.push(c)}else e.consume(s,{attributes:[l]})&&r.attributes.push(l);return r},{attributes:[],classes:[],styles:[]})}function Hq(s,{attributes:t,classes:e,styles:i}){return!t.length&&!e.length&&!i.length?null:{...t.length&&{attributes:qq(s,t)},...i.length&&{styles:Xq(s,i)},...e.length&&{classes:e}}}function qq(s,t){const e={};for(const i of t){const n=s.getAttribute(i);n!==void 0&&vA(i)&&(e[i]=n)}return e}function Xq(s,t){const e=new Xa(s.document.stylesProcessor);for(const i of t){const n=s.getStyle(i);n!==void 0&&e.set(i,n)}return Object.fromEntries(e.getStylesEntries())}function gb(s,t){const{name:e}=s,i=s[t];return As(i)?Object.entries(i).map(([n,r])=>({name:e,[t]:{[n]:r}})):Array.isArray(i)?i.map(n=>({name:e,[t]:[n]})):[s]}function Z2(s){const{name:t,attributes:e,classes:i,styles:n}=s,r=[];return e&&r.push(...gb({name:t,attributes:e},"attributes")),i&&r.push(...gb({name:t,classes:i},"classes")),n&&r.push(...gb({name:t,styles:n},"styles")),r}class jq extends F{static get requires(){return[Dt]}static get pluginName(){return"CodeBlockElementSupport"}static get isOfficialPlugin(){return!0}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;const t=this.editor.plugins.get(Dt);t.on("register:pre",(e,i)=>{if(i.model!=="codeBlock")return;const n=this.editor,r=n.model.schema,o=n.conversion;r.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),o.for("upcast").add(Gq(t)),o.for("downcast").add(Yq()),e.stop()})}}function Gq(s){return t=>{t.on("element:code",(e,i,n)=>{const r=i.viewItem,o=r.parent;if(!o||!o.is("element","pre"))return;l(o,"htmlPreAttributes"),l(r,"htmlContentAttributes");function l(a,c){const h=s.processViewAttributes(a,n);h&&n.writer.setAttribute(c,h,i.modelRange)}},{priority:"low"})}}function Yq(){return s=>{s.on("attribute:htmlPreAttributes:codeBlock",(t,e,i)=>{if(!i.consumable.consume(e.item,t.name))return;const{attributeOldValue:n,attributeNewValue:r}=e,l=i.mapper.toViewElement(e.item).parent;sr(i.writer,n,r,l)}),s.on("attribute:htmlContentAttributes:codeBlock",(t,e,i)=>{if(!i.consumable.consume(e.item,t.name))return;const{attributeOldValue:n,attributeNewValue:r}=e,o=i.mapper.toViewElement(e.item);sr(i.writer,n,r,o)})}}class Kq extends F{static get requires(){return[Dt]}static get pluginName(){return"DualContentModelElementSupport"}static get isOfficialPlugin(){return!0}init(){this.editor.plugins.get(Dt).on("register",(e,i)=>{const n=i,r=this.editor,o=r.model.schema,l=r.conversion;if(!n.paragraphLikeModel||o.isRegistered(n.model)||o.isRegistered(n.paragraphLikeModel))return;const a={model:n.paragraphLikeModel,view:n.view};o.register(n.model,n.modelSchema),o.register(a.model,{inheritAllFrom:"$block"}),l.for("upcast").elementToElement({view:n.view,model:(c,{writer:h})=>this._hasBlockContent(c)?h.createElement(n.model):h.createElement(a.model),converterPriority:Ki.low+.5}),l.for("downcast").elementToElement({view:n.view,model:n.model}),this._addAttributeConversion(n),l.for("downcast").elementToElement({view:a.view,model:a.model}),this._addAttributeConversion(a),e.stop()})}_hasBlockContent(t){const e=this.editor.editing.view,i=e.domConverter.blockElements;for(const n of e.createRangeIn(t).getItems())if(n.is("element")&&i.includes(n.name))return!0;return!1}_addAttributeConversion(t){const e=this.editor,i=e.conversion,n=e.plugins.get(Dt);e.model.schema.extend(t.model,{allowAttributes:rs(t.view)}),i.for("upcast").add(rc(t,n)),i.for("downcast").add(Sh(t))}}class Jq extends F{static get requires(){return[oc,pp]}static get pluginName(){return"HeadingElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("HeadingEditing"))return;const e=t.config.get("heading.options");this.registerHeadingElements(t,e)}registerHeadingElements(t,e){const i=t.plugins.get(oc),n=[];for(const r of e)"model"in r&&"view"in r&&(i.registerBlockElement({view:r.view,model:r.model}),n.push(r.model));i.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:n}}),i.extendBlockElement({model:"htmlSummary",modelSchema:{allowChildren:n}})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ch(s,t,e){const i=s.createRangeOn(t);for(const{item:n}of i.getWalker())if(n.is("element",e))return n}class eX extends F{static get requires(){return[Dt]}static get pluginName(){return"ImageElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("ImageInlineEditing")&&!t.plugins.has("ImageBlockEditing"))return;const e=t.model.schema,i=t.conversion,n=t.plugins.get(Dt);n.on("register:figure",()=>{i.for("upcast").add(nX(n))}),n.on("register:img",(r,o)=>{o.model!=="imageBlock"&&o.model!=="imageInline"||(e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),i.for("upcast").add(tX(n)),i.for("downcast").add(sX()),t.plugins.has("LinkImage")&&i.for("upcast").add(iX(n,t)),r.stop())})}}function tX(s){return t=>{t.on("element:img",(e,i,n)=>{if(!i.modelRange)return;const r=i.viewItem,o=s.processViewAttributes(r,n);o&&n.writer.setAttribute("htmlImgAttributes",o,i.modelRange)},{priority:"low"})}}function iX(s,t){const e=t.plugins.get("ImageUtils");return i=>{i.on("element:a",(n,r,o)=>{const l=r.viewItem;if(!e.findViewImgElement(l))return;const c=r.modelCursor.parent;if(!c.is("element","imageBlock"))return;const h=s.processViewAttributes(l,o);h&&o.writer.setAttribute("htmlLinkAttributes",h,c)},{priority:"low"})}}function nX(s){return t=>{t.on("element:figure",(e,i,n)=>{const r=i.viewItem;if(!i.modelRange||!r.hasClass("image"))return;const o=s.processViewAttributes(r,n);o&&n.writer.setAttribute("htmlFigureAttributes",o,i.modelRange)},{priority:"low"})}}function sX(){return s=>{t("htmlImgAttributes"),e("img","htmlImgAttributes"),e("figure","htmlFigureAttributes"),e("a","htmlLinkAttributes");function t(i){s.on(`attribute:${i}:imageInline`,(n,r,o)=>{if(!o.consumable.consume(r.item,n.name))return;const{attributeOldValue:l,attributeNewValue:a}=r,c=o.mapper.toViewElement(r.item);sr(o.writer,l,a,c)},{priority:"low"})}function e(i,n){s.on(`attribute:${n}:imageBlock`,(r,o,l)=>{if(!l.consumable.test(o.item,r.name))return;const{attributeOldValue:a,attributeNewValue:c}=o,h=l.mapper.toViewElement(o.item),f=Ch(l.writer,h,i);f&&(sr(l.writer,a,c,f),l.consumable.consume(o.item,r.name))},{priority:"low"}),i==="a"&&s.on("attribute:linkHref:imageBlock",(r,o,l)=>{if(!l.consumable.consume(o.item,"attribute:htmlLinkAttributes:imageBlock"))return;const a=l.mapper.toViewElement(o.item),c=Ch(l.writer,a,"a");rr(l.writer,o.item.getAttribute("htmlLinkAttributes"),c)},{priority:"low"})}}}class rX extends F{static get requires(){return[Dt]}static get pluginName(){return"MediaEmbedElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("MediaEmbed")||t.config.get("mediaEmbed.previewsInData"))return;const e=t.model.schema,i=t.conversion,n=this.editor.plugins.get(Dt),r=this.editor.plugins.get(oc),o=t.config.get("mediaEmbed.elementName");r.registerBlockElement({model:"media",view:o}),n.on("register:figure",()=>{i.for("upcast").add(lX(n))}),n.on(`register:${o}`,(l,a)=>{a.model==="media"&&(e.extend("media",{allowAttributes:[rs(o),"htmlFigureAttributes"]}),i.for("upcast").add(oX(n,o)),i.for("dataDowncast").add(aX(o)),l.stop())})}}function oX(s,t){const e=(i,n,r)=>{const o=n.viewItem;l(o,rs(t));function l(a,c){const h=s.processViewAttributes(a,r);h&&r.writer.setAttribute(c,h,n.modelRange)}};return i=>{i.on(`element:${t}`,e,{priority:"low"})}}function lX(s){return t=>{t.on("element:figure",(e,i,n)=>{const r=i.viewItem;if(!i.modelRange||!r.hasClass("media"))return;const o=s.processViewAttributes(r,n);o&&n.writer.setAttribute("htmlFigureAttributes",o,i.modelRange)},{priority:"low"})}}function aX(s){return t=>{e(s,rs(s)),e("figure","htmlFigureAttributes");function e(i,n){t.on(`attribute:${n}:media`,(r,o,l)=>{if(!l.consumable.consume(o.item,r.name))return;const{attributeOldValue:a,attributeNewValue:c}=o,h=l.mapper.toViewElement(o.item),f=Ch(l.writer,h,i);sr(l.writer,a,c,f)})}}}class cX extends F{static get requires(){return[Dt]}static get pluginName(){return"ScriptElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.plugins.get(Dt);t.on("register:script",(e,i)=>{const n=this.editor,r=n.model.schema,o=n.conversion;r.register("htmlScript",i.modelSchema),r.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),n.data.registerRawContentMatcher({name:"script"}),o.for("upcast").elementToElement({view:"script",model:ny(i)}),o.for("upcast").add(rc(i,t)),o.for("downcast").elementToElement({model:"htmlScript",view:(l,{writer:a})=>bp("script",l,a)}),o.for("downcast").add(Sh(i)),e.stop()})}}const uX=["width","max-width","min-width","height","min-height","max-height"];class hX extends F{static get requires(){return[Dt]}static get pluginName(){return"TableElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("TableEditing"))return;const e=t.model.schema,i=t.conversion,n=t.plugins.get(Dt),r=t.plugins.get("TableUtils");n.on("register:figure",()=>{i.for("upcast").add(mX(n))}),n.on("register:table",(o,l)=>{l.model==="table"&&(e.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),i.for("upcast").add(fX(n)),i.for("downcast").add(gX()),t.model.document.registerPostFixer(dX(t.model,r)),o.stop())})}}function dX(s,t){return e=>{const i=s.document.differ.getChanges();let n=!1;for(const r of i){if(r.type!="attribute"||r.attributeKey!="headingRows")continue;const o=r.range.start.nodeAfter,l=o.getAttribute("htmlTheadAttributes"),a=o.getAttribute("htmlTbodyAttributes");l&&!r.attributeNewValue?(e.removeAttribute("htmlTheadAttributes",o),n=!0):a&&r.attributeNewValue==t.getRows(o)&&(e.removeAttribute("htmlTbodyAttributes",o),n=!0)}return n}}function fX(s){return t=>{t.on("element:table",(e,i,n)=>{if(!i.modelRange)return;const r=i.viewItem;o(r,"htmlTableAttributes");for(const l of r.getChildren())l.is("element","thead")&&o(l,"htmlTheadAttributes"),l.is("element","tbody")&&o(l,"htmlTbodyAttributes");function o(l,a){const c=s.processViewAttributes(l,n);c&&n.writer.setAttribute(a,c,i.modelRange)}},{priority:"low"})}}function mX(s){return t=>{t.on("element:figure",(e,i,n)=>{const r=i.viewItem;if(!i.modelRange||!r.hasClass("table"))return;const o=s.processViewAttributes(r,n);o&&n.writer.setAttribute("htmlFigureAttributes",o,i.modelRange)},{priority:"low"})}}function gX(){return s=>{t("table","htmlTableAttributes"),t("figure","htmlFigureAttributes"),t("thead","htmlTheadAttributes"),t("tbody","htmlTbodyAttributes");function t(e,i){s.on(`attribute:${i}:table`,(n,r,o)=>{if(!o.consumable.test(r.item,n.name))return;const l=o.mapper.toViewElement(r.item),a=Ch(o.writer,l,e);if(a)if(o.consumable.consume(r.item,n.name),i==="htmlTableAttributes"&&l!==a){const c=H2(r.attributeOldValue),h=H2(r.attributeNewValue);sr(o.writer,c.tableAttributes,h.tableAttributes,a),sr(o.writer,c.figureAttributes,h.figureAttributes,l)}else sr(o.writer,r.attributeOldValue,r.attributeNewValue,a)})}}}function H2(s){const t={},e={...s};if(!s||!("styles"in s))return{figureAttributes:t,tableAttributes:e};e.styles={};for(const[i,n]of Object.entries(s.styles))uX.includes(i)?t.styles={...t.styles,[i]:n}:e.styles={...e.styles,[i]:n};return{figureAttributes:t,tableAttributes:e}}class pX extends F{static get requires(){return[Dt]}static get pluginName(){return"StyleElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.plugins.get(Dt);t.on("register:style",(e,i)=>{const n=this.editor,r=n.model.schema,o=n.conversion;r.register("htmlStyle",i.modelSchema),r.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),n.data.registerRawContentMatcher({name:"style"}),o.for("upcast").elementToElement({view:"style",model:ny(i)}),o.for("upcast").add(rc(i,t)),o.for("downcast").elementToElement({model:"htmlStyle",view:(l,{writer:a})=>bp("style",l,a)}),o.for("downcast").add(Sh(i)),e.stop()})}}class wX extends F{static get requires(){return[Dt]}static get pluginName(){return"ListElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("ListEditing"))return;const e=t.model.schema,i=t.conversion,n=t.plugins.get(Dt),r=t.plugins.get("ListEditing"),o=t.plugins.get("ListUtils"),l=["ul","ol","li"];r.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:rr}),r.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:rr}),r.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:rr}),n.on("register",(a,c)=>{if(!l.includes(c.view)||(a.stop(),e.checkAttribute("$block","htmlLiAttributes")))return;const h=l.map(f=>rs(f));e.extend("$listItem",{allowAttributes:h}),i.for("upcast").add(f=>{f.on("element:ul",pb("htmlUlAttributes",n),{priority:"low"}),f.on("element:ol",pb("htmlOlAttributes",n),{priority:"low"}),f.on("element:li",pb("htmlLiAttributes",n),{priority:"low"})})}),r.on("postFixer",(a,{listNodes:c,writer:h})=>{for(const{node:f,previousNodeInList:m}of c)if(m){if(m.getAttribute("listType")==f.getAttribute("listType")){const w=q2(m.getAttribute("listType")),O=m.getAttribute(w);!xl(f.getAttribute(w),O)&&h.model.schema.checkAttribute(f,w)&&(h.setAttribute(w,O,f),a.return=!0)}if(m.getAttribute("listItemId")==f.getAttribute("listItemId")){const w=m.getAttribute("htmlLiAttributes");!xl(f.getAttribute("htmlLiAttributes"),w)&&h.model.schema.checkAttribute(f,"htmlLiAttributes")&&(h.setAttribute("htmlLiAttributes",w,f),a.return=!0)}}}),r.on("postFixer",(a,{listNodes:c,writer:h})=>{for(const{node:f}of c){const m=f.getAttribute("listType");!o.isNumberedListType(m)&&f.getAttribute("htmlOlAttributes")&&(h.removeAttribute("htmlOlAttributes",f),a.return=!0),o.isNumberedListType(m)&&f.getAttribute("htmlUlAttributes")&&(h.removeAttribute("htmlUlAttributes",f),a.return=!0)}})}afterInit(){const t=this.editor;if(!t.commands.get("indentList"))return;const e=t.commands.get("indentList");this.listenTo(e,"afterExecute",(i,n)=>{t.model.change(r=>{for(const o of n){const l=q2(o.getAttribute("listType"));t.model.schema.checkAttribute(o,l)&&r.setAttribute(l,{},o)}})})}}function pb(s,t){return(e,i,n)=>{const r=i.viewItem;i.modelRange||Object.assign(i,n.convertChildren(i.viewItem,i.modelCursor));const o=t.processViewAttributes(r,n);for(const l of i.modelRange.getItems({shallow:!0}))l.hasAttribute("listItemId")&&(l.hasAttribute("htmlUlAttributes")||l.hasAttribute("htmlOlAttributes")||n.writer.model.schema.checkAttribute(l,s)&&n.writer.setAttribute(s,o||{},l))}}function q2(s){return s==="numbered"||s=="customNumbered"?"htmlOlAttributes":"htmlUlAttributes"}class bX extends F{static get requires(){return[Dt]}static get pluginName(){return"HorizontalLineElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("HorizontalLineEditing"))return;const e=t.model.schema,i=t.conversion,n=t.plugins.get(Dt);n.on("register:hr",(r,o)=>{o.model==="horizontalLine"&&(e.extend("horizontalLine",{allowAttributes:["htmlHrAttributes"]}),i.for("upcast").add(rc(o,n)),i.for("downcast").add(OX()),r.stop())})}}function OX(){return s=>{s.on("attribute:htmlHrAttributes:horizontalLine",(t,e,i)=>{if(!i.consumable.test(e.item,t.name))return;const{attributeOldValue:n,attributeNewValue:r}=e,o=i.mapper.toViewElement(e.item),l=Ch(i.writer,o,"hr");l&&(sr(i.writer,n,r,l),i.consumable.consume(e.item,t.name))},{priority:"low"})}}class xX extends F{static get requires(){return[Dt,oc]}static get pluginName(){return"CustomElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.plugins.get(Dt),e=this.editor.plugins.get(oc);t.on("register:$customElement",(i,n)=>{i.stop();const r=this.editor,o=r.model.schema,l=r.conversion,a=r.editing.view.domConverter.unsafeElements,c=r.data.htmlProcessor.domConverter.preElements;o.register(n.model,n.modelSchema),o.extend(n.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),r.data.htmlProcessor.domConverter.registerRawContentMatcher({name:"template"}),l.for("upcast").elementToElement({view:/.*/,model:(h,f)=>{if(h.name=="$comment"||!yX(h.name)||e.getDefinitionsForView(h.name).size)return null;a.includes(h.name)||a.push(h.name),c.includes(h.name)||c.push(h.name);const m=f.writer.createElement(n.model,{htmlElementName:h.name}),w=t.processViewAttributes(h,f);w&&f.writer.setAttribute("htmlCustomElementAttributes",w,m);let O;if(h.is("element","template")&&h.getCustomProperty("$rawContent"))O=h.getCustomProperty("$rawContent");else{const k=new zn(h.document).createDocumentFragment(h),C=r.data.htmlProcessor.domConverter.viewToDom(k),P=C.firstChild;for(;P.firstChild;)C.appendChild(P.firstChild);P.remove(),O=r.data.htmlProcessor.htmlWriter.getHtml(C)}f.writer.setAttribute("htmlContent",O,m);for(const{item:v}of r.editing.view.createRangeIn(h))f.consumable.consume(v,{name:!0});return m},converterPriority:"low"}),l.for("editingDowncast").elementToElement({model:{name:n.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(h,{writer:f})=>{const m=h.getAttribute("htmlElementName"),w=f.createRawElement(m);return h.hasAttribute("htmlCustomElementAttributes")&&rr(f,h.getAttribute("htmlCustomElementAttributes"),w),w}}),l.for("dataDowncast").elementToElement({model:{name:n.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(h,{writer:f})=>{const m=h.getAttribute("htmlElementName"),w=h.getAttribute("htmlContent"),O=f.createRawElement(m,null,(v,k)=>{k.setContentOf(v,w)});return h.hasAttribute("htmlCustomElementAttributes")&&rr(f,h.getAttribute("htmlCustomElementAttributes"),O),O}})})}}function yX(s){try{document.createElement(s)}catch{return!1}return!0}class vX extends F{static get pluginName(){return"GeneralHtmlSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[Dt,jq,Kq,Jq,eX,rX,cX,hX,pX,wX,bX,xX]}init(){const t=this.editor,e=t.plugins.get(Dt);e.loadAllowedEmptyElementsConfig(t.config.get("htmlSupport.allowEmpty")||[]),e.loadAllowedConfig(t.config.get("htmlSupport.allow")||[]),e.loadDisallowedConfig(t.config.get("htmlSupport.disallow")||[])}getGhsAttributeNameForElement(t){const e=this.editor.plugins.get("DataSchema"),i=Array.from(e.getDefinitionsForView(t,!1)),n=i.find(r=>r.isInline&&!i[0].isObject);return n?n.model:rs(t)}addModelHtmlClass(t,e,i){const n=this.editor.model,r=this.getGhsAttributeNameForElement(t);n.change(o=>{for(const l of Pa(n,i,r))Ca(o,l,r,"classes",a=>{for(const c of ut(e))a.add(c)})})}removeModelHtmlClass(t,e,i){const n=this.editor.model,r=this.getGhsAttributeNameForElement(t);n.change(o=>{for(const l of Pa(n,i,r))Ca(o,l,r,"classes",a=>{for(const c of ut(e))a.delete(c)})})}setModelHtmlAttributes(t,e,i){const n=this.editor.model,r=this.getGhsAttributeNameForElement(t);n.change(o=>{for(const l of Pa(n,i,r))Ca(o,l,r,"attributes",a=>{for(const[c,h]of Object.entries(e))a.set(c,h)})})}removeModelHtmlAttributes(t,e,i){const n=this.editor.model,r=this.getGhsAttributeNameForElement(t);n.change(o=>{for(const l of Pa(n,i,r))Ca(o,l,r,"attributes",a=>{for(const c of ut(e))a.delete(c)})})}setModelHtmlStyles(t,e,i){const n=this.editor.model,r=this.getGhsAttributeNameForElement(t);n.change(o=>{for(const l of Pa(n,i,r))Ca(o,l,r,"styles",a=>{for(const[c,h]of Object.entries(e))a.set(c,h)})})}removeModelHtmlStyles(t,e,i){const n=this.editor.model,r=this.getGhsAttributeNameForElement(t);n.change(o=>{for(const l of Pa(n,i,r))Ca(o,l,r,"styles",a=>{for(const c of ut(e))a.delete(c)})})}}function*Pa(s,t,e){if(t)if(!(Symbol.iterator in t)&&t.is("documentSelection")&&t.isCollapsed)s.schema.checkAttributeInSelection(t,e)&&(yield t);else for(const i of _X(s,t,e))yield*i.getItems({shallow:!0})}function _X(s,t,e){return!(Symbol.iterator in t)&&(t.is("node")||t.is("$text")||t.is("$textProxy"))?s.schema.checkAttribute(t,e)?[s.createRangeOn(t)]:[]:s.schema.getValidRanges(s.createSelection(t).getRanges(),e)}class kX extends F{static get pluginName(){return"HtmlComment"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=new Map;t.data.processor.skipComments=!1,t.model.schema.addAttributeCheck((i,n)=>{if(i.endsWith("$root")&&n.startsWith("$comment"))return!0}),t.conversion.for("upcast").elementToMarker({view:"$comment",model:i=>{const r=`$comment:${ii()}`,o=i.getCustomProperty("$rawContent");return e.set(r,o),r}}),t.conversion.for("dataDowncast").markerToElement({model:"$comment",view:(i,{writer:n})=>{let r;for(const c of this.editor.model.document.getRootNames())if(r=this.editor.model.document.getRoot(c),r.hasAttribute(i.markerName))break;const o=i.markerName,l=r.getAttribute(o),a=n.createUIElement("$comment");return n.setCustomProperty("$rawContent",l,a),a}}),t.model.document.registerPostFixer(i=>{let n=!1;const r=t.model.document.differ.getChangedMarkers().filter(o=>o.name.startsWith("$comment:"));for(const o of r){const{oldRange:l,newRange:a}=o.data;if(!(l&&a&&l.root==a.root)){if(l){const c=l.root;c.hasAttribute(o.name)&&(i.removeAttribute(o.name,c),n=!0)}if(a){const c=a.root;c.rootName=="$graveyard"?(i.removeMarker(o.name),n=!0):c.hasAttribute(o.name)||(i.setAttribute(o.name,e.get(o.name)||"",c),n=!0)}}}return n}),t.data.on("set",()=>{for(const i of t.model.markers.getMarkersGroup("$comment"))this.removeHtmlComment(i.name)},{priority:"high"}),t.model.on("deleteContent",(i,[n])=>{for(const r of n.getRanges()){const o=t.model.schema.getLimitElement(r),l=t.model.createPositionAt(o,0),a=t.model.createPositionAt(o,"end");let c;l.isTouching(r.start)&&a.isTouching(r.end)?c=this.getHtmlCommentsInRange(t.model.createRange(l,a)):c=this.getHtmlCommentsInRange(r,{skipBoundaries:!0});for(const h of c)this.removeHtmlComment(h)}},{priority:"high"})}createHtmlComment(t,e){const i=ii(),r=this.editor.model,o=r.document.getRoot(t.root.rootName),l=`$comment:${i}`;return r.change(a=>{const c=a.createRange(t);return a.addMarker(l,{usingOperation:!0,affectsData:!0,range:c}),a.setAttribute(l,e,o),l})}removeHtmlComment(t){const e=this.editor,i=e.model.markers.get(t);return i?(e.model.change(n=>{n.removeMarker(i)}),!0):!1}getHtmlCommentData(t){const i=this.editor.model.markers.get(t);if(!i)return null;let n="";for(const r of this.editor.model.document.getRoots())if(r.hasAttribute(t)){n=r.getAttribute(t);break}return{content:n,position:i.getStart()}}getHtmlCommentsInRange(t,{skipBoundaries:e=!1}={}){const i=!e;return Array.from(this.editor.model.markers.getMarkersGroup("$comment")).filter(r=>n(r,t)).map(r=>r.name);function n(r,o){const l=r.getRange().start;return(l.isAfter(o.start)||i&&l.isEqual(o.start))&&(l.isBefore(o.end)||i&&l.isEqual(o.end))}}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function SX(s){return s.createContainerElement("span",{class:"image-inline"},s.createEmptyElement("img"))}function X2(s){return s.createContainerElement("figure",{class:"image"},[s.createEmptyElement("img"),s.createSlot("children")])}function DI(s,t){const e=s.plugins.get("ImageUtils"),i=s.plugins.has("ImageInlineEditing")&&s.plugins.has("ImageBlockEditing");return r=>e.isInlineImageView(r)?i&&(r.getStyle("display")=="block"||r.findAncestor(e.isBlockImageView)?"imageBlock":"imageInline")!==t?null:n(r):null;function n(r){const o={name:!0};return r.hasAttribute("src")&&(o.attributes=["src"]),o}}function sy(s,t){const e=Nt(t.getSelectedBlocks());return!e||s.isObject(e)||e.isEmpty&&e.name!="listItem"?"imageBlock":"imageInline"}function vg(s){return s&&s.endsWith("px")?parseInt(s):null}function _g(s){const t=vg(s.getStyle("width")),e=vg(s.getStyle("height"));return!!(t&&e)}const CX=/^(image|image-inline)$/;class yi extends F{constructor(){super(...arguments);p(this,"_domEmitter",new(Zi()))}static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},i=null,n=null,r={}){const o=this.editor,l=o.model,a=l.document.selection,c=NI(o,i||a,n);e={...Object.fromEntries(a.getAttributes()),...e};for(const h in e)l.schema.checkAttribute(c,h)||delete e[h];return l.change(h=>{const{setImageSizes:f=!0}=r,m=h.createElement(c,e);return l.insertObject(m,i,null,{setSelection:"on",findOptimalPosition:!i&&c!="imageInline"?"auto":void 0}),m.parent?(f&&this.setImageNaturalSizeAttributes(m),m):null})}setImageNaturalSizeAttributes(e){const i=e.getAttribute("src");i&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(n=>{const r=new ue.window.Image;this._domEmitter.listenTo(r,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(n.batch,o=>{o.setAttribute("width",r.naturalWidth,e),o.setAttribute("height",r.naturalHeight,e)}),this._domEmitter.stopListening(r,"load")}),r.src=i}))}getClosestSelectedImageWidget(e){const i=e.getFirstPosition();if(!i)return null;const n=e.getSelectedElement();if(n&&this.isImageWidget(n))return n;let r=i.parent;for(;r;){if(r.is("element")&&this.isImageWidget(r))return r;r=r.parent}return null}getClosestSelectedImageElement(e){const i=e.getSelectedElement();return this.isImage(i)?i:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:CX})}isImageAllowed(){const i=this.editor.model.document.selection;return PX(this.editor,i)&&TX(i)}toImageWidget(e,i,n){return i.setCustomProperty("image",!0,e),nd(e,i,{label:()=>{const l=this.findViewImgElement(e).getAttribute("alt");return l?`${l} ${n}`:n}})}isImageWidget(e){return!!e.getCustomProperty("image")&&Wt(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const i=this.editor.editing.view;for(const{item:n}of i.createRangeIn(e))if(this.isInlineImageView(n))return n}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function PX(s,t){if(NI(s,t,null)=="imageBlock"){const i=EX(t,s.model);if(s.model.schema.checkChild(i,"imageBlock"))return!0}else if(s.model.schema.checkChild(t.focus,"imageInline"))return!0;return!1}function TX(s){return[...s.focus.getAncestors()].every(t=>!t.is("element","imageBlock"))}function EX(s,t){const i=_I(s,t).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}function NI(s,t,e){const i=s.model.schema,n=s.config.get("image.insert.type");return s.plugins.has("ImageBlockEditing")?s.plugins.has("ImageInlineEditing")?e||(n==="inline"?"imageInline":n!=="auto"?"imageBlock":t.is("selection")?sy(i,t):i.checkChild(t,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}const AX=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class IX extends F{constructor(e){super(e);p(this,"_timeoutId");p(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[VI,yi,QI,Dl]}static get pluginName(){return"AutoImage"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.model.document,n=e.plugins.get("ClipboardPipeline");this.listenTo(n,"inputTransformation",()=>{const r=i.selection.getFirstRange(),o=qt.fromPosition(r.start);o.stickiness="toPrevious";const l=qt.fromPosition(r.end);l.stickiness="toNext",i.once("change:data",()=>{this._embedImageBetweenPositions(o,l),o.detach(),l.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(ue.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(e,i){const n=this.editor,r=new pn(e,i),o=r.getWalker({ignoreElementEnd:!0}),l=Object.fromEntries(n.model.document.selection.getAttributes()),a=this.editor.plugins.get("ImageUtils");let c="";for(const h of o)h.item.is("$textProxy")&&(c+=h.item.data);if(c=c.trim(),!c.match(AX)){r.detach();return}this._positionToInsert=qt.fromPosition(e),this._timeoutId=setTimeout(()=>{if(!n.commands.get("insertImage").isEnabled){r.detach();return}n.model.change(m=>{this._timeoutId=null,m.remove(r),r.detach();let w;this._positionToInsert.root.rootName!=="$graveyard"&&(w=this._positionToInsert.toPosition()),a.insertImage({...l,src:c},w),this._positionToInsert.detach(),this._positionToInsert=null}),n.plugins.get("Delete").requestUndoOnBackspace()},100)}}class RX extends Le{refresh(){const i=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!i,this.isEnabled&&i.hasAttribute("alt")?this.value=i.getAttribute("alt"):this.value=!1}execute(t){const e=this.editor,i=e.plugins.get("ImageUtils"),n=e.model,r=i.getClosestSelectedImageElement(n.document.selection);n.change(o=>{o.setAttribute("alt",t.newValue,r)})}}class VX extends F{static get requires(){return[yi]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new RX(this.editor))}}class MX extends he{constructor(e){super(e);p(this,"focusTracker");p(this,"keystrokes");p(this,"labeledInput");p(this,"backButtonView");p(this,"saveButtonView");p(this,"children");p(this,"_focusables");p(this,"_focusCycler");this.focusTracker=new ht,this.keystrokes=new bt,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new Ti(e,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new hi,this.keystrokes.set("Esc",(i,n)=>{this.fire("cancel"),n()}),this._focusCycler=new Kt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Bl({view:this}),[this.backButtonView,this.labeledInput,this.saveButtonView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const e=this.locale.t,i=new ve(this.locale);return i.set({class:"ck-button-back",label:e("Back"),icon:Ll,tooltip:!0}),i.delegate("execute").to(this,"cancel"),i}_createSaveButton(){const e=this.locale.t,i=new ve(this.locale);return i.set({label:e("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),i}_createHeaderView(){const e=this.locale.t,i=new Nr(this.locale,{label:e("Text Alternative")});return i.children.add(this.backButtonView,0),i}_createLabeledInputView(){const e=this.locale.t,i=new jt(this.locale,wn);return i.label=e("Text alternative"),i.class="ck-labeled-field-view_full-width",i}}function LX(s){const t=s.plugins.get("ContextualBalloon");if(s.plugins.get("ImageUtils").getClosestSelectedImageWidget(s.editing.view.document.selection)){const i=ry(s);t.updatePosition(i)}}function ry(s){const t=s.editing.view,e=Gi.defaultPositions,i=s.plugins.get("ImageUtils");return{target:t.domConverter.mapViewToDom(i.getClosestSelectedImageWidget(t.document.selection)),positions:[e.northArrowSouth,e.northArrowSouthWest,e.northArrowSouthEast,e.southArrowNorth,e.southArrowNorthWest,e.southArrowNorthEast,e.viewportStickyNorth]}}class BX extends F{constructor(){super(...arguments);p(this,"_balloon");p(this,"_form")}static get requires(){return[hs]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,i=e.t;e.ui.componentFactory.add("imageTextAlternative",n=>{const r=e.commands.get("imageTextAlternative"),o=new ve(n);return o.set({label:i("Change image text alternative"),icon:tz,tooltip:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",l=>!!l),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const e=this.editor,n=e.editing.view.document,r=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(dg(MX))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this.listenTo(e.ui,"update",()=>{r.getClosestSelectedImageWidget(n.selection)?this._isVisible&&LX(e):this._hideForm(!0)}),Dr({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,i=e.commands.get("imageTextAlternative"),n=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:ry(e)}),n.fieldView.value=n.fieldView.element.value=i.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class oy extends F{static get requires(){return[VX,BX]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function $X(s){const t=(e,i,n)=>{if(!n.consumable.test(i.viewItem,{name:!0,classes:"image"}))return;const r=s.findViewImgElement(i.viewItem);if(!r||!n.consumable.test(r,{name:!0}))return;n.consumable.consume(i.viewItem,{name:!0,classes:"image"});const o=n.convertItem(r,i.modelCursor),l=Nt(o.modelRange.getItems());if(!l){n.consumable.revert(i.viewItem,{name:!0,classes:"image"});return}n.convertChildren(i.viewItem,l),n.updateConversionResult(l,i)};return e=>{e.on("element:figure",t)}}function QX(s){const t=["srcset","media","type","sizes"],e=(i,n,r)=>{const o=n.viewItem;if(!r.consumable.test(o,{name:!0}))return;const l=new Map;for(const h of o.getChildren())if(h.is("element","source")){const f={};for(const m of t)h.hasAttribute(m)&&r.consumable.test(h,{attributes:m})&&(f[m]=h.getAttribute(m));Object.keys(f).length&&l.set(h,f)}const a=s.findViewImgElement(o);if(!a)return;let c=n.modelCursor.parent;if(!c.is("element","imageBlock")){const h=r.convertItem(a,n.modelCursor);n.modelRange=h.modelRange,n.modelCursor=h.modelCursor,c=Nt(h.modelRange.getItems())}r.consumable.consume(o,{name:!0});for(const[h,f]of l)r.consumable.consume(h,{attributes:Object.keys(f)});l.size&&r.writer.setAttribute("sources",Array.from(l.values()),c),r.convertChildren(o,c)};return i=>{i.on("element:picture",e)}}function FI(s,t){const e=(i,n,r)=>{if(!r.consumable.consume(n.item,i.name))return;const o=r.writer,l=r.mapper.toViewElement(n.item),a=s.findViewImgElement(l);n.attributeNewValue===null?(o.removeAttribute("srcset",a),o.removeAttribute("sizes",a)):n.attributeNewValue&&(o.setAttribute("srcset",n.attributeNewValue,a),o.setAttribute("sizes","100vw",a))};return i=>{i.on(`attribute:srcset:${t}`,e)}}function DX(s){const t=(e,i,n)=>{if(!n.consumable.consume(i.item,e.name))return;const r=n.writer,o=n.mapper.toViewElement(i.item),l=s.findViewImgElement(o),a=i.attributeNewValue;if(a&&a.length){const c=[];let h=l.parent;for(;h&&h.is("attributeElement");){const w=h.parent;r.unwrap(r.createRangeOn(l),h),c.unshift(h),h=w}const f=l.parent.is("element","picture"),m=f?l.parent:r.createContainerElement("picture",null);f||r.insert(r.createPositionBefore(l),m),r.remove(r.createRangeIn(m)),r.insert(r.createPositionAt(m,"end"),a.map(w=>r.createEmptyElement("source",w))),r.move(r.createRangeOn(l),r.createPositionAt(m,"end"));for(const w of c)r.wrap(r.createRangeOn(m),w)}else if(l.parent.is("element","picture")){const c=l.parent;r.move(r.createRangeOn(l),r.createPositionBefore(c)),r.remove(c)}};return e=>{e.on("attribute:sources:imageBlock",t),e.on("attribute:sources:imageInline",t)}}function kg(s,t,e){const i=(n,r,o)=>{if(!o.consumable.consume(r.item,n.name))return;const l=o.writer,a=o.mapper.toViewElement(r.item),c=s.findViewImgElement(a);l.setAttribute(r.attributeKey,r.attributeNewValue||"",c)};return n=>{n.on(`attribute:${e}:${t}`,i)}}class ly extends cr{observe(t){this.listenTo(t,"load",(e,i)=>{const n=i.target;this.checkShouldIgnoreEventFromTarget(n)||n.tagName=="IMG"&&this._fireEvents(i)},{useCapture:!0})}stopObserving(t){this.stopListening(t)}_fireEvents(t){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",t))}}class NX extends Le{constructor(t){super(t);const e=t.config.get("image.insert.type");t.plugins.has("ImageBlockEditing")||e==="block"&&We("image-block-plugin-required"),t.plugins.has("ImageInlineEditing")||e==="inline"&&We("image-inline-plugin-required")}refresh(){const t=this.editor.plugins.get("ImageUtils");this.isEnabled=t.isImageAllowed()}execute(t){const e=ut(t.source),i=this.editor.model.document.selection,n=this.editor.plugins.get("ImageUtils"),r=Object.fromEntries(i.getAttributes());e.forEach((o,l)=>{const a=i.getSelectedElement();if(typeof o=="string"&&(o={src:o}),l&&a&&n.isImage(a)){const c=this.editor.model.createPositionAfter(a);n.insertImage({...o,...r},c,t.imageType)}else t.breakBlock?n.insertImage({...o,...r},i.getFirstPosition(),t.imageType):n.insertImage({...o,...r},null,t.imageType)})}}class FX extends Le{constructor(t){super(t),this.decorate("cleanupImage")}refresh(){const e=this.editor.plugins.get("ImageUtils"),i=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e.isImage(i),this.value=this.isEnabled?i.getAttribute("src"):null}execute(t){const e=this.editor.model.document.selection.getSelectedElement(),i=this.editor.plugins.get("ImageUtils");this.editor.model.change(n=>{n.setAttribute("src",t.source,e),this.cleanupImage(n,e),i.setImageNaturalSizeAttributes(e)})}cleanupImage(t,e){t.removeAttribute("srcset",e),t.removeAttribute("sizes",e),t.removeAttribute("sources",e),t.removeAttribute("width",e),t.removeAttribute("height",e),t.removeAttribute("alt",e)}}class ay extends F{static get requires(){return[yi]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.conversion;t.editing.view.addObserver(ly),e.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const i=new NX(t),n=new FX(t);t.commands.add("insertImage",i),t.commands.add("replaceImageSource",n),t.commands.add("imageInsert",i)}}class zI extends F{static get requires(){return[yi]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(t){const e=this.editor,i=e.plugins.get("ImageUtils"),n=t==="imageBlock"?"figure":"img";e.conversion.for("upcast").attributeToAttribute({view:{name:n,styles:{width:/.+/}},model:{key:"width",value:o=>_g(o)?vg(o.getStyle("width")):null}}).attributeToAttribute({view:{name:n,key:"width"},model:"width"}).attributeToAttribute({view:{name:n,styles:{height:/.+/}},model:{key:"height",value:o=>_g(o)?vg(o.getStyle("height")):null}}).attributeToAttribute({view:{name:n,key:"height"},model:"height"}),e.conversion.for("editingDowncast").add(o=>{r(o,"width","width",!0,!0),r(o,"height","height",!0,!0)}),e.conversion.for("dataDowncast").add(o=>{r(o,"width","width",!1),r(o,"height","height",!1)}),e.conversion.for("upcast").add(o=>{o.on("element:img",(l,a,c)=>{const h=a.viewItem.getAttribute("width"),f=a.viewItem.getAttribute("height");h&&f&&c.consumable.consume(a.viewItem,{styles:["aspect-ratio"]})})});function r(o,l,a,c,h=!1){o.on(`attribute:${l}:${t}`,(f,m,w)=>{if(!w.consumable.consume(m.item,f.name))return;const O=w.writer,v=w.mapper.toViewElement(m.item),k=i.findViewImgElement(v);m.attributeNewValue!==null?O.setAttribute(a,m.attributeNewValue,k):O.removeAttribute(a,k);const C=m.item.getAttribute("width"),P=m.item.getAttribute("height"),V=C&&P;if(V&&h&&O.setAttribute("loading","lazy",k),m.item.hasAttribute("sources"))return;const Q=m.item.hasAttribute("resizedWidth");t==="imageInline"&&!Q&&!c||V&&O.setStyle("aspect-ratio",`${C}/${P}`,k)})}}}class WI extends Le{constructor(e,i){super(e);p(this,"_modelElementName");this._modelElementName=i}refresh(){const i=this.editor.plugins.get("ImageUtils"),n=i.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=i.isInlineImage(n):this.isEnabled=i.isBlockImage(n)}execute(e={}){const i=this.editor,n=this.editor.model,r=i.plugins.get("ImageUtils"),o=r.getClosestSelectedImageElement(n.document.selection),l=Object.fromEntries(o.getAttributes());return!l.src&&!l.uploadId?null:n.change(a=>{const{setImageSizes:c=!0}=e,h=Array.from(n.markers).filter(w=>w.getRange().containsItem(o)),f=r.insertImage(l,n.createSelection(o,"on"),this._modelElementName,{setImageSizes:c});if(!f)return null;const m=a.createRangeOn(f);for(const w of h){const O=w.getRange(),v=O.root.rootName!="$graveyard"?O.getJoined(m,!0):m;a.updateMarker(w,{range:v})}return{oldElement:o,newElement:f}})}}class UI extends F{static get requires(){return[yi]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const t=this.editor.model.schema;t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["placeholder"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const t=this.editor,e=t.conversion,i=t.plugins.get("ImageUtils");e.for("editingDowncast").add(n=>{n.on("attribute:placeholder",(r,o,l)=>{if(!l.consumable.test(o.item,r.name)||!o.item.is("element","imageBlock")&&!o.item.is("element","imageInline"))return;l.consumable.consume(o.item,r.name);const a=l.writer,c=l.mapper.toViewElement(o.item),h=i.findViewImgElement(c);o.attributeNewValue?(a.addClass("image_placeholder",h),a.setStyle("background-image",`url(${o.attributeNewValue})`,h),a.setCustomProperty("editingPipeline:doNotReuseOnce",!0,h)):(a.removeClass("image_placeholder",h),a.removeStyle("background-image",h))})})}_setupLoadListener(){const t=this.editor,e=t.model,i=t.editing,n=i.view,r=t.plugins.get("ImageUtils");n.addObserver(ly),this.listenTo(n.document,"imageLoaded",(o,l)=>{const a=n.domConverter.mapDomToView(l.target);if(!a)return;const c=r.getImageWidgetFromImageView(a);if(!c)return;const h=i.mapper.toModelElement(c);!h||!h.hasAttribute("placeholder")||e.enqueueChange({isUndoable:!1},f=>{f.removeAttribute("placeholder",h)})})}}class ZI extends F{static get requires(){return[ay,zI,yi,UI,vn]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),t.plugins.has("ImageInlineEditing")&&(t.commands.add("imageTypeBlock",new WI(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,i=t.conversion,n=t.plugins.get("ImageUtils");i.for("dataDowncast").elementToStructure({model:"imageBlock",view:(r,{writer:o})=>X2(o)}),i.for("editingDowncast").elementToStructure({model:"imageBlock",view:(r,{writer:o})=>n.toImageWidget(X2(o),o,e("image widget"))}),i.for("downcast").add(kg(n,"imageBlock","src")).add(kg(n,"imageBlock","alt")).add(FI(n,"imageBlock")),i.for("upcast").elementToElement({view:DI(t,"imageBlock"),model:(r,{writer:o})=>o.createElement("imageBlock",r.hasAttribute("src")?{src:r.getAttribute("src")}:void 0)}).add($X(n))}_setupClipboardIntegration(){const t=this.editor,e=t.model,i=t.editing.view,n=t.plugins.get("ImageUtils"),r=t.plugins.get("ClipboardPipeline");this.listenTo(r,"inputTransformation",(o,l)=>{const a=Array.from(l.content.getChildren());let c;if(!a.every(n.isInlineImageView))return;l.targetRanges?c=t.editing.mapper.toModelRange(l.targetRanges[0]):c=e.document.selection.getFirstRange();const h=e.createSelection(c);if(sy(e.schema,h)==="imageBlock"){const f=new zn(i.document),m=a.map(w=>f.createElement("figure",{class:"image"},w));l.content=f.createDocumentFragment(m)}}),this.listenTo(r,"contentInsertion",(o,l)=>{l.method==="paste"&&e.change(a=>{const c=a.createRangeIn(l.content);for(const h of c.getItems())h.is("element","imageBlock")&&n.setImageNaturalSizeAttributes(h)})})}}class zX extends he{constructor(e,i=[]){super(e);p(this,"focusTracker");p(this,"keystrokes");p(this,"_focusables");p(this,"_focusCycler");p(this,"children");this.focusTracker=new ht,this.keystrokes=new bt,this._focusables=new hi,this.children=this.createCollection(),this._focusCycler=new Kt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const n of i)this.children.add(n),this._focusables.add(n),n instanceof H6&&this._focusables.addMany(n.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),Bl({view:this});for(const i of this._focusables)this.focusTracker.add(i.element);this.keystrokes.listenTo(this.element);const e=i=>i.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class sd extends F{constructor(e){super(e);p(this,"dropdownView");p(this,"_integrations",new Map);e.config.define("image.insert.integrations",["upload","assetManager","url"])}static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[yi]}init(){const e=this.editor,i=e.model.document.selection,n=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=n.isImage(i.getSelectedElement())});const r=l=>this._createToolbarComponent(l),o=l=>this._createMenuBarComponent(l);e.ui.componentFactory.add("insertImage",r),e.ui.componentFactory.add("imageInsert",r),e.ui.componentFactory.add("menuBar:insertImage",o)}registerIntegration({name:e,observable:i,buttonViewCreator:n,formViewCreator:r,menuBarButtonViewCreator:o,requiresForm:l=!1,override:a=!1}){this._integrations.has(e)&&!a&&We("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:i,buttonViewCreator:n,menuBarButtonViewCreator:o,formViewCreator:r,requiresForm:l})}_createToolbarComponent(e){const i=this.editor,n=e.t,r=this._prepareIntegrations();if(!r.length)return null;let o;const l=r[0];if(r.length==1){if(!l.requiresForm)return l.buttonViewCreator(!0);o=l.buttonViewCreator(!0)}else{const h=l.buttonViewCreator(!1);o=new _c(e,h),o.tooltip=!0,o.bind("label").to(this,"isImageSelected",f=>n(f?"Replace image":"Insert image"))}const a=this.dropdownView=xn(e,o),c=r.map(({observable:h})=>typeof h=="function"?h():h);return a.bind("isEnabled").toMany(c,"isEnabled",(...h)=>h.some(f=>f)),a.once("change:isOpen",()=>{const h=r.flatMap(({formViewCreator:m})=>m(r.length==1)),f=new zX(i.locale,h);a.panelView.children.add(f)}),a}_createMenuBarComponent(e){const i=e.t,n=this._prepareIntegrations();if(!n.length)return null;const r=n.flatMap(({menuBarButtonViewCreator:a})=>a(n.length==1)),o=new nr(e),l=new _h(e);o.panelView.children.add(l),o.buttonView.set({icon:yF,label:i("Image")});for(const a of r){const c=new id(e,o);c.children.add(a),l.items.add(c),a.delegate("execute").to(o)}return o}_prepareIntegrations(){const i=this.editor.config.get("image.insert.integrations"),n=[];if(!i.length)return We("image-insert-integrations-not-specified"),n;for(const r of i){if(!this._integrations.has(r)){["upload","assetManager","url"].includes(r)||We("image-insert-unknown-integration",{item:r});continue}n.push(this._integrations.get(r))}return n.length||We("image-insert-integrations-not-registered"),n}}class WX extends F{static get requires(){return[ZI,Sc,oy,sd]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class UX extends F{static get requires(){return[ay,zI,yi,UI,vn]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),t.plugins.has("ImageBlockEditing")&&(t.commands.add("imageTypeInline",new WI(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,i=t.conversion,n=t.plugins.get("ImageUtils");i.for("dataDowncast").elementToElement({model:"imageInline",view:(r,{writer:o})=>o.createEmptyElement("img")}),i.for("editingDowncast").elementToStructure({model:"imageInline",view:(r,{writer:o})=>n.toImageWidget(SX(o),o,e("image widget"))}),i.for("downcast").add(kg(n,"imageInline","src")).add(kg(n,"imageInline","alt")).add(FI(n,"imageInline")),i.for("upcast").elementToElement({view:DI(t,"imageInline"),model:(r,{writer:o})=>o.createElement("imageInline",r.hasAttribute("src")?{src:r.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const t=this.editor,e=t.model,i=t.editing.view,n=t.plugins.get("ImageUtils"),r=t.plugins.get("ClipboardPipeline");this.listenTo(r,"inputTransformation",(o,l)=>{const a=Array.from(l.content.getChildren());let c;if(!a.every(n.isBlockImageView))return;l.targetRanges?c=t.editing.mapper.toModelRange(l.targetRanges[0]):c=e.document.selection.getFirstRange();const h=e.createSelection(c);if(sy(e.schema,h)==="imageInline"){const f=new zn(i.document),m=a.map(w=>w.childCount===1?(Array.from(w.getAttributes()).forEach(O=>f.setAttribute(...O,n.findViewImgElement(w))),w.getChild(0)):w);l.content=f.createDocumentFragment(m)}}),this.listenTo(r,"contentInsertion",(o,l)=>{l.method==="paste"&&e.change(a=>{const c=a.createRangeIn(l.content);for(const h of c.getItems())h.is("element","imageInline")&&n.setImageNaturalSizeAttributes(h)})})}}class ZX extends F{static get requires(){return[UX,Sc,oy,sd]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}class HI extends F{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[yi]}getCaptionFromImageModelElement(t){for(const e of t.getChildren())if(e&&e.is("element","caption"))return e;return null}getCaptionFromModelSelection(t){const e=this.editor.plugins.get("ImageUtils"),i=t.getFirstPosition().findAncestor("caption");return i&&e.isBlockImage(i.parent)?i:null}matchImageCaptionViewElement(t){const e=this.editor.plugins.get("ImageUtils");return t.name=="figcaption"&&e.isBlockImageView(t.parent)?{name:!0}:null}}class HX extends Le{refresh(){const t=this.editor,e=t.plugins.get("ImageCaptionUtils"),i=t.plugins.get("ImageUtils");if(!t.plugins.has(ZI)){this.isEnabled=!1,this.value=!1;return}const n=t.model.document.selection,r=n.getSelectedElement();if(!r){const o=e.getCaptionFromModelSelection(n);this.isEnabled=!!o,this.value=!!o;return}this.isEnabled=i.isImage(r),this.isEnabled?this.value=!!e.getCaptionFromImageModelElement(r):this.value=!1}execute(t={}){const{focusCaptionOnShow:e}=t;this.editor.model.change(i=>{this.value?this._hideImageCaption(i):this._showImageCaption(i,e)})}_showImageCaption(t,e){const n=this.editor.model.document.selection,r=this.editor.plugins.get("ImageCaptionEditing"),o=this.editor.plugins.get("ImageUtils");let l=n.getSelectedElement();const a=r._getSavedCaption(l);o.isInlineImage(l)&&(this.editor.execute("imageTypeBlock"),l=n.getSelectedElement());const c=a||t.createElement("caption");t.append(c,l),e&&t.setSelection(c,"in")}_hideImageCaption(t){const e=this.editor,i=e.model.document.selection,n=e.plugins.get("ImageCaptionEditing"),r=e.plugins.get("ImageCaptionUtils");let o=i.getSelectedElement(),l;o?l=r.getCaptionFromImageModelElement(o):(l=r.getCaptionFromModelSelection(i),o=l.parent),n._saveCaption(o,l),t.setSelection(o,"on"),t.remove(l)}}class qX extends F{constructor(e){super(e);p(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get requires(){return[yi,HI]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.model.schema;i.isRegistered("caption")?i.extend("caption",{allowIn:"imageBlock"}):i.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new HX(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const e=this.editor,i=e.editing.view,n=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils"),o=e.t;e.conversion.for("upcast").elementToElement({view:l=>r.matchImageCaptionViewElement(l),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(l,{writer:a})=>n.isBlockImage(l.parent)?a.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(l,{writer:a})=>{if(!n.isBlockImage(l.parent))return null;const c=a.createEditableElement("figcaption");a.setCustomProperty("imageCaption",!0,c),c.placeholder=o("Enter image caption"),Sx({view:i,element:c,keepOnFocus:!0});const h=l.parent.getAttribute("alt"),f=h?o("Caption for image: %0",[h]):o("Caption for the image");return Kx(c,a,{label:f})}})}_setupImageTypeCommandsIntegration(){const e=this.editor,i=e.plugins.get("ImageUtils"),n=e.plugins.get("ImageCaptionUtils"),r=e.commands.get("imageTypeInline"),o=e.commands.get("imageTypeBlock"),l=a=>{if(!a.return)return;const{oldElement:c,newElement:h}=a.return;/* istanbul ignore if: paranoid check -- @preserve */if(!c)return;if(i.isBlockImage(c)){const m=n.getCaptionFromImageModelElement(c);if(m){this._saveCaption(h,m);return}}const f=this._getSavedCaption(c);f&&this._saveCaption(h,f)};r&&this.listenTo(r,"execute",l,{priority:"low"}),o&&this.listenTo(o,"execute",l,{priority:"low"})}_getSavedCaption(e){const i=this._savedCaptionsMap.get(e);return i?Vt.fromJSON(i):null}_saveCaption(e,i){this._savedCaptionsMap.set(e,i.toJSON())}_registerCaptionReconversion(){const e=this.editor,i=e.model,n=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils");i.document.on("change:data",()=>{const o=i.document.differ.getChanges();for(const l of o){if(l.attributeKey!=="alt")continue;const a=l.range.start.nodeAfter;if(n.isBlockImage(a)){const c=r.getCaptionFromImageModelElement(a);if(!c)return;e.editing.reconvertItem(c)}}})}}class XX extends F{static get requires(){return[HI]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,i=t.plugins.get("ImageCaptionUtils"),n=t.t;t.ui.componentFactory.add("toggleImageCaption",r=>{const o=t.commands.get("toggleImageCaption"),l=new ve(r);return l.set({icon:S6,tooltip:!0,isToggleable:!0}),l.bind("isOn","isEnabled").to(o,"value","isEnabled"),l.bind("label").to(o,"value",a=>n(a?"Toggle caption off":"Toggle caption on")),this.listenTo(l,"execute",()=>{t.execute("toggleImageCaption",{focusCaptionOnShow:!0});const a=i.getCaptionFromModelSelection(t.model.document.selection);if(a){const c=t.editing.mapper.toViewElement(a);e.scrollToTheSelection(),e.change(h=>{h.addClass("image__caption_highlighted",c)})}t.editing.view.focus()}),l})}}class jX extends F{static get requires(){return[qX,XX]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}}function qI(s){const t=s.map(e=>e.replace("+","\\+"));return new RegExp(`^image\\/(${t.join("|")})$`)}function GX(s){return new Promise((t,e)=>{const i=s.getAttribute("src");fetch(i).then(n=>n.blob()).then(n=>{const r=XI(n,i),l=`image.${r.replace("image/","")}`,a=new File([n],l,{type:r});t(a)}).catch(n=>n&&n.name==="TypeError"?KX(i).then(t).catch(e):e(n))})}function YX(s,t){return!s.isInlineImageView(t)||!t.getAttribute("src")?!1:!!t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!t.getAttribute("src").match(/^blob:/g)}function XI(s,t){return s.type?s.type:t.match(/data:(image\/\w+);base64/)?t.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function KX(s){return JX(s).then(t=>{const e=XI(t,s),n=`image.${e.replace("image/","")}`;return new File([t],n,{type:e})})}function JX(s){return new Promise((t,e)=>{const i=ue.document.createElement("img");i.addEventListener("load",()=>{const n=ue.document.createElement("canvas");n.width=i.width,n.height=i.height,n.getContext("2d").drawImage(i,0,0),n.toBlob(o=>o?t(o):e())}),i.addEventListener("error",()=>e()),i.src=s})}class ej extends F{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),t.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),t.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),t.plugins.has("ImageInsertUI")&&t.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>t.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createButton(t){const e=this.editor,i=e.locale,n=e.commands.get("uploadImage"),r=e.config.get("image.upload.types"),o=qI(r),l=new t(e.locale),a=i.t;return l.set({acceptedType:r.map(c=>`image/${c}`).join(","),allowMultipleFiles:!0,label:a("Upload from computer"),icon:vF}),l.bind("isEnabled").to(n),l.on("done",(c,h)=>{const f=Array.from(h).filter(m=>o.test(m.type));f.length&&(e.execute("uploadImage",{file:f}),e.editing.view.focus())}),l}_createToolbarButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),i=this.editor.commands.get("uploadImage"),n=this._createButton(WC);return n.tooltip=!0,n.bind("label").to(e,"isImageSelected",i,"isAccessAllowed",(r,o)=>t(o?r?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),n}_createDropdownButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),i=this._createButton(WC);return i.withText=!0,i.bind("label").to(e,"isImageSelected",n=>t(n?"Replace from computer":"Upload from computer")),i.on("execute",()=>{e.dropdownView.isOpen=!1}),i}_createMenuBarButton(t){const e=this.editor.locale.t,i=this._createButton(dI);switch(i.withText=!0,t){case"standalone":i.label=e("Image from computer");break;case"insertOnly":i.label=e("Image");break;case"insertNested":i.label=e("From computer");break}return i}}class tj extends F{constructor(e){super(e);p(this,"placeholder");p(this,"uploadStatusChange",(e,i,n)=>{const r=this.editor,o=i.item,l=o.getAttribute("uploadId");if(!n.consumable.consume(i.item,e.name))return;const a=r.plugins.get("ImageUtils"),c=r.plugins.get(bo),h=l?i.attributeNewValue:null,f=this.placeholder,m=r.editing.mapper.toViewElement(o),w=n.writer;if(h=="reading"){j2(m,w),G2(a,f,m,w);return}if(h=="uploading"){const O=c.loaders.get(l);j2(m,w),O?(Y2(m,w),nj(m,w,O,r.editing.view),aj(a,m,w,O)):G2(a,f,m,w);return}h=="complete"&&c.loaders.get(l)&&rj(m,w,r.editing.view),sj(m,w),Y2(m,w),ij(m,w)});this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function j2(s,t){s.hasClass("ck-appear")||t.addClass("ck-appear",s)}function ij(s,t){t.removeClass("ck-appear",s)}function G2(s,t,e,i){e.hasClass("ck-image-upload-placeholder")||i.addClass("ck-image-upload-placeholder",e);const n=s.findViewImgElement(e);n.getAttribute("src")!==t&&i.setAttribute("src",t,n),jI(e,"placeholder")||i.insert(i.createPositionAfter(n),lj(i))}function Y2(s,t){s.hasClass("ck-image-upload-placeholder")&&t.removeClass("ck-image-upload-placeholder",s),GI(s,t,"placeholder")}function nj(s,t,e,i){const n=oj(t);t.insert(t.createPositionAt(s,"end"),n),e.on("change:uploadedPercent",(r,o,l)=>{i.change(a=>{a.setStyle("width",l+"%",n)})})}function sj(s,t){GI(s,t,"progressBar")}function rj(s,t,e){const i=t.createUIElement("div",{class:"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(s,"end"),i),setTimeout(()=>{e.change(n=>n.remove(n.createRangeOn(i)))},3e3)}function oj(s){const t=s.createUIElement("div",{class:"ck-progress-bar"});return s.setCustomProperty("progressBar",!0,t),t}function lj(s){const t=s.createUIElement("div",{class:"ck-upload-placeholder-loader"});return s.setCustomProperty("placeholder",!0,t),t}function jI(s,t){for(const e of s.getChildren())if(e.getCustomProperty(t))return e}function GI(s,t,e){const i=jI(s,e);i&&t.remove(t.createRangeOn(i))}function aj(s,t,e,i){if(i.data){const n=s.findViewImgElement(t);e.setAttribute("src",i.data,n)}}class cj extends Le{constructor(t){super(t),this.set("isAccessAllowed",!0)}refresh(){const t=this.editor,e=t.plugins.get("ImageUtils"),i=t.model.document.selection.getSelectedElement();this.isEnabled=e.isImageAllowed()||e.isImage(i)}execute(t){const e=ut(t.file),i=this.editor.model.document.selection,n=this.editor.plugins.get("ImageUtils"),r=Object.fromEntries(i.getAttributes());e.forEach((o,l)=>{const a=i.getSelectedElement();if(l&&a&&n.isImage(a)){const c=this.editor.model.createPositionAfter(a);this._uploadImage(o,r,c)}else this._uploadImage(o,r)})}_uploadImage(t,e,i){const n=this.editor,o=n.plugins.get(bo).createLoader(t),l=n.plugins.get("ImageUtils");o&&l.insertImage({...e,uploadId:o.id},i)}}class uj extends F{constructor(e){super(e);p(this,"_uploadImageElements");p(this,"_uploadedImages",new Map);e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}static get requires(){return[bo,vh,vn,yi]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.model.document,n=e.conversion,r=e.plugins.get(bo),o=e.plugins.get("ImageUtils"),l=e.plugins.get("ClipboardPipeline"),a=qI(e.config.get("image.upload.types")),c=new cj(e);e.commands.add("uploadImage",c),e.commands.add("imageUpload",c),n.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}).add(h=>h.on("element:img",(f,m,w)=>{if(!w.consumable.test(m.viewItem,{attributes:["data-ck-upload-id"]}))return;const O=m.viewItem.getAttribute("data-ck-upload-id");if(!O)return;const[v]=Array.from(m.modelRange.getItems({shallow:!0})),k=r.loaders.get(O);v&&(w.writer.setAttribute("uploadId",O,v),w.consumable.consume(m.viewItem,{attributes:["data-ck-upload-id"]}),k&&k.data&&w.writer.setAttribute("uploadStatus",k.status,v))},{priority:"low"})),this.listenTo(e.editing.view.document,"clipboardInput",(h,f)=>{if(hj(f.dataTransfer))return;const m=Array.from(f.dataTransfer.files).filter(O=>O?a.test(O.type):!1);if(!m.length)return;if(h.stop(),e.model.change(O=>{f.targetRanges&&O.setSelection(f.targetRanges.map(v=>e.editing.mapper.toModelRange(v))),e.execute("uploadImage",{file:m})}),!e.commands.get("uploadImage").isAccessAllowed){const O=e.plugins.get("Notification"),v=e.locale.t;O.showWarning(v("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(l,"inputTransformation",(h,f)=>{const m=Array.from(e.editing.view.createRangeIn(f.content)).map(O=>O.item).filter(O=>YX(o,O)&&!O.getAttribute("uploadProcessed")).map(O=>({promise:GX(O),imageElement:O}));if(!m.length)return;const w=new zn(e.editing.view.document);for(const O of m){w.setAttribute("uploadProcessed",!0,O.imageElement);const v=r.createLoader(O.promise);v&&(w.setAttribute("src","",O.imageElement),w.setAttribute("uploadId",v.id,O.imageElement))}}),e.editing.view.document.on("dragover",(h,f)=>{f.preventDefault()}),i.on("change",()=>{const h=i.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),f=new Set;for(const m of h)if(m.type=="insert"&&m.name!="$text"){const w=m.position.nodeAfter,O=m.position.root.rootName=="$graveyard";for(const v of dj(e,w)){const k=v.getAttribute("uploadId");if(!k)continue;const C=r.loaders.get(k);if(!C){!O&&this._uploadedImages.has(k)&&e.model.enqueueChange({isUndoable:!1},P=>{P.setAttribute("uploadStatus","complete",v),this.fire("uploadComplete",{data:this._uploadedImages.get(k),imageElement:v})});continue}O?f.has(k)||Array.from(this._uploadImageElements.get(k)).every(V=>V.root.rootName=="$graveyard")&&C.abort():(f.add(k),this._uploadImageElements.has(k)?this._uploadImageElements.get(k).add(v):this._uploadImageElements.set(k,new Set([v])),C.status=="idle"&&this._readAndUpload(C))}}}),this.on("uploadComplete",(h,{imageElement:f,data:m})=>{const w=m.urls?m.urls:m;this.editor.model.change(O=>{O.setAttribute("src",w.default,f),this._parseAndSetSrcsetAttributeOnImage(w,f,O),o.setImageNaturalSizeAttributes(f)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageBlock")),this.editor.plugins.has("ImageInlineEditing")&&(e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageInline"))}_readAndUpload(e){const i=this.editor,n=i.model,r=i.locale.t,o=i.plugins.get(bo),l=i.plugins.get(vh),a=i.plugins.get("ImageUtils"),c=this._uploadImageElements;return n.enqueueChange({isUndoable:!1},f=>{const m=c.get(e.id);for(const w of m)f.setAttribute("uploadStatus","reading",w)}),e.read().then(()=>{const f=e.upload();i.ui&&i.ui.ariaLiveAnnouncer.announce(r("Uploading image"));for(const m of c.get(e.id)){/* istanbul ignore next -- @preserve */if(Ie.isSafari){const w=i.editing.mapper.toViewElement(m),O=a.findViewImgElement(w);i.editing.view.once("render",()=>{if(!O.parent)return;const v=i.editing.view.domConverter.mapViewToDom(O.parent);if(!v)return;const k=v.style.display;v.style.display="none",v._ckHack=v.offsetHeight,v.style.display=k})}n.enqueueChange({isUndoable:!1},w=>{w.setAttribute("uploadStatus","uploading",m)})}return f}).then(f=>{n.enqueueChange({isUndoable:!1},m=>{for(const w of c.get(e.id))m.setAttribute("uploadStatus","complete",w),this.fire("uploadComplete",{data:f,imageElement:w});i.ui&&i.ui.ariaLiveAnnouncer.announce(r("Image upload complete")),this._uploadedImages.set(e.id,f)}),h()}).catch(f=>{if(i.ui&&i.ui.ariaLiveAnnouncer.announce(r("Error during image upload")),e.status!=="error"&&e.status!=="aborted")throw f;e.status=="error"&&f&&l.showWarning(f,{title:r("Upload failed"),namespace:"upload"}),n.enqueueChange({isUndoable:!1},m=>{for(const w of c.get(e.id))w.root.rootName!=="$graveyard"&&m.remove(w)}),h()});function h(){n.enqueueChange({isUndoable:!1},f=>{for(const m of c.get(e.id))f.removeAttribute("uploadId",m),f.removeAttribute("uploadStatus",m);c.delete(e.id)}),o.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,i,n){let r=0;const o=Object.keys(e).filter(l=>{const a=parseInt(l,10);if(!isNaN(a))return r=Math.max(r,a),!0}).map(l=>`${e[l]} ${l}w`).join(", ");if(o!=""){const l={srcset:o};!i.hasAttribute("width")&&!i.hasAttribute("height")&&(l.width=r),n.setAttributes(l,i)}}_registerConverters(e){const{conversion:i,plugins:n}=this.editor,r=n.get(bo),o=n.get(yi);i.for("dataDowncast").add(l=>{l.on(`attribute:uploadId:${e}`,(a,c,h)=>{if(!h.consumable.test(c.item,a.name))return;const f=r.loaders.get(c.attributeNewValue);if(!f||!f.data)return null;const m=h.mapper.toViewElement(c.item),w=o.findViewImgElement(m);w&&(h.consumable.consume(c.item,a.name),h.writer.setAttribute("data-ck-upload-id",f.id,w))})})}}function hj(s){return Array.from(s.types).includes("text/html")&&s.getData("text/html")!==""}function dj(s,t){const e=s.plugins.get("ImageUtils");return Array.from(s.model.createRangeOn(t)).filter(i=>e.isImage(i.item)).map(i=>i.item)}class YI extends F{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[uj,ej,tj]}}class fj extends he{constructor(e){super(e);p(this,"urlInputView");p(this,"keystrokes");this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new bt,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-url"],tabindex:"-1"},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),Bl({view:this}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const e=this.locale,i=e.t,n=new jt(e,wn);return n.bind("label").to(this,"isImageSelected",r=>i(r?"Update image URL":"Insert image via URL")),n.bind("isEnabled").to(this),n.fieldView.inputMode="url",n.fieldView.placeholder="https://example.com/image.png",n.fieldView.bind("value").to(this,"imageURLInputValue",r=>r||""),n.fieldView.on("input",()=>{this.imageURLInputValue=n.fieldView.element.value.trim()}),n}focus(){this.urlInputView.focus()}}class mj extends F{constructor(){super(...arguments);p(this,"_imageInsertUI");p(this,"_formView")}static get pluginName(){return"ImageInsertViaUrlUI"}static get isOfficialPlugin(){return!0}static get requires(){return[sd,yh]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createInsertUrlButton(e){const i=new e(this.editor.locale);return i.icon=_F,i.on("execute",()=>{this._showModal()}),i}_createToolbarButton(){const e=this.editor.locale.t,i=this._createInsertUrlButton(ve);return i.tooltip=!0,i.bind("label").to(this._imageInsertUI,"isImageSelected",n=>e(n?"Update image URL":"Insert image via URL")),i}_createDropdownButton(){const e=this.editor.locale.t,i=this._createInsertUrlButton(ve);return i.withText=!0,i.bind("label").to(this._imageInsertUI,"isImageSelected",n=>e(n?"Update image URL":"Insert via URL")),i}_createMenuBarButton(e){const i=this.editor.locale.t,n=this._createInsertUrlButton(ci);switch(n.withText=!0,e){case"standalone":n.label=i("Image via URL");break;case"insertOnly":n.label=i("Image");break;case"insertNested":n.label=i("Via URL");break}return n}_createInsertUrlView(){const e=this.editor,i=e.locale,n=e.commands.get("replaceImageSource"),r=e.commands.get("insertImage"),o=new fj(i);return o.bind("isImageSelected").to(this._imageInsertUI),o.bind("isEnabled").toMany([r,n],"isEnabled",(...l)=>l.some(a=>a)),o}_showModal(){const e=this.editor,n=e.locale.t,r=e.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const o=e.commands.get("replaceImageSource");this._formView.imageURLInputValue=o.value||"",r.show({id:"insertImageViaUrl",title:n("Image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:n("Cancel"),withText:!0,onExecute:()=>r.hide()},{label:this._imageInsertUI.isImageSelected?n("Save"):n("Insert"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class KI extends F{static get pluginName(){return"ImageInsertViaUrl"}static get isOfficialPlugin(){return!0}static get requires(){return[mj,sd]}}class gj extends F{static get pluginName(){return"ImageInsert"}static get isOfficialPlugin(){return!0}static get requires(){return[YI,KI,sd]}}class pj extends Le{refresh(){const t=this.editor,i=t.plugins.get("ImageUtils").getClosestSelectedImageElement(t.model.document.selection);this.isEnabled=!!i,!i||!i.hasAttribute("resizedWidth")?this.value=null:this.value={width:i.getAttribute("resizedWidth"),height:null}}execute(t){const e=this.editor,i=e.model,n=e.plugins.get("ImageUtils"),r=n.getClosestSelectedImageElement(i.document.selection);this.value={width:t.width,height:null},r&&i.change(o=>{o.setAttribute("resizedWidth",t.width,r),o.removeAttribute("resizedHeight",r),n.setImageNaturalSizeAttributes(r)})}}class JI extends F{static get requires(){return[yi]}static get pluginName(){return"ImageResizeEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const t=this.editor,e=new pj(t);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),t.commands.add("resizeImage",e),t.commands.add("imageResize",e)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(t){const e=this.editor,i=e.plugins.get("ImageUtils");e.conversion.for("downcast").add(n=>n.on(`attribute:resizedWidth:${t}`,(r,o,l)=>{if(!l.consumable.consume(o.item,r.name))return;const a=l.writer,c=l.mapper.toViewElement(o.item);o.attributeNewValue!==null?(a.setStyle("width",o.attributeNewValue,c),a.addClass("image_resized",c)):(a.removeStyle("width",c),a.removeClass("image_resized",c))})),e.conversion.for("dataDowncast").attributeToAttribute({model:{name:t,key:"resizedHeight"},view:n=>({key:"style",value:{height:n}})}),e.conversion.for("editingDowncast").add(n=>n.on(`attribute:resizedHeight:${t}`,(r,o,l)=>{if(!l.consumable.consume(o.item,r.name))return;const a=l.writer,c=l.mapper.toViewElement(o.item),h=t==="imageInline"?i.findViewImgElement(c):c;o.attributeNewValue!==null?a.setStyle("height",o.attributeNewValue,h):a.removeStyle("height",h)})),e.conversion.for("upcast").attributeToAttribute({view:{name:t==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:n=>_g(n)?null:n.getStyle("width")}}),e.conversion.for("upcast").attributeToAttribute({view:{name:t==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:n=>_g(n)?null:n.getStyle("height")}}),e.conversion.for("upcast").add(n=>{n.on(`element:${t==="imageBlock"?"figure":"img"}`,(r,o,l)=>{l.consumable.consume(o.viewItem,{classes:["image_resized"]})})})}}const wb={small:FF,medium:NF,large:DF,custom:$F,original:QF};class wj extends F{constructor(e){super(e);p(this,"_resizeUnit");this._resizeUnit=e.config.get("image.resizeUnit")}static get requires(){return[JI]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.config.get("image.resizeOptions"),n=e.commands.get("resizeImage");this.bind("isEnabled").to(n);for(const r of i)this._registerImageResizeButton(r);this._registerImageResizeDropdown(i)}_registerImageResizeButton(e){const i=this.editor,{name:n,value:r,icon:o}=e;i.ui.componentFactory.add(n,l=>{const a=new ve(l),c=i.commands.get("resizeImage"),h=this._getOptionLabelValue(e,!0);if(!wb[o])throw new A("imageresizebuttons-missing-icon",i,e);if(a.set({label:h,icon:wb[o],tooltip:h,isToggleable:!0}),a.bind("isEnabled").to(this),i.plugins.has("ImageCustomResizeUI")&&ku(e)){const f=i.plugins.get("ImageCustomResizeUI");this.listenTo(a,"execute",()=>{f._showForm(this._resizeUnit)})}else{const f=r?r+this._resizeUnit:null;a.bind("isOn").to(c,"value",c,"isEnabled",$1(f)),this.listenTo(a,"execute",()=>{i.execute("resizeImage",{width:f})})}return a})}_registerImageResizeDropdown(e){const i=this.editor,n=i.t,r=e.find(l=>!l.value),o=l=>{const a=i.commands.get("resizeImage"),c=xn(l,K6),h=c.buttonView,f=n("Resize image");return h.set({tooltip:f,commandValue:r.value,icon:wb.medium,isToggleable:!0,label:this._getOptionLabelValue(r),withText:!0,class:"ck-resize-image-button",ariaLabel:f,ariaLabelledBy:void 0}),h.bind("label").to(a,"value",m=>m&&m.width?m.width:this._getOptionLabelValue(r)),c.bind("isEnabled").to(this),Ql(c,()=>this._getResizeDropdownListItemDefinitions(e,a),{ariaLabel:n("Image resize list"),role:"menu"}),this.listenTo(c,"execute",m=>{"onClick"in m.source?m.source.onClick():(i.execute(m.source.commandName,{width:m.source.commandValue}),i.editing.view.focus())}),c};i.ui.componentFactory.add("resizeImage",o),i.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(e,i=!1){const n=this.editor.t;return e.label?e.label:i?ku(e)?n("Custom image size"):e.value?n("Resize image to %0",e.value+this._resizeUnit):n("Resize image to the original size"):ku(e)?n("Custom"):e.value?e.value+this._resizeUnit:n("Original")}_getResizeDropdownListItemDefinitions(e,i){const{editor:n}=this,r=new vi,o=e.map(l=>ku(l)?{...l,valueWithUnits:"custom"}:l.value?{...l,valueWithUnits:`${l.value}${this._resizeUnit}`}:{...l,valueWithUnits:null});for(const l of o){let a=null;if(n.plugins.has("ImageCustomResizeUI")&&ku(l)){const c=n.plugins.get("ImageCustomResizeUI");a={type:"button",model:new _l({label:this._getOptionLabelValue(l),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{c._showForm(this._resizeUnit)}})};const h=Object.values(o).map(f=>f.valueWithUnits);a.model.bind("isOn").to(i,"value",i,"isEnabled",bj(h))}else a={type:"button",model:new _l({commandName:"resizeImage",commandValue:l.valueWithUnits,label:this._getOptionLabelValue(l),role:"menuitemradio",withText:!0,icon:null})},a.model.bind("isOn").to(i,"value",i,"isEnabled",$1(l.valueWithUnits));a.model.bind("isEnabled").to(i,"isEnabled"),r.add(a)}return r}}function ku(s){return s.value==="custom"}function $1(s){return(t,e)=>{const i=t;return i===void 0||!e?!1:s===null&&i===s?!0:i!==null&&i.width===s}}function bj(s){return(t,e)=>!s.some(i=>$1(i)(t,e))}const Oj="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",bb="image_resized";class xj extends F{static get requires(){return[ob,yi]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(t),this._setupResizerCreator()}_setupResizerCreator(){const t=this.editor,e=t.editing.view,i=t.plugins.get("ImageUtils");e.addObserver(ly),this.listenTo(e.document,"imageLoaded",(n,r)=>{if(!r.target.matches(Oj))return;const o=t.editing.view.domConverter,l=o.domToView(r.target),a=i.getImageWidgetFromImageView(l);let c=this.editor.plugins.get(ob).getResizerByViewElement(a);if(c){c.redraw();return}const h=t.editing.mapper,f=h.toModelElement(a);c=t.plugins.get(ob).attachTo({unit:t.config.get("image.resizeUnit"),modelElement:f,viewElement:a,editor:t,getHandleHost(m){return m.querySelector("img")},getResizeHost(){return o.mapViewToDom(h.toViewElement(f))},isCentered(){return f.getAttribute("imageStyle")=="alignCenter"},onCommit(m){e.change(w=>{w.removeClass(bb,a)}),t.execute("resizeImage",{width:m})}}),c.on("updateSize",()=>{a.hasClass(bb)||e.change(w=>{w.addClass(bb,a)});const m=f.name==="imageInline"?l:a;m.getStyle("height")&&e.change(w=>{w.removeStyle("height",m)})}),c.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function eR(s){if(!s)return null;const[,t,e]=s.trim().match(/([.,\d]+)(%|px)$/)||[],i=Number.parseFloat(t);return Number.isNaN(i)?null:{value:i,unit:e}}function tR(s,t,e){return e==="px"?{value:t.value,unit:"px"}:{value:t.value/s*100,unit:"%"}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function iR(s){const{editing:t}=s,i=s.plugins.get("ImageUtils").getClosestSelectedImageElement(s.model.document.selection);if(!i)return null;const n=t.mapper.toViewElement(i),r=t.view.domConverter.mapViewToDom(n);return{model:i,view:n,dom:r}}function yj(s,t){const e=iR(s);if(!e)return null;const i=eR(e.model.getAttribute("resizedWidth")||null);if(!i)return null;if(i.unit===t)return i;const n=Jx(e.dom),r={value:new Me(e.dom).width};return tR(n,r,t)}class vj extends he{constructor(e,i,n){super(e);p(this,"focusTracker");p(this,"keystrokes");p(this,"unit");p(this,"backButtonView");p(this,"saveButtonView");p(this,"labeledInput");p(this,"children");p(this,"_focusables");p(this,"_focusCycler");p(this,"_validators");this.focusTracker=new ht,this.keystrokes=new bt,this.unit=i,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new Ti(e,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new hi,this._validators=n,this.keystrokes.set("Esc",(r,o)=>{this.fire("cancel"),o()}),this._focusCycler=new Kt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Bl({view:this}),[this.backButtonView,this.labeledInput,this.saveButtonView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const e=this.locale.t,i=new ve(this.locale);return i.set({class:"ck-button-back",label:e("Back"),icon:Ll,tooltip:!0}),i.delegate("execute").to(this,"cancel"),i}_createSaveButton(){const e=this.locale.t,i=new ve(this.locale);return i.set({label:e("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),i}_createHeaderView(){const e=this.locale.t,i=new Nr(this.locale,{label:e("Image Resize")});return i.children.add(this.backButtonView,0),i}_createLabeledInputView(){const e=this.locale.t,i=new jt(this.locale,nI);return i.label=e("Resize image (in %0)",this.unit),i.class="ck-labeled-field-view_full-width",i.fieldView.set({step:.1}),i}isValid(){this.resetFormStatus();for(const e of this._validators){const i=e(this);if(i)return this.labeledInput.errorText=i,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:e}=this.labeledInput.fieldView;return e?e.value:null}get parsedSize(){const{rawSize:e}=this;if(e===null)return null;const i=Number.parseFloat(e);return Number.isNaN(i)?null:i}get sizeWithUnits(){const{parsedSize:e,unit:i}=this;return e===null?null:`${e}${i}`}}function _j(s,t){const e=iR(s);if(!e)return null;const i=Jx(e.dom),n=eR(window.getComputedStyle(e.dom).minWidth)||{value:1},r=Math.max(.1,tR(i,n,t).value);return{unit:t,lower:r,upper:t==="px"?i:100}}class kj extends F{constructor(){super(...arguments);p(this,"_balloon");p(this,"_form")}static get requires(){return[hs]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(e){const i=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(dg(vj))(i.locale,e,Sj(i)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(i.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{i.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),Dr({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(e){if(this._isVisible)return;this._form||this._createForm(e);const i=this.editor,n=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:ry(i)});const r=yj(i,e),o=r?r.value.toFixed(1):"",l=_j(i,e);n.fieldView.value=n.fieldView.element.value=o,l&&Object.assign(n.fieldView,{min:l.lower.toFixed(1),max:Math.ceil(l.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function Sj(s){const t=s.t;return[e=>{if(e.rawSize.trim()==="")return t("The value must not be empty.");if(e.parsedSize===null)return t("The value should be a plain number.")}]}class Cj extends F{static get requires(){return[JI,xj,kj,wj]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}}class Pj extends Le{constructor(e,i){super(e);p(this,"_defaultStyles");p(this,"_styles");this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(i.map(n=>{if(n.isDefault)for(const r of n.modelElements)this._defaultStyles[r]=n.name;return[n.name,n]}))}refresh(){const n=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled?n.hasAttribute("imageStyle")?this.value=n.getAttribute("imageStyle"):this.value=this._defaultStyles[n.name]:this.value=!1}execute(e={}){const i=this.editor,n=i.model,r=i.plugins.get("ImageUtils");n.change(o=>{const l=e.value,{setImageSizes:a=!0}=e;let c=r.getClosestSelectedImageElement(n.document.selection);l&&this.shouldConvertImageType(l,c)&&(this.editor.execute(r.isBlockImage(c)?"imageTypeInline":"imageTypeBlock",{setImageSizes:a}),c=r.getClosestSelectedImageElement(n.document.selection)),!l||this._styles.get(l).isDefault?o.removeAttribute("imageStyle",c):o.setAttribute("imageStyle",l,c),a&&r.setImageNaturalSizeAttributes(c)})}shouldConvertImageType(e,i){return!this._styles.get(e).modelElements.includes(i.name)}}const Am={get inline(){return{name:"inline",title:"In line",icon:T6,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:Nx,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:E6,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:cg,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:ug,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:A6,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:cg,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:ug,modelElements:["imageBlock"],className:"image-style-side"}}},nR={full:BF,left:E6,right:A6,center:cg,inlineLeft:Nx,inlineRight:ug,inline:T6},sR=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function Tj(s){return(s.configuredStyles.options||[]).map(i=>Ij(i)).filter(i=>Rj(i,s))}function Ej(s,t){return s&&t?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:s?{options:["block","side"]}:t?{options:["inline","alignLeft","alignRight"]}:{}}function Aj(s){return s.has("ImageBlockEditing")&&s.has("ImageInlineEditing")?[...sR]:[]}function Ij(s){return typeof s=="string"?Am[s]?s={...Am[s]}:s={name:s}:s=Vj(Am[s.name],s),typeof s.icon=="string"&&(s.icon=nR[s.icon]||s.icon),s}function Rj(s,{isBlockPluginLoaded:t,isInlinePluginLoaded:e}){const{modelElements:i,name:n}=s;if(!i||!i.length||!n)return rR({style:s}),!1;{const r=[t?"imageBlock":null,e?"imageInline":null];if(!i.some(o=>r.includes(o)))return We("image-style-missing-dependency",{style:s,missingPlugins:i.map(o=>o==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function Vj(s,t){const e={...t};for(const i in s)Object.prototype.hasOwnProperty.call(t,i)||(e[i]=s[i]);return e}function rR(s){We("image-style-configuration-definition-invalid",s)}var Q1={normalizeStyles:Tj,getDefaultStylesConfiguration:Ej,getDefaultDropdownDefinitions:Aj,warnInvalidStyle:rR,DEFAULT_OPTIONS:Am,DEFAULT_ICONS:nR,DEFAULT_DROPDOWN_DEFINITIONS:sR};function Mj(s){return(t,e,i)=>{if(!i.consumable.consume(e.item,t.name))return;const n=K2(e.attributeNewValue,s),r=K2(e.attributeOldValue,s),o=i.mapper.toViewElement(e.item),l=i.writer;r&&l.removeClass(r.className,o),n&&l.addClass(n.className,o)}}function Lj(s){const t={imageInline:s.filter(e=>!e.isDefault&&e.modelElements.includes("imageInline")),imageBlock:s.filter(e=>!e.isDefault&&e.modelElements.includes("imageBlock"))};return(e,i,n)=>{if(!i.modelRange)return;const r=i.viewItem,o=Nt(i.modelRange.getItems());if(o&&n.schema.checkAttribute(o,"imageStyle"))for(const l of t[o.name])n.consumable.consume(r,{classes:l.className})&&n.writer.setAttribute("imageStyle",l.name,o)}}function K2(s,t){for(const e of t)if(e.name===s)return e}class oR extends F{constructor(){super(...arguments);p(this,"normalizedStyles")}static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[yi]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:i}=Q1,n=this.editor,r=n.plugins.has("ImageBlockEditing"),o=n.plugins.has("ImageInlineEditing");n.config.define("image.styles",i(r,o)),this.normalizedStyles=e({configuredStyles:n.config.get("image.styles"),isBlockPluginLoaded:r,isInlinePluginLoaded:o}),this._setupConversion(r,o),this._setupPostFixer(),n.commands.add("imageStyle",new Pj(n,this.normalizedStyles))}_setupConversion(e,i){const n=this.editor,r=n.model.schema,o=Mj(this.normalizedStyles),l=Lj(this.normalizedStyles);n.editing.downcastDispatcher.on("attribute:imageStyle",o),n.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(r.extend("imageBlock",{allowAttributes:"imageStyle"}),n.data.upcastDispatcher.on("element:figure",l,{priority:"low"})),i&&(r.extend("imageInline",{allowAttributes:"imageStyle"}),n.data.upcastDispatcher.on("element:img",l,{priority:"low"}))}_setupPostFixer(){const e=this.editor,i=e.model.document,n=e.plugins.get(yi),r=new Map(this.normalizedStyles.map(o=>[o.name,o]));i.registerPostFixer(o=>{let l=!1;for(const a of i.differ.getChanges())if(a.type=="insert"||a.type=="attribute"&&a.attributeKey=="imageStyle"){let c=a.type=="insert"?a.position.nodeAfter:a.range.start.nodeAfter;if(c&&c.is("element","paragraph")&&c.childCount>0&&(c=c.getChild(0)),!n.isImage(c))continue;const h=c.getAttribute("imageStyle");if(!h)continue;const f=r.get(h);(!f||!f.modelElements.includes(c.name))&&(o.removeAttribute("imageStyle",c),l=!0)}return l})}}class Bj extends F{static get requires(){return[oR]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){const t=this.editor.t;return{"Wrap text":t("Wrap text"),"Break text":t("Break text"),"In line":t("In line"),"Full size image":t("Full size image"),"Side image":t("Side image"),"Left aligned image":t("Left aligned image"),"Centered image":t("Centered image"),"Right aligned image":t("Right aligned image")}}init(){const t=this.editor.plugins,e=this.editor.config.get("image.toolbar")||[],i=t.get("ImageStyleEditing"),n=J2(i.normalizedStyles,this.localizedDefaultStylesTitles);for(const o of n)this._createButton(o);const r=J2([...e.filter(ls),...Q1.getDefaultDropdownDefinitions(t)],this.localizedDefaultStylesTitles);for(const o of r)this._createDropdown(o,n)}_createDropdown(t,e){const i=this.editor.ui.componentFactory;i.add(t.name,n=>{let r;const{defaultItem:o,items:l,title:a}=t,c=l.filter(w=>e.find(({name:O})=>eP(O)===w)).map(w=>{const O=i.create(w);return w===o&&(r=O),O});l.length!==c.length&&Q1.warnInvalidStyle({dropdown:t});const h=xn(n,_c),f=h.buttonView,m=f.arrowView;return Hx(h,c,{enableActiveItemFocusOnDropdownOpen:!0}),f.set({label:tP(a,r.label),class:null,tooltip:!0}),m.unbind("label"),m.set({label:a}),f.bind("icon").toMany(c,"isOn",(...w)=>{const O=w.findIndex(Ea);return O<0?r.icon:c[O].icon}),f.bind("label").toMany(c,"isOn",(...w)=>{const O=w.findIndex(Ea);return tP(a,O<0?r.label:c[O].label)}),f.bind("isOn").toMany(c,"isOn",(...w)=>w.some(Ea)),f.bind("class").toMany(c,"isOn",(...w)=>w.some(Ea)?"ck-splitbutton_flatten":void 0),f.on("execute",()=>{c.some(({isOn:w})=>w)?h.isOpen=!h.isOpen:r.fire("execute")}),h.bind("isEnabled").toMany(c,"isEnabled",(...w)=>w.some(Ea)),this.listenTo(h,"execute",()=>{this.editor.editing.view.focus()}),h})}_createButton(t){const e=t.name;this.editor.ui.componentFactory.add(eP(e),i=>{const n=this.editor.commands.get("imageStyle"),r=new ve(i);return r.set({label:t.title,icon:t.icon,tooltip:!0,isToggleable:!0}),r.bind("isEnabled").to(n,"isEnabled"),r.bind("isOn").to(n,"value",o=>o===e),r.on("execute",this._executeCommand.bind(this,e)),r})}_executeCommand(t){this.editor.execute("imageStyle",{value:t}),this.editor.editing.view.focus()}}function J2(s,t){for(const e of s)t[e.title]&&(e.title=t[e.title]);return s}function eP(s){return`imageStyle:${s}`}function tP(s,t){return(s?s+": ":"")+t}class $j extends F{static get requires(){return[oR,Bj]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}}class Qj extends F{static get requires(){return[wg,yi]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,i=t.plugins.get(wg),n=t.plugins.get("ImageUtils");i.register("image",{ariaLabel:e("Image toolbar"),items:Dj(t.config.get("image.toolbar")||[]),getRelatedElement:r=>n.getClosestSelectedImageWidget(r)})}}function Dj(s){return s.map(t=>ls(t)?t.name:t)}class Nj extends F{static get requires(){return[ay,yi]}static get pluginName(){return"PictureEditing"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor;t.plugins.has("ImageBlockEditing")&&t.model.schema.extend("imageBlock",{allowAttributes:["sources"]}),t.plugins.has("ImageInlineEditing")&&t.model.schema.extend("imageInline",{allowAttributes:["sources"]}),this._setupConversion(),this._setupImageUploadEditingIntegration()}_setupConversion(){const t=this.editor,e=t.conversion,i=t.plugins.get("ImageUtils");e.for("upcast").add(QX(i)),e.for("downcast").add(DX(i))}_setupImageUploadEditingIntegration(){const t=this.editor;if(!t.plugins.has("ImageUploadEditing"))return;const e=t.plugins.get("ImageUploadEditing");this.listenTo(e,"uploadComplete",(i,{imageElement:n,data:r})=>{const o=r.sources;o&&t.model.change(l=>{l.setAttributes({sources:o},n)})})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Fj{constructor(){p(this,"_definitions",new Set)}get length(){return this._definitions.size}add(t){Array.isArray(t)?t.forEach(e=>this._definitions.add(e)):this._definitions.add(t)}getDispatcher(){return t=>{t.on("attribute:linkHref",(e,i,n)=>{if(!n.consumable.test(i.item,"attribute:linkHref")||!(i.item.is("selection")||n.schema.isInline(i.item)))return;const r=n.writer,o=r.document.selection;for(const l of this._definitions){const a=r.createAttributeElement("a",l.attributes,{priority:5});l.classes&&r.addClass(l.classes,a);for(const c in l.styles)r.setStyle(c,l.styles[c],a);r.setCustomProperty("link",!0,a),l.callback(i.attributeNewValue)?i.item.is("selection")?r.wrap(o.getFirstRange(),a):r.wrap(n.mapper.toViewRange(i.range),a):r.unwrap(n.mapper.toViewRange(i.range),a)}},{priority:"high"})}}getDispatcherForLinkedImage(){return t=>{t.on("attribute:linkHref:imageBlock",(e,i,{writer:n,mapper:r})=>{const o=r.toViewElement(i.item),l=Array.from(o.getChildren()).find(a=>a.is("element","a"));if(l)for(const a of this._definitions){const c=cs(a.attributes);if(a.callback(i.attributeNewValue)){for(const[h,f]of c)h==="class"?n.addClass(f,l):n.setAttribute(h,f,l);a.classes&&n.addClass(a.classes,l);for(const h in a.styles)n.setStyle(h,a.styles[h],l)}else{for(const[h,f]of c)h==="class"?n.removeClass(f,l):n.removeAttribute(h,l);a.classes&&n.removeClass(a.classes,l);for(const h in a.styles)n.removeStyle(h,l)}}})}}}const zj=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Wj="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",Uj=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,Zj=/^((\w+:(\/{2,})?)|(\W))/i,Hj=["https?","ftps?","mailto"],Nu="Ctrl+K";function qj(s){return s.is("attributeElement")&&!!s.getCustomProperty("link")}function iP(s,{writer:t}){const e=t.createAttributeElement("a",{href:s},{priority:5});return t.setCustomProperty("link",!0,e),e}function lR(s,t=Hj){const e=String(s),i=t.join("|"),n=new RegExp(`${Wj.replace("<protocols>",i)}`,"i");return Xj(e,n)?e:"#"}function Xj(s,t){return!!s.replace(zj,"").match(t)}function jj(s,t){const e={"Open in a new tab":s("Open in a new tab"),Downloadable:s("Downloadable")};return t.forEach(i=>("label"in i&&e[i.label]&&(i.label=e[i.label]),i)),t}function Gj(s){const t=[];if(s)for(const[e,i]of Object.entries(s)){const n=Object.assign({},i,{id:`link${g$(e)}`});t.push(n)}return t}function D1(s,t){return s?t.checkAttribute(s.name,"linkHref"):!1}function Yj(s){return Uj.test(s)}function cy(s,t){const e=Yj(s)?"mailto:":t,i=!!e&&!aR(s);return s&&i?e+s:s}function aR(s){return Zj.test(s)}function Kj(s){window.open(s,"_blank","noopener")}function N1(s){let t="";for(const e of s.getItems()){if(!e.is("$text")&&!e.is("$textProxy"))return;t+=e.data}return t}class Jj extends Le{constructor(){super(...arguments);p(this,"manualDecorators",new vi);p(this,"automaticDecorators",new Fj)}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,i=e.document.selection,n=i.getSelectedElement()||Nt(i.getSelectedBlocks());D1(n,e.schema)?(this.value=n.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(n,"linkHref")):(this.value=i.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(i,"linkHref"));for(const r of this.manualDecorators)r.value=this._getDecoratorStateFromModel(r.id)}execute(e,i={},n){const r=this.editor.model,o=r.document.selection,l=[],a=[];for(const c in i)i[c]?l.push(c):a.push(c);r.change(c=>{const h=w=>{c.setAttribute("linkHref",e,w),l.forEach(O=>c.setAttribute(O,!0,w)),a.forEach(O=>c.removeAttribute(O,w))},f=(w,O)=>{const v=N1(w);if(!v)return w;let k=n;if(k||(k=O&&O==v?e:v),k!=v){const C=eG(v,k);let P=0;for(const{offset:V,actual:Q,expected:D}of C){const q=V+P,$=c.createRange(w.start.getShiftedBy(q),w.start.getShiftedBy(q+Q.length)),R=tG($,w).getAttributes(),U=Array.from(R).filter(([X])=>r.schema.getAttributeProperties(X).isFormatting),Y=c.createText(D,U);h(Y),r.insertContent(Y,$),P+=D.length}return c.createRange(w.start,w.start.getShiftedBy(k.length))}},m=w=>{const{plugins:O}=this.editor;if(c.setSelection(w.end),O.has("TwoStepCaretMovement"))O.get("TwoStepCaretMovement")._handleForwardMovement();else for(const v of["linkHref",...l,...a])c.removeSelectionAttribute(v)};if(o.isCollapsed){const w=o.getFirstPosition();if(o.hasAttribute("linkHref")){const O=o.getAttribute("linkHref"),v=gp(w,"linkHref",O,r),k=f(v,O);h(k||v),k&&m(k)}else if(e!==""){const O=cs(o.getAttributes());O.set("linkHref",e),l.forEach(k=>{O.set(k,!0)});const v=r.insertContent(c.createText(n||e,O),w);m(v)}}else{const w=Array.from(o.getRanges()),O=r.schema.getValidRanges(w,"linkHref"),v=[];for(const P of o.getSelectedBlocks())r.schema.checkAttribute(P,"linkHref")&&v.push(c.createRangeOn(P));const k=v.slice();for(const P of O)this._isRangeToUpdate(P,v)&&k.push(P);const C=w.map(P=>({start:qt.fromPosition(P.start,"toPrevious"),end:qt.fromPosition(P.end,"toNext")}));for(let P of k){const V=(P.start.textNode||P.start.nodeAfter).getAttribute("linkHref");P=f(P,V)||P,h(P)}c.setSelection(C.map(P=>{const V=P.start.toPosition(),Q=P.end.toPosition();return P.start.detach(),P.end.detach(),r.createRange(V,Q)}))}})}_getDecoratorStateFromModel(e){const i=this.editor.model,n=i.document.selection,r=n.getSelectedElement();return D1(r,i.schema)?r.getAttribute(e):n.getAttribute(e)}_isRangeToUpdate(e,i){for(const n of i)if(n.containsRange(e))return!1;return!0}}function eG(s,t){const e=qa(s,t),i={equal:0,insert:0,delete:0},n=[];let r="",o="";for(const l of[...e,null])l=="insert"?o+=t[i.equal+i.insert]:l=="delete"?r+=s[i.equal+i.delete]:(r.length||o.length)&&(n.push({offset:i.equal,actual:r,expected:o}),r="",o=""),l&&i[l]++;return n}function tG(s,t){if(!s.isCollapsed)return Nt(s.getItems());const e=s.start;return e.textNode?e.textNode:!e.nodeBefore||e.isEqual(t.start)?e.nodeAfter:e.nodeBefore}class iG extends Le{refresh(){const t=this.editor.model,e=t.document.selection,i=e.getSelectedElement();D1(i,t.schema)?this.isEnabled=t.schema.checkAttribute(i,"linkHref"):this.isEnabled=t.schema.checkAttributeInSelection(e,"linkHref")}execute(){const t=this.editor,e=this.editor.model,i=e.document.selection,n=t.commands.get("link");e.change(r=>{const o=i.isCollapsed?[gp(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),e)]:e.schema.getValidRanges(i.getRanges(),"linkHref");for(const l of o)if(r.removeAttribute("linkHref",l),n)for(const a of n.manualDecorators)r.removeAttribute(a.id,l)})}}class nG extends ct(){constructor({id:e,label:i,attributes:n,classes:r,styles:o,defaultValue:l}){super();p(this,"id");p(this,"defaultValue");p(this,"label");p(this,"attributes");p(this,"classes");p(this,"styles");this.id=e,this.set("value",void 0),this.defaultValue=l,this.label=i,this.attributes=n,this.classes=r,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const sG="ck-link_selected",nP="automatic",rG="manual",oG=/^(https?:)?\/\//;class lc extends F{constructor(e){super(e);p(this,"_linkOpeners",[]);e.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1,toolbar:["linkPreview","|","editLink","linkProperties","unlink"]})}static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[gg,gI,vn]}init(){const e=this.editor,i=this.editor.config.get("link.allowedProtocols");e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:iP}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(o,l)=>iP(lR(o,i),l)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:o=>o.getAttribute("href")}}),e.commands.add("link",new Jj(e)),e.commands.add("unlink",new iG(e));const n=jj(e.t,Gj(e.config.get("link.decorators")));this._enableAutomaticDecorators(n.filter(o=>o.mode===nP)),this._enableManualDecorators(n.filter(o=>o.mode===rG)),e.plugins.get(gg).registerAttribute("linkHref"),bI(e,"linkHref","a",sG),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_registerLinkOpener(e){this._linkOpeners.push(e)}_enableAutomaticDecorators(e){const i=this.editor,r=i.commands.get("link").automaticDecorators;i.config.get("link.addTargetToExternalLinks")&&r.add({id:"linkIsExternal",mode:nP,callback:o=>!!o&&oG.test(o),attributes:{target:"_blank",rel:"noopener noreferrer"}}),r.add(e),r.length&&i.conversion.for("downcast").add(r.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const i=this.editor,r=i.commands.get("link").manualDecorators;e.forEach(o=>{i.model.schema.extend("$text",{allowAttributes:o.id});const l=new nG(o);r.add(l),i.conversion.for("downcast").attributeToElement({model:l.id,view:(a,{writer:c,schema:h},{item:f})=>{if((f.is("selection")||h.isInline(f))&&a){const m=c.createAttributeElement("a",l.attributes,{priority:5});l.classes&&c.addClass(l.classes,m);for(const w in l.styles)c.setStyle(w,l.styles[w],m);return c.setCustomProperty("link",!0,m),m}}}),i.conversion.for("upcast").elementToAttribute({view:{name:"a",...l._createPattern()},model:{key:l.id}})})}_enableLinkOpen(){const e=this.editor,n=e.editing.view.document,r=o=>{this._linkOpeners.some(l=>l(o))||Kj(o)};this.listenTo(n,"click",(o,l)=>{if(!(Ie.isMac?l.domEvent.metaKey:l.domEvent.ctrlKey))return;let c=l.domTarget;if(c.tagName.toLowerCase()!="a"&&(c=c.closest("a")),!c)return;const h=c.getAttribute("href");h&&(o.stop(),l.preventDefault(),r(h))},{context:"$capture"}),this.listenTo(n,"keydown",(o,l)=>{const c=e.commands.get("link").value;c&&l.keyCode===Fe.enter&&l.altKey&&(o.stop(),r(c))})}_enableSelectionAttributesFixer(){const i=this.editor.model,n=i.document.selection;this.listenTo(n,"change:attribute",(r,{attributeKeys:o})=>{!o.includes("linkHref")||n.hasAttribute("linkHref")||i.change(l=>{lG(l,aG(i.schema))})})}_enableClipboardIntegration(){const e=this.editor,i=e.model,n=this.editor.config.get("link.defaultProtocol");n&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(r,o)=>{i.change(l=>{const a=l.createRangeIn(o.content);for(const c of a.getItems())if(c.hasAttribute("linkHref")){const h=cy(c.getAttribute("linkHref"),n);l.setAttribute("linkHref",h,c)}})})}}function lG(s,t){s.removeSelectionAttribute("linkHref");for(const e of t)s.removeSelectionAttribute(e)}function aG(s){return s.getDefinition("$text").allowAttributes.filter(e=>e.startsWith("link"))}class cG extends ve{constructor(t){super(t);const e=this.bindTemplate;this.set({href:void 0,withText:!0}),this.extendTemplate({attributes:{class:["ck-link-toolbar__preview"],href:e.to("href"),target:"_blank",rel:"noopener noreferrer"},on:{click:e.to(i=>{if(this.href){const n=()=>i.preventDefault();this.fire("navigate",this.href,n)}})}}),this.template.tag="a"}}class uG extends he{constructor(e,i){super(e);p(this,"focusTracker",new ht);p(this,"keystrokes",new bt);p(this,"backButtonView");p(this,"saveButtonView");p(this,"displayedTextInputView");p(this,"urlInputView");p(this,"children");p(this,"providersListChildren");p(this,"_validators");p(this,"_focusables",new hi);p(this,"_focusCycler");this._validators=i,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.displayedTextInputView=this._createDisplayedTextInput(),this.urlInputView=this._createUrlInput(),this.providersListChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView()]),this._createFormChildren(),this.listenTo(this.providersListChildren,"add",()=>{this.stopListening(this.providersListChildren,"add"),this.children.add(this._createProvidersListView())}),this._focusCycler=new Kt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-link-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Bl({view:this}),[this.urlInputView,this.saveButtonView,...this.providersListChildren,this.backButtonView,this.displayedTextInputView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const e of this._validators){const i=e(this);if(i)return this.urlInputView.errorText=i,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createBackButton(){const e=this.locale.t,i=new ve(this.locale);return i.set({class:"ck-button-back",label:e("Back"),icon:Ll,tooltip:!0}),i.delegate("execute").to(this,"cancel"),i}_createSaveButton(){const e=this.locale.t,i=new ve(this.locale);return i.set({label:e("Insert"),tooltip:!1,withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),i}_createHeaderView(){const e=this.locale.t,i=new Nr(this.locale,{label:e("Link")});return i.children.add(this.backButtonView,0),i}_createProvidersListView(){const e=new $l(this.locale);return e.extendTemplate({attributes:{class:["ck-link-form__providers-list"]}}),e.items.bindTo(this.providersListChildren).using(i=>{const n=new us(this.locale);return n.children.add(i),n}),e}_createDisplayedTextInput(){const e=this.locale.t,i=new jt(this.locale,wn);return i.label=e("Displayed text"),i.class="ck-labeled-field-view_full-width",i}_createUrlInput(){const e=this.locale.t,i=new jt(this.locale,wn);return i.fieldView.inputMode="url",i.label=e("Link URL"),i.class="ck-labeled-field-view_full-width",i}_createFormChildren(){this.children.add(new Ti(this.locale,{children:[this.displayedTextInputView],class:["ck-form__row_large-top-padding"]})),this.children.add(new Ti(this.locale,{children:[this.urlInputView,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding","ck-form__row_large-bottom-padding"]}))}get url(){const{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}}class hG extends he{constructor(e){super(e);p(this,"focusTracker",new ht);p(this,"keystrokes",new bt);p(this,"backButtonView");p(this,"listView");p(this,"listChildren");p(this,"emptyListInformation");p(this,"children");p(this,"_focusables",new hi);p(this,"_focusCycler");this.listChildren=this.createCollection(),this.backButtonView=this._createBackButton(),this.listView=this._createListView(),this.emptyListInformation=this._createEmptyLinksListItemView(),this.children=this.createCollection([this._createHeaderView(),this.emptyListInformation]),this.set("title",""),this.set("emptyListPlaceholder",""),this.set("hasItems",!1),this.listenTo(this.listChildren,"change",()=>{this.hasItems=this.listChildren.length>0}),this.on("change:hasItems",(i,n,r)=>{r?(this.children.remove(this.emptyListInformation),this.children.add(this.listView)):(this.children.remove(this.listView),this.children.add(this.emptyListInformation))}),this.keystrokes.set("Esc",(i,n)=>{this.fire("cancel"),n()}),this._focusCycler=new Kt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-providers"],tabindex:"-1"},children:this.children})}render(){super.render(),[this.listView,this.backButtonView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createListView(){const e=new $l(this.locale);return e.extendTemplate({attributes:{class:["ck-link-providers__list"]}}),e.items.bindTo(this.listChildren).using(i=>{const n=new us(this.locale);return n.children.add(i),n}),e}_createBackButton(){const e=this.locale.t,i=new ve(this.locale);return i.set({class:"ck-button-back",label:e("Back"),icon:Ll,tooltip:!0}),i.delegate("execute").to(this,"cancel"),i}_createHeaderView(){const e=new Nr(this.locale);return e.bind("label").to(this,"title"),e.children.add(this.backButtonView,0),e}_createEmptyLinksListItemView(){const e=new he(this.locale);return e.setTemplate({tag:"p",attributes:{class:["ck","ck-link__empty-list-info"]},children:[{text:this.bindTemplate.to("emptyListPlaceholder")}]}),e}}class dG extends he{constructor(e){super(e);p(this,"focusTracker",new ht);p(this,"keystrokes",new bt);p(this,"backButtonView");p(this,"children");p(this,"listChildren");p(this,"_focusables",new hi);p(this,"_focusCycler");this.backButtonView=this._createBackButton(),this.listChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView(),this._createListView()]),this._focusCycler=new Kt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-properties"],tabindex:"-1"},children:this.children}),this.keystrokes.set("Esc",(i,n)=>{this.fire("back"),n()})}render(){super.render(),[...this.listChildren,this.backButtonView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBackButton(){const e=this.locale.t,i=new ve(this.locale);return i.set({class:"ck-button-back",label:e("Back"),icon:Ll,tooltip:!0}),i.delegate("execute").to(this,"back"),i}_createHeaderView(){const e=this.locale.t,i=new Nr(this.locale,{label:e("Link properties")});return i.children.add(this.backButtonView,0),i}_createListView(){const e=new $l(this.locale);return e.extendTemplate({attributes:{class:["ck-link__list"]}}),e.items.bindTo(this.listChildren).using(i=>{const n=new us(this.locale);return n.children.add(i),n}),e}}class fG extends ve{constructor(e){super(e);p(this,"arrowView");this.set({withText:!0}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-link__button"]}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Vs;return e.content=P6,e}}const Zs="link-ui";class cR extends F{constructor(){super(...arguments);p(this,"toolbarView",null);p(this,"formView",null);p(this,"linkProviderItemsView",null);p(this,"propertiesView",null);p(this,"_balloon");p(this,"_linksProviders",new vi)}static get requires(){return[hs,lc]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=this.editor.t;this.set("selectedLinkableText",void 0),e.editing.view.addObserver(u8),this._balloon=e.plugins.get(hs),this._registerComponents(),this._registerEditingOpeners(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:Zs,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Zs,view:(n,{writer:r})=>{if(!n.markerRange.isCollapsed)return null;const o=r.createUIElement("span");return r.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],o),o}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:i("Create link"),keystroke:Nu},{label:i("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.propertiesView&&this.propertiesView.destroy(),this.formView&&this.formView.destroy(),this.toolbarView&&this.toolbarView.destroy(),this.linkProviderItemsView&&this.linkProviderItemsView.destroy()}registerLinksListProvider(e){const i=this._linksProviders.filter(n=>(n.order||0)<=(e.order||0)).length;this._linksProviders.add(e,i)}_createViews(){const e=this.editor.commands.get("link");this.toolbarView=this._createToolbarView(),this.formView=this._createFormView(),e.manualDecorators.length&&(this.propertiesView=this._createPropertiesView()),this._enableUserBalloonInteractions()}_createToolbarView(){const e=this.editor,i=new vl(e.locale),n=e.commands.get("link");i.class="ck-link-toolbar";let r=e.config.get("link.toolbar");return n.manualDecorators.length||(r=r.filter(o=>o!=="linkProperties")),i.fillFromConfig(r,e.ui.componentFactory),i.keystrokes.set("Esc",(o,l)=>{this._hideUI(),l()}),i.keystrokes.set(Nu,(o,l)=>{this._addFormView(),l()}),e.ui.addToolbar(i,{isContextual:!0,beforeFocus:()=>{this._getSelectedLinkElement()&&!this._isToolbarVisible&&this._showUI(!0)},afterBlur:()=>{this._hideUI(!1)}}),i}_createFormView(){const e=this.editor,i=e.locale.t,n=e.commands.get("link"),r=e.config.get("link.defaultProtocol"),o=new(dg(uG))(e.locale,mG(e));return o.displayedTextInputView.bind("isEnabled").to(this,"selectedLinkableText",l=>l!==void 0),o.urlInputView.bind("isEnabled").to(n,"isEnabled"),o.saveButtonView.bind("isEnabled").to(n,"isEnabled"),o.saveButtonView.bind("label").to(n,"value",l=>i(l?"Update":"Insert")),this.listenTo(o,"submit",()=>{if(o.isValid()){const l=o.urlInputView.fieldView.element.value,a=cy(l,r),c=o.displayedTextInputView.fieldView.element.value;e.execute("link",a,this._getDecoratorSwitchesState(),c!==this.selectedLinkableText?c:void 0),this._closeFormView()}}),this.listenTo(o.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(o,"cancel",()=>{this._closeFormView()}),o.keystrokes.set("Esc",(l,a)=>{this._closeFormView(),a()}),o.providersListChildren.bindTo(this._linksProviders).using(l=>this._createLinksListProviderButton(l)),o}_createLinkProviderListView(e){return e.getListItems().map(({href:i,label:n,icon:r})=>{const o=new ve;return o.set({label:n,icon:r,tooltip:!1,withText:!0}),o.on("execute",()=>{this.formView.resetFormStatus(),this.formView.urlInputView.fieldView.value=i,this.editor.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),o})}_createLinkProviderItemsView(e){const i=this.editor,n=i.locale.t,r=new hG(i.locale),{emptyListPlaceholder:o,label:l}=e;return r.emptyListPlaceholder=o||n("No links available"),r.title=l,this.listenTo(r,"cancel",()=>{i.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),r}_createPropertiesView(){const e=this.editor,i=this.editor.commands.get("link"),n=new(dg(dG))(e.locale);return this.listenTo(n,"back",()=>{e.editing.view.focus(),this._removePropertiesView()}),n.listChildren.bindTo(i.manualDecorators).using(r=>{const o=new td(e.locale);return o.set({label:r.label,withText:!0}),o.bind("isOn").toMany([r,i],"value",(l,a)=>a===void 0&&l===void 0?!!r.defaultValue:!!l),o.on("execute",()=>{r.set("value",!o.isOn),e.execute("link",i.value,this._getDecoratorSwitchesState())}),o}),n}_getDecoratorSwitchesState(){const e=this.editor.commands.get("link");return Array.from(e.manualDecorators).reduce((i,n)=>{const r=e.value===void 0&&n.value===void 0?n.defaultValue:n.value;return{...i,[n.id]:!!r}},{})}_registerEditingOpeners(){this.editor.plugins.get(lc)._registerLinkOpener(i=>{const n=this._getLinkProviderLinkByHref(i);if(!n)return!1;const{item:r,provider:o}=n;return o.navigate?o.navigate(r):!1})}_registerComponents(){const e=this.editor;e.ui.componentFactory.add("link",()=>{const i=this._createButton(ve);return i.set({tooltip:!0}),i}),e.ui.componentFactory.add("menuBar:link",()=>{const i=this._createButton(ci);return i.set({role:"menuitemcheckbox"}),i}),e.ui.componentFactory.add("linkPreview",i=>{const n=new cG(i),r=e.config.get("link.allowedProtocols"),o=e.commands.get("link"),l=i.t;n.bind("isEnabled").to(o,"value",c=>!!c),n.bind("href").to(o,"value",c=>c&&lR(c,r));const a=c=>{if(!c){n.label=void 0,n.icon=void 0,n.tooltip=l("Open link in new tab");return}const h=this._getLinkProviderLinkByHref(c);if(h){const{label:f,tooltip:m,icon:w}=h.item;n.label=f,n.tooltip=m||!1,n.icon=w}else n.label=c,n.icon=void 0,n.tooltip=l("Open link in new tab")};return a(o.value),this.listenTo(o,"change:value",(c,h,f)=>{a(f)}),this.listenTo(n,"navigate",(c,h,f)=>{const m=this._getLinkProviderLinkByHref(h);if(!m)return;const{provider:w,item:O}=m,{navigate:v}=w;v&&v(O)&&(c.stop(),f())}),n}),e.ui.componentFactory.add("unlink",i=>{const n=e.commands.get("unlink"),r=new ve(i),o=i.t;return r.set({label:o("Unlink"),icon:nz,tooltip:!0}),r.bind("isEnabled").to(n),this.listenTo(r,"execute",()=>{e.execute("unlink"),this._hideUI()}),r}),e.ui.componentFactory.add("editLink",i=>{const n=e.commands.get("link"),r=new ve(i),o=i.t;return r.set({label:o("Edit link"),icon:C1,tooltip:!0}),r.bind("isEnabled").to(n),this.listenTo(r,"execute",()=>{this._addFormView()}),r}),e.ui.componentFactory.add("linkProperties",i=>{const n=e.commands.get("link"),r=new ve(i),o=i.t;return r.set({label:o("Link properties"),icon:XF,tooltip:!0}),r.bind("isEnabled").to(n,"isEnabled",n,"value",n,"manualDecorators",(l,a,c)=>l&&!!a&&c.length>0),this.listenTo(r,"execute",()=>{this._addPropertiesView()}),r})}_createLinksListProviderButton(e){const i=this.editor.locale,n=new fG(i);return n.set({label:e.label}),this.listenTo(n,"execute",()=>{this._showLinksProviderView(e)}),n}_createButton(e){const i=this.editor,n=i.locale,r=i.commands.get("link"),o=new e(i.locale),l=n.t;return o.set({label:l("Link"),icon:C6,keystroke:Nu,isToggleable:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",a=>!!a),this.listenTo(o,"execute",()=>{i.editing.view.scrollToTheSelection(),this._showUI(!0),this._getSelectedLinkElement()&&this._addFormView()}),o}_enableBalloonActivators(){const e=this.editor,i=e.editing.view.document;this.listenTo(i,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(Nu,(n,r)=>{r(),e.commands.get("link").isEnabled&&(e.editing.view.scrollToTheSelection(),this._showUI(!0))})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,i)=>{this._isToolbarVisible&&!this.toolbarView.focusTracker.isFocused&&(this.toolbarView.focus(),i())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,i)=>{this._isUIVisible&&(this._hideUI(),i())}),Dr({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>{this._hideUI(!1)}})}_addToolbarView(){this.toolbarView||this._createViews(),!this._isToolbarInPanel&&this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const e=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this.formView.backButtonView.isVisible=e.isEnabled&&!!e.value,this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.selectedLinkableText=this._getSelectedLinkableText(),this.formView.displayedTextInputView.fieldView.value=this.selectedLinkableText||"",this.formView.urlInputView.fieldView.value=e.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_addPropertiesView(){this.propertiesView||this._createViews(),!this._arePropertiesInPanel&&(this.propertiesView.disableCssTransitions(),this._balloon.add({view:this.propertiesView,position:this._getBalloonPositionData()}),this.propertiesView.enableCssTransitions(),this.propertiesView.focus())}_showLinksProviderView(e){this.linkProviderItemsView&&this._removeLinksProviderView(),this.linkProviderItemsView=this._createLinkProviderItemsView(e),this._addLinkProviderItemsView(e)}_addLinkProviderItemsView(e){this.linkProviderItemsView.listChildren.clear(),this.linkProviderItemsView.listChildren.addMany(this._createLinkProviderListView(e)),this._balloon.add({view:this.linkProviderItemsView,position:this._getBalloonPositionData()}),this.linkProviderItemsView.focus()}_closeFormView(){const e=this.editor.commands.get("link");this.selectedLinkableText=void 0,e.value!==void 0?this._removeFormView():this._hideUI()}_removePropertiesView(){this._arePropertiesInPanel&&this._balloon.remove(this.propertiesView)}_removeLinksProviderView(){this._isLinksListInPanel&&this._balloon.remove(this.linkProviderItemsView)}_removeFormView(e=!0){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.displayedTextInputView.fieldView.reset(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),e&&this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._isToolbarVisible?this._addFormView():this._addToolbarView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addToolbarView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(e=!0){const i=this.editor;this._isUIInPanel&&(this.stopListening(i.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e&&i.editing.view.focus(),this._removeLinksProviderView(),this._removePropertiesView(),this._removeFormView(e),this._isToolbarInPanel&&this._balloon.remove(this.toolbarView),this._hideFakeVisualSelection())}_startUpdatingUI(){const e=this.editor,i=e.editing.view.document;let n=this._getSelectedLinkElement(),r=l();const o=()=>{const a=this._getSelectedLinkElement(),c=l();n&&!a||!n&&c!==r?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),n=a,r=c};function l(){return i.selection.focus.getAncestors().reverse().find(a=>a.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _arePropertiesInPanel(){return!!this.propertiesView&&this._balloon.hasView(this.propertiesView)}get _isLinksListInPanel(){return!!this.linkProviderItemsView&&this._balloon.hasView(this.linkProviderItemsView)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _isToolbarInPanel(){return!!this.toolbarView&&this._balloon.hasView(this.toolbarView)}get _isPropertiesVisible(){return!!this.propertiesView&&this._balloon.visibleView===this.propertiesView}get _isFormVisible(){return!!this.formView&&this._balloon.visibleView==this.formView}get _isToolbarVisible(){return!!this.toolbarView&&this._balloon.visibleView===this.toolbarView}get _isUIInPanel(){return this._arePropertiesInPanel||this._isLinksListInPanel||this._isFormInPanel||this._isToolbarInPanel}get _isUIVisible(){return this._isPropertiesVisible||this._isLinksListInPanel||this._isFormVisible||this._isToolbarVisible}_getBalloonPositionData(){const e=this.editor.editing.view,i=e.document;if(this.editor.model.markers.has(Zs)){const r=this.editor.editing.mapper.markerNameToElements(Zs);if(r){const o=Array.from(r),l=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));return{target:e.domConverter.viewRangeToDom(l)}}}return{target:()=>{const r=this._getSelectedLinkElement();return r?e.domConverter.mapViewToDom(r):e.domConverter.viewRangeToDom(i.selection.getFirstRange())}}}_getSelectedLinkElement(){const e=this.editor.editing.view,i=e.document.selection,n=i.getSelectedElement();if(i.isCollapsed||n&&Wt(n))return Ob(i.getFirstPosition());{const r=i.getFirstRange().getTrimmed(),o=Ob(r.start),l=Ob(r.end);return!o||o!=l?null:e.createRangeIn(o).getTrimmed().isEqual(r)?o:null}}_getSelectedLinkableText(){const e=this.editor.model,i=this.editor.editing,n=this._getSelectedLinkElement();if(!n)return N1(e.document.selection.getFirstRange());const r=i.view.createRangeOn(n),o=i.mapper.toModelRange(r);return N1(o)}_getLinkProviderLinkByHref(e){if(!e)return null;for(const i of this._linksProviders){const n=i.getItem?i.getItem(e):i.getListItems().find(r=>r.href===e);if(n)return{provider:i,item:n}}return null}_showFakeVisualSelection(){const e=this.editor.model;e.change(i=>{const n=e.document.selection.getFirstRange();if(e.markers.has(Zs))i.updateMarker(Zs,{range:n});else if(n.start.isAtEnd){const r=n.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:n});i.addMarker(Zs,{usingOperation:!1,affectsData:!1,range:i.createRange(r,n.end)})}else i.addMarker(Zs,{usingOperation:!1,affectsData:!1,range:n})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(Zs)&&e.change(i=>{i.removeMarker(Zs)})}}function Ob(s){return s.getAncestors().find(t=>qj(t))||null}function mG(s){const t=s.t,e=s.config.get("link.allowCreatingEmptyLinks");return[i=>{if(!e&&!i.url.length)return t("Link URL must not be empty.")}]}const gG=4,uR=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63}))|localhost)(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),pG=2;class hR extends F{static get requires(){return[Dl,lc]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(t,e){return e.textNode&&e.textNode.hasAttribute("linkHref")?gp(e,"linkHref",e.textNode.getAttribute("linkHref"),t):null}_selectEntireLinks(t,e){const n=this.editor.model,r=n.document.selection,o=r.getFirstPosition(),l=r.getLastPosition();let a=e.getJoined(this._expandLinkRange(n,o)||e);a&&(a=a.getJoined(this._expandLinkRange(n,l)||e)),a&&(a.start.isBefore(o)||a.end.isAfter(l))&&t.setSelection(a)}_enablePasteLinking(){const t=this.editor,e=t.model,i=e.document.selection,n=t.plugins.get("ClipboardPipeline"),r=t.commands.get("link");n.on("inputTransformation",(o,l)=>{if(!this.isEnabled||!r.isEnabled||i.isCollapsed||l.method!=="paste"||i.rangeCount>1)return;const a=i.getFirstRange(),c=l.dataTransfer.getData("text/plain");if(!c)return;const h=c.match(uR);h&&h[2]===c&&(e.change(f=>{this._selectEntireLinks(f,a),r.execute(c)}),o.stop())},{priority:"high"})}_enableTypingHandling(){const t=this.editor,e=new jx(t.model,i=>{let n=i;if(!wG(n))return;n=n.slice(0,-1),"!.:,;?".includes(n[n.length-1])&&(n=n.slice(0,-1));const r=sP(n);if(r)return{url:r,removedTrailingCharacters:i.length-n.length}});e.on("matched:data",(i,n)=>{const{batch:r,range:o,url:l,removedTrailingCharacters:a}=n;if(!r.isTyping)return;const c=o.end.getShiftedBy(-a),h=c.getShiftedBy(-l.length),f=t.model.createRange(h,c);this._applyAutoLink(l,f)}),e.bind("isEnabled").to(this)}_enableEnterHandling(){const t=this.editor,e=t.model,i=t.commands.get("enter");i&&i.on("execute",()=>{var o;const n=e.document.selection.getFirstPosition();let r;(o=n.parent.previousSibling)!=null&&o.is("element")?r=e.createRangeIn(n.parent.previousSibling):r=e.createRange(e.createPositionAt(n.parent,0),n),this._checkAndApplyAutoLinkOnRange(r)})}_enableShiftEnterHandling(){const t=this.editor,e=t.model,i=t.commands.get("shiftEnter");i&&i.on("execute",()=>{const n=e.document.selection.getFirstPosition(),r=e.createRange(e.createPositionAt(n.parent,0),n.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(r)})}_checkAndApplyAutoLinkOnRange(t){const e=this.editor.model,{text:i,range:n}=wI(t,e),r=sP(i);if(r){const o=e.createRange(n.end.getShiftedBy(-r.length),n.end);this._applyAutoLink(r,o)}}_applyAutoLink(t,e){const i=this.editor.model,n=this.editor.config.get("link.defaultProtocol"),r=cy(t,n);!this.isEnabled||!bG(e,i)||!aR(r)||OG(e)||this._persistAutoLink(r,e)}_persistAutoLink(t,e){const i=this.editor.model,n=this.editor.plugins.get("Delete");i.enqueueChange(r=>{r.setAttribute("linkHref",t,e),i.enqueueChange(()=>{n.requestUndoOnBackspace()})})}}function wG(s){return s.length>gG&&s[s.length-1]===" "&&s[s.length-2]!==" "}function sP(s){const t=uR.exec(s);return t?t[pG]:null}function bG(s,t){return t.schema.checkAttributeInSelection(t.createSelection(s),"linkHref")}function OG(s){const t=s.start.nodeAfter;return!!t&&t.hasAttribute("linkHref")}class xG extends F{static get requires(){return[lc,cR,hR]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}}class yG extends F{static get requires(){return["ImageEditing","ImageUtils",lc]}static get pluginName(){return"LinkImageEditing"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.model.schema;t.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["linkHref"]}),t.conversion.for("upcast").add(vG(t)),t.conversion.for("downcast").add(_G(t)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const t=this.editor,i=t.commands.get("link").automaticDecorators;i.length&&t.conversion.for("downcast").add(i.getDispatcherForLinkedImage())}_enableManualDecorators(){const t=this.editor,e=t.commands.get("link");for(const i of e.manualDecorators)t.plugins.has("ImageBlockEditing")&&t.model.schema.extend("imageBlock",{allowAttributes:i.id}),t.plugins.has("ImageInlineEditing")&&t.model.schema.extend("imageInline",{allowAttributes:i.id}),t.conversion.for("downcast").add(kG(i)),t.conversion.for("upcast").add(SG(t,i))}}function vG(s){const t=s.plugins.has("ImageInlineEditing"),e=s.plugins.get("ImageUtils");return i=>{i.on("element:a",(n,r,o)=>{const l=r.viewItem,a=e.findViewImgElement(l);if(!a)return;const c=a.findAncestor(w=>e.isBlockImageView(w));if(t&&!c)return;const h={attributes:["href"]};if(!o.consumable.consume(l,h))return;const f=l.getAttribute("href");if(!f)return;let m=r.modelCursor.parent;if(!m.is("element","imageBlock")){const w=o.convertItem(a,r.modelCursor);r.modelRange=w.modelRange,r.modelCursor=w.modelCursor,m=r.modelCursor.nodeBefore}m&&m.is("element","imageBlock")&&o.writer.setAttribute("linkHref",f,m)},{priority:"high"})}}function _G(s){const t=s.plugins.get("ImageUtils");return e=>{e.on("attribute:linkHref:imageBlock",(i,n,r)=>{if(!r.consumable.consume(n.item,i.name))return;const o=r.mapper.toViewElement(n.item),l=r.writer,a=Array.from(o.getChildren()).find(f=>f.is("element","a")),c=t.findViewImgElement(o),h=c.parent.is("element","picture")?c.parent:c;if(a)n.attributeNewValue?l.setAttribute("href",n.attributeNewValue,a):(l.move(l.createRangeOn(h),l.createPositionAt(o,0)),l.remove(a));else{const f=l.createContainerElement("a",{href:n.attributeNewValue});l.insert(l.createPositionAt(o,0),f),l.move(l.createRangeOn(h),l.createPositionAt(f,0))}},{priority:"high"})}}function kG(s){return t=>{t.on(`attribute:${s.id}:imageBlock`,(e,i,n)=>{const r=n.mapper.toViewElement(i.item),o=Array.from(r.getChildren()).find(l=>l.is("element","a"));if(o){if(s.value===void 0){for(const l in s.attributes)n.writer.removeAttribute(l,o);s.classes&&n.writer.removeClass(s.classes,o);for(const l in s.styles)n.writer.removeStyle(l,o);return}for(const[l,a]of cs(s.attributes))n.writer.setAttribute(l,a,o);s.classes&&n.writer.addClass(s.classes,o);for(const l in s.styles)n.writer.setStyle(l,s.styles[l],o)}})}}function SG(s,t){const e=s.plugins.has("ImageInlineEditing"),i=s.plugins.get("ImageUtils");return n=>{n.on("element:a",(r,o,l)=>{const a=o.viewItem,c=i.findViewImgElement(a);if(!c)return;const h=c.findAncestor(O=>i.isBlockImageView(O));if(e&&!h)return;const m=new Nn(t._createPattern()).match(a);if(!m||!l.consumable.consume(a,m.match))return;const w=o.modelCursor.nodeBefore||o.modelCursor.parent;l.writer.setAttribute(t.id,!0,w)},{priority:"high"})}}class CG extends F{static get requires(){return[lc,cR,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"click",(i,n)=>{this._isSelectedLinkedImage(t.model.document.selection)&&(n.preventDefault(),i.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("linkImage",i=>{const n=new ve(i),r=t.plugins.get("LinkUI"),o=t.commands.get("link");return n.set({isEnabled:!0,label:e("Link image"),icon:C6,keystroke:Nu,tooltip:!0,isToggleable:!0}),n.bind("isEnabled").to(o,"isEnabled"),n.bind("isOn").to(o,"value",l=>!!l),this.listenTo(n,"execute",()=>{this._isSelectedLinkedImage(t.model.document.selection)?r._addToolbarView():r._showUI(!0)}),n})}_isSelectedLinkedImage(t){const e=t.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(e)&&e.hasAttribute("linkHref")}}class PG extends F{static get requires(){return[yG,CG]}static get pluginName(){return"LinkImage"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ds{constructor(t,e){p(this,"_startElement");p(this,"_referenceIndent");p(this,"_isForward");p(this,"_includeSelf");p(this,"_sameAttributes");p(this,"_sameIndent");p(this,"_lowerIndent");p(this,"_higherIndent");this._startElement=t,this._referenceIndent=t.getAttribute("listIndent"),this._isForward=e.direction=="forward",this._includeSelf=!!e.includeSelf,this._sameAttributes=ut(e.sameAttributes||[]),this._sameIndent=!!e.sameIndent,this._lowerIndent=!!e.lowerIndent,this._higherIndent=!!e.higherIndent}static first(t,e){const n=new this(t,e)[Symbol.iterator]();return Nt(n)}*[Symbol.iterator](){const t=[];for(const{node:e}of new rd(this._getStartNode(),this._isForward?"forward":"backward")){const i=e.getAttribute("listIndent");if(i<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=i}else if(i>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){t.push(e);continue}}else{if(!this._sameIndent){if(this._higherIndent){t.length&&(yield*t,t.length=0);break}continue}if(this._sameAttributes.some(n=>e.getAttribute(n)!==this._startElement.getAttribute(n)))break}t.length&&(yield*t,t.length=0),yield e}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}class rd{constructor(t,e="forward"){p(this,"_node");p(this,"_isForward");p(this,"_previousNodesByIndent",[]);p(this,"_previous",null);p(this,"_previousNodeIndent",null);this._node=t,this._isForward=e==="forward"}[Symbol.iterator](){return this}next(){if(!Et(this._node))return{done:!0,value:void 0};const t=this._node.getAttribute("listIndent");let e=null;if(this._previous){const n=this._previousNodeIndent;t>n?this._previousNodesByIndent[n]=this._previous:t<n?(e=this._previousNodesByIndent[t]||null,this._previousNodesByIndent.length=t):e=this._previous}const i={node:this._node,previous:this._previous,previousNodeInList:e};return this._previous=this._node,this._previousNodeIndent=t,this._node=this._isForward?this._node.nextSibling:this._node.previousSibling,{value:i,done:!1}}}class TG{constructor(t){p(this,"_listHead");this._listHead=t}[Symbol.iterator](){return new rd(this._listHead)}}class ac{static next(){return ii()}}function Et(s){return!!s&&s.is("element")&&s.hasAttribute("listItemId")}function uy(s,t={}){return[...Ao(s,{...t,direction:"backward"}),...Ao(s,{...t,direction:"forward"})]}function Ao(s,t={}){const e=t.direction=="forward",i=Array.from(new ds(s,{...t,includeSelf:e,sameIndent:!0,sameAttributes:"listItemId"}));return e?i:i.reverse()}function EG(s){return Array.from(new ds(s,{direction:"forward",higherIndent:!0}))}function dR(s,t){const e=new ds(s,{sameIndent:!0,sameAttributes:"listType",...t}),i=new ds(s,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...t});return[...Array.from(e).reverse(),...i]}function kl(s){return!ds.first(s,{sameIndent:!0,sameAttributes:"listItemId"})}function rP(s){return!ds.first(s,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function od(s,t={}){s=ut(s);const e=t.withNested!==!1,i=new Set;for(const n of s)for(const r of uy(n,{higherIndent:e}))i.add(r);return Nl(i)}function Op(s){s=ut(s);const t=new Set;for(const e of s)for(const i of dR(e))t.add(i);return Nl(t)}function hy(s,t){const e=Ao(s,{direction:"forward"}),i=ac.next();for(const n of e)t.setAttribute("listItemId",i,n);return e}function F1(s,t,e){const i={};for(const[r,o]of t.getAttributes())r.startsWith("list")&&(i[r]=o);const n=Ao(s,{direction:"forward"});for(const r of n)e.setAttributes(i,r);return n}function z1(s,t,{expand:e,indentBy:i=1}={}){s=ut(s);const n=e?od(s):s;for(const r of n){const o=r.getAttribute("listIndent")+i;o<0?xp(r,t):t.setAttribute("listIndent",o,r)}return n}function AG(s,t){s=ut(s);const e=od(s),i=new Set,n=Math.min(...e.map(o=>o.getAttribute("listIndent"))),r=new Map;for(const o of e)r.set(o,ds.first(o,{lowerIndent:!0}));for(const o of e){if(i.has(o))continue;i.add(o);const l=o.getAttribute("listIndent")-1;if(l<0){xp(o,t);continue}if(o.getAttribute("listIndent")==n){const a=RG(o,r.get(o),t);for(const c of a)i.add(c);if(a.length)continue}t.setAttribute("listIndent",l,o)}return Nl(i)}function xp(s,t){s=ut(s);for(const e of s)e.is("element","listItem")&&t.rename(e,"paragraph");for(const e of s)for(const i of e.getAttributeKeys())i.startsWith("list")&&t.removeAttribute(i,e);return s}function Ph(s){if(!s.length)return!1;const t=s[0].getAttribute("listItemId");return t?!s.some(e=>e.getAttribute("listItemId")!=t):!1}function IG(s,t){const e=[];let i=Number.POSITIVE_INFINITY;for(const{node:n}of new rd(s.nextSibling)){const r=n.getAttribute("listIndent");if(r==0)break;r<i&&(i=r);const o=r-i;t.setAttribute("listIndent",o,n),e.push(n)}return e}function Nl(s){return Array.from(s).filter(t=>t.root.rootName!=="$graveyard").sort((t,e)=>t.index-e.index)}function Th(s){const t=s.document.selection.getSelectedElement();return t&&s.schema.isObject(t)&&s.schema.isBlock(t)?t:null}function xb(s,t){return t.checkChild(s.parent,"listItem")&&t.checkChild(s,"$text")&&!t.isObject(s)}function Sg(s){return s=="numbered"||s=="customNumbered"}function RG(s,t,e){return Ao(t,{direction:"forward"}).pop().index>s.index?F1(s,t,e):[]}class oP extends Le{constructor(e,i){super(e);p(this,"_direction");this._direction=i}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,i=lP(e.document.selection);e.change(n=>{const r=[];Ph(i)&&!kl(i[0])?(this._direction=="forward"&&r.push(...z1(i,n)),r.push(...hy(i[0],n))):this._direction=="forward"?r.push(...z1(i,n,{expand:!0})):r.push(...AG(i,n));for(const o of r){if(!o.hasAttribute("listType"))continue;const l=ds.first(o,{sameIndent:!0});l&&n.setAttribute("listType",l.getAttribute("listType"),o)}this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",Nl(new Set(e)))}_checkEnabled(){let e=lP(this.editor.model.document.selection),i=e[0];if(!i)return!1;if(this._direction=="backward"||Ph(e)&&!kl(e[0]))return!0;e=od(e),i=e[0];const n=ds.first(i,{sameIndent:!0});return n?n.getAttribute("listType")==i.getAttribute("listType"):!1}}function lP(s){const t=Array.from(s.getSelectedBlocks()),e=t.findIndex(i=>!Et(i));return e!=-1&&(t.length=e),t}class qf extends Le{constructor(e,i,n={}){super(e);p(this,"type");p(this,"_listWalkerOptions");this.type=i,this._listWalkerOptions=n.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const i=this.editor.model,n=i.document,r=Th(i),o=Array.from(n.selection.getSelectedBlocks()).filter(a=>i.schema.checkAttribute(a,"listType")||xb(a,i.schema)),l=e.forceValue!==void 0?!e.forceValue:this.value;i.change(a=>{if(l){const c=o[o.length-1],h=Ao(c,{direction:"forward"}),f=[];h.length>1&&f.push(...hy(h[1],a)),f.push(...xp(o,a)),f.push(...IG(c,a)),this._fireAfterExecute(f)}else if((r||n.selection.isCollapsed)&&Et(o[0])){const c=dR(r||o[0],this._listWalkerOptions);for(const h of c)a.setAttributes({...e.additionalAttributes,listType:this.type},h);this._fireAfterExecute(c)}else{const c=[];for(const h of o)if(!h.hasAttribute("listType"))!h.is("element","listItem")&&xb(h,i.schema)&&a.rename(h,"listItem"),a.setAttributes({...e.additionalAttributes,listIndent:0,listItemId:ac.next(),listType:this.type},h),c.push(h);else for(const f of od(h,{withNested:!1}))f.getAttribute("listType")!=this.type&&(a.setAttributes({...e.additionalAttributes,listType:this.type},f),c.push(f));this._fireAfterExecute(c)}})}_fireAfterExecute(e){this.fire("afterExecute",Nl(new Set(e)))}_getValue(){const e=this.editor.model.document.selection,i=Array.from(e.getSelectedBlocks());if(!i.length)return!1;for(const n of i)if(n.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const e=this.editor.model,i=e.schema,n=e.document.selection,r=Array.from(n.getSelectedBlocks());if(!r.length)return!1;if(this.value)return!0;for(const o of r)if(i.checkAttribute(o,"listType")||xb(o,i))return!0;return!1}}class aP extends Le{constructor(e,i){super(e);p(this,"_direction");this._direction=i}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){const i=this.editor.model,n=i.document.selection,r=[];i.change(o=>{const{firstElement:l,lastElement:a}=this._getMergeSubjectElements(n,e),c=l.getAttribute("listIndent")||0,h=a.getAttribute("listIndent"),f=a.getAttribute("listItemId");if(c!=h){const m=EG(a);r.push(...z1([a,...m],o,{indentBy:c-h,expand:c<h}))}if(e){let m=n;n.isCollapsed&&(m=o.createSelection(o.createRange(o.createPositionAt(l,"end"),o.createPositionAt(a,0)))),i.deleteContent(m,{doNotResetEntireContent:n.isCollapsed});const w=m.getLastPosition().parent,O=w.nextSibling;r.push(w),O&&O!==a&&O.getAttribute("listItemId")==f&&r.push(...F1(O,w,o))}else r.push(...F1(a,l,o));this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",Nl(new Set(e)))}_checkEnabled(){const e=this.editor.model,i=e.document.selection,n=Th(e);if(i.isCollapsed||n){const r=n||i.getFirstPosition().parent;if(!Et(r))return!1;const o=this._direction=="backward"?r.previousSibling:r.nextSibling;if(!o||Ph([r,o]))return!1}else{const r=i.getLastPosition(),o=i.getFirstPosition();if(r.parent===o.parent||!Et(r.parent))return!1}return!0}_getMergeSubjectElements(e,i){const n=this.editor.model,r=Th(n);let o,l;if(e.isCollapsed||r){const a=r||e.getFirstPosition().parent,c=kl(a);this._direction=="backward"?(l=a,c&&!i?o=ds.first(a,{sameIndent:!0,lowerIndent:!0}):o=a.previousSibling):(o=a,l=a.nextSibling)}else o=e.getFirstPosition().parent,l=e.getLastPosition().parent;return{firstElement:o,lastElement:l}}}class cP extends Le{constructor(e,i){super(e);p(this,"_direction");this._direction=i}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(i=>{const n=hy(this._getStartBlock(),i);this._fireAfterExecute(n)})}_fireAfterExecute(e){this.fire("afterExecute",Nl(new Set(e)))}_checkEnabled(){const e=this.editor.model.document.selection,i=this._getStartBlock();return e.isCollapsed&&Et(i)&&!kl(i)}_getStartBlock(){const i=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?i:i.nextSibling}}class VG extends F{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(t){return Op(t)}isFirstBlockOfListItem(t){return kl(t)}isListItemBlock(t){return Et(t)}expandListBlocksToCompleteItems(t,e={}){return od(t,e)}isNumberedListType(t){return Sg(t)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function MG(s){return s.is("element","ol")||s.is("element","ul")}function W1(s){return s.is("element","li")}function LG(s){let t=0,e=s.parent;for(;e;){if(W1(e))t++;else{const i=e.previousSibling;i&&W1(i)&&t++}e=e.parent}return t}function BG(s,t,e,i=mR(e,t)){return s.createAttributeElement(fR(e),null,{priority:2*t/100-100,id:i})}function $G(s,t,e){return s.createAttributeElement("li",null,{priority:(2*t+1)/100-100,id:e})}function fR(s){return s=="numbered"||s=="customNumbered"?"ol":"ul"}function mR(s,t){return`list-${s}-${t}`}function Es(s,t,e){const i=s.nodeBefore;if(Et(i)){let n=i;for(const{node:r}of new rd(n,"backward"))if(n=r,e.has(n)||(e.add(n),t.has(i)))return;t.add(n)}else{const n=s.nodeAfter;Et(n)&&t.add(n)}}function QG(s,t){let e=0,i=-1,n=null,r=!1;for(const{node:o}of s){const l=o.getAttribute("listIndent");if(l>e){let a;n===null?(n=l-e,a=e):(n>l&&(n=l),a=l-n),a>i+1&&(a=i+1),t.setAttribute("listIndent",a,o),r=!0,i=a}else n=null,e=l+1,i=l}return r}function DG(s,t,e){const i=new Set;let n=!1;for(const{node:r}of s){if(i.has(r))continue;let o=r.getAttribute("listType"),l=r.getAttribute("listItemId");if(t.has(l)&&(l=ac.next()),t.add(l),r.is("element","listItem")){r.getAttribute("listItemId")!=l&&(e.setAttribute("listItemId",l,r),n=!0);continue}for(const a of Ao(r,{direction:"forward"}))i.add(a),a.getAttribute("listType")!=o&&(l=ac.next(),o=a.getAttribute("listType")),a.getAttribute("listItemId")!=l&&(e.setAttribute("listItemId",l,a),n=!0)}return n}function NG(){return(s,t,e)=>{const{writer:i,schema:n}=e;if(!t.modelRange)return;const r=Array.from(t.modelRange.getItems({shallow:!0})).filter(f=>n.checkAttribute(f,"listItemId"));if(!r.length)return;const o=ac.next(),l=LG(t.viewItem);let a=t.viewItem.parent&&t.viewItem.parent.is("element","ol")?"numbered":"bulleted";const c=r[0].getAttribute("listType");c&&(a=c);const h={listItemId:o,listIndent:l,listType:a};for(const f of r)f.hasAttribute("listItemId")||i.setAttributes(h,f);r.length>1&&r[1].getAttribute("listItemId")!=h.listItemId&&e.keepEmptyElement(r[0])}}function FG(s,t,e,i){return()=>{const l=s.document.differ.getChanges(),a=[],c=new Set,h=new Set,f=new Set;for(const m of l)if(m.type=="insert"&&m.name!="$text")Es(m.position,c,f),m.attributes.has("listItemId")?h.add(m.position.nodeAfter):Es(m.position.getShiftedBy(m.length),c,f);else if(m.type=="remove"&&m.attributes.has("listItemId"))Es(m.position,c,f);else if(m.type=="attribute"){const w=m.range.start.nodeAfter;e.includes(m.attributeKey)?(Es(m.range.start,c,f),m.attributeNewValue===null?(Es(m.range.start.getShiftedBy(1),c,f),r(w)&&a.push(w)):h.add(w)):Et(w)&&r(w)&&a.push(w)}for(const m of c.values())a.push(...n(m,h));for(const m of new Set(a))t.reconvertItem(m)};function n(l,a){const c=[],h=new Set,f=[];for(const{node:m,previous:w}of new rd(l)){if(h.has(m))continue;const O=m.getAttribute("listIndent");w&&O<w.getAttribute("listIndent")&&(f.length=O+1),f[O]=Object.fromEntries(Array.from(m.getAttributes()).filter(([k])=>e.includes(k)));const v=Ao(m,{direction:"forward"});for(const k of v)h.add(k),(r(k,v)||o(k,f,a))&&c.push(k)}return c}function r(l,a){const c=t.mapper.toViewElement(l);if(!c)return!1;if(i.fire("checkElement",{modelElement:l,viewElement:c}))return!0;if(!l.is("element","paragraph")&&!l.is("element","listItem"))return!1;const f=pR(l,e,a);return f&&c.is("element","p")?!0:!!(!f&&c.is("element","span"))}function o(l,a,c){if(c.has(l))return!1;const h=t.mapper.toViewElement(l);let f=a.length-1;for(let m=h.parent;!m.is("editableElement");m=m.parent){const w=W1(m),O=MG(m);if(!O&&!w)continue;const v=`checkAttributes:${w?"item":"list"}`;if(i.fire(v,{viewElement:m,modelAttributes:a[f]}))break;if(O&&(f--,f<0))return!1}return!0}}function uP(s,t,e,{dataPipeline:i}={}){const n=XG(s);return(r,o,l)=>{const{writer:a,mapper:c,consumable:h}=l,f=o.item;if(!s.includes(o.attributeKey)||!n(f,h))return;const m=WG(f,c,e);gR(m,a,c),HG(m,a);const w=ZG(f,m,t,a,{dataPipeline:i});qG(f,w,t,a)}}function zG(s){return(t,e,i)=>{const{writer:n,mapper:r}=i,o=t.name.split(":")[1];if(!s.checkAttribute(o,"listItemId"))return;const l=r.toViewPosition(e.position),a=e.position.getShiftedBy(e.length),c=r.toViewPosition(a,{isPhantom:!0}),f=n.createRange(l,c).getTrimmed().end.nodeBefore;/* istanbul ignore next -- @preserve */f&&gR(f,n,r)}}function hP(s,{dataPipeline:t}={}){return(e,{writer:i})=>{if(!pR(e,s))return null;if(!t)return i.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const n=i.createContainerElement("p");return i.setCustomProperty("dataPipeline:transparentRendering",!0,n),n}}function WG(s,t,e){const i=e.createRangeOn(s);return t.toViewRange(i).getTrimmed().end.nodeBefore}function UG(s,t){return(e,i)=>{if(i.modelPosition.offset>0)return;const n=i.modelPosition.parent;if(!Et(n)||!s.some(c=>c.scope=="itemMarker"&&c.canInjectMarkerIntoElement&&c.canInjectMarkerIntoElement(n)))return;const r=i.mapper.toViewElement(n),o=t.createRangeIn(r),l=o.getWalker();let a=o.start;for(const{item:c}of l){if(c.is("element")&&i.mapper.toModelElement(c)||c.is("$textProxy"))break;c.is("element")&&c.getCustomProperty("listItemMarker")&&(a=t.createPositionAfter(c),l.skip(({previousPosition:h})=>!h.isEqual(a)))}i.viewPosition=a}}function gR(s,t,e){for(;s.parent.is("attributeElement")&&s.parent.getCustomProperty("listItemWrapper");)t.unwrap(t.createRangeOn(s),s.parent);const i=[];n(t.createPositionBefore(s).getWalker({direction:"backward"})),n(t.createRangeIn(s).getWalker());for(const r of i)t.remove(r);function n(r){for(const{item:o}of r){if(o.is("element")&&e.toModelElement(o))break;o.is("element")&&o.getCustomProperty("listItemMarker")&&i.push(o)}}}function ZG(s,t,e,i,{dataPipeline:n}){let r=i.createRangeOn(t);if(!kl(s))return r;for(const o of e){if(o.scope!="itemMarker")continue;const l=o.createElement(i,s,{dataPipeline:n});if(!l||(i.setCustomProperty("listItemMarker",!0,l),o.canInjectMarkerIntoElement&&o.canInjectMarkerIntoElement(s)?i.insert(i.createPositionAt(t,0),l):(i.insert(r.start,l),r=i.createRange(i.createPositionBefore(l),i.createPositionAfter(t))),!o.createWrapperElement||!o.canWrapElement))continue;const a=o.createWrapperElement(i,s,{dataPipeline:n});i.setCustomProperty("listItemWrapper",!0,a),o.canWrapElement(s)?r=i.wrap(r,a):(r=i.wrap(i.createRangeOn(l),a),r=i.createRange(r.start,i.createPositionAfter(t)))}return r}function HG(s,t){let e=s.parent;for(;e.is("attributeElement")&&["ul","ol","li"].includes(e.name);){const i=e.parent;t.unwrap(t.createRangeOn(s),e),e=i}}function qG(s,t,e,i){if(!s.hasAttribute("listIndent"))return;const n=s.getAttribute("listIndent");let r=s;for(let o=n;o>=0;o--){const l=$G(i,o,r.getAttribute("listItemId")),a=BG(i,o,r.getAttribute("listType"));for(const c of e)(c.scope=="list"||c.scope=="item")&&r.hasAttribute(c.attributeName)&&c.setAttributeOnDowncast(i,r.getAttribute(c.attributeName),c.scope=="list"?a:l);if(t=i.wrap(t,l),t=i.wrap(t,a),o==0||(r=ds.first(r,{lowerIndent:!0}),!r))break}}function XG(s){return(t,e)=>{const i=[];for(const n of s)t.hasAttribute(n)&&i.push(`attribute:${n}`);return i.every(n=>e.test(t,n)!==!1)?(i.forEach(n=>e.consume(t,n)),!0):!1}}function pR(s,t,e=uy(s)){if(!Et(s))return!1;for(const i of s.getAttributeKeys())if(!(i.startsWith("selection:")||i=="htmlEmptyBlock")&&!t.includes(i))return!1;return e.length<2}const Im=["listType","listIndent","listItemId"];class U1 extends F{constructor(e){super(e);p(this,"_downcastStrategies",[]);e.config.define("list.multiBlock",!0)}static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[pp,Dl,VG,vn]}init(){const e=this.editor,i=e.model,n=e.config.get("list.multiBlock");if(e.plugins.has("LegacyListEditing"))throw new A("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});i.schema.register("$listItem",{allowAttributes:Im}),n?(i.schema.extend("$container",{allowAttributesOf:"$listItem"}),i.schema.extend("$block",{allowAttributesOf:"$listItem"}),i.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):i.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const r of Im)i.schema.setAttributeProperties(r,{copyOnReplace:!0});e.commands.add("numberedList",new qf(e,"numbered")),e.commands.add("bulletedList",new qf(e,"bulleted")),e.commands.add("customNumberedList",new qf(e,"customNumbered",{multiLevel:!0})),e.commands.add("customBulletedList",new qf(e,"customBulleted",{multiLevel:!0})),e.commands.add("indentList",new oP(e,"forward")),e.commands.add("outdentList",new oP(e,"backward")),e.commands.add("splitListItemBefore",new cP(e,"before")),e.commands.add("splitListItemAfter",new cP(e,"after")),n&&(e.commands.add("mergeListItemBackward",new aP(e,"backward")),e.commands.add("mergeListItemForward",new aP(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){const i=this.editor.commands,n=i.get("indent"),r=i.get("outdent");n&&n.registerChildCommand(i.get("indentList"),{priority:"high"}),r&&r.registerChildCommand(i.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...Im,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){const e=this.editor,i=e.commands.get("mergeListItemBackward"),n=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(r,o)=>{const l=e.model.document.selection;Th(e.model)||e.model.change(()=>{const a=l.getFirstPosition();if(l.isCollapsed&&o.direction=="backward"){if(!a.isAtStart)return;const c=a.parent;if(!Et(c))return;if(!ds.first(c,{sameAttributes:"listType",sameIndent:!0})&&c.getAttribute("listIndent")===0)rP(c)||e.execute("splitListItemAfter"),e.execute("outdentList");else{if(!i||!i.isEnabled)return;i.execute({shouldMergeOnBlocksContentLevel:dP(e.model,"backward")})}o.preventDefault(),r.stop()}else{if(l.isCollapsed&&!l.getLastPosition().isAtEnd||!n||!n.isEnabled)return;n.execute({shouldMergeOnBlocksContentLevel:dP(e.model,"forward")}),o.preventDefault(),r.stop()}})},{context:"li"})}_setupEnterIntegration(){const e=this.editor,i=e.model,n=e.commands,r=n.get("enter");this.listenTo(e.editing.view.document,"enter",(o,l)=>{const a=i.document,c=a.selection.getFirstPosition().parent;if(a.selection.isCollapsed&&Et(c)&&c.isEmpty&&!l.isSoft){const h=kl(c),f=rP(c);h&&f?(e.execute("outdentList"),l.preventDefault(),o.stop()):h&&!f?(e.execute("splitListItemAfter"),l.preventDefault(),o.stop()):f&&(e.execute("splitListItemBefore"),l.preventDefault(),o.stop())}},{context:"li"}),this.listenTo(r,"afterExecute",()=>{const o=n.get("splitListItemBefore");if(o.refresh(),!o.isEnabled)return;const a=e.model.document.selection.getLastPosition().parent;uy(a).length===2&&o.execute()})}_setupTabIntegration(){const e=this.editor;this.listenTo(e.editing.view.document,"tab",(i,n)=>{const r=n.shiftKey?"outdentList":"indentList";this.editor.commands.get(r).isEnabled&&(e.execute(r),n.stopPropagation(),n.preventDefault(),i.stop())},{context:"li"})}_setupConversion(){const e=this.editor,i=e.model,n=this.getListAttributeNames(),r=e.config.get("list.multiBlock"),o=r?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(a,{writer:c})=>c.createElement(o,{listType:""})}).elementToElement({view:"p",model:(a,{writer:c})=>a.parent&&a.parent.is("element","li")?c.createElement(o,{listType:""}):null,converterPriority:"high"}).add(a=>{a.on("element:li",NG())}),r||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:o,view:hP(n),converterPriority:"high"}).add(a=>{a.on("attribute",uP(n,this._downcastStrategies,i)),a.on("remove",zG(i.schema))}),e.conversion.for("dataDowncast").elementToElement({model:o,view:hP(n,{dataPipeline:!0}),converterPriority:"high"}).add(a=>{a.on("attribute",uP(n,this._downcastStrategies,i,{dataPipeline:!0}))});const l=UG(this._downcastStrategies,e.editing.view);e.editing.mapper.on("modelToViewPosition",l),e.data.mapper.on("modelToViewPosition",l),this.listenTo(i.document,"change:data",FG(i,e.editing,n,this),{priority:"high"}),this.on("checkAttributes:item",(a,{viewElement:c,modelAttributes:h})=>{c.id!=h.listItemId&&(a.return=!0,a.stop())}),this.on("checkAttributes:list",(a,{viewElement:c,modelAttributes:h})=>{(c.name!=fR(h.listType)||c.id!=mR(h.listType,h.listIndent))&&(a.return=!0,a.stop())})}_setupModelPostFixing(){const e=this.editor.model,i=this.getListAttributeNames();e.document.registerPostFixer(n=>jG(e,n,i,this)),this.on("postFixer",(n,{listNodes:r,writer:o})=>{n.return=QG(r,o)||n.return},{priority:"high"}),this.on("postFixer",(n,{listNodes:r,writer:o,seenIds:l})=>{n.return=DG(r,l,o)||n.return},{priority:"high"})}_setupClipboardIntegration(){const e=this.editor.model,i=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",GG(e),{priority:"high"}),this.listenTo(i,"outputTransformation",(n,r)=>{e.change(o=>{const l=Array.from(r.content.getChildren()),a=l[l.length-1];if(l.length>1&&a.is("element")&&a.isEmpty&&l.slice(0,-1).every(Et)&&o.remove(a),r.method=="copy"||r.method=="cut"){const c=Array.from(r.content.getChildren());Ph(c)&&xp(c,o)}})})}_setupAccessibilityIntegration(){const e=this.editor,i=e.t;e.accessibility.addKeystrokeInfoGroup({id:"list",label:i("Keystrokes that can be used in a list"),keystrokes:[{label:i("Increase list item indent"),keystroke:"Tab"},{label:i("Decrease list item indent"),keystroke:"Shift+Tab"}]})}}function jG(s,t,e,i){const n=s.document.differ.getChanges(),r=new Set,o=new Set,l=i.editor.config.get("list.multiBlock");let a=!1;for(const h of n){if(h.type=="insert"&&h.name!="$text"){const f=h.position.nodeAfter;if(!s.schema.checkAttribute(f,"listItemId"))for(const m of Array.from(f.getAttributeKeys()))e.includes(m)&&(t.removeAttribute(m,f),a=!0);Es(h.position,o,r),h.attributes.has("listItemId")||Es(h.position.getShiftedBy(h.length),o,r);for(const{item:m,previousPosition:w}of s.createRangeIn(f))Et(m)&&Es(w,o,r)}else h.type=="remove"?Es(h.position,o,r):h.type=="attribute"&&e.includes(h.attributeKey)&&(Es(h.range.start,o,r),h.attributeNewValue===null&&Es(h.range.start.getShiftedBy(1),o,r));if(!l&&h.type=="attribute"&&Im.includes(h.attributeKey)){const f=h.range.start.nodeAfter;h.attributeNewValue===null&&f&&f.is("element","listItem")?(t.rename(f,"paragraph"),a=!0):h.attributeOldValue===null&&f&&f.is("element")&&f.name!="listItem"&&(t.rename(f,"listItem"),a=!0)}}const c=new Set;for(const h of o.values())a=i.fire("postFixer",{listNodes:new TG(h),listHead:h,writer:t,seenIds:c})||a;return a}function GG(s){return(t,[e,i])=>{const n=e.is("documentFragment")?Array.from(e.getChildren()):[e];if(!n.length)return;const o=(i?s.createSelection(i):s.document.selection).getFirstPosition();let l;if(Et(o.parent))l=o.parent;else if(Et(o.nodeBefore)&&Et(o.nodeAfter))l=o.nodeBefore;else return;s.change(a=>{const c=l.getAttribute("listType"),h=l.getAttribute("listIndent"),f=n[0].getAttribute("listIndent")||0,m=Math.max(h-f,0);for(const w of n){const O=Et(w);l.is("element","listItem")&&w.is("element","paragraph")&&a.rename(w,"listItem"),a.setAttributes({listIndent:(O?w.getAttribute("listIndent"):0)+m,listItemId:O?w.getAttribute("listItemId"):ac.next(),listType:c},w)}})}}function dP(s,t){const e=s.document.selection;if(!e.isCollapsed)return!Th(s);if(t==="forward")return!0;const n=e.getFirstPosition().parent,r=n.previousSibling;return s.schema.isObject(r)?!1:r.isEmpty?!0:Ph([n,r])}function fP(s,t,e,i){s.ui.componentFactory.add(t,()=>{const n=mP(ve,s,t,e,i);return n.set({tooltip:!0,isToggleable:!0}),n}),s.ui.componentFactory.add(`menuBar:${t}`,()=>{const n=mP(ci,s,t,e,i);return n.set({role:"menuitemcheckbox",isToggleable:!0}),n})}function mP(s,t,e,i,n){const r=t.commands.get(e),o=new s(t.locale);return o.set({label:i,icon:n}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),o.on("execute",()=>{t.execute(e),t.editing.view.focus()}),o}class YG extends F{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||fP(this.editor,"numberedList",t("Numbered List"),Dx),this.editor.ui.componentFactory.has("bulletedList")||fP(this.editor,"bulletedList",t("Bulleted List"),Qx)}}class KG extends F{static get requires(){return[U1,YG]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}}class JG extends Le{refresh(){const t=this._getValue();this.value=t,this.isEnabled=t!=null}execute({startIndex:t=1}={}){const e=this.editor.model,i=e.document;let n=Array.from(i.selection.getSelectedBlocks()).filter(r=>Et(r)&&Sg(r.getAttribute("listType")));n=Op(n),e.change(r=>{for(const o of n)r.setAttribute("listStart",t>=0?t:1,o)})}_getValue(){const e=this.editor.model.document,i=Nt(e.selection.getSelectedBlocks());return i&&Et(i)&&Sg(i.getAttribute("listType"))?i.getAttribute("listStart"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const wR={},bR={},OR={},xR=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:s,typeAttribute:t,listType:e}of xR)wR[s]=e,bR[s]=t,t&&(OR[t]=s);function yR(){return xR.map(s=>s.listStyle)}function dy(s){return wR[s]||null}function vR(s){return OR[s]||null}function Z1(s){return bR[s]||null}function eY(s){switch(s){case"lower-alpha":return"lower-latin";case"upper-alpha":return"upper-latin";default:return s}}class tY extends Le{constructor(e,i,n){super(e);p(this,"defaultType");p(this,"_supportedTypes");this.defaultType=i,this._supportedTypes=n}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const i=this.editor.model,n=i.document;i.change(r=>{this._tryToConvertItemsToList(e);let o=Array.from(n.selection.getSelectedBlocks()).filter(l=>l.hasAttribute("listType"));if(o.length){o=Op(o);for(const l of o)r.setAttribute("listStyle",e.type||this.defaultType,l)}})}isStyleTypeSupported(e){return this._supportedTypes?this._supportedTypes.includes(e):!0}_getValue(){const e=Nt(this.editor.model.document.selection.getSelectedBlocks());return Et(e)?e.getAttribute("listStyle"):null}_checkEnabled(){const e=this.editor,i=e.commands.get("numberedList"),n=e.commands.get("bulletedList");return i.isEnabled||n.isEnabled}_tryToConvertItemsToList(e){if(!e.type)return;const i=dy(e.type);if(!i)return;const n=this.editor,r=`${i}List`;n.commands.get(r).value||n.execute(r)}}class iY extends Le{refresh(){const t=this._getValue();this.value=t,this.isEnabled=t!=null}execute(t={}){const e=this.editor.model,i=e.document;let n=Array.from(i.selection.getSelectedBlocks()).filter(r=>Et(r)&&r.getAttribute("listType")=="numbered");n=Op(n),e.change(r=>{for(const o of n)r.setAttribute("listReversed",!!t.reversed,o)})}_getValue(){const e=this.editor.model.document,i=Nt(e.selection.getSelectedBlocks());return Et(i)&&i.getAttribute("listType")=="numbered"?i.getAttribute("listReversed"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function gP(s){return(t,e,i)=>{const{writer:n,schema:r,consumable:o}=i;if(o.test(e.viewItem,s.viewConsumables)===!1)return;e.modelRange||Object.assign(e,i.convertChildren(e.viewItem,e.modelCursor));let l=!1;for(const a of e.modelRange.getItems({shallow:!0}))r.checkAttribute(a,s.attributeName)&&s.appliesToListItem(a)&&(a.hasAttribute(s.attributeName)||(n.setAttribute(s.attributeName,s.getAttributeOnUpcast(e.viewItem),a),l=!0));l&&o.consume(e.viewItem,s.viewConsumables)}}class nY extends F{static get pluginName(){return"ListPropertiesUtils"}static get isOfficialPlugin(){return!0}getAllSupportedStyleTypes(){return yR()}getListTypeFromListStyleType(t){return dy(t)}getListStyleTypeFromTypeAttribute(t){return vR(t)}getTypeAttributeFromListStyleType(t){return Z1(t)}}function _R(s){const{startIndex:t,reversed:e,styles:i}=s;return{styles:sY(i),startIndex:t||!1,reversed:e||!1}}function sY(s){const t={listTypes:["bulleted","numbered"],useAttribute:!1};return s===!0||(s?Array.isArray(s)||typeof s=="string"?t.listTypes=ut(s):(t.listTypes=s.listTypes?ut(s.listTypes):t.listTypes,t.useAttribute=!!s.useAttribute,s.listStyleTypes&&(t.listStyleTypes=s.listStyleTypes)):t.listTypes=[]),t}const Su="default";class rY extends F{static get requires(){return[U1,nY]}static get pluginName(){return"ListPropertiesEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const t=this.editor,e=t.model,i=t.plugins.get(U1),n=t.config.get("list.properties"),r=oY(n);for(const o of r)o.addCommand(t),e.schema.extend("$listItem",{allowAttributes:o.attributeName}),i.registerDowncastStrategy({scope:"list",attributeName:o.attributeName,setAttributeOnDowncast(l,a,c){o.setAttributeOnDowncast(l,a,c)}});t.conversion.for("upcast").add(o=>{for(const l of r)o.on("element:ol",gP(l)),o.on("element:ul",gP(l))}),i.on("checkAttributes:list",(o,{viewElement:l,modelAttributes:a})=>{for(const c of r)c.getAttributeOnUpcast(l)!=a[c.attributeName]&&(o.return=!0,o.stop())}),this.listenTo(t.commands.get("indentList"),"afterExecute",(o,l)=>{e.change(a=>{for(const c of l)for(const h of r)h.appliesToListItem(c)&&a.setAttribute(h.attributeName,h.defaultValue,c)})}),i.on("postFixer",(o,{listNodes:l,writer:a})=>{for(const{node:c}of l)for(const h of r)h.hasValidAttribute(c)||(h.appliesToListItem(c)?a.setAttribute(h.attributeName,h.defaultValue,c):a.removeAttribute(h.attributeName,c),o.return=!0)}),i.on("postFixer",(o,{listNodes:l,writer:a})=>{for(const{node:c,previousNodeInList:h}of l)if(h&&h.getAttribute("listType")==c.getAttribute("listType"))for(const f of r){const{attributeName:m}=f;if(!f.appliesToListItem(c))continue;const w=h.getAttribute(m);c.getAttribute(m)!=w&&(a.setAttribute(m,w,c),o.return=!0)}})}}function oY(s){const t=[],e=_R(s);if(s.styles){const i=e.styles.useAttribute;t.push({attributeName:"listStyle",defaultValue:Su,viewConsumables:{styles:"list-style-type"},addCommand(n){let r=yR();i&&(r=r.filter(o=>!!Z1(o))),n.commands.add("listStyle",new tY(n,Su,r))},appliesToListItem(n){return n.getAttribute("listType")=="numbered"||n.getAttribute("listType")=="bulleted"},hasValidAttribute(n){if(!this.appliesToListItem(n))return!n.hasAttribute("listStyle");if(!n.hasAttribute("listStyle"))return!1;const r=n.getAttribute("listStyle");return r==Su?!0:dy(r)==n.getAttribute("listType")},setAttributeOnDowncast(n,r,o){if(r&&r!==Su)if(i){const l=Z1(r);if(l){n.setAttribute("type",l,o);return}}else{n.setStyle("list-style-type",r,o);return}n.removeStyle("list-style-type",o),n.removeAttribute("type",o)},getAttributeOnUpcast(n){const r=n.getStyle("list-style-type");if(r)return eY(r);const o=n.getAttribute("type");return o?vR(o):Su}})}return s.reversed&&t.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(i){i.commands.add("listReversed",new iY(i))},appliesToListItem(i){return i.getAttribute("listType")=="numbered"},hasValidAttribute(i){return this.appliesToListItem(i)==i.hasAttribute("listReversed")},setAttributeOnDowncast(i,n,r){n?i.setAttribute("reversed","reversed",r):i.removeAttribute("reversed",r)},getAttributeOnUpcast(i){return i.hasAttribute("reversed")}}),s.startIndex&&t.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(i){i.commands.add("listStart",new JG(i))},appliesToListItem(i){return Sg(i.getAttribute("listType"))},hasValidAttribute(i){return this.appliesToListItem(i)==i.hasAttribute("listStart")},setAttributeOnDowncast(i,n,r){n==0||n>1?i.setAttribute("start",n,r):i.removeAttribute("start",r)},getAttributeOnUpcast(i){const n=i.getAttribute("start");return n>=0?n:1}}),t}class kR extends he{constructor(e,{enabledProperties:i,styleButtonViews:n,styleGridAriaLabel:r}){super(e);p(this,"children");p(this,"stylesView",null);p(this,"additionalPropertiesCollapsibleView",null);p(this,"startIndexFieldView",null);p(this,"reversedSwitchButtonView",null);p(this,"focusTracker",new ht);p(this,"keystrokes",new bt);p(this,"focusables",new hi);p(this,"focusCycler");const o=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new Kt({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),n&&n.length?(this.stylesView=this._createStylesView(n,r),this.children.add(this.stylesView)):o.push("ck-list-properties_without-styles"),(i.startIndex||i.reversed)&&(this._addNumberedListPropertyViews(i),o.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:o},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const e of this.stylesView.children)this.stylesView.focusTracker.add(e.element);mp({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>ue.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const e=i=>i.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(e,i){const n=new he(this.locale);return n.children=n.createCollection(),n.children.addMany(e),n.setTemplate({tag:"div",attributes:{"aria-label":i,class:["ck","ck-list-styles-list"]},children:n.children}),n.children.delegate("execute").to(this),n.focus=function(){for(const r of this.children)if(r instanceof ve&&r.isOn){r.focus();return}this.children.first.focus()},n.focusTracker=new ht,n.keystrokes=new bt,n.render(),n.keystrokes.listenTo(n.element),n}_addNumberedListPropertyViews(e){const i=this.locale.t,n=[];e.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),n.push(this.startIndexFieldView)),e.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),n.push(this.reversedSwitchButtonView)),this.stylesView?(this.additionalPropertiesCollapsibleView=new H6(this.locale,n),this.additionalPropertiesCollapsibleView.set({label:i("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(n,"isEnabled",(...r)=>r.some(o=>o)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(r,o,l)=>{l||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(n)}_createStartIndexField(){const e=this.locale.t,i=new jt(this.locale,nI);return i.set({label:e("Start at"),class:"ck-numbered-list-properties__start-index"}),i.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),i.fieldView.on("input",()=>{const n=i.fieldView.element,r=n.valueAsNumber;if(Number.isNaN(r)){i.errorText=e("Invalid start index value.");return}n.checkValidity()?this.fire("listStart",{startIndex:r}):i.errorText=e("Start index must be greater than 0.")}),i}_createReversedSwitchButton(){const e=this.locale.t,i=new td(this.locale);return i.set({withText:!0,label:e("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),i.delegate("execute").to(this,"listReversed"),i}}class lY extends F{static get pluginName(){return"ListPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,i=t.config.get("list.properties"),n=_R(i),r=n.styles.listTypes;if(r.includes("bulleted")){const o=[{label:e("Toggle the disc list style"),tooltip:e("Disc"),type:"disc",icon:EF},{label:e("Toggle the circle list style"),tooltip:e("Circle"),type:"circle",icon:CF},{label:e("Toggle the square list style"),tooltip:e("Square"),type:"square",icon:RF}],l=e("Bulleted List"),a=e("Bulleted list styles toolbar"),c="bulletedList";t.ui.componentFactory.add(c,pP({editor:t,normalizedConfig:n,parentCommandName:c,buttonLabel:l,buttonIcon:Qx,styleGridAriaLabel:a,styleDefinitions:o})),t.ui.componentFactory.add(`menuBar:${c}`,wP({editor:t,normalizedConfig:n,parentCommandName:c,buttonLabel:l,styleGridAriaLabel:a,styleDefinitions:o}))}if(r.includes("numbered")||i.startIndex||i.reversed){const o=[{label:e("Toggle the decimal list style"),tooltip:e("Decimal"),type:"decimal",icon:TF},{label:e("Toggle the decimal with leading zero list style"),tooltip:e("Decimal with leading zero"),type:"decimal-leading-zero",icon:PF},{label:e("Toggle the lower–roman list style"),tooltip:e("Lower–roman"),type:"lower-roman",icon:IF},{label:e("Toggle the upper–roman list style"),tooltip:e("Upper-roman"),type:"upper-roman",icon:MF},{label:e("Toggle the lower–latin list style"),tooltip:e("Lower-latin"),type:"lower-latin",icon:AF},{label:e("Toggle the upper–latin list style"),tooltip:e("Upper-latin"),type:"upper-latin",icon:VF}],l=e("Numbered List"),a=e("Numbered list styles toolbar"),c="numberedList";t.ui.componentFactory.add(c,pP({editor:t,normalizedConfig:n,parentCommandName:c,buttonLabel:l,buttonIcon:Dx,styleGridAriaLabel:a,styleDefinitions:o})),r.includes("numbered")&&t.ui.componentFactory.add(`menuBar:${c}`,wP({editor:t,normalizedConfig:n,parentCommandName:c,buttonLabel:l,styleGridAriaLabel:a,styleDefinitions:o}))}}}function pP({editor:s,normalizedConfig:t,parentCommandName:e,buttonLabel:i,buttonIcon:n,styleGridAriaLabel:r,styleDefinitions:o}){const l=s.commands.get(e);return a=>{const c=xn(a,_c),h=c.buttonView;return c.bind("isEnabled").to(l),c.class="ck-list-styles-dropdown",h.on("execute",()=>{s.execute(e),s.editing.view.focus()}),h.set({label:i,icon:n,tooltip:!0,isToggleable:!0}),h.bind("isOn").to(l,"value",f=>!!f),c.once("change:isOpen",()=>{const f=aY({editor:s,normalizedConfig:t,dropdownView:c,parentCommandName:e,styleGridAriaLabel:r,styleDefinitions:o});c.panelView.children.add(f)}),c.on("execute",()=>{s.editing.view.focus()}),c}}function SR({editor:s,listStyleCommand:t,parentCommandName:e}){const i=s.locale,n=s.commands.get(e);return({label:r,type:o,icon:l,tooltip:a})=>{const c=new ve(i);return c.set({label:r,icon:l,tooltip:a}),c.bind("isOn").to(t,"value",h=>h===o),c.on("execute",()=>{n.value?t.value===o?s.execute(e):t.value!==o&&s.execute("listStyle",{type:o}):s.model.change(()=>{s.execute("listStyle",{type:o})})}),c}}function aY({editor:s,normalizedConfig:t,dropdownView:e,parentCommandName:i,styleDefinitions:n,styleGridAriaLabel:r}){const o=s.locale,l={...t,...i!="numberedList"?{startIndex:!1,reversed:!1}:null},a=i.replace("List","");let c=null;if(t.styles.listTypes.includes(a)){const f=s.commands.get("listStyle"),m=SR({editor:s,parentCommandName:i,listStyleCommand:f}),w=t.styles.listStyleTypes;let O=n;if(w){const k=w[a];k&&(O=n.filter(C=>k.includes(C.type)))}const v=CR(f);c=O.filter(v).map(m)}const h=new kR(o,{styleGridAriaLabel:r,enabledProperties:l,styleButtonViews:c});if(t.styles.listTypes.includes(a)&&qx(e,()=>h.stylesView.children.find(f=>f.isOn)),l.startIndex){const f=s.commands.get("listStart");h.startIndexFieldView.bind("isEnabled").to(f),h.startIndexFieldView.fieldView.bind("value").to(f),h.on("listStart",(m,w)=>s.execute("listStart",w))}if(l.reversed){const f=s.commands.get("listReversed");h.reversedSwitchButtonView.bind("isEnabled").to(f),h.reversedSwitchButtonView.bind("isOn").to(f,"value",m=>!!m),h.on("listReversed",()=>{const m=f.value;s.execute("listReversed",{reversed:!m})})}return h.delegate("execute").to(e),h}function wP({editor:s,normalizedConfig:t,parentCommandName:e,buttonLabel:i,styleGridAriaLabel:n,styleDefinitions:r}){return o=>{const l=new nr(o),a=s.commands.get(e),c=s.commands.get("listStyle"),h=CR(c),f=SR({editor:s,parentCommandName:e,listStyleCommand:c}),m=t.styles.listStyleTypes;let w=r;if(m){const k=a.type,C=m[k];C&&(w=r.filter(P=>C.includes(P.type)))}const O=w.filter(h).map(f),v=new kR(o,{styleGridAriaLabel:n,enabledProperties:{...t,startIndex:!1,reversed:!1},styleButtonViews:O});return v.delegate("execute").to(l),l.buttonView.set({label:i,icon:e==="bulletedList"?Qx:Dx}),l.panelView.children.add(v),l.bind("isEnabled").to(a,"isEnabled"),l.on("execute",()=>{s.editing.view.focus()}),l}}function CR(s){return typeof s.isStyleTypeSupported=="function"?t=>s.isStyleTypeSupported(t.type):()=>!0}class cY extends F{static get requires(){return[rY,lY]}static get pluginName(){return"ListProperties"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const bP={"(":")","[":"]","{":"}"};class uY extends Le{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}refresh(){const t=this.editor.model,e=t.document;this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"mention")}execute(t){const e=this.editor.model,n=e.document.selection,r=typeof t.mention=="string"?{id:t.mention}:t.mention,o=r.id,l=t.range||n.getFirstRange();if(!e.canEditAt(l))return;const a=t.text||o,c=PR({_text:a,id:o},r);if(!o.startsWith(t.marker))throw new A("mentioncommand-incorrect-id",this);e.change(h=>{const f=cs(n.getAttributes()),m=new Map(f.entries());m.set("mention",c);const w=e.insertContent(h.createText(a,m),l),O=w.start.nodeBefore,v=w.end.nodeAfter,k=v&&v.is("$text")&&v.data.startsWith(" ");let C=!1;if(O&&v&&O.is("$text")&&v.is("$text")){const P=O.data.slice(-1),V=P in bP,Q=V&&v.data.startsWith(bP[P]);C=V&&Q}!C&&!k&&e.insertContent(h.createText(" ",f),l.start.getShiftedBy(a.length))})}}class hY extends F{static get pluginName(){return"MentionEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model,i=e.document;e.schema.extend("$text",{allowAttributes:"mention"}),t.conversion.for("upcast").elementToAttribute({view:{name:"span",attributes:"data-mention",classes:"mention"},model:{key:"mention",value:n=>TR(n)}}),t.conversion.for("downcast").attributeToElement({model:"mention",view:fY}),t.conversion.for("downcast").add(dY),i.registerPostFixer(n=>pY(n,i,e.schema)),i.registerPostFixer(n=>wY(n,i)),i.registerPostFixer(n=>mY(n,i)),t.commands.add("mention",new uY(t))}}function PR(s,t){return Object.assign({uid:ii()},s,t||{})}function TR(s,t){const e=s.getAttribute("data-mention"),i=s.getChild(0);if(!i)return;const n={id:e,_text:i.data};return PR(n,t)}function dY(s){s.on("attribute:mention",(t,e,i)=>{const n=e.attributeNewValue;if(!e.item.is("$textProxy")||!n)return;const r=e.range.start;(r.textNode||r.nodeAfter).data!=n._text&&i.consumable.consume(e.item,t.name)},{priority:"highest"})}function fY(s,{writer:t}){if(!s)return;const e={class:"mention","data-mention":s.id},i={id:s.uid,priority:20};return t.createAttributeElement("span",e,i)}function mY(s,t){const e=t.selection,i=e.focus;return e.isCollapsed&&e.hasAttribute("mention")&&gY(i)?(s.removeSelectionAttribute("mention"),!0):!1}function gY(s){const t=s.isAtStart;return s.nodeBefore&&s.nodeBefore.is("$text")||t}function pY(s,t,e){const i=t.differ.getChanges();let n=!1;for(const r of i){if(r.type=="attribute")continue;const o=r.position;if(r.name=="$text"){const l=o.textNode&&o.textNode.nextSibling;n=rl(o.textNode,s)||n,n=rl(l,s)||n,n=rl(o.nodeBefore,s)||n,n=rl(o.nodeAfter,s)||n}if(r.name!="$text"&&r.type=="insert"){const l=o.nodeAfter;for(const a of s.createRangeIn(l).getItems())n=rl(a,s)||n}if(r.type=="insert"&&e.isInline(r.name)){const l=o.nodeAfter&&o.nodeAfter.nextSibling;n=rl(o.nodeBefore,s)||n,n=rl(l,s)||n}}return n}function wY(s,t){const e=t.differ.getChanges();let i=!1;for(const n of e)if(n.type==="attribute"&&n.attributeKey!="mention"){const r=n.range.start.nodeBefore,o=n.range.end.nodeAfter;for(const l of[r,o])ER(l)&&l.getAttribute(n.attributeKey)!=n.attributeNewValue&&(s.setAttribute(n.attributeKey,n.attributeNewValue,l),i=!0)}return i}function ER(s){if(!s||!(s.is("$text")||s.is("$textProxy"))||!s.hasAttribute("mention"))return!1;const t=s.data,i=s.getAttribute("mention")._text;return t!=i}function rl(s,t){return ER(s)?(t.removeAttribute("mention",s),!0):!1}class bY extends $l{constructor(e){super(e);p(this,"selected");p(this,"position");this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){const e=this.selected,i=this.items.getIndex(e);this.select(i+1)}selectPrevious(){const e=this.selected,i=this.items.getIndex(e);this.select(i-1)}select(e){let i=0;e>0&&e<this.items.length?i=e:e<0&&(i=this.items.length-1);const n=this.items.get(i);this.selected!==n&&(this.selected&&this.selected.removeHighlight(),n.highlight(),this.selected=n,this._isItemVisibleInScrolledArea(n)||(this.element.scrollTop=n.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(e){return new Me(this.element).contains(new Me(e.element))}}class OY extends he{constructor(e,i){super(e);p(this,"domElement");this.template=void 0,this.domElement=i,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",(n,r,o)=>{o?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))}),this.listenTo(this.domElement,"click",()=>{this.fire("execute")})}render(){super.render(),this.element=this.domElement}focus(){this.domElement.focus()}}class xY extends us{constructor(){super(...arguments);p(this,"item");p(this,"marker")}highlight(){const e=this.children.first;e.isOn=!0}removeHighlight(){const e=this.children.first;e.isOn=!1}}const Xf=3,yY=[Fe.arrowup,Fe.arrowdown,Fe.esc],vY=[Fe.enter,Fe.tab];class _Y extends F{constructor(e){super(e);p(this,"_mentionsView");p(this,"_mentionsConfigurations");p(this,"_balloon");p(this,"_items",new vi);p(this,"_lastRequested");p(this,"_requestFeedDebounced");this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=as(this._requestFeed,100),e.config.define("mention",{feeds:[]})}static get pluginName(){return"MentionUI"}static get isOfficialPlugin(){return!0}static get requires(){return[hs]}init(){const e=this.editor,i=e.config.get("mention.commitKeys")||vY,n=yY.concat(i);this._balloon=e.plugins.get(hs),e.editing.view.document.on("keydown",(l,a)=>{o(a.keyCode)&&this._isUIVisible&&(a.preventDefault(),l.stop(),a.keyCode==Fe.arrowdown&&this._mentionsView.selectNext(),a.keyCode==Fe.arrowup&&this._mentionsView.selectPrevious(),i.includes(a.keyCode)&&this._mentionsView.executeSelected(),a.keyCode==Fe.esc&&this._hideUIAndRemoveMarker())},{priority:"highest"}),Dr({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});const r=e.config.get("mention.feeds");for(const l of r){const{feed:a,marker:c,dropdownLimit:h}=l;if(!AY(c))throw new A("mentionconfig-incorrect-marker",null,{marker:c});const f=typeof a=="function"?a.bind(this.editor):PY(a),m=l.itemRenderer,w={marker:c,feedCallback:f,itemRenderer:m,dropdownLimit:h};this._mentionsConfigurations.set(c,w)}this._setupTextWatcher(r),this.listenTo(e,"change:isReadOnly",()=>{this._hideUIAndRemoveMarker()}),this.on("requestFeed:response",(l,a)=>this._handleFeedResponse(a)),this.on("requestFeed:error",()=>this._hideUIAndRemoveMarker());function o(l){return n.includes(l)}}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){const e=this.editor.locale,i=new bY(e);return i.items.bindTo(this._items).using(n=>{const{item:r,marker:o}=n,{dropdownLimit:l}=this._mentionsConfigurations.get(o),a=l||this.editor.config.get("mention.dropdownLimit")||10;if(i.items.length>=a)return null;const c=new xY(e),h=this._renderItem(r,o);return h.delegate("execute").to(c),c.children.add(h),c.item=r,c.marker=o,c.on("execute",()=>{i.fire("execute",{item:r,marker:o})}),c}),i.on("execute",(n,r)=>{const o=this.editor,l=o.model,a=r.item,c=r.marker,h=o.model.markers.get("mention"),f=l.createPositionAt(l.document.selection.focus),m=l.createPositionAt(h.getStart()),w=l.createRange(m,f);this._hideUIAndRemoveMarker(),o.execute("mention",{mention:a,text:a.text,marker:c,range:w}),o.editing.view.focus()}),i}_getItemRenderer(e){const{itemRenderer:i}=this._mentionsConfigurations.get(e);return i}_requestFeed(e,i){this._lastRequested=i;const{feedCallback:n}=this._mentionsConfigurations.get(e),r=n(i);if(!(r instanceof Promise)){this.fire("requestFeed:response",{feed:r,marker:e,feedText:i});return}r.then(l=>{this._lastRequested==i?this.fire("requestFeed:response",{feed:l,marker:e,feedText:i}):this.fire("requestFeed:discarded",{feed:l,marker:e,feedText:i})}).catch(l=>{this.fire("requestFeed:error",{error:l}),We("mention-feed-callback-error",{marker:e})})}_setupTextWatcher(e){const i=this.editor,n=e.map(l=>({...l,pattern:IR(l.marker,l.minimumCharacters||0)})),r=new jx(i.model,SY(n));r.on("matched",(l,a)=>{const c=AR(n,a.text),f=i.model.document.selection.focus,m=i.model.createPositionAt(f.parent,c.position);if(TY(f)||EY(m)){this._hideUIAndRemoveMarker();return}const w=CY(c,a.text),O=c.marker.length+w.length,v=f.getShiftedBy(-O),k=f.getShiftedBy(-w.length),C=i.model.createRange(v,k);if(yb(i)){const P=i.model.markers.get("mention");i.model.change(V=>{V.updateMarker(P,{range:C})})}else i.model.change(P=>{P.addMarker("mention",{range:C,usingOperation:!1,affectsData:!1})});this._requestFeedDebounced(c.marker,w)}),r.on("unmatched",()=>{this._hideUIAndRemoveMarker()});const o=i.commands.get("mention");return r.bind("isEnabled").to(o),r}_handleFeedResponse(e){const{feed:i,marker:n}=e;if(!yb(this.editor))return;this._items.clear();for(const o of i){const l=typeof o!="object"?{id:o,text:o}:o;this._items.add({item:l,marker:n})}const r=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(r):this._hideUIAndRemoveMarker()}_showOrUpdateUI(e){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(e,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(e,this._mentionsView.position),singleViewMode:!0,balloonClassName:"ck-mention-balloon"}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),yb(this.editor)&&this.editor.model.change(e=>e.removeMarker("mention")),this._mentionsView.position=void 0}_renderItem(e,i){const n=this.editor;let r,o=e.id;const l=this._getItemRenderer(i);if(l){const a=l(e);typeof a!="string"?r=new OY(n.locale,a):o=a}if(!r){const a=new ve(n.locale);a.label=o,a.withText=!0,r=a}return r}_getBalloonPanelPositionData(e,i){const n=this.editor,r=n.editing,o=r.view.domConverter,l=r.mapper,a=n.locale.uiLanguageDirection;return{target:()=>{let c=e.getRange();c.start.root.rootName=="$graveyard"&&(c=n.model.document.selection.getFirstRange());const h=l.toViewRange(c);return Me.getDomRangeRects(o.viewRangeToDom(h)).pop()},limiter:()=>{const c=this.editor.editing.view,f=c.document.selection.editableElement;return f?c.domConverter.mapViewToDom(f.root):null},positions:kY(i,a)}}}function kY(s,t){const e={caret_se:i=>({top:i.bottom+Xf,left:i.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(i,n)=>({top:i.top-n.height-Xf,left:i.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(i,n)=>({top:i.bottom+Xf,left:i.right-n.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(i,n)=>({top:i.top-n.height-Xf,left:i.right-n.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(e,s)?[e[s]]:t!=="rtl"?[e.caret_se,e.caret_sw,e.caret_ne,e.caret_nw]:[e.caret_sw,e.caret_se,e.caret_nw,e.caret_ne]}function AR(s,t){let e;for(const i of s){const n=t.lastIndexOf(i.marker);n>0&&!t.substring(n-1).match(i.pattern)||(!e||n>=e.position)&&(e={marker:i.marker,position:n,minimumCharacters:i.minimumCharacters,pattern:i.pattern})}return e}function IR(s,t){const e=t==0?"*":`{${t},}`,i=Ie.features.isRegExpUnicodePropertySupported?`\\p{Ps}\\p{Pi}"'`:`\\(\\[{"'`,n=".";s=s.replace(/[.*+?^${}()\-|[\]\\]/g,"\\$&");const r=`(?:^|[ ${i}])(${s})(${n}${e})$`;return new RegExp(r,"u")}function SY(s){return e=>{const i=AR(s,e);if(!i)return!1;let n=0;i.position!==0&&(n=i.position-1);const r=e.substring(n);return i.pattern.test(r)}}function CY(s,t){let e=0;s.position!==0&&(e=s.position-1);const i=IR(s.marker,0);return t.substring(e).match(i)[2]}function PY(s){return t=>s.filter(i=>(typeof i=="string"?i:String(i.id)).toLowerCase().includes(t.toLowerCase()))}function TY(s){const t=s.textNode&&s.textNode.hasAttribute("mention"),e=s.nodeBefore;return t||e&&e.is("$text")&&e.hasAttribute("mention")}function EY(s){const t=s.nodeAfter;return t&&t.is("$text")&&t.hasAttribute("mention")}function AY(s){return!!s}function yb(s){return s.model.markers.has("mention")}class IY extends F{toMentionAttribute(t,e){return TR(t,e)}static get pluginName(){return"Mention"}static get isOfficialPlugin(){return!0}static get requires(){return[hY,_Y]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function RY(s,t){const e=[];for(const i of t.createRangeIn(s)){const n=i.item;n.is("element","a")&&!n.hasAttribute("href")&&(n.hasAttribute("id")||n.hasAttribute("name"))&&e.push(n)}for(const i of e){const n=i.parent.getChildIndex(i)+1,r=i.getChildren();t.insertChild(n,r,i.parent)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function RR(s){const t=parseFloat(s);return s.endsWith("pt")?La(t*96/72):s.endsWith("pc")?La(t*12*96/72):s.endsWith("in")?La(t*96):s.endsWith("cm")?La(t*96/2.54):s.endsWith("mm")?La(t/10*96/2.54):s}function OP(s){return s!==void 0&&s.endsWith("px")}function La(s){return Math.round(s)+"px"}function VY(s,t,e){if(!s.childCount)return;const i=new zn(s.document),n=LY(s,i);if(!n.length)return;const r={},o=[];for(const l of n)if(l.indent!==void 0){BY(l)||(o.length=0);const a=`${l.id}:${l.indent}`,c=Math.min(l.indent-1,o.length);if(c<o.length&&o[c].id!==l.id&&(o.length=c),c<o.length-1)o.length=c+1;else{const f=$Y(l,t);if(c>o.length-1||o[c].listElement.name!=f.type){c==0&&f.type=="ol"&&l.id!==void 0&&r[a]&&(f.startIndex=r[a]);const m=FY(f,i,e);if(OP(l.marginLeft)&&(c==0||OP(o[c-1].marginLeft))){let w=l.marginLeft;c>0&&(w=La(parseFloat(w)-parseFloat(o[c-1].marginLeft))),i.setStyle("padding-left",w,m)}if(o.length==0){const w=l.element.parent,O=w.getChildIndex(l.element)+1;i.insertChild(O,m,w)}else{const w=o[c-1].listItemElements;i.appendChild(m,w[w.length-1])}o[c]={...l,listElement:m,listItemElements:[]},c==0&&l.id!==void 0&&(r[a]=f.startIndex||1)}}const h=l.element.name=="li"?l.element:i.createElement("li");i.appendChild(h,o[c].listElement),o[c].listItemElements.push(h),c==0&&l.id!==void 0&&r[a]++,l.element!=h&&i.appendChild(l.element,h),WY(l.element,i),i.removeStyle("text-indent",l.element),i.removeStyle("margin-left",l.element)}else{const a=o.find(c=>c.marginLeft==l.marginLeft);if(a){const c=a.listItemElements;i.appendChild(l.element,c[c.length-1]),i.removeStyle("margin-left",l.element)}else o.length=0}}function MY(s,t){for(const e of t.createRangeIn(s)){const i=e.item;if(i.is("element","li")){const n=i.getChild(0);n&&n.is("element","p")&&t.unwrapElement(n)}}}function LY(s,t){const e=t.createRangeIn(s),i=[],n=new Set;for(const r of e.getItems()){if(!r.is("element")||!r.name.match(/^(p|h\d+|li|div)$/))continue;let o=UY(r);if(o!==void 0&&parseFloat(o)==0&&!Array.from(r.getClassNames()).find(l=>l.startsWith("MsoList"))&&(o=void 0),r.hasStyle("mso-list")||o!==void 0&&n.has(o)){const l=zY(r);i.push({element:r,id:l.id,order:l.order,indent:l.indent,marginLeft:o}),o!==void 0&&n.add(o)}else n.clear()}return i}function BY(s){const t=s.element.previousSibling;return xP(t||s.element.parent)}function xP(s){return s.is("element","ol")||s.is("element","ul")}function $Y(s,t){const e=new RegExp(`@list l${s.id}:level${s.indent}\\s*({[^}]*)`,"gi"),i=/mso-level-number-format:([^;]{0,100});/gi,n=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,r=new RegExp(`@list\\s+l${s.id}:level\\d\\s*{[^{]*mso-level-text:"%\\d\\\\.`,"gi"),o=new RegExp(`@list l${s.id}:level\\d\\s*{[^{]*mso-level-number-format:`,"gi"),l=r.exec(t),a=o.exec(t),c=l&&!a,h=e.exec(t);let f="decimal",m="ol",w=null;if(h&&h[1]){const O=i.exec(h[1]);if(O&&O[1]&&(f=O[1].trim(),m=f!=="bullet"&&f!=="image"?"ol":"ul"),f==="bullet"){const v=QY(s.element);v&&(f=v)}else{const v=n.exec(h[1]);v&&v[1]&&(w=parseInt(v[1]))}c&&(m="ol")}return{type:m,startIndex:w,style:NY(f),isLegalStyleList:c}}function QY(s){if(s.name=="li"&&s.parent.name=="ul"&&s.parent.hasAttribute("type"))return s.parent.getAttribute("type");const t=DY(s);if(!t)return null;const e=t._data;return e==="o"?"circle":e==="·"?"disc":e==="§"?"square":null}function DY(s){if(s.getChild(0).is("$text"))return null;for(const t of s.getChildren()){if(!t.is("element","span"))continue;const e=t.getChild(0);if(e)return e.is("$text")?e:e.getChild(0)}/* istanbul ignore next -- @preserve */return null}function NY(s){if(s.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(s){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return s;default:return null}}function FY(s,t,e){const i=t.createElement(s.type);return s.style&&t.setStyle("list-style-type",s.style,i),s.startIndex&&s.startIndex>1&&t.setAttribute("start",s.startIndex,i),s.isLegalStyleList&&e&&t.addClass("legal-list",i),i}function zY(s){const t=s.getStyle("mso-list");if(t===void 0)return{};const e=t.match(/(^|\s{1,100})l(\d+)/i),i=t.match(/\s{0,100}lfo(\d+)/i),n=t.match(/\s{0,100}level(\d+)/i);return e&&i&&n?{id:e[2],order:i[1],indent:parseInt(n[1])}:{indent:1}}function WY(s,t){const e=new Nn({name:"span",styles:{"mso-list":"Ignore"}}),i=t.createRangeIn(s);for(const n of i)n.type==="elementStart"&&e.match(n.item)&&t.remove(n.item)}function UY(s){const t=s.getStyle("margin-left");return t===void 0||t.endsWith("px")?t:RR(t)}function ZY(s,t){if(!s.childCount)return;const e=new zn(s.document),i=qY(s,e);XY(i,s,e),GY(i,s,e),jY(s,e);const n=YY(s,e);n.length&&JY(n,KY(t),e)}function HY(s){return btoa(s.match(/\w{2}/g).map(t=>String.fromCharCode(parseInt(t,16))).join(""))}function qY(s,t){const e=t.createRangeIn(s),i=new Nn({name:/v:(.+)/}),n=[];for(const r of e){if(r.type!="elementStart")continue;const o=r.item,l=o.previousSibling,a=l&&l.is("element")?l.name:null,c=["Chart"],h=i.match(o),f=o.getAttribute("o:gfxdata"),m=a==="v:shapetype",w=f&&c.some(O=>o.getAttribute("id").includes(O));h&&f&&!m&&!w&&n.push(r.item.getAttribute("id"))}return n}function XY(s,t,e){const i=e.createRangeIn(t),n=new Nn({name:"img"}),r=[];for(const o of i)if(o.item.is("element")&&n.match(o.item)){const l=o.item,a=l.getAttribute("v:shapes")?l.getAttribute("v:shapes").split(" "):[];a.length&&a.every(c=>s.indexOf(c)>-1)?r.push(l):l.getAttribute("src")||r.push(l)}for(const o of r)e.remove(o)}function jY(s,t){const e=t.createRangeIn(s),i=new Nn({name:/v:(.+)/}),n=[];for(const r of e)r.type=="elementStart"&&i.match(r.item)&&n.push(r.item);for(const r of n)t.remove(r)}function GY(s,t,e){const i=e.createRangeIn(t),n=[];for(const l of i)if(l.type=="elementStart"&&l.item.is("element","v:shape")){const a=l.item.getAttribute("id");if(s.includes(a))continue;r(l.item.parent.getChildren(),a)||n.push(l.item)}for(const l of n){const a={src:o(l)};l.hasAttribute("alt")&&(a.alt=l.getAttribute("alt"));const c=e.createElement("img",a);e.insertChild(l.index+1,c,l.parent)}function r(l,a){for(const c of l){/* istanbul ignore else -- @preserve */if(c.is("element")&&(c.name=="img"&&c.getAttribute("v:shapes")==a||r(c.getChildren(),a)))return!0}return!1}function o(l){for(const a of l.getChildren()){/* istanbul ignore else -- @preserve */if(a.is("element")&&a.getAttribute("src"))return a.getAttribute("src")}}}function YY(s,t){const e=t.createRangeIn(s),i=new Nn({name:"img"}),n=[];let r=0;for(const o of e)o.item.is("element")&&i.match(o.item)&&(o.item.getAttribute("src").startsWith("file://")&&n.push({element:o.item,imageIndex:r}),r++);return n}function KY(s){if(!s)return[];const t=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,e=new RegExp("(?:("+t.source+"))([\\da-fA-F\\s]+)\\}","g"),i=s.match(e),n=[];if(i)for(const r of i){let o=!1;r.includes("\\pngblip")?o="image/png":r.includes("\\jpegblip")&&(o="image/jpeg"),o&&n.push({hex:r.replace(t,"").replace(/[^\da-fA-F]/g,""),type:o})}return n}function JY(s,t,e){for(let i=0;i<s.length;i++){const{element:n,imageIndex:r}=s[i],o=t[r];if(o){const l=`data:${o.type};base64,${HY(o.hex)}`;e.setAttribute("src",l,n)}}}function eK(s){const t=[],e=new zn(s.document);for(const{item:i}of e.createRangeIn(s))if(i.is("element")){for(const n of i.getClassNames())/\bmso/gi.exec(n)&&e.removeClass(n,i);for(const n of i.getStyleNames())/\bmso/gi.exec(n)&&e.removeStyle(n,i);(i.is("element","w:sdt")||i.is("element","w:sdtpr")&&i.isEmpty||i.is("element","o:p")&&i.isEmpty)&&t.push(i)}for(const i of t){const n=i.parent,r=n.getChildIndex(i);e.insertChild(r,i.getChildren(),n),e.remove(i)}}function tK(s,t){for(const e of t.createRangeIn(s).getItems()){if(!e.is("element","table")&&!e.is("element","td")&&!e.is("element","th"))continue;const i=["left","top","right","bottom"];if(i.every(r=>!e.hasStyle(`border-${r}-style`)))t.setStyle("border-style","none",e);else for(const r of i)e.hasStyle(`border-${r}-style`)||t.setStyle(`border-${r}-style`,"none",e);const n=["width","height",...i.map(r=>`border-${r}-width`),...i.map(r=>`padding-${r}`)];for(const r of n)e.hasStyle(r)&&t.setStyle(r,RR(e.getStyle(r)),e)}}const iK=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,nK=/xmlns:o="urn:schemas-microsoft-com/i;class fy{constructor(t,e=!1){p(this,"document");p(this,"hasMultiLevelListPlugin");this.document=t,this.hasMultiLevelListPlugin=e}isActive(t){return iK.test(t)||nK.test(t)}execute(t){const e=new zn(this.document),{body:i,stylesString:n}=t._parsedData;RY(i,e),VY(i,n,this.hasMultiLevelListPlugin),ZY(i,t.dataTransfer.getData("text/rtf")),tK(i,e),eK(i),t.content=i}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function sK(s,t){for(const e of s.getChildren())if(e.is("element","b")&&e.getStyle("font-weight")==="normal"){const i=s.getChildIndex(e);t.remove(e),t.insertChild(i,e.getChildren(),s)}}function rK(s,t){const e=new Yh(t.document.stylesProcessor),i=new Kh(e,{renderingMode:"data"}),n=i.blockElements,r=i.inlineObjectElements,o=[];for(const l of t.createRangeIn(s)){const a=l.item;if(a.is("element","br")){const c=yP(a,"forward",t,{blockElements:n,inlineObjectElements:r}),h=yP(a,"backward",t,{blockElements:n,inlineObjectElements:r}),f=vP(c,n);(vP(h,n)||f)&&o.push(a)}}for(const l of o)l.hasClass("Apple-interchange-newline")?t.remove(l):t.replace(l,t.createElement("p"))}function yP(s,t,e,{blockElements:i,inlineObjectElements:n}){let r=e.createPositionAt(s,t=="forward"?"after":"before");return r=r.getLastMatchingPosition(({item:o})=>o.is("element")&&!i.includes(o.name)&&!n.includes(o.name),{direction:t}),t=="forward"?r.nodeAfter:r.nodeBefore}function vP(s,t){return!!s&&s.is("element")&&t.includes(s.name)}const oK=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class lK{constructor(t){p(this,"document");this.document=t}isActive(t){return oK.test(t)}execute(t){const e=new zn(this.document),{body:i}=t._parsedData;sK(i,e),MY(i,e),rK(i,e),t.content=i}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function aK(s,t){for(const e of s.getChildren())e.is("element","table")&&e.hasAttribute("xmlns")&&t.removeAttribute("xmlns",e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function cK(s,t){for(const e of s.getChildren())if(e.is("element","google-sheets-html-origin")){const i=s.getChildIndex(e);t.remove(e),t.insertChild(i,e.getChildren(),s)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function uK(s,t){for(const e of s.getChildren())e.is("element","table")&&e.getStyle("width")==="0px"&&t.removeStyle("width",e)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function hK(s,t){for(const e of Array.from(s.getChildren()))e.is("element","style")&&t.remove(e)}const dK=/<google-sheets-html-origin/i;class fK{constructor(t){p(this,"document");this.document=t}isActive(t){return dK.test(t)}execute(t){const e=new zn(this.document),{body:i}=t._parsedData;cK(i,e),aK(i,e),uK(i,e),hK(i,e),t.content=i}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mK(s){return _P(_P(s)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g,"$1 $2").replace(/ <\//g," </").replace(/ <o:p><\/o:p>/g," <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function gK(s){s.querySelectorAll("span[style*=spacerun]").forEach(t=>{const e=t,i=e.innerText.length||0;e.innerText=Array(i+1).join("  ").substr(0,i)})}function _P(s){return s.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>e.length===1?" ":Array(e.length+1).join("  ").substr(0,e.length))}function my(s,t){const e=new DOMParser;s=s.replace(/<!--\[if gte vml 1]>/g,""),s=s.replace(/<o:SmartTagType(?:\s+[^\s>=]+(?:="[^"]*")?)*\s*\/?>/gi,"");const i=mK(bK(s)),n=e.parseFromString(i,"text/html");gK(n);const r=n.body.innerHTML,o=pK(n,t),l=wK(n);return{body:o,bodyString:r,styles:l.styles,stylesString:l.stylesString}}function pK(s,t){const e=new Yh(t),i=new Kh(e,{renderingMode:"data"}),n=s.createDocumentFragment(),r=s.body.childNodes;for(;r.length>0;)n.appendChild(r[0]);return i.domToView(n,{skipComments:!0})}function wK(s){const t=[],e=[],i=Array.from(s.getElementsByTagName("style"));for(const n of i)n.sheet&&n.sheet.cssRules&&n.sheet.cssRules.length&&(t.push(n.sheet),e.push(n.innerHTML));return{styles:t,stylesString:e.join(" ")}}function bK(s){const t="</body>",e="</html>",i=s.indexOf(t);if(i<0)return s;const n=s.indexOf(e,i+t.length);return s.substring(0,i+t.length)+(n>=0?s.substring(n):"")}class OK extends F{static get pluginName(){return"PasteFromOffice"}static get isOfficialPlugin(){return!0}static get requires(){return[vn]}init(){const t=this.editor,e=t.plugins.get("ClipboardPipeline"),i=t.editing.view.document,n=[],r=this.editor.plugins.has("MultiLevelList");n.push(new fy(i,r)),n.push(new lK(i)),n.push(new fK(i)),e.on("inputTransformation",(o,l)=>{if(l._isTransformedWithPasteFromOffice||t.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const c=l.dataTransfer.getData("text/html"),h=n.find(f=>f.isActive(c));h&&(l._parsedData||(l._parsedData=my(c,i.stylesProcessor)),h.execute(l),l._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class xK extends Le{constructor(t){super(t),this.affectsData=!1,this.value=!1}execute(){const t="ck-show-blocks",e=this.editor.editing.view;e.change(i=>{for(const n of e.document.roots)n.hasClass(t)?(i.removeClass(t,n),this.value=!1):(i.addClass(t,n),this.value=!0)})}}class yK extends F{static get pluginName(){return"ShowBlocksEditing"}static get isOfficialPlugin(){return!0}init(){const{editor:t}=this;t.commands.add("showBlocks",new xK(t))}}class vK extends F{static get pluginName(){return"ShowBlocksUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("showBlocks",()=>{const e=this._createButton(ve);return e.set({tooltip:!0,icon:jF}),e}),t.ui.componentFactory.add("menuBar:showBlocks",()=>this._createButton(ci))}_createButton(t){const e=this.editor,i=e.locale,n=e.commands.get("showBlocks"),r=new t(i),o=i.t;return r.set({label:o("Show blocks"),isToggleable:!0,role:"menuitemcheckbox"}),r.bind("isEnabled").to(n),r.bind("isOn").to(n,"value",n,"isEnabled",(l,a)=>l&&a),this.listenTo(r,"execute",()=>{e.execute("showBlocks"),e.editing.view.focus()}),r}}class _K extends F{static get pluginName(){return"ShowBlocks"}static get isOfficialPlugin(){return!0}static get requires(){return[yK,vK]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function gy(s,t){const{modelAttribute:e,styleName:i,viewElement:n,defaultValue:r,reduceBoxSides:o=!1,shouldUpcast:l=()=>!0}=t;s.for("upcast").attributeToAttribute({view:{name:n,styles:{[i]:/[\s\S]+/}},model:{key:e,value:(a,c,h)=>{if(!l(a))return;const f=_o(r,"",h),m=a.getNormalizedStyle(i),w=o?Vm(m):m;if(f!==w)return w}}})}function H1(s,t,e,i){s.for("upcast").add(n=>n.on("element:"+t,(r,o,l)=>{if(!o.modelRange)return;const a=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(v=>o.viewItem.hasStyle(v));if(!a.length)return;const c={styles:a};if(!l.consumable.test(o.viewItem,c))return;const h=[...o.modelRange.getItems({shallow:!0})].pop(),f=h.findAncestor("table",{includeSelf:!0});let m=i;f&&f.getAttribute("tableType")=="layout"&&(m={style:"none",color:"",width:""}),l.consumable.consume(o.viewItem,c);const w={style:o.viewItem.getNormalizedStyle("border-style"),color:o.viewItem.getNormalizedStyle("border-color"),width:o.viewItem.getNormalizedStyle("border-width")},O={style:Vm(w.style),color:Vm(w.color),width:Vm(w.width)};O.style!==m.style&&l.writer.setAttribute(e.style,O.style,h),O.color!==m.color&&l.writer.setAttribute(e.color,O.color,h),O.width!==m.width&&l.writer.setAttribute(e.width,O.width,h)}))}function th(s,t){const{modelElement:e,modelAttribute:i,styleName:n}=t;s.for("downcast").attributeToAttribute({model:{name:e,key:i},view:r=>({key:"style",value:{[n]:r}})})}function Rm(s,t){const{modelAttribute:e,styleName:i}=t;s.for("downcast").add(n=>n.on(`attribute:${e}:table`,(r,o,l)=>{const{item:a,attributeNewValue:c}=o,{mapper:h,writer:f}=l;if(!l.consumable.consume(o.item,r.name))return;const m=[...h.toViewElement(a).getChildren()].find(w=>w.is("element","table"));c?f.setStyle(i,c,m):f.removeStyle(i,m)}))}function _o(s,t,e){const i=e.modelRange&&Nt(e.modelRange.getItems({shallow:!0})),n=i&&i.is("element")&&i.findAncestor("table",{includeSelf:!0});return n&&n.getAttribute("tableType")==="layout"?t:s}function Vm(s){if(!s)return;const t=["top","right","bottom","left"];if(!t.every(r=>s[r]))return s;const i=s.top;return t.every(r=>s[r]===i)?i:s}function zt(s,t,e,i,n=1){t!=null&&n!==void 0&&n!==null&&t>n?i.setAttribute(s,t,e):i.removeAttribute(s,e)}function Fl(s,t,e={}){const i=s.createElement("tableCell",e);return s.insertElement("paragraph",i),s.insert(i,t),i}function q1(s,t){const e=t.parent.parent,i=parseInt(e.getAttribute("headingColumns")||"0"),{column:n}=s.getCellLocation(t);return!!i&&n<i}function Mm(s,t,e){const{modelAttribute:i}=e;s.extend("tableCell",{allowAttributes:[i]}),gy(t,{viewElement:/^(td|th)$/,...e}),th(t,{modelElement:"tableCell",...e})}function ko(s){const t=s.getSelectedElement();return t&&t.is("element","table")?t:s.getFirstPosition().findAncestor("table")}function kK(){return s=>{s.on("element:figure",(t,e,i)=>{if(!i.consumable.test(e.viewItem,{name:!0,classes:"table"}))return;const n=PK(e.viewItem);if(!n||!i.consumable.test(n,{name:!0}))return;i.consumable.consume(e.viewItem,{name:!0,classes:"table"});const r=i.convertItem(n,e.modelCursor),o=Nt(r.modelRange.getItems());if(!o){i.consumable.revert(e.viewItem,{name:!0,classes:"table"});return}i.convertChildren(e.viewItem,i.writer.createPositionAt(o,"end")),i.updateConversionResult(o,e)})}}function SK(){return s=>{s.on("element:table",(t,e,i)=>{const n=e.viewItem;if(!i.consumable.test(n,{name:!0}))return;const{rows:r,headingRows:o,headingColumns:l}=TK(n),a={};l&&(a.headingColumns=l),o&&(a.headingRows=o);const c=i.writer.createElement("table",a);if(i.safeInsert(c,e.modelCursor)){if(i.consumable.consume(n,{name:!0}),r.forEach(h=>i.convertItem(h,i.writer.createPositionAt(c,"end"))),i.convertChildren(n,i.writer.createPositionAt(c,"end")),c.isEmpty){const h=i.writer.createElement("tableRow");i.writer.insert(h,i.writer.createPositionAt(c,"end")),Fl(i.writer,i.writer.createPositionAt(h,"end"))}i.updateConversionResult(c,e)}})}}function CK(){return s=>{s.on("element:tr",(t,e)=>{e.viewItem.isEmpty&&e.modelCursor.index==0&&t.stop()},{priority:"high"})}}function kP(s){return t=>{t.on(`element:${s}`,(e,i,{writer:n})=>{if(!i.modelRange)return;const r=i.modelRange.start.nodeAfter,o=n.createPositionAt(r,0);if(i.viewItem.isEmpty){n.insertElement("paragraph",o);return}const l=Array.from(r.getChildren());if(l.every(a=>a.is("element","$marker"))){const a=n.createElement("paragraph");n.insert(a,n.createPositionAt(r,0));for(const c of l)n.move(n.createRangeOn(c),n.createPositionAt(a,"end"))}},{priority:"low"})}}function PK(s){for(const t of s.getChildren())if(t.is("element","table"))return t}function TK(s){let t=0,e;const i=[],n=[];let r;for(const o of Array.from(s.getChildren())){if(o.name!=="tbody"&&o.name!=="thead"&&o.name!=="tfoot")continue;o.name==="thead"&&!r&&(r=o);const l=Array.from(o.getChildren()).filter(c=>c.is("element","tr"));let a=null;for(const c of l){const h=Array.from(c.getChildren()).filter(f=>f.is("element","td")||f.is("element","th"));if(r&&o===r||o.name==="tbody"&&h.length>0&&(a===null||h.length===a)&&h.every(f=>f.is("element","th")))t++,i.push(c);else{n.push(c);const f=EK(c);(!e||f<e)&&(e=f)}a=Math.max(a||0,h.length)}}return{headingRows:t,headingColumns:e||0,rows:[...i,...n]}}function EK(s){let t=0,e=0;const i=Array.from(s.getChildren()).filter(n=>n.name==="th"||n.name==="td");for(;e<i.length&&i[e].name==="th";){const n=i[e],r=parseInt(n.getAttribute("colspan")||"1");t=t+r,e++}return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ft{constructor(t,e={}){p(this,"_table");p(this,"_startRow");p(this,"_endRow");p(this,"_startColumn");p(this,"_endColumn");p(this,"_includeAllSlots");p(this,"_skipRows");p(this,"_row");p(this,"_rowIndex");p(this,"_column");p(this,"_cellIndex");p(this,"_spannedCells");p(this,"_nextCellAtColumn");p(this,"_jumpedToStartRow",!1);this._table=t,this._startRow=e.row!==void 0?e.row:e.startRow||0,this._endRow=e.row!==void 0?e.row:e.endRow,this._startColumn=e.column!==void 0?e.column:e.startColumn||0,this._endColumn=e.column!==void 0?e.column:e.endColumn,this._includeAllSlots=!!e.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const t=this._table.getChild(this._rowIndex);if(!t||this._isOverEndRow())return{done:!0,value:void 0};if(!t.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let e=null;const i=this._getSpanned();if(i)this._includeAllSlots&&!this._shouldSkipSlot()&&(e=this._formatOutValue(i.cell,i.row,i.column));else{const n=t.getChild(this._cellIndex);if(!n)return this._advanceToNextRow();const r=parseInt(n.getAttribute("colspan")||"1"),o=parseInt(n.getAttribute("rowspan")||"1");(r>1||o>1)&&this._recordSpans(n,o,r),this._shouldSkipSlot()||(e=this._formatOutValue(n)),this._nextCellAtColumn=this._column+r}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,e||this.next()}skipRow(t){this._skipRows.add(t)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(t,e=this._row,i=this._column){return{done:!1,value:new AK(this,t,e,i)}}_shouldSkipSlot(){const t=this._skipRows.has(this._row),e=this._row<this._startRow,i=this._column<this._startColumn,n=this._endColumn!==void 0&&this._column>this._endColumn;return t||e||i||n}_getSpanned(){const t=this._spannedCells.get(this._row);return t&&t.get(this._column)||null}_recordSpans(t,e,i){const n={cell:t,row:this._row,column:this._column};for(let r=this._row;r<this._row+e;r++)for(let o=this._column;o<this._column+i;o++)(r!=this._row||o!=this._column)&&this._markSpannedCell(r,o,n)}_markSpannedCell(t,e,i){this._spannedCells.has(t)||this._spannedCells.set(t,new Map),this._spannedCells.get(t).set(e,i)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const t=this._getRowLength(0);for(let e=this._startRow;!this._jumpedToStartRow;e--)t===this._getRowLength(e)&&(this._row=e,this._rowIndex=e,this._jumpedToStartRow=!0)}_getRowLength(t){return[...this._table.getChild(t).getChildren()].reduce((i,n)=>i+parseInt(n.getAttribute("colspan")||"1"),0)}}class AK{constructor(t,e,i,n){p(this,"cell");p(this,"row");p(this,"column");p(this,"cellAnchorRow");p(this,"cellAnchorColumn");p(this,"_cellIndex");p(this,"_rowIndex");p(this,"_table");this.cell=e,this.row=t._row,this.column=t._column,this.cellAnchorRow=i,this.cellAnchorColumn=n,this._cellIndex=t._cellIndex,this._rowIndex=t._rowIndex,this._table=t._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function SP(s,t){return(e,{writer:i})=>{const n=e.getAttribute("headingRows")||0,r=i.createContainerElement("table",null,[]),o=i.createContainerElement("figure",{class:"table"},r);n>0&&i.insert(i.createPositionAt(r,"end"),i.createContainerElement("thead",null,i.createSlot(l=>l.is("element","tableRow")&&l.index<n))),n<s.getRows(e)&&i.insert(i.createPositionAt(r,"end"),i.createContainerElement("tbody",null,i.createSlot(l=>l.is("element","tableRow")&&l.index>=n)));for(const{positionOffset:l,filter:a}of t.additionalSlots)i.insert(i.createPositionAt(r,l),i.createSlot(a));return i.insert(i.createPositionAt(r,"after"),i.createSlot(l=>l.is("element","tableRow")?!1:!t.additionalSlots.some(({filter:a})=>a(l)))),t.asWidget?RK(o,i):o}}function IK(){return(s,{writer:t})=>s.isEmpty?t.createEmptyElement("tr"):t.createContainerElement("tr")}function CP(s={}){return(t,{writer:e})=>{const i=t.parent,n=i.parent,r=n.getChildIndex(i),o=new ft(n,{row:r}),l=n.getAttribute("headingRows")||0,a=n.getAttribute("headingColumns")||0;let c=null;for(const h of o)if(h.cell==t){const m=h.row<l||h.column<a?"th":"td";c=s.asWidget?Kx(e.createEditableElement(m),e,{withAriaRole:!1}):e.createContainerElement(m);break}return c}}function PP(s={}){return(t,{writer:e})=>{if(!t.parent.is("element","tableCell")||!VR(t))return null;if(s.asWidget)return e.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const i=e.createContainerElement("p");return e.setCustomProperty("dataPipeline:transparentRendering",!0,i),i}}}function VR(s){return s.parent.childCount==1&&!VK(s)}function RK(s,t){return t.setCustomProperty("table",!0,s),nd(s,t,{hasSelectionHandle:!0})}function VK(s){for(const t of s.getAttributeKeys())if(!(t.startsWith("selection:")||t=="htmlEmptyBlock"))return!0;return!1}class MK extends Le{refresh(){const t=this.editor.model,e=t.document.selection,i=t.schema;this.isEnabled=LK(e,i)}execute(t={}){const e=this.editor,i=e.model,n=e.plugins.get("TableUtils"),r=e.config.get("table.defaultHeadings.rows"),o=e.config.get("table.defaultHeadings.columns");t.headingRows===void 0&&r&&(t.headingRows=r),t.headingColumns===void 0&&o&&(t.headingColumns=o),i.change(l=>{const a=n.createTable(l,t);i.insertObject(a,null,null,{findOptimalPosition:"auto"}),l.setSelection(l.createPositionAt(a.getNodeByPath([0,0,0]),0))})}}function LK(s,t){const e=s.getFirstPosition().parent,i=e===e.root?e:e.parent;return t.checkChild(i,"table")}class TP extends Le{constructor(e,i={}){super(e);p(this,"order");this.order=i.order||"below"}refresh(){const e=this.editor.model.document.selection,n=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=n}execute(){const e=this.editor,i=e.model.document.selection,n=e.plugins.get("TableUtils"),r=this.order==="above",o=n.getSelectionAffectedTableCells(i),l=n.getRowIndexes(o),a=r?l.first:l.last,c=o[0].findAncestor("table");n.insertRows(c,{at:r?a:a+1,copyStructureFromAbove:!r})}}class EP extends Le{constructor(e,i={}){super(e);p(this,"order");this.order=i.order||"right"}refresh(){const e=this.editor.model.document.selection,n=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=n}execute(){const e=this.editor,i=e.model.document.selection,n=e.plugins.get("TableUtils"),r=this.order==="left",o=n.getSelectionAffectedTableCells(i),l=n.getColumnIndexes(o),a=r?l.first:l.last,c=o[0].findAncestor("table");n.insertColumns(c,{columns:1,at:r?a:a+1})}}class AP extends Le{constructor(e,i={}){super(e);p(this,"direction");this.direction=i.direction||"horizontally"}refresh(){const i=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=i.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),i=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(i,2):e.splitCellVertically(i,2)}}function MR(s,t,e){const{startRow:i,startColumn:n,endRow:r,endColumn:o}=t,l=e.createElement("table"),a=s.getAttribute("tableType");a&&e.setAttribute("tableType",a,l);const c=r-i+1;for(let f=0;f<c;f++)e.insertElement("tableRow",l,"end");const h=[...new ft(s,{startRow:i,endRow:r,startColumn:n,endColumn:o,includeAllSlots:!0})];for(const{row:f,column:m,cell:w,isAnchor:O,cellAnchorRow:v,cellAnchorColumn:k}of h){const C=f-i,P=l.getChild(C);if(!O)(v<i||k<n)&&Fl(e,e.createPositionAt(P,"end"));else{const V=e.cloneElement(w);e.append(V,P),DR(V,f,m,r,o,e)}}return BK(l,s,i,n,e),l}function LR(s,t,e=0){const i=[],n=new ft(s,{startRow:e,endRow:t-1});for(const r of n){const{row:o,cellHeight:l}=r,a=o+l-1;o<t&&t<=a&&i.push(r)}return i}function BR(s,t,e){const i=s.parent,n=i.parent,r=i.index,o=parseInt(s.getAttribute("rowspan")),l=t-r,a={},c=o-l;c>1&&(a.rowspan=c);const h=parseInt(s.getAttribute("colspan")||"1");h>1&&(a.colspan=h);const f=r,m=f+l,w=[...new ft(n,{startRow:f,endRow:m,includeAllSlots:!0})];let O=null,v;for(const k of w){const{row:C,column:P,cell:V}=k;V===s&&v===void 0&&(v=P),v!==void 0&&v===P&&C===m&&(O=Fl(e,k.getPositionBefore(),a))}return zt("rowspan",l,s,e),O}function $R(s,t){const e=[],i=new ft(s);for(const n of i){const{column:r,cellWidth:o}=n,l=r+o-1;r<t&&t<=l&&e.push(n)}return e}function QR(s,t,e,i){const n=parseInt(s.getAttribute("colspan")),r=e-t,o={},l=n-r;l>1&&(o.colspan=l);const a=parseInt(s.getAttribute("rowspan")||"1");a>1&&(o.rowspan=a);const c=Fl(i,i.createPositionAfter(s),o);return zt("colspan",r,s,i),c}function DR(s,t,e,i,n,r){const o=parseInt(s.getAttribute("colspan")||"1"),l=parseInt(s.getAttribute("rowspan")||"1");if(e+o-1>n){const h=n-e+1;zt("colspan",h,s,r,1)}if(t+l-1>i){const h=i-t+1;zt("rowspan",h,s,r,1)}}function BK(s,t,e,i,n){const r=parseInt(t.getAttribute("headingRows")||"0");if(r>0){const l=r-e;zt("headingRows",l,s,n,0)}const o=parseInt(t.getAttribute("headingColumns")||"0");if(o>0){const l=o-i;zt("headingColumns",l,s,n,0)}}function X1(s,t){const e=t.getColumns(s),i=new Array(e).fill(0);for(const{column:r}of new ft(s))i[r]++;const n=i.reduce((r,o,l)=>o?r:[...r,l],[]);if(n.length>0){const r=n[n.length-1];return t.removeColumns(s,{at:r}),!0}return!1}function j1(s,t){const e=[],i=t.getRows(s);for(let n=0;n<i;n++)s.getChild(n).isEmpty&&e.push(n);if(e.length>0){const n=e[e.length-1];return t.removeRows(s,{at:n}),!0}return!1}function py(s,t){X1(s,t)||j1(s,t)}function NR(s,t){const e=Array.from(new ft(s,{startColumn:t.firstColumn,endColumn:t.lastColumn,row:t.lastRow}));if(e.every(({cellHeight:r})=>r===1))return t.lastRow;const n=e[0].cellHeight-1;return t.lastRow+n}function FR(s,t){const e=Array.from(new ft(s,{startRow:t.firstRow,endRow:t.lastRow,column:t.lastColumn}));if(e.every(({cellWidth:r})=>r===1))return t.lastColumn;const n=e[0].cellWidth-1;return t.lastColumn+n}class jf extends Le{constructor(e,i){super(e);p(this,"direction");p(this,"isHorizontal");this.direction=i.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,i=e.document,r=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(i.selection)[0],o=this.value,l=this.direction;e.change(a=>{const c=l=="right"||l=="down",h=c?r:o,f=c?o:r,m=f.parent;DK(f,h,a);const w=this.isHorizontal?"colspan":"rowspan",O=parseInt(r.getAttribute(w)||"1"),v=parseInt(o.getAttribute(w)||"1");a.setAttribute(w,O+v,h),a.setSelection(a.createRangeIn(h));const k=this.editor.plugins.get("TableUtils"),C=m.findAncestor("table");py(C,k)})}_getMergeableCell(){const i=this.editor.model.document,n=this.editor.plugins.get("TableUtils"),r=n.getTableCellsContainingSelection(i.selection)[0];if(!r)return;const o=this.isHorizontal?$K(r,this.direction,n):QK(r,this.direction,n);if(!o)return;const l=this.isHorizontal?"rowspan":"colspan",a=parseInt(r.getAttribute(l)||"1");if(parseInt(o.getAttribute(l)||"1")===a)return o}}function $K(s,t,e){const n=s.parent.parent,r=t=="right"?s.nextSibling:s.previousSibling,o=(n.getAttribute("headingColumns")||0)>0;if(!r)return;const l=t=="right"?s:r,a=t=="right"?r:s,{column:c}=e.getCellLocation(l),{column:h}=e.getCellLocation(a),f=parseInt(l.getAttribute("colspan")||"1"),m=q1(e,l),w=q1(e,a);return o&&m!=w?void 0:c+f===h?r:void 0}function QK(s,t,e){const i=s.parent,n=i.parent,r=n.getChildIndex(i);if(t=="down"&&r===e.getRows(n)-1||t=="up"&&r===0)return null;const o=parseInt(s.getAttribute("rowspan")||"1"),l=n.getAttribute("headingRows")||0,a=t=="down"&&r+o===l,c=t=="up"&&r===l;if(l&&(a||c))return null;const h=parseInt(s.getAttribute("rowspan")||"1"),f=t=="down"?r+h:r,m=[...new ft(n,{endRow:f})],O=m.find(k=>k.cell===s).column,v=m.find(({row:k,cellHeight:C,column:P})=>P!==O?!1:t=="down"?k===f:f===k+C);return v&&v.cell?v.cell:null}function DK(s,t,e){IP(s)||(IP(t)&&e.remove(e.createRangeIn(t)),e.move(e.createRangeIn(s),e.createPositionAt(t,"end"))),e.remove(s)}function IP(s){const t=s.getChild(0);return s.childCount==1&&t.is("element","paragraph")&&t.isEmpty}class NK extends Le{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),i=e[0];if(i){const n=i.findAncestor("table"),o=t.getRows(n)-1,l=t.getRowIndexes(e),a=l.first===0&&l.last===o;this.isEnabled=!a}else this.isEnabled=!1}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),i=e.getSelectionAffectedTableCells(t.document.selection),n=e.getRowIndexes(i),r=i[0],o=r.findAncestor("table"),l=e.getCellLocation(r).column;t.change(a=>{const c=n.last-n.first+1;e.removeRows(o,{at:n.first,rows:c});const h=FK(o,n.first,l,e.getRows(o));a.setSelection(a.createPositionAt(h,0))})}}function FK(s,t,e,i){const n=s.getChild(Math.min(t,i-1));let r=n.getChild(0),o=0;for(const l of n.getChildren()){if(o>e)return r;r=l,o+=parseInt(l.getAttribute("colspan")||"1")}return r}class zK extends Le{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),i=e[0];if(i){const n=i.findAncestor("table"),r=t.getColumns(n),{first:o,last:l}=t.getColumnIndexes(e);this.isEnabled=l-o<r-1}else this.isEnabled=!1}execute(){const t=this.editor.plugins.get("TableUtils"),[e,i]=UK(this.editor.model.document.selection,t),n=e.parent.parent,r=[...new ft(n)],o={first:r.find(a=>a.cell===e).column,last:r.find(a=>a.cell===i).column},l=WK(r,e,i,o);this.editor.model.change(a=>{const c=o.last-o.first+1;t.removeColumns(n,{at:o.first,columns:c}),a.setSelection(a.createPositionAt(l,0))})}}function WK(s,t,e,i){return parseInt(e.getAttribute("colspan")||"1")>1?e:t.previousSibling||e.nextSibling?e.nextSibling||t.previousSibling:i.first?s.reverse().find(({column:r})=>r<i.first).cell:s.reverse().find(({column:r})=>r>i.last).cell}function UK(s,t){const e=t.getSelectionAffectedTableCells(s),i=e[0],n=e.pop(),r=[i,n];return i.isBefore(n)?r:r.reverse()}class ZK extends Le{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,i=t.getSelectionAffectedTableCells(e.document.selection);if(i.length===0){this.isEnabled=!1,this.value=!1;return}const n=i[0].findAncestor("table");this.isEnabled=e.schema.checkAttribute(n,"headingRows"),this.value=i.every(r=>this._isInHeading(r,r.parent.parent))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),i=this.editor.model,n=e.getSelectionAffectedTableCells(i.document.selection),r=n[0].findAncestor("table"),{first:o,last:l}=e.getRowIndexes(n),a=this.value?o:l+1,c=r.getAttribute("headingRows")||0;i.change(h=>{if(a){const f=a>c?c:0,m=LR(r,a,f);for(const{cell:w}of m)BR(w,a,h)}zt("headingRows",a,r,h,0)})}_isInHeading(t,e){const i=parseInt(e.getAttribute("headingRows")||"0");return!!i&&t.parent.index<i}}class HK extends Le{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,i=t.getSelectionAffectedTableCells(e.document.selection);if(i.length===0){this.isEnabled=!1,this.value=!1;return}const n=i[0].findAncestor("table");this.isEnabled=e.schema.checkAttribute(n,"headingColumns"),this.value=i.every(r=>q1(t,r))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),i=this.editor.model,n=e.getSelectionAffectedTableCells(i.document.selection),r=n[0].findAncestor("table"),{first:o,last:l}=e.getColumnIndexes(n),a=this.value?o:l+1;i.change(c=>{if(a){const h=$R(r,a);for(const{cell:f,column:m}of h)QR(f,m,a,c)}zt("headingColumns",a,r,c,0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const qK=5,G1=40,XK=2,jK=3;function GK(s){const t=new Set;for(const e of s.document.differ.getChanges()){let i=null;switch(e.type){case"insert":i=["table","tableRow","tableCell"].includes(e.name)?e.position:null;break;case"remove":i=["tableRow","tableCell"].includes(e.name)?e.position:null;break;case"attribute":e.range.start.nodeAfter&&(i=["table","tableRow","tableCell"].includes(e.range.start.nodeAfter.name)?e.range.start:null);break}if(!i)continue;const n=i.nodeAfter&&i.nodeAfter.is("element","table")?i.nodeAfter:i.findAncestor("table");for(const r of s.createRangeOn(n).getItems())r.is("element","table")&&ld(r)&&t.add(r)}return t}function YK(s,t){return G1*100/zR(s,t)}function zR(s,t){const e=RP(s,"tbody",t)||RP(s,"thead",t),i=t.editing.view.domConverter.mapViewToDom(e);return Y1(i)}function RP(s,t,e){return[...[...e.editing.mapper.toViewElement(s).getChildren()].find(r=>r.is("element","table")).getChildren()].find(r=>r.is("element",t))}function Y1(s){const t=ue.window.getComputedStyle(s);return t.boxSizing==="border-box"?parseFloat(t.width)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderLeftWidth)-parseFloat(t.borderRightWidth):parseFloat(t.width)}function KK(s,t){const e=t.getCellLocation(s).column,i=s.getAttribute("colspan")||1;return{leftEdge:e,rightEdge:e+i-1}}function dn(s){const t=Math.pow(10,XK),e=typeof s=="number"?s:parseFloat(s);return Math.round(e*t)/t}function JK(s,t,e){return s<=t?dn(t):s>=e?dn(e):dn(s)}function eJ(s,t){return Array(s).fill(t)}function Eh(s){return s.map(t=>typeof t=="number"?t:parseFloat(t)).filter(t=>!Number.isNaN(t)).reduce((t,e)=>t+e,0)}function wy(s){const t=s.map(n=>n==="auto"?n:parseFloat(n.replace("%","")));let e=tJ(t);const i=Eh(e);return i!==100&&(e=e.map(n=>dn(n*100/i)).map((n,r,o)=>{if(!(r===o.length-1))return n;const a=Eh(o);return dn(n+100-a)})),e.map(n=>n+"%")}function tJ(s){const t=s.filter(n=>n==="auto").length;if(t===0)return s.map(n=>dn(n));const e=Eh(s),i=Math.max((100-e)/t,qK);return s.map(n=>n==="auto"?i:n).map(n=>dn(n))}function iJ(s){const t=ue.window.getComputedStyle(s);return t.boxSizing==="border-box"?parseInt(t.width):parseFloat(t.width)+parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)+parseFloat(t.borderWidth)}function WR(s,t,e,i){for(let n=0;n<Math.max(e.length,s.length);n++){const r=s[n],o=e[n];o?r?i.setAttribute("columnWidth",o,r):i.appendElement("tableColumn",{columnWidth:o},t):i.remove(r)}}function ld(s){if(s.is("element","tableColumnGroup"))return s;const t=s.getChildren();return Array.from(t).find(e=>e.is("element","tableColumnGroup"))}function ad(s){const t=ld(s);return t?Array.from(t.getChildren()):[]}function nJ(s){return ad(s).map(t=>t.getAttribute("columnWidth"))}function sJ(s,t){return ad(s).reduce((i,n)=>{const r=n.getAttribute("columnWidth"),o=n.getAttribute("colSpan");if(!o)return i.push(r),i;for(let l=0;l<o;l++)i.push(r);return t.removeAttribute("colSpan",n),i},[])}class bi extends F{static get pluginName(){return"TableUtils"}static get isOfficialPlugin(){return!0}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(t){const e=t.parent,i=e.parent,n=i.getChildIndex(e),r=new ft(i,{row:n});for(const{cell:o,row:l,column:a}of r)if(o===t)return{row:l,column:a};/* istanbul ignore next -- @preserve */}createTable(t,e){const i=t.createElement("table"),n=e.rows||2,r=e.columns||2;return vb(t,i,0,n,r),e.headingRows&&zt("headingRows",Math.min(e.headingRows,n),i,t,0),e.headingColumns&&zt("headingColumns",Math.min(e.headingColumns,r),i,t,0),i}insertRows(t,e={}){const i=this.editor.model,n=e.at||0,r=e.rows||1,o=e.copyStructureFromAbove!==void 0,l=e.copyStructureFromAbove?n-1:n,a=this.getRows(t),c=this.getColumns(t);if(n>a)throw new A("tableutils-insertrows-insert-out-of-range",this,{options:e});i.change(h=>{const f=t.getAttribute("headingRows")||0;if(f>n&&zt("headingRows",f+r,t,h,0),!o&&(n===0||n===a)){vb(h,t,n,r,c);return}const m=o?Math.max(n,l):n,w=new ft(t,{endRow:m}),O=new Array(c).fill(1);for(const{row:v,column:k,cellHeight:C,cellWidth:P,cell:V}of w){const Q=v+C-1,D=v<n&&n<=Q,q=v<=l&&l<=Q;D?(h.setAttribute("rowspan",C+r,V),O[k]=-P):o&&q&&(O[k]=P)}for(let v=0;v<r;v++){const k=h.createElement("tableRow");h.insert(k,t,n);for(let C=0;C<O.length;C++){const P=O[C],V=h.createPositionAt(k,"end");P>0&&Fl(h,V,P>1?{colspan:P}:void 0),C+=Math.abs(P)-1}}})}insertColumns(t,e={}){const i=this.editor.model,n=e.at||0,r=e.columns||1;i.change(o=>{const l=t.getAttribute("headingColumns");n<l&&o.setAttribute("headingColumns",l+r,t);const a=this.getColumns(t);if(n===0||a===n){for(const h of t.getChildren())h.is("element","tableRow")&&Ba(r,o,o.createPositionAt(h,n?"end":0));return}const c=new ft(t,{column:n,includeAllSlots:!0});for(const h of c){const{row:f,cell:m,cellAnchorColumn:w,cellAnchorRow:O,cellWidth:v,cellHeight:k}=h;if(w<n){o.setAttribute("colspan",v+r,m);const C=O+k-1;for(let P=f;P<=C;P++)c.skipRow(P)}else Ba(r,o,h.getPositionBefore())}})}removeRows(t,e){const i=this.editor.model,n=e.rows||1,r=this.getRows(t),o=e.at,l=o+n-1;if(l>r-1)throw new A("tableutils-removerows-row-index-out-of-range",this,{table:t,options:e});i.change(a=>{const c={first:o,last:l},{cellsToMove:h,cellsToTrim:f}=lJ(t,c);if(h.size){const m=l+1;aJ(t,m,h,a)}for(let m=l;m>=o;m--)a.remove(t.getChild(m));for(const{rowspan:m,cell:w}of f)zt("rowspan",m,w,a);oJ(t,c,a),X1(t,this)||j1(t,this)})}removeColumns(t,e){const i=this.editor.model,n=e.at,r=e.columns||1,o=e.at+r-1;i.change(l=>{rJ(t,{first:n,last:o},l);const a=ad(t);for(let c=o;c>=n;c--){for(const{cell:h,column:f,cellWidth:m}of[...new ft(t)])f<=c&&m>1&&f+m>c?zt("colspan",m-1,h,l):f===c&&l.remove(h);if(a[c]){const h=c===0?a[1]:a[c-1],f=parseFloat(a[c].getAttribute("columnWidth")),m=parseFloat(h.getAttribute("columnWidth"));l.remove(a[c]),l.setAttribute("columnWidth",f+m+"%",h)}}j1(t,this)||X1(t,this)})}splitCellVertically(t,e=2){const i=this.editor.model,r=t.parent.parent,o=parseInt(t.getAttribute("rowspan")||"1"),l=parseInt(t.getAttribute("colspan")||"1");i.change(a=>{if(l>1){const{newCellsSpan:c,updatedSpan:h}=VP(l,e);zt("colspan",h,t,a);const f={};c>1&&(f.colspan=c),o>1&&(f.rowspan=o);const m=l>e?e-1:l-1;Ba(m,a,a.createPositionAfter(t),f)}if(l<e){const c=e-l,h=[...new ft(r)],{column:f}=h.find(({cell:v})=>v===t),m=h.filter(({cell:v,cellWidth:k,column:C})=>{const P=v!==t&&C===f,V=C<f&&C+k>f;return P||V});for(const{cell:v,cellWidth:k}of m)a.setAttribute("colspan",k+c,v);const w={};o>1&&(w.rowspan=o),Ba(c,a,a.createPositionAfter(t),w);const O=r.getAttribute("headingColumns")||0;O>f&&zt("headingColumns",O+c,r,a)}})}splitCellHorizontally(t,e=2){const i=this.editor.model,n=t.parent,r=n.parent,o=r.getChildIndex(n),l=parseInt(t.getAttribute("rowspan")||"1"),a=parseInt(t.getAttribute("colspan")||"1");i.change(c=>{if(l>1){const h=[...new ft(r,{startRow:o,endRow:o+l-1,includeAllSlots:!0})],{newCellsSpan:f,updatedSpan:m}=VP(l,e);zt("rowspan",m,t,c);const{column:w}=h.find(({cell:k})=>k===t),O={};f>1&&(O.rowspan=f),a>1&&(O.colspan=a);let v=0;for(const k of h){const{column:C,row:P}=k,V=P>=o+m,Q=C===w;v>=f&&Q&&(v=0),V&&Q&&(v||Ba(1,c,k.getPositionBefore(),O),v++)}}if(l<e){const h=e-l,f=[...new ft(r,{startRow:0,endRow:o})];for(const{cell:O,cellHeight:v,row:k}of f)if(O!==t&&k+v>o){const C=v+h;c.setAttribute("rowspan",C,O)}const m={};a>1&&(m.colspan=a),vb(c,r,o+1,h,1,m);const w=r.getAttribute("headingRows")||0;w>o&&zt("headingRows",w+h,r,c)}})}getColumns(t){return[...t.getChild(0).getChildren()].filter(i=>i.is("element","tableCell")).reduce((i,n)=>{const r=parseInt(n.getAttribute("colspan")||"1");return i+r},0)}getRows(t){return Array.from(t.getChildren()).reduce((e,i)=>i.is("element","tableRow")?e+1:e,0)}createTableWalker(t,e={}){return new ft(t,e)}getSelectedTableCells(t){const e=[];for(const i of this.sortRanges(t.getRanges())){const n=i.getContainedElement();n&&n.is("element","tableCell")&&e.push(n)}return e}getTableCellsContainingSelection(t){const e=[];for(const i of t.getRanges()){const n=i.start.findAncestor("tableCell");n&&e.push(n)}return e}getSelectionAffectedTableCells(t){const e=this.getSelectedTableCells(t);return e.length?e:this.getTableCellsContainingSelection(t)}getRowIndexes(t){const e=t.map(i=>i.parent.index);return this._getFirstLastIndexesObject(e)}getColumnIndexes(t){const e=t[0].findAncestor("table"),n=[...new ft(e)].filter(r=>t.includes(r.cell)).map(r=>r.column);return this._getFirstLastIndexesObject(n)}isSelectionRectangular(t){if(t.length<2||!this._areCellInTheSameTableSection(t))return!1;const e=new Set,i=new Set;let n=0;for(const o of t){const{row:l,column:a}=this.getCellLocation(o),c=parseInt(o.getAttribute("rowspan"))||1,h=parseInt(o.getAttribute("colspan"))||1;e.add(l),i.add(a),c>1&&e.add(l+c-1),h>1&&i.add(a+h-1),n+=c*h}return uJ(e,i)==n}sortRanges(t){return Array.from(t).sort(cJ)}_getFirstLastIndexesObject(t){const e=t.sort((r,o)=>r-o),i=e[0],n=e[e.length-1];return{first:i,last:n}}_areCellInTheSameTableSection(t){const e=t[0].findAncestor("table"),i=this.getRowIndexes(t),n=parseInt(e.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(i,n))return!1;const r=this.getColumnIndexes(t),o=parseInt(e.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(r,o)}_areIndexesInSameSection({first:t,last:e},i){const n=t<i,r=e<i;return n===r}}function vb(s,t,e,i,n,r={}){for(let o=0;o<i;o++){const l=s.createElement("tableRow");s.insert(l,t,e),Ba(n,s,s.createPositionAt(l,"end"),r)}}function Ba(s,t,e,i={}){for(let n=0;n<s;n++)Fl(t,e,i)}function VP(s,t){if(s<t)return{newCellsSpan:1,updatedSpan:1};const e=Math.floor(s/t),i=s-e*t+e;return{newCellsSpan:e,updatedSpan:i}}function rJ(s,t,e){const i=s.getAttribute("headingColumns")||0;if(i&&t.first<i){const n=Math.min(i-1,t.last)-t.first+1;e.setAttribute("headingColumns",i-n,s)}}function oJ(s,{first:t,last:e},i){const n=s.getAttribute("headingRows")||0;if(t<n){const r=e<n?n-(e-t+1):t;zt("headingRows",r,s,i,0)}}function lJ(s,{first:t,last:e}){const i=new Map,n=[];for(const{row:r,column:o,cellHeight:l,cell:a}of new ft(s,{endRow:e})){const c=r+l-1;if(r>=t&&r<=e&&c>e){const m=e-r+1,w=l-m;i.set(o,{cell:a,rowspan:w})}if(r<t&&c>=t){let m;c>=e?m=e-t+1:m=c-t+1,n.push({cell:a,rowspan:l-m})}}return{cellsToMove:i,cellsToTrim:n}}function aJ(s,t,e,i){const r=[...new ft(s,{includeAllSlots:!0,row:t})],o=s.getChild(t);let l;for(const{column:a,cell:c,isAnchor:h}of r)if(e.has(a)){const{cell:f,rowspan:m}=e.get(a),w=l?i.createPositionAfter(l):i.createPositionAt(o,0);i.move(i.createRangeOn(f),w),zt("rowspan",m,f,i),l=f}else h&&(l=c)}function cJ(s,t){const e=s.start,i=t.start;return e.isBefore(i)?-1:1}function uJ(s,t){const e=Array.from(s.values()),i=Array.from(t.values()),n=Math.max(...e),r=Math.min(...e),o=Math.max(...i),l=Math.min(...i);return(n-r+1)*(o-l+1)}class hJ extends Le{refresh(){const t=this.editor.plugins.get(bi),e=t.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=t.isSelectionRectangular(e)}execute(){const t=this.editor.model,e=this.editor.plugins.get(bi);t.change(i=>{const n=e.getSelectedTableCells(t.document.selection),r=n.shift(),{mergeWidth:o,mergeHeight:l}=fJ(r,n,e);zt("colspan",o,r,i),zt("rowspan",l,r,i);for(const c of n)dJ(c,r,i);const a=r.findAncestor("table");py(a,e),i.setSelection(r,"in")})}}function dJ(s,t,e){MP(s)||(MP(t)&&e.remove(e.createRangeIn(t)),e.move(e.createRangeIn(s),e.createPositionAt(t,"end"))),e.remove(s)}function MP(s){const t=s.getChild(0);return s.childCount==1&&t.is("element","paragraph")&&t.isEmpty}function fJ(s,t,e){let i=0,n=0;for(const c of t){const{row:h,column:f}=e.getCellLocation(c);i=LP(c,f,i,"colspan"),n=LP(c,h,n,"rowspan")}const{row:r,column:o}=e.getCellLocation(s),l=i-o,a=n-r;return{mergeWidth:l,mergeHeight:a}}function LP(s,t,e,i){const n=parseInt(s.getAttribute(i)||"1");return Math.max(e,t+n)}class mJ extends Le{constructor(t){super(t),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),i=e.getSelectionAffectedTableCells(t.document.selection),n=e.getRowIndexes(i),r=i[0].findAncestor("table"),o=[];for(let l=n.first;l<=n.last;l++)for(const a of r.getChild(l).getChildren())o.push(t.createRangeOn(a));t.change(l=>{l.setSelection(o)})}}class gJ extends Le{constructor(t){super(t),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,i=t.getSelectionAffectedTableCells(e.document.selection),n=i[0],r=i.pop(),o=n.findAncestor("table"),l=t.getCellLocation(n),a=t.getCellLocation(r),c=Math.min(l.column,a.column),h=Math.max(l.column,a.column),f=[];for(const m of new ft(o,{startColumn:c,endColumn:h}))f.push(e.createRangeOn(m.cell));e.change(m=>{m.setSelection(f)})}}function pJ(s){s.document.registerPostFixer(t=>wJ(t,s))}function wJ(s,t){const e=t.document.differ.getChanges();let i=!1;const n=new Set;for(const r of e){let o=null;r.type=="insert"&&r.name=="table"&&(o=r.position.nodeAfter),(r.type=="insert"||r.type=="remove")&&(r.name=="tableRow"||r.name=="tableCell")&&(o=r.position.findAncestor("table")),vJ(r)&&(o=r.range.start.findAncestor("table")),o&&!n.has(o)&&(i=bJ(o,s)||i,i=OJ(o,s)||i,n.add(o))}return i}function bJ(s,t){let e=!1;const i=xJ(s);if(i.length){e=!0;for(const n of i)zt("rowspan",n.rowspan,n.cell,t,1)}return e}function OJ(s,t){let e=!1;const i=yJ(s),n=[];for(const[a,c]of i.entries())!c&&s.getChild(a).is("element","tableRow")&&n.push(a);if(n.length){e=!0;for(const a of n.reverse())t.remove(s.getChild(a)),i.splice(a,1)}const r=i.filter((a,c)=>s.getChild(c).is("element","tableRow")),o=r[0];if(!r.every(a=>a===o)){const a=r.reduce((c,h)=>h>c?h:c,0);for(const[c,h]of r.entries()){const f=a-h;if(f){for(let m=0;m<f;m++)Fl(t,t.createPositionAt(s.getChild(c),"end"));e=!0}}}return e}function xJ(s){const t=parseInt(s.getAttribute("headingRows")||"0"),e=Array.from(s.getChildren()).reduce((n,r)=>r.is("element","tableRow")?n+1:n,0),i=[];for(const{row:n,cell:r,cellHeight:o}of new ft(s)){if(o<2)continue;const a=n<t?t:e;if(n+o>a){const c=a-n;i.push({cell:r,rowspan:c})}}return i}function yJ(s){const t=new Array(s.childCount).fill(0);for(const{rowIndex:e}of new ft(s,{includeAllSlots:!0}))t[e]++;return t}function vJ(s){if(s.type!=="attribute")return!1;const t=s.attributeKey;return t==="headingRows"||t==="colspan"||t==="rowspan"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function _J(s){s.document.registerPostFixer(t=>kJ(t,s))}function kJ(s,t){const e=t.document.differ.getChanges();let i=!1;for(const n of e)n.type=="insert"&&n.name=="table"&&(i=SJ(n.position.nodeAfter,s)||i),n.type=="insert"&&n.name=="tableRow"&&(i=UR(n.position.nodeAfter,s)||i),n.type=="insert"&&n.name=="tableCell"&&(i=K1(n.position.nodeAfter,s)||i),(n.type=="remove"||n.type=="insert")&&CJ(n)&&(i=K1(n.position.parent,s)||i);return i}function SJ(s,t){let e=!1;for(const i of s.getChildren())i.is("element","tableRow")&&(e=UR(i,t)||e);return e}function UR(s,t){let e=!1;for(const i of s.getChildren())e=K1(i,t)||e;return e}function K1(s,t){if(s.childCount==0)return t.insertElement("paragraph",s),!0;const e=Array.from(s.getChildren()).filter(i=>i.is("$text"));for(const i of e)t.wrap(t.createRangeOn(i),"paragraph");return!!e.length}function CJ(s){return s.position.parent.is("element","tableCell")?s.type=="insert"&&s.name=="$text"||s.type=="remove":!1}function PJ(s,t){const e=s.document.differ;for(const i of e.getChanges()){let n,r=!1;if(i.type=="attribute"){const c=i.range.start.nodeAfter;if(!c||!c.is("element","table")||i.attributeKey!="headingRows"&&i.attributeKey!="headingColumns")continue;n=c,r=i.attributeKey=="headingRows"}else(i.name=="tableRow"||i.name=="tableCell")&&(n=i.position.findAncestor("table"),r=i.name=="tableRow");if(!n)continue;const o=n.getAttribute("headingRows")||0,l=n.getAttribute("headingColumns")||0,a=new ft(n);for(const c of a){const f=c.row<o||c.column<l?"th":"td",m=t.mapper.toViewElement(c.cell);m&&m.is("element")&&m.name!=f&&t.reconvertItem(r?c.cell.parent:c.cell)}}}function TJ(s,t){const e=s.document.differ,i=new Set;for(const n of e.getChanges()){const r=n.type=="attribute"?n.range.start.parent:n.position.parent;r.is("element","tableCell")&&i.add(r)}for(const n of i.values()){const r=Array.from(n.getChildren()).filter(o=>EJ(o,t.mapper));for(const o of r)t.reconvertItem(o)}}function EJ(s,t){if(!s.is("element","paragraph"))return!1;const e=t.toViewElement(s);return e?VR(s)!==e.is("element","span"):!1}class cd extends F{constructor(e){super(e);p(this,"_additionalSlots");this._additionalSlots=[]}static get pluginName(){return"TableEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[bi]}init(){const e=this.editor,i=e.model,n=i.schema,r=e.conversion,o=e.plugins.get(bi);n.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),n.register("tableRow",{allowIn:"table",isLimit:!0}),n.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),r.for("upcast").add(kK()),r.for("upcast").add(SK()),r.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:SP(o,{asWidget:!0,additionalSlots:this._additionalSlots})}),r.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:SP(o,{additionalSlots:this._additionalSlots})}),r.for("upcast").elementToElement({model:"tableRow",view:"tr"}),r.for("upcast").add(CK()),r.for("downcast").elementToElement({model:"tableRow",view:IK()}),r.for("upcast").elementToElement({model:"tableCell",view:"td"}),r.for("upcast").elementToElement({model:"tableCell",view:"th"}),r.for("upcast").add(kP("td")),r.for("upcast").add(kP("th")),r.for("editingDowncast").elementToElement({model:"tableCell",view:CP({asWidget:!0})}),r.for("dataDowncast").elementToElement({model:"tableCell",view:CP()}),r.for("editingDowncast").elementToElement({model:"paragraph",view:PP({asWidget:!0}),converterPriority:"high"}),r.for("dataDowncast").elementToElement({model:"paragraph",view:PP(),converterPriority:"high"}),r.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),r.for("upcast").attributeToAttribute({model:{key:"colspan",value:BP("colspan")},view:"colspan"}),r.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),r.for("upcast").attributeToAttribute({model:{key:"rowspan",value:BP("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new MK(e)),e.commands.add("insertTableRowAbove",new TP(e,{order:"above"})),e.commands.add("insertTableRowBelow",new TP(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new EP(e,{order:"left"})),e.commands.add("insertTableColumnRight",new EP(e,{order:"right"})),e.commands.add("removeTableRow",new NK(e)),e.commands.add("removeTableColumn",new zK(e)),e.commands.add("splitTableCellVertically",new AP(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new AP(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new hJ(e)),e.commands.add("mergeTableCellRight",new jf(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new jf(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new jf(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new jf(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new HK(e)),e.commands.add("setTableRowHeader",new ZK(e)),e.commands.add("selectTableRow",new mJ(e)),e.commands.add("selectTableColumn",new gJ(e)),pJ(i),_J(i),this.listenTo(i.document,"change:data",()=>{PJ(i,e.editing),TJ(i,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function BP(s){return t=>{const e=parseInt(t.getAttribute(s));return Number.isNaN(e)||e<=0?null:e}}class $P extends he{constructor(e){super(e);p(this,"items");p(this,"keystrokes");p(this,"focusTracker");const i=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new bt,this.focusTracker=new ht,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(n,r)=>`${r} × ${n}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":i.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:i.to("label")}]}],on:{mousedown:i.to(n=>{n.preventDefault()}),click:i.to(()=>{this.fire("execute")})}}),this.on("boxover",(n,r)=>{const{row:o,column:l}=r.target.dataset;this.items.get((parseInt(o,10)-1)*10+(parseInt(l,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(n,r,o)=>{if(!o)return;const{row:l,column:a}=o.dataset;this.set({rows:parseInt(l),columns:parseInt(a)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),mp({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,i=this.columns;this.items.map((n,r)=>{const o=Math.floor(r/10),l=r%10,a=o<e&&l<i;n.set("isOn",a)})}_createGridButton(e,i,n,r){const o=new ve(e);return o.set({label:r,class:"ck-insert-table-dropdown-grid-box"}),o.extendTemplate({attributes:{"data-row":i,"data-column":n}}),o}_createGridCollection(){const e=[];for(let i=0;i<100;i++){const n=Math.floor(i/10),r=i%10,o=`${n+1} × ${r+1}`;e.push(this._createGridButton(this.locale,n+1,r+1,o))}return this.createCollection(e)}}class AJ extends F{static get pluginName(){return"TableUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t,n=t.locale.contentLanguageDirection==="ltr";t.ui.componentFactory.add("insertTable",r=>{const o=t.commands.get("insertTable"),l=xn(r);l.bind("isEnabled").to(o),l.buttonView.set({icon:xC,label:e("Insert table"),tooltip:!0});let a;return l.on("change:isOpen",()=>{a||(a=new $P(r),l.panelView.children.add(a),a.delegate("execute").to(l),l.on("execute",()=>{t.execute("insertTable",{rows:a.rows,columns:a.columns}),t.editing.view.focus()}))}),l}),t.ui.componentFactory.add("menuBar:insertTable",r=>{const o=t.commands.get("insertTable"),l=new nr(r),a=new $P(r);return a.delegate("execute").to(l),l.on("change:isOpen",(c,h,f)=>{f||a.reset()}),a.on("execute",()=>{t.execute("insertTable",{rows:a.rows,columns:a.columns}),t.editing.view.focus()}),l.buttonView.set({label:e("Table"),icon:xC}),l.panelView.children.add(a),l.bind("isEnabled").to(o),l}),t.ui.componentFactory.add("tableColumn",r=>{const o=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:n?"insertTableColumnLeft":"insertTableColumnRight",label:e("Insert column left")}},{type:"button",model:{commandName:n?"insertTableColumnRight":"insertTableColumnLeft",label:e("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:e("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:e("Select column")}}];return this._prepareDropdown(e("Column"),YF,o,r)}),t.ui.componentFactory.add("tableRow",r=>{const o=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:e("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:e("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:e("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:e("Select row")}}];return this._prepareDropdown(e("Row"),ez,o,r)}),t.ui.componentFactory.add("mergeTableCells",r=>{const o=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("Merge cell up")}},{type:"button",model:{commandName:n?"mergeTableCellRight":"mergeTableCellLeft",label:e("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("Merge cell down")}},{type:"button",model:{commandName:n?"mergeTableCellLeft":"mergeTableCellRight",label:e("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(e("Merge cells"),KF,o,r)})}_prepareDropdown(t,e,i,n){const r=this.editor,o=xn(n),l=this._fillDropdownWithListOptions(o,i);return o.buttonView.set({label:t,icon:e,tooltip:!0}),o.bind("isEnabled").toMany(l,"isEnabled",(...a)=>a.some(c=>c)),this.listenTo(o,"execute",a=>{r.execute(a.source.commandName),a.source instanceof td||r.editing.view.focus()}),o}_prepareMergeSplitButtonDropdown(t,e,i,n){const r=this.editor,o=xn(n,_c),l="mergeTableCells",a=r.commands.get(l),c=this._fillDropdownWithListOptions(o,i);return o.buttonView.set({label:t,icon:e,tooltip:!0,isEnabled:!0}),o.bind("isEnabled").toMany([a,...c],"isEnabled",(...h)=>h.some(f=>f)),this.listenTo(o.buttonView,"execute",()=>{r.execute(l),r.editing.view.focus()}),this.listenTo(o,"execute",h=>{r.execute(h.source.commandName),r.editing.view.focus()}),o}_fillDropdownWithListOptions(t,e){const i=this.editor,n=[],r=new vi;for(const o of e)IJ(o,i,n,r);return Ql(t,r),n}}function IJ(s,t,e,i){if(s.type==="button"||s.type==="switchbutton"){const n=s.model=new _l(s.model),{commandName:r,bindIsOn:o}=s.model,l=t.commands.get(r);e.push(l),n.set({commandName:r}),n.bind("isEnabled").to(l),o&&n.bind("isOn").to(l,"value"),n.set({withText:!0})}i.add(s)}class So extends F{static get pluginName(){return"TableSelection"}static get isOfficialPlugin(){return!0}static get requires(){return[bi,bi]}init(){const t=this.editor,e=t.model,i=t.editing.view;this.listenTo(e,"deleteContent",(n,r)=>this._handleDeleteContent(n,r),{priority:"high"}),this.listenTo(i.document,"insertText",(n,r)=>this._handleInsertTextEvent(n,r),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const t=this.editor.plugins.get(bi),e=this.editor.model.document.selection,i=t.getSelectedTableCells(e);return i.length==0?null:i}getSelectionAsFragment(){const t=this.editor.plugins.get(bi),e=this.getSelectedTableCells();return e?this.editor.model.change(i=>{const n=i.createDocumentFragment(),{first:r,last:o}=t.getColumnIndexes(e),{first:l,last:a}=t.getRowIndexes(e),c=e[0].findAncestor("table");let h=a,f=o;if(t.isSelectionRectangular(e)){const O={firstColumn:r,lastColumn:o,firstRow:l,lastRow:a};h=NR(c,O),f=FR(c,O)}const w=MR(c,{startRow:l,startColumn:r,endRow:h,endColumn:f},i);return i.insert(w,n,0),n}):null}setCellSelection(t,e){const i=this._getCellsToSelect(t,e);this.editor.model.change(n=>{n.setSelection(i.cells.map(r=>n.createRangeOn(r)),{backward:i.backward})})}getFocusCell(){const i=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return i&&i.is("element","tableCell")?i:null}getAnchorCell(){const t=this.editor.model.document.selection,i=Nt(t.getRanges()).getContainedElement();return i&&i.is("element","tableCell")?i:null}_defineSelectionConverter(){const t=this.editor,e=new Set;t.conversion.for("editingDowncast").add(n=>n.on("selection",(r,o,l)=>{const a=l.writer;i(a);const c=this.getSelectedTableCells();if(!c)return;for(const f of c){const m=l.mapper.toViewElement(f);a.addClass("ck-editor__editable_selected",m),e.add(m)}const h=l.mapper.toViewElement(c[c.length-1]);a.setSelection(h,0)},{priority:"lowest"}));function i(n){for(const r of e)n.removeClass("ck-editor__editable_selected",r);e.clear()}}_enablePluginDisabling(){const t=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const e=this.getSelectedTableCells();if(!e)return;t.model.change(i=>{const n=i.createPositionAt(e[0],0),r=t.model.schema.getNearestSelectionRange(n);i.setSelection(r)})}})}_handleDeleteContent(t,e){const i=this.editor.plugins.get(bi),n=e[0],r=e[1],o=this.editor.model,l=!r||r.direction=="backward",a=i.getSelectedTableCells(n);a.length&&(t.stop(),o.change(c=>{const h=a[l?a.length-1:0];o.change(m=>{for(const w of a)o.deleteContent(m.createSelection(w,"in"))});const f=o.schema.getNearestSelectionRange(c.createPositionAt(h,0));n.is("documentSelection")?c.setSelection(f):n.setTo(f)}))}_handleInsertTextEvent(t,e){const i=this.editor,n=this.getSelectedTableCells();if(!n)return;const r=i.editing.view,o=i.editing.mapper,l=n.map(a=>r.createRangeOn(o.toViewElement(a)));e.selection=r.createSelection(l),e.preventDefault()}_getCellsToSelect(t,e){const i=this.editor.plugins.get("TableUtils"),n=i.getCellLocation(t),r=i.getCellLocation(e),o=Math.min(n.row,r.row),l=Math.max(n.row,r.row),a=Math.min(n.column,r.column),c=parseInt(e.getAttribute("colspan")||"1")-1,h=Math.max(n.column,r.column+c),f=new Array(l-o+1).fill(null).map(()=>[]),m={startRow:o,endRow:l,startColumn:a,endColumn:h};for(const{row:v,cell:k}of new ft(t.findAncestor("table"),m))f[v-o].push(k);const w=r.row<n.row,O=r.column<n.column;return w&&f.reverse(),O&&f.forEach(v=>v.reverse()),{cells:f.flat(),backward:w||O}}}class RJ extends F{static get pluginName(){return"TableClipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[eh,vn,So,bi]}init(){const e=this.editor.editing.view.document;this.listenTo(e,"copy",(i,n)=>this._onCopyCut(i,n)),this.listenTo(e,"cut",(i,n)=>this._onCopyCut(i,n)),this._listenToContentInsertion(),this.decorate("_replaceTableSlotCell")}_listenToContentInsertion(){const{editor:t}=this,e=t.plugins.get(vn),i=t.plugins.get(So);let n=!1;e.on("contentInsertion",(r,o)=>{n=o.method==="paste"}),this.listenTo(t.model,"insertContent",(r,[o,l])=>{(n||i.getSelectedTableCells()!==null)&&this._onInsertContent(r,o,l)},{priority:"high"}),e.on("contentInsertion",()=>{n=!1},{priority:"lowest"})}_onCopyCut(t,e){const i=this.editor.editing.view,n=this.editor.plugins.get(So),r=this.editor.plugins.get(eh);n.getSelectedTableCells()&&(t.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(e.preventDefault(),t.stop(),this.editor.model.enqueueChange({isUndoable:t.name==="cut"},()=>{const o=r._copySelectedFragmentWithMarkers(t.name,this.editor.model.document.selection,()=>n.getSelectionAsFragment());i.document.fire("clipboardOutput",{dataTransfer:e.dataTransfer,content:this.editor.data.toView(o),method:t.name})})))}_onInsertContent(t,e,i){if(i&&!i.is("documentSelection"))return;const n=this.editor.model,r=this.editor.plugins.get(bi),o=this.editor.plugins.get(eh),l=this.getTableIfOnlyTableInContent(e,n);if(!l)return;const a=r.getSelectionAffectedTableCells(n.document.selection);if(!a.length){py(l,r);return}t.stop(),e.is("documentFragment")?o._pasteMarkersIntoTransformedElement(e.markers,c=>this._replaceSelectedCells(l,a,c)):this.editor.model.change(c=>{this._replaceSelectedCells(l,a,c)})}_replaceSelectedCells(t,e,i){const n=this.editor.plugins.get(bi),r={width:n.getColumns(t),height:n.getRows(t)},o=VJ(e,r,i,n),l=o.lastRow-o.firstRow+1,a=o.lastColumn-o.firstColumn+1,c={startRow:0,startColumn:0,endRow:Math.min(l,r.height)-1,endColumn:Math.min(a,r.width)-1};t=MR(t,c,i);const h=e[0].findAncestor("table"),f=this._replaceSelectedCellsWithPasted(t,r,h,o,i);if(this.editor.plugins.get("TableSelection").isEnabled){const m=n.sortRanges(f.map(w=>i.createRangeOn(w)));i.setSelection(m)}else i.setSelection(f[0],0);return h}_replaceSelectedCellsWithPasted(t,e,i,n,r){const{width:o,height:l}=e,a=LJ(t,o,l),c=[...new ft(i,{startRow:n.firstRow,endRow:n.lastRow,startColumn:n.firstColumn,endColumn:n.lastColumn,includeAllSlots:!0})],h=[];let f;for(const k of c){const{row:C,column:P}=k;P===n.firstColumn&&(f=k.getPositionBefore());const V=C-n.firstRow,Q=P-n.firstColumn,D=a[V%l][Q%o],q=D?r.cloneElement(D):null,$=this._replaceTableSlotCell(k,q,f,r);$&&(DR($,C,P,n.lastRow,n.lastColumn,r),h.push($),f=r.createPositionAfter($))}const m=parseInt(i.getAttribute("headingRows")||"0"),w=parseInt(i.getAttribute("headingColumns")||"0"),O=n.firstRow<m&&m<=n.lastRow,v=n.firstColumn<w&&w<=n.lastColumn;if(O){const k={first:n.firstColumn,last:n.lastColumn},C=J1(i,m,k,r,n.firstRow);h.push(...C)}if(v){const k={first:n.firstRow,last:n.lastRow},C=eO(i,w,k,r);h.push(...C)}return h}_replaceTableSlotCell(t,e,i,n){const{cell:r,isAnchor:o}=t;return o&&n.remove(r),e?(n.insert(e,i),e):null}getTableIfOnlyTableInContent(t,e){if(!t.is("documentFragment")&&!t.is("element"))return null;if(t.is("element","table"))return t;if(t.childCount==1&&t.getChild(0).is("element","table"))return t.getChild(0);const i=e.createRangeIn(t);for(const n of i.getItems())if(n.is("element","table")){const r=e.createRange(i.start,e.createPositionBefore(n));if(e.hasContent(r,{ignoreWhitespaces:!0}))return null;const o=e.createRange(e.createPositionAfter(n),i.end);return e.hasContent(o,{ignoreWhitespaces:!0})?null:n}return null}}function VJ(s,t,e,i){const n=s[0].findAncestor("table"),r=i.getColumnIndexes(s),o=i.getRowIndexes(s),l={firstColumn:r.first,lastColumn:r.last,firstRow:o.first,lastRow:o.last},a=s.length===1;return a&&(l.lastRow+=t.height-1,l.lastColumn+=t.width-1,MJ(n,l.lastRow+1,l.lastColumn+1,i)),a||!i.isSelectionRectangular(s)?BJ(n,l,e):(l.lastRow=NR(n,l),l.lastColumn=FR(n,l)),l}function MJ(s,t,e,i){const n=i.getColumns(s),r=i.getRows(s);e>n&&i.insertColumns(s,{at:n,columns:e-n}),t>r&&i.insertRows(s,{at:r,rows:t-r})}function LJ(s,t,e){const i=new Array(e).fill(null).map(()=>new Array(t).fill(null));for(const{column:n,row:r,cell:o}of new ft(s))i[r][n]=o;return i}function BJ(s,t,e){const{firstRow:i,lastRow:n,firstColumn:r,lastColumn:o}=t,l={first:i,last:n},a={first:r,last:o};eO(s,r,l,e),eO(s,o+1,l,e),J1(s,i,a,e),J1(s,n+1,a,e,i)}function J1(s,t,e,i,n=0){return t<1?void 0:LR(s,t,n).filter(({column:l,cellWidth:a})=>ZR(l,a,e)).map(({cell:l})=>BR(l,t,i))}function eO(s,t,e,i){return t<1?void 0:$R(s,t).filter(({row:o,cellHeight:l})=>ZR(o,l,e)).map(({cell:o,column:l})=>QR(o,l,t,i))}function ZR(s,t,e){const i=s+t-1,{first:n,last:r}=e,o=s>=n&&s<=r,l=s<n&&i>=n;return o||l}class $J extends F{static get pluginName(){return"TableKeyboard"}static get isOfficialPlugin(){return!0}static get requires(){return[So,bi]}init(){const t=this.editor,i=t.editing.view.document,n=t.t;this.listenTo(i,"arrowKey",(...r)=>this._onArrowKey(...r),{context:"table"}),this.listenTo(i,"tab",(...r)=>this._handleTabOnSelectedTable(...r),{context:"figure"}),this.listenTo(i,"tab",(...r)=>this._handleTab(...r),{context:["th","td"]}),t.accessibility.addKeystrokeInfoGroup({id:"table",label:n("Keystrokes that can be used in a table cell"),keystrokes:[{label:n("Move the selection to the next cell"),keystroke:"Tab"},{label:n("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:n("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:n("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(t,e){const i=this.editor,r=i.model.document.selection.getSelectedElement();!r||!r.is("element","table")||(e.preventDefault(),e.stopPropagation(),t.stop(),i.model.change(o=>{o.setSelection(o.createRangeIn(r.getChild(0).getChild(0)))}))}_handleTab(t,e){const i=this.editor,n=this.editor.plugins.get(bi),r=this.editor.plugins.get("TableSelection"),o=i.model.document.selection,l=!e.shiftKey;let a=n.getTableCellsContainingSelection(o)[0];if(a||(a=r.getFocusCell()),!a)return;e.preventDefault(),e.stopPropagation(),t.stop();const c=a.parent,h=c.parent,f=h.getChildIndex(c),m=c.getChildIndex(a),w=m===0;if(!l&&w&&f===0){i.model.change(C=>{C.setSelection(C.createRangeOn(h))});return}const O=m===c.childCount-1,v=f===n.getRows(h)-1;if(l&&v&&O&&(i.execute("insertTableRowBelow"),f===n.getRows(h)-1)){i.model.change(C=>{C.setSelection(C.createRangeOn(h))});return}let k;if(l&&O)k=h.getChild(f+1).getChild(0);else if(!l&&w){const C=h.getChild(f-1);k=C.getChild(C.childCount-1)}else k=c.getChild(m+(l?1:-1));i.model.change(C=>{C.setSelection(C.createRangeIn(k))})}_onArrowKey(t,e){const i=this.editor,n=e.keyCode,r=yx(n,i.locale.contentLanguageDirection);this._handleArrowKeys(r,e.shiftKey)&&(e.preventDefault(),e.stopPropagation(),t.stop())}_handleArrowKeys(t,e){const i=this.editor.plugins.get(bi),n=this.editor.plugins.get("TableSelection"),r=this.editor.model,o=r.document.selection,l=["right","down"].includes(t),a=i.getSelectedTableCells(o);if(a.length){let h;return e?h=n.getFocusCell():h=l?a[a.length-1]:a[0],this._navigateFromCellInDirection(h,t,e),!0}const c=o.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!c)return!1;if(!o.isCollapsed)if(e){if(o.isBackward==l&&!o.containsEntireContent(c))return!1}else{const h=o.getSelectedElement();if(!h||!r.schema.isObject(h))return!1}return this._isSelectionAtCellEdge(o,c,l)?(this._navigateFromCellInDirection(c,t,e),!0):!1}_isSelectionAtCellEdge(t,e,i){const n=this.editor.model,r=this.editor.model.schema,o=i?t.getLastPosition():t.getFirstPosition();if(!r.getLimitElement(o).is("element","tableCell"))return n.createPositionAt(e,i?"end":0).isTouching(o);const l=n.createSelection(o);return n.modifySelection(l,{direction:i?"forward":"backward"}),o.isEqual(l.focus)}_navigateFromCellInDirection(t,e,i=!1){const n=this.editor.model,r=t.findAncestor("table"),o=[...new ft(r,{includeAllSlots:!0})],{row:l,column:a}=o[o.length-1],c=o.find(({cell:P})=>P==t);let{row:h,column:f}=c;switch(e){case"left":f--;break;case"up":h--;break;case"right":f+=c.cellWidth;break;case"down":h+=c.cellHeight;break}const m=h<0||h>l,w=f<0&&h<=0,O=f>a&&h>=l;if(m||w||O){n.change(P=>{P.setSelection(P.createRangeOn(r))});return}f<0?(f=i?0:a,h--):f>a&&(f=i?a:0,h++);const v=o.find(P=>P.row==h&&P.column==f).cell,k=["right","down"].includes(e),C=this.editor.plugins.get("TableSelection");if(i&&C.isEnabled){const P=C.getAnchorCell()||t;C.setCellSelection(P,v)}else{const P=n.createPositionAt(v,k?0:"end");n.change(V=>{V.setSelection(P)})}}}class HR extends Qr{constructor(){super(...arguments);p(this,"domEventType",["mousemove","mouseleave"])}onDomEvent(e){this.fire(e.type,e)}}class QJ extends F{static get pluginName(){return"TableMouse"}static get isOfficialPlugin(){return!0}static get requires(){return[So,bi]}init(){this.editor.editing.view.addObserver(HR),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const t=this.editor,e=t.plugins.get(bi);let i=!1;const n=t.plugins.get(So);this.listenTo(t.editing.view.document,"mousedown",(r,o)=>{const l=t.model.document.selection;if(!this.isEnabled||!n.isEnabled||!o.domEvent.shiftKey)return;const a=n.getAnchorCell()||e.getTableCellsContainingSelection(l)[0];if(!a)return;const c=this._getModelTableCellFromDomEvent(o);c&&QP(a,c)&&(i=!0,n.setCellSelection(a,c),o.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{i=!1}),this.listenTo(t.editing.view.document,"selectionChange",r=>{i&&r.stop()},{priority:"highest"})}_enableMouseDragSelection(){const t=this.editor;let e,i,n=!1,r=!1;const o=t.plugins.get(So);this.listenTo(t.editing.view.document,"mousedown",(l,a)=>{!this.isEnabled||!o.isEnabled||a.domEvent.shiftKey||a.domEvent.ctrlKey||a.domEvent.altKey||(e=this._getModelTableCellFromDomEvent(a))}),this.listenTo(t.editing.view.document,"mousemove",(l,a)=>{if(!a.domEvent.buttons||!e)return;const c=this._getModelTableCellFromDomEvent(a);c&&QP(e,c)&&(i=c,!n&&i!=e&&(n=!0)),n&&(r=!0,o.setCellSelection(e,i),a.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{n=!1,r=!1,e=null,i=null}),this.listenTo(t.editing.view.document,"selectionChange",l=>{r&&l.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(t){const e=t.target,i=this.editor.editing.view.createPositionAt(e,0);return this.editor.editing.mapper.toModelPosition(i).parent.findAncestor("tableCell",{includeSelf:!0})}}function QP(s,t){return s.parent.parent==t.parent.parent}let DJ=class extends F{static get requires(){return[cd,AJ,So,QJ,$J,RJ,Sc]}static get pluginName(){return"Table"}static get isOfficialPlugin(){return!0}};function Cg(s){const t=qR(s);return t||yp(s)}function qR(s){const t=s.getSelectedElement();return t&&XR(t)?t:null}function yp(s){const t=s.getFirstPosition();if(!t)return null;let e=t.parent;for(;e;){if(e.is("element")&&XR(e))return e;e=e.parent}return null}function XR(s){return!!s.getCustomProperty("table")&&Wt(s)}class NJ extends F{static get requires(){return[wg]}static get pluginName(){return"TableToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,i=t.plugins.get(wg),n=t.config.get("table.contentToolbar"),r=t.config.get("table.tableToolbar");n&&i.register("tableContent",{ariaLabel:e("Table toolbar"),items:n,getRelatedElement:yp}),r&&i.register("table",{ariaLabel:e("Table toolbar"),items:r,getRelatedElement:qR})}}class FJ extends he{constructor(e,i){super(e);p(this,"options");p(this,"focusTracker");p(this,"focusCycler");p(this,"_focusables");p(this,"dropdownView");p(this,"inputView");p(this,"keystrokes");p(this,"_stillTyping");this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=i,this.focusTracker=new ht,this._focusables=new hi,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new bt,this._stillTyping=!1,this.focusCycler=new Kt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(n,r,o)=>this._setInputValue(o))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(e=>{this.focusTracker.add(e.element),this._focusables.add(e)}),this.keystrokes.listenTo(this.element)}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const e=this.locale,i=e.t,n=this.bindTemplate,r=this._createColorSelector(e),o=xn(e),l=new he;return l.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:n.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",n.if("value","ck-hidden",a=>a!="")]}}]}),o.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),o.buttonView.children.add(l),o.buttonView.label=i("Color picker"),o.buttonView.tooltip=!0,o.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw",o.panelView.children.add(r),o.bind("isEnabled").to(this,"isReadOnly",a=>!a),o.on("change:isOpen",(a,c,h)=>{h&&(r.updateSelectedColors(),r.showColorGridsFragment())}),o}_createInputTextView(){const e=this.locale,i=new Y6(e);return i.extendTemplate({on:{blur:i.bindTemplate.to("blur")}}),i.value=this.value,i.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(i),i.on("input",()=>{const n=i.element.value,r=this.options.colorDefinitions.find(o=>n===o.label);this._stillTyping=!0,this.value=r&&r.color||n}),i.on("blur",()=>{this._stillTyping=!1,this._setInputValue(i.element.value)}),i.delegate("input").to(this),i}_createColorSelector(e){const i=e.t,n=this.options.defaultColorValue||"",r=i(n?"Restore default":"Remove color"),o=new vW(e,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:r,colorPickerLabel:i("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});o.appendUI(),o.on("execute",(a,c)=>{if(c.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=c.value||n,this.fire("input"),c.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let l=this.value;return o.on("colorPicker:cancel",()=>{this.value=l,this.fire("input"),this.dropdownView.isOpen=!1}),o.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{l=this.value}),o.bind("selectedColor").to(this,"value"),o}_setInputValue(e){if(!this._stillTyping){const i=DP(e),n=this.options.colorDefinitions.find(r=>i===DP(r.color));n?this.inputView.value=n.label:this.inputView.value=e||""}}}function DP(s){return s.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const by=s=>s==="";function Oy(s){return{none:s("None"),solid:s("Solid"),dotted:s("Dotted"),dashed:s("Dashed"),double:s("Double"),groove:s("Groove"),ridge:s("Ridge"),inset:s("Inset"),outset:s("Outset")}}function jR(s){return s('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function GR(s){return s('The value is invalid. Try "10px" or "2em" or simply "2".')}function Pg(s){return s=s.trim().toLowerCase(),by(s)||g6(s)}function ih(s){return s=s.trim(),by(s)||JR(s)||Bx(s)||_8(s)}function YR(s){return s=s.trim(),by(s)||JR(s)||Bx(s)}function KR(s,t){const e=new vi,i=Oy(s.t);for(const n in i){const r={type:"button",model:new _l({_borderStyleValue:n,label:i[n],role:"menuitemradio",withText:!0})};n==="none"?r.model.bind("isOn").to(s,"borderStyle",o=>t==="none"?!o:o===n):r.model.bind("isOn").to(s,"borderStyle",o=>o===n),e.add(r)}return e}function tO(s){const{view:t,icons:e,toolbar:i,labels:n,propertyName:r,nameToValue:o,defaultValue:l}=s;for(const a in n){const c=new ve(t.locale);c.set({role:"radio",isToggleable:!0,label:n[a],icon:e[a],tooltip:n[a]});const h=o?o(a):a;c.bind("isOn").to(t,r,f=>{let m=f;return f===""&&l&&(m=l),h===m}),c.on("execute",()=>{!l&&h&&t[r]===h?t[r]=void 0:t[r]=h}),i.items.add(c)}}const Tg=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function Eg(s){return(t,e,i)=>{const n=new FJ(t.locale,{colorDefinitions:zJ(s.colorConfig),columns:s.columns,defaultColorValue:s.defaultColorValue,colorPickerConfig:s.colorPickerConfig});return n.inputView.set({id:e,ariaDescribedById:i}),n.bind("isReadOnly").to(t,"isEnabled",r=>!r),n.bind("hasError").to(t,"errorText",r=>!!r),n.on("input",()=>{t.errorText=null}),t.bind("isEmpty","isFocused").to(n),n}}function JR(s){const t=parseFloat(s);return!Number.isNaN(t)&&s===String(t)}function zJ(s){return s.map(t=>({color:t.model,label:t.label,options:{hasBorder:t.hasBorder}}))}class WJ extends he{constructor(e,i){super(e);p(this,"options");p(this,"focusTracker");p(this,"keystrokes");p(this,"children");p(this,"borderStyleDropdown");p(this,"borderWidthInput");p(this,"borderColorInput");p(this,"backgroundInput");p(this,"paddingInput");p(this,"widthInput");p(this,"heightInput");p(this,"horizontalAlignmentToolbar");p(this,"verticalAlignmentToolbar");p(this,"saveButtonView");p(this,"cancelButtonView");p(this,"_focusables");p(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=i;const{borderStyleDropdown:n,borderWidthInput:r,borderColorInput:o,borderRowLabel:l}=this._createBorderFields(),{backgroundRowLabel:a,backgroundInput:c}=this._createBackgroundFields(),{widthInput:h,operatorLabel:f,heightInput:m,dimensionsLabel:w}=this._createDimensionFields(),{horizontalAlignmentToolbar:O,verticalAlignmentToolbar:v,alignmentLabel:k}=this._createAlignmentFields();this.focusTracker=new ht,this.keystrokes=new bt,this.children=this.createCollection(),this.borderStyleDropdown=n,this.borderWidthInput=r,this.borderColorInput=o,this.backgroundInput=c,this.paddingInput=this._createPaddingField(),this.widthInput=h,this.heightInput=m,this.horizontalAlignmentToolbar=O,this.verticalAlignmentToolbar=v;const{saveButtonView:C,cancelButtonView:P}=this._createActionButtons();this.saveButtonView=C,this.cancelButtonView=P,this._focusables=new hi,this._focusCycler=new Kt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new Nr(e,{label:this.t("Cell properties")})),this.children.add(new Ti(e,{labelView:l,children:[l,n,o,r],class:"ck-table-form__border-row"})),this.children.add(new Ti(e,{labelView:a,children:[a,c],class:"ck-table-form__background-row"})),this.children.add(new Ti(e,{children:[new Ti(e,{labelView:w,children:[w,h,f,m],class:"ck-table-form__dimensions-row"}),new Ti(e,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new Ti(e,{labelView:k,children:[k,O,v],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new Ti(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Bl({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableCellProperties,i={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},n=Eg({colorConfig:this.options.borderColors,columns:5,defaultColorValue:i.color,colorPickerConfig:this.options.colorPickerConfig}),r=this.locale,o=this.t,l=o("Style"),a=new Jn(r);a.text=o("Border");const c=Oy(o),h=new jt(r,sI);h.set({label:l,class:"ck-table-form__border-style"}),h.fieldView.buttonView.set({ariaLabel:l,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:l}),h.fieldView.buttonView.bind("label").to(this,"borderStyle",w=>c[w||"none"]),h.fieldView.on("execute",w=>{this.borderStyle=w.source._borderStyleValue}),h.bind("isEmpty").to(this,"borderStyle",w=>!w),Ql(h.fieldView,KR(this,i.style),{role:"menu",ariaLabel:l});const f=new jt(r,wn);f.set({label:o("Width"),class:"ck-table-form__border-width"}),f.fieldView.bind("value").to(this,"borderWidth"),f.bind("isEnabled").to(this,"borderStyle",Gf),f.fieldView.on("input",()=>{this.borderWidth=f.fieldView.element.value});const m=new jt(r,n);return m.set({label:o("Color"),class:"ck-table-form__border-color"}),m.fieldView.bind("value").to(this,"borderColor"),m.bind("isEnabled").to(this,"borderStyle",Gf),m.fieldView.on("input",()=>{this.borderColor=m.fieldView.value}),this.on("change:borderStyle",(w,O,v,k)=>{Gf(v)||(this.borderColor="",this.borderWidth=""),Gf(k)||(this.borderColor=i.color,this.borderWidth=i.width)}),{borderRowLabel:a,borderStyleDropdown:h,borderColorInput:m,borderWidthInput:f}}_createBackgroundFields(){const e=this.locale,i=this.t,n=new Jn(e);n.text=i("Background");const r=Eg({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new jt(e,r);return o.set({label:i("Color"),class:"ck-table-cell-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:n,backgroundInput:o}}_createDimensionFields(){const e=this.locale,i=this.t,n=new Jn(e);n.text=i("Dimensions");const r=new jt(e,wn);r.set({label:i("Width"),class:"ck-table-form__dimensions-row__width"}),r.fieldView.bind("value").to(this,"width"),r.fieldView.on("input",()=>{this.width=r.fieldView.element.value});const o=new he(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const l=new jt(e,wn);return l.set({label:i("Height"),class:"ck-table-form__dimensions-row__height"}),l.fieldView.bind("value").to(this,"height"),l.fieldView.on("input",()=>{this.height=l.fieldView.element.value}),{dimensionsLabel:n,widthInput:r,operatorLabel:o,heightInput:l}}_createPaddingField(){const e=this.locale,i=this.t,n=new jt(e,wn);return n.set({label:i("Padding"),class:"ck-table-cell-properties-form__padding"}),n.fieldView.bind("value").to(this,"padding"),n.fieldView.on("input",()=>{this.padding=n.fieldView.element.value}),n}_createAlignmentFields(){const e=this.locale,i=this.t,n=new Jn(e),r={left:_6,center:lF,right:uF,justify:aF,top:hF,middle:cF,bottom:oF};n.text=i("Table cell text alignment");const o=new vl(e),l=e.contentLanguageDirection==="rtl";o.set({isCompact:!0,role:"radiogroup",ariaLabel:i("Horizontal text alignment toolbar")}),tO({view:this,icons:r,toolbar:o,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:c=>{if(l){if(c==="left")return"right";if(c==="right")return"left"}return c},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const a=new vl(e);return a.set({isCompact:!0,role:"radiogroup",ariaLabel:i("Vertical text alignment toolbar")}),tO({view:this,icons:r,toolbar:a,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:o,verticalAlignmentToolbar:a,alignmentLabel:n}}_createActionButtons(){const e=this.locale,i=this.t,n=new ve(e),r=new ve(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return n.set({label:i("Save"),icon:Jh,class:"ck-button-save",type:"submit",withText:!0}),n.bind("isEnabled").toMany(o,"errorText",(...l)=>l.every(a=>!a)),r.set({label:i("Cancel"),icon:xc,class:"ck-button-cancel",withText:!0}),r.delegate("execute").to(this,"cancel"),{saveButtonView:n,cancelButtonView:r}}get _horizontalAlignmentLabels(){const e=this.locale,i=this.t,n=i("Align cell text to the left"),r=i("Align cell text to the center"),o=i("Align cell text to the right"),l=i("Justify cell text");return e.uiLanguageDirection==="rtl"?{right:o,center:r,left:n,justify:l}:{left:n,center:r,right:o,justify:l}}get _verticalAlignmentLabels(){const e=this.t;return{top:e("Align cell text to the top"),middle:e("Align cell text to the middle"),bottom:e("Align cell text to the bottom")}}}function Gf(s){return s!=="none"}const iO=[Gi.defaultPositions.northArrowSouth,Gi.defaultPositions.northArrowSouthWest,Gi.defaultPositions.northArrowSouthEast,Gi.defaultPositions.southArrowNorth,Gi.defaultPositions.southArrowNorthWest,Gi.defaultPositions.southArrowNorthEast,Gi.defaultPositions.viewportStickyNorth];function e4(s,t){const e=s.plugins.get("ContextualBalloon"),i=s.editing.view.document.selection;let n;t==="cell"?yp(i)&&(n=i4(s)):Cg(i)&&(n=t4(s)),n&&e.updatePosition(n)}function t4(s){const t=s.model.document.selection,e=ko(t),i=s.editing.mapper.toViewElement(e);return{target:s.editing.view.domConverter.mapViewToDom(i),positions:iO}}function i4(s){const t=s.editing.mapper,e=s.editing.view.domConverter,i=s.model.document.selection;if(i.rangeCount>1)return{target:()=>UJ(i.getRanges(),s),positions:iO};const n=n4(i.getFirstPosition()),r=t.toViewElement(n);return{target:e.mapViewToDom(r),positions:iO}}function n4(s){return s.nodeAfter&&s.nodeAfter.is("element","tableCell")?s.nodeAfter:s.findAncestor("tableCell")}function UJ(s,t){const e=t.editing.mapper,i=t.editing.view.domConverter,n=Array.from(s).map(r=>{const o=n4(r.start),l=e.toViewElement(o);return new Me(i.mapViewToDom(l))});return Me.getBoundingRect(n)}function zl(s){if(!s||!ls(s))return s;const{top:t,right:e,bottom:i,left:n}=s;if(t==e&&e==i&&i==n)return t}function Wl(s,t){const e=parseFloat(s);return Number.isNaN(e)||String(e)!==String(s)?s:`${e}${t}`}function vp(s,t={}){const e={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...s};return t.includeAlignmentProperty&&!e.alignment&&(e.alignment="center"),t.includePaddingProperty&&!e.padding&&(e.padding=""),t.includeVerticalAlignmentProperty&&!e.verticalAlignment&&(e.verticalAlignment="middle"),t.includeHorizontalAlignmentProperty&&!e.horizontalAlignment&&(e.horizontalAlignment=t.isRightToLeftContent?"right":"left"),e}function s4(s,t){return vp({borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",...s},t)}function xy(s,t){return vp({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...s},t)}const ZJ=500,NP={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class HJ extends F{constructor(e){super(e);p(this,"_defaultContentTableCellProperties");p(this,"_defaultLayoutTableCellProperties");p(this,"_balloon");p(this,"view");p(this,"_viewWithContentTableDefaults");p(this,"_viewWithLayoutTableDefaults");p(this,"_undoStepBatch");p(this,"_isReady");e.config.define("table.tableCellProperties",{borderColors:Tg,backgroundColors:Tg})}static get requires(){return[hs]}static get pluginName(){return"TableCellPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.t;this._defaultContentTableCellProperties=xy(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._defaultLayoutTableCellProperties=vp(void 0,{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._balloon=e.plugins.get(hs),this.view=null,this._isReady=!1,e.ui.componentFactory.add("tableCellProperties",n=>{const r=new ve(n);r.set({label:i("Cell properties"),icon:GF,tooltip:!0}),this.listenTo(r,"execute",()=>this._showView());const o=Object.values(NP).map(l=>e.commands.get(l));return r.bind("isEnabled").toMany(o,"isEnabled",(...l)=>l.some(a=>a)),r})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(e){const i=this.editor,n=i.config.get("table.tableCellProperties"),r=mg(n.borderColors),o=fg(i.locale,r),l=mg(n.backgroundColors),a=fg(i.locale,l),c=n.colorPicker!==!1,h=new WJ(i.locale,{borderColors:o,backgroundColors:a,defaultTableCellProperties:e,colorPickerConfig:c?n.colorPicker||{}:!1}),f=i.t;h.render(),this.listenTo(h,"submit",()=>{this._hideView()}),this.listenTo(h,"cancel",()=>{this._undoStepBatch.operations.length&&i.execute("undo",this._undoStepBatch),this._hideView()}),h.keystrokes.set("Esc",(O,v)=>{this._hideView(),v()}),Dr({emitter:h,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const m=jR(f),w=GR(f);return h.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),h.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:h.borderColorInput,commandName:"tableCellBorderColor",errorText:m,validator:Pg})),h.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:h.borderWidthInput,commandName:"tableCellBorderWidth",errorText:w,validator:YR})),h.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:h.paddingInput,commandName:"tableCellPadding",errorText:w,validator:ih})),h.on("change:width",this._getValidatedPropertyChangeCallback({viewField:h.widthInput,commandName:"tableCellWidth",errorText:w,validator:ih})),h.on("change:height",this._getValidatedPropertyChangeCallback({viewField:h.heightInput,commandName:"tableCellHeight",errorText:w,validator:ih})),h.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:h.backgroundInput,commandName:"tableCellBackgroundColor",errorText:m,validator:Pg})),h.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),h.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),h}_fillViewFormFromCommandValues(){const e=this.editor.commands,i=e.get("tableCellBorderStyle");Object.entries(NP).map(([n,r])=>{const o=n,l=this.view===this._viewWithContentTableDefaults?this._defaultContentTableCellProperties[o]||"":this._defaultLayoutTableCellProperties[o]||"";return[n,e.get(r).value||l]}).forEach(([n,r])=>{(n==="borderColor"||n==="borderWidth")&&i.value==="none"||this.view.set(n,r)}),this._isReady=!0}_showView(){const e=this.editor,i=Cg(e.editing.view.document.selection),n=i&&e.editing.mapper.toModelElement(i),r=!n||n.getAttribute("tableType")!=="layout";r&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableCellProperties):!r&&!this._viewWithLayoutTableDefaults&&(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableCellProperties)),this.view=r?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:i4(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,i=e.editing.view.document;yp(i.selection)?this._isViewVisible&&e4(e,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(i,n,r)=>{this._isReady&&this.editor.execute(e,{value:r,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:i,viewField:n,validator:r,errorText:o}=e,l=as(()=>{n.errorText=o},ZJ);return(a,c,h)=>{l.cancel(),this._isReady&&(r(h)?(this.editor.execute(i,{value:h,batch:this._undoStepBatch}),n.errorText=null):l())}}}class Fr extends Le{constructor(e,i,n){super(e);p(this,"attributeName");p(this,"_defaultValue");p(this,"_defaultContentTableValue");p(this,"_defaultLayoutTableValue");switch(this.attributeName=i,this._defaultContentTableValue=n,i){case"tableCellBorderStyle":this._defaultLayoutTableValue="none";break;case"tableCellHorizontalAlignment":this._defaultLayoutTableValue="left";break;case"tableCellVerticalAlignment":this._defaultLayoutTableValue="middle";break;default:this._defaultLayoutTableValue=void 0}}refresh(){const i=this.editor.model.document.selection,r=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(i),o=ko(i);this._defaultValue=!o||o.getAttribute("tableType")!=="layout"?this._defaultContentTableValue:this._defaultLayoutTableValue,this.isEnabled=!!r.length,this.value=this._getSingleValue(r)}execute(e={}){const{value:i,batch:n}=e,r=this.editor.model,l=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(r.document.selection),a=this._getValueToSet(i);r.enqueueChange(n,c=>{a?l.forEach(h=>c.setAttribute(this.attributeName,a,h)):l.forEach(h=>c.removeAttribute(this.attributeName,h))})}_getAttribute(e){if(!e)return;const i=e.getAttribute(this.attributeName);if(i!==this._defaultValue)return i}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const i=this._getAttribute(e[0]);return e.every(r=>this._getAttribute(r)===i)?i:void 0}}class qJ extends Fr{constructor(t,e){super(t,"tableCellWidth",e)}_getValueToSet(t){if(t=Wl(t,"px"),t!==this._defaultValue)return t}}class r4 extends F{static get pluginName(){return"TableCellWidthEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[cd]}init(){const t=this.editor,e=xy(t.config.get("table.tableCellProperties.defaultProperties"));Mm(t.model.schema,t.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:e.width}),t.commands.add("tableCellWidth",new qJ(t,e.width))}}class XJ extends Fr{constructor(t,e){super(t,"tableCellPadding",e)}_getAttribute(t){if(!t)return;const e=zl(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=Wl(t,"px");if(e!==this._defaultValue)return e}}class jJ extends Fr{constructor(t,e){super(t,"tableCellHeight",e)}_getValueToSet(t){const e=Wl(t,"px");if(e!==this._defaultValue)return e}}class GJ extends Fr{constructor(t,e){super(t,"tableCellBackgroundColor",e)}}class YJ extends Fr{constructor(t,e){super(t,"tableCellVerticalAlignment",e)}}class KJ extends Fr{constructor(t,e){super(t,"tableCellHorizontalAlignment",e)}}class JJ extends Fr{constructor(t,e){super(t,"tableCellBorderStyle",e)}_getAttribute(t){if(!t)return;const e=zl(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class eee extends Fr{constructor(t,e){super(t,"tableCellBorderColor",e)}_getAttribute(t){if(!t)return;const e=zl(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class tee extends Fr{constructor(t,e){super(t,"tableCellBorderWidth",e)}_getAttribute(t){if(!t)return;const e=zl(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=Wl(t,"px");if(e!==this._defaultValue)return e}}const FP=/^(top|middle|bottom)$/,zP=/^(left|center|right|justify)$/;class iee extends F{static get pluginName(){return"TableCellPropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[cd,r4]}init(){const t=this.editor,e=t.model.schema,i=t.conversion;t.config.define("table.tableCellProperties.defaultProperties",{});const n=xy(t.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:t.locale.contentLanguageDirection==="rtl"});t.data.addStyleProcessorRules(w6),nee(e,i,{color:n.borderColor,style:n.borderStyle,width:n.borderWidth}),t.commands.add("tableCellBorderStyle",new JJ(t,n.borderStyle)),t.commands.add("tableCellBorderColor",new eee(t,n.borderColor)),t.commands.add("tableCellBorderWidth",new tee(t,n.borderWidth)),Mm(e,i,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:n.height}),t.commands.add("tableCellHeight",new jJ(t,n.height)),t.data.addStyleProcessorRules(N8),Mm(e,i,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:n.padding}),t.commands.add("tableCellPadding",new XJ(t,n.padding)),t.data.addStyleProcessorRules(p6),Mm(e,i,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:n.backgroundColor}),t.commands.add("tableCellBackgroundColor",new GJ(t,n.backgroundColor)),see(e,i,n.horizontalAlignment),t.commands.add("tableCellHorizontalAlignment",new KJ(t,n.horizontalAlignment)),ree(e,i,n.verticalAlignment),t.commands.add("tableCellVerticalAlignment",new YJ(t,n.verticalAlignment))}}function nee(s,t,e){const i={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};s.extend("tableCell",{allowAttributes:Object.values(i)}),H1(t,"td",i,e),H1(t,"th",i,e),th(t,{modelElement:"tableCell",modelAttribute:i.style,styleName:"border-style"}),th(t,{modelElement:"tableCell",modelAttribute:i.color,styleName:"border-color"}),th(t,{modelElement:"tableCell",modelAttribute:i.width,styleName:"border-width"})}function see(s,t,e){s.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:i=>({key:"style",value:{"text-align":i}})}),t.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":zP}},model:{key:"tableCellHorizontalAlignment",value:(i,n,r)=>{const o=_o(e,"left",r),l=i.getStyle("text-align");return l===o?null:l}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:zP}},model:{key:"tableCellHorizontalAlignment",value:(i,n,r)=>{const o=_o(e,"left",r),l=i.getAttribute("align");return l===o?null:l}}})}function ree(s,t,e){s.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:i=>({key:"style",value:{"vertical-align":i}})}),t.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":FP}},model:{key:"tableCellVerticalAlignment",value:(i,n,r)=>{const o=_o(e,"middle",r),l=i.getStyle("vertical-align");return l===o?null:l}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:FP}},model:{key:"tableCellVerticalAlignment",value:(i,n,r)=>{const o=_o(e,"middle",r),l=i.getAttribute("valign");return l===o?null:l}}})}class oee extends F{static get pluginName(){return"TableCellProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[iee,HJ]}}class lee extends Le{refresh(){this.isEnabled=!0}execute(t={}){const{model:e,plugins:i}=this.editor;let{table:n=e.document.selection.getSelectedElement(),columnWidths:r,tableWidth:o}=t;r&&(r=Array.isArray(r)?r:r.split(",")),e.change(l=>{o?l.setAttribute("tableWidth",o,n):l.removeAttribute("tableWidth",n);const a=i.get("TableColumnResizeEditing").getColumnGroupElement(n);if(!r&&!a)return;if(!r)return l.remove(a);const c=wy(r);if(a)Array.from(a.getChildren()).forEach((h,f)=>l.setAttribute("columnWidth",c[f],h));else{const h=l.createElement("tableColumnGroup");c.forEach(f=>l.appendElement("tableColumn",{columnWidth:f},h)),l.append(h,n)}})}}function aee(s){return t=>t.on("element:colgroup",(e,i,n)=>{const r=i.modelCursor.findAncestor("table"),o=ld(r);if(!o)return;const l=ad(o),a=s.getColumns(r);let c=sJ(o,n.writer);c=Array.from({length:a},(h,f)=>c[f]||"auto"),(c.length!=l.length||c.includes("auto"))&&WR(l,o,wy(c),n.writer)},{priority:"low"})}function cee(){return s=>s.on("insert:table",(t,e,i)=>{const n=i.writer,r=e.item,o=i.mapper.toViewElement(r),l=o.is("element","table")?o:Array.from(o.getChildren()).find(c=>c.is("element","table"));ld(r)?n.addClass("ck-table-resized",l):n.removeClass("ck-table-resized",l)},{priority:"low"})}const WP=Oc("px");class uee extends F{constructor(e){super(e);p(this,"_isResizingActive");p(this,"_resizingData");p(this,"_domEmitter");p(this,"_tableUtilsPlugin");p(this,"_initialMouseEventData",null);this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(Zi()),this._tableUtilsPlugin=e.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(i,n,r)=>{const o=r?"removeClass":"addClass";e.editing.view.change(l=>{for(const a of e.editing.view.document.roots)l[o]("ck-column-resize_disabled",e.editing.view.document.getRoot(a.rootName))})})}static get requires(){return[cd,bi]}static get pluginName(){return"TableColumnResizeEditing"}static get isOfficialPlugin(){return!0}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const e=this.editor,i=e.plugins.get("TableColumnResize");e.plugins.get("TableEditing").registerAdditionalSlot({filter:o=>o.is("element","tableColumnGroup"),positionOffset:0});const r=new lee(e);e.commands.add("resizeTableWidth",r),e.commands.add("resizeColumnWidths",r),this.bind("_isResizingAllowed").to(e,"isReadOnly",i,"isEnabled",r,"isEnabled",(o,l,a)=>!o&&l&&a)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(e){return ld(e)}getTableColumnElements(e){return ad(e)}getTableColumnsWidths(e){return nJ(e)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const i=this.editor.model;i.document.registerPostFixer(o=>{let l=!1;for(const a of GK(i)){const c=this.getColumnGroupElement(a),h=this.getTableColumnElements(c),f=this.getTableColumnsWidths(c);let m=wy(f);m=n(m,a,this),!xl(f,m)&&(WR(h,c,m,o),l=!0)}return l});function n(o,l,a){const c=a._tableUtilsPlugin.getColumns(l);if(c-o.length===0)return o;const f=o.map(w=>Number(w.replace("%",""))),m=r(a.editor.model.document.differ,l);for(const w of m){const O=c-f.length;if(O===0)continue;const v=O>0,k=a._tableUtilsPlugin.getCellLocation(w).column;if(v){const C=YK(l,a.editor),P=eJ(O,C);f.splice(k,0,...P)}else{const C=f.splice(k,Math.abs(O));f[k]+=Eh(C)}}return f.map(w=>w+"%")}function r(o,l){const a=new Set;for(const c of o.getChanges())if(c.type=="insert"&&c.position.nodeAfter&&c.position.nodeAfter.name=="tableCell"&&c.position.nodeAfter.getAncestors().includes(l))a.add(c.position.nodeAfter);else if(c.type=="remove"){const h=c.position.nodeBefore||c.position.nodeAfter;h.name=="tableCell"&&h.getAncestors().includes(l)&&a.add(h)}return a}}_registerConverters(){const i=this.editor.conversion;i.for("upcast").attributeToAttribute({view:{name:/^(figure|table)$/,styles:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:n=>{if(!n.parent.is("element","figure"))return n.getStyle("width")}}}),i.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:n=>({name:"figure",key:"style",value:{width:n}})}),i.elementToElement({model:"tableColumnGroup",view:"colgroup"}),i.elementToElement({model:"tableColumn",view:"col"}),i.for("downcast").add(cee()),i.for("upcast").add(aee(this._tableUtilsPlugin)),i.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:n=>{const r=n.getStyle("width");return!r||!r.endsWith("%")&&!r.endsWith("pt")?"auto":r}}}),i.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),i.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:n=>({key:"style",value:{width:n}})})}_registerResizingListeners(){const e=this.editor.editing.view;e.addObserver(HR),e.document.on("mouseover",this._onMouseOverHandler.bind(this),{priority:"high"}),e.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),e.document.on("mouseout",this._onMouseOutHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(ue.window.document,"mousemove",tc(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(ue.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_recalculateResizerElement(e){const i=this.editor,n=i.editing.view.domConverter,r=n.mapViewToDom(e.findAncestor("table")),o=n.mapViewToDom(e.findAncestor(f=>["td","th"].includes(f.name))),l=new Me(r),a=new Me(o),c=WP(Number((l.top-a.top).toFixed(4))),h=WP(Number((a.bottom-l.bottom).toFixed(4)));i.editing.view.change(f=>{f.setStyle("top",c,e),f.setStyle("bottom",h,e)})}_resetResizerStyles(e){this.editor.editing.view.change(i=>{i.removeStyle("top",e),i.removeStyle("bottom",e)})}_onMouseOverHandler(e,i){const n=i.target;n.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&this._recalculateResizerElement(n)}_onMouseOutHandler(e,i){const n=i.target;n.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&(this._isResizingActive||this._resetResizerStyles(n))}_onMouseDownHandler(e,i){const n=i.target;if(!n.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const r=this.editor,o=r.editing.mapper.toModelElement(n.findAncestor("figure"));r.model.canEditAt(o)&&(i.preventDefault(),e.stop(),this._initialMouseEventData=i)}_startResizingAfterThreshold(){const e=this._initialMouseEventData,{target:i}=e,n=this.editor.editing.mapper.toModelElement(i.findAncestor("figure")),r=i.findAncestor("table"),o=l(n,this._tableUtilsPlugin,this.editor);Array.from(r.getChildren()).find(h=>h.is("element","colgroup"))||this.editor.editing.view.change(h=>{a(h,o,r)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(e,o),this.editor.editing.view.change(h=>c(h,r,this._resizingData));function l(h,f,m){const w=Array(f.getColumns(h)),O=new ft(h);for(const v of O){const k=m.editing.mapper.toViewElement(v.cell),C=m.editing.view.domConverter.mapViewToDom(k),P=iJ(C);(!w[v.column]||P<w[v.column])&&(w[v.column]=dn(P))}return w}function a(h,f,m){const w=h.createContainerElement("colgroup");for(let O=0;O<f.length;O++){const v=h.createEmptyElement("col"),k=`${dn(f[O]/Eh(f)*100)}%`;h.setStyle("width",k,v),h.insert(h.createPositionAt(w,"end"),v)}h.insert(h.createPositionAt(m,0),w)}function c(h,f,m){const w=m.widths.viewFigureWidth/m.widths.viewFigureParentWidth;h.addClass("ck-table-resized",f),h.addClass("ck-table-column-resizer__active",m.elements.viewResizer),h.setStyle("width",`${dn(w*100)}%`,f.findAncestor("figure"))}}_onMouseMoveHandler(e,i){if(this._initialMouseEventData){const Q=this._initialMouseEventData.domEvent;if(Math.abs(i.clientX-Q.clientX)>=jK)this._startResizingAfterThreshold(),this._initialMouseEventData=null;else return}if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:n,flags:{isRightEdge:r,isTableCentered:o,isLtrContent:l},elements:{viewFigure:a,viewLeftColumn:c,viewRightColumn:h,viewResizer:f},widths:{viewFigureParentWidth:m,tableWidth:w,leftColumnWidth:O,rightColumnWidth:v}}=this._resizingData,k=-O+G1,C=r?m-w:v-G1,P=(l?1:-1)*(r&&o?2:1),V=JK((i.clientX-n)*P,Math.min(k,0),Math.max(C,0));V!==0&&(this.editor.editing.view.change(Q=>{const D=dn((O+V)*100/w);if(Q.setStyle("width",`${D}%`,c),r){const q=dn((w+V)*100/m);Q.setStyle("width",`${q}%`,a)}else{const q=dn((v-V)*100/w);Q.setStyle("width",`${q}%`,h)}}),this._recalculateResizerElement(f))}_onMouseUpHandler(){if(this._initialMouseEventData=null,!this._isResizingActive)return;const{viewResizer:e,modelTable:i,viewFigure:n,viewColgroup:r}=this._resizingData.elements,o=this.editor,l=o.editing.view,a=this.getColumnGroupElement(i),c=Array.from(r.getChildren()).filter(C=>C.is("view:element")),h=a?this.getTableColumnsWidths(a):null,f=c.map(C=>C.getStyle("width")),m=!xl(h,f),w=i.getAttribute("tableWidth"),O=n.getStyle("width"),v=w!==O;(m||v)&&(this._isResizingAllowed?o.execute("resizeTableWidth",{table:i,tableWidth:`${dn(O)}%`,columnWidths:f}):l.change(C=>{if(h)for(const P of c)C.setStyle("width",h.shift(),P);else C.remove(r);v&&(w?C.setStyle("width",w,n):C.removeStyle("width",n)),!h&&!w&&C.removeClass("ck-table-resized",[...n.getChildren()].find(P=>P.name==="table"))})),l.change(C=>{C.removeClass("ck-table-column-resizer__active",e)}),l.domConverter.mapViewToDom(e).matches(":hover")||this._resetResizerStyles(e),this._isResizingActive=!1,this._resizingData=null}_getResizingData(e,i){const n=this.editor,r=e.domEvent.clientX,o=e.target,l=o.findAncestor("td")||o.findAncestor("th"),a=n.editing.mapper.toModelElement(l),c=a.findAncestor("table"),h=KK(a,this._tableUtilsPlugin).rightEdge,f=this._tableUtilsPlugin.getColumns(c)-1,m=h===f,w=!c.hasAttribute("tableAlignment"),O=n.locale.contentLanguageDirection!=="rtl",v=l.findAncestor("table"),k=v.findAncestor("figure"),C=[...v.getChildren()].find(R=>R.is("element","colgroup")),P=C.getChild(h),V=m?void 0:C.getChild(h+1),Q=Y1(n.editing.view.domConverter.mapViewToDom(k.parent)),D=Y1(n.editing.view.domConverter.mapViewToDom(k)),q=zR(c,n),$=i[h],_=m?void 0:i[h+1];return{columnPosition:r,flags:{isRightEdge:m,isTableCentered:w,isLtrContent:O},elements:{viewResizer:o,modelTable:c,viewFigure:k,viewColgroup:C,viewLeftColumn:P,viewRightColumn:V},widths:{viewFigureParentWidth:Q,viewFigureWidth:D,tableWidth:q,leftColumnWidth:$,rightColumnWidth:_}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(e=>{e.on("insert:tableCell",(i,n,r)=>{const o=n.item,l=r.mapper.toViewElement(o),a=r.writer;a.insert(a.createPositionAt(l,"end"),a.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}class hee extends F{static get requires(){return[uee,r4]}static get pluginName(){return"TableColumnResize"}static get isOfficialPlugin(){return!0}}class Ul extends Le{constructor(e,i,n){super(e);p(this,"attributeName");p(this,"_defaultValue");p(this,"_defaultContentTableValue");p(this,"_defaultLayoutTableValue");this.attributeName=i,this._defaultContentTableValue=n,this._defaultLayoutTableValue=i==="tableBorderStyle"?"none":void 0}refresh(){const i=this.editor.model.document.selection,n=ko(i);this._defaultValue=!n||n.getAttribute("tableType")!=="layout"?this._defaultContentTableValue:this._defaultLayoutTableValue,this.isEnabled=!!n,this.value=this._getValue(n)}execute(e={}){const i=this.editor.model,n=i.document.selection,{value:r,batch:o}=e,l=ko(n),a=this._getValueToSet(r);i.enqueueChange(o,c=>{a?c.setAttribute(this.attributeName,a,l):c.removeAttribute(this.attributeName,l)})}_getValue(e){if(!e)return;const i=e.getAttribute(this.attributeName);if(i!==this._defaultValue)return i}_getValueToSet(e){if(e!==this._defaultValue)return e}}class dee extends Ul{constructor(t,e){super(t,"tableBackgroundColor",e)}}class fee extends Ul{constructor(t,e){super(t,"tableBorderColor",e)}_getValue(t){if(!t)return;const e=zl(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class mee extends Ul{constructor(t,e){super(t,"tableBorderStyle",e)}_getValue(t){if(!t)return;const e=zl(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class gee extends Ul{constructor(t,e){super(t,"tableBorderWidth",e)}_getValue(t){if(!t)return;const e=zl(t.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(t){const e=Wl(t,"px");if(e!==this._defaultValue)return e}}class pee extends Ul{constructor(t,e){super(t,"tableWidth",e)}_getValueToSet(t){if(t=Wl(t,"px"),t!==this._defaultValue)return t}}class wee extends Ul{constructor(t,e){super(t,"tableHeight",e)}_getValueToSet(t){if(t=Wl(t,"px"),t!==this._defaultValue)return t}}class bee extends Ul{constructor(t,e){super(t,"tableAlignment",e)}}const Oee=/^(left|center|right)$/,xee=/^(left|none|right)$/;class yee extends F{static get pluginName(){return"TablePropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[cd]}init(){const t=this.editor,e=t.model.schema,i=t.conversion;t.config.define("table.tableProperties.defaultProperties",{});const n=s4(t.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});t.data.addStyleProcessorRules(w6),vee(e,i,{color:n.borderColor,style:n.borderStyle,width:n.borderWidth}),t.commands.add("tableBorderColor",new fee(t,n.borderColor)),t.commands.add("tableBorderStyle",new mee(t,n.borderStyle)),t.commands.add("tableBorderWidth",new gee(t,n.borderWidth)),_ee(e,i,n.alignment),t.commands.add("tableAlignment",new bee(t,n.alignment)),UP(e,i,{modelAttribute:"tableWidth",styleName:"width",defaultValue:n.width}),t.commands.add("tableWidth",new pee(t,n.width)),UP(e,i,{modelAttribute:"tableHeight",styleName:"height",defaultValue:n.height}),t.commands.add("tableHeight",new wee(t,n.height)),t.data.addStyleProcessorRules(p6),kee(e,i,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:n.backgroundColor}),t.commands.add("tableBackgroundColor",new dee(t,n.backgroundColor))}}function vee(s,t,e){const i={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};s.extend("table",{allowAttributes:Object.values(i)}),H1(t,"table",i,e),Rm(t,{modelAttribute:i.color,styleName:"border-color"}),Rm(t,{modelAttribute:i.style,styleName:"border-style"}),Rm(t,{modelAttribute:i.width,styleName:"border-width"})}function _ee(s,t,e){s.extend("table",{allowAttributes:["tableAlignment"]}),t.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment",values:["left","center","right"]},view:{left:{key:"style",value:{float:"left"}},right:{key:"style",value:{float:"right"}},center:(i,n,r)=>({key:"style",value:r.item.getAttribute("tableType")!=="layout"?{float:"none"}:{"margin-left":"auto","margin-right":"auto"}})},converterPriority:"high"}),t.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:xee}},model:{key:"tableAlignment",value:(i,n,r)=>{const o=_o(e,"",r);let l=i.getStyle("float");return l==="none"&&(l="center"),l===o?null:l}}}).attributeToAttribute({view:{name:/^(table|figure)$/,styles:{"margin-left":"auto","margin-right":"auto"}},model:{key:"tableAlignment",value:(i,n,r)=>{const o=_o(e,"",r),l="center";return l===o?null:l}}}).attributeToAttribute({view:{attributes:{align:Oee}},model:{name:"table",key:"tableAlignment",value:(i,n,r)=>{const o=_o(e,"",r),l=i.getAttribute("align");return l===o?null:l}}})}function kee(s,t,e){const{modelAttribute:i}=e;s.extend("table",{allowAttributes:[i]}),gy(t,{viewElement:"table",...e}),Rm(t,e)}function UP(s,t,e){const{modelAttribute:i}=e;s.extend("table",{allowAttributes:[i]}),gy(t,{viewElement:/^(table|figure)$/,shouldUpcast:n=>!(n.name=="table"&&n.parent.name=="figure"),...e}),th(t,{modelElement:"table",...e})}class See extends he{constructor(e,i){super(e);p(this,"options");p(this,"focusTracker");p(this,"keystrokes");p(this,"children");p(this,"borderStyleDropdown");p(this,"borderWidthInput");p(this,"borderColorInput");p(this,"backgroundInput");p(this,"widthInput");p(this,"heightInput");p(this,"alignmentToolbar");p(this,"saveButtonView");p(this,"cancelButtonView");p(this,"_focusables");p(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=i;const{borderStyleDropdown:n,borderWidthInput:r,borderColorInput:o,borderRowLabel:l}=this._createBorderFields(),{backgroundRowLabel:a,backgroundInput:c}=this._createBackgroundFields(),{widthInput:h,operatorLabel:f,heightInput:m,dimensionsLabel:w}=this._createDimensionFields(),{alignmentToolbar:O,alignmentLabel:v}=this._createAlignmentFields();this.focusTracker=new ht,this.keystrokes=new bt,this.children=this.createCollection(),this.borderStyleDropdown=n,this.borderWidthInput=r,this.borderColorInput=o,this.backgroundInput=c,this.widthInput=h,this.heightInput=m,this.alignmentToolbar=O;const{saveButtonView:k,cancelButtonView:C}=this._createActionButtons();this.saveButtonView=k,this.cancelButtonView=C,this._focusables=new hi,this._focusCycler=new Kt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new Nr(e,{label:this.t("Table properties")})),this.children.add(new Ti(e,{labelView:l,children:[l,n,o,r],class:"ck-table-form__border-row"})),this.children.add(new Ti(e,{labelView:a,children:[a,c],class:"ck-table-form__background-row"})),this.children.add(new Ti(e,{children:[new Ti(e,{labelView:w,children:[w,h,f,m],class:"ck-table-form__dimensions-row"}),new Ti(e,{labelView:v,children:[v,O],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new Ti(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Bl({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableProperties,i={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},n=Eg({colorConfig:this.options.borderColors,columns:5,defaultColorValue:i.color,colorPickerConfig:this.options.colorPickerConfig}),r=this.locale,o=this.t,l=o("Style"),a=new Jn(r);a.text=o("Border");const c=Oy(o),h=new jt(r,sI);h.set({label:l,class:"ck-table-form__border-style"}),h.fieldView.buttonView.set({ariaLabel:l,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:l}),h.fieldView.buttonView.bind("label").to(this,"borderStyle",w=>c[w||"none"]),h.fieldView.on("execute",w=>{this.borderStyle=w.source._borderStyleValue}),h.bind("isEmpty").to(this,"borderStyle",w=>!w),Ql(h.fieldView,KR(this,i.style),{role:"menu",ariaLabel:l});const f=new jt(r,wn);f.set({label:o("Width"),class:"ck-table-form__border-width"}),f.fieldView.bind("value").to(this,"borderWidth"),f.bind("isEnabled").to(this,"borderStyle",Yf),f.fieldView.on("input",()=>{this.borderWidth=f.fieldView.element.value});const m=new jt(r,n);return m.set({label:o("Color"),class:"ck-table-form__border-color"}),m.fieldView.bind("value").to(this,"borderColor"),m.bind("isEnabled").to(this,"borderStyle",Yf),m.fieldView.on("input",()=>{this.borderColor=m.fieldView.value}),this.on("change:borderStyle",(w,O,v,k)=>{Yf(v)||(this.borderColor="",this.borderWidth=""),Yf(k)||(this.borderColor=i.color,this.borderWidth=i.width)}),{borderRowLabel:a,borderStyleDropdown:h,borderColorInput:m,borderWidthInput:f}}_createBackgroundFields(){const e=this.locale,i=this.t,n=new Jn(e);n.text=i("Background");const r=Eg({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new jt(e,r);return o.set({label:i("Color"),class:"ck-table-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:n,backgroundInput:o}}_createDimensionFields(){const e=this.locale,i=this.t,n=new Jn(e);n.text=i("Dimensions");const r=new jt(e,wn);r.set({label:i("Width"),class:"ck-table-form__dimensions-row__width"}),r.fieldView.bind("value").to(this,"width"),r.fieldView.on("input",()=>{this.width=r.fieldView.element.value});const o=new he(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const l=new jt(e,wn);return l.set({label:i("Height"),class:"ck-table-form__dimensions-row__height"}),l.fieldView.bind("value").to(this,"height"),l.fieldView.on("input",()=>{this.height=l.fieldView.element.value}),{dimensionsLabel:n,widthInput:r,operatorLabel:o,heightInput:l}}_createAlignmentFields(){const e=this.locale,i=this.t,n=new Jn(e);n.text=i("Alignment");const r=new vl(e);return r.set({role:"radiogroup",isCompact:!0,ariaLabel:i("Table alignment toolbar")}),tO({view:this,icons:{left:Nx,center:cg,right:ug},toolbar:r,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:n,alignmentToolbar:r}}_createActionButtons(){const e=this.locale,i=this.t,n=new ve(e),r=new ve(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return n.set({label:i("Save"),icon:Jh,class:"ck-button-save",type:"submit",withText:!0}),n.bind("isEnabled").toMany(o,"errorText",(...l)=>l.every(a=>!a)),r.set({label:i("Cancel"),icon:xc,class:"ck-button-cancel",withText:!0}),r.delegate("execute").to(this,"cancel"),{saveButtonView:n,cancelButtonView:r}}get _alignmentLabels(){const e=this.locale,i=this.t,n=i("Align table to the left"),r=i("Center table"),o=i("Align table to the right");return e.uiLanguageDirection==="rtl"?{right:o,center:r,left:n}:{left:n,center:r,right:o}}}function Yf(s){return s!=="none"}const Cee=500,ZP={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class Pee extends F{constructor(e){super(e);p(this,"_defaultContentTableProperties");p(this,"_defaultLayoutTableProperties");p(this,"_balloon");p(this,"view",null);p(this,"_viewWithContentTableDefaults",null);p(this,"_viewWithLayoutTableDefaults",null);p(this,"_undoStepBatch");p(this,"_isReady");e.config.define("table.tableProperties",{borderColors:Tg,backgroundColors:Tg})}static get requires(){return[hs]}static get pluginName(){return"TablePropertiesUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;this._defaultContentTableProperties=s4(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._defaultLayoutTableProperties=vp(),this._balloon=e.plugins.get(hs),e.ui.componentFactory.add("tableProperties",()=>this._createTablePropertiesButton())}_createTablePropertiesButton(){const e=this.editor,i=e.t,n=new ve(e.locale);n.set({label:i("Table properties"),icon:JF,tooltip:!0}),this.listenTo(n,"execute",()=>this._showView());const r=Object.values(ZP).map(o=>e.commands.get(o));return n.bind("isEnabled").toMany(r,"isEnabled",(...o)=>o.some(l=>l)),n}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(e){const i=this.editor,n=i.config.get("table.tableProperties"),r=mg(n.borderColors),o=fg(i.locale,r),l=mg(n.backgroundColors),a=fg(i.locale,l),c=n.colorPicker!==!1,h=new See(i.locale,{borderColors:o,backgroundColors:a,defaultTableProperties:e,colorPickerConfig:c?n.colorPicker||{}:!1}),f=i.t;h.render(),this.listenTo(h,"submit",()=>{this._hideView()}),this.listenTo(h,"cancel",()=>{this._undoStepBatch.operations.length&&i.execute("undo",this._undoStepBatch),this._hideView()}),h.keystrokes.set("Esc",(O,v)=>{this._hideView(),v()}),Dr({emitter:h,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const m=jR(f),w=GR(f);return h.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),h.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:h.borderColorInput,commandName:"tableBorderColor",errorText:m,validator:Pg})),h.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:h.borderWidthInput,commandName:"tableBorderWidth",errorText:w,validator:YR})),h.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:h.backgroundInput,commandName:"tableBackgroundColor",errorText:m,validator:Pg})),h.on("change:width",this._getValidatedPropertyChangeCallback({viewField:h.widthInput,commandName:"tableWidth",errorText:w,validator:ih})),h.on("change:height",this._getValidatedPropertyChangeCallback({viewField:h.heightInput,commandName:"tableHeight",errorText:w,validator:ih})),h.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),h}_fillViewFormFromCommandValues(){const e=this.editor.commands,i=e.get("tableBorderStyle");Object.entries(ZP).map(([n,r])=>{const o=n,l=this.view===this._viewWithContentTableDefaults?this._defaultContentTableProperties[o]||"":this._defaultLayoutTableProperties[o]||"";return[o,e.get(r).value||l]}).forEach(([n,r])=>{(n==="borderColor"||n==="borderWidth")&&i.value==="none"||this.view.set(n,r)}),this._isReady=!0}_showView(){const e=this.editor,i=Cg(e.editing.view.document.selection),n=i&&e.editing.mapper.toModelElement(i),r=!n||n.getAttribute("tableType")!=="layout";r&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableProperties):!r&&!this._viewWithLayoutTableDefaults&&(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableProperties)),this.view=r?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:t4(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,i=e.editing.view.document;Cg(i.selection)?this._isViewVisible&&e4(e,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(i,n,r)=>{this._isReady&&this.editor.execute(e,{value:r,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:i,viewField:n,validator:r,errorText:o}=e,l=as(()=>{n.errorText=o},Cee);return(a,c,h)=>{l.cancel(),this._isReady&&(r(h)?(this.editor.execute(i,{value:h,batch:this._undoStepBatch}),n.errorText=null):l())}}}class Tee extends F{static get pluginName(){return"TableProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[yee,Pee]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Eee(s){s.document.registerPostFixer(t=>Aee(t,s))}function Aee(s,t){const e=t.document.differ.getChanges();let i=!1;for(const n of e){if(n.type!="insert")continue;const r=n.position.parent;if(r.is("element","table")||n.name=="table"){const o=n.name=="table"?n.position.nodeAfter:r,l=Array.from(o.getChildren()).filter(c=>c.is("element","caption")),a=l.shift();if(!a)continue;for(const c of l)s.move(s.createRangeIn(c),a,"end"),s.remove(c);a.nextSibling&&(s.move(s.createRangeOn(a),o,"end"),i=!0),i=!!l.length||i}}return i}function HP(s){return!!s&&s.is("element","table")}function nO(s){for(const t of s.getChildren())if(t.is("element","caption"))return t;return null}function Iee(s){const t=ko(s);return t?nO(t):null}function Ree(s){const t=s.parent;return s.name=="figcaption"&&t&&t.is("element","figure")&&t.hasClass("table")?{name:!0}:s.name=="caption"&&t&&t.is("element","table")?{name:!0}:null}class Vee extends Le{refresh(){const t=this.editor,e=ko(t.model.document.selection);this.isEnabled=!!e&&t.model.schema.checkChild(e,"caption"),this.isEnabled?this.value=!!nO(e):this.value=!1}execute({focusCaptionOnShow:t=!1}={}){this.editor.model.change(e=>{this.value?this._hideTableCaption(e):this._showTableCaption(e,t)})}_showTableCaption(t,e){const i=this.editor.model,n=ko(i.document.selection),l=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(n)||t.createElement("caption");i.insertContent(l,n,"end"),e&&t.setSelection(l,"in")}_hideTableCaption(t){const e=this.editor.model,i=ko(e.document.selection),n=this.editor.plugins.get("TableCaptionEditing"),r=nO(i);n._saveCaption(i,r),e.deleteContent(t.createSelection(r,"on"))}}class Mee extends F{constructor(e){super(e);p(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get pluginName(){return"TableCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.model.schema,n=e.editing.view,r=e.t;i.isRegistered("caption")?i.extend("caption",{allowIn:"table"}):i.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleTableCaption",new Vee(this.editor)),e.conversion.for("upcast").elementToElement({view:Ree,model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(o,{writer:l})=>HP(o.parent)?l.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(o,{writer:l})=>{if(!HP(o.parent))return null;const a=l.createEditableElement("figcaption");return l.setCustomProperty("tableCaption",!0,a),a.placeholder=r("Enter table caption"),Sx({view:n,element:a,keepOnFocus:!0}),Kx(a,l)}}),Eee(e.model)}_getSavedCaption(e){const i=this._savedCaptionsMap.get(e);return i?Vt.fromJSON(i):null}_saveCaption(e,i){this._savedCaptionsMap.set(e,i.toJSON())}}class Lee extends F{static get pluginName(){return"TableCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,i=t.t;t.ui.componentFactory.add("toggleTableCaption",n=>{const r=t.commands.get("toggleTableCaption"),o=new ve(n);return o.set({icon:S6,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),o.bind("label").to(r,"value",l=>i(l?"Toggle caption off":"Toggle caption on")),this.listenTo(o,"execute",()=>{if(t.execute("toggleTableCaption",{focusCaptionOnShow:!0}),r.value){const l=Iee(t.model.document.selection),a=t.editing.mapper.toViewElement(l);if(!a)return;e.scrollToTheSelection(),e.change(c=>{c.addClass("table__caption_highlighted",a)})}t.editing.view.focus()}),o})}}class Bee extends F{static get pluginName(){return"TableCaption"}static get isOfficialPlugin(){return!0}static get requires(){return[Mee,Lee]}}const $ee=/<meta\s*name="?generator"?\s*content="?microsoft\s*excel\s*\d+"?\/?>/i;function o4(s){return $ee.test(s)}const Qee=/^(?<tagName>(?!\.)[\w-]+)?(\.(?<className>[\w-]+))?$/i;function Dee(s,t){const e=new Map;for(const[i,n]of t){if(!i.tagName&&!i.className)continue;const r=!i.tagName||s.name===i.tagName,o=!i.className||s.hasClass(i.className);r&&o&&e.set(i,n)}return e}function Nee(s){const t={};for(let e=0;e<s.length;e++){const i=s[e],n=s.getPropertyValue(i);n!=="initial"&&(t[i]=n)}return t}function Fee(s){const t=s.split(",").map(i=>i.trim()),e=[];for(const i of t){const n=Qee.exec(i);n&&e.push(n.groups)}return e}function zee(s){const t={};for(const e of s)Object.assign(t,e);return t}let Wee=class extends fy{execute(t){const{body:e,styles:i}=t._parsedData,n=new zn(e.document),r=n.createRangeIn(e),o=function(a){const c={};for(const h of a)for(const f of h.cssRules)if(f instanceof CSSStyleRule){const m=Nee(f.style);c[f.selectorText]=Object.assign({},c[f.selectorText]||{},m)}return c}(i),l=function(a){const c=new Map;for(const h in a){const f=Fee(h),m=a[h];for(const w of f)c.set(w,m)}return c}(o);for(const a of r){if(a.type!=="elementStart")continue;const c=Dee(a.item,l);if(c.size){const h=zee(Array.from(c.values()));for(const f in h){const m=a.item;m.hasStyle(f)||n.setStyle(f,h[f],m)}}}t.content=e}isActive(t){return super.isActive(t)||o4(t)}},Uee=class extends F{static get pluginName(){return"PasteFromOfficeEnhancedInliner"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return["PasteFromOffice"]}init(){const t=this.editor,e=t.plugins.get("ClipboardPipeline"),i=t.editing.view.document,n=new Wee(i);e.on("inputTransformation",(r,o)=>{const l=o.dataTransfer.getData("text/html");n.isActive(l)&&(o._parsedData||(o._parsedData=my(l,i.stylesProcessor)),n.execute(o))},{priority:Ki.get("high")+11})}afterInit(){(async function(t){const e=_([53,48,112,99,103,54,84,66,121,82,118,116,57,72,97,88,108,85,86,50,119,106,74,98,102,107,56,55,69,81,109,73,87,105,77,113,104,100,111,65,89,117,83,115,90,67,114,79,68,75,70,51,49,122,71,78,52,76,80,101,110,120]),i=1792287792,n=1792233368^i,r=window[_([68,97,116,101])][_([110,111,119])](),o=t[_([101,100,105,116,111,114])],l=new window[_([80,114,111,109,105,115,101])](R=>{o[_([111,110,99,101])](_([114,101,97,100,121]),R)}),a={[_([107,116,121])]:_([69,67]),[_([117,115,101])]:_([115,105,103]),[_([99,114,118])]:_([80,45,50,53,54]),[_([120])]:_([105,67,106,79,67,118,68,70,73,54,108,81,72,72,84,49,56,106,86,119,82,102,107,102,72,81,50,97,95,77,121,109,84,51,53,76,81,86,111,70,83,65,73]),[_([121])]:_([107,88,73,121,74,52,101,118,116,67,69,70,82,109,120,75,83,85,112,75,57,102,68,87,52,53,57,118,88,79,118,86,114,104,102,54,117,81,65,101,79,105,111]),[_([97,108,103])]:_([69,83,50,53,54])},c=o[_([99,111,110,102,105,103])][_([103,101,116])](_([108,105,99,101,110,115,101,75,101,121]));async function h(){let R,U=null,Y=null;try{return c==_([71,80,76])?_([78,111,116,65,108,108,111,119,101,100]):(R=k(),R?(R[_([117,115,97,103,101,69,110,100,112,111,105,110,116])]&&(Y=f(R[_([117,115,97,103,101,69,110,100,112,111,105,110,116])],R[_([106,116,105])])),await C()?j()?X()?_([69,120,112,105,114,101,100]):oe()?(R[_([108,105,99,101,110,115,101,84,121,112,101])]==_([101,118,97,108,117,97,116,105,111,110])&&(U=m(_([69,118,97,108,117,97,116,105,111,110,76,105,109,105,116]))),R[_([108,105,99,101,110,115,101,84,121,112,101])]==_([116,114,105,97,108])&&(U=m(_([84,114,105,97,108,76,105,109,105,116]))),await xe()):_([68,111,109,97,105,110,76,105,109,105,116]):_([78,111,116,65,108,108,111,119,101,100]):_([73,110,118,97,108,105,100])):_([73,110,118,97,108,105,100]))}catch{return _([73,110,118,97,108,105,100])}function X(){const be=[_([101,118,97,108,117,97,116,105,111,110]),_([116,114,105,97,108])][_([105,110,99,108,117,100,101,115])](R[_([108,105,99,101,110,115,101,84,121,112,101])])?r/1e3:3600*n;return R[_([101,120,112])]<be}function j(){const be=R[_([102,101,97,116,117,114,101,115])];return!!be&&(!!be[_([105,110,99,108,117,100,101,115])](_([42]))||!!be[_([105,110,99,108,117,100,101,115])](_([80,79,69]))||!!be[_([105,110,99,108,117,100,101,115])](_([80,80])))}function oe(){const be=R[_([108,105,99,101,110,115,101,100,72,111,115,116,115])];if(!be||be[_([108,101,110,103,116,104])]==0)return!0;const{hostname:Se}=new URL(window[_([108,111,99,97,116,105,111,110])].href);if(be[_([105,110,99,108,117,100,101,115])](Se))return!0;const H=Se[_([115,112,108,105,116])](_([46]));return be[_([102,105,108,116,101,114])](ee=>ee[_([105,110,99,108,117,100,101,115])](_([42])))[_([109,97,112])](ee=>ee[_([115,112,108,105,116])](_([46])))[_([102,105,108,116,101,114])](ee=>ee[_([108,101,110,103,116,104])]<=H[_([108,101,110,103,116,104])])[_([109,97,112])](ee=>Array(H[_([108,101,110,103,116,104])]-ee[_([108,101,110,103,116,104])])[_([102,105,108,108])](ee[0]===_([42])?_([42]):"")[_([99,111,110,99,97,116])](ee))[_([115,111,109,101])](ee=>H[_([101,118,101,114,121])]((ne,M)=>ee[M]===ne||ee[M]===_([42])))}function xe(){return U&&Y?new window[_([80,114,111,109,105,115,101])]((be,Se)=>{U[_([116,104,101,110])](be,Se),Y[_([116,104,101,110])](H=>{H!=_([86,97,108,105,100])&&be(H)},Se)}):U||Y||_([86,97,108,105,100])}}function f(R,U){return new window[_([80,114,111,109,105,115,101])](j=>{if(Y())return j(_([86,97,108,105,100]));X(),o[_([100,101,99,111,114,97,116,101])](_([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]));let oe=!1;const xe=ii();function be(H){return!!H&&(typeof H===_([111,98,106,101,99,116])||typeof H===_([102,117,110,99,116,105,111,110]))&&typeof H[_([116,104,101,110])]===_([102,117,110,99,116,105,111,110])&&typeof H[_([99,97,116,99,104])]===_([102,117,110,99,116,105,111,110])}function Se(H){J(H)[_([116,104,101,110])](fe=>!fe||fe[_([115,116,97,116,117,115])]!=_([111,107])?_([85,115,97,103,101,76,105,109,105,116]):D(Q(xe+U))!=fe[_([118,101,114,105,102,105,99,97,116,105,111,110])]?_([85,115,97,103,101,76,105,109,105,116]):_([86,97,108,105,100]))[_([116,104,101,110])](fe=>(ne(),fe),()=>{const fe=M();return fe==null?(ne(),_([86,97,108,105,100])):_(r-fe>(1322819632^i)?[85,115,97,103,101,76,105,109,105,116]:[86,97,108,105,100])})[_([116,104,101,110])](j)[_([99,97,116,99,104])](()=>{j(_([85,115,97,103,101,76,105,109,105,116]))});const ee=1793247920^i;function ne(){const fe=_([108,108,99,116,45])+D(Q(R)),W=q(D(window[_([77,97,116,104])][_([99,101,105,108])](r/ee)));window[_([108,111,99,97,108,83,116,111,114,97,103,101])][_([115,101,116,73,116,101,109])](fe,W)}function M(){const fe=_([108,108,99,116,45])+D(Q(R)),W=window[_([108,111,99,97,108,83,116,111,114,97,103,101])][_([103,101,116,73,116,101,109])](fe);return W?window[_([112,97,114,115,101,73,110,116])](q(W),16)*ee:null}function J(fe){return new window[_([80,114,111,109,105,115,101])]((W,B)=>{fe[_([116,104,101,110])](W,B),window[_([115,101,116,84,105,109,101,111,117,116])](B,1792405744^i)})}}o[_([111,110])](_([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),(H,ee)=>{if(ee[0]!=R)return j(_([85,115,97,103,101,76,105,109,105,116]));ee[1]={...ee[1],[_([114,101,113,117,101,115,116,73,100])]:xe}},{[_([112,114,105,111,114,105,116,121])]:_([104,105,103,104])}),o[_([111,110])](_([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),H=>{be(H[_([114,101,116,117,114,110])])&&(oe=!0,Se(H[_([114,101,116,117,114,110])]))},{[_([112,114,105,111,114,105,116,121])]:_([108,111,119])}),l[_([116,104,101,110])](()=>{oe||j(_([85,115,97,103,101,76,105,109,105,116]))})});function Y(){return o[_([101,100,105,116,105,110,103])][_([118,105,101,119])][_([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]==_([97,117,116,111])}function X(){o[_([101,100,105,116,105,110,103])][_([118,105,101,119])][_([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]=_([97,117,116,111])}}function m(R){const U=[new window[_([80,114,111,109,105,115,101])](Y=>setTimeout(Y,1792875260^i)),l[_([116,104,101,110])](()=>new window[_([80,114,111,109,105,115,101])](Y=>{let X=0;o[_([109,111,100,101,108])][_([111,110])](_([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),(j,oe)=>{oe[0][_([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&X++,X==(1792288200^i)&&(Y(),j[_([111,102,102])]())})}))];return window[_([80,114,111,109,105,115,101])][_([114,97,99,101])](U)[_([116,104,101,110])](()=>R)}async function w(){await l,o[_([109,111,100,101,108])][_([99,104,97,110,103,101])]=$,o[_([109,111,100,101,108])][_([101,110,113,117,101,117,101,67,104,97,110,103,101])]=$,o[_([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](_([109,111,100,101,108]))}function O(R){const U=v();o[U]=_([112,97,115,116,101,70,114,111,109,79,102,102,105,99,101,69,110,104,97,110,99,101,100,76,105,99,101,110,115,101,75,101,121])+R,R!=_([86,97,108,105,100])&&w()}function v(){const R=window[_([83,116,114,105,110,103])](window[_([112,101,114,102,111,114,109,97,110,99,101])][_([110,111,119])]())[_([114,101,112,108,97,99,101])](_([46]),"");let U=_([112]);for(let Y=0;Y<R[_([108,101,110,103,116,104])];Y+=2){let X=window[_([112,97,114,115,101,73,110,116])](R[_([115,117,98,115,116,114,105,110,103])](Y,Y+2));X>=e[_([108,101,110,103,116,104])]&&(X-=e[_([108,101,110,103,116,104])]),U+=e[X]}return U}function k(){const R=c[_([115,112,108,105,116])](_([46]));if(R[_([108,101,110,103,116,104])]!=3)return null;return U(R[1]);function U(Y){const X=P(Y);return X&&j()?X:null;function j(){const oe=X[_([106,116,105])],xe=window[_([112,97,114,115,101,73,110,116])](oe[_([115,117,98,115,116,114,105,110,103])](oe[_([108,101,110,103,116,104])]-8),16),be={...X,[_([106,116,105])]:oe[_([115,117,98,115,116,114,105,110,103])](0,oe[_([108,101,110,103,116,104])]-8)};return delete be[_([118,99])],Q(be)==xe}}}async function C(){let R=!0;try{const X=c[_([115,112,108,105,116])](_([46])),[j,oe,xe]=X;return U(j),await Y(j,oe,xe),R}catch{return!1}function U(X){const j=P(X);j&&j[_([97,108,103])]==_([69,83,50,53,54])||(R=!1)}async function Y(X,j,oe){const xe=window[_([85,105,110,116,56,65,114,114,97,121])][_([102,114,111,109])](V(oe),ee=>ee[_([99,104,97,114,67,111,100,101,65,116])](0)),be=new window[_([84,101,120,116,69,110,99,111,100,101,114])]()[_([101,110,99,111,100,101])](X+_([46])+j),Se=window[_([99,114,121,112,116,111])][_([115,117,98,116,108,101])];if(!Se)return;const H=await Se[_([105,109,112,111,114,116,75,101,121])](_([106,119,107]),a,{[_([110,97,109,101])]:_([69,67,68,83,65]),[_([110,97,109,101,100,67,117,114,118,101])]:_([80,45,50,53,54])},!1,[_([118,101,114,105,102,121])]);await Se[_([118,101,114,105,102,121])]({[_([110,97,109,101])]:_([69,67,68,83,65]),[_([104,97,115,104])]:{[_([110,97,109,101])]:_([83,72,65,45,50,53,54])}},H,xe,be)||(R=!1)}}function P(R){return R[_([115,116,97,114,116,115,87,105,116,104])](_([101,121]))?JSON[_([112,97,114,115,101])](V(R)):null}function V(R){return window[_([97,116,111,98])](R[_([114,101,112,108,97,99,101])](/-/g,_([43]))[_([114,101,112,108,97,99,101])](/_/g,_([47])))}function Q(R){let U=5381;function Y(j){for(let oe=0;oe<j[_([108,101,110,103,116,104])];oe++){const xe=j[_([99,104,97,114,67,111,100,101,65,116])](oe);U=(U<<5)+U+xe,U&=U}}function X(j){Array[_([105,115,65,114,114,97,121])](j)?j[_([102,111,114,69,97,99,104])](X):j&&typeof j==_([111,98,106,101,99,116])?Object[_([101,110,116,114,105,101,115])](j)[_([115,111,114,116])]()[_([102,111,114,69,97,99,104])](([oe,xe])=>{Y(oe),X(xe)}):Y(window[_([83,116,114,105,110,103])](j))}return X(R),U>>>0}function D(R){return R[_([116,111,83,116,114,105,110,103])](16)[_([112,97,100,83,116,97,114,116])](8,_([48]))}function q(R){return R[_([115,112,108,105,116])]("")[_([114,101,118,101,114,115,101])]()[_([106,111,105,110])]("")}function $(){}function _(R){return R.map(U=>String.fromCharCode(U)).join("")}O(await h())})(this)}};const Zee=["color","font-family","font-size","text-decoration","text-decoration-line","font-weight","font-style","vertical-align"],Hee=["color","font-family","font-size"],qP={"font-style":[["italic","i"]],"font-weight":[["medium","strong"],["bold","strong"],["bolder","strong"],[s=>Number(s)>=600,"strong"]],"text-decoration":[["underline","u"],["line-through","s"]],"text-decoration-line":[["underline","u"],["line-through","s"]],"vertical-align":[["sub","sub"],["super","sup"]]};function qee(s){return Zee.includes(s)}function Xee(s){return Array.from(s.getStyleNames()).filter(qee)}function jee(s,t,e){const{spanStyles:i,stylesToBeHtmlElements:n}=function(r,o){const l={},a={};return o.forEach(c=>{const h=r.getStyle(c);if(h){if(function(f){return Hee.includes(f)}(c))l[c]=h;else if(function(f){return f in qP}(c)){const f=h.split(" ");qP[c].forEach(([m,w])=>{for(const O of f)(typeof m=="function"&&m(O)||m===O)&&(a[c]=[...a[c]||[],[m,w]])})}}}),{spanStyles:l,stylesToBeHtmlElements:a}}(s,e);(function(r,o,l){for(const a in l)l[a].forEach(([,c])=>{const h=o.createElement(c,[],r.getChildren());o.insertChild(0,h,r)}),o.removeStyle(a,r)})(s,t,n),function(r,o,l){if(!Object.keys(l).length)return;const a=o.createElement("span",[],r.getChildren());o.setStyle(l,a),o.insertChild(0,a,r),o.removeStyle(Object.keys(l),r)}(s,t,i)}let Gee=class extends fy{execute(t){const{body:e}=t._parsedData,i=new zn(e.document),n=i.createRangeIn(e),r=new Yh(i.document.stylesProcessor),o=[...new Kh(r).blockElements,"font"],l=n.getItems();for(const a of l)a.is("element")&&o.includes(a.name)&&jee(a,i,Xee(a));t.content=e}isActive(t){return super.isActive(t)||o4(t)}},Yee=class extends F{constructor(){super(...arguments);p(this,"licenseKey");p(this,"_licenseKeyCheckInterval")}static get pluginName(){return"PasteFromOfficeEnhancedPropagator"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return["PasteFromOffice"]}init(){const e=this.editor,i=e.plugins.get("ClipboardPipeline"),n=e.editing.view.document,r=new Gee(n);i.on("inputTransformation",(l,a)=>{const c=a.dataTransfer.getData("text/html");r.isActive(c)&&(a._parsedData||(a._parsedData=my(c,n.stylesProcessor)),r.execute(a))},{priority:Ki.get("high")+10}),this.licenseKey=this.editor.config.get("licenseKey");const o=this.editor;this._licenseKeyCheckInterval=setInterval(()=>{let l;for(const a in o){const c=a,h=o[c];if(h=="pasteFromOfficeEnhancedLicenseKeyValid"||h=="pasteFromOfficeEnhancedLicenseKeyInvalid"||h=="pasteFromOfficeEnhancedLicenseKeyExpired"||h=="pasteFromOfficeEnhancedLicenseKeyDomainLimit"||h=="pasteFromOfficeEnhancedLicenseKeyNotAllowed"||h=="pasteFromOfficeEnhancedLicenseKeyEvaluationLimit"||h=="pasteFromOfficeEnhancedLicenseKeyTrialLimit"||h=="pasteFromOfficeEnhancedLicenseKeyUsageLimit"){delete o[c],l=h,clearInterval(this._licenseKeyCheckInterval),this._licenseKeyCheckInterval=void 0;break}}l=="pasteFromOfficeEnhancedLicenseKeyInvalid"&&o._showLicenseError("invalid"),l=="pasteFromOfficeEnhancedLicenseKeyExpired"&&o._showLicenseError("expired"),l=="pasteFromOfficeEnhancedLicenseKeyDomainLimit"&&o._showLicenseError("domainLimit"),l=="pasteFromOfficeEnhancedLicenseKeyNotAllowed"&&o._showLicenseError("featureNotAllowed","PasteFromOfficeEnhanced"),l=="pasteFromOfficeEnhancedLicenseKeyEvaluationLimit"&&o._showLicenseError("evaluationLimit"),l=="pasteFromOfficeEnhancedLicenseKeyTrialLimit"&&o._showLicenseError("trialLimit"),l=="pasteFromOfficeEnhancedLicenseKeyUsageLimit"&&o._showLicenseError("usageLimit")},1e3)}destroy(){super.destroy(),this._licenseKeyCheckInterval&&clearInterval(this._licenseKeyCheckInterval)}},Kee=class extends F{static get pluginName(){return"PasteFromOfficeEnhanced"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return["PasteFromOffice",Uee,Yee]}},sO=[],l4=[];(()=>{let s="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=0,e=0;t<s.length;t++)(t%2?l4:sO).push(e=e+s[t])})();function Jee(s){if(s<768)return!1;for(let t=0,e=sO.length;;){let i=t+e>>1;if(s<sO[i])e=i;else if(s>=l4[i])t=i+1;else return!0;if(t==e)return!1}}function XP(s){return s>=127462&&s<=127487}const jP=8205;function ete(s,t,e=!0,i=!0){return(e?a4:tte)(s,t,i)}function a4(s,t,e){if(t==s.length)return t;t&&c4(s.charCodeAt(t))&&u4(s.charCodeAt(t-1))&&t--;let i=_b(s,t);for(t+=GP(i);t<s.length;){let n=_b(s,t);if(i==jP||n==jP||e&&Jee(n))t+=GP(n),i=n;else if(XP(n)){let r=0,o=t-2;for(;o>=0&&XP(_b(s,o));)r++,o-=2;if(r%2==0)break;t+=2}else break}return t}function tte(s,t,e){for(;t>0;){let i=a4(s,t-2,e);if(i<t)return i;t--}return 0}function _b(s,t){let e=s.charCodeAt(t);if(!u4(e)||t+1==s.length)return e;let i=s.charCodeAt(t+1);return c4(i)?(e-55296<<10)+(i-56320)+65536:e}function c4(s){return s>=56320&&s<57344}function u4(s){return s>=55296&&s<56320}function GP(s){return s<65536?1:2}class Ye{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,i){[t,e]=cc(this,t,e);let n=[];return this.decompose(0,t,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(e,this.length,n,1),Ys.from(n,this.length-(e-t)+i.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){[t,e]=cc(this,t,e);let i=[];return this.decompose(t,e,i,0),Ys.from(i,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),i=this.length-this.scanIdentical(t,-1),n=new nh(this),r=new nh(t);for(let o=e,l=e;;){if(n.next(o),r.next(o),o=0,n.lineBreak!=r.lineBreak||n.done!=r.done||n.value!=r.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(t=1){return new nh(this,t)}iterRange(t,e=this.length){return new h4(this,t,e)}iterLines(t,e){let i;if(t==null)i=this.iter();else{e==null&&(e=this.lines+1);let n=this.line(t).from;i=this.iterRange(n,Math.max(n,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new d4(i)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?Ye.empty:t.length<=32?new Xt(t):Ys.from(Xt.split(t,[]))}}class Xt extends Ye{constructor(t,e=ite(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,i,n){for(let r=0;;r++){let o=this.text[r],l=n+o.length;if((e?i:l)>=t)return new nte(n,l,i,o);n=l+1,i++}}decompose(t,e,i,n){let r=t<=0&&e>=this.length?this:new Xt(YP(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(n&1){let o=i.pop(),l=Lm(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new Xt(l,o.length+r.length));else{let a=l.length>>1;i.push(new Xt(l.slice(0,a)),new Xt(l.slice(a)))}}else i.push(r)}replace(t,e,i){if(!(i instanceof Xt))return super.replace(t,e,i);[t,e]=cc(this,t,e);let n=Lm(this.text,Lm(i.text,YP(this.text,0,t)),e),r=this.length+i.length-(e-t);return n.length<=32?new Xt(n,r):Ys.from(Xt.split(n,[]),r)}sliceString(t,e=this.length,i=`
`){[t,e]=cc(this,t,e);let n="";for(let r=0,o=0;r<=e&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>t&&o&&(n+=i),t<a&&e>r&&(n+=l.slice(Math.max(0,t-r),e-r)),r=a+1}return n}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let i=[],n=-1;for(let r of t)i.push(r),n+=r.length+1,i.length==32&&(e.push(new Xt(i,n)),i=[],n=-1);return n>-1&&e.push(new Xt(i,n)),e}}class Ys extends Ye{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let i of t)this.lines+=i.lines}lineInner(t,e,i,n){for(let r=0;;r++){let o=this.children[r],l=n+o.length,a=i+o.lines-1;if((e?a:l)>=t)return o.lineInner(t,e,i,n);n=l+1,i=a+1}}decompose(t,e,i,n){for(let r=0,o=0;o<=e&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(t<=a&&e>=o){let c=n&((o<=t?1:0)|(a>=e?2:0));o>=t&&a<=e&&!c?i.push(l):l.decompose(t-o,e-o,i,c)}o=a+1}}replace(t,e,i){if([t,e]=cc(this,t,e),i.lines<this.lines)for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],l=r+o.length;if(t>=r&&e<=l){let a=o.replace(t-r,e-r,i),c=this.lines-o.lines+a.lines;if(a.lines<c>>4&&a.lines>c>>6){let h=this.children.slice();return h[n]=a,new Ys(h,this.length-(e-t)+i.length)}return super.replace(r,l,a)}r=l+1}return super.replace(t,e,i)}sliceString(t,e=this.length,i=`
`){[t,e]=cc(this,t,e);let n="";for(let r=0,o=0;r<this.children.length&&o<=e;r++){let l=this.children[r],a=o+l.length;o>t&&r&&(n+=i),t<a&&e>o&&(n+=l.sliceString(t-o,e-o,i)),o=a+1}return n}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof Ys))return 0;let i=0,[n,r,o,l]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;n+=e,r+=e){if(n==o||r==l)return i;let a=this.children[n],c=t.children[r];if(a!=c)return i+a.scanIdentical(c,e);i+=a.length+1}}static from(t,e=t.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let w of t)i+=w.lines;if(i<32){let w=[];for(let O of t)O.flatten(w);return new Xt(w,e)}let n=Math.max(32,i>>5),r=n<<1,o=n>>1,l=[],a=0,c=-1,h=[];function f(w){let O;if(w.lines>r&&w instanceof Ys)for(let v of w.children)f(v);else w.lines>o&&(a>o||!a)?(m(),l.push(w)):w instanceof Xt&&a&&(O=h[h.length-1])instanceof Xt&&w.lines+O.lines<=32?(a+=w.lines,c+=w.length+1,h[h.length-1]=new Xt(O.text.concat(w.text),O.length+1+w.length)):(a+w.lines>n&&m(),a+=w.lines,c+=w.length+1,h.push(w))}function m(){a!=0&&(l.push(h.length==1?h[0]:Ys.from(h,c)),c=-1,a=h.length=0)}for(let w of t)f(w);return m(),l.length==1?l[0]:new Ys(l,e)}}Ye.empty=new Xt([""],0);function ite(s){let t=-1;for(let e of s)t+=e.length+1;return t}function Lm(s,t,e=0,i=1e9){for(let n=0,r=0,o=!0;r<s.length&&n<=i;r++){let l=s[r],a=n+l.length;a>=e&&(a>i&&(l=l.slice(0,i-n)),n<e&&(l=l.slice(e-n)),o?(t[t.length-1]+=l,o=!1):t.push(l)),n=a+1}return t}function YP(s,t,e){return Lm(s,[""],t,e)}class nh{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof Xt?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],r=this.offsets[i],o=r>>1,l=n instanceof Xt?n.text.length:n.children.length;if(o==(e>0?l:0)){if(i==0)return this.done=!0,this.value="",this;e>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(e>0?0:1)){if(this.offsets[i]+=e,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(n instanceof Xt){let a=n.text[o+(e<0?-1:0)];if(this.offsets[i]+=e,a.length>Math.max(0,t))return this.value=t==0?a:e>0?a.slice(t):a.slice(0,a.length-t),this;t-=a.length}else{let a=n.children[o+(e<0?-1:0)];t>a.length?(t-=a.length,this.offsets[i]+=e):(e<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(e>0?1:(a instanceof Xt?a.text.length:a.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class h4{constructor(t,e,i){this.value="",this.done=!1,this.cursor=new nh(t,e>i?-1:1),this.pos=e>i?t.length:0,this.from=Math.min(e,i),this.to=Math.max(e,i)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let i=e<0?this.pos-this.from:this.to-this.pos;t>i&&(t=i),i-=t;let{value:n}=this.cursor.next(t);return this.pos+=(n.length+t)*e,this.value=n.length<=i?n:e<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class d4{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:i,value:n}=this.inner.next(t);return e&&this.afterBreak?(this.value="",this.afterBreak=!1):e?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ye.prototype[Symbol.iterator]=function(){return this.iter()},nh.prototype[Symbol.iterator]=h4.prototype[Symbol.iterator]=d4.prototype[Symbol.iterator]=function(){return this});let nte=class{constructor(t,e,i,n){this.from=t,this.to=e,this.number=i,this.text=n}get length(){return this.to-this.from}};function cc(s,t,e){return t=Math.max(0,Math.min(s.length,t)),[t,Math.max(t,Math.min(s.length,e))]}function Ji(s,t,e=!0,i=!0){return ete(s,t,e,i)}function ste(s){return s>=56320&&s<57344}function rte(s){return s>=55296&&s<56320}function Vn(s,t){let e=s.charCodeAt(t);if(!rte(e)||t+1==s.length)return e;let i=s.charCodeAt(t+1);return ste(i)?(e-55296<<10)+(i-56320)+65536:e}function f4(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function Cr(s){return s<65536?1:2}const rO=/\r\n?|\n/;var Fi=function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s}(Fi||(Fi={}));class or{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e+1];t+=i<0?this.sections[e]:i}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let e=0,i=0,n=0;e<this.sections.length;){let r=this.sections[e++],o=this.sections[e++];o<0?(t(i,n,r),n+=r):n+=o,i+=r}}iterChangedRanges(t,e=!1){oO(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let i=this.sections[e++],n=this.sections[e++];n<0?t.push(i,n):t.push(n,i)}return new or(t)}composeDesc(t){return this.empty?t:t.empty?this:m4(this,t)}mapDesc(t,e=!1){return t.empty?this:lO(this,t,e)}mapPos(t,e=-1,i=Fi.Simple){let n=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],c=n+l;if(a<0){if(c>t)return r+(t-n);r+=l}else{if(i!=Fi.Simple&&c>=t&&(i==Fi.TrackDel&&n<t&&c>t||i==Fi.TrackBefore&&n<t||i==Fi.TrackAfter&&c>t))return null;if(c>t||c==t&&e<0&&!l)return t==n||e<0?r:r+a;r+=a}n=c}if(t>n)throw new RangeError(`Position ${t} is out of range for changeset of length ${n}`);return r}touchesRange(t,e=t){for(let i=0,n=0;i<this.sections.length&&n<=e;){let r=this.sections[i++],o=this.sections[i++],l=n+r;if(o>=0&&n<=e&&l>=t)return n<t&&l>e?"cover":!0;n=l}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let i=this.sections[e++],n=this.sections[e++];t+=(t?" ":"")+i+(n>=0?":"+n:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(e=>typeof e!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new or(t)}static create(t){return new or(t)}}class li extends or{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return oO(this,(e,i,n,r,o)=>t=t.replace(n,n+(i-e),o),!1),t}mapDesc(t,e=!1){return lO(this,t,e,!0)}invert(t){let e=this.sections.slice(),i=[];for(let n=0,r=0;n<e.length;n+=2){let o=e[n],l=e[n+1];if(l>=0){e[n]=l,e[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(Ye.empty);i.push(o?t.slice(r,r+o):Ye.empty)}r+=o}return new li(e,i)}compose(t){return this.empty?t:t.empty?this:m4(this,t,!0)}map(t,e=!1){return t.empty?this:lO(this,t,e,!0)}iterChanges(t,e=!1){oO(this,t,e)}get desc(){return or.create(this.sections)}filter(t){let e=[],i=[],n=[],r=new Ah(this);e:for(let o=0,l=0;;){let a=o==t.length?1e9:t[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let h=Math.min(r.len,a-l);Ni(n,h,-1);let f=r.ins==-1?-1:r.off==0?r.ins:0;Ni(e,h,f),f>0&&Oo(i,e,r.text),r.forward(h),l+=h}let c=t[o++];for(;l<c;){if(r.done)break e;let h=Math.min(r.len,c-l);Ni(e,h,-1),Ni(n,h,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(h),l+=h}}return{changes:new li(e,i),filtered:or.create(n)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e],n=this.sections[e+1];n<0?t.push(i):n==0?t.push([i]):t.push([i].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,i){let n=[],r=[],o=0,l=null;function a(h=!1){if(!h&&!n.length)return;o<e&&Ni(n,e-o,-1);let f=new li(n,r);l=l?l.compose(f.map(l)):f,n=[],r=[],o=0}function c(h){if(Array.isArray(h))for(let f of h)c(f);else if(h instanceof li){if(h.length!=e)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${e})`);a(),l=l?l.compose(h.map(l)):h}else{let{from:f,to:m=f,insert:w}=h;if(f>m||f<0||m>e)throw new RangeError(`Invalid change range ${f} to ${m} (in doc of length ${e})`);let O=w?typeof w=="string"?Ye.of(w.split(i||rO)):w:Ye.empty,v=O.length;if(f==m&&v==0)return;f<o&&a(),f>o&&Ni(n,f-o,-1),Ni(n,m-f,v),Oo(r,n,O),o=m}}return c(t),a(!l),l}static empty(t){return new li(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],i=[];for(let n=0;n<t.length;n++){let r=t[n];if(typeof r=="number")e.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)e.push(r[0],0);else{for(;i.length<n;)i.push(Ye.empty);i[n]=Ye.of(r.slice(1)),e.push(r[0],i[n].length)}}}return new li(e,i)}static createSet(t,e){return new li(t,e)}}function Ni(s,t,e,i=!1){if(t==0&&e<=0)return;let n=s.length-2;n>=0&&e<=0&&e==s[n+1]?s[n]+=t:n>=0&&t==0&&s[n]==0?s[n+1]+=e:i?(s[n]+=t,s[n+1]+=e):s.push(t,e)}function Oo(s,t,e){if(e.length==0)return;let i=t.length-2>>1;if(i<s.length)s[s.length-1]=s[s.length-1].append(e);else{for(;s.length<i;)s.push(Ye.empty);s.push(e)}}function oO(s,t,e){let i=s.inserted;for(let n=0,r=0,o=0;o<s.sections.length;){let l=s.sections[o++],a=s.sections[o++];if(a<0)n+=l,r+=l;else{let c=n,h=r,f=Ye.empty;for(;c+=l,h+=a,a&&i&&(f=f.append(i[o-2>>1])),!(e||o==s.sections.length||s.sections[o+1]<0);)l=s.sections[o++],a=s.sections[o++];t(n,c,r,h,f),n=c,r=h}}}function lO(s,t,e,i=!1){let n=[],r=i?[]:null,o=new Ah(s),l=new Ah(t);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let c=Math.min(o.len,l.len);Ni(n,c,-1),o.forward(c),l.forward(c)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!e))){let c=l.len;for(Ni(n,l.ins,-1);c;){let h=Math.min(o.len,c);o.ins>=0&&a<o.i&&o.len<=h&&(Ni(n,0,o.ins),r&&Oo(r,n,o.text),a=o.i),o.forward(h),c-=h}l.next()}else if(o.ins>=0){let c=0,h=o.len;for(;h;)if(l.ins==-1){let f=Math.min(h,l.len);c+=f,h-=f,l.forward(f)}else if(l.ins==0&&l.len<h)h-=l.len,l.next();else break;Ni(n,c,a<o.i?o.ins:0),r&&a<o.i&&Oo(r,n,o.text),a=o.i,o.forward(o.len-h)}else{if(o.done&&l.done)return r?li.createSet(n,r):or.create(n);throw new Error("Mismatched change set lengths")}}}function m4(s,t,e=!1){let i=[],n=e?[]:null,r=new Ah(s),o=new Ah(t);for(let l=!1;;){if(r.done&&o.done)return n?li.createSet(i,n):or.create(i);if(r.ins==0)Ni(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)Ni(i,0,o.ins,l),n&&Oo(n,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),c=i.length;if(r.ins==-1){let h=o.ins==-1?-1:o.off?0:o.ins;Ni(i,a,h,l),n&&h&&Oo(n,i,o.text)}else o.ins==-1?(Ni(i,r.off?0:r.len,a,l),n&&Oo(n,i,r.textBit(a))):(Ni(i,r.off?0:r.len,o.off?0:o.ins,l),n&&!o.off&&Oo(n,i,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>c),r.forward2(a),o.forward(a)}}}}class Ah{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?Ye.empty:t[e]}textBit(t){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length&&!t?Ye.empty:e[i].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class fl{constructor(t,e,i){this.from=t,this.to=e,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let t=this.flags&7;return t==7?null:t}get goalColumn(){let t=this.flags>>6;return t==16777215?void 0:t}map(t,e=-1){let i,n;return this.empty?i=n=t.mapPos(this.from,e):(i=t.mapPos(this.from,1),n=t.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new fl(i,n,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return ie.range(t,e);let i=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return ie.range(this.anchor,i)}eq(t,e=!1){return this.anchor==t.anchor&&this.head==t.head&&(!e||!this.empty||this.assoc==t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ie.range(t.anchor,t.head)}static create(t,e,i){return new fl(t,e,i)}}class ie{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:ie.create(this.ranges.map(i=>i.map(t,e)),this.mainIndex)}eq(t,e=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(t.ranges[i],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ie([this.main],0)}addRange(t,e=!0){return ie.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let i=this.ranges.slice();return i[e]=t,ie.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ie(t.ranges.map(e=>fl.fromJSON(e)),t.main)}static single(t,e=t){return new ie([ie.range(t,e)],0)}static create(t,e=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<t.length;n++){let r=t[n];if(r.empty?r.from<=i:r.from<i)return ie.normalized(t.slice(),e);i=r.to}return new ie(t,e)}static cursor(t,e=0,i,n){return fl.create(t,t,(e==0?0:e<0?8:16)|(i==null?7:Math.min(6,i))|(n??16777215)<<6)}static range(t,e,i,n){let r=(i??16777215)<<6|(n==null?7:Math.min(6,n));return e<t?fl.create(e,t,48|r):fl.create(t,e,(e>t?8:0)|r)}static normalized(t,e=0){let i=t[e];t.sort((n,r)=>n.from-r.from),e=t.indexOf(i);for(let n=1;n<t.length;n++){let r=t[n],o=t[n-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);n<=e&&e--,t.splice(--n,2,r.anchor>r.head?ie.range(a,l):ie.range(l,a))}}return new ie(t,e)}}function g4(s,t){for(let e of s.ranges)if(e.to>t)throw new RangeError("Selection points outside of document")}let yy=0;class Pe{constructor(t,e,i,n,r){this.combine=t,this.compareInput=e,this.compare=i,this.isStatic=n,this.id=yy++,this.default=t([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(t={}){return new Pe(t.combine||(e=>e),t.compareInput||((e,i)=>e===i),t.compare||(t.combine?(e,i)=>e===i:vy),!!t.static,t.enables)}of(t){return new Bm([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new Bm(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new Bm(t,this,2,e)}from(t,e){return e||(e=i=>i),this.compute([t],i=>e(i.field(t)))}}function vy(s,t){return s==t||s.length==t.length&&s.every((e,i)=>e===t[i])}class Bm{constructor(t,e,i,n){this.dependencies=t,this.facet=e,this.type=i,this.value=n,this.id=yy++}dynamicSlot(t){var e;let i=this.value,n=this.facet.compareInput,r=this.id,o=t[r]>>1,l=this.type==2,a=!1,c=!1,h=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?c=!0:(((e=t[f.id])!==null&&e!==void 0?e:1)&1)==0&&h.push(t[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,m){if(a&&m.docChanged||c&&(m.docChanged||m.selection)||aO(f,h)){let w=i(f);if(l?!KP(w,f.values[o],n):!n(w,f.values[o]))return f.values[o]=w,1}return 0},reconfigure:(f,m)=>{let w,O=m.config.address[r];if(O!=null){let v=Ig(m,O);if(this.dependencies.every(k=>k instanceof Pe?m.facet(k)===f.facet(k):k instanceof _n?m.field(k,!1)==f.field(k,!1):!0)||(l?KP(w=i(f),v,n):n(w=i(f),v)))return f.values[o]=v,0}else w=i(f);return f.values[o]=w,1}}}}function KP(s,t,e){if(s.length!=t.length)return!1;for(let i=0;i<s.length;i++)if(!e(s[i],t[i]))return!1;return!0}function aO(s,t){let e=!1;for(let i of t)sh(s,i)&1&&(e=!0);return e}function ote(s,t,e){let i=e.map(a=>s[a.id]),n=e.map(a=>a.type),r=i.filter(a=>!(a&1)),o=s[t.id]>>1;function l(a){let c=[];for(let h=0;h<i.length;h++){let f=Ig(a,i[h]);if(n[h]==2)for(let m of f)c.push(m);else c.push(f)}return t.combine(c)}return{create(a){for(let c of i)sh(a,c);return a.values[o]=l(a),1},update(a,c){if(!aO(a,r))return 0;let h=l(a);return t.compare(h,a.values[o])?0:(a.values[o]=h,1)},reconfigure(a,c){let h=aO(a,i),f=c.config.facets[t.id],m=c.facet(t);if(f&&!h&&vy(e,f))return a.values[o]=m,0;let w=l(a);return t.compare(w,m)?(a.values[o]=m,0):(a.values[o]=w,1)}}}const Kf=Pe.define({static:!0});class _n{constructor(t,e,i,n,r){this.id=t,this.createF=e,this.updateF=i,this.compareF=n,this.spec=r,this.provides=void 0}static define(t){let e=new _n(yy++,t.create,t.update,t.compare||((i,n)=>i===n),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(Kf).find(i=>i.field==this);return((e==null?void 0:e.create)||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:i=>(i.values[e]=this.create(i),1),update:(i,n)=>{let r=i.values[e],o=this.updateF(r,n);return this.compareF(r,o)?0:(i.values[e]=o,1)},reconfigure:(i,n)=>{let r=i.facet(Kf),o=n.facet(Kf),l;return(l=r.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(i.values[e]=l.create(i),1):n.config.address[this.id]!=null?(i.values[e]=n.field(this),0):(i.values[e]=this.create(i),1)}}}init(t){return[this,Kf.of({field:this,create:t})]}get extension(){return this}}const hl={lowest:4,low:3,default:2,high:1,highest:0};function Cu(s){return t=>new p4(t,s)}const $o={highest:Cu(hl.highest),high:Cu(hl.high),default:Cu(hl.default),low:Cu(hl.low),lowest:Cu(hl.lowest)};class p4{constructor(t,e){this.inner=t,this.prec=e}}class ud{of(t){return new cO(this,t)}reconfigure(t){return ud.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class cO{constructor(t,e){this.compartment=t,this.inner=e}}class Ag{constructor(t,e,i,n,r,o){for(this.base=t,this.compartments=e,this.dynamicSlots=i,this.address=n,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return e==null?t.default:this.staticValues[e>>1]}static resolve(t,e,i){let n=[],r=Object.create(null),o=new Map;for(let m of lte(t,e,o))m instanceof _n?n.push(m):(r[m.facet.id]||(r[m.facet.id]=[])).push(m);let l=Object.create(null),a=[],c=[];for(let m of n)l[m.id]=c.length<<1,c.push(w=>m.slot(w));let h=i==null?void 0:i.config.facets;for(let m in r){let w=r[m],O=w[0].facet,v=h&&h[m]||[];if(w.every(k=>k.type==0))if(l[O.id]=a.length<<1|1,vy(v,w))a.push(i.facet(O));else{let k=O.combine(w.map(C=>C.value));a.push(i&&O.compare(k,i.facet(O))?i.facet(O):k)}else{for(let k of w)k.type==0?(l[k.id]=a.length<<1|1,a.push(k.value)):(l[k.id]=c.length<<1,c.push(C=>k.dynamicSlot(C)));l[O.id]=c.length<<1,c.push(k=>ote(k,O,w))}}let f=c.map(m=>m(l));return new Ag(t,o,f,l,a,r)}}function lte(s,t,e){let i=[[],[],[],[],[]],n=new Map;function r(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let c=i[a].indexOf(o);c>-1&&i[a].splice(c,1),o instanceof cO&&e.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let c of o)r(c,l);else if(o instanceof cO){if(e.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=t.get(o.compartment)||o.inner;e.set(o.compartment,c),r(c,l)}else if(o instanceof p4)r(o.inner,o.prec);else if(o instanceof _n)i[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof Bm)i[l].push(o),o.facet.extensions&&r(o.facet.extensions,hl.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(c,l)}}return r(s,hl.default),i.reduce((o,l)=>o.concat(l))}function sh(s,t){if(t&1)return 2;let e=t>>1,i=s.status[e];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;s.status[e]=4;let n=s.computeSlot(s,s.config.dynamicSlots[e]);return s.status[e]=2|n}function Ig(s,t){return t&1?s.config.staticValues[t>>1]:s.values[t>>1]}const w4=Pe.define(),uO=Pe.define({combine:s=>s.some(t=>t),static:!0}),b4=Pe.define({combine:s=>s.length?s[0]:void 0,static:!0}),O4=Pe.define(),x4=Pe.define(),y4=Pe.define(),v4=Pe.define({combine:s=>s.length?s[0]:!1});class zr{constructor(t,e){this.type=t,this.value=e}static define(){return new ate}}class ate{of(t){return new zr(this,t)}}class cte{constructor(t){this.map=t}of(t){return new st(this,t)}}class st{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return e===void 0?void 0:e==this.value?this:new st(this.type,e)}is(t){return this.type==t}static define(t={}){return new cte(t.map||(e=>e))}static mapEffects(t,e){if(!t.length)return t;let i=[];for(let n of t){let r=n.map(e);r&&i.push(r)}return i}}st.reconfigure=st.define();st.appendConfig=st.define();class Yt{constructor(t,e,i,n,r,o){this.startState=t,this.changes=e,this.selection=i,this.effects=n,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&g4(i,e.newLength),r.some(l=>l.type==Yt.time)||(this.annotations=r.concat(Yt.time.of(Date.now())))}static create(t,e,i,n,r,o){return new Yt(t,e,i,n,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(Yt.userEvent);return!!(e&&(e==t||e.length>t.length&&e.slice(0,t.length)==t&&e[t.length]=="."))}}Yt.time=zr.define();Yt.userEvent=zr.define();Yt.addToHistory=zr.define();Yt.remote=zr.define();function ute(s,t){let e=[];for(let i=0,n=0;;){let r,o;if(i<s.length&&(n==t.length||t[n]>=s[i]))r=s[i++],o=s[i++];else if(n<t.length)r=t[n++],o=t[n++];else return e;!e.length||e[e.length-1]<r?e.push(r,o):e[e.length-1]<o&&(e[e.length-1]=o)}}function _4(s,t,e){var i;let n,r,o;return e?(n=t.changes,r=li.empty(t.changes.length),o=s.changes.compose(t.changes)):(n=t.changes.map(s.changes),r=s.changes.mapDesc(t.changes,!0),o=s.changes.compose(n)),{changes:o,selection:t.selection?t.selection.map(r):(i=s.selection)===null||i===void 0?void 0:i.map(n),effects:st.mapEffects(s.effects,n).concat(st.mapEffects(t.effects,r)),annotations:s.annotations.length?s.annotations.concat(t.annotations):t.annotations,scrollIntoView:s.scrollIntoView||t.scrollIntoView}}function hO(s,t,e){let i=t.selection,n=Ga(t.annotations);return t.userEvent&&(n=n.concat(Yt.userEvent.of(t.userEvent))),{changes:t.changes instanceof li?t.changes:li.of(t.changes||[],e,s.facet(b4)),selection:i&&(i instanceof ie?i:ie.single(i.anchor,i.head)),effects:Ga(t.effects),annotations:n,scrollIntoView:!!t.scrollIntoView}}function k4(s,t,e){let i=hO(s,t.length?t[0]:{},s.doc.length);t.length&&t[0].filter===!1&&(e=!1);for(let r=1;r<t.length;r++){t[r].filter===!1&&(e=!1);let o=!!t[r].sequential;i=_4(i,hO(s,t[r],o?i.changes.newLength:s.doc.length),o)}let n=Yt.create(s,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return dte(e?hte(n):n)}function hte(s){let t=s.startState,e=!0;for(let n of t.facet(O4)){let r=n(s);if(r===!1){e=!1;break}Array.isArray(r)&&(e=e===!0?r:ute(e,r))}if(e!==!0){let n,r;if(e===!1)r=s.changes.invertedDesc,n=li.empty(t.doc.length);else{let o=s.changes.filter(e);n=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}s=Yt.create(t,n,s.selection&&s.selection.map(r),st.mapEffects(s.effects,r),s.annotations,s.scrollIntoView)}let i=t.facet(x4);for(let n=i.length-1;n>=0;n--){let r=i[n](s);r instanceof Yt?s=r:Array.isArray(r)&&r.length==1&&r[0]instanceof Yt?s=r[0]:s=k4(t,Ga(r),!1)}return s}function dte(s){let t=s.startState,e=t.facet(y4),i=s;for(let n=e.length-1;n>=0;n--){let r=e[n](s);r&&Object.keys(r).length&&(i=_4(i,hO(t,r,s.changes.newLength),!0))}return i==s?s:Yt.create(t,s.changes,s.selection,i.effects,i.annotations,i.scrollIntoView)}const fte=[];function Ga(s){return s==null?fte:Array.isArray(s)?s:[s]}var es=function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s}(es||(es={}));const mte=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let dO;try{dO=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function gte(s){if(dO)return dO.test(s);for(let t=0;t<s.length;t++){let e=s[t];if(/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||mte.test(e)))return!0}return!1}function pte(s){return t=>{if(!/\S/.test(t))return es.Space;if(gte(t))return es.Word;for(let e=0;e<s.length;e++)if(t.indexOf(s[e])>-1)return es.Word;return es.Other}}class at{constructor(t,e,i,n,r,o){this.config=t,this.doc=e,this.selection=i,this.values=n,this.status=t.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)sh(this,l<<1);this.computeSlot=null}field(t,e=!0){let i=this.config.address[t.id];if(i==null){if(e)throw new RangeError("Field is not present in this state");return}return sh(this,i),Ig(this,i)}update(...t){return k4(this,t,!0)}applyTransaction(t){let e=this.config,{base:i,compartments:n}=e;for(let l of t.effects)l.is(ud.reconfigure)?(e&&(n=new Map,e.compartments.forEach((a,c)=>n.set(c,a)),e=null),n.set(l.value.compartment,l.value.extension)):l.is(st.reconfigure)?(e=null,i=l.value):l.is(st.appendConfig)&&(e=null,i=Ga(i).concat(l.value));let r;e?r=t.startState.values.slice():(e=Ag.resolve(i,n,this),r=new at(e,this.doc,this.selection,e.dynamicSlots.map(()=>null),(a,c)=>c.reconfigure(a,this),null).values);let o=t.startState.facet(uO)?t.newSelection:t.newSelection.asSingle();new at(e,t.newDoc,o,r,(l,a)=>a.update(l,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:t},range:ie.cursor(e.from+t.length)}))}changeByRange(t){let e=this.selection,i=t(e.ranges[0]),n=this.changes(i.changes),r=[i.range],o=Ga(i.effects);for(let l=1;l<e.ranges.length;l++){let a=t(e.ranges[l]),c=this.changes(a.changes),h=c.map(n);for(let m=0;m<l;m++)r[m]=r[m].map(h);let f=n.mapDesc(c,!0);r.push(a.range.map(f)),n=n.compose(h),o=st.mapEffects(o,h).concat(st.mapEffects(Ga(a.effects),f))}return{changes:n,selection:ie.create(r,e.mainIndex),effects:o}}changes(t=[]){return t instanceof li?t:li.of(t,this.doc.length,this.facet(at.lineSeparator))}toText(t){return Ye.of(t.split(this.facet(at.lineSeparator)||rO))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return e==null?t.default:(sh(this,e),Ig(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let i in t){let n=t[i];n instanceof _n&&this.config.address[n.id]!=null&&(e[i]=n.spec.toJSON(this.field(t[i]),this))}return e}static fromJSON(t,e={},i){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(t,r)){let o=i[r],l=t[r];n.push(o.init(a=>o.spec.fromJSON(l,a)))}}return at.create({doc:t.doc,selection:ie.fromJSON(t.selection),extensions:e.extensions?n.concat([e.extensions]):n})}static create(t={}){let e=Ag.resolve(t.extensions||[],new Map),i=t.doc instanceof Ye?t.doc:Ye.of((t.doc||"").split(e.staticFacet(at.lineSeparator)||rO)),n=t.selection?t.selection instanceof ie?t.selection:ie.single(t.selection.anchor,t.selection.head):ie.single(0);return g4(n,i.length),e.staticFacet(uO)||(n=n.asSingle()),new at(e,i,n,e.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(at.tabSize)}get lineBreak(){return this.facet(at.lineSeparator)||`
`}get readOnly(){return this.facet(v4)}phrase(t,...e){for(let i of this.facet(at.phrases))if(Object.prototype.hasOwnProperty.call(i,t)){t=i[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let r=+(n||1);return!r||r>e.length?i:e[r-1]})),t}languageDataAt(t,e,i=-1){let n=[];for(let r of this.facet(w4))for(let o of r(this,e,i))Object.prototype.hasOwnProperty.call(o,t)&&n.push(o[t]);return n}charCategorizer(t){return pte(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:e,from:i,length:n}=this.doc.lineAt(t),r=this.charCategorizer(t),o=t-i,l=t-i;for(;o>0;){let a=Ji(e,o,!1);if(r(e.slice(a,o))!=es.Word)break;o=a}for(;l<n;){let a=Ji(e,l);if(r(e.slice(l,a))!=es.Word)break;l=a}return o==l?null:ie.range(o+i,l+i)}}at.allowMultipleSelections=uO;at.tabSize=Pe.define({combine:s=>s.length?s[0]:4});at.lineSeparator=b4;at.readOnly=v4;at.phrases=Pe.define({compare(s,t){let e=Object.keys(s),i=Object.keys(t);return e.length==i.length&&e.every(n=>s[n]==t[n])}});at.languageData=w4;at.changeFilter=O4;at.transactionFilter=x4;at.transactionExtender=y4;ud.reconfigure=st.define();function Zl(s,t,e={}){let i={};for(let n of s)for(let r of Object.keys(n)){let o=n[r],l=i[r];if(l===void 0)i[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(e,r))i[r]=e[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let n in t)i[n]===void 0&&(i[n]=t[n]);return i}class Sl{eq(t){return this==t}range(t,e=t){return fO.create(t,e,this)}}Sl.prototype.startSide=Sl.prototype.endSide=0;Sl.prototype.point=!1;Sl.prototype.mapMode=Fi.TrackDel;let fO=class S4{constructor(t,e,i){this.from=t,this.to=e,this.value=i}static create(t,e,i){return new S4(t,e,i)}};function mO(s,t){return s.from-t.from||s.value.startSide-t.value.startSide}class _y{constructor(t,e,i,n){this.from=t,this.to=e,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(t,e,i,n=0){let r=i?this.to:this.from;for(let o=n,l=r.length;;){if(o==l)return o;let a=o+l>>1,c=r[a]-t||(i?this.value[a].endSide:this.value[a].startSide)-e;if(a==o)return c>=0?o:l;c>=0?l=a:o=a+1}}between(t,e,i,n){for(let r=this.findIndex(e,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(n(this.from[r]+t,this.to[r]+t,this.value[r])===!1)return!1}map(t,e){let i=[],n=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],h=this.from[a]+t,f=this.to[a]+t,m,w;if(h==f){let O=e.mapPos(h,c.startSide,c.mapMode);if(O==null||(m=w=O,c.startSide!=c.endSide&&(w=e.mapPos(h,c.endSide),w<m)))continue}else if(m=e.mapPos(h,c.startSide),w=e.mapPos(f,c.endSide),m>w||m==w&&c.startSide>0&&c.endSide<=0)continue;(w-m||c.endSide-c.startSide)<0||(o<0&&(o=m),c.point&&(l=Math.max(l,w-m)),i.push(c),n.push(m-o),r.push(w-o))}return{mapped:i.length?new _y(n,r,i,l):null,pos:o}}}class nt{constructor(t,e,i,n){this.chunkPos=t,this.chunk=e,this.nextLayer=i,this.maxPoint=n}static create(t,e,i,n){return new nt(t,e,i,n)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:i=!1,filterFrom:n=0,filterTo:r=this.length}=t,o=t.filter;if(e.length==0&&!o)return this;if(i&&(e=e.slice().sort(mO)),this.isEmpty)return e.length?nt.of(e):this;let l=new C4(this,null,-1).goto(0),a=0,c=[],h=new Cl;for(;l.value||a<e.length;)if(a<e.length&&(l.from-e[a].from||l.startSide-e[a].value.startSide)>=0){let f=e[a++];h.addInner(f.from,f.to,f.value)||c.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==e.length||this.chunkEnd(l.chunkIndex)<e[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&h.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||r<l.from||o(l.from,l.to,l.value))&&(h.addInner(l.from,l.to,l.value)||c.push(fO.create(l.from,l.to,l.value))),l.next());return h.finishInner(this.nextLayer.isEmpty&&!c.length?nt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:n,filterTo:r}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],c=t.touchesRange(l,l+a.length);if(c===!1)n=Math.max(n,a.maxPoint),e.push(a),i.push(t.mapPos(l));else if(c===!0){let{mapped:h,pos:f}=a.map(l,t);h&&(n=Math.max(n,h.maxPoint),e.push(h),i.push(f))}}let r=this.nextLayer.map(t);return e.length==0?r:new nt(i,e,r||nt.empty,n)}between(t,e,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],o=this.chunk[n];if(e>=r&&t<=r+o.length&&o.between(r,t-r,e-r,i)===!1)return}this.nextLayer.between(t,e,i)}}iter(t=0){return Ih.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return Ih.from(t).goto(e)}static compare(t,e,i,n,r=-1){let o=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),l=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),a=JP(o,l,i),c=new Pu(o,a,r),h=new Pu(l,a,r);i.iterGaps((f,m,w)=>eT(c,f,h,m,w,n)),i.empty&&i.length==0&&eT(c,0,h,0,0,n)}static eq(t,e,i=0,n){n==null&&(n=999999999);let r=t.filter(h=>!h.isEmpty&&e.indexOf(h)<0),o=e.filter(h=>!h.isEmpty&&t.indexOf(h)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=JP(r,o),a=new Pu(r,l,0).goto(i),c=new Pu(o,l,0).goto(i);for(;;){if(a.to!=c.to||!gO(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>n)return!0;a.next(),c.next()}}static spans(t,e,i,n,r=-1){let o=new Pu(t,null,r).goto(e),l=e,a=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let h=o.activeForPoint(o.to),f=o.pointFrom<e?h.length+1:o.point.startSide<0?h.length:Math.min(h.length,a);n.point(l,c,o.point,h,f,o.pointRank),a=Math.min(o.openEnd(c),h.length)}else c>l&&(n.span(l,c,o.active,a),a=o.openEnd(c));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(t,e=!1){let i=new Cl;for(let n of t instanceof fO?[t]:e?wte(t):t)i.add(n.from,n.to,n.value);return i.finish()}static join(t){if(!t.length)return nt.empty;let e=t[t.length-1];for(let i=t.length-2;i>=0;i--)for(let n=t[i];n!=nt.empty;n=n.nextLayer)e=new nt(n.chunkPos,n.chunk,e,Math.max(n.maxPoint,e.maxPoint));return e}}nt.empty=new nt([],[],null,-1);function wte(s){if(s.length>1)for(let t=s[0],e=1;e<s.length;e++){let i=s[e];if(mO(t,i)>0)return s.slice().sort(mO);t=i}return s}nt.empty.nextLayer=nt.empty;class Cl{finishChunk(t){this.chunks.push(new _y(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,i){this.addInner(t,e,i)||(this.nextLayer||(this.nextLayer=new Cl)).add(t,e,i)}addInner(t,e,i){let n=t-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(t-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=i,this.lastFrom=t,this.lastTo=e,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let i=e.value.length-1;return this.last=e.value[i],this.lastFrom=e.from[i]+t,this.lastTo=e.to[i]+t,!0}finish(){return this.finishInner(nt.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let e=nt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function JP(s,t,e){let i=new Map;for(let r of s)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let n=new Set;for(let r of t)for(let o=0;o<r.chunk.length;o++){let l=i.get(r.chunk[o]);l!=null&&(e?e.mapPos(l):l)==r.chunkPos[o]&&!(e!=null&&e.touchesRange(l,l+r.chunk[o].length))&&n.add(r.chunk[o])}return n}class C4{constructor(t,e,i,n=0){this.layer=t,this.skip=e,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<t||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],i=t+e.from[this.rangeIndex];if(this.from=i,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Ih{constructor(t){this.heap=t}static from(t,e=null,i=-1){let n=[];for(let r=0;r<t.length;r++)for(let o=t[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new C4(o,e,i,r));return n.length==1?n[0]:new Ih(n)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let i of this.heap)i.goto(t,e);for(let i=this.heap.length>>1;i>=0;i--)kb(this.heap,i);return this.next(),this}forward(t,e){for(let i of this.heap)i.forward(t,e);for(let i=this.heap.length>>1;i>=0;i--)kb(this.heap,i);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),kb(this.heap,0)}}}function kb(s,t){for(let e=s[t];;){let i=(t<<1)+1;if(i>=s.length)break;let n=s[i];if(i+1<s.length&&n.compare(s[i+1])>=0&&(n=s[i+1],i++),e.compare(n)<0)break;s[i]=e,s[t]=n,t=i}}class Pu{constructor(t,e,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ih.from(t,e,i)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){Jf(this.active,t),Jf(this.activeTo,t),Jf(this.activeRank,t),this.minActive=tT(this.active,this.activeTo)}addActive(t){let e=0,{value:i,to:n,rank:r}=this.cursor;for(;e<this.activeRank.length&&(r-this.activeRank[e]||n-this.activeTo[e])>0;)e++;em(this.active,e,i),em(this.activeTo,e,n),em(this.activeRank,e,r),t&&em(t,e,this.cursor.from),this.minActive=tT(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>t){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&Jf(i,n)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let n=i.length-1;n>=0&&i[n]<t;n--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>t||this.activeTo[i]==t&&this.active[i].endSide>=this.point.endSide)&&e.push(this.active[i]);return e.reverse()}openEnd(t){let e=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>t;i--)e++;return e}}function eT(s,t,e,i,n,r){s.goto(t),e.goto(i);let o=i+n,l=i,a=i-t;for(;;){let c=s.to+a-e.to,h=c||s.endSide-e.endSide,f=h<0?s.to+a:e.to,m=Math.min(f,o);if(s.point||e.point?s.point&&e.point&&(s.point==e.point||s.point.eq(e.point))&&gO(s.activeForPoint(s.to),e.activeForPoint(e.to))||r.comparePoint(l,m,s.point,e.point):m>l&&!gO(s.active,e.active)&&r.compareRange(l,m,s.active,e.active),f>o)break;(c||s.openEnd!=e.openEnd)&&r.boundChange&&r.boundChange(f),l=f,h<=0&&s.next(),h>=0&&e.next()}}function gO(s,t){if(s.length!=t.length)return!1;for(let e=0;e<s.length;e++)if(s[e]!=t[e]&&!s[e].eq(t[e]))return!1;return!0}function Jf(s,t){for(let e=t,i=s.length-1;e<i;e++)s[e]=s[e+1];s.pop()}function em(s,t,e){for(let i=s.length-1;i>=t;i--)s[i+1]=s[i];s[t]=e}function tT(s,t){let e=-1,i=1e9;for(let n=0;n<t.length;n++)(t[n]-i||s[n].endSide-s[e].endSide)<0&&(e=n,i=t[n]);return e}function Ms(s,t,e=s.length){let i=0;for(let n=0;n<e&&n<s.length;)s.charCodeAt(n)==9?(i+=t-i%t,n++):(i++,n=Ji(s,n));return i}function pO(s,t,e,i){for(let n=0,r=0;;){if(r>=t)return n;if(n==s.length)break;r+=s.charCodeAt(n)==9?e-r%e:1,n=Ji(s,n)}return i===!0?-1:s.length}const wO="ͼ",iT=typeof Symbol>"u"?"__"+wO:Symbol.for(wO),bO=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),nT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Io{constructor(t,e){this.rules=[];let{finish:i}=e||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,c){let h=[],f=/^@(\w+)\b/.exec(o[0]),m=f&&f[1]=="keyframes";if(f&&l==null)return a.push(o[0]+";");for(let w in l){let O=l[w];if(/&/.test(w))r(w.split(/,\s*/).map(v=>o.map(k=>v.replace(/&/,k))).reduce((v,k)=>v.concat(k)),O,a);else if(O&&typeof O=="object"){if(!f)throw new RangeError("The value of a property ("+w+") should be a primitive value.");r(n(w),O,h,m)}else O!=null&&h.push(w.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+O+";")}(h.length||m)&&a.push((i&&!f&&!c?o.map(i):o).join(", ")+" {"+h.join(" ")+"}")}for(let o in t)r(n(o),t[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=nT[iT]||1;return nT[iT]=t+1,wO+t.toString(36)}static mount(t,e,i){let n=t[bO],r=i&&i.nonce;n?r&&n.setNonce(r):n=new bte(t,r),n.mount(Array.isArray(e)?e:[e],t)}}let sT=new Map;class bte{constructor(t,e){let i=t.ownerDocument||t,n=i.defaultView;if(!t.head&&t.adoptedStyleSheets&&n.CSSStyleSheet){let r=sT.get(i);if(r)return t[bO]=r;this.sheet=new n.CSSStyleSheet,sT.set(i,this)}else this.styleTag=i.createElement("style"),e&&this.styleTag.setAttribute("nonce",e);this.modules=[],t[bO]=this}mount(t,e){let i=this.sheet,n=0,r=0;for(let o=0;o<t.length;o++){let l=t[o],a=this.modules.indexOf(l);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,l),i)for(let c=0;c<l.rules.length;c++)i.insertRule(l.rules[c],n++)}else{for(;r<a;)n+=this.modules[r++].rules.length;n+=l.rules.length,r++}}if(i)e.adoptedStyleSheets.indexOf(this.sheet)<0&&(e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=e.head||e;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}}var Ro={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Rh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ote=typeof navigator<"u"&&/Mac/.test(navigator.platform),xte=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ei=0;Ei<10;Ei++)Ro[48+Ei]=Ro[96+Ei]=String(Ei);for(var Ei=1;Ei<=24;Ei++)Ro[Ei+111]="F"+Ei;for(var Ei=65;Ei<=90;Ei++)Ro[Ei]=String.fromCharCode(Ei+32),Rh[Ei]=String.fromCharCode(Ei);for(var Sb in Ro)Rh.hasOwnProperty(Sb)||(Rh[Sb]=Ro[Sb]);function yte(s){var t=Ote&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||xte&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",e=!t&&s.key||(s.shiftKey?Rh:Ro)[s.keyCode]||s.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}function Vh(s){let t;return s.nodeType==11?t=s.getSelection?s:s.ownerDocument:t=s,t.getSelection()}function OO(s,t){return t?s==t||s.contains(t.nodeType!=1?t.parentNode:t):!1}function $m(s,t){if(!t.anchorNode)return!1;try{return OO(s,t.anchorNode)}catch{return!1}}function Mh(s){return s.nodeType==3?Tl(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function rh(s,t,e,i){return e?rT(s,t,e,i,-1)||rT(s,t,e,i,1):!1}function Pl(s){for(var t=0;;t++)if(s=s.previousSibling,!s)return t}function Rg(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}function rT(s,t,e,i,n){for(;;){if(s==e&&t==i)return!0;if(t==(n<0?0:ar(s))){if(s.nodeName=="DIV")return!1;let r=s.parentNode;if(!r||r.nodeType!=1)return!1;t=Pl(s)+(n<0?0:1),s=r}else if(s.nodeType==1){if(s=s.childNodes[t+(n<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;t=n<0?ar(s):0}else return!1}}function ar(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function _p(s,t){let e=t?s.left:s.right;return{left:e,right:e,top:s.top,bottom:s.bottom}}function vte(s){let t=s.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function P4(s,t){let e=t.width/s.offsetWidth,i=t.height/s.offsetHeight;return(e>.995&&e<1.005||!isFinite(e)||Math.abs(t.width-s.offsetWidth)<1)&&(e=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(t.height-s.offsetHeight)<1)&&(i=1),{scaleX:e,scaleY:i}}function _te(s,t,e,i,n,r,o,l){let a=s.ownerDocument,c=a.defaultView||window;for(let h=s,f=!1;h&&!f;)if(h.nodeType==1){let m,w=h==a.body,O=1,v=1;if(w)m=vte(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(f=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let P=h.getBoundingClientRect();({scaleX:O,scaleY:v}=P4(h,P)),m={left:P.left,right:P.left+h.clientWidth*O,top:P.top,bottom:P.top+h.clientHeight*v}}let k=0,C=0;if(n=="nearest")t.top<m.top?(C=t.top-(m.top+o),e>0&&t.bottom>m.bottom+C&&(C=t.bottom-m.bottom+o)):t.bottom>m.bottom&&(C=t.bottom-m.bottom+o,e<0&&t.top-C<m.top&&(C=t.top-(m.top+o)));else{let P=t.bottom-t.top,V=m.bottom-m.top;C=(n=="center"&&P<=V?t.top+P/2-V/2:n=="start"||n=="center"&&e<0?t.top-o:t.bottom-V+o)-m.top}if(i=="nearest"?t.left<m.left?(k=t.left-(m.left+r),e>0&&t.right>m.right+k&&(k=t.right-m.right+r)):t.right>m.right&&(k=t.right-m.right+r,e<0&&t.left<m.left+k&&(k=t.left-(m.left+r))):k=(i=="center"?t.left+(t.right-t.left)/2-(m.right-m.left)/2:i=="start"==l?t.left-r:t.right-(m.right-m.left)+r)-m.left,k||C)if(w)c.scrollBy(k,C);else{let P=0,V=0;if(C){let Q=h.scrollTop;h.scrollTop+=C/v,V=(h.scrollTop-Q)*v}if(k){let Q=h.scrollLeft;h.scrollLeft+=k/O,P=(h.scrollLeft-Q)*O}t={left:t.left-P,top:t.top-V,right:t.right-P,bottom:t.bottom-V},P&&Math.abs(P-k)<1&&(i="nearest"),V&&Math.abs(V-C)<1&&(n="nearest")}if(w)break;(t.top<m.top||t.bottom>m.bottom||t.left<m.left||t.right>m.right)&&(t={left:Math.max(t.left,m.left),right:Math.min(t.right,m.right),top:Math.max(t.top,m.top),bottom:Math.min(t.bottom,m.bottom)}),h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function kte(s){let t=s.ownerDocument,e,i;for(let n=s.parentNode;n&&!(n==t.body||e&&i);)if(n.nodeType==1)!i&&n.scrollHeight>n.clientHeight&&(i=n),!e&&n.scrollWidth>n.clientWidth&&(e=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:e,y:i}}class Ste{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:i}=t;this.set(e,Math.min(t.anchorOffset,e?ar(e):0),i,Math.min(t.focusOffset,i?ar(i):0))}set(t,e,i,n){this.anchorNode=t,this.anchorOffset=e,this.focusNode=i,this.focusOffset=n}}let Ta=null;function T4(s){if(s.setActive)return s.setActive();if(Ta)return s.focus(Ta);let t=[];for(let e=s;e&&(t.push(e,e.scrollTop,e.scrollLeft),e!=e.ownerDocument);e=e.parentNode);if(s.focus(Ta==null?{get preventScroll(){return Ta={preventScroll:!0},!0}}:void 0),!Ta){Ta=!1;for(let e=0;e<t.length;){let i=t[e++],n=t[e++],r=t[e++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let oT;function Tl(s,t,e=t){let i=oT||(oT=document.createRange());return i.setEnd(s,e),i.setStart(s,t),i}function Ya(s,t,e,i){let n={key:t,code:t,keyCode:e,which:e,cancelable:!0};i&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=i);let r=new KeyboardEvent("keydown",n);r.synthetic=!0,s.dispatchEvent(r);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,s.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function Cte(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function E4(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function Pte(s,t){let e=t.focusNode,i=t.focusOffset;if(!e||t.anchorNode!=e||t.anchorOffset!=i)return!1;for(i=Math.min(i,ar(e));;)if(i){if(e.nodeType!=1)return!1;let n=e.childNodes[i-1];n.contentEditable=="false"?i--:(e=n,i=ar(e))}else{if(e==s)return!0;i=Pl(e),e=e.parentNode}}function A4(s){return s.scrollTop>Math.max(1,s.scrollHeight-s.clientHeight-4)}function I4(s,t){for(let e=s,i=t;;){if(e.nodeType==3&&i>0)return{node:e,offset:i};if(e.nodeType==1&&i>0){if(e.contentEditable=="false")return null;e=e.childNodes[i-1],i=ar(e)}else if(e.parentNode&&!Rg(e))i=Pl(e),e=e.parentNode;else return null}}function R4(s,t){for(let e=s,i=t;;){if(e.nodeType==3&&i<e.nodeValue.length)return{node:e,offset:i};if(e.nodeType==1&&i<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[i],i=0}else if(e.parentNode&&!Rg(e))i=Pl(e)+1,e=e.parentNode;else return null}}class zi{constructor(t,e,i=!0){this.node=t,this.offset=e,this.precise=i}static before(t,e){return new zi(t.parentNode,Pl(t),e)}static after(t,e){return new zi(t.parentNode,Pl(t)+1,e)}}const ky=[];class yt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let i of this.children){if(i==t)return e;e+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(this.flags&2){let i=this.dom,n=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=n?n.nextSibling:i.firstChild)){let l=yt.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(t,e),o.flags&=-8}if(r=n?n.nextSibling:i.firstChild,e&&!e.written&&e.node==i&&r!=o.dom&&(e.written=!0),o.dom.parentNode==i)for(;r&&r!=o.dom;)r=lT(r);else i.insertBefore(o.dom,r);n=o.dom}for(r=n?n.nextSibling:i.firstChild,r&&e&&e.node==i&&(e.written=!0);r;)r=lT(r)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(t,e),i.flags&=-8)}reuseDOM(t){}localPosFromDOM(t,e){let i;if(t==this.dom)i=this.dom.childNodes[e];else{let n=ar(t)==0?0:e==0?-1:1;for(;;){let r=t.parentNode;if(r==this.dom)break;n==0&&r.firstChild!=r.lastChild&&(t==r.firstChild?n=-1:n=1),t=r}n<0?i=t:i=t.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!yt.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,r=0;;n++){let o=this.children[n];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(t,e,i=0){let n=-1,r=-1,o=-1,l=-1;for(let a=0,c=i,h=i;a<this.children.length;a++){let f=this.children[a],m=c+f.length;if(c<t&&m>e)return f.domBoundsAround(t,e,c);if(m>=t&&n==-1&&(n=a,r=c),c>e&&f.dom.parentNode==this.dom){o=a,l=h;break}h=m,c=m+f.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),e.flags&1)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.flags&7&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,i=ky){this.markDirty();for(let n=t;n<e;n++){let r=this.children[n];r.parent==this&&i.indexOf(r)<0&&r.destroy()}i.length<250?this.children.splice(t,e-t,...i):this.children=[].concat(this.children.slice(0,t),i,this.children.slice(e));for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new V4(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+(t=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,i,n,r,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!((this.flags|t.flags)&8)}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}yt.prototype.breakAfter=0;function lT(s){let t=s.nextSibling;return s.parentNode.removeChild(s),t}class V4{constructor(t,e,i){this.children=t,this.pos=e,this.i=i,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function M4(s,t,e,i,n,r,o,l,a){let{children:c}=s,h=c.length?c[t]:null,f=r.length?r[r.length-1]:null,m=f?f.breakAfter:o;if(!(t==i&&h&&!o&&!m&&r.length<2&&h.merge(e,n,r.length?f:null,e==0,l,a))){if(i<c.length){let w=c[i];w&&(n<w.length||w.breakAfter&&(f!=null&&f.breakAfter))?(t==i&&(w=w.split(n),n=0),!m&&f&&w.merge(0,n,f,!0,0,a)?r[r.length-1]=w:((n||w.children.length&&!w.children[0].length)&&w.merge(0,n,null,!1,0,a),r.push(w))):w!=null&&w.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(h&&(h.breakAfter=o,e>0&&(!o&&r.length&&h.merge(e,h.length,r[0],!1,l,0)?h.breakAfter=r.shift().breakAfter:(e<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(e,h.length,null,!1,l,0),t++));t<i&&r.length;)if(c[i-1].become(r[r.length-1]))i--,r.pop(),a=r.length?0:l;else if(c[t].become(r[0]))t++,r.shift(),l=r.length?0:a;else break;!r.length&&t&&i<c.length&&!c[t-1].breakAfter&&c[i].merge(0,0,c[t-1],!1,l,a)&&t--,(t<i||r.length)&&s.replaceChildren(t,i,r)}}function L4(s,t,e,i,n,r){let o=s.childCursor(),{i:l,off:a}=o.findPos(e,1),{i:c,off:h}=o.findPos(t,-1),f=t-e;for(let m of i)f+=m.length;s.length+=f,M4(s,c,h,l,a,i,0,n,r)}let mn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},xO=typeof document<"u"?document:{documentElement:{style:{}}};const yO=/Edge\/(\d+)/.exec(mn.userAgent),B4=/MSIE \d/.test(mn.userAgent),vO=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(mn.userAgent),kp=!!(B4||vO||yO),aT=!kp&&/gecko\/(\d+)/i.test(mn.userAgent),Cb=!kp&&/Chrome\/(\d+)/.exec(mn.userAgent),Tte="webkitFontSmoothing"in xO.documentElement.style,$4=!kp&&/Apple Computer/.test(mn.vendor),cT=$4&&(/Mobile\/\w+/.test(mn.userAgent)||mn.maxTouchPoints>2);var _e={mac:cT||/Mac/.test(mn.platform),windows:/Win/.test(mn.platform),linux:/Linux|X11/.test(mn.platform),ie:kp,ie_version:B4?xO.documentMode||6:vO?+vO[1]:yO?+yO[1]:0,gecko:aT,gecko_version:aT?+(/Firefox\/(\d+)/.exec(mn.userAgent)||[0,0])[1]:0,chrome:!!Cb,chrome_version:Cb?+Cb[1]:0,ios:cT,android:/Android\b/.test(mn.userAgent),safari:$4,webkit_version:Tte?+(/\bAppleWebKit\/(\d+)/.exec(mn.userAgent)||[0,0])[1]:0,tabSize:xO.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Ete=256;class Ls extends yt{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){t.nodeType==3&&this.createDOM(t)}merge(t,e,i){return this.flags&8||i&&(!(i instanceof Ls)||this.length-(e-t)+i.length>Ete||i.flags&8)?!1:(this.text=this.text.slice(0,t)+(i?i.text:"")+this.text.slice(e),this.markDirty(),!0)}split(t){let e=new Ls(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=this.flags&8,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new zi(this.dom,t)}domBoundsAround(t,e,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return Ate(this.dom,t,e)}}class Br extends yt{constructor(t,e=[],i=0){super(),this.mark=t,this.children=e,this.length=i;for(let n of e)n.setParent(this)}setAttrs(t){if(E4(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!((this.flags|t.flags)&8)}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=6)}sync(t,e){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,i,n,r,o){return i&&(!(i instanceof Br&&i.mark.eq(this.mark))||t&&r<=0||e<this.length&&o<=0)?!1:(L4(this,t,e,i?i.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(t){let e=[],i=0,n=-1,r=0;for(let l of this.children){let a=i+l.length;a>t&&e.push(i<t?l.split(t-i):l),n<0&&i>=t&&(n=r),i=a,r++}let o=this.length-t;return this.length=t,n>-1&&(this.children.length=n,this.markDirty()),new Br(this.mark,e,o)}domAtPos(t){return Q4(this,t)}coordsAt(t,e){return N4(this,t,e)}}function Ate(s,t,e){let i=s.nodeValue.length;t>i&&(t=i);let n=t,r=t,o=0;t==0&&e<0||t==i&&e>=0?_e.chrome||_e.gecko||(t?(n--,o=1):r<i&&(r++,o=-1)):e<0?n--:r<i&&r++;let l=Tl(s,n,r).getClientRects();if(!l.length)return null;let a=l[(o?o<0:e>=0)?0:l.length-1];return _e.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,c=>c.width)||a),o?_p(a,o<0):a||null}class ml extends yt{static create(t,e,i){return new ml(t,e,i)}constructor(t,e,i){super(),this.widget=t,this.length=e,this.side=i,this.prevWidget=null}split(t){let e=ml.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,e,i,n,r,o){return i&&(!(i instanceof ml)||!this.widget.compare(i.widget)||t>0&&r<=0||e<this.length&&o<=0)?!1:(this.length=t+(i?i.length:0)+(this.length-e),!0)}become(t){return t instanceof ml&&t.side==this.side&&this.widget.constructor==t.widget.constructor?(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(this.length==0)return Ye.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,i=e&&e.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):Ye.empty}domAtPos(t){return(this.length?t==0:this.side>0)?zi.before(this.dom):zi.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let i=this.widget.coordsAt(this.dom,t,e);if(i)return i;let n=this.dom.getClientRects(),r=null;if(!n.length)return null;let o=this.side?this.side<0:t>0;for(let l=o?n.length-1:0;r=n[l],!(t>0?l==0:l==n.length-1||r.top<r.bottom);l+=o?-1:1);return _p(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class uc extends yt{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof uc&&t.side==this.side}split(){return new uc(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?zi.before(this.dom):zi.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ye.empty}get isHidden(){return!0}}Ls.prototype.children=ml.prototype.children=uc.prototype.children=ky;function Q4(s,t){let e=s.dom,{children:i}=s,n=0;for(let r=0;n<i.length;n++){let o=i[n],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(t>r&&t<l&&o.dom.parentNode==e)return o.domAtPos(t-r);if(t<=r)break;r=l}}for(let r=n;r>0;r--){let o=i[r-1];if(o.dom.parentNode==e)return o.domAtPos(o.length)}for(let r=n;r<i.length;r++){let o=i[r];if(o.dom.parentNode==e)return o.domAtPos(0)}return new zi(e,0)}function D4(s,t,e){let i,{children:n}=s;e>0&&t instanceof Br&&n.length&&(i=n[n.length-1])instanceof Br&&i.mark.eq(t.mark)?D4(i,t.children[0],e-1):(n.push(t),t.setParent(s)),s.length+=t.length}function N4(s,t,e){let i=null,n=-1,r=null,o=-1;function l(c,h){for(let f=0,m=0;f<c.children.length&&m<=h;f++){let w=c.children[f],O=m+w.length;O>=h&&(w.children.length?l(w,h-m):(!r||r.isHidden&&(e>0||Rte(r,w)))&&(O>h||m==O&&w.getSide()>0)?(r=w,o=h-m):(m<h||m==O&&w.getSide()<0&&!w.isHidden)&&(i=w,n=h-m)),m=O}}l(s,t);let a=(e<0?i:r)||i||r;return a?a.coordsAt(Math.max(0,a==i?n:o),e):Ite(s)}function Ite(s){let t=s.dom.lastChild;if(!t)return s.dom.getBoundingClientRect();let e=Mh(t);return e[e.length-1]||null}function Rte(s,t){let e=s.coordsAt(0,1),i=t.coordsAt(0,1);return e&&i&&i.top<e.bottom}function _O(s,t){for(let e in s)e=="class"&&t.class?t.class+=" "+s.class:e=="style"&&t.style?t.style+=";"+s.style:t[e]=s[e];return t}const uT=Object.create(null);function Vg(s,t,e){if(s==t)return!0;s||(s=uT),t||(t=uT);let i=Object.keys(s),n=Object.keys(t);if(i.length-(e&&i.indexOf(e)>-1?1:0)!=n.length-(e&&n.indexOf(e)>-1?1:0))return!1;for(let r of i)if(r!=e&&(n.indexOf(r)==-1||s[r]!==t[r]))return!1;return!0}function kO(s,t,e){let i=!1;if(t)for(let n in t)e&&n in e||(i=!0,n=="style"?s.style.cssText="":s.removeAttribute(n));if(e)for(let n in e)t&&t[n]==e[n]||(i=!0,n=="style"?s.style.cssText=e[n]:s.setAttribute(n,e[n]));return i}function Vte(s){let t=Object.create(null);for(let e=0;e<s.attributes.length;e++){let i=s.attributes[e];t[i.name]=i.value}return t}class Qo{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var tn=function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s}(tn||(tn={}));class Ke extends Sl{constructor(t,e,i,n){super(),this.startSide=t,this.endSide=e,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(t){return new hd(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),i=!!t.block;return e+=i&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new Vo(t,e,e,i,t.widget||null,!1)}static replace(t){let e=!!t.block,i,n;if(t.isBlockGap)i=-5e8,n=4e8;else{let{start:r,end:o}=F4(t,e);i=(r?e?-3e8:-1:5e8)-1,n=(o?e?2e8:1:-6e8)+1}return new Vo(t,i,n,e,t.widget||null,!0)}static line(t){return new dd(t)}static set(t,e=!1){return nt.of(t,e)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ke.none=nt.empty;class hd extends Ke{constructor(t){let{start:e,end:i}=F4(t);super(e?-1:5e8,i?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,i;return this==t||t instanceof hd&&this.tagName==t.tagName&&(this.class||((e=this.attrs)===null||e===void 0?void 0:e.class))==(t.class||((i=t.attrs)===null||i===void 0?void 0:i.class))&&Vg(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}hd.prototype.point=!1;class dd extends Ke{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof dd&&this.spec.class==t.spec.class&&Vg(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}dd.prototype.mapMode=Fi.TrackBefore;dd.prototype.point=!0;class Vo extends Ke{constructor(t,e,i,n,r,o){super(e,i,r,t),this.block=n,this.isReplace=o,this.mapMode=n?e<=0?Fi.TrackBefore:Fi.TrackAfter:Fi.TrackDel}get type(){return this.startSide!=this.endSide?tn.WidgetRange:this.startSide<=0?tn.WidgetBefore:tn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof Vo&&Mte(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}Vo.prototype.point=!0;function F4(s,t=!1){let{inclusiveStart:e,inclusiveEnd:i}=s;return e==null&&(e=s.inclusive),i==null&&(i=s.inclusive),{start:e??t,end:i??t}}function Mte(s,t){return s==t||!!(s&&t&&s.compare(t))}function Qm(s,t,e,i=0){let n=e.length-1;n>=0&&e[n]+i>=s?e[n]=Math.max(e[n],t):e.push(s,t)}class ti extends yt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,i,n,r,o){if(i){if(!(i instanceof ti))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),L4(this,t,e,i?i.children.slice():[],r,o),!0}split(t){let e=new ti;if(e.breakAfter=this.breakAfter,this.length==0)return e;let{i,off:n}=this.childPos(t);n&&(e.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)e.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){Vg(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){D4(this,t,e)}addLineDeco(t){let e=t.spec.attributes,i=t.spec.class;e&&(this.attrs=_O(e,this.attrs||{})),i&&(this.attrs=_O({class:i},this.attrs||{}))}domAtPos(t){return Q4(this,t)}reuseDOM(t){t.nodeName=="DIV"&&(this.setDOM(t),this.flags|=6)}sync(t,e){var i;this.dom?this.flags&4&&(E4(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(kO(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let n=this.dom.lastChild;for(;n&&yt.get(n)instanceof Br;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=yt.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!_e.ios||!this.children.some(r=>r instanceof Ls))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let t=0,e;for(let i of this.children){if(!(i instanceof Ls)||/[^ -~]/.test(i.text))return null;let n=Mh(i.dom);if(n.length!=1)return null;t+=n[0].width,e=n[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(t,e){let i=N4(this,t,e);if(!this.children.length&&i&&this.parent){let{heightOracle:n}=this.parent.view.viewState,r=i.bottom-i.top;if(Math.abs(r-n.lineHeight)<2&&n.textHeight<r){let o=(r-n.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(t){return t instanceof ti&&this.children.length==0&&t.children.length==0&&Vg(this.attrs,t.attrs)&&this.breakAfter==t.breakAfter}covers(){return!0}static find(t,e){for(let i=0,n=0;i<t.children.length;i++){let r=t.children[i],o=n+r.length;if(o>=e){if(r instanceof ti)return r;if(o>e)break}n=o+r.breakAfter}return null}}class Ir extends yt{constructor(t,e,i){super(),this.widget=t,this.length=e,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(t,e,i,n,r,o){return i&&(!(i instanceof Ir)||!this.widget.compare(i.widget)||t>0&&r<=0||e<this.length&&o<=0)?!1:(this.length=t+(i?i.length:0)+(this.length-e),!0)}domAtPos(t){return t==0?zi.before(this.dom):zi.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let i=new Ir(this.widget,e,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return ky}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ye.empty}domBoundsAround(){return null}become(t){return t instanceof Ir&&t.widget.constructor==this.widget.constructor?(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){let i=this.widget.coordsAt(this.dom,t,e);return i||(this.widget instanceof SO?null:_p(this.dom.getBoundingClientRect(),this.length?t==0:e<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:i}=this.deco;return e==i?!1:t<0?e<0:i>0}}class SO extends Qo{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class oh{constructor(t,e,i,n){this.doc=t,this.pos=e,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof Ir&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ti),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(tm(new uc(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(t&&this.content.length&&this.content[this.content.length-1]instanceof Ir)&&this.getLine()}buildText(t,e,i){for(;t>0;){if(this.textOff==this.text.length){let{value:r,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}else this.text=r,this.textOff=0}let n=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-i)),this.getLine().append(tm(new Ls(this.text.slice(this.textOff,this.textOff+n)),e),i),this.atCursorPos=!0,this.textOff+=n,t-=n,i=0}}span(t,e,i,n){this.buildText(e-t,i,n),this.pos=e,this.openStart<0&&(this.openStart=n)}point(t,e,i,n,r,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Vo){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=e-t;if(i instanceof Vo)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ir(i.widget||hc.block,l,i));else{let a=ml.create(i.widget||hc.inline,l,l?0:i.startSide),c=this.atCursorPos&&!a.isEditable&&r<=n.length&&(t<e||i.startSide>0),h=!a.isEditable&&(t<e||r>n.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!c&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),c&&(f.append(tm(new uc(1),n),r),r=n.length+Math.max(0,r-n.length)),f.append(tm(a,n),r),this.atCursorPos=h,this.pendingBuffer=h?t<e||r>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=r)}static build(t,e,i,n,r){let o=new oh(t,e,i,r);return o.openEnd=nt.spans(n,e,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function tm(s,t){for(let e of t)s=new Br(e,[s],s.length);return s}class hc extends Qo{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}hc.inline=new hc("span");hc.block=new hc("div");var Lt=function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s}(Lt||(Lt={}));const El=Lt.LTR,Sy=Lt.RTL;function z4(s){let t=[];for(let e=0;e<s.length;e++)t.push(1<<+s[e]);return t}const Lte=z4("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Bte=z4("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),CO=Object.create(null),Hs=[];for(let s of["()","[]","{}"]){let t=s.charCodeAt(0),e=s.charCodeAt(1);CO[t]=e,CO[e]=-t}function W4(s){return s<=247?Lte[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?Bte[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8204?256:64336<=s&&s<=65023?4:1}const $te=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class xo{get dir(){return this.level%2?Sy:El}constructor(t,e,i){this.from=t,this.to=e,this.level=i}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,i,n){let r=-1;for(let o=0;o<t.length;o++){let l=t[o];if(l.from<=e&&l.to>=e){if(l.level==i)return o;(r<0||(n!=0?n<0?l.from<e:l.to>e:t[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function U4(s,t){if(s.length!=t.length)return!1;for(let e=0;e<s.length;e++){let i=s[e],n=t[e];if(i.from!=n.from||i.to!=n.to||i.direction!=n.direction||!U4(i.inner,n.inner))return!1}return!0}const xt=[];function Qte(s,t,e,i,n){for(let r=0;r<=i.length;r++){let o=r?i[r-1].to:t,l=r<i.length?i[r].from:e,a=r?256:n;for(let c=o,h=a,f=a;c<l;c++){let m=W4(s.charCodeAt(c));m==512?m=h:m==8&&f==4&&(m=16),xt[c]=m==4?2:m,m&7&&(f=m),h=m}for(let c=o,h=a,f=a;c<l;c++){let m=xt[c];if(m==128)c<l-1&&h==xt[c+1]&&h&24?m=xt[c]=h:xt[c]=256;else if(m==64){let w=c+1;for(;w<l&&xt[w]==64;)w++;let O=c&&h==8||w<e&&xt[w]==8?f==1?1:8:256;for(let v=c;v<w;v++)xt[v]=O;c=w-1}else m==8&&f==1&&(xt[c]=1);h=m,m&7&&(f=m)}}}function Dte(s,t,e,i,n){let r=n==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let c=o?i[o-1].to:t,h=o<i.length?i[o].from:e;for(let f=c,m,w,O;f<h;f++)if(w=CO[m=s.charCodeAt(f)])if(w<0){for(let v=l-3;v>=0;v-=3)if(Hs[v+1]==-w){let k=Hs[v+2],C=k&2?n:k&4?k&1?r:n:0;C&&(xt[f]=xt[Hs[v]]=C),l=v;break}}else{if(Hs.length==189)break;Hs[l++]=f,Hs[l++]=m,Hs[l++]=a}else if((O=xt[f])==2||O==1){let v=O==n;a=v?0:1;for(let k=l-3;k>=0;k-=3){let C=Hs[k+2];if(C&2)break;if(v)Hs[k+2]|=2;else{if(C&4)break;Hs[k+2]|=4}}}}}function Nte(s,t,e,i){for(let n=0,r=i;n<=e.length;n++){let o=n?e[n-1].to:s,l=n<e.length?e[n].from:t;for(let a=o;a<l;){let c=xt[a];if(c==256){let h=a+1;for(;;)if(h==l){if(n==e.length)break;h=e[n++].to,l=n<e.length?e[n].from:t}else if(xt[h]==256)h++;else break;let f=r==1,m=(h<t?xt[h]:i)==1,w=f==m?f?1:2:i;for(let O=h,v=n,k=v?e[v-1].to:s;O>a;)O==k&&(O=e[--v].from,k=v?e[v-1].to:s),xt[--O]=w;a=h}else r=c,a++}}}function PO(s,t,e,i,n,r,o){let l=i%2?2:1;if(i%2==n%2)for(let a=t,c=0;a<e;){let h=!0,f=!1;if(c==r.length||a<r[c].from){let v=xt[a];v!=l&&(h=!1,f=v==16)}let m=!h&&l==1?[]:null,w=h?i:i+1,O=a;e:for(;;)if(c<r.length&&O==r[c].from){if(f)break e;let v=r[c];if(!h)for(let k=v.to,C=c+1;;){if(k==e)break e;if(C<r.length&&r[C].from==k)k=r[C++].to;else{if(xt[k]==l)break e;break}}if(c++,m)m.push(v);else{v.from>a&&o.push(new xo(a,v.from,w));let k=v.direction==El!=!(w%2);TO(s,k?i+1:i,n,v.inner,v.from,v.to,o),a=v.to}O=v.to}else{if(O==e||(h?xt[O]!=l:xt[O]==l))break;O++}m?PO(s,a,O,i+1,n,m,o):a<O&&o.push(new xo(a,O,w)),a=O}else for(let a=e,c=r.length;a>t;){let h=!0,f=!1;if(!c||a>r[c-1].to){let v=xt[a-1];v!=l&&(h=!1,f=v==16)}let m=!h&&l==1?[]:null,w=h?i:i+1,O=a;e:for(;;)if(c&&O==r[c-1].to){if(f)break e;let v=r[--c];if(!h)for(let k=v.from,C=c;;){if(k==t)break e;if(C&&r[C-1].to==k)k=r[--C].from;else{if(xt[k-1]==l)break e;break}}if(m)m.push(v);else{v.to<a&&o.push(new xo(v.to,a,w));let k=v.direction==El!=!(w%2);TO(s,k?i+1:i,n,v.inner,v.from,v.to,o),a=v.from}O=v.from}else{if(O==t||(h?xt[O-1]!=l:xt[O-1]==l))break;O--}m?PO(s,O,a,i+1,n,m,o):O<a&&o.push(new xo(O,a,w)),a=O}}function TO(s,t,e,i,n,r,o){let l=t%2?2:1;Qte(s,n,r,i,l),Dte(s,n,r,i,l),Nte(n,r,i,l),PO(s,n,r,t,e,i,o)}function Fte(s,t,e){if(!s)return[new xo(0,0,t==Sy?1:0)];if(t==El&&!e.length&&!$te.test(s))return Z4(s.length);if(e.length)for(;s.length>xt.length;)xt[xt.length]=256;let i=[],n=t==El?0:1;return TO(s,n,n,e,0,s.length,i),i}function Z4(s){return[new xo(0,s,0)]}let H4="";function zte(s,t,e,i,n){var r;let o=i.head-s.from,l=xo.find(t,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc),a=t[l],c=a.side(n,e);if(o==c){let m=l+=n?1:-1;if(m<0||m>=t.length)return null;a=t[l=m],o=a.side(!n,e),c=a.side(n,e)}let h=Ji(s.text,o,a.forward(n,e));(h<a.from||h>a.to)&&(h=c),H4=s.text.slice(Math.min(o,h),Math.max(o,h));let f=l==(n?t.length-1:0)?null:t[l+(n?1:-1)];return f&&h==c&&f.level+(n?0:1)<a.level?ie.cursor(f.side(!n,e)+s.from,f.forward(n,e)?1:-1,f.level):ie.cursor(h+s.from,a.forward(n,e)?-1:1,a.level)}function Wte(s,t,e){for(let i=t;i<e;i++){let n=W4(s.charCodeAt(i));if(n==1)return El;if(n==2||n==4)return Sy}return El}const q4=Pe.define(),X4=Pe.define(),j4=Pe.define(),G4=Pe.define(),EO=Pe.define(),Y4=Pe.define(),K4=Pe.define(),Cy=Pe.define(),Py=Pe.define(),J4=Pe.define({combine:s=>s.some(t=>t)}),e3=Pe.define({combine:s=>s.some(t=>t)}),t3=Pe.define();class Ka{constructor(t,e="nearest",i="nearest",n=5,r=5,o=!1){this.range=t,this.y=e,this.x=i,this.yMargin=n,this.xMargin=r,this.isSnapshot=o}map(t){return t.empty?this:new Ka(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new Ka(ie.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const im=st.define({map:(s,t)=>s.map(t)}),i3=st.define();function $n(s,t,e){let i=s.facet(G4);i.length?i[0](t):window.onerror&&window.onerror(String(t),e,void 0,void 0,t)||(e?console.error(e+":",t):console.error(t))}const Pr=Pe.define({combine:s=>s.length?s[0]:!0});let Ute=0;const za=Pe.define({combine(s){return s.filter((t,e)=>{for(let i=0;i<e;i++)if(s[i].plugin==t.plugin)return!1;return!0})}});class Ui{constructor(t,e,i,n,r){this.id=t,this.create=e,this.domEventHandlers=i,this.domEventObservers=n,this.baseExtensions=r(this),this.extension=this.baseExtensions.concat(za.of({plugin:this,arg:void 0}))}of(t){return this.baseExtensions.concat(za.of({plugin:this,arg:t}))}static define(t,e){const{eventHandlers:i,eventObservers:n,provide:r,decorations:o}=e||{};return new Ui(Ute++,t,i,n,l=>{let a=[];return o&&a.push(Lh.of(c=>{let h=c.plugin(l);return h?o(h):Ke.none})),r&&a.push(r(l)),a})}static fromClass(t,e){return Ui.define((i,n)=>new t(i,n),e)}}class Pb{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(t){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(i){if($n(e.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(t,this.spec.arg)}catch(e){$n(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(!((e=this.value)===null||e===void 0)&&e.destroy)try{this.value.destroy()}catch(i){$n(t.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const n3=Pe.define(),Ty=Pe.define(),Lh=Pe.define(),s3=Pe.define(),Ey=Pe.define(),r3=Pe.define();function hT(s,t){let e=s.state.facet(r3);if(!e.length)return e;let i=e.map(r=>r instanceof Function?r(s):r),n=[];return nt.spans(i,t.from,t.to,{point(){},span(r,o,l,a){let c=r-t.from,h=o-t.from,f=n;for(let m=l.length-1;m>=0;m--,a--){let w=l[m].spec.bidiIsolate,O;if(w==null&&(w=Wte(t.text,c,h)),a>0&&f.length&&(O=f[f.length-1]).to==c&&O.direction==w)O.to=h,f=O.inner;else{let v={from:c,to:h,direction:w,inner:[]};f.push(v),f=v.inner}}}}),n}const o3=Pe.define();function Ay(s){let t=0,e=0,i=0,n=0;for(let r of s.state.facet(o3)){let o=r(s);o&&(o.left!=null&&(t=Math.max(t,o.left)),o.right!=null&&(e=Math.max(e,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(n=Math.max(n,o.bottom)))}return{left:t,right:e,top:i,bottom:n}}const Fu=Pe.define();class os{constructor(t,e,i,n){this.fromA=t,this.toA=e,this.fromB=i,this.toB=n}join(t){return new os(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,i=this;for(;e>0;e--){let n=t[e-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),t.splice(e-1,1)}}return t.splice(e,0,i),t}static extendWithRanges(t,e){if(e.length==0)return t;let i=[];for(let n=0,r=0,o=0,l=0;;n++){let a=n==t.length?null:t[n],c=o-l,h=a?a.fromB:1e9;for(;r<e.length&&e[r]<h;){let f=e[r],m=e[r+1],w=Math.max(l,f),O=Math.min(h,m);if(w<=O&&new os(w+c,O+c,w,O).addToSet(i),m>h)break;r+=2}if(!a)return i;new os(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class Mg{constructor(t,e,i){this.view=t,this.state=e,this.transactions=i,this.flags=0,this.startState=t.state,this.changes=li.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let n=[];this.changes.iterChangedRanges((r,o,l,a)=>n.push(new os(r,o,l,a))),this.changedRanges=n}static create(t,e,i){return new Mg(t,e,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class dT extends yt{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ke.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new ti],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new os(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let i=t.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:h})=>h<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((e=this.domChanged)===null||e===void 0)&&e.newSel?n=this.domChanged.newSel.head:!Yte(t.changes,this.hasComposition)&&!t.selectionSet&&(n=t.state.selection.main.head));let r=n>-1?Hte(this.view,t.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:h}=this.hasComposition;i=new os(c,h,t.changes.mapPos(c,-1),t.changes.mapPos(h,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(_e.ie||_e.chrome)&&!r&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=jte(o,l,t.changes);return i=os.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,t.startState.doc.length,r),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=_e.chrome||_e.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Ir&&o.widget instanceof SO&&r.push(o.dom);n.updateGaps(r)}updateChildren(t,e,i){let n=i?i.range.addToSet(t.slice()):t,r=this.childCursor(e);for(let o=n.length-1;;o--){let l=o>=0?n[o]:null;if(!l)break;let{fromA:a,toA:c,fromB:h,toB:f}=l,m,w,O,v;if(i&&i.range.fromB<f&&i.range.toB>h){let Q=oh.build(this.view.state.doc,h,i.range.fromB,this.decorations,this.dynamicDecorationMap),D=oh.build(this.view.state.doc,i.range.toB,f,this.decorations,this.dynamicDecorationMap);w=Q.breakAtStart,O=Q.openStart,v=D.openEnd;let q=this.compositionView(i);D.breakAtStart?q.breakAfter=1:D.content.length&&q.merge(q.length,q.length,D.content[0],!1,D.openStart,0)&&(q.breakAfter=D.content[0].breakAfter,D.content.shift()),Q.content.length&&q.merge(0,0,Q.content[Q.content.length-1],!0,0,Q.openEnd)&&Q.content.pop(),m=Q.content.concat(q).concat(D.content)}else({content:m,breakAtStart:w,openStart:O,openEnd:v}=oh.build(this.view.state.doc,h,f,this.decorations,this.dynamicDecorationMap));let{i:k,off:C}=r.findPos(c,1),{i:P,off:V}=r.findPos(a,-1);M4(this,P,V,k,C,m,w,O,v)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let i of e.effects)i.is(i3)&&(this.editContextFormatting=i.value)}compositionView(t){let e=new Ls(t.text.nodeValue);e.flags|=8;for(let{deco:n}of t.marks)e=new Br(n,[e],e.length);let i=new ti;return i.append(e,0),i}fixCompositionDOM(t){let e=(r,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=yt.get(r);l&&l!=o&&(l.dom=null),o.setDOM(r)},i=this.childPos(t.range.fromB,1),n=this.children[i.i];e(t.line,n);for(let r=t.marks.length-1;r>=-1;r--)i=n.childPos(i.off,1),n=n.children[i.i],e(r>=0?t.marks[r].node:t.text,n)}updateSelection(t=!1,e=!1){(t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,r=!n&&!(this.view.state.facet(Pr)||this.dom.tabIndex>-1)&&$m(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||e||r))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),c=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(_e.gecko&&l.empty&&!this.hasComposition&&Zte(a)){let f=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(f,a.node.childNodes[a.offset]||null)),a=c=new zi(f,0),o=!0}let h=this.view.observer.selectionRange;(o||!h.focusNode||(!rh(a.node,a.offset,h.anchorNode,h.anchorOffset)||!rh(c.node,c.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,l))&&(this.view.observer.ignore(()=>{_e.android&&_e.chrome&&this.dom.contains(h.focusNode)&&Gte(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=Vh(this.view.root);if(f)if(l.empty){if(_e.gecko){let m=qte(a.node,a.offset);if(m&&m!=3){let w=(m==1?I4:R4)(a.node,a.offset);w&&(a=new zi(w.node,w.offset))}}f.collapse(a.node,a.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(a.node,a.offset);try{f.extend(c.node,c.offset)}catch{}}else{let m=document.createRange();l.anchor>l.head&&([a,c]=[c,a]),m.setEnd(c.node,c.offset),m.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(m)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,c)),this.impreciseAnchor=a.precise?null:new zi(h.anchorNode,h.anchorOffset),this.impreciseHead=c.precise?null:new zi(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&rh(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,i=Vh(t.root),{anchorNode:n,anchorOffset:r}=t.observer.selectionRange;if(!i||!e.empty||!e.assoc||!i.modify)return;let o=ti.find(this,e.head);if(!o)return;let l=o.posAtStart;if(e.head==l||e.head==l+o.length)return;let a=this.coordsAt(e.head,-1),c=this.coordsAt(e.head,1);if(!a||!c||a.bottom>c.top)return;let h=this.domAtPos(e.head+e.assoc);i.collapse(h.node,h.offset),i.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let f=t.observer.selectionRange;t.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=e.from&&i.collapse(n,r)}moveToLine(t){let e=this.dom,i;if(t.node!=e)return t;for(let n=t.offset;!i&&n<e.childNodes.length;n++){let r=yt.get(e.childNodes[n]);r instanceof ti&&(i=r.domAtPos(0))}for(let n=t.offset-1;!i&&n>=0;n--){let r=yt.get(e.childNodes[n]);r instanceof ti&&(i=r.domAtPos(r.length))}return i?new zi(i.node,i.offset,!0):t}nearest(t){for(let e=t;e;){let i=yt.get(e);if(i&&i.rootView==this)return i;e=e.parentNode}return null}posFromDOM(t,e){let i=this.nearest(t);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(t,e)+i.posAtStart}domAtPos(t){let{i:e,off:i}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let n=this.children[e];if(i<n.length||n instanceof ti)break;e++,i=0}return this.children[e].domAtPos(i)}coordsAt(t,e){let i=null,n=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=r-l.breakAfter,c=a-l.length;if(a<t)break;if(c<=t&&(c<t||l.covers(-1))&&(a>t||l.covers(1))&&(!i||l instanceof ti&&!(i instanceof ti&&e>=0)))i=l,n=c;else if(i&&c==t&&a==t&&l instanceof Ir&&Math.abs(e)<2){if(l.deco.startSide<0)break;o&&(i=null)}r=c}return i?i.coordsAt(t-n,e):null}coordsForChar(t){let{i:e,off:i}=this.childPos(t,1),n=this.children[e];if(!(n instanceof ti))return null;for(;n.children.length;){let{i:l,off:a}=n.childPos(i,1);for(;;l++){if(l==n.children.length)return null;if((n=n.children[l]).length)break}i=a}if(!(n instanceof Ls))return null;let r=Ji(n.text,i);if(r==i)return null;let o=Tl(n.dom,i,r).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(t){let e=[],{from:i,to:n}=t,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Lt.LTR;for(let c=0,h=0;h<this.children.length;h++){let f=this.children[h],m=c+f.length;if(m>n)break;if(c>=i){let w=f.dom.getBoundingClientRect();if(e.push(w.height),o){let O=f.dom.lastChild,v=O?Mh(O):[];if(v.length){let k=v[v.length-1],C=a?k.right-w.left:w.right-k.left;C>l&&(l=C,this.minWidth=r,this.minWidthFrom=c,this.minWidthTo=m)}}}c=m+f.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return getComputedStyle(this.children[e].dom).direction=="rtl"?Lt.RTL:Lt.LTR}measureTextSize(){for(let r of this.children)if(r instanceof ti){let o=r.measureTextSize();if(o)return o}let t=document.createElement("div"),e,i,n;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(t);let r=Mh(t.firstChild)[0];e=t.getBoundingClientRect().height,i=r?r.width/27:7,n=r?r.height:e,t.remove()}),{lineHeight:e,charWidth:i,textHeight:n}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new V4(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let i=0,n=0;;n++){let r=n==e.viewports.length?null:e.viewports[n],o=r?r.from-1:this.length;if(o>i){let l=(e.lineBlockAt(o).bottom-e.lineBlockAt(i).top)/this.view.scaleY;t.push(Ke.replace({widget:new SO(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return Ke.set(t)}updateDeco(){let t=1,e=this.view.state.facet(Lh).map(r=>(this.dynamicDecorationMap[t++]=typeof r=="function")?r(this.view):r),i=!1,n=this.view.state.facet(s3).map((r,o)=>{let l=typeof r=="function";return l&&(i=!0),l?r(this.view):r});for(n.length&&(this.dynamicDecorationMap[t++]=i,e.push(nt.join(n))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let c=this.view.viewState.lineBlockAt(t.range.head);this.view.scrollDOM.scrollTop=c.top-t.yMargin,this.view.scrollDOM.scrollLeft=t.xMargin;return}for(let c of this.view.state.facet(t3))try{if(c(this.view,t.range,t))return!0}catch(h){$n(this.view.state,h,"scroll handler")}let{range:e}=t,i=this.coordsAt(e.head,e.empty?e.assoc:e.head>e.anchor?-1:1),n;if(!i)return;!e.empty&&(n=this.coordsAt(e.anchor,e.anchor>e.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let r=Ay(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;_te(this.view.scrollDOM,o,e.head<e.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,l),-l),Math.max(Math.min(t.yMargin,a),-a),this.view.textDirection==Lt.LTR)}}function Zte(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}function l3(s,t){let e=s.observer.selectionRange;if(!e.focusNode)return null;let i=I4(e.focusNode,e.focusOffset),n=R4(e.focusNode,e.focusOffset),r=i||n;if(n&&i&&n.node!=i.node){let l=yt.get(n.node);if(!l||l instanceof Ls&&l.text!=n.node.nodeValue)r=n;else if(s.docView.lastCompositionAfterCursor){let a=yt.get(i.node);!a||a instanceof Ls&&a.text!=i.node.nodeValue||(r=n)}}if(s.docView.lastCompositionAfterCursor=r!=i,!r)return null;let o=t-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function Hte(s,t,e){let i=l3(s,e);if(!i)return null;let{node:n,from:r,to:o}=i,l=n.nodeValue;if(/[\n\r]/.test(l)||s.state.doc.sliceString(i.from,i.to)!=l)return null;let a=t.invertedDesc,c=new os(a.mapPos(r),a.mapPos(o),r,o),h=[];for(let f=n.parentNode;;f=f.parentNode){let m=yt.get(f);if(m instanceof Br)h.push({node:f,deco:m.mark});else{if(m instanceof ti||f.nodeName=="DIV"&&f.parentNode==s.contentDOM)return{range:c,text:n,marks:h,line:f};if(f!=s.contentDOM)h.push({node:f,deco:new hd({inclusive:!0,attributes:Vte(f),tagName:f.tagName.toLowerCase()})});else return null}}}function qte(s,t){return s.nodeType!=1?0:(t&&s.childNodes[t-1].contentEditable=="false"?1:0)|(t<s.childNodes.length&&s.childNodes[t].contentEditable=="false"?2:0)}let Xte=class{constructor(){this.changes=[]}compareRange(t,e){Qm(t,e,this.changes)}comparePoint(t,e){Qm(t,e,this.changes)}boundChange(t){Qm(t,t,this.changes)}};function jte(s,t,e){let i=new Xte;return nt.compare(s,t,e,i),i.changes}function Gte(s,t){for(let e=s;e&&e!=t;e=e.assignedSlot||e.parentNode)if(e.nodeType==1&&e.contentEditable=="false")return!0;return!1}function Yte(s,t){let e=!1;return t&&s.iterChangedRanges((i,n)=>{i<t.to&&n>t.from&&(e=!0)}),e}function Kte(s,t,e=1){let i=s.charCategorizer(t),n=s.doc.lineAt(t),r=t-n.from;if(n.length==0)return ie.cursor(t);r==0?e=1:r==n.length&&(e=-1);let o=r,l=r;e<0?o=Ji(n.text,r,!1):l=Ji(n.text,r);let a=i(n.text.slice(o,l));for(;o>0;){let c=Ji(n.text,o,!1);if(i(n.text.slice(c,o))!=a)break;o=c}for(;l<n.length;){let c=Ji(n.text,l);if(i(n.text.slice(l,c))!=a)break;l=c}return ie.range(o+n.from,l+n.from)}function Jte(s,t){return t.left>s?t.left-s:Math.max(0,s-t.right)}function eie(s,t){return t.top>s?t.top-s:Math.max(0,s-t.bottom)}function Tb(s,t){return s.top<t.bottom-1&&s.bottom>t.top+1}function fT(s,t){return t<s.top?{top:t,left:s.left,right:s.right,bottom:s.bottom}:s}function mT(s,t){return t>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:t}:s}function AO(s,t,e){let i,n,r,o,l=!1,a,c,h,f;for(let O=s.firstChild;O;O=O.nextSibling){let v=Mh(O);for(let k=0;k<v.length;k++){let C=v[k];n&&Tb(n,C)&&(C=fT(mT(C,n.bottom),n.top));let P=Jte(t,C),V=eie(e,C);if(P==0&&V==0)return O.nodeType==3?gT(O,t,e):AO(O,t,e);(!i||o>V||o==V&&r>P)&&(i=O,n=C,r=P,o=V,l=P?t<C.left?k>0:k<v.length-1:!0),P==0?e>C.bottom&&(!h||h.bottom<C.bottom)?(a=O,h=C):e<C.top&&(!f||f.top>C.top)&&(c=O,f=C):h&&Tb(h,C)?h=mT(h,C.bottom):f&&Tb(f,C)&&(f=fT(f,C.top))}}if(h&&h.bottom>=e?(i=a,n=h):f&&f.top<=e&&(i=c,n=f),!i)return{node:s,offset:0};let m=Math.max(n.left,Math.min(n.right,t));if(i.nodeType==3)return gT(i,m,e);if(l&&i.contentEditable!="false")return AO(i,m,e);let w=Array.prototype.indexOf.call(s.childNodes,i)+(t>=(n.left+n.right)/2?1:0);return{node:s,offset:w}}function gT(s,t,e){let i=s.nodeValue.length,n=-1,r=1e9,o=0;for(let l=0;l<i;l++){let a=Tl(s,l,l+1).getClientRects();for(let c=0;c<a.length;c++){let h=a[c];if(h.top==h.bottom)continue;o||(o=t-h.left);let f=(h.top>e?h.top-e:e-h.bottom)-1;if(h.left-1<=t&&h.right+1>=t&&f<r){let m=t>=(h.left+h.right)/2,w=m;if((_e.chrome||_e.gecko)&&Tl(s,l).getBoundingClientRect().left==h.right&&(w=!m),f<=0)return{node:s,offset:l+(w?1:0)};n=l+(w?1:0),r=f}}}return{node:s,offset:n>-1?n:o>0?s.nodeValue.length:0}}function a3(s,t,e,i=-1){var n,r;let o=s.contentDOM.getBoundingClientRect(),l=o.top+s.viewState.paddingTop,a,{docHeight:c}=s.viewState,{x:h,y:f}=t,m=f-l;if(m<0)return 0;if(m>c)return s.state.doc.length;for(let Q=s.viewState.heightOracle.textHeight/2,D=!1;a=s.elementAtHeight(m),a.type!=tn.Text;)for(;m=i>0?a.bottom+Q:a.top-Q,!(m>=0&&m<=c);){if(D)return e?null:0;D=!0,i=-i}f=l+m;let w=a.from;if(w<s.viewport.from)return s.viewport.from==0?0:e?null:pT(s,o,a,h,f);if(w>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:e?null:pT(s,o,a,h,f);let O=s.dom.ownerDocument,v=s.root.elementFromPoint?s.root:O,k=v.elementFromPoint(h,f);k&&!s.contentDOM.contains(k)&&(k=null),k||(h=Math.max(o.left+1,Math.min(o.right-1,h)),k=v.elementFromPoint(h,f),k&&!s.contentDOM.contains(k)&&(k=null));let C,P=-1;if(k&&((n=s.docView.nearest(k))===null||n===void 0?void 0:n.isEditable)!=!1){if(O.caretPositionFromPoint){let Q=O.caretPositionFromPoint(h,f);Q&&({offsetNode:C,offset:P}=Q)}else if(O.caretRangeFromPoint){let Q=O.caretRangeFromPoint(h,f);Q&&({startContainer:C,startOffset:P}=Q,(!s.contentDOM.contains(C)||_e.safari&&tie(C,P,h)||_e.chrome&&iie(C,P,h))&&(C=void 0))}C&&(P=Math.min(ar(C),P))}if(!C||!s.docView.dom.contains(C)){let Q=ti.find(s.docView,w);if(!Q)return m>a.top+a.height/2?a.to:a.from;({node:C,offset:P}=AO(Q.dom,h,f))}let V=s.docView.nearest(C);if(!V)return null;if(V.isWidget&&((r=V.dom)===null||r===void 0?void 0:r.nodeType)==1){let Q=V.dom.getBoundingClientRect();return t.y<Q.top||t.y<=Q.bottom&&t.x<=(Q.left+Q.right)/2?V.posAtStart:V.posAtEnd}else return V.localPosFromDOM(C,P)+V.posAtStart}function pT(s,t,e,i,n){let r=Math.round((i-t.left)*s.defaultCharacterWidth);if(s.lineWrapping&&e.height>s.defaultLineHeight*1.5){let l=s.viewState.heightOracle.textHeight,a=Math.floor((n-e.top-(s.defaultLineHeight-l)*.5)/l);r+=a*s.viewState.heightOracle.lineLength}let o=s.state.sliceDoc(e.from,e.to);return e.from+pO(o,r,s.state.tabSize)}function tie(s,t,e){let i,n=s;if(s.nodeType!=3||t!=(i=s.nodeValue.length))return!1;for(;;){let r=n.nextSibling;if(r){if(r.nodeName=="BR")break;return!1}else{let o=n.parentNode;if(!o||o.nodeName=="DIV")break;n=o}}return Tl(s,i-1,i).getBoundingClientRect().right>e}function iie(s,t,e){if(t!=0)return!1;for(let n=s;;){let r=n.parentNode;if(!r||r.nodeType!=1||r.firstChild!=n)return!1;if(r.classList.contains("cm-line"))break;n=r}let i=s.nodeType==1?s.getBoundingClientRect():Tl(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return e-i.left>5}function IO(s,t,e){let i=s.lineBlockAt(t);if(Array.isArray(i.type)){let n;for(let r of i.type){if(r.from>t)break;if(!(r.to<t)){if(r.from<t&&r.to>t)return r;(!n||r.type==tn.Text&&(n.type!=r.type||(e<0?r.from<t:r.to>t)))&&(n=r)}}return n||i}return i}function nie(s,t,e,i){let n=IO(s,t.head,t.assoc||-1),r=!i||n.type!=tn.Text||!(s.lineWrapping||n.widgetLineBreaks)?null:s.coordsAtPos(t.assoc<0&&t.head>n.from?t.head-1:t.head);if(r){let o=s.dom.getBoundingClientRect(),l=s.textDirectionAt(n.from),a=s.posAtCoords({x:e==(l==Lt.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(a!=null)return ie.cursor(a,e?-1:1)}return ie.cursor(e?n.to:n.from,e?-1:1)}function wT(s,t,e,i){let n=s.state.doc.lineAt(t.head),r=s.bidiSpans(n),o=s.textDirectionAt(n.from);for(let l=t,a=null;;){let c=zte(n,r,o,l,e),h=H4;if(!c){if(n.number==(e?s.state.doc.lines:1))return l;h=`
`,n=s.state.doc.line(n.number+(e?1:-1)),r=s.bidiSpans(n),c=s.visualLineSide(n,!e)}if(a){if(!a(h))return l}else{if(!i)return c;a=i(h)}l=c}}function sie(s,t,e){let i=s.state.charCategorizer(t),n=i(e);return r=>{let o=i(r);return n==es.Space&&(n=o),n==o}}function rie(s,t,e,i){let n=t.head,r=e?1:-1;if(n==(e?s.state.doc.length:0))return ie.cursor(n,t.assoc);let o=t.goalColumn,l,a=s.contentDOM.getBoundingClientRect(),c=s.coordsAtPos(n,t.assoc||-1),h=s.documentTop;if(c)o==null&&(o=c.left-a.left),l=r<0?c.top:c.bottom;else{let w=s.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,s.defaultCharacterWidth*(n-w.from))),l=(r<0?w.top:w.bottom)+h}let f=a.left+o,m=i??s.viewState.heightOracle.textHeight>>1;for(let w=0;;w+=10){let O=l+(m+w)*r,v=a3(s,{x:f,y:O},!1,r);if(O<a.top||O>a.bottom||(r<0?v<n:v>n)){let k=s.docView.coordsForChar(v),C=!k||O<k.top?-1:1;return ie.cursor(v,C,void 0,o)}}}function Dm(s,t,e){for(;;){let i=0;for(let n of s)n.between(t-1,t+1,(r,o,l)=>{if(t>r&&t<o){let a=i||e||(t-r<o-t?-1:1);t=a<0?r:o,i=a}});if(!i)return t}}function Eb(s,t,e){let i=Dm(s.state.facet(Ey).map(n=>n(s)),e.from,t.head>e.from?-1:1);return i==e.from?e:ie.cursor(i,i<e.from?1:-1)}const zu="￿";class oie{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(at.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=zu}readRange(t,e){if(!t)return this;let i=t.parentNode;for(let n=t;;){this.findPointBefore(i,n);let r=this.text.length;this.readNode(n);let o=n.nextSibling;if(o==e)break;let l=yt.get(n),a=yt.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:Rg(n))||Rg(o)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>r)&&this.lineBreak(),n=o}return this.findPointBefore(i,e),this}readTextNode(t){let e=t.nodeValue;for(let i of this.points)i.node==t&&(i.pos=this.text.length+Math.min(i.offset,e.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=e.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(e))&&(r=l.index,o=l[0].length),this.append(e.slice(i,r<0?e.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==t&&a.pos>this.text.length&&(a.pos-=o-1);i=r+o}}readNode(t){if(t.cmIgnore)return;let e=yt.get(t),i=e&&e.overrideDOMText;if(i!=null){this.findPointInside(t,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let i of this.points)i.node==t&&t.childNodes[i.offset]==e&&(i.pos=this.text.length)}findPointInside(t,e){for(let i of this.points)(t.nodeType==3?i.node==t:t.contains(i.node))&&(i.pos=this.text.length+(lie(t,i.node,i.offset)?e:0))}}function lie(s,t,e){for(;;){if(!t||e<ar(t))return!1;if(t==s)return!0;e=Pl(t)+1,t=t.parentNode}}class bT{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class aie{constructor(t,e,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:r,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,i,0))){let l=r||o?[]:hie(t),a=new oie(l,t.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=die(l,this.bounds.from)}else{let l=t.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!OO(t.contentDOM,l.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(l.focusNode,l.focusOffset),c=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!OO(t.contentDOM,l.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(l.anchorNode,l.anchorOffset),h=t.viewport;if((_e.ios||_e.chrome)&&t.state.selection.main.empty&&a!=c&&(h.from>0||h.to<t.state.doc.length)){let f=Math.min(a,c),m=Math.max(a,c),w=h.from-f,O=h.to-m;(w==0||w==1||f==0)&&(O==0||O==-1||m==t.state.doc.length)&&(a=0,c=t.state.doc.length)}this.newSel=ie.single(c,a)}}}function c3(s,t){let e,{newSel:i}=t,n=s.state.selection.main,r=s.inputState.lastKeyTime>Date.now()-100?s.inputState.lastKeyCode:-1;if(t.bounds){let{from:o,to:l}=t.bounds,a=n.from,c=null;(r===8||_e.android&&t.text.length<l-o)&&(a=n.to,c="end");let h=uie(s.state.doc.sliceString(o,l,zu),t.text,a-o,c);h&&(_e.chrome&&r==13&&h.toB==h.from+2&&t.text.slice(h.from,h.toB)==zu+zu&&h.toB--,e={from:o+h.from,to:o+h.toA,insert:Ye.of(t.text.slice(h.from,h.toB).split(zu))})}else i&&(!s.hasFocus&&s.state.facet(Pr)||i.main.eq(n))&&(i=null);if(!e&&!i)return!1;if(!e&&t.typeOver&&!n.empty&&i&&i.main.empty?e={from:n.from,to:n.to,insert:s.state.doc.slice(n.from,n.to)}:(_e.mac||_e.android)&&e&&e.from==e.to&&e.from==n.head-1&&/^\. ?$/.test(e.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(i&&e.insert.length==2&&(i=ie.single(i.main.anchor-1,i.main.head-1)),e={from:e.from,to:e.to,insert:Ye.of([e.insert.toString().replace("."," ")])}):e&&e.from>=n.from&&e.to<=n.to&&(e.from!=n.from||e.to!=n.to)&&n.to-n.from-(e.to-e.from)<=4?e={from:n.from,to:n.to,insert:s.state.doc.slice(n.from,e.from).append(e.insert).append(s.state.doc.slice(e.to,n.to))}:_e.chrome&&e&&e.from==e.to&&e.from==n.head&&e.insert.toString()==`
 `&&s.lineWrapping&&(i&&(i=ie.single(i.main.anchor-1,i.main.head-1)),e={from:n.from,to:n.to,insert:Ye.of([" "])}),e)return Iy(s,e,i,r);if(i&&!i.main.eq(n)){let o=!1,l="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(o=!0),l=s.inputState.lastSelectionOrigin),s.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function Iy(s,t,e,i=-1){if(_e.ios&&s.inputState.flushIOSKey(t))return!0;let n=s.state.selection.main;if(_e.android&&(t.to==n.to&&(t.from==n.from||t.from==n.from-1&&s.state.sliceDoc(t.from,n.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&Ya(s.contentDOM,"Enter",13)||(t.from==n.from-1&&t.to==n.to&&t.insert.length==0||i==8&&t.insert.length<t.to-t.from&&t.to>n.head)&&Ya(s.contentDOM,"Backspace",8)||t.from==n.from&&t.to==n.to+1&&t.insert.length==0&&Ya(s.contentDOM,"Delete",46)))return!0;let r=t.insert.toString();s.inputState.composing>=0&&s.inputState.composing++;let o,l=()=>o||(o=cie(s,t,e));return s.state.facet(Y4).some(a=>a(s,t.from,t.to,r,l))||s.dispatch(l()),!0}function cie(s,t,e){let i,n=s.state,r=n.selection.main;if(t.from>=r.from&&t.to<=r.to&&t.to-t.from>=(r.to-r.from)/3&&(!e||e.main.empty&&e.main.from==t.from+t.insert.length)&&s.inputState.composing<0){let l=r.from<t.from?n.sliceDoc(r.from,t.from):"",a=r.to>t.to?n.sliceDoc(t.to,r.to):"";i=n.replaceSelection(s.state.toText(l+t.insert.sliceString(0,void 0,s.state.lineBreak)+a))}else{let l=n.changes(t),a=e&&e.main.to<=l.newLength?e.main:void 0;if(n.selection.ranges.length>1&&s.inputState.composing>=0&&t.to<=r.to&&t.to>=r.to-10){let c=s.state.sliceDoc(t.from,t.to),h,f=e&&l3(s,e.main.head);if(f){let O=t.insert.length-(t.to-t.from);h={from:f.from,to:f.to-O}}else h=s.state.doc.lineAt(r.head);let m=r.to-t.to,w=r.to-r.from;i=n.changeByRange(O=>{if(O.from==r.from&&O.to==r.to)return{changes:l,range:a||O.map(l)};let v=O.to-m,k=v-c.length;if(O.to-O.from!=w||s.state.sliceDoc(k,v)!=c||O.to>=h.from&&O.from<=h.to)return{range:O};let C=n.changes({from:k,to:v,insert:t.insert}),P=O.to-r.to;return{changes:C,range:a?ie.range(Math.max(0,a.anchor+P),Math.max(0,a.head+P)):O.map(C)}})}else i={changes:l,selection:a&&n.selection.replaceRange(a)}}let o="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,o+=".compose",s.inputState.compositionFirstChange&&(o+=".start",s.inputState.compositionFirstChange=!1)),n.update(i,{userEvent:o,scrollIntoView:!0})}function uie(s,t,e,i){let n=Math.min(s.length,t.length),r=0;for(;r<n&&s.charCodeAt(r)==t.charCodeAt(r);)r++;if(r==n&&s.length==t.length)return null;let o=s.length,l=t.length;for(;o>0&&l>0&&s.charCodeAt(o-1)==t.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,r-Math.min(o,l));e-=o+a-r}if(o<r&&s.length<t.length){let a=e<=r&&e>=o?r-e:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=e<=r&&e>=l?r-e:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function hie(s){let t=[];if(s.root.activeElement!=s.contentDOM)return t;let{anchorNode:e,anchorOffset:i,focusNode:n,focusOffset:r}=s.observer.selectionRange;return e&&(t.push(new bT(e,i)),(n!=e||r!=i)&&t.push(new bT(n,r))),t}function die(s,t){if(s.length==0)return null;let e=s[0].pos,i=s.length==2?s[1].pos:e;return e>-1&&i>-1?ie.single(e+t,i+t):null}class fie{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,_e.safari&&t.contentDOM.addEventListener("input",()=>null),_e.gecko&&Eie(t.contentDOM.ownerDocument)}handleEvent(t){!yie(this.view,t)||this.ignoreDuringComposition(t)||t.type=="keydown"&&this.keydown(t)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(t.type,t)):this.runHandlers(t.type,t))}runHandlers(t,e){let i=this.handlers[t];if(i){for(let n of i.observers)n(this.view,e);for(let n of i.handlers){if(e.defaultPrevented)break;if(n(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=mie(t),i=this.handlers,n=this.view.contentDOM;for(let r in e)if(r!="scroll"){let o=!e[r].handlers.length,l=i[r];l&&o!=!l.handlers.length&&(n.removeEventListener(r,this.handleEvent),l=null),l||n.addEventListener(r,this.handleEvent,{passive:o})}for(let r in i)r!="scroll"&&!e[r]&&n.removeEventListener(r,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&t.keyCode!=27&&h3.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),_e.android&&_e.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return _e.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((e=u3.find(i=>i.keyCode==t.keyCode))&&!t.ctrlKey||gie.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=e||t,setTimeout(()=>this.flushIOSKey(),250),!0):(t.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(t){let e=this.pendingIOSKey;return!e||e.key=="Enter"&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString())?!1:(this.pendingIOSKey=void 0,Ya(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return/^key/.test(t.type)?this.composing>0?!0:_e.safari&&!_e.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function OT(s,t){return(e,i)=>{try{return t.call(s,i,e)}catch(n){$n(e.state,n)}}}function mie(s){let t=Object.create(null);function e(i){return t[i]||(t[i]={observers:[],handlers:[]})}for(let i of s){let n=i.spec,r=n&&n.plugin.domEventHandlers,o=n&&n.plugin.domEventObservers;if(r)for(let l in r){let a=r[l];a&&e(l).handlers.push(OT(i.value,a))}if(o)for(let l in o){let a=o[l];a&&e(l).observers.push(OT(i.value,a))}}for(let i in Bs)e(i).handlers.push(Bs[i]);for(let i in fs)e(i).observers.push(fs[i]);return t}const u3=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],gie="dthko",h3=[16,17,18,20,91,92,224,225],nm=6;function sm(s){return Math.max(0,s)*.7+8}function pie(s,t){return Math.max(Math.abs(s.clientX-t.clientX),Math.abs(s.clientY-t.clientY))}class wie{constructor(t,e,i,n){this.view=t,this.startEvent=e,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=kte(t.contentDOM),this.atoms=t.state.facet(Ey).map(o=>o(t));let r=t.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(at.allowMultipleSelections)&&bie(t,e),this.dragging=xie(t,e)&&m3(e)==1?null:!1}start(t){this.dragging===!1&&this.select(t)}move(t){if(t.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&pie(this.startEvent,t)<10)return;this.select(this.lastEvent=t);let e=0,i=0,n=0,r=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Ay(this.view);t.clientX-a.left<=n+nm?e=-sm(n-t.clientX):t.clientX+a.right>=o-nm&&(e=sm(t.clientX-o)),t.clientY-a.top<=r+nm?i=-sm(r-t.clientY):t.clientY+a.bottom>=l-nm&&(i=sm(t.clientY-l)),this.setScrollSpeed(e,i)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let i=0;i<t.ranges.length;i++){let n=t.ranges[i],r=null;if(n.empty){let o=Dm(this.atoms,n.from,0);o!=n.from&&(r=ie.cursor(o,-1))}else{let o=Dm(this.atoms,n.from,-1),l=Dm(this.atoms,n.to,1);(o!=n.from||l!=n.to)&&(r=ie.range(n.from==n.anchor?o:l,n.from==n.head?o:l))}r&&(e||(e=t.ranges.slice()),e[i]=r)}return e?ie.create(e,t.mainIndex):t}select(t){let{view:e}=this,i=this.skipAtoms(this.style.get(t,this.extend,this.multiple));(this.mustSelect||!i.eq(e.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function bie(s,t){let e=s.state.facet(q4);return e.length?e[0](t):_e.mac?t.metaKey:t.ctrlKey}function Oie(s,t){let e=s.state.facet(X4);return e.length?e[0](t):_e.mac?!t.altKey:!t.ctrlKey}function xie(s,t){let{main:e}=s.state.selection;if(e.empty)return!1;let i=Vh(s.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let r=0;r<n.length;r++){let o=n[r];if(o.left<=t.clientX&&o.right>=t.clientX&&o.top<=t.clientY&&o.bottom>=t.clientY)return!0}return!1}function yie(s,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target,i;e!=s.contentDOM;e=e.parentNode)if(!e||e.nodeType==11||(i=yt.get(e))&&i.ignoreEvent(t))return!1;return!0}const Bs=Object.create(null),fs=Object.create(null),d3=_e.ie&&_e.ie_version<15||_e.ios&&_e.webkit_version<604;function vie(s){let t=s.dom.parentNode;if(!t)return;let e=t.appendChild(document.createElement("textarea"));e.style.cssText="position: fixed; left: -10000px; top: 10px",e.focus(),setTimeout(()=>{s.focus(),e.remove(),f3(s,e.value)},50)}function Sp(s,t,e){for(let i of s.facet(t))e=i(e,s);return e}function f3(s,t){t=Sp(s.state,Cy,t);let{state:e}=s,i,n=1,r=e.toText(t),o=r.lines==e.selection.ranges.length;if(RO!=null&&e.selection.ranges.every(a=>a.empty)&&RO==r.toString()){let a=-1;i=e.changeByRange(c=>{let h=e.doc.lineAt(c.from);if(h.from==a)return{range:c};a=h.from;let f=e.toText((o?r.line(n++).text:t)+e.lineBreak);return{changes:{from:h.from,insert:f},range:ie.cursor(c.from+f.length)}})}else o?i=e.changeByRange(a=>{let c=r.line(n++);return{changes:{from:a.from,to:a.to,insert:c.text},range:ie.cursor(a.from+c.length)}}):i=e.replaceSelection(r);s.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}fs.scroll=s=>{s.inputState.lastScrollTop=s.scrollDOM.scrollTop,s.inputState.lastScrollLeft=s.scrollDOM.scrollLeft};Bs.keydown=(s,t)=>(s.inputState.setSelectionOrigin("select"),t.keyCode==27&&s.inputState.tabFocusMode!=0&&(s.inputState.tabFocusMode=Date.now()+2e3),!1);fs.touchstart=(s,t)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")};fs.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")};Bs.mousedown=(s,t)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return!1;let e=null;for(let i of s.state.facet(j4))if(e=i(s,t),e)break;if(!e&&t.button==0&&(e=Sie(s,t)),e){let i=!s.hasFocus;s.inputState.startMouseSelection(new wie(s,t,e,i)),i&&s.observer.ignore(()=>{T4(s.contentDOM);let r=s.root.activeElement;r&&!r.contains(s.contentDOM)&&r.blur()});let n=s.inputState.mouseSelection;if(n)return n.start(t),n.dragging===!1}return!1};function xT(s,t,e,i){if(i==1)return ie.cursor(t,e);if(i==2)return Kte(s.state,t,e);{let n=ti.find(s.docView,t),r=s.state.doc.lineAt(n?n.posAtEnd:t),o=n?n.posAtStart:r.from,l=n?n.posAtEnd:r.to;return l<s.state.doc.length&&l==r.to&&l++,ie.range(o,l)}}let yT=(s,t,e)=>t>=e.top&&t<=e.bottom&&s>=e.left&&s<=e.right;function _ie(s,t,e,i){let n=ti.find(s.docView,t);if(!n)return 1;let r=t-n.posAtStart;if(r==0)return 1;if(r==n.length)return-1;let o=n.coordsAt(r,-1);if(o&&yT(e,i,o))return-1;let l=n.coordsAt(r,1);return l&&yT(e,i,l)?1:o&&o.bottom>=i?-1:1}function vT(s,t){let e=s.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:e,bias:_ie(s,e,t.clientX,t.clientY)}}const kie=_e.ie&&_e.ie_version<=11;let _T=null,kT=0,ST=0;function m3(s){if(!kie)return s.detail;let t=_T,e=ST;return _T=s,ST=Date.now(),kT=!t||e>Date.now()-400&&Math.abs(t.clientX-s.clientX)<2&&Math.abs(t.clientY-s.clientY)<2?(kT+1)%3:1}function Sie(s,t){let e=vT(s,t),i=m3(t),n=s.state.selection;return{update(r){r.docChanged&&(e.pos=r.changes.mapPos(e.pos),n=n.map(r.changes))},get(r,o,l){let a=vT(s,r),c,h=xT(s,a.pos,a.bias,i);if(e.pos!=a.pos&&!o){let f=xT(s,e.pos,e.bias,i),m=Math.min(f.from,h.from),w=Math.max(f.to,h.to);h=m<h.from?ie.range(m,w):ie.range(w,m)}return o?n.replaceRange(n.main.extend(h.from,h.to)):l&&i==1&&n.ranges.length>1&&(c=Cie(n,a.pos))?c:l?n.addRange(h):ie.create([h])}}}function Cie(s,t){for(let e=0;e<s.ranges.length;e++){let{from:i,to:n}=s.ranges[e];if(i<=t&&n>=t)return ie.create(s.ranges.slice(0,e).concat(s.ranges.slice(e+1)),s.mainIndex==e?0:s.mainIndex-(s.mainIndex>e?1:0))}return null}Bs.dragstart=(s,t)=>{let{selection:{main:e}}=s.state;if(t.target.draggable){let n=s.docView.nearest(t.target);if(n&&n.isWidget){let r=n.posAtStart,o=r+n.length;(r>=e.to||o<=e.from)&&(e=ie.range(r,o))}}let{inputState:i}=s;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=e,t.dataTransfer&&(t.dataTransfer.setData("Text",Sp(s.state,Py,s.state.sliceDoc(e.from,e.to))),t.dataTransfer.effectAllowed="copyMove"),!1};Bs.dragend=s=>(s.inputState.draggedContent=null,!1);function CT(s,t,e,i){if(e=Sp(s.state,Cy,e),!e)return;let n=s.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:r}=s.inputState,o=i&&r&&Oie(s,t)?{from:r.from,to:r.to}:null,l={from:n,insert:e},a=s.state.changes(o?[o,l]:l);s.focus(),s.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"}),s.inputState.draggedContent=null}Bs.drop=(s,t)=>{if(!t.dataTransfer)return!1;if(s.state.readOnly)return!0;let e=t.dataTransfer.files;if(e&&e.length){let i=Array(e.length),n=0,r=()=>{++n==e.length&&CT(s,t,i.filter(o=>o!=null).join(s.state.lineBreak),!1)};for(let o=0;o<e.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),r()},l.readAsText(e[o])}return!0}else{let i=t.dataTransfer.getData("Text");if(i)return CT(s,t,i,!0),!0}return!1};Bs.paste=(s,t)=>{if(s.state.readOnly)return!0;s.observer.flush();let e=d3?null:t.clipboardData;return e?(f3(s,e.getData("text/plain")||e.getData("text/uri-list")),!0):(vie(s),!1)};function Pie(s,t){let e=s.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout(()=>{i.remove(),s.focus()},50)}function Tie(s){let t=[],e=[],i=!1;for(let n of s.selection.ranges)n.empty||(t.push(s.sliceDoc(n.from,n.to)),e.push(n));if(!t.length){let n=-1;for(let{from:r}of s.selection.ranges){let o=s.doc.lineAt(r);o.number>n&&(t.push(o.text),e.push({from:o.from,to:Math.min(s.doc.length,o.to+1)})),n=o.number}i=!0}return{text:Sp(s,Py,t.join(s.lineBreak)),ranges:e,linewise:i}}let RO=null;Bs.copy=Bs.cut=(s,t)=>{let{text:e,ranges:i,linewise:n}=Tie(s.state);if(!e&&!n)return!1;RO=n?e:null,t.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let r=d3?null:t.clipboardData;return r?(r.clearData(),r.setData("text/plain",e),!0):(Pie(s,e),!1)};const g3=zr.define();function p3(s,t){let e=[];for(let i of s.facet(K4)){let n=i(s,t);n&&e.push(n)}return e.length?s.update({effects:e,annotations:g3.of(!0)}):null}function w3(s){setTimeout(()=>{let t=s.hasFocus;if(t!=s.inputState.notifiedFocused){let e=p3(s.state,t);e?s.dispatch(e):s.update([])}},10)}fs.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),w3(s)};fs.blur=s=>{s.observer.clearSelectionRange(),w3(s)};fs.compositionstart=fs.compositionupdate=s=>{s.observer.editContext||(s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0))};fs.compositionend=s=>{s.observer.editContext||(s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,_e.chrome&&_e.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.hasComposition&&s.update([])},50))};fs.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()};Bs.beforeinput=(s,t)=>{var e,i;if(t.inputType=="insertReplacementText"&&s.observer.editContext){let r=(e=t.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain"),o=t.getTargetRanges();if(r&&o.length){let l=o[0],a=s.posAtDOM(l.startContainer,l.startOffset),c=s.posAtDOM(l.endContainer,l.endOffset);return Iy(s,{from:a,to:c,insert:s.state.toText(r)},null),!0}}let n;if(_e.chrome&&_e.android&&(n=u3.find(r=>r.inputType==t.inputType))&&(s.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}return _e.ios&&t.inputType=="deleteContentForward"&&s.observer.flushSoon(),_e.safari&&t.inputType=="insertText"&&s.inputState.composing>=0&&setTimeout(()=>fs.compositionend(s,t),20),!1};const PT=new Set;function Eie(s){PT.has(s)||(PT.add(s),s.addEventListener("copy",()=>{}),s.addEventListener("cut",()=>{}))}const TT=["pre-wrap","normal","pre-line","break-spaces"];let dc=!1;function ET(){dc=!1}class Aie{constructor(t){this.lineWrapping=t,this.doc=Ye.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let i=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((e-t-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return TT.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let i=0;i<t.length;i++){let n=t[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(e=!0,this.heightSamples[Math.floor(n*10)]=!0)}return e}refresh(t,e,i,n,r,o){let l=TT.indexOf(t)>-1,a=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=e,this.charWidth=i,this.textHeight=n,this.lineLength=r,a){this.heightSamples={};for(let c=0;c<o.length;c++){let h=o[c];h<0?c++:this.heightSamples[Math.floor(h*10)]=!0}}return a}}class Iie{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class Ks{constructor(t,e,i,n,r){this.from=t,this.length=e,this.top=i,this.height=n,this._content=r}get type(){return typeof this._content=="number"?tn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Vo?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new Ks(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var Tt=function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s}(Tt||(Tt={}));const Nm=.001;class nn{constructor(t,e,i=2){this.length=t,this.height=e,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>Nm&&(dc=!0),this.height=t)}replace(t,e,i){return nn.of(i)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,i,n){let r=this,o=i.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:c,fromB:h,toB:f}=n[l],m=r.lineAt(a,Tt.ByPosNoHeight,i.setDoc(e),0,0),w=m.to>=c?m:r.lineAt(c,Tt.ByPosNoHeight,i,0,0);for(f+=w.to-c,c=w.to;l>0&&m.from<=n[l-1].toA;)a=n[l-1].fromA,h=n[l-1].fromB,l--,a<m.from&&(m=r.lineAt(a,Tt.ByPosNoHeight,i,0,0));h+=m.from-a,a=m.from;let O=Ry.build(i.setDoc(o),t,h,f);r=Lg(r,r.replace(a,c,O))}return r.updateHeight(i,0)}static empty(){return new Rn(0,0)}static of(t){if(t.length==1)return t[0];let e=0,i=t.length,n=0,r=0;for(;;)if(e==i)if(n>r*2){let l=t[e-1];l.break?t.splice(--e,1,l.left,null,l.right):t.splice(--e,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(r>n*2){let l=t[i];l.break?t.splice(i,1,l.left,null,l.right):t.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(n<r){let l=t[e++];l&&(n+=l.size)}else{let l=t[--i];l&&(r+=l.size)}let o=0;return t[e-1]==null?(o=1,e--):t[e]==null&&(o=1,i++),new Rie(nn.of(t.slice(0,e)),o,nn.of(t.slice(i)))}}function Lg(s,t){return s==t?s:(s.constructor!=t.constructor&&(dc=!0),t)}nn.prototype.size=1;class b3 extends nn{constructor(t,e,i){super(t,e),this.deco=i}blockAt(t,e,i,n){return new Ks(n,this.length,i,this.height,this.deco||0)}lineAt(t,e,i,n,r){return this.blockAt(0,i,n,r)}forEachLine(t,e,i,n,r,o){t<=r+this.length&&e>=r&&o(this.blockAt(0,i,n,r))}updateHeight(t,e=0,i=!1,n){return n&&n.from<=e&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Rn extends b3{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,i,n){return new Ks(n,this.length,i,this.height,this.breaks)}replace(t,e,i){let n=i[0];return i.length==1&&(n instanceof Rn||n instanceof Pi&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof Pi?n=new Rn(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):nn.of(i)}updateHeight(t,e=0,i=!1,n){return n&&n.from<=e&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Pi extends nn{constructor(t){super(t,0)}heightMetrics(t,e){let i=t.doc.lineAt(e).number,n=t.doc.lineAt(e+this.length).number,r=n-i+1,o,l=0;if(t.lineWrapping){let a=Math.min(this.height,t.lineHeight*r);o=a/r,this.length>r+1&&(l=(this.height-a)/(this.length-r-1))}else o=this.height/r;return{firstLine:i,lastLine:n,perLine:o,perChar:l}}blockAt(t,e,i,n){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(e,n);if(e.lineWrapping){let c=n+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-i)/this.height))*this.length)),h=e.doc.lineAt(c),f=l+h.length*a,m=Math.max(i,t-f/2);return new Ks(h.from,h.length,m,f,0)}else{let c=Math.max(0,Math.min(o-r,Math.floor((t-i)/l))),{from:h,length:f}=e.doc.line(r+c);return new Ks(h,f,i+l*c,l,0)}}lineAt(t,e,i,n,r){if(e==Tt.ByHeight)return this.blockAt(t,i,n,r);if(e==Tt.ByPosNoHeight){let{from:w,to:O}=i.doc.lineAt(t);return new Ks(w,O-w,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,r),c=i.doc.lineAt(t),h=l+c.length*a,f=c.number-o,m=n+l*f+a*(c.from-r-f);return new Ks(c.from,c.length,Math.max(n,Math.min(m,n+this.height-h)),h,0)}forEachLine(t,e,i,n,r,o){t=Math.max(t,r),e=Math.min(e,r+this.length);let{firstLine:l,perLine:a,perChar:c}=this.heightMetrics(i,r);for(let h=t,f=n;h<=e;){let m=i.doc.lineAt(h);if(h==t){let O=m.number-l;f+=a*O+c*(t-r-O)}let w=a+c*m.length;o(new Ks(m.from,m.length,f,w,0)),f+=w,h=m.to+1}}replace(t,e,i){let n=this.length-e;if(n>0){let r=i[i.length-1];r instanceof Pi?i[i.length-1]=new Pi(r.length+n):i.push(null,new Pi(n-1))}if(t>0){let r=i[0];r instanceof Pi?i[0]=new Pi(t+r.length):i.unshift(new Pi(t-1),null)}return nn.of(i)}decomposeLeft(t,e){e.push(new Pi(t-1),null)}decomposeRight(t,e){e.push(null,new Pi(this.length-t-1))}updateHeight(t,e=0,i=!1,n){let r=e+this.length;if(n&&n.from<=e+this.length&&n.more){let o=[],l=Math.max(e,n.from),a=-1;for(n.from>e&&o.push(new Pi(n.from-e-1).updateHeight(t,e));l<=r&&n.more;){let h=t.doc.lineAt(l).length;o.length&&o.push(null);let f=n.heights[n.index++];a==-1?a=f:Math.abs(f-a)>=Nm&&(a=-2);let m=new Rn(h,f);m.outdated=!1,o.push(m),l+=h+1}l<=r&&o.push(null,new Pi(r-l).updateHeight(t,l));let c=nn.of(o);return(a<0||Math.abs(c.height-this.height)>=Nm||Math.abs(a-this.heightMetrics(t,e).perLine)>=Nm)&&(dc=!0),Lg(this,c)}else(i||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Rie extends nn{constructor(t,e,i){super(t.length+e+i.length,t.height+i.height,e|(t.outdated||i.outdated?2:0)),this.left=t,this.right=i,this.size=t.size+i.size}get break(){return this.flags&1}blockAt(t,e,i,n){let r=i+this.left.height;return t<r?this.left.blockAt(t,e,i,n):this.right.blockAt(t,e,r,n+this.left.length+this.break)}lineAt(t,e,i,n,r){let o=n+this.left.height,l=r+this.left.length+this.break,a=e==Tt.ByHeight?t<o:t<l,c=a?this.left.lineAt(t,e,i,n,r):this.right.lineAt(t,e,i,o,l);if(this.break||(a?c.to<l:c.from>l))return c;let h=e==Tt.ByPosNoHeight?Tt.ByPosNoHeight:Tt.ByPos;return a?c.join(this.right.lineAt(l,h,i,o,l)):this.left.lineAt(l,h,i,n,r).join(c)}forEachLine(t,e,i,n,r,o){let l=n+this.left.height,a=r+this.left.length+this.break;if(this.break)t<a&&this.left.forEachLine(t,e,i,n,r,o),e>=a&&this.right.forEachLine(t,e,i,l,a,o);else{let c=this.lineAt(a,Tt.ByPos,i,n,r);t<c.from&&this.left.forEachLine(t,c.from-1,i,n,r,o),c.to>=t&&c.from<=e&&o(c),e>c.to&&this.right.forEachLine(c.to+1,e,i,l,a,o)}}replace(t,e,i){let n=this.left.length+this.break;if(e<n)return this.balanced(this.left.replace(t,e,i),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-n,e-n,i));let r=[];t>0&&this.decomposeLeft(t,r);let o=r.length;for(let l of i)r.push(l);if(t>0&&AT(r,o-1),e<this.length){let l=r.length;this.decomposeRight(e,r),AT(r,l)}return nn.of(r)}decomposeLeft(t,e){let i=this.left.length;if(t<=i)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(i++,t>=i&&e.push(null)),t>i&&this.right.decomposeLeft(t-i,e)}decomposeRight(t,e){let i=this.left.length,n=i+this.break;if(t>=n)return this.right.decomposeRight(t-n,e);t<i&&this.left.decomposeRight(t,e),this.break&&t<n&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?nn.of(this.break?[t,null,e]:[t,e]):(this.left=Lg(this.left,t),this.right=Lg(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,i=!1,n){let{left:r,right:o}=this,l=e+r.length+this.break,a=null;return n&&n.from<=e+r.length&&n.more?a=r=r.updateHeight(t,e,i,n):r.updateHeight(t,e,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(t,l,i,n):o.updateHeight(t,l,i),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function AT(s,t){let e,i;s[t]==null&&(e=s[t-1])instanceof Pi&&(i=s[t+1])instanceof Pi&&s.splice(t-1,3,new Pi(e.length+1+i.length))}const Vie=5;class Ry{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let i=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Rn?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Rn(i-this.pos,-1)),this.writtenTo=i,e>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,i){if(t<e||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=e-t;i.block?this.addBlock(new b3(o,n,i)):(o||r||n>=Vie)&&this.addLineDeco(n,r,o)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Rn(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let i=new Pi(e-t);return this.oracle.doc.lineAt(t).to==e&&(i.flags|=4),i}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Rn)return t;let e=new Rn(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,t),n.breaks+=e,this.writtenTo=this.pos=this.pos+i}finish(t){let e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(e instanceof Rn)&&!this.isCovered?this.nodes.push(new Rn(0,-1)):(this.writtenTo<this.pos||e==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=t;for(let n of this.nodes)n instanceof Rn&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(t,e,i,n){let r=new Ry(i,t);return nt.spans(e,i,n,r,0),r.finish(i)}}function Mie(s,t,e){let i=new Lie;return nt.compare(s,t,e,i,0),i.changes}class Lie{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,i,n){(t<e||i&&i.heightRelevant||n&&n.heightRelevant)&&Qm(t,e,this.changes,5)}}function Bie(s,t){let e=s.getBoundingClientRect(),i=s.ownerDocument,n=i.defaultView||window,r=Math.max(0,e.left),o=Math.min(n.innerWidth,e.right),l=Math.max(0,e.top),a=Math.min(n.innerHeight,e.bottom);for(let c=s.parentNode;c&&c!=i.body;)if(c.nodeType==1){let h=c,f=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&f.overflow!="visible"){let m=h.getBoundingClientRect();r=Math.max(r,m.left),o=Math.min(o,m.right),l=Math.max(l,m.top),a=Math.min(c==s.parentNode?n.innerHeight:a,m.bottom)}c=f.position=="absolute"||f.position=="fixed"?h.offsetParent:h.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:r-e.left,right:Math.max(r,o)-e.left,top:l-(e.top+t),bottom:Math.max(l,a)-(e.top+t)}}function $ie(s){let t=s.getBoundingClientRect(),e=s.ownerDocument.defaultView||window;return t.left<e.innerWidth&&t.right>0&&t.top<e.innerHeight&&t.bottom>0}function Qie(s,t){let e=s.getBoundingClientRect();return{left:0,right:e.right-e.left,top:t,bottom:e.bottom-(e.top+t)}}class Ab{constructor(t,e,i,n){this.from=t,this.to=e,this.size=i,this.displaySize=n}static same(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++){let n=t[i],r=e[i];if(n.from!=r.from||n.to!=r.to||n.size!=r.size)return!1}return!0}draw(t,e){return Ke.replace({widget:new Die(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class Die extends Qo{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class IT{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=RT,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Lt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(Ty).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new Aie(e),this.stateDeco=t.facet(Lh).filter(i=>typeof i!="function"),this.heightMap=nn.empty().applyChanges(this.stateDeco,Ye.empty,this.heightOracle.setDoc(t.doc),[new os(0,0,0,t.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ke.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let i=0;i<=1;i++){let n=i?e.head:e.anchor;if(!t.some(({from:r,to:o})=>n>=r&&n<=o)){let{from:r,to:o}=this.lineBlockAt(n);t.push(new rm(r,o))}}return this.viewports=t.sort((i,n)=>i.from-n.from),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?RT:new Vy(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,t=>{this.viewportLines.push(Wu(t,this.scaler))})}update(t,e=null){this.state=t.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Lh).filter(h=>typeof h!="function");let n=t.changedRanges,r=os.extendWithRanges(n,Mie(i,this.stateDeco,t?t.changes:li.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);ET(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||dc)&&(t.flags|=2),l?(this.scrollAnchorPos=t.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<a.from||e.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,e));let c=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,t.flags|=this.updateForViewport(),(c||!t.changes.empty||t.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(e3)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,i=window.getComputedStyle(e),n=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Lt.RTL:Lt.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=e.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let c=0,h=0;if(l.width&&l.height){let{scaleX:Q,scaleY:D}=P4(e,l);(Q>.005&&Math.abs(this.scaleX-Q)>.005||D>.005&&Math.abs(this.scaleY-D)>.005)&&(this.scaleX=Q,this.scaleY=D,c|=16,o=a=!0)}let f=(parseInt(i.paddingTop)||0)*this.scaleY,m=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=m)&&(this.paddingTop=f,this.paddingBottom=m,c|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=t.scrollDOM.clientWidth,c|=16);let w=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=w&&(this.scrollAnchorHeight=-1,this.scrollTop=w),this.scrolledToBottom=A4(t.scrollDOM);let O=(this.printing?Qie:Bie)(e,this.paddingTop),v=O.top-this.pixelViewport.top,k=O.bottom-this.pixelViewport.bottom;this.pixelViewport=O;let C=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(C!=this.inView&&(this.inView=C,C&&(a=!0)),!this.inView&&!this.scrollTarget&&!$ie(t.dom))return 0;let P=l.width;if((this.contentDOMWidth!=P||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=t.scrollDOM.clientHeight,c|=16),a){let Q=t.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(Q)&&(o=!0),o||n.lineWrapping&&Math.abs(P-this.contentDOMWidth)>n.charWidth){let{lineHeight:D,charWidth:q,textHeight:$}=t.docView.measureTextSize();o=D>0&&n.refresh(r,D,q,$,P/q,Q),o&&(t.docView.minWidth=0,c|=16)}v>0&&k>0?h=Math.max(v,k):v<0&&k<0&&(h=Math.min(v,k)),ET();for(let D of this.viewports){let q=D.from==this.viewport.from?Q:t.docView.measureVisibleLineHeights(D);this.heightMap=(o?nn.empty().applyChanges(this.stateDeco,Ye.empty,this.heightOracle,[new os(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new Iie(D.from,q))}dc&&(c|=2)}let V=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return V&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),c|=this.updateForViewport()),(c&2||V)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let i=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),n=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new rm(n.lineAt(o-i*1e3,Tt.ByHeight,r,0,0).from,n.lineAt(l+(1-i)*1e3,Tt.ByHeight,r,0,0).to);if(e){let{head:c}=e.range;if(c<a.from||c>a.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=n.lineAt(c,Tt.ByPos,r,0,0),m;e.y=="center"?m=(f.top+f.bottom)/2-h/2:e.y=="start"||e.y=="nearest"&&c<a.from?m=f.top:m=f.bottom-h,a=new rm(n.lineAt(m-1e3/2,Tt.ByHeight,r,0,0).from,n.lineAt(m+h+1e3/2,Tt.ByHeight,r,0,0).to)}}return a}mapViewport(t,e){let i=e.mapPos(t.from,-1),n=e.mapPos(t.to,1);return new rm(this.heightMap.lineAt(i,Tt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,Tt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(t,Tt.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(e,Tt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(t==0||n<=o-Math.max(10,Math.min(-i,250)))&&(e==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&r<l+2*1e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let i=[];for(let n of t)e.touchesRange(n.from,n.to)||i.push(new Ab(e.mapPos(n.from),e.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(t,e){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,r=n>>1,o=n<<1;if(this.defaultTextDirection!=Lt.LTR&&!i)return[];let l=[],a=(h,f,m,w)=>{if(f-h<r)return;let O=this.state.selection.main,v=[O.from];O.empty||v.push(O.to);for(let C of v)if(C>h&&C<f){a(h,C-10,m,w),a(C+10,f,m,w);return}let k=Fie(t,C=>C.from>=m.from&&C.to<=m.to&&Math.abs(C.from-h)<r&&Math.abs(C.to-f)<r&&!v.some(P=>C.from<P&&C.to>P));if(!k){if(f<m.to&&e&&i&&e.visibleRanges.some(V=>V.from<=f&&V.to>=f)){let V=e.moveToLineBoundary(ie.cursor(f),!1,!0).head;V>h&&(f=V)}let C=this.gapSize(m,h,f,w),P=i||C<2e6?C:2e6;k=new Ab(h,f,C,P)}l.push(k)},c=h=>{if(h.length<o||h.type!=tn.Text)return;let f=Nie(h.from,h.to,this.stateDeco);if(f.total<o)return;let m=this.scrollTarget?this.scrollTarget.range.head:null,w,O;if(i){let v=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,k,C;if(m!=null){let P=lm(f,m),V=((this.visibleBottom-this.visibleTop)/2+v)/h.height;k=P-V,C=P+V}else k=(this.visibleTop-h.top-v)/h.height,C=(this.visibleBottom-h.top+v)/h.height;w=om(f,k),O=om(f,C)}else{let v=f.total*this.heightOracle.charWidth,k=n*this.heightOracle.charWidth,C=0;if(v>2e6)for(let q of t)q.from>=h.from&&q.from<h.to&&q.size!=q.displaySize&&q.from*this.heightOracle.charWidth+C<this.pixelViewport.left&&(C=q.size-q.displaySize);let P=this.pixelViewport.left+C,V=this.pixelViewport.right+C,Q,D;if(m!=null){let q=lm(f,m),$=((V-P)/2+k)/v;Q=q-$,D=q+$}else Q=(P-k)/v,D=(V+k)/v;w=om(f,Q),O=om(f,D)}w>h.from&&a(h.from,w,h,f),O<h.to&&a(O,h.to,h,f)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(c):c(h);return l}gapSize(t,e,i,n){let r=lm(n,i)-lm(n,e);return this.heightOracle.lineWrapping?t.height*r:n.total*this.heightOracle.charWidth*r}updateLineGaps(t){Ab.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=Ke.set(t.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let i=[];nt.spans(e,this.viewport.from,this.viewport.to,{span(r,o){i.push({from:r,to:o})},point(){}},20);let n=0;if(i.length!=this.visibleRanges.length)n=12;else for(let r=0;r<i.length&&!(n&8);r++){let o=this.visibleRanges[r],l=i[r];(o.from!=l.from||o.to!=l.to)&&(n|=4,t&&t.mapPos(o.from,-1)==l.from&&t.mapPos(o.to,1)==l.to||(n|=8))}return this.visibleRanges=i,n}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(e=>e.from<=t&&e.to>=t)||Wu(this.heightMap.lineAt(t,Tt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(e=>e.top<=t&&e.bottom>=t)||Wu(this.heightMap.lineAt(this.scaler.fromDOM(t),Tt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return Wu(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class rm{constructor(t,e){this.from=t,this.to=e}}function Nie(s,t,e){let i=[],n=s,r=0;return nt.spans(e,s,t,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),r+=o-n),n=l}},20),n<t&&(i.push({from:n,to:t}),r+=t-n),{total:r,ranges:i}}function om({total:s,ranges:t},e){if(e<=0)return t[0].from;if(e>=1)return t[t.length-1].to;let i=Math.floor(s*e);for(let n=0;;n++){let{from:r,to:o}=t[n],l=o-r;if(i<=l)return r+i;i-=l}}function lm(s,t){let e=0;for(let{from:i,to:n}of s.ranges){if(t<=n){e+=t-i;break}e+=n-i}return e/s.total}function Fie(s,t){for(let e of s)if(t(e))return e}const RT={toDOM(s){return s},fromDOM(s){return s},scale:1,eq(s){return s==this}};class Vy{constructor(t,e,i){let n=0,r=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let c=e.lineAt(l,Tt.ByPos,t,0,0).top,h=e.lineAt(a,Tt.ByPos,t,0,0).bottom;return n+=h-c,{from:l,to:a,top:c,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(e.height-n);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(t){for(let e=0,i=0,n=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.top)return n+(t-i)*this.scale;if(t<=r.bottom)return r.domTop+(t-r.top);i=r.bottom,n=r.domBottom}}fromDOM(t){for(let e=0,i=0,n=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.domTop)return i+(t-n)/this.scale;if(t<=r.domBottom)return r.top+(t-r.domTop);i=r.bottom,n=r.domBottom}}eq(t){return t instanceof Vy?this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every((e,i)=>e.from==t.viewports[i].from&&e.to==t.viewports[i].to):!1}}function Wu(s,t){if(t.scale==1)return s;let e=t.toDOM(s.top),i=t.toDOM(s.bottom);return new Ks(s.from,s.length,e,i-e,Array.isArray(s._content)?s._content.map(n=>Wu(n,t)):s._content)}const am=Pe.define({combine:s=>s.join(" ")}),VO=Pe.define({combine:s=>s.indexOf(!0)>-1}),MO=Io.newName(),O3=Io.newName(),x3=Io.newName(),y3={"&light":"."+O3,"&dark":"."+x3};function LO(s,t,e){return new Io(t,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return s;if(!e||!e[n])throw new RangeError(`Unsupported selector: ${n}`);return e[n]}):s+" "+i}})}const zie=LO("."+MO,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},y3),Wie={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ib=_e.ie&&_e.ie_version<=11;class Uie{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new Ste,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(e=>{for(let i of e)this.queue.push(i);(_e.ie&&_e.ie_version<=11||_e.ios&&t.composing)&&e.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&_e.android&&t.constructor.EDIT_CONTEXT!==!1&&!(_e.chrome&&_e.chrome_version<126)&&(this.editContext=new Hie(t),t.state.facet(Pr)&&(t.contentDOM.editContext=this.editContext.editContext)),Ib&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var e;((e=this.view.docView)===null||e===void 0?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(t){(t.type=="change"||!t.type)&&!t.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((e,i)=>e!=t[i]))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Pr)?i.root.activeElement!=this.dom:!$m(this.dom,n))return;let r=n.anchorNode&&i.docView.nearest(n.anchorNode);if(r&&r.ignoreEvent(t)){e||(this.selectionChanged=!1);return}(_e.ie&&_e.ie_version<=11||_e.android&&_e.chrome)&&!i.state.selection.main.empty&&n.focusNode&&rh(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=Vh(t.root);if(!e)return!1;let i=_e.safari&&t.root.nodeType==11&&t.root.activeElement==this.dom&&Zie(this.view,e)||e;if(!i||this.selectionRange.eq(i))return!1;let n=$m(this.dom,i);return n&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&Pte(this.dom,i)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let i=this.dom;i;)if(i.nodeType==1)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==i?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=e)i.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Wie),Ib&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Ib&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var i;if(!this.delayedAndroidKey){let n=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&Ya(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,i=-1,n=!1;for(let r of t){let o=this.readMutation(r);o&&(o.typeOver&&(n=!0),e==-1?{from:e,to:i}=o:(e=Math.min(o.from,e),i=Math.max(o.to,i)))}return{from:e,to:i,typeOver:n}}readChange(){let{from:t,to:e,typeOver:i}=this.processRecords(),n=this.selectionChanged&&$m(this.dom,this.selectionRange);if(t<0&&!n)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new aie(this.view,t,e,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let i=this.view.state,n=c3(this.view,e);return this.view.state==i&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty(t.type=="attributes"),t.type=="attributes"&&(e.flags|=4),t.type=="childList"){let i=VT(e,t.previousSibling||t.target.previousSibling,-1),n=VT(e,t.nextSibling||t.target.nextSibling,1);return{from:i?e.posAfter(i):e.posAtStart,to:n?e.posBefore(n):e.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(Pr)!=t.state.facet(Pr)&&(t.view.contentDOM.editContext=t.state.facet(Pr)?this.editContext.editContext:null))}destroy(){var t,e,i;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(e=this.gapIntersection)===null||e===void 0||e.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function VT(s,t,e){for(;t;){let i=yt.get(t);if(i&&i.parent==s)return i;let n=t.parentNode;t=n!=s.dom?n:e>0?t.nextSibling:t.previousSibling}return null}function MT(s,t){let e=t.startContainer,i=t.startOffset,n=t.endContainer,r=t.endOffset,o=s.docView.domAtPos(s.state.selection.main.anchor);return rh(o.node,o.offset,n,r)&&([e,i,n,r]=[n,r,e,i]),{anchorNode:e,anchorOffset:i,focusNode:n,focusOffset:r}}function Zie(s,t){if(t.getComposedRanges){let n=t.getComposedRanges(s.root)[0];if(n)return MT(s,n)}let e=null;function i(n){n.preventDefault(),n.stopImmediatePropagation(),e=n.getTargetRanges()[0]}return s.contentDOM.addEventListener("beforeinput",i,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",i,!0),e?MT(s,e):null}class Hie{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=i=>{let n=t.state.selection.main,{anchor:r,head:o}=n,l=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let c={from:l,to:a,insert:Ye.of(i.text.split(`
`))};if(c.from==this.from&&r<this.from?c.from=r:c.to==this.to&&r>this.to&&(c.to=r),c.from==c.to&&!c.insert.length){let h=ie.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));h.main.eq(n)||t.dispatch({selection:h,userEvent:"select"});return}if((_e.mac||_e.android)&&c.from==o-1&&/^\. ?$/.test(i.text)&&t.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:l,to:a,insert:Ye.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!t.state.readOnly){let h=this.to-this.from+(c.to-c.from+c.insert.length);Iy(t,c,ie.single(this.toEditorPos(i.selectionStart,h),this.toEditorPos(i.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state))},this.handlers.characterboundsupdate=i=>{let n=[],r=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=t.coordsForChar(o);r=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||r||new DOMRect,n.push(r)}e.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=i=>{let n=[];for(let r of i.getTextFormats()){let o=r.underlineStyle,l=r.underlineThickness;if(o!="None"&&l!="None"){let a=this.toEditorPos(r.rangeStart),c=this.toEditorPos(r.rangeEnd);if(a<c){let h=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;n.push(Ke.mark({attributes:{style:h}}).range(a,c))}}}t.dispatch({effects:i3.of(Ke.set(n))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(t.state)}};for(let i in this.handlers)e.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let n=Vh(i.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,i=!1,n=this.pendingContextChange;return t.changes.iterChanges((r,o,l,a,c)=>{if(i)return;let h=c.length-(o-r);if(n&&o>=n.to)if(n.from==r&&n.to==o&&n.insert.eq(c)){n=this.pendingContextChange=null,e+=h,this.to+=h;return}else n=null,this.revertPending(t.state);if(r+=e,o+=e,o<=this.from)this.from+=h,this.to+=h;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),c.toString()),this.to+=h}e+=h}),n&&!i&&this.revertPending(t.state),!i}update(t){let e=this.pendingContextChange,i=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(i.from,i.to)&&t.transactions.some(n=>!n.isUserEvent("input.type")&&n.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):!this.applyEdits(t)||!this.rangeIsValid(t.state)?(this.pendingContextChange=null,this.reset(t.state)):(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),n=this.toContextPos(e.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(i,n)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>1e4*3)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let i=this.composing;return i&&i.drifted?i.editorBase+(t-i.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class Ee{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:i}=t;this.dispatchTransactions=t.dispatchTransactions||i&&(n=>n.forEach(r=>i(r,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=t.root||Cte(t.parent)||document,this.viewState=new IT(t.state||at.create(t)),t.scrollTo&&t.scrollTo.is(im)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(za).map(n=>new Pb(n));for(let n of this.plugins)n.update(this);this.observer=new Uie(this),this.inputState=new fie(this),this.inputState.ensureHandlers(this.plugins),this.docView=new dT(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((e=document.fonts)===null||e===void 0)&&e.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...t){let e=t.length==1&&t[0]instanceof Yt?t:t.length==1&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e=!1,i=!1,n,r=this.state;for(let m of t){if(m.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=m.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;t.some(m=>m.annotation(g3))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=p3(r,o),a||(l=1));let c=this.observer.delayedAndroidKey,h=null;if(c?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(h=null)):this.observer.clear(),r.facet(at.phrases)!=this.state.facet(at.phrases))return this.setState(r);n=Mg.create(this,r,t),n.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let m of t){if(f&&(f=f.map(m.changes)),m.scrollIntoView){let{main:w}=m.state.selection;f=new Ka(w.empty?w:ie.cursor(w.head,w.head>w.anchor?-1:1))}for(let w of m.effects)w.is(im)&&(f=w.value.clip(this.state))}this.viewState.update(n,f),this.bidiCache=Bg.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),e=this.docView.update(n),this.state.facet(Fu)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(e,t.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(am)!=n.state.facet(am)&&(this.viewState.mustMeasureContent=!0),(e||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),e&&this.docViewUpdate(),!n.empty)for(let m of this.state.facet(EO))try{m(n)}catch(w){$n(this.state,w,"update listener")}(a||h)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),h&&!c3(this,h)&&c.force&&Ya(this.contentDOM,c.key,c.keyCode)})}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let e=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new IT(t),this.plugins=t.facet(za).map(i=>new Pb(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new dT(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(za),i=t.state.facet(za);if(e!=i){let n=[];for(let r of i){let o=e.indexOf(r);if(o<0)n.push(new Pb(r));else{let l=this.plugins[o];l.mustUpdate=t,n.push(l)}}for(let r of this.plugins)r.mustUpdate!=t&&r.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=t;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);e!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(i){$n(this.state,i,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(A4(i))r=-1,o=this.viewState.heightMap.height;else{let w=this.viewState.scrollAnchorAt(n);r=w.from,o=w.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];a&4||([this.measureRequests,c]=[c,this.measureRequests]);let h=c.map(w=>{try{return w.read(this)}catch(O){return $n(this.state,O),LT}}),f=Mg.create(this,this.state,[]),m=!1;f.flags|=a,e?e.flags|=a:e=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),m=this.docView.update(f),m&&this.docViewUpdate());for(let w=0;w<c.length;w++)if(h[w]!=LT)try{let O=c[w];O.write&&O.write(h[w],this)}catch(O){$n(this.state,O)}if(m&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let O=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(O>1||O<-1){n=n+O,i.scrollTop=n/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let l of this.state.facet(EO))l(e)}get themeClasses(){return MO+" "+(this.state.facet(VO)?x3:O3)+" "+this.state.facet(am)}updateAttrs(){let t=BT(this,n3,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Pr)?"true":"false",class:"cm-content",style:`${_e.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),BT(this,Ty,e);let i=this.observer.ignore(()=>{let n=kO(this.contentDOM,this.contentAttrs,e),r=kO(this.dom,this.editorAttrs,t);return n||r});return this.editorAttrs=t,this.contentAttrs=e,i}showAnnouncements(t){let e=!0;for(let i of t)for(let n of i.effects)if(n.is(Ee.announce)){e&&(this.announceDOM.textContent=""),e=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Fu);let t=this.state.facet(Ee.cspNonce);Io.mount(this.root,this.styleModules.concat(zie).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key){this.measureRequests[e]=t;return}}this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(e===void 0||e&&e.plugin!=t)&&this.pluginMap.set(t,e=this.plugins.find(i=>i.plugin==t)||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,i){return Eb(this,t,wT(this,t,e,i))}moveByGroup(t,e){return Eb(this,t,wT(this,t,e,i=>sie(this,t.head,i)))}visualLineSide(t,e){let i=this.bidiSpans(t),n=this.textDirectionAt(t.from),r=i[e?i.length-1:0];return ie.cursor(r.side(e,n)+t.from,r.forward(!e,n)?1:-1)}moveToLineBoundary(t,e,i=!0){return nie(this,t,e,i)}moveVertically(t,e,i){return Eb(this,t,rie(this,t,e,i))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),a3(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let i=this.docView.coordsAt(t,e);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(t),r=this.bidiSpans(n),o=r[xo.find(r,t-n.from,-1,e)];return _p(i,o.dir==Lt.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(J4)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>qie)return Z4(t.length);let e=this.textDirectionAt(t.from),i;for(let r of this.bidiCache)if(r.from==t.from&&r.dir==e&&(r.fresh||U4(r.isolates,i=hT(this,t))))return r.order;i||(i=hT(this,t));let n=Fte(t.text,e,i);return this.bidiCache.push(new Bg(t.from,t.to,e,i,!0,n)),n}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||_e.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{T4(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return im.of(new Ka(typeof t=="number"?ie.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,i=this.viewState.scrollAnchorAt(t);return im.of(new Ka(ie.cursor(i.from),"start","start",i.top-t,e,!0))}setTabFocusMode(t){t==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof t=="boolean"?this.inputState.tabFocusMode=t?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return Ui.define(()=>({}),{eventHandlers:t})}static domEventObservers(t){return Ui.define(()=>({}),{eventObservers:t})}static theme(t,e){let i=Io.newName(),n=[am.of(i),Fu.of(LO(`.${i}`,t))];return e&&e.dark&&n.push(VO.of(!0)),n}static baseTheme(t){return $o.lowest(Fu.of(LO("."+MO,t,y3)))}static findFromDOM(t){var e;let i=t.querySelector(".cm-content"),n=i&&yt.get(i)||yt.get(t);return((e=n==null?void 0:n.rootView)===null||e===void 0?void 0:e.view)||null}}Ee.styleModule=Fu;Ee.inputHandler=Y4;Ee.clipboardInputFilter=Cy;Ee.clipboardOutputFilter=Py;Ee.scrollHandler=t3;Ee.focusChangeEffect=K4;Ee.perLineTextDirection=J4;Ee.exceptionSink=G4;Ee.updateListener=EO;Ee.editable=Pr;Ee.mouseSelectionStyle=j4;Ee.dragMovesSelection=X4;Ee.clickAddsSelectionRange=q4;Ee.decorations=Lh;Ee.outerDecorations=s3;Ee.atomicRanges=Ey;Ee.bidiIsolatedRanges=r3;Ee.scrollMargins=o3;Ee.darkTheme=VO;Ee.cspNonce=Pe.define({combine:s=>s.length?s[0]:""});Ee.contentAttributes=Ty;Ee.editorAttributes=n3;Ee.lineWrapping=Ee.contentAttributes.of({class:"cm-lineWrapping"});Ee.announce=st.define();const qie=4096,LT={};class Bg{constructor(t,e,i,n,r,o){this.from=t,this.to=e,this.dir=i,this.isolates=n,this.fresh=r,this.order=o}static update(t,e){if(e.empty&&!t.some(r=>r.fresh))return t;let i=[],n=t.length?t[t.length-1].dir:Lt.LTR;for(let r=Math.max(0,t.length-10);r<t.length;r++){let o=t[r];o.dir==n&&!e.touchesRange(o.from,o.to)&&i.push(new Bg(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function BT(s,t,e){for(let i=s.state.facet(t),n=i.length-1;n>=0;n--){let r=i[n],o=typeof r=="function"?r(s):r;o&&_O(o,e)}return e}const Xie=_e.mac?"mac":_e.windows?"win":_e.linux?"linux":"key";function jie(s,t){const e=s.split(/-(?!$)/);let i=e[e.length-1];i=="Space"&&(i=" ");let n,r,o,l;for(let a=0;a<e.length-1;++a){const c=e[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))t=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+c)}return n&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function cm(s,t,e){return t.altKey&&(s="Alt-"+s),t.ctrlKey&&(s="Ctrl-"+s),t.metaKey&&(s="Meta-"+s),e!==!1&&t.shiftKey&&(s="Shift-"+s),s}const Gie=$o.default(Ee.domEventHandlers({keydown(s,t){return ene(Yie(t.state),s,t,"editor")}})),fd=Pe.define({enables:Gie}),$T=new WeakMap;function Yie(s){let t=s.facet(fd),e=$T.get(t);return e||$T.set(t,e=Jie(t.reduce((i,n)=>i.concat(n),[]))),e}let wo=null;const Kie=4e3;function Jie(s,t=Xie){let e=Object.create(null),i=Object.create(null),n=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,c,h)=>{var f,m;let w=e[o]||(e[o]=Object.create(null)),O=l.split(/ (?!$)/).map(C=>jie(C,t));for(let C=1;C<O.length;C++){let P=O.slice(0,C).join(" ");n(P,!0),w[P]||(w[P]={preventDefault:!0,stopPropagation:!1,run:[V=>{let Q=wo={view:V,prefix:P,scope:o};return setTimeout(()=>{wo==Q&&(wo=null)},Kie),!0}]})}let v=O.join(" ");n(v,!1);let k=w[v]||(w[v]={preventDefault:!1,stopPropagation:!1,run:((m=(f=w._any)===null||f===void 0?void 0:f.run)===null||m===void 0?void 0:m.slice())||[]});a&&k.run.push(a),c&&(k.preventDefault=!0),h&&(k.stopPropagation=!0)};for(let o of s){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of l){let h=e[c]||(e[c]=Object.create(null));h._any||(h._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=o;for(let m in h)h[m].run.push(w=>f(w,BO))}let a=o[t]||o.key;if(a)for(let c of l)r(c,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(c,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return e}let BO=null;function ene(s,t,e,i){BO=t;let n=yte(t),r=Vn(n,0),o=Cr(r)==n.length&&n!=" ",l="",a=!1,c=!1,h=!1;wo&&wo.view==e&&wo.scope==i&&(l=wo.prefix+" ",h3.indexOf(t.keyCode)<0&&(c=!0,wo=null));let f=new Set,m=k=>{if(k){for(let C of k.run)if(!f.has(C)&&(f.add(C),C(e)))return k.stopPropagation&&(h=!0),!0;k.preventDefault&&(k.stopPropagation&&(h=!0),c=!0)}return!1},w=s[i],O,v;return w&&(m(w[l+cm(n,t,!o)])?a=!0:o&&(t.altKey||t.metaKey||t.ctrlKey)&&!(_e.windows&&t.ctrlKey&&t.altKey)&&(O=Ro[t.keyCode])&&O!=n?(m(w[l+cm(O,t,!0)])||t.shiftKey&&(v=Rh[t.keyCode])!=n&&v!=O&&m(w[l+cm(v,t,!1)]))&&(a=!0):o&&t.shiftKey&&m(w[l+cm(n,t,!0)])&&(a=!0),!a&&m(w._any)&&(a=!0)),c&&(a=!0),a&&h&&t.stopPropagation(),BO=null,a}class md{constructor(t,e,i,n,r){this.className=t,this.left=e,this.top=i,this.width=n,this.height=r}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,e){return e.className!=this.className?!1:(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width!=null&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,e,i){if(i.empty){let n=t.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let r=v3(t);return[new md(e,n.left-r.left,n.top-r.top,null,n.bottom-n.top)]}else return tne(t,e,i)}}function v3(s){let t=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==Lt.LTR?t.left:t.right-s.scrollDOM.clientWidth*s.scaleX)-s.scrollDOM.scrollLeft*s.scaleX,top:t.top-s.scrollDOM.scrollTop*s.scaleY}}function QT(s,t,e,i){let n=s.coordsAtPos(t,e*2);if(!n)return i;let r=s.dom.getBoundingClientRect(),o=(n.top+n.bottom)/2,l=s.posAtCoords({x:r.left+1,y:o}),a=s.posAtCoords({x:r.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function tne(s,t,e){if(e.to<=s.viewport.from||e.from>=s.viewport.to)return[];let i=Math.max(e.from,s.viewport.from),n=Math.min(e.to,s.viewport.to),r=s.textDirection==Lt.LTR,o=s.contentDOM,l=o.getBoundingClientRect(),a=v3(s),c=o.querySelector(".cm-line"),h=c&&window.getComputedStyle(c),f=l.left+(h?parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)):0),m=l.right-(h?parseInt(h.paddingRight):0),w=IO(s,i,1),O=IO(s,n,-1),v=w.type==tn.Text?w:null,k=O.type==tn.Text?O:null;if(v&&(s.lineWrapping||w.widgetLineBreaks)&&(v=QT(s,i,1,v)),k&&(s.lineWrapping||O.widgetLineBreaks)&&(k=QT(s,n,-1,k)),v&&k&&v.from==k.from&&v.to==k.to)return P(V(e.from,e.to,v));{let D=v?V(e.from,null,v):Q(w,!1),q=k?V(null,e.to,k):Q(O,!0),$=[];return(v||w).to<(k||O).from-(v&&k?1:0)||w.widgetLineBreaks>1&&D.bottom+s.defaultLineHeight/2<q.top?$.push(C(f,D.bottom,m,q.top)):D.bottom<q.top&&s.elementAtHeight((D.bottom+q.top)/2).type==tn.Text&&(D.bottom=q.top=(D.bottom+q.top)/2),P(D).concat($).concat(P(q))}function C(D,q,$,_){return new md(t,D-a.left,q-a.top,$-D,_-q)}function P({top:D,bottom:q,horizontal:$}){let _=[];for(let R=0;R<$.length;R+=2)_.push(C($[R],D,$[R+1],q));return _}function V(D,q,$){let _=1e9,R=-1e9,U=[];function Y(oe,xe,be,Se,H){let ee=s.coordsAtPos(oe,oe==$.to?-2:2),ne=s.coordsAtPos(be,be==$.from?2:-2);!ee||!ne||(_=Math.min(ee.top,ne.top,_),R=Math.max(ee.bottom,ne.bottom,R),H==Lt.LTR?U.push(r&&xe?f:ee.left,r&&Se?m:ne.right):U.push(!r&&Se?f:ne.left,!r&&xe?m:ee.right))}let X=D??$.from,j=q??$.to;for(let oe of s.visibleRanges)if(oe.to>X&&oe.from<j)for(let xe=Math.max(oe.from,X),be=Math.min(oe.to,j);;){let Se=s.state.doc.lineAt(xe);for(let H of s.bidiSpans(Se)){let ee=H.from+Se.from,ne=H.to+Se.from;if(ee>=be)break;ne>xe&&Y(Math.max(ee,xe),D==null&&ee<=X,Math.min(ne,be),q==null&&ne>=j,H.dir)}if(xe=Se.to+1,xe>=be)break}return U.length==0&&Y(X,D==null,j,q==null,s.textDirection),{top:_,bottom:R,horizontal:U}}function Q(D,q){let $=l.top+(q?D.top:D.bottom);return{top:$,bottom:$,horizontal:[]}}}function ine(s,t){return s.constructor==t.constructor&&s.eq(t)}class nne{constructor(t,e){this.view=t,this.layer=e,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),e.above&&this.dom.classList.add("cm-layer-above"),e.class&&this.dom.classList.add(e.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),e.mount&&e.mount(this.dom,t)}update(t){t.startState.facet(Fm)!=t.state.facet(Fm)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&(this.scale(),t.view.requestMeasure(this.measureReq))}docViewUpdate(t){this.layer.updateOnDocViewUpdate!==!1&&t.requestMeasure(this.measureReq)}setOrder(t){let e=0,i=t.facet(Fm);for(;e<i.length&&i[e]!=this.layer;)e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-e)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:t,scaleY:e}=this.view;(t!=this.scaleX||e!=this.scaleY)&&(this.scaleX=t,this.scaleY=e,this.dom.style.transform=`scale(${1/t}, ${1/e})`)}draw(t){if(t.length!=this.drawn.length||t.some((e,i)=>!ine(e,this.drawn[i]))){let e=this.dom.firstChild,i=0;for(let n of t)n.update&&e&&n.constructor&&this.drawn[i].constructor&&n.update(e,this.drawn[i])?(e=e.nextSibling,i++):this.dom.insertBefore(n.draw(),e);for(;e;){let n=e.nextSibling;e.remove(),e=n}this.drawn=t}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Fm=Pe.define();function _3(s){return[Ui.define(t=>new nne(t,s)),Fm.of(s)]}const Bh=Pe.define({combine(s){return Zl(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})}});function sne(s={}){return[Bh.of(s),rne,one,lne,e3.of(!0)]}function k3(s){return s.startState.facet(Bh)!=s.state.facet(Bh)}const rne=_3({above:!0,markers(s){let{state:t}=s,e=t.facet(Bh),i=[];for(let n of t.selection.ranges){let r=n==t.selection.main;if(n.empty||e.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:ie.cursor(n.head,n.head>n.anchor?-1:1);for(let a of md.forRange(s,o,l))i.push(a)}}return i},update(s,t){s.transactions.some(i=>i.selection)&&(t.style.animationName=t.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let e=k3(s);return e&&DT(s.state,t),s.docChanged||s.selectionSet||e},mount(s,t){DT(t.state,s)},class:"cm-cursorLayer"});function DT(s,t){t.style.animationDuration=s.facet(Bh).cursorBlinkRate+"ms"}const one=_3({above:!1,markers(s){return s.state.selection.ranges.map(t=>t.empty?[]:md.forRange(s,"cm-selectionBackground",t)).reduce((t,e)=>t.concat(e))},update(s,t){return s.docChanged||s.selectionSet||s.viewportChanged||k3(s)},class:"cm-selectionLayer"}),lne=$o.highest(Ee.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),S3=st.define({map(s,t){return s==null?null:t.mapPos(s)}}),Uu=_n.define({create(){return null},update(s,t){return s!=null&&(s=t.changes.mapPos(s)),t.effects.reduce((e,i)=>i.is(S3)?i.value:e,s)}}),ane=Ui.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var t;let e=s.state.field(Uu);e==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(Uu)!=e||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:s}=this,t=s.state.field(Uu),e=t!=null&&s.coordsAtPos(t);if(!e)return null;let i=s.scrollDOM.getBoundingClientRect();return{left:e.left-i.left+s.scrollDOM.scrollLeft*s.scaleX,top:e.top-i.top+s.scrollDOM.scrollTop*s.scaleY,height:e.bottom-e.top}}drawCursor(s){if(this.cursor){let{scaleX:t,scaleY:e}=this.view;s?(this.cursor.style.left=s.left/t+"px",this.cursor.style.top=s.top/e+"px",this.cursor.style.height=s.height/e+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(Uu)!=s&&this.view.dispatch({effects:S3.of(s)})}},{eventObservers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function cne(){return[Uu,ane]}function NT(s,t,e,i,n){t.lastIndex=0;for(let r=s.iterRange(e,i),o=e,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=t.exec(r.value);)n(o+l.index,l)}function une(s,t){let e=s.visibleRanges;if(e.length==1&&e[0].from==s.viewport.from&&e[0].to==s.viewport.to)return e;let i=[];for(let{from:n,to:r}of e)n=Math.max(s.state.doc.lineAt(n).from,n-t),r=Math.min(s.state.doc.lineAt(r).to,r+t),i.length&&i[i.length-1].to>=n?i[i.length-1].to=r:i.push({from:n,to:r});return i}class hne{constructor(t){const{regexp:e,decoration:i,decorate:n,boundary:r,maxLength:o=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,n)this.addMatch=(l,a,c,h)=>n(h,c,c+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,c,h)=>{let f=i(l,a,c);f&&h(c,c+l[0].length,f)};else if(i)this.addMatch=(l,a,c,h)=>h(c,c+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(t){let e=new Cl,i=e.add.bind(e);for(let{from:n,to:r}of une(t,this.maxLength))NT(t.state.doc,this.regexp,n,r,(o,l)=>this.addMatch(l,t,o,i));return e.finish()}updateDeco(t,e){let i=1e9,n=-1;return t.docChanged&&t.changes.iterChanges((r,o,l,a)=>{a>=t.view.viewport.from&&l<=t.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),t.viewportMoved||n-i>1e3?this.createDeco(t.view):n>-1?this.updateRange(t.view,e.map(t.changes),i,n):e}updateRange(t,e,i,n){for(let r of t.visibleRanges){let o=Math.max(r.from,i),l=Math.min(r.to,n);if(l>=o){let a=t.state.doc.lineAt(o),c=a.to<l?t.state.doc.lineAt(l):a,h=Math.max(r.from,a.from),f=Math.min(r.to,c.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){h=o;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){f=l;break}}let m=[],w,O=(v,k,C)=>m.push(C.range(v,k));if(a==c)for(this.regexp.lastIndex=h-a.from;(w=this.regexp.exec(a.text))&&w.index<f-a.from;)this.addMatch(w,t,w.index+a.from,O);else NT(t.state.doc,this.regexp,h,f,(v,k)=>this.addMatch(k,t,v,O));e=e.update({filterFrom:h,filterTo:f,filter:(v,k)=>v<h||k>f,add:m})}}return e}}const $O=/x/.unicode!=null?"gu":"g",dne=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,$O),fne={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Rb=null;function mne(){var s;if(Rb==null&&typeof document<"u"&&document.body){let t=document.body.style;Rb=((s=t.tabSize)!==null&&s!==void 0?s:t.MozTabSize)!=null}return Rb||!1}const zm=Pe.define({combine(s){let t=Zl(s,{render:null,specialChars:dne,addSpecialChars:null});return(t.replaceTabs=!mne())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,$O)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,$O)),t}});function gne(s={}){return[zm.of(s),pne()]}let FT=null;function pne(){return FT||(FT=Ui.fromClass(class{constructor(s){this.view=s,this.decorations=Ke.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(zm)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new hne({regexp:s.specialChars,decoration:(t,e,i)=>{let{doc:n}=e.state,r=Vn(t[0],0);if(r==9){let o=n.lineAt(i),l=e.state.tabSize,a=Ms(o.text,l,i-o.from);return Ke.replace({widget:new xne((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=Ke.replace({widget:new One(s,r)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let t=s.state.facet(zm);s.startState.facet(zm)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const wne="•";function bne(s){return s>=32?wne:s==10?"␤":String.fromCharCode(9216+s)}class One extends Qo{constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=bne(this.code),i=t.state.phrase("Control character")+" "+(fne[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,e);if(n)return n;let r=document.createElement("span");return r.textContent=e,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class xne extends Qo{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}function yne(){return _ne}const vne=Ke.line({class:"cm-activeLine"}),_ne=Ui.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let t=-1,e=[];for(let i of s.state.selection.ranges){let n=s.lineBlockAt(i.head);n.from>t&&(e.push(vne.range(n.from)),t=n.from)}return Ke.set(e)}},{decorations:s=>s.decorations}),QO=2e3;function kne(s,t,e){let i=Math.min(t.line,e.line),n=Math.max(t.line,e.line),r=[];if(t.off>QO||e.off>QO||t.col<0||e.col<0){let o=Math.min(t.off,e.off),l=Math.max(t.off,e.off);for(let a=i;a<=n;a++){let c=s.doc.line(a);c.length<=l&&r.push(ie.range(c.from+o,c.to+l))}}else{let o=Math.min(t.col,e.col),l=Math.max(t.col,e.col);for(let a=i;a<=n;a++){let c=s.doc.line(a),h=pO(c.text,o,s.tabSize,!0);if(h<0)r.push(ie.cursor(c.to));else{let f=pO(c.text,l,s.tabSize);r.push(ie.range(c.from+h,c.from+f))}}}return r}function Sne(s,t){let e=s.coordsAtPos(s.viewport.from);return e?Math.round(Math.abs((e.left-t)/s.defaultCharacterWidth)):-1}function zT(s,t){let e=s.posAtCoords({x:t.clientX,y:t.clientY},!1),i=s.state.doc.lineAt(e),n=e-i.from,r=n>QO?-1:n==i.length?Sne(s,t.clientX):Ms(i.text,s.state.tabSize,e-i.from);return{line:i.number,col:r,off:n}}function Cne(s,t){let e=zT(s,t),i=s.state.selection;return e?{update(n){if(n.docChanged){let r=n.changes.mapPos(n.startState.doc.line(e.line).from),o=n.state.doc.lineAt(r);e={line:o.number,col:e.col,off:Math.min(e.off,o.length)},i=i.map(n.changes)}},get(n,r,o){let l=zT(s,n);if(!l)return i;let a=kne(s.state,e,l);return a.length?o?ie.create(a.concat(i.ranges)):ie.create(a):i}}:null}function Pne(s){let t=e=>e.altKey&&e.button==0;return Ee.mouseSelectionStyle.of((e,i)=>t(i)?Cne(e,i):null)}const Tne={Alt:[18,s=>!!s.altKey],Control:[17,s=>!!s.ctrlKey],Shift:[16,s=>!!s.shiftKey],Meta:[91,s=>!!s.metaKey]},Ene={style:"cursor: crosshair"};function Ane(s={}){let[t,e]=Tne[s.key||"Alt"],i=Ui.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==t||e(n))},keyup(n){(n.keyCode==t||!e(n))&&this.set(!1)},mousemove(n){this.set(e(n))}}});return[i,Ee.contentAttributes.of(n=>{var r;return!((r=n.plugin(i))===null||r===void 0)&&r.isDown?Ene:null})]}const Tu="-10000px";class Ine{constructor(t,e,i,n){this.facet=e,this.createTooltipView=i,this.removeTooltipView=n,this.input=t.state.facet(e),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=i(o,r))}update(t,e){var i;let n=t.state.facet(this.facet),r=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(t);return!1}let o=[],l=e?[]:null;for(let a=0;a<r.length;a++){let c=r[a],h=-1;if(c){for(let f=0;f<this.tooltips.length;f++){let m=this.tooltips[f];m&&m.create==c.create&&(h=f)}if(h<0)o[a]=this.createTooltipView(c,a?o[a-1]:null),l&&(l[a]=!!c.above);else{let f=o[a]=this.tooltipViews[h];l&&(l[a]=e[h]),f.update&&f.update(t)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return e&&(l.forEach((a,c)=>e[c]=a),e.length=l.length),this.input=n,this.tooltips=r,this.tooltipViews=o,!0}}function Rne(s){let t=s.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}const Vb=Pe.define({combine:s=>{var t,e,i;return{position:_e.ios?"absolute":((t=s.find(n=>n.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((e=s.find(n=>n.parent))===null||e===void 0?void 0:e.parent)||null,tooltipSpace:((i=s.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Rne}}}),WT=new WeakMap,C3=Ui.fromClass(class{constructor(s){this.view=s,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=s.state.facet(Vb);this.position=t.position,this.parent=t.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Ine(s,P3,(e,i)=>this.createTooltip(e,i),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(s,this.above);t&&this.observeIntersection();let e=t||s.geometryChanged,i=s.state.facet(Vb);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;e=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);e=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);e&&this.maybeMeasure()}createTooltip(s,t){let e=s.create(this.view),i=t?t.dom:null;if(e.dom.classList.add("cm-tooltip"),s.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=Tu,e.dom.style.left="0px",this.container.insertBefore(e.dom,i),e.mount&&e.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(e.dom),e}destroy(){var s,t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(s=i.destroy)===null||s===void 0||s.call(i);this.parent&&this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=1,t=1,e=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(_e.gecko)e=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==Tu&&r.style.left=="0px"){let o=r.getBoundingClientRect();e=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(e||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(s=r.width/this.parent.offsetWidth,t=r.height/this.parent.offsetHeight)}else({scaleX:s,scaleY:t}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),n=Ay(this.view);return{visible:{left:i.left+n.left,top:i.top+n.top,right:i.right-n.right,bottom:i.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(Vb).tooltipSpace(this.view),scaleX:s,scaleY:t,makeAbsolute:e}}writeMeasure(s){var t;if(s.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:e,space:i,scaleX:n,scaleY:r}=s,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],c=this.manager.tooltipViews[l],{dom:h}=c,f=s.pos[l],m=s.size[l];if(!f||a.clip!==!1&&(f.bottom<=Math.max(e.top,i.top)||f.top>=Math.min(e.bottom,i.bottom)||f.right<Math.max(e.left,i.left)-.1||f.left>Math.min(e.right,i.right)+.1)){h.style.top=Tu;continue}let w=a.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,O=w?7:0,v=m.right-m.left,k=(t=WT.get(c))!==null&&t!==void 0?t:m.bottom-m.top,C=c.offset||Mne,P=this.view.textDirection==Lt.LTR,V=m.width>i.right-i.left?P?i.left:i.right-m.width:P?Math.max(i.left,Math.min(f.left-(w?14:0)+C.x,i.right-v)):Math.min(Math.max(i.left,f.left-v+(w?14:0)-C.x),i.right-v),Q=this.above[l];!a.strictSide&&(Q?f.top-k-O-C.y<i.top:f.bottom+k+O+C.y>i.bottom)&&Q==i.bottom-f.bottom>f.top-i.top&&(Q=this.above[l]=!Q);let D=(Q?f.top-i.top:i.bottom-f.bottom)-O;if(D<k&&c.resize!==!1){if(D<this.view.defaultLineHeight){h.style.top=Tu;continue}WT.set(c,k),h.style.height=(k=D)/r+"px"}else h.style.height&&(h.style.height="");let q=Q?f.top-k-O-C.y:f.bottom+O+C.y,$=V+v;if(c.overlap!==!0)for(let _ of o)_.left<$&&_.right>V&&_.top<q+k&&_.bottom>q&&(q=Q?_.top-k-2-O:_.bottom+O+2);if(this.position=="absolute"?(h.style.top=(q-s.parent.top)/r+"px",UT(h,(V-s.parent.left)/n)):(h.style.top=q/r+"px",UT(h,V/n)),w){let _=f.left+(P?C.x:-C.x)-(V+14-7);w.style.left=_/n+"px"}c.overlap!==!0&&o.push({left:V,top:q,right:$,bottom:q+k}),h.classList.toggle("cm-tooltip-above",Q),h.classList.toggle("cm-tooltip-below",!Q),c.positioned&&c.positioned(s.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=Tu}},{eventObservers:{scroll(){this.maybeMeasure()}}});function UT(s,t){let e=parseInt(s.style.left,10);(isNaN(e)||Math.abs(t-e)>1)&&(s.style.left=t+"px")}const Vne=Ee.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Mne={x:0,y:0},P3=Pe.define({enables:[C3,Vne]});function T3(s,t){let e=s.plugin(C3);if(!e)return null;let i=e.manager.tooltips.indexOf(t);return i<0?null:e.manager.tooltipViews[i]}class $r extends Sl{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}$r.prototype.elementClass="";$r.prototype.toDOM=void 0;$r.prototype.mapMode=Fi.TrackBefore;$r.prototype.startSide=$r.prototype.endSide=-1;$r.prototype.point=!0;const Wm=Pe.define(),Lne=Pe.define(),Bne={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>nt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},lh=Pe.define();function $ne(s){return[E3(),lh.of({...Bne,...s})]}const ZT=Pe.define({combine:s=>s.some(t=>t)});function E3(s){return[Qne]}const Qne=Ui.fromClass(class{constructor(s){this.view=s,this.domAfter=null,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=s.state.facet(lh).map(t=>new qT(s,t)),this.fixed=!s.state.facet(ZT);for(let t of this.gutters)t.config.side=="after"?this.getDOMAfter().appendChild(t.dom):this.dom.appendChild(t.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(s){if(this.updateGutters(s)){let t=this.prevViewport,e=s.view.viewport,i=Math.min(t.to,e.to)-Math.max(t.from,e.from);this.syncGutters(i<(e.to-e.from)*.8)}if(s.geometryChanged){let t=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=t,this.domAfter&&(this.domAfter.style.minHeight=t)}this.view.state.facet(ZT)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=s.view.viewport}syncGutters(s){let t=this.dom.nextSibling;s&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let e=nt.iter(this.view.state.facet(Wm),this.view.viewport.from),i=[],n=this.gutters.map(r=>new Dne(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(r.type)){let o=!0;for(let l of r.type)if(l.type==tn.Text&&o){DO(e,i,l.from);for(let a of n)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(r.type==tn.Text){DO(e,i,r.from);for(let o of n)o.line(this.view,r,i)}else if(r.widget)for(let o of n)o.widget(this.view,r);for(let r of n)r.finish();s&&(this.view.scrollDOM.insertBefore(this.dom,t),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(s){let t=s.startState.facet(lh),e=s.state.facet(lh),i=s.docChanged||s.heightChanged||s.viewportChanged||!nt.eq(s.startState.facet(Wm),s.state.facet(Wm),s.view.viewport.from,s.view.viewport.to);if(t==e)for(let n of this.gutters)n.update(s)&&(i=!0);else{i=!0;let n=[];for(let r of e){let o=t.indexOf(r);o<0?n.push(new qT(this.view,r)):(this.gutters[o].update(s),n.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),n.indexOf(r)<0&&r.destroy();for(let r of n)r.config.side=="after"?this.getDOMAfter().appendChild(r.dom):this.dom.appendChild(r.dom);this.gutters=n}return i}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:s=>Ee.scrollMargins.of(t=>{let e=t.plugin(s);if(!e||e.gutters.length==0||!e.fixed)return null;let i=e.dom.offsetWidth*t.scaleX,n=e.domAfter?e.domAfter.offsetWidth*t.scaleX:0;return t.textDirection==Lt.LTR?{left:i,right:n}:{right:i,left:n}})});function HT(s){return Array.isArray(s)?s:[s]}function DO(s,t,e){for(;s.value&&s.from<=e;)s.from==e&&t.push(s.value),s.next()}class Dne{constructor(t,e,i){this.gutter=t,this.height=i,this.i=0,this.cursor=nt.iter(t.markers,e.from)}addElement(t,e,i){let{gutter:n}=this,r=(e.top-this.height)/t.scaleY,o=e.height/t.scaleY;if(this.i==n.elements.length){let l=new A3(t,o,r,i);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(t,o,r,i);this.height=e.bottom,this.i++}line(t,e,i){let n=[];DO(this.cursor,n,e.from),i.length&&(n=n.concat(i));let r=this.gutter.config.lineMarker(t,e,n);r&&n.unshift(r);let o=this.gutter;n.length==0&&!o.config.renderEmptyElements||this.addElement(t,e,n)}widget(t,e){let i=this.gutter.config.widgetMarker(t,e.widget,e),n=i?[i]:null;for(let r of t.state.facet(Lne)){let o=r(t,e.widget,e);o&&(n||(n=[])).push(o)}n&&this.addElement(t,e,n)}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class qT{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in e.domEventHandlers)this.dom.addEventListener(i,n=>{let r=n.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=n.clientY;let l=t.lineBlockAtHeight(o-t.documentTop);e.domEventHandlers[i](t,l,n)&&n.preventDefault()});this.markers=HT(e.markers(t)),e.initialSpacer&&(this.spacer=new A3(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=HT(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],t);n!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[n])}let i=t.view.viewport;return!nt.eq(this.markers,e,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class A3{constructor(t,e,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,i,n)}update(t,e,i,n){this.height!=e&&(this.height=e,this.dom.style.height=e+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Nne(this.markers,n)||this.setMarkers(t,n)}setMarkers(t,e){let i="cm-gutterElement",n=this.dom.firstChild;for(let r=0,o=0;;){let l=o,a=r<e.length?e[r++]:null,c=!1;if(a){let h=a.elementClass;h&&(i+=" "+h);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,c=!0;break}}else l=this.markers.length;for(;o<l;){let h=this.markers[o++];if(h.toDOM){h.destroy(n);let f=n.nextSibling;n.remove(),n=f}}if(!a)break;a.toDOM&&(c?n=n.nextSibling:this.dom.insertBefore(a.toDOM(t),n)),c&&o++}this.dom.className=i,this.markers=e}destroy(){this.setMarkers(null,[])}}function Nne(s,t){if(s.length!=t.length)return!1;for(let e=0;e<s.length;e++)if(!s[e].compare(t[e]))return!1;return!0}const Fne=Pe.define(),zne=Pe.define(),Wa=Pe.define({combine(s){return Zl(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let i=Object.assign({},t);for(let n in e){let r=i[n],o=e[n];i[n]=r?(l,a,c)=>r(l,a,c)||o(l,a,c):o}return i}})}});class Mb extends $r{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function Lb(s,t){return s.state.facet(Wa).formatNumber(t,s.state)}const Wne=lh.compute([Wa],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(Fne)},lineMarker(t,e,i){return i.some(n=>n.toDOM)?null:new Mb(Lb(t,t.state.doc.lineAt(e.from).number))},widgetMarker:(t,e,i)=>{for(let n of t.state.facet(zne)){let r=n(t,e,i);if(r)return r}return null},lineMarkerChange:t=>t.startState.facet(Wa)!=t.state.facet(Wa),initialSpacer(t){return new Mb(Lb(t,XT(t.state.doc.lines)))},updateSpacer(t,e){let i=Lb(e.view,XT(e.view.state.doc.lines));return i==t.number?t:new Mb(i)},domEventHandlers:s.facet(Wa).domEventHandlers,side:"before"}));function Une(s={}){return[Wa.of(s),E3(),Wne]}function XT(s){let t=9;for(;t<s;)t=t*10+9;return t}const Zne=new class extends $r{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Hne=Wm.compute(["selection"],s=>{let t=[],e=-1;for(let i of s.selection.ranges){let n=s.doc.lineAt(i.head).from;n>e&&(e=n,t.push(Zne.range(n)))}return nt.of(t)});function qne(){return Hne}const I3=1024;let Xne=0;class ts{constructor(t,e){this.from=t,this.to=e}}class Ne{constructor(t={}){this.id=Xne++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=ui.match(t)),e=>{let i=t(e);return i===void 0?null:[this,i]}}}Ne.closedBy=new Ne({deserialize:s=>s.split(" ")});Ne.openedBy=new Ne({deserialize:s=>s.split(" ")});Ne.group=new Ne({deserialize:s=>s.split(" ")});Ne.isolate=new Ne({deserialize:s=>{if(s&&s!="rtl"&&s!="ltr"&&s!="auto")throw new RangeError("Invalid value for isolate: "+s);return s||"auto"}});Ne.contextHash=new Ne({perNode:!0});Ne.lookAhead=new Ne({perNode:!0});Ne.mounted=new Ne({perNode:!0});class $h{constructor(t,e,i){this.tree=t,this.overlay=e,this.parser=i}static get(t){return t&&t.props&&t.props[Ne.mounted.id]}}const jne=Object.create(null);class ui{constructor(t,e,i,n=0){this.name=t,this.props=e,this.id=i,this.flags=n}static define(t){let e=t.props&&t.props.length?Object.create(null):jne,i=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),n=new ui(t.name||"",e,t.id,i);if(t.props){for(let r of t.props)if(Array.isArray(r)||(r=r(n)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[r[0].id]=r[1]}}return n}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let e=this.prop(Ne.group);return e?e.indexOf(t)>-1:!1}return this.id==t}static match(t){let e=Object.create(null);for(let i in t)for(let n of i.split(" "))e[n]=t[i];return i=>{for(let n=i.prop(Ne.group),r=-1;r<(n?n.length:0);r++){let o=e[r<0?i.name:n[r]];if(o)return o}}}}ui.none=new ui("",Object.create(null),0,8);class gd{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let i of this.types){let n=null;for(let r of t){let o=r(i);o&&(n||(n=Object.assign({},i.props)),n[o[0].id]=o[1])}e.push(n?new ui(i.name,n,i.id,i.flags):i)}return new gd(e)}}const um=new WeakMap,jT=new WeakMap;var _t;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(_t||(_t={}));class mt{constructor(t,e,i,n,r){if(this.type=t,this.children=e,this.positions=i,this.length=n,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let t=$h.get(this);if(t&&!t.overlay)return t.tree.toString();let e="";for(let i of this.children){let n=i.toString();n&&(e&&(e+=","),e+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new $g(this.topNode,t)}cursorAt(t,e=0,i=0){let n=um.get(this)||this.topNode,r=new $g(n);return r.moveTo(t,e),um.set(this,r._tree),r}get topNode(){return new Wi(this,0,0,null)}resolve(t,e=0){let i=Qh(um.get(this)||this.topNode,t,e,!1);return um.set(this,i),i}resolveInner(t,e=0){let i=Qh(jT.get(this)||this.topNode,t,e,!0);return jT.set(this,i),i}resolveStack(t,e=0){return Kne(this,t,e)}iterate(t){let{enter:e,leave:i,from:n=0,to:r=this.length}=t,o=t.mode||0,l=(o&_t.IncludeAnonymous)>0;for(let a=this.cursor(o|_t.IncludeAnonymous);;){let c=!1;if(a.from<=r&&a.to>=n&&(!l&&a.type.isAnonymous||e(a)!==!1)){if(a.firstChild())continue;c=!0}for(;c&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;c=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:By(ui.none,this.children,this.positions,0,this.children.length,0,this.length,(e,i,n)=>new mt(this.type,e,i,n,this.propValues),t.makeTree||((e,i,n)=>new mt(ui.none,e,i,n)))}static build(t){return Jne(t)}}mt.empty=new mt(ui.none,[],[],0);class My{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new My(this.buffer,this.index)}}class Mo{constructor(t,e,i){this.buffer=t,this.length=e,this.set=i}get type(){return ui.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],i=this.buffer[t+3],n=this.set.types[e],r=n.name;if(/\W/.test(r)&&!n.isError&&(r=JSON.stringify(r)),t+=4,i==t)return r;let o=[];for(;t<i;)o.push(this.childString(t)),t=this.buffer[t+3];return r+"("+o.join(",")+")"}findChild(t,e,i,n,r){let{buffer:o}=this,l=-1;for(let a=t;a!=e&&!(R3(r,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(t,e,i){let n=this.buffer,r=new Uint16Array(e-t),o=0;for(let l=t,a=0;l<e;){r[a++]=n[l++],r[a++]=n[l++]-i;let c=r[a++]=n[l++]-i;r[a++]=n[l++]-t,o=Math.max(o,c)}return new Mo(r,o,this.set)}}function R3(s,t,e,i){switch(s){case-2:return e<t;case-1:return i>=t&&e<t;case 0:return e<t&&i>t;case 1:return e<=t&&i>t;case 2:return i>t;case 4:return!0}}function Qh(s,t,e,i){for(var n;s.from==s.to||(e<1?s.from>=t:s.from>t)||(e>-1?s.to<=t:s.to<t);){let o=!i&&s instanceof Wi&&s.index<0?null:s.parent;if(!o)return s;s=o}let r=i?0:_t.IgnoreOverlays;if(i)for(let o=s,l=o.parent;l;o=l,l=o.parent)o instanceof Wi&&o.index<0&&((n=l.enter(t,e,r))===null||n===void 0?void 0:n.from)!=o.from&&(s=l);for(;;){let o=s.enter(t,e,r);if(!o)return s;s=o}}class V3{cursor(t=0){return new $g(this,t)}getChild(t,e=null,i=null){let n=GT(this,t,e,i);return n.length?n[0]:null}getChildren(t,e=null,i=null){return GT(this,t,e,i)}resolve(t,e=0){return Qh(this,t,e,!1)}resolveInner(t,e=0){return Qh(this,t,e,!0)}matchContext(t){return NO(this.parent,t)}enterUnfinishedNodesBefore(t){let e=this.childBefore(t),i=this;for(;e;){let n=e.lastChild;if(!n||n.to!=e.to)break;n.type.isError&&n.from==n.to?(i=e,e=n.prevSibling):e=n}return i}get node(){return this}get next(){return this.parent}}class Wi extends V3{constructor(t,e,i,n){super(),this._tree=t,this.from=e,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,i,n,r=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,c=e>0?l.length:-1;t!=c;t+=e){let h=l[t],f=a[t]+o.from;if(R3(n,i,f,f+h.length)){if(h instanceof Mo){if(r&_t.ExcludeBuffers)continue;let m=h.findChild(0,h.buffer.length,e,i-f,n);if(m>-1)return new Js(new Gne(o,h,t,f),null,m)}else if(r&_t.IncludeAnonymous||!h.type.isAnonymous||Ly(h)){let m;if(!(r&_t.IgnoreMounts)&&(m=$h.get(h))&&!m.overlay)return new Wi(m.tree,f,t,o);let w=new Wi(h,f,t,o);return r&_t.IncludeAnonymous||!w.type.isAnonymous?w:w.nextChild(e<0?h.children.length-1:0,e,i,n)}}}if(r&_t.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?t=o.index+e:t=e<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,i=0){let n;if(!(i&_t.IgnoreOverlays)&&(n=$h.get(this._tree))&&n.overlay){let r=t-this.from;for(let{from:o,to:l}of n.overlay)if((e>0?o<=r:o<r)&&(e<0?l>=r:l>r))return new Wi(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,i)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function GT(s,t,e,i){let n=s.cursor(),r=[];if(!n.firstChild())return r;if(e!=null){for(let o=!1;!o;)if(o=n.type.is(e),!n.nextSibling())return r}for(;;){if(i!=null&&n.type.is(i))return r;if(n.type.is(t)&&r.push(n.node),!n.nextSibling())return i==null?r:[]}}function NO(s,t,e=t.length-1){for(let i=s;e>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[e]&&t[e]!=i.name)return!1;e--}}return!0}class Gne{constructor(t,e,i,n){this.parent=t,this.buffer=e,this.index=i,this.start=n}}class Js extends V3{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,i){super(),this.context=t,this._parent=e,this.index=i,this.type=t.buffer.set.types[t.buffer.buffer[i]]}child(t,e,i){let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],t,e-this.context.start,i);return r<0?null:new Js(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,i=0){if(i&_t.ExcludeBuffers)return null;let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return r<0?null:new Js(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new Js(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new Js(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],e=[],{buffer:i}=this.context,n=this.index+4,r=i.buffer[this.index+3];if(r>n){let o=i.buffer[this.index+1];t.push(i.slice(n,r,o)),e.push(0)}return new mt(this.type,t,e,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function M3(s){if(!s.length)return null;let t=0,e=s[0];for(let r=1;r<s.length;r++){let o=s[r];(o.from>e.from||o.to<e.to)&&(e=o,t=r)}let i=e instanceof Wi&&e.index<0?null:e.parent,n=s.slice();return i?n[t]=i:n.splice(t,1),new Yne(n,e)}class Yne{constructor(t,e){this.heads=t,this.node=e}get next(){return M3(this.heads)}}function Kne(s,t,e){let i=s.resolveInner(t,e),n=null;for(let r=i instanceof Wi?i:i.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(n||(n=[i])).push(o.resolve(t,e)),r=o}else{let o=$h.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=t&&o.overlay[o.overlay.length-1].to>=t){let l=new Wi(o.tree,o.overlay[0].from+r.from,-1,r);(n||(n=[i])).push(Qh(l,t,e,!1))}}return n?M3(n):i}class $g{get name(){return this.type.name}constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof Wi)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let i=t._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,e){this.index=t;let{start:i,buffer:n}=this.buffer;return this.type=e||n.set.types[n.buffer[t]],this.from=i+n.buffer[t+1],this.to=i+n.buffer[t+2],!0}yield(t){return t?t instanceof Wi?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,i){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,i,this.mode));let{buffer:n}=this.buffer,r=n.findChild(this.index+4,n.buffer[this.index+3],t,e-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,i=this.mode){return this.buffer?i&_t.ExcludeBuffers?!1:this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&_t.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&_t.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:e}=this.buffer,i=this.stack.length-1;if(t<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(e.findChild(n,this.index,-1,0,4))}else{let n=e.buffer[this.index+3];if(n<(i<0?e.buffer.length:e.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,i,{buffer:n}=this;if(n){if(t>0){if(this.index<n.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(n.buffer.buffer[r+3]<this.index)return!1;({index:e,parent:i}=n)}else({index:e,_parent:i}=this._tree);for(;i;{index:e,_parent:i}=i)if(e>-1)for(let r=e+t,o=t<0?-1:i._tree.children.length;r!=o;r+=t){let l=i._tree.children[r];if(this.mode&_t.IncludeAnonymous||l instanceof Mo||!l.type.isAnonymous||Ly(l))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,i=0;if(t&&t.context==this.buffer)e:for(let n=this.index,r=this.stack.length;r>=0;){for(let o=t;o;o=o._parent)if(o.index==n){if(n==this.index)return o;e=o,i=r+1;break e}n=this.stack[--r]}for(let n=i;n<this.stack.length;n++)e=new Js(this.buffer,e,this.stack[n]);return this.bufferNode=new Js(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let i=0;;){let n=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&e&&e(this),n=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,n=!0}}}matchContext(t){if(!this.buffer)return NO(this.node.parent,t);let{buffer:e}=this.buffer,{types:i}=e.set;for(let n=t.length-1,r=this.stack.length-1;n>=0;r--){if(r<0)return NO(this._tree,t,n);let o=i[e.buffer[this.stack[r]]];if(!o.isAnonymous){if(t[n]&&t[n]!=o.name)return!1;n--}}return!0}}function Ly(s){return s.children.some(t=>t instanceof Mo||!t.type.isAnonymous||Ly(t))}function Jne(s){var t;let{buffer:e,nodeSet:i,maxBufferLength:n=I3,reused:r=[],minRepeatType:o=i.types.length}=s,l=Array.isArray(e)?new My(e,e.length):e,a=i.types,c=0,h=0;function f(D,q,$,_,R,U){let{id:Y,start:X,end:j,size:oe}=l,xe=h,be=c;for(;oe<0;)if(l.next(),oe==-1){let M=r[Y];$.push(M),_.push(X-D);return}else if(oe==-3){c=Y;return}else if(oe==-4){h=Y;return}else throw new RangeError(`Unrecognized record size: ${oe}`);let Se=a[Y],H,ee,ne=X-D;if(j-X<=n&&(ee=k(l.pos-q,R))){let M=new Uint16Array(ee.size-ee.skip),J=l.pos-ee.size,fe=M.length;for(;l.pos>J;)fe=C(ee.start,M,fe);H=new Mo(M,j-ee.start,i),ne=ee.start-D}else{let M=l.pos-oe;l.next();let J=[],fe=[],W=Y>=o?Y:-1,B=0,K=j;for(;l.pos>M;)W>=0&&l.id==W&&l.size>=0?(l.end<=K-n&&(O(J,fe,X,B,l.end,K,W,xe,be),B=J.length,K=l.end),l.next()):U>2500?m(X,M,J,fe):f(X,M,J,fe,W,U+1);if(W>=0&&B>0&&B<J.length&&O(J,fe,X,B,X,K,W,xe,be),J.reverse(),fe.reverse(),W>-1&&B>0){let me=w(Se,be);H=By(Se,J,fe,0,J.length,0,j-X,me,me)}else H=v(Se,J,fe,j-X,xe-j,be)}$.push(H),_.push(ne)}function m(D,q,$,_){let R=[],U=0,Y=-1;for(;l.pos>q;){let{id:X,start:j,end:oe,size:xe}=l;if(xe>4)l.next();else{if(Y>-1&&j<Y)break;Y<0&&(Y=oe-n),R.push(X,j,oe),U++,l.next()}}if(U){let X=new Uint16Array(U*4),j=R[R.length-2];for(let oe=R.length-3,xe=0;oe>=0;oe-=3)X[xe++]=R[oe],X[xe++]=R[oe+1]-j,X[xe++]=R[oe+2]-j,X[xe++]=xe;$.push(new Mo(X,R[2]-j,i)),_.push(j-D)}}function w(D,q){return($,_,R)=>{let U=0,Y=$.length-1,X,j;if(Y>=0&&(X=$[Y])instanceof mt){if(!Y&&X.type==D&&X.length==R)return X;(j=X.prop(Ne.lookAhead))&&(U=_[Y]+X.length+j)}return v(D,$,_,R,U,q)}}function O(D,q,$,_,R,U,Y,X,j){let oe=[],xe=[];for(;D.length>_;)oe.push(D.pop()),xe.push(q.pop()+$-R);D.push(v(i.types[Y],oe,xe,U-R,X-U,j)),q.push(R-$)}function v(D,q,$,_,R,U,Y){if(U){let X=[Ne.contextHash,U];Y=Y?[X].concat(Y):[X]}if(R>25){let X=[Ne.lookAhead,R];Y=Y?[X].concat(Y):[X]}return new mt(D,q,$,_,Y)}function k(D,q){let $=l.fork(),_=0,R=0,U=0,Y=$.end-n,X={size:0,start:0,skip:0};e:for(let j=$.pos-D;$.pos>j;){let oe=$.size;if($.id==q&&oe>=0){X.size=_,X.start=R,X.skip=U,U+=4,_+=4,$.next();continue}let xe=$.pos-oe;if(oe<0||xe<j||$.start<Y)break;let be=$.id>=o?4:0,Se=$.start;for($.next();$.pos>xe;){if($.size<0)if($.size==-3)be+=4;else break e;else $.id>=o&&(be+=4);$.next()}R=Se,_+=oe,U+=be}return(q<0||_==D)&&(X.size=_,X.start=R,X.skip=U),X.size>4?X:void 0}function C(D,q,$){let{id:_,start:R,end:U,size:Y}=l;if(l.next(),Y>=0&&_<o){let X=$;if(Y>4){let j=l.pos-(Y-4);for(;l.pos>j;)$=C(D,q,$)}q[--$]=X,q[--$]=U-D,q[--$]=R-D,q[--$]=_}else Y==-3?c=_:Y==-4&&(h=_);return $}let P=[],V=[];for(;l.pos>0;)f(s.start||0,s.bufferStart||0,P,V,-1,0);let Q=(t=s.length)!==null&&t!==void 0?t:P.length?V[0]+P[0].length:0;return new mt(a[s.topID],P.reverse(),V.reverse(),Q)}const YT=new WeakMap;function Um(s,t){if(!s.isAnonymous||t instanceof Mo||t.type!=s)return 1;let e=YT.get(t);if(e==null){e=1;for(let i of t.children){if(i.type!=s||!(i instanceof mt)){e=1;break}e+=Um(s,i)}YT.set(t,e)}return e}function By(s,t,e,i,n,r,o,l,a){let c=0;for(let O=i;O<n;O++)c+=Um(s,t[O]);let h=Math.ceil(c*1.5/8),f=[],m=[];function w(O,v,k,C,P){for(let V=k;V<C;){let Q=V,D=v[V],q=Um(s,O[V]);for(V++;V<C;V++){let $=Um(s,O[V]);if(q+$>=h)break;q+=$}if(V==Q+1){if(q>h){let $=O[Q];w($.children,$.positions,0,$.children.length,v[Q]+P);continue}f.push(O[Q])}else{let $=v[V-1]+O[V-1].length-D;f.push(By(s,O,v,Q,V,D,$,null,a))}m.push(D+P-r)}}return w(t,e,i,n,0),(l||a)(f,m,o)}class L3{constructor(){this.map=new WeakMap}setBuffer(t,e,i){let n=this.map.get(t);n||this.map.set(t,n=new Map),n.set(e,i)}getBuffer(t,e){let i=this.map.get(t);return i&&i.get(e)}set(t,e){t instanceof Js?this.setBuffer(t.context.buffer,t.index,e):t instanceof Wi&&this.map.set(t.tree,e)}get(t){return t instanceof Js?this.getBuffer(t.context.buffer,t.index):t instanceof Wi?this.map.get(t.tree):void 0}cursorSet(t,e){t.buffer?this.setBuffer(t.buffer.buffer,t.index,e):this.map.set(t.tree,e)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}}class Rr{constructor(t,e,i,n,r=!1,o=!1){this.from=t,this.to=e,this.tree=i,this.offset=n,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,e=[],i=!1){let n=[new Rr(0,t.length,t,0,!1,i)];for(let r of e)r.to>t.length&&n.push(r);return n}static applyChanges(t,e,i=128){if(!e.length)return t;let n=[],r=1,o=t.length?t[0]:null;for(let l=0,a=0,c=0;;l++){let h=l<e.length?e[l]:null,f=h?h.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let m=o;if(a>=m.from||f<=m.to||c){let w=Math.max(m.from,a)-c,O=Math.min(m.to,f)-c;m=w>=O?null:new Rr(w,O,m.tree,m.offset+c,l>0,!!h)}if(m&&n.push(m),o.to>f)break;o=r<t.length?t[r++]:null}if(!h)break;a=h.toA,c=h.toA-h.toB}return n}}class $y{startParse(t,e,i){return typeof t=="string"&&(t=new ese(t)),i=i?i.length?i.map(n=>new ts(n.from,n.to)):[new ts(0,0)]:[new ts(0,t.length)],this.createParse(t,e||[],i)}parse(t,e,i){let n=this.startParse(t,e,i);for(;;){let r=n.advance();if(r)return r}}}class ese{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}function B3(s){return(t,e,i,n)=>new ise(t,s,e,i,n)}class KT{constructor(t,e,i,n,r){this.parser=t,this.parse=e,this.overlay=i,this.target=n,this.from=r}}function JT(s){if(!s.length||s.some(t=>t.from>=t.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(s))}class tse{constructor(t,e,i,n,r,o,l){this.parser=t,this.predicate=e,this.mounts=i,this.index=n,this.start=r,this.target=o,this.prev=l,this.depth=0,this.ranges=[]}}const FO=new Ne({perNode:!0});class ise{constructor(t,e,i,n,r){this.nest=e,this.input=i,this.fragments=n,this.ranges=r,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=t}advance(){if(this.baseParse){let i=this.baseParse.advance();if(!i)return null;if(this.baseParse=null,this.baseTree=i,this.startInner(),this.stoppedAt!=null)for(let n of this.inner)n.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let i=this.baseTree;return this.stoppedAt!=null&&(i=new mt(i.type,i.children,i.positions,i.length,i.propValues.concat([[FO,this.stoppedAt]]))),i}let t=this.inner[this.innerDone],e=t.parse.advance();if(e){this.innerDone++;let i=Object.assign(Object.create(null),t.target.props);i[Ne.mounted.id]=new $h(e,t.overlay,t.parser),t.target.props=i}return null}get parsedPos(){if(this.baseParse)return 0;let t=this.input.length;for(let e=this.innerDone;e<this.inner.length;e++)this.inner[e].from<t&&(t=Math.min(t,this.inner[e].parse.parsedPos));return t}stopAt(t){if(this.stoppedAt=t,this.baseParse)this.baseParse.stopAt(t);else for(let e=this.innerDone;e<this.inner.length;e++)this.inner[e].parse.stopAt(t)}startInner(){let t=new rse(this.fragments),e=null,i=null,n=new $g(new Wi(this.baseTree,this.ranges[0].from,0,null),_t.IncludeAnonymous|_t.IgnoreMounts);e:for(let r,o;;){let l=!0,a;if(this.stoppedAt!=null&&n.from>=this.stoppedAt)l=!1;else if(t.hasNode(n)){if(e){let c=e.mounts.find(h=>h.frag.from<=n.from&&h.frag.to>=n.to&&h.mount.overlay);if(c)for(let h of c.mount.overlay){let f=h.from+c.pos,m=h.to+c.pos;f>=n.from&&m<=n.to&&!e.ranges.some(w=>w.from<m&&w.to>f)&&e.ranges.push({from:f,to:m})}}l=!1}else if(i&&(o=nse(i.ranges,n.from,n.to)))l=o!=2;else if(!n.type.isAnonymous&&(r=this.nest(n,this.input))&&(n.from<n.to||!r.overlay)){n.tree||sse(n);let c=t.findMounts(n.from,r.parser);if(typeof r.overlay=="function")e=new tse(r.parser,r.overlay,c,this.inner.length,n.from,n.tree,e);else{let h=iE(this.ranges,r.overlay||(n.from<n.to?[new ts(n.from,n.to)]:[]));h.length&&JT(h),(h.length||!r.overlay)&&this.inner.push(new KT(r.parser,h.length?r.parser.startParse(this.input,nE(c,h),h):r.parser.startParse(""),r.overlay?r.overlay.map(f=>new ts(f.from-n.from,f.to-n.from)):null,n.tree,h.length?h[0].from:n.from)),r.overlay?h.length&&(i={ranges:h,depth:0,prev:i}):l=!1}}else if(e&&(a=e.predicate(n))&&(a===!0&&(a=new ts(n.from,n.to)),a.from<a.to)){let c=e.ranges.length-1;c>=0&&e.ranges[c].to==a.from?e.ranges[c]={from:e.ranges[c].from,to:a.to}:e.ranges.push(a)}if(l&&n.firstChild())e&&e.depth++,i&&i.depth++;else for(;!n.nextSibling();){if(!n.parent())break e;if(e&&!--e.depth){let c=iE(this.ranges,e.ranges);c.length&&(JT(c),this.inner.splice(e.index,0,new KT(e.parser,e.parser.startParse(this.input,nE(e.mounts,c),c),e.ranges.map(h=>new ts(h.from-e.start,h.to-e.start)),e.target,c[0].from))),e=e.prev}i&&!--i.depth&&(i=i.prev)}}}}function nse(s,t,e){for(let i of s){if(i.from>=e)break;if(i.to>t)return i.from<=t&&i.to>=e?2:1}return 0}function eE(s,t,e,i,n,r){if(t<e){let o=s.buffer[t+1];i.push(s.slice(t,e,o)),n.push(o-r)}}function sse(s){let{node:t}=s,e=[],i=t.context.buffer;do e.push(s.index),s.parent();while(!s.tree);let n=s.tree,r=n.children.indexOf(i),o=n.children[r],l=o.buffer,a=[r];function c(h,f,m,w,O,v){let k=e[v],C=[],P=[];eE(o,h,k,C,P,w);let V=l[k+1],Q=l[k+2];a.push(C.length);let D=v?c(k+4,l[k+3],o.set.types[l[k]],V,Q-V,v-1):t.toTree();return C.push(D),P.push(V-w),eE(o,l[k+3],f,C,P,w),new mt(m,C,P,O)}n.children[r]=c(0,l.length,ui.none,0,o.length,e.length-1);for(let h of a){let f=s.tree.children[h],m=s.tree.positions[h];s.yield(new Wi(f,m+s.from,h,s._tree))}}class tE{constructor(t,e){this.offset=e,this.done=!1,this.cursor=t.cursor(_t.IncludeAnonymous|_t.IgnoreMounts)}moveTo(t){let{cursor:e}=this,i=t-this.offset;for(;!this.done&&e.from<i;)e.to>=t&&e.enter(i,1,_t.IgnoreOverlays|_t.ExcludeBuffers)||e.next(!1)||(this.done=!0)}hasNode(t){if(this.moveTo(t.from),!this.done&&this.cursor.from+this.offset==t.from&&this.cursor.tree)for(let e=this.cursor.tree;;){if(e==t.tree)return!0;if(e.children.length&&e.positions[0]==0&&e.children[0]instanceof mt)e=e.children[0];else break}return!1}}let rse=class{constructor(t){var e;if(this.fragments=t,this.curTo=0,this.fragI=0,t.length){let i=this.curFrag=t[0];this.curTo=(e=i.tree.prop(FO))!==null&&e!==void 0?e:i.to,this.inner=new tE(i.tree,-i.offset)}else this.curFrag=this.inner=null}hasNode(t){for(;this.curFrag&&t.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=t.from&&this.curTo>=t.to&&this.inner.hasNode(t)}nextFrag(){var t;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let e=this.curFrag=this.fragments[this.fragI];this.curTo=(t=e.tree.prop(FO))!==null&&t!==void 0?t:e.to,this.inner=new tE(e.tree,-e.offset)}}findMounts(t,e){var i;let n=[];if(this.inner){this.inner.cursor.moveTo(t,1);for(let r=this.inner.cursor.node;r;r=r.parent){let o=(i=r.tree)===null||i===void 0?void 0:i.prop(Ne.mounted);if(o&&o.parser==e)for(let l=this.fragI;l<this.fragments.length;l++){let a=this.fragments[l];if(a.from>=r.to)break;a.tree==this.curFrag.tree&&n.push({frag:a,pos:r.from-a.offset,mount:o})}}}return n}};function iE(s,t){let e=null,i=t;for(let n=1,r=0;n<s.length;n++){let o=s[n-1].to,l=s[n].from;for(;r<i.length;r++){let a=i[r];if(a.from>=l)break;a.to<=o||(e||(i=e=t.slice()),a.from<o?(e[r]=new ts(a.from,o),a.to>l&&e.splice(r+1,0,new ts(l,a.to))):a.to>l?e[r--]=new ts(l,a.to):e.splice(r--,1))}}return i}function ose(s,t,e,i){let n=0,r=0,o=!1,l=!1,a=-1e9,c=[];for(;;){let h=n==s.length?1e9:o?s[n].to:s[n].from,f=r==t.length?1e9:l?t[r].to:t[r].from;if(o!=l){let m=Math.max(a,e),w=Math.min(h,f,i);m<w&&c.push(new ts(m,w))}if(a=Math.min(h,f),a==1e9)break;h==a&&(o?(o=!1,n++):o=!0),f==a&&(l?(l=!1,r++):l=!0)}return c}function nE(s,t){let e=[];for(let{pos:i,mount:n,frag:r}of s){let o=i+(n.overlay?n.overlay[0].from:0),l=o+n.tree.length,a=Math.max(r.from,o),c=Math.min(r.to,l);if(n.overlay){let h=n.overlay.map(m=>new ts(m.from+i,m.to+i)),f=ose(t,h,a,c);for(let m=0,w=a;;m++){let O=m==f.length,v=O?c:f[m].from;if(v>w&&e.push(new Rr(w,v,n.tree,-o,r.from>=w||r.openStart,r.to<=v||r.openEnd)),O)break;w=f[m].to}}else e.push(new Rr(a,c,n.tree,-o,r.from>=o||r.openStart,r.to<=l||r.openEnd))}return e}let lse=0;class Mn{constructor(t,e,i,n){this.name=t,this.set=e,this.base=i,this.modified=n,this.id=lse++}toString(){let{name:t}=this;for(let e of this.modified)e.name&&(t=`${e.name}(${t})`);return t}static define(t,e){let i=typeof t=="string"?t:"?";if(t instanceof Mn&&(e=t),e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new Mn(i,[],null,[]);if(n.set.push(n),e)for(let r of e.set)n.set.push(r);return n}static defineModifier(t){let e=new Qg(t);return i=>i.modified.indexOf(e)>-1?i:Qg.get(i.base||i,i.modified.concat(e).sort((n,r)=>n.id-r.id))}}let ase=0;class Qg{constructor(t){this.name=t,this.instances=[],this.id=ase++}static get(t,e){if(!e.length)return t;let i=e[0].instances.find(l=>l.base==t&&cse(e,l.modified));if(i)return i;let n=[],r=new Mn(t.name,n,t,e);for(let l of e)l.instances.push(r);let o=use(e);for(let l of t.set)if(!l.modified.length)for(let a of o)n.push(Qg.get(l,a));return r}}function cse(s,t){return s.length==t.length&&s.every((e,i)=>e==t[i])}function use(s){let t=[[]];for(let e=0;e<s.length;e++)for(let i=0,n=t.length;i<n;i++)t.push(t[i].concat(s[e]));return t.sort((e,i)=>i.length-e.length)}function Cc(s){let t=Object.create(null);for(let e in s){let i=s[e];Array.isArray(i)||(i=[i]);for(let n of e.split(" "))if(n){let r=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!m)throw new RangeError("Invalid path: "+n);if(r.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),f+=m[0].length,f==n.length)break;let w=n[f++];if(f==n.length&&w=="!"){o=0;break}if(w!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=r.length-1,c=r[a];if(!c)throw new RangeError("Invalid path: "+n);let h=new Dg(i,o,a>0?r.slice(0,a):null);t[c]=h.sort(t[c])}}return $3.add(t)}const $3=new Ne;class Dg{constructor(t,e,i,n){this.tags=t,this.mode=e,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}Dg.empty=new Dg([],2,null);function Q3(s,t){let e=Object.create(null);for(let r of s)if(!Array.isArray(r.tag))e[r.tag.id]=r.class;else for(let o of r.tag)e[o.id]=r.class;let{scope:i,all:n=null}=t||{};return{style:r=>{let o=n;for(let l of r)for(let a of l.set){let c=e[a.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function hse(s,t){let e=null;for(let i of s){let n=i.style(t);n&&(e=e?e+" "+n:n)}return e}function dse(s,t,e,i=0,n=s.length){let r=new fse(i,Array.isArray(t)?t:[t],e);r.highlightRange(s.cursor(),i,n,"",r.highlighters),r.flush(n)}class fse{constructor(t,e,i){this.at=t,this.highlighters=e,this.span=i,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,i,n,r){let{type:o,from:l,to:a}=t;if(l>=i||a<=e)return;o.isTop&&(r=this.highlighters.filter(w=>!w.scope||w.scope(o)));let c=n,h=mse(t)||Dg.empty,f=hse(r,h.tags);if(f&&(c&&(c+=" "),c+=f,h.mode==1&&(n+=(n?" ":"")+f)),this.startSpan(Math.max(e,l),c),h.opaque)return;let m=t.tree&&t.tree.prop(Ne.mounted);if(m&&m.overlay){let w=t.node.enter(m.overlay[0].from+l,1),O=this.highlighters.filter(k=>!k.scope||k.scope(m.tree.type)),v=t.firstChild();for(let k=0,C=l;;k++){let P=k<m.overlay.length?m.overlay[k]:null,V=P?P.from+l:a,Q=Math.max(e,C),D=Math.min(i,V);if(Q<D&&v)for(;t.from<D&&(this.highlightRange(t,Q,D,n,r),this.startSpan(Math.min(D,t.to),c),!(t.to>=V||!t.nextSibling())););if(!P||V>i)break;C=P.to+l,C>e&&(this.highlightRange(w.cursor(),Math.max(e,P.from+l),Math.min(i,C),"",O),this.startSpan(Math.min(i,C),c))}v&&t.parent()}else if(t.firstChild()){m&&(n="");do if(!(t.to<=e)){if(t.from>=i)break;this.highlightRange(t,e,i,n,r),this.startSpan(Math.min(i,t.to),c)}while(t.nextSibling());t.parent()}}}function mse(s){let t=s.type.prop($3);for(;t&&t.context&&!s.matchContext(t.context);)t=t.next;return t||null}const Oe=Mn.define,hm=Oe(),mo=Oe(),sE=Oe(mo),rE=Oe(mo),go=Oe(),dm=Oe(go),Bb=Oe(go),js=Oe(),ol=Oe(js),qs=Oe(),Xs=Oe(),zO=Oe(),Eu=Oe(zO),fm=Oe(),T={comment:hm,lineComment:Oe(hm),blockComment:Oe(hm),docComment:Oe(hm),name:mo,variableName:Oe(mo),typeName:sE,tagName:Oe(sE),propertyName:rE,attributeName:Oe(rE),className:Oe(mo),labelName:Oe(mo),namespace:Oe(mo),macroName:Oe(mo),literal:go,string:dm,docString:Oe(dm),character:Oe(dm),attributeValue:Oe(dm),number:Bb,integer:Oe(Bb),float:Oe(Bb),bool:Oe(go),regexp:Oe(go),escape:Oe(go),color:Oe(go),url:Oe(go),keyword:qs,self:Oe(qs),null:Oe(qs),atom:Oe(qs),unit:Oe(qs),modifier:Oe(qs),operatorKeyword:Oe(qs),controlKeyword:Oe(qs),definitionKeyword:Oe(qs),moduleKeyword:Oe(qs),operator:Xs,derefOperator:Oe(Xs),arithmeticOperator:Oe(Xs),logicOperator:Oe(Xs),bitwiseOperator:Oe(Xs),compareOperator:Oe(Xs),updateOperator:Oe(Xs),definitionOperator:Oe(Xs),typeOperator:Oe(Xs),controlOperator:Oe(Xs),punctuation:zO,separator:Oe(zO),bracket:Eu,angleBracket:Oe(Eu),squareBracket:Oe(Eu),paren:Oe(Eu),brace:Oe(Eu),content:js,heading:ol,heading1:Oe(ol),heading2:Oe(ol),heading3:Oe(ol),heading4:Oe(ol),heading5:Oe(ol),heading6:Oe(ol),contentSeparator:Oe(js),list:Oe(js),quote:Oe(js),emphasis:Oe(js),strong:Oe(js),link:Oe(js),monospace:Oe(js),strikethrough:Oe(js),inserted:Oe(),deleted:Oe(),changed:Oe(),invalid:Oe(),meta:fm,documentMeta:Oe(fm),annotation:Oe(fm),processingInstruction:Oe(fm),definition:Mn.defineModifier("definition"),constant:Mn.defineModifier("constant"),function:Mn.defineModifier("function"),standard:Mn.defineModifier("standard"),local:Mn.defineModifier("local"),special:Mn.defineModifier("special")};for(let s in T){let t=T[s];t instanceof Mn&&(t.name=s)}Q3([{tag:T.link,class:"tok-link"},{tag:T.heading,class:"tok-heading"},{tag:T.emphasis,class:"tok-emphasis"},{tag:T.strong,class:"tok-strong"},{tag:T.keyword,class:"tok-keyword"},{tag:T.atom,class:"tok-atom"},{tag:T.bool,class:"tok-bool"},{tag:T.url,class:"tok-url"},{tag:T.labelName,class:"tok-labelName"},{tag:T.inserted,class:"tok-inserted"},{tag:T.deleted,class:"tok-deleted"},{tag:T.literal,class:"tok-literal"},{tag:T.string,class:"tok-string"},{tag:T.number,class:"tok-number"},{tag:[T.regexp,T.escape,T.special(T.string)],class:"tok-string2"},{tag:T.variableName,class:"tok-variableName"},{tag:T.local(T.variableName),class:"tok-variableName tok-local"},{tag:T.definition(T.variableName),class:"tok-variableName tok-definition"},{tag:T.special(T.variableName),class:"tok-variableName2"},{tag:T.definition(T.propertyName),class:"tok-propertyName tok-definition"},{tag:T.typeName,class:"tok-typeName"},{tag:T.namespace,class:"tok-namespace"},{tag:T.className,class:"tok-className"},{tag:T.macroName,class:"tok-macroName"},{tag:T.propertyName,class:"tok-propertyName"},{tag:T.operator,class:"tok-operator"},{tag:T.comment,class:"tok-comment"},{tag:T.meta,class:"tok-meta"},{tag:T.invalid,class:"tok-invalid"},{tag:T.punctuation,class:"tok-punctuation"}]);var $b;const gl=new Ne;function Qy(s){return Pe.define({combine:s?t=>t.concat(s):void 0})}const Dy=new Ne;class is{constructor(t,e,i=[],n=""){this.data=t,this.name=n,at.prototype.hasOwnProperty("tree")||Object.defineProperty(at.prototype,"tree",{get(){return kt(this)}}),this.parser=e,this.extension=[Lo.of(this),at.languageData.of((r,o,l)=>{let a=oE(r,o,l),c=a.type.prop(gl);if(!c)return[];let h=r.facet(c),f=a.type.prop(Dy);if(f){let m=a.resolve(o-a.from,l);for(let w of f)if(w.test(m,r)){let O=r.facet(w.facet);return w.type=="replace"?O:O.concat(h)}}return h})].concat(i)}isActiveAt(t,e,i=-1){return oE(t,e,i).type.prop(gl)==this.data}findRegions(t){let e=t.facet(Lo);if((e==null?void 0:e.data)==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let i=[],n=(r,o)=>{if(r.prop(gl)==this.data){i.push({from:o,to:o+r.length});return}let l=r.prop(Ne.mounted);if(l){if(l.tree.prop(gl)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+r.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<r.children.length;a++){let c=r.children[a];c instanceof mt&&n(c,r.positions[a]+o)}};return n(kt(t),0),i}get allowsNesting(){return!0}}is.setState=st.define();function oE(s,t,e){let i=s.facet(Lo),n=kt(s).topNode;if(!i||i.allowsNesting)for(let r=n;r;r=r.enter(t,e,_t.ExcludeBuffers))r.type.isTop&&(n=r);return n}class fc extends is{constructor(t,e,i){super(t,e,[],i),this.parser=e}static define(t){let e=Qy(t.languageData);return new fc(e,t.parser.configure({props:[gl.add(i=>i.isTop?e:void 0)]}),t.name)}configure(t,e){return new fc(this.data,this.parser.configure(t),e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function kt(s){let t=s.field(is.state,!1);return t?t.tree:mt.empty}class gse{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let i=this.cursorPos-this.string.length;return t<i||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-i,e-i)}}let Au=null;class Dh{constructor(t,e,i=[],n,r,o,l,a){this.parser=t,this.state=e,this.fragments=i,this.tree=n,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(t,e,i){return new Dh(t,e,[],mt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new gse(this.state.doc),this.fragments)}work(t,e){return e!=null&&e>=this.state.doc.length&&(e=void 0),this.tree!=mt.empty&&this.isDone(e??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof t=="number"){let n=Date.now()+t;t=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),e!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(Rr.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(e??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(e=this.parse.advance()););}),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(Rr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=Au;Au=this;try{return t()}finally{Au=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=lE(t,e.from,e.to);return t}changes(t,e){let{fragments:i,tree:n,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!t.empty){let a=[];if(t.iterChangedRanges((c,h,f,m)=>a.push({fromA:c,toA:h,fromB:f,toB:m})),i=Rr.applyChanges(i,a),n=mt.empty,r=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let h=t.mapPos(c.from,1),f=t.mapPos(c.to,-1);h<f&&l.push({from:h,to:f})}}}return new Dh(this.parser,e,i,n,r,o,l,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:r}=this.skipped[i];n<t.to&&r>t.from&&(this.fragments=lE(this.fragments,n,r),this.skipped.splice(i--,1))}return this.skipped.length>=e?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends $y{createParse(e,i,n){let r=n[0].from,o=n[n.length-1].to;return{parsedPos:r,advance(){let a=Au;if(a){for(let c of n)a.tempSkipped.push(c);t&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,t]):t)}return this.parsedPos=o,new mt(ui.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&e[0].from==0&&e[0].to>=t}static get(){return Au}}function lE(s,t,e){return Rr.applyChanges(s,[{fromA:t,toA:e,fromB:t,toB:e}])}class mc{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),i=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,i)||e.takeTree(),new mc(e)}static init(t){let e=Math.min(3e3,t.doc.length),i=Dh.create(t.facet(Lo).parser,t,{from:0,to:e});return i.work(20,e)||i.takeTree(),new mc(i)}}is.state=_n.define({create:mc.init,update(s,t){for(let e of t.effects)if(e.is(is.setState))return e.value;return t.startState.facet(Lo)!=t.state.facet(Lo)?mc.init(t.state):s.apply(t)}});let D3=s=>{let t=setTimeout(()=>s(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(D3=s=>{let t=-1,e=setTimeout(()=>{t=requestIdleCallback(s,{timeout:400})},100);return()=>t<0?clearTimeout(e):cancelIdleCallback(t)});const Qb=typeof navigator<"u"&&(!(($b=navigator.scheduling)===null||$b===void 0)&&$b.isInputPending)?()=>navigator.scheduling.isInputPending():null,pse=Ui.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(is.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(is.state);(e.tree!=e.context.tree||!e.context.isDone(t.doc.length))&&(this.working=D3(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,r=i.field(is.state);if(r.tree==r.context.tree&&r.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,t&&!Qb?Math.max(25,t.timeRemaining()-5):1e9),l=r.context.treeLen<n&&i.doc.length>n+1e3,a=r.context.work(()=>Qb&&Qb()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-e,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:is.setState.of(new mc(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(e=>$n(this.view.state,e)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Lo=Pe.define({combine(s){return s.length?s[0]:null},enables:s=>[is.state,pse,Ee.contentAttributes.compute([s],t=>{let e=t.facet(s);return e&&e.name?{"data-language":e.name}:{}})]});class Nh{constructor(t,e=[]){this.language=t,this.support=e,this.extension=[t,e]}}class Ng{constructor(t,e,i,n,r,o=void 0){this.name=t,this.alias=e,this.extensions=i,this.filename=n,this.loadFunc=r,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(t=>this.support=t,t=>{throw this.loading=null,t}))}static of(t){let{load:e,support:i}=t;if(!e){if(!i)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");e=()=>Promise.resolve(i)}return new Ng(t.name,(t.alias||[]).concat(t.name).map(n=>n.toLowerCase()),t.extensions||[],t.filename,e,i)}static matchFilename(t,e){for(let n of t)if(n.filename&&n.filename.test(e))return n;let i=/\.([^.]+)$/.exec(e);if(i){for(let n of t)if(n.extensions.indexOf(i[1])>-1)return n}return null}static matchLanguageName(t,e,i=!0){e=e.toLowerCase();for(let n of t)if(n.alias.some(r=>r==e))return n;if(i)for(let n of t)for(let r of n.alias){let o=e.indexOf(r);if(o>-1&&(r.length>2||!/\w/.test(e[o-1])&&!/\w/.test(e[o+r.length])))return n}return null}}const wse=Pe.define(),pd=Pe.define({combine:s=>{if(!s.length)return"  ";let t=s[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return t}});function Fg(s){let t=s.facet(pd);return t.charCodeAt(0)==9?s.tabSize*t.length:t.length}function Fh(s,t){let e="",i=s.tabSize,n=s.facet(pd)[0];if(n=="	"){for(;t>=i;)e+="	",t-=i;n=" "}for(let r=0;r<t;r++)e+=n;return e}function Ny(s,t){s instanceof at&&(s=new Cp(s));for(let i of s.state.facet(wse)){let n=i(s,t);if(n!==void 0)return n}let e=kt(s.state);return e.length>=t?bse(s,e,t):null}class Cp{constructor(t,e={}){this.state=t,this.options=e,this.unit=Fg(t)}lineAt(t,e=1){let i=this.state.doc.lineAt(t),{simulateBreak:n,simulateDoubleBreak:r}=this.options;return n!=null&&n>=i.from&&n<=i.to?r&&n==t?{text:"",from:t}:(e<0?n<t:n<=t)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(t,e);return i.slice(t-n,Math.min(i.length,t+100-n))}column(t,e=1){let{text:i,from:n}=this.lineAt(t,e),r=this.countColumn(i,t-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(r+=o-this.countColumn(i,i.search(/\S|$/))),r}countColumn(t,e=t.length){return Ms(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:i,from:n}=this.lineAt(t,e),r=this.options.overrideIndentation;if(r){let o=r(n);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const wd=new Ne;function bse(s,t,e){let i=t.resolveStack(e),n=t.resolveInner(e,-1).resolve(e,0).enterUnfinishedNodesBefore(e);if(n!=i.node){let r=[];for(let o=n;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)i={node:r[o],next:i}}return N3(i,s,e)}function N3(s,t,e){for(let i=s;i;i=i.next){let n=xse(i.node);if(n)return n(Fy.create(t,e,i))}return 0}function Ose(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function xse(s){let t=s.type.prop(wd);if(t)return t;let e=s.firstChild,i;if(e&&(i=e.type.prop(Ne.closedBy))){let n=s.lastChild,r=n&&i.indexOf(n.name)>-1;return o=>F3(o,!0,1,void 0,r&&!Ose(o)?n.from:void 0)}return s.parent==null?yse:null}function yse(){return 0}class Fy extends Cp{constructor(t,e,i){super(t.state,t.options),this.base=t,this.pos=e,this.context=i}get node(){return this.context.node}static create(t,e,i){return new Fy(t,e,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let e=this.state.doc.lineAt(t.from);for(;;){let i=t.resolve(e.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(vse(i,t))break;e=this.state.doc.lineAt(i.from)}return this.lineIndent(e.from)}continue(){return N3(this.context.next,this.base,this.pos)}}function vse(s,t){for(let e=t;e;e=e.parent)if(s==e)return!0;return!1}function _se(s){let t=s.node,e=t.childAfter(t.from),i=t.lastChild;if(!e)return null;let n=s.options.simulateBreak,r=s.state.doc.lineAt(e.from),o=n==null||n<=r.from?r.to:Math.min(r.to,n);for(let l=e.to;;){let a=t.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let c=/^ */.exec(r.text.slice(e.to-r.from))[0].length;return{from:e.from,to:e.to+c}}l=a.to}}function kse({closing:s,align:t=!0,units:e=1}){return i=>F3(i,t,e,s)}function F3(s,t,e,i,n){let r=s.textAfter,o=r.match(/^\s*/)[0].length,l=i&&r.slice(o,o+i.length)==i||n==s.pos+o,a=t?_se(s):null;return a?l?s.column(a.from):s.column(a.to):s.baseIndent+(l?0:s.unit*e)}const Sse=s=>s.baseIndent;function Zm({except:s,units:t=1}={}){return e=>{let i=s&&s.test(e.textAfter);return e.baseIndent+(i?0:t*e.unit)}}const Cse=200;function Pse(){return at.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let t=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!t.length)return s;let e=s.newDoc,{head:i}=s.newSelection.main,n=e.lineAt(i);if(i>n.from+Cse)return s;let r=e.sliceString(n.from,i);if(!t.some(c=>c.test(r)))return s;let{state:o}=s,l=-1,a=[];for(let{head:c}of o.selection.ranges){let h=o.doc.lineAt(c);if(h.from==l)continue;l=h.from;let f=Ny(o,h.from);if(f==null)continue;let m=/^\s*/.exec(h.text)[0],w=Fh(o,f);m!=w&&a.push({from:h.from,to:h.from+m.length,insert:w})}return a.length?[s,{changes:a,sequential:!0}]:s})}const z3=Pe.define(),Pc=new Ne;function W3(s){let t=s.firstChild,e=s.lastChild;return t&&t.to<e.from?{from:t.to,to:e.type.isError?s.to:e.from}:null}function Tse(s,t,e){let i=kt(s);if(i.length<e)return null;let n=i.resolveStack(e,1),r=null;for(let o=n;o;o=o.next){let l=o.node;if(l.to<=e||l.from>e)continue;if(r&&l.from<t)break;let a=l.type.prop(Pc);if(a&&(l.to<i.length-50||i.length==s.doc.length||!Ese(l))){let c=a(l,s);c&&c.from<=e&&c.from>=t&&c.to>e&&(r=c)}}return r}function Ese(s){let t=s.lastChild;return t&&t.to==s.to&&t.type.isError}function zg(s,t,e){for(let i of s.facet(z3)){let n=i(s,t,e);if(n)return n}return Tse(s,t,e)}function U3(s,t){let e=t.mapPos(s.from,1),i=t.mapPos(s.to,-1);return e>=i?void 0:{from:e,to:i}}const Pp=st.define({map:U3}),bd=st.define({map:U3});function Z3(s){let t=[];for(let{head:e}of s.state.selection.ranges)t.some(i=>i.from<=e&&i.to>=e)||t.push(s.lineBlockAt(e));return t}const Al=_n.define({create(){return Ke.none},update(s,t){t.isUserEvent("delete")&&t.changes.iterChangedRanges((e,i)=>s=aE(s,e,i)),s=s.map(t.changes);for(let e of t.effects)if(e.is(Pp)&&!Ase(s,e.value.from,e.value.to)){let{preparePlaceholder:i}=t.state.facet(X3),n=i?Ke.replace({widget:new $se(i(t.state,e.value))}):cE;s=s.update({add:[n.range(e.value.from,e.value.to)]})}else e.is(bd)&&(s=s.update({filter:(i,n)=>e.value.from!=i||e.value.to!=n,filterFrom:e.value.from,filterTo:e.value.to}));return t.selection&&(s=aE(s,t.selection.main.head)),s},provide:s=>Ee.decorations.from(s),toJSON(s,t){let e=[];return s.between(0,t.doc.length,(i,n)=>{e.push(i,n)}),e},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let e=0;e<s.length;){let i=s[e++],n=s[e++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");t.push(cE.range(i,n))}return Ke.set(t,!0)}});function aE(s,t,e=t){let i=!1;return s.between(t,e,(n,r)=>{n<e&&r>t&&(i=!0)}),i?s.update({filterFrom:t,filterTo:e,filter:(n,r)=>n>=e||r<=t}):s}function Wg(s,t,e){var i;let n=null;return(i=s.field(Al,!1))===null||i===void 0||i.between(t,e,(r,o)=>{(!n||n.from>r)&&(n={from:r,to:o})}),n}function Ase(s,t,e){let i=!1;return s.between(t,t,(n,r)=>{n==t&&r==e&&(i=!0)}),i}function H3(s,t){return s.field(Al,!1)?t:t.concat(st.appendConfig.of(j3()))}const Ise=s=>{for(let t of Z3(s)){let e=zg(s.state,t.from,t.to);if(e)return s.dispatch({effects:H3(s.state,[Pp.of(e),q3(s,e)])}),!0}return!1},Rse=s=>{if(!s.state.field(Al,!1))return!1;let t=[];for(let e of Z3(s)){let i=Wg(s.state,e.from,e.to);i&&t.push(bd.of(i),q3(s,i,!1))}return t.length&&s.dispatch({effects:t}),t.length>0};function q3(s,t,e=!0){let i=s.state.doc.lineAt(t.from).number,n=s.state.doc.lineAt(t.to).number;return Ee.announce.of(`${s.state.phrase(e?"Folded lines":"Unfolded lines")} ${i} ${s.state.phrase("to")} ${n}.`)}const Vse=s=>{let{state:t}=s,e=[];for(let i=0;i<t.doc.length;){let n=s.lineBlockAt(i),r=zg(t,n.from,n.to);r&&e.push(Pp.of(r)),i=(r?s.lineBlockAt(r.to):n).to+1}return e.length&&s.dispatch({effects:H3(s.state,e)}),!!e.length},Mse=s=>{let t=s.state.field(Al,!1);if(!t||!t.size)return!1;let e=[];return t.between(0,s.state.doc.length,(i,n)=>{e.push(bd.of({from:i,to:n}))}),s.dispatch({effects:e}),!0},Lse=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Ise},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Rse},{key:"Ctrl-Alt-[",run:Vse},{key:"Ctrl-Alt-]",run:Mse}],Bse={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},X3=Pe.define({combine(s){return Zl(s,Bse)}});function j3(s){return[Al,Nse]}function G3(s,t){let{state:e}=s,i=e.facet(X3),n=o=>{let l=s.lineBlockAt(s.posAtDOM(o.target)),a=Wg(s.state,l.from,l.to);a&&s.dispatch({effects:bd.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(s,n,t);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=n,r}const cE=Ke.replace({widget:new class extends Qo{toDOM(s){return G3(s,null)}}});class $se extends Qo{constructor(t){super(),this.value=t}eq(t){return this.value==t.value}toDOM(t){return G3(t,this.value)}}const Qse={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Db extends $r{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}function Dse(s={}){let t={...Qse,...s},e=new Db(t,!0),i=new Db(t,!1),n=Ui.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Lo)!=o.state.facet(Lo)||o.startState.field(Al,!1)!=o.state.field(Al,!1)||kt(o.startState)!=kt(o.state)||t.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Cl;for(let a of o.viewportLineBlocks){let c=Wg(o.state,a.from,a.to)?i:zg(o.state,a.from,a.to)?e:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:r}=t;return[n,$ne({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(n))===null||l===void 0?void 0:l.markers)||nt.empty},initialSpacer(){return new Db(t,!1)},domEventHandlers:{...r,click:(o,l,a)=>{if(r.click&&r.click(o,l,a))return!0;let c=Wg(o.state,l.from,l.to);if(c)return o.dispatch({effects:bd.of(c)}),!0;let h=zg(o.state,l.from,l.to);return h?(o.dispatch({effects:Pp.of(h)}),!0):!1}}}),j3()]}const Nse=Ee.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Od{constructor(t,e){this.specs=t;let i;function n(l){let a=Io.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const r=typeof e.all=="string"?e.all:e.all?n(e.all):void 0,o=e.scope;this.scope=o instanceof is?l=>l.prop(gl)==o.data:o?l=>l==o:void 0,this.style=Q3(t.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new Io(i):null,this.themeType=e.themeType}static define(t,e){return new Od(t,e||{})}}const WO=Pe.define(),Y3=Pe.define({combine(s){return s.length?[s[0]]:null}});function Nb(s){let t=s.facet(WO);return t.length?t:s.facet(Y3)}function K3(s,t){let e=[zse],i;return s instanceof Od&&(s.module&&e.push(Ee.styleModule.of(s.module)),i=s.themeType),t!=null&&t.fallback?e.push(Y3.of(s)):i?e.push(WO.computeN([Ee.darkTheme],n=>n.facet(Ee.darkTheme)==(i=="dark")?[s]:[])):e.push(WO.of(s)),e}class Fse{constructor(t){this.markCache=Object.create(null),this.tree=kt(t.state),this.decorations=this.buildDeco(t,Nb(t.state)),this.decoratedTo=t.viewport.to}update(t){let e=kt(t.state),i=Nb(t.state),n=i!=Nb(t.startState),{viewport:r}=t.view,o=t.changes.mapPos(this.decoratedTo,1);e.length<r.to&&!n&&e.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(t.changes),this.decoratedTo=o):(e!=this.tree||t.viewportChanged||n)&&(this.tree=e,this.decorations=this.buildDeco(t.view,i),this.decoratedTo=r.to)}buildDeco(t,e){if(!e||!this.tree.length)return Ke.none;let i=new Cl;for(let{from:n,to:r}of t.visibleRanges)dse(this.tree,e,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=Ke.mark({class:a})))},n,r);return i.finish()}}const zse=$o.high(Ui.fromClass(Fse,{decorations:s=>s.decorations})),Wse=Od.define([{tag:T.meta,color:"#404740"},{tag:T.link,textDecoration:"underline"},{tag:T.heading,textDecoration:"underline",fontWeight:"bold"},{tag:T.emphasis,fontStyle:"italic"},{tag:T.strong,fontWeight:"bold"},{tag:T.strikethrough,textDecoration:"line-through"},{tag:T.keyword,color:"#708"},{tag:[T.atom,T.bool,T.url,T.contentSeparator,T.labelName],color:"#219"},{tag:[T.literal,T.inserted],color:"#164"},{tag:[T.string,T.deleted],color:"#a11"},{tag:[T.regexp,T.escape,T.special(T.string)],color:"#e40"},{tag:T.definition(T.variableName),color:"#00f"},{tag:T.local(T.variableName),color:"#30a"},{tag:[T.typeName,T.namespace],color:"#085"},{tag:T.className,color:"#167"},{tag:[T.special(T.variableName),T.macroName],color:"#256"},{tag:T.definition(T.propertyName),color:"#00c"},{tag:T.comment,color:"#940"},{tag:T.invalid,color:"#f00"}]),Use=Ee.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),J3=1e4,e7="()[]{}",t7=Pe.define({combine(s){return Zl(s,{afterCursor:!0,brackets:e7,maxScanDistance:J3,renderMatch:qse})}}),Zse=Ke.mark({class:"cm-matchingBracket"}),Hse=Ke.mark({class:"cm-nonmatchingBracket"});function qse(s){let t=[],e=s.matched?Zse:Hse;return t.push(e.range(s.start.from,s.start.to)),s.end&&t.push(e.range(s.end.from,s.end.to)),t}const Xse=_n.define({create(){return Ke.none},update(s,t){if(!t.docChanged&&!t.selection)return s;let e=[],i=t.state.facet(t7);for(let n of t.state.selection.ranges){if(!n.empty)continue;let r=er(t.state,n.head,-1,i)||n.head>0&&er(t.state,n.head-1,1,i)||i.afterCursor&&(er(t.state,n.head,1,i)||n.head<t.state.doc.length&&er(t.state,n.head+1,-1,i));r&&(e=e.concat(i.renderMatch(r,t.state)))}return Ke.set(e,!0)},provide:s=>Ee.decorations.from(s)}),jse=[Xse,Use];function Gse(s={}){return[t7.of(s),jse]}const i7=new Ne;function UO(s,t,e){let i=s.prop(t<0?Ne.openedBy:Ne.closedBy);if(i)return i;if(s.name.length==1){let n=e.indexOf(s.name);if(n>-1&&n%2==(t<0?1:0))return[e[n+t]]}return null}function ZO(s){let t=s.type.prop(i7);return t?t(s.node):s}function er(s,t,e,i={}){let n=i.maxScanDistance||J3,r=i.brackets||e7,o=kt(s),l=o.resolveInner(t,e);for(let a=l;a;a=a.parent){let c=UO(a.type,e,r);if(c&&a.from<a.to){let h=ZO(a);if(h&&(e>0?t>=h.from&&t<h.to:t>h.from&&t<=h.to))return Yse(s,t,e,a,h,c,r)}}return Kse(s,t,e,o,l.type,n,r)}function Yse(s,t,e,i,n,r,o){let l=i.parent,a={from:n.from,to:n.to},c=0,h=l==null?void 0:l.cursor();if(h&&(e<0?h.childBefore(i.from):h.childAfter(i.to)))do if(e<0?h.to<=i.from:h.from>=i.to){if(c==0&&r.indexOf(h.type.name)>-1&&h.from<h.to){let f=ZO(h);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(UO(h.type,e,o))c++;else if(UO(h.type,-e,o)){if(c==0){let f=ZO(h);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}c--}}while(e<0?h.prevSibling():h.nextSibling());return{start:a,matched:!1}}function Kse(s,t,e,i,n,r,o){let l=e<0?s.sliceDoc(t-1,t):s.sliceDoc(t,t+1),a=o.indexOf(l);if(a<0||a%2==0!=e>0)return null;let c={from:e<0?t-1:t,to:e>0?t+1:t},h=s.doc.iterRange(t,e>0?s.doc.length:0),f=0;for(let m=0;!h.next().done&&m<=r;){let w=h.value;e<0&&(m+=w.length);let O=t+m*e;for(let v=e>0?0:w.length-1,k=e>0?w.length:-1;v!=k;v+=e){let C=o.indexOf(w[v]);if(!(C<0||i.resolveInner(O+v,1).type!=n))if(C%2==0==e>0)f++;else{if(f==1)return{start:c,end:{from:O+v,to:O+v+1},matched:C>>1==a>>1};f--}}e>0&&(m+=w.length)}return h.done?{start:c,matched:!1}:null}const Jse=Object.create(null),uE=[ui.none],hE=[],dE=Object.create(null),ere=Object.create(null);for(let[s,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])ere[s]=tre(Jse,t);function Fb(s,t){hE.indexOf(s)>-1||(hE.push(s),console.warn(t))}function tre(s,t){let e=[];for(let l of t.split(" ")){let a=[];for(let c of l.split(".")){let h=s[c]||T[c];h?typeof h=="function"?a.length?a=a.map(h):Fb(c,`Modifier ${c} used at start of tag`):a.length?Fb(c,`Tag ${c} used as modifier`):a=Array.isArray(h)?h:[h]:Fb(c,`Unknown highlighting tag ${c}`)}for(let c of a)e.push(c)}if(!e.length)return 0;let i=t.replace(/ /g,"_"),n=i+" "+e.map(l=>l.id),r=dE[n];if(r)return r.id;let o=dE[n]=ui.define({id:uE.length,name:i,props:[Cc({[i]:e})]});return uE.push(o),o.id}Lt.RTL,Lt.LTR;const ire=s=>{let{state:t}=s,e=t.doc.lineAt(t.selection.main.from),i=Wy(s.state,e.from);return i.line?nre(s):i.block?rre(s):!1};function zy(s,t){return({state:e,dispatch:i})=>{if(e.readOnly)return!1;let n=s(t,e);return n?(i(e.update(n)),!0):!1}}const nre=zy(are,0),sre=zy(n7,0),rre=zy((s,t)=>n7(s,t,lre(t)),0);function Wy(s,t){let e=s.languageDataAt("commentTokens",t);return e.length?e[0]:{}}const Iu=50;function ore(s,{open:t,close:e},i,n){let r=s.sliceDoc(i-Iu,i),o=s.sliceDoc(n,n+Iu),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,c=r.length-l;if(r.slice(c-t.length,c)==t&&o.slice(a,a+e.length)==e)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let h,f;n-i<=2*Iu?h=f=s.sliceDoc(i,n):(h=s.sliceDoc(i,i+Iu),f=s.sliceDoc(n-Iu,n));let m=/^\s*/.exec(h)[0].length,w=/\s*$/.exec(f)[0].length,O=f.length-w-e.length;return h.slice(m,m+t.length)==t&&f.slice(O,O+e.length)==e?{open:{pos:i+m+t.length,margin:/\s/.test(h.charAt(m+t.length))?1:0},close:{pos:n-w-e.length,margin:/\s/.test(f.charAt(O-1))?1:0}}:null}function lre(s){let t=[];for(let e of s.selection.ranges){let i=s.doc.lineAt(e.from),n=e.to<=i.to?i:s.doc.lineAt(e.to);n.from>i.from&&n.from==e.to&&(n=e.to==i.to+1?i:s.doc.lineAt(e.to-1));let r=t.length-1;r>=0&&t[r].to>i.from?t[r].to=n.to:t.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:n.to})}return t}function n7(s,t,e=t.selection.ranges){let i=e.map(r=>Wy(t,r.from).block);if(!i.every(r=>r))return null;let n=e.map((r,o)=>ore(t,i[o],r.from,r.to));if(s!=2&&!n.every(r=>r))return{changes:t.changes(e.map((r,o)=>n[o]?[]:[{from:r.from,insert:i[o].open+" "},{from:r.to,insert:" "+i[o].close}]))};if(s!=1&&n.some(r=>r)){let r=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let a=i[o],{open:c,close:h}=l;r.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:h.pos-h.margin,to:h.pos+a.close.length})}return{changes:r}}return null}function are(s,t,e=t.selection.ranges){let i=[],n=-1;for(let{from:r,to:o}of e){let l=i.length,a=1e9,c=Wy(t,r).line;if(c){for(let h=r;h<=o;){let f=t.doc.lineAt(h);if(f.from>n&&(r==o||o>f.from)){n=f.from;let m=/^\s*/.exec(f.text)[0].length,w=m==f.length,O=f.text.slice(m,m+c.length)==c?m:-1;m<f.text.length&&m<a&&(a=m),i.push({line:f,comment:O,token:c,indent:m,empty:w,single:!1})}h=f.to+1}if(a<1e9)for(let h=l;h<i.length;h++)i[h].indent<i[h].line.text.length&&(i[h].indent=a);i.length==l+1&&(i[l].single=!0)}}if(s!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:c,empty:h,single:f}of i)(f||!h)&&r.push({from:l.from+c,insert:a+" "});let o=t.changes(r);return{changes:o,selection:t.selection.map(o,1)}}else if(s!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let c=o.from+l,h=c+a.length;o.text[h-o.from]==" "&&h++,r.push({from:c,to:h})}return{changes:r}}return null}const HO=zr.define(),cre=zr.define(),ure=Pe.define(),s7=Pe.define({combine(s){return Zl(s,{minDepth:100,newGroupDelay:500,joinToEvent:(t,e)=>e},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,e)=>(i,n)=>t(i,n)||e(i,n)})}}),r7=_n.define({create(){return tr.empty},update(s,t){let e=t.state.facet(s7),i=t.annotation(HO);if(i){let a=bn.fromTransaction(t,i.selection),c=i.side,h=c==0?s.undone:s.done;return a?h=Ug(h,h.length,e.minDepth,a):h=l7(h,t.startState.selection),new tr(c==0?i.rest:h,c==0?h:i.rest)}let n=t.annotation(cre);if((n=="full"||n=="before")&&(s=s.isolate()),t.annotation(Yt.addToHistory)===!1)return t.changes.empty?s:s.addMapping(t.changes.desc);let r=bn.fromTransaction(t),o=t.annotation(Yt.time),l=t.annotation(Yt.userEvent);return r?s=s.addChanges(r,o,l,e,t):t.selection&&(s=s.addSelection(t.startState.selection,o,l,e.newGroupDelay)),(n=="full"||n=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(t=>t.toJSON()),undone:s.undone.map(t=>t.toJSON())}},fromJSON(s){return new tr(s.done.map(bn.fromJSON),s.undone.map(bn.fromJSON))}});function hre(s={}){return[r7,s7.of(s),Ee.domEventHandlers({beforeinput(t,e){let i=t.inputType=="historyUndo"?Uy:t.inputType=="historyRedo"?zh:null;return i?(t.preventDefault(),i(e)):!1}})]}function Tp(s,t){return function({state:e,dispatch:i}){if(!t&&e.readOnly)return!1;let n=e.field(r7,!1);if(!n)return!1;let r=n.pop(s,e,t);return r?(i(r),!0):!1}}const Uy=Tp(0,!1),zh=Tp(1,!1),dre=Tp(0,!0),fre=Tp(1,!0);class bn{constructor(t,e,i,n,r){this.changes=t,this.effects=e,this.mapped=i,this.startSelection=n,this.selectionsAfter=r}setSelAfter(t){return new bn(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,i;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(e=this.mapped)===null||e===void 0?void 0:e.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(t){return new bn(t.changes&&li.fromJSON(t.changes),[],t.mapped&&or.fromJSON(t.mapped),t.startSelection&&ie.fromJSON(t.startSelection),t.selectionsAfter.map(ie.fromJSON))}static fromTransaction(t,e){let i=ns;for(let n of t.startState.facet(ure)){let r=n(t);r.length&&(i=i.concat(r))}return!i.length&&t.changes.empty?null:new bn(t.changes.invert(t.startState.doc),i,void 0,e||t.startState.selection,ns)}static selection(t){return new bn(void 0,ns,void 0,void 0,t)}}function Ug(s,t,e,i){let n=t+1>e+20?t-e-1:0,r=s.slice(n,t);return r.push(i),r}function mre(s,t){let e=[],i=!1;return s.iterChangedRanges((n,r)=>e.push(n,r)),t.iterChangedRanges((n,r,o,l)=>{for(let a=0;a<e.length;){let c=e[a++],h=e[a++];l>=c&&o<=h&&(i=!0)}}),i}function gre(s,t){return s.ranges.length==t.ranges.length&&s.ranges.filter((e,i)=>e.empty!=t.ranges[i].empty).length===0}function o7(s,t){return s.length?t.length?s.concat(t):s:t}const ns=[],pre=200;function l7(s,t){if(s.length){let e=s[s.length-1],i=e.selectionsAfter.slice(Math.max(0,e.selectionsAfter.length-pre));return i.length&&i[i.length-1].eq(t)?s:(i.push(t),Ug(s,s.length-1,1e9,e.setSelAfter(i)))}else return[bn.selection([t])]}function wre(s){let t=s[s.length-1],e=s.slice();return e[s.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),e}function zb(s,t){if(!s.length)return s;let e=s.length,i=ns;for(;e;){let n=bre(s[e-1],t,i);if(n.changes&&!n.changes.empty||n.effects.length){let r=s.slice(0,e);return r[e-1]=n,r}else t=n.mapped,e--,i=n.selectionsAfter}return i.length?[bn.selection(i)]:ns}function bre(s,t,e){let i=o7(s.selectionsAfter.length?s.selectionsAfter.map(l=>l.map(t)):ns,e);if(!s.changes)return bn.selection(i);let n=s.changes.map(t),r=t.mapDesc(s.changes,!0),o=s.mapped?s.mapped.composeDesc(r):r;return new bn(n,st.mapEffects(s.effects,t),o,s.startSelection.map(r),i)}const Ore=/^(input\.type|delete)($|\.)/;class tr{constructor(t,e,i=0,n=void 0){this.done=t,this.undone=e,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new tr(this.done,this.undone):this}addChanges(t,e,i,n,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&t.changes&&(!i||Ore.test(i))&&(!l.selectionsAfter.length&&e-this.prevTime<n.newGroupDelay&&n.joinToEvent(r,mre(l.changes,t.changes))||i=="input.type.compose")?o=Ug(o,o.length-1,n.minDepth,new bn(t.changes.compose(l.changes),o7(st.mapEffects(t.effects,l.changes),l.effects),l.mapped,l.startSelection,ns)):o=Ug(o,o.length,n.minDepth,t),new tr(o,ns,e,i)}addSelection(t,e,i,n){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:ns;return r.length>0&&e-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&gre(r[r.length-1],t)?this:new tr(l7(this.done,t),this.undone,e,i)}addMapping(t){return new tr(zb(this.done,t),zb(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,i){let n=t==0?this.done:this.undone;if(n.length==0)return null;let r=n[n.length-1],o=r.selectionsAfter[0]||e.selection;if(i&&r.selectionsAfter.length)return e.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:HO.of({side:t,rest:wre(n),selection:o}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=n.length==1?ns:n.slice(0,n.length-1);return r.mapped&&(l=zb(l,r.mapped)),e.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:HO.of({side:t,rest:l,selection:o}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}tr.empty=new tr(ns,ns);const xre=[{key:"Mod-z",run:Uy,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:zh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:zh,preventDefault:!0},{key:"Mod-u",run:dre,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:fre,preventDefault:!0}];function Tc(s,t){return ie.create(s.ranges.map(t),s.mainIndex)}function ur(s,t){return s.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function $s({state:s,dispatch:t},e){let i=Tc(s.selection,e);return i.eq(s.selection,!0)?!1:(t(ur(s,i)),!0)}function Ep(s,t){return ie.cursor(t?s.to:s.from)}function a7(s,t){return $s(s,e=>e.empty?s.moveByChar(e,t):Ep(e,t))}function Hi(s){return s.textDirectionAt(s.state.selection.main.head)==Lt.LTR}const c7=s=>a7(s,!Hi(s)),u7=s=>a7(s,Hi(s));function h7(s,t){return $s(s,e=>e.empty?s.moveByGroup(e,t):Ep(e,t))}const yre=s=>h7(s,!Hi(s)),vre=s=>h7(s,Hi(s));function _re(s,t,e){if(t.type.prop(e))return!0;let i=t.to-t.from;return i&&(i>2||/[^\s,.;:]/.test(s.sliceDoc(t.from,t.to)))||t.firstChild}function Ap(s,t,e){let i=kt(s).resolveInner(t.head),n=e?Ne.closedBy:Ne.openedBy;for(let a=t.head;;){let c=e?i.childAfter(a):i.childBefore(a);if(!c)break;_re(s,c,n)?i=c:a=e?c.to:c.from}let r=i.type.prop(n),o,l;return r&&(o=e?er(s,i.from,1):er(s,i.to,-1))&&o.matched?l=e?o.end.to:o.end.from:l=e?i.to:i.from,ie.cursor(l,e?-1:1)}const kre=s=>$s(s,t=>Ap(s.state,t,!Hi(s))),Sre=s=>$s(s,t=>Ap(s.state,t,Hi(s)));function d7(s,t){return $s(s,e=>{if(!e.empty)return Ep(e,t);let i=s.moveVertically(e,t);return i.head!=e.head?i:s.moveToLineBoundary(e,t)})}const f7=s=>d7(s,!1),m7=s=>d7(s,!0);function g7(s){let t=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,e=0,i=0,n;if(t){for(let r of s.state.facet(Ee.scrollMargins)){let o=r(s);o!=null&&o.top&&(e=Math.max(o==null?void 0:o.top,e)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}n=s.scrollDOM.clientHeight-e-i}else n=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:e,marginBottom:i,selfScroll:t,height:Math.max(s.defaultLineHeight,n-5)}}function p7(s,t){let e=g7(s),{state:i}=s,n=Tc(i.selection,o=>o.empty?s.moveVertically(o,t,e.height):Ep(o,t));if(n.eq(i.selection))return!1;let r;if(e.selfScroll){let o=s.coordsAtPos(i.selection.main.head),l=s.scrollDOM.getBoundingClientRect(),a=l.top+e.marginTop,c=l.bottom-e.marginBottom;o&&o.top>a&&o.bottom<c&&(r=Ee.scrollIntoView(n.main.head,{y:"start",yMargin:o.top-a}))}return s.dispatch(ur(i,n),{effects:r}),!0}const fE=s=>p7(s,!1),qO=s=>p7(s,!0);function Do(s,t,e){let i=s.lineBlockAt(t.head),n=s.moveToLineBoundary(t,e);if(n.head==t.head&&n.head!=(e?i.to:i.from)&&(n=s.moveToLineBoundary(t,e,!1)),!e&&n.head==i.from&&i.length){let r=/^\s*/.exec(s.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&t.head!=i.from+r&&(n=ie.cursor(i.from+r))}return n}const Cre=s=>$s(s,t=>Do(s,t,!0)),Pre=s=>$s(s,t=>Do(s,t,!1)),Tre=s=>$s(s,t=>Do(s,t,!Hi(s))),Ere=s=>$s(s,t=>Do(s,t,Hi(s))),Are=s=>$s(s,t=>ie.cursor(s.lineBlockAt(t.head).from,1)),Ire=s=>$s(s,t=>ie.cursor(s.lineBlockAt(t.head).to,-1));function Rre(s,t,e){let i=!1,n=Tc(s.selection,r=>{let o=er(s,r.head,-1)||er(s,r.head,1)||r.head>0&&er(s,r.head-1,1)||r.head<s.doc.length&&er(s,r.head+1,-1);if(!o||!o.end)return r;i=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return ie.cursor(l)});return i?(t(ur(s,n)),!0):!1}const Vre=({state:s,dispatch:t})=>Rre(s,t);function gs(s,t){let e=Tc(s.state.selection,i=>{let n=t(i);return ie.range(i.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return e.eq(s.state.selection)?!1:(s.dispatch(ur(s.state,e)),!0)}function w7(s,t){return gs(s,e=>s.moveByChar(e,t))}const b7=s=>w7(s,!Hi(s)),O7=s=>w7(s,Hi(s));function x7(s,t){return gs(s,e=>s.moveByGroup(e,t))}const Mre=s=>x7(s,!Hi(s)),Lre=s=>x7(s,Hi(s)),Bre=s=>gs(s,t=>Ap(s.state,t,!Hi(s))),$re=s=>gs(s,t=>Ap(s.state,t,Hi(s)));function y7(s,t){return gs(s,e=>s.moveVertically(e,t))}const v7=s=>y7(s,!1),_7=s=>y7(s,!0);function k7(s,t){return gs(s,e=>s.moveVertically(e,t,g7(s).height))}const mE=s=>k7(s,!1),gE=s=>k7(s,!0),Qre=s=>gs(s,t=>Do(s,t,!0)),Dre=s=>gs(s,t=>Do(s,t,!1)),Nre=s=>gs(s,t=>Do(s,t,!Hi(s))),Fre=s=>gs(s,t=>Do(s,t,Hi(s))),zre=s=>gs(s,t=>ie.cursor(s.lineBlockAt(t.head).from)),Wre=s=>gs(s,t=>ie.cursor(s.lineBlockAt(t.head).to)),pE=({state:s,dispatch:t})=>(t(ur(s,{anchor:0})),!0),wE=({state:s,dispatch:t})=>(t(ur(s,{anchor:s.doc.length})),!0),bE=({state:s,dispatch:t})=>(t(ur(s,{anchor:s.selection.main.anchor,head:0})),!0),OE=({state:s,dispatch:t})=>(t(ur(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),Ure=({state:s,dispatch:t})=>(t(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),Zre=({state:s,dispatch:t})=>{let e=Ip(s).map(({from:i,to:n})=>ie.range(i,Math.min(n+1,s.doc.length)));return t(s.update({selection:ie.create(e),userEvent:"select"})),!0},Hre=({state:s,dispatch:t})=>{let e=Tc(s.selection,i=>{let n=kt(s),r=n.resolveStack(i.from,1);if(i.empty){let o=n.resolveStack(i.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return ie.range(l.to,l.from)}return i});return e.eq(s.selection)?!1:(t(ur(s,e)),!0)},qre=({state:s,dispatch:t})=>{let e=s.selection,i=null;return e.ranges.length>1?i=ie.create([e.main]):e.main.empty||(i=ie.create([ie.cursor(e.main.head)])),i?(t(ur(s,i)),!0):!1};function xd(s,t){if(s.state.readOnly)return!1;let e="delete.selection",{state:i}=s,n=i.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let a=t(r);a<o?(e="delete.backward",a=mm(s,a,!1)):a>o&&(e="delete.forward",a=mm(s,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=mm(s,o,!1),l=mm(s,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:ie.cursor(o,o<r.head?-1:1)}});return n.changes.empty?!1:(s.dispatch(i.update(n,{scrollIntoView:!0,userEvent:e,effects:e=="delete.selection"?Ee.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function mm(s,t,e){if(s instanceof Ee)for(let i of s.state.facet(Ee.atomicRanges).map(n=>n(s)))i.between(t,t,(n,r)=>{n<t&&r>t&&(t=e?r:n)});return t}const S7=(s,t,e)=>xd(s,i=>{let n=i.from,{state:r}=s,o=r.doc.lineAt(n),l,a;if(e&&!t&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,n-o.from))){if(l[l.length-1]=="	")return n-1;let c=Ms(l,r.tabSize),h=c%Fg(r)||Fg(r);for(let f=0;f<h&&l[l.length-1-f]==" ";f++)n--;a=n}else a=Ji(o.text,n-o.from,t,t)+o.from,a==n&&o.number!=(t?r.doc.lines:1)?a+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,n-o.from))&&(a=Ji(o.text,a-o.from,!1,!1)+o.from);return a}),XO=s=>S7(s,!1,!0),C7=s=>S7(s,!0,!1),P7=(s,t)=>xd(s,e=>{let i=e.head,{state:n}=s,r=n.doc.lineAt(i),o=n.charCategorizer(i);for(let l=null;;){if(i==(t?r.to:r.from)){i==e.head&&r.number!=(t?n.doc.lines:1)&&(i+=t?1:-1);break}let a=Ji(r.text,i-r.from,t)+r.from,c=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),h=o(c);if(l!=null&&h!=l)break;(c!=" "||i!=e.head)&&(l=h),i=a}return i}),T7=s=>P7(s,!1),Xre=s=>P7(s,!0),jre=s=>xd(s,t=>{let e=s.lineBlockAt(t.head).to;return t.head<e?e:Math.min(s.state.doc.length,t.head+1)}),Gre=s=>xd(s,t=>{let e=s.moveToLineBoundary(t,!1).head;return t.head>e?e:Math.max(0,t.head-1)}),Yre=s=>xd(s,t=>{let e=s.moveToLineBoundary(t,!0).head;return t.head<e?e:Math.min(s.state.doc.length,t.head+1)}),Kre=({state:s,dispatch:t})=>{if(s.readOnly)return!1;let e=s.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ye.of(["",""])},range:ie.cursor(i.from)}));return t(s.update(e,{scrollIntoView:!0,userEvent:"input"})),!0},Jre=({state:s,dispatch:t})=>{if(s.readOnly)return!1;let e=s.changeByRange(i=>{if(!i.empty||i.from==0||i.from==s.doc.length)return{range:i};let n=i.from,r=s.doc.lineAt(n),o=n==r.from?n-1:Ji(r.text,n-r.from,!1)+r.from,l=n==r.to?n+1:Ji(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:s.doc.slice(n,l).append(s.doc.slice(o,n))},range:ie.cursor(l)}});return e.changes.empty?!1:(t(s.update(e,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ip(s){let t=[],e=-1;for(let i of s.selection.ranges){let n=s.doc.lineAt(i.from),r=s.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=s.doc.lineAt(i.to-1)),e>=n.number){let o=t[t.length-1];o.to=r.to,o.ranges.push(i)}else t.push({from:n.from,to:r.to,ranges:[i]});e=r.number+1}return t}function E7(s,t,e){if(s.readOnly)return!1;let i=[],n=[];for(let r of Ip(s)){if(e?r.to==s.doc.length:r.from==0)continue;let o=s.doc.lineAt(e?r.to+1:r.from-1),l=o.length+1;if(e){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+s.lineBreak});for(let a of r.ranges)n.push(ie.range(Math.min(s.doc.length,a.anchor+l),Math.min(s.doc.length,a.head+l)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:s.lineBreak+o.text});for(let a of r.ranges)n.push(ie.range(a.anchor-l,a.head-l))}}return i.length?(t(s.update({changes:i,scrollIntoView:!0,selection:ie.create(n,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const eoe=({state:s,dispatch:t})=>E7(s,t,!1),toe=({state:s,dispatch:t})=>E7(s,t,!0);function A7(s,t,e){if(s.readOnly)return!1;let i=[];for(let n of Ip(s))e?i.push({from:n.from,insert:s.doc.slice(n.from,n.to)+s.lineBreak}):i.push({from:n.to,insert:s.lineBreak+s.doc.slice(n.from,n.to)});return t(s.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const ioe=({state:s,dispatch:t})=>A7(s,t,!1),noe=({state:s,dispatch:t})=>A7(s,t,!0),soe=s=>{if(s.state.readOnly)return!1;let{state:t}=s,e=t.changes(Ip(t).map(({from:n,to:r})=>(n>0?n--:r<t.doc.length&&r++,{from:n,to:r}))),i=Tc(t.selection,n=>{let r;if(s.lineWrapping){let o=s.lineBlockAt(n.head),l=s.coordsAtPos(n.head,n.assoc||1);l&&(r=o.bottom+s.documentTop-l.bottom+s.defaultLineHeight/2)}return s.moveVertically(n,!0,r)}).map(e);return s.dispatch({changes:e,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function roe(s,t){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(t-1,t+1)))return{from:t,to:t};let e=kt(s).resolveInner(t),i=e.childBefore(t),n=e.childAfter(t),r;return i&&n&&i.to<=t&&n.from>=t&&(r=i.type.prop(Ne.closedBy))&&r.indexOf(n.name)>-1&&s.doc.lineAt(i.to).from==s.doc.lineAt(n.from).from&&!/\S/.test(s.sliceDoc(i.to,n.from))?{from:i.to,to:n.from}:null}const xE=I7(!1),ooe=I7(!0);function I7(s){return({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=t.changeByRange(n=>{let{from:r,to:o}=n,l=t.doc.lineAt(r),a=!s&&r==o&&roe(t,r);s&&(r=o=(o<=l.to?l:t.doc.lineAt(o)).to);let c=new Cp(t,{simulateBreak:r,simulateDoubleBreak:!!a}),h=Ny(c,r);for(h==null&&(h=Ms(/^\s*/.exec(t.doc.lineAt(r).text)[0],t.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:r,to:o}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let f=["",Fh(t,h)];return a&&f.push(Fh(t,c.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:Ye.of(f)},range:ie.cursor(r+1+f[1].length)}});return e(t.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Zy(s,t){let e=-1;return s.changeByRange(i=>{let n=[];for(let o=i.from;o<=i.to;){let l=s.doc.lineAt(o);l.number>e&&(i.empty||i.to>l.from)&&(t(l,n,i),e=l.number),o=l.to+1}let r=s.changes(n);return{changes:n,range:ie.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const loe=({state:s,dispatch:t})=>{if(s.readOnly)return!1;let e=Object.create(null),i=new Cp(s,{overrideIndentation:r=>{let o=e[r];return o??-1}}),n=Zy(s,(r,o,l)=>{let a=Ny(i,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let c=/^\s*/.exec(r.text)[0],h=Fh(s,a);(c!=h||l.from<r.from+c.length)&&(e[r.from]=a,o.push({from:r.from,to:r.from+c.length,insert:h}))});return n.changes.empty||t(s.update(n,{userEvent:"indent"})),!0},R7=({state:s,dispatch:t})=>s.readOnly?!1:(t(s.update(Zy(s,(e,i)=>{i.push({from:e.from,insert:s.facet(pd)})}),{userEvent:"input.indent"})),!0),V7=({state:s,dispatch:t})=>s.readOnly?!1:(t(s.update(Zy(s,(e,i)=>{let n=/^\s*/.exec(e.text)[0];if(!n)return;let r=Ms(n,s.tabSize),o=0,l=Fh(s,Math.max(0,r-Fg(s)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:e.from+o,to:e.from+n.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),M7=s=>(s.setTabFocusMode(),!0),aoe=[{key:"Ctrl-b",run:c7,shift:b7,preventDefault:!0},{key:"Ctrl-f",run:u7,shift:O7},{key:"Ctrl-p",run:f7,shift:v7},{key:"Ctrl-n",run:m7,shift:_7},{key:"Ctrl-a",run:Are,shift:zre},{key:"Ctrl-e",run:Ire,shift:Wre},{key:"Ctrl-d",run:C7},{key:"Ctrl-h",run:XO},{key:"Ctrl-k",run:jre},{key:"Ctrl-Alt-h",run:T7},{key:"Ctrl-o",run:Kre},{key:"Ctrl-t",run:Jre},{key:"Ctrl-v",run:qO}],coe=[{key:"ArrowLeft",run:c7,shift:b7,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:yre,shift:Mre,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Tre,shift:Nre,preventDefault:!0},{key:"ArrowRight",run:u7,shift:O7,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:vre,shift:Lre,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Ere,shift:Fre,preventDefault:!0},{key:"ArrowUp",run:f7,shift:v7,preventDefault:!0},{mac:"Cmd-ArrowUp",run:pE,shift:bE},{mac:"Ctrl-ArrowUp",run:fE,shift:mE},{key:"ArrowDown",run:m7,shift:_7,preventDefault:!0},{mac:"Cmd-ArrowDown",run:wE,shift:OE},{mac:"Ctrl-ArrowDown",run:qO,shift:gE},{key:"PageUp",run:fE,shift:mE},{key:"PageDown",run:qO,shift:gE},{key:"Home",run:Pre,shift:Dre,preventDefault:!0},{key:"Mod-Home",run:pE,shift:bE},{key:"End",run:Cre,shift:Qre,preventDefault:!0},{key:"Mod-End",run:wE,shift:OE},{key:"Enter",run:xE,shift:xE},{key:"Mod-a",run:Ure},{key:"Backspace",run:XO,shift:XO},{key:"Delete",run:C7},{key:"Mod-Backspace",mac:"Alt-Backspace",run:T7},{key:"Mod-Delete",mac:"Alt-Delete",run:Xre},{mac:"Mod-Backspace",run:Gre},{mac:"Mod-Delete",run:Yre}].concat(aoe.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),uoe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:kre,shift:Bre},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Sre,shift:$re},{key:"Alt-ArrowUp",run:eoe},{key:"Shift-Alt-ArrowUp",run:ioe},{key:"Alt-ArrowDown",run:toe},{key:"Shift-Alt-ArrowDown",run:noe},{key:"Escape",run:qre},{key:"Mod-Enter",run:ooe},{key:"Alt-l",mac:"Ctrl-l",run:Zre},{key:"Mod-i",run:Hre,preventDefault:!0},{key:"Mod-[",run:V7},{key:"Mod-]",run:R7},{key:"Mod-Alt-\\",run:loe},{key:"Shift-Mod-k",run:soe},{key:"Shift-Mod-\\",run:Vre},{key:"Mod-/",run:ire},{key:"Alt-A",run:sre},{key:"Ctrl-m",mac:"Shift-Alt-m",run:M7}].concat(coe);class Hy{constructor(t,e,i,n){this.state=t,this.pos=e,this.explicit=i,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(t){let e=kt(this.state).resolveInner(this.pos,-1);for(;e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(t){let e=this.state.doc.lineAt(this.pos),i=Math.max(e.from,this.pos-250),n=e.text.slice(i-e.from,this.pos-e.from),r=n.search(B7(t,!1));return r<0?null:{from:i+r,to:this.pos,text:n.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(t,e,i){t=="abort"&&this.abortListeners&&(this.abortListeners.push(e),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function yE(s){let t=Object.keys(s).join(""),e=/\w/.test(t);return e&&(t=t.replace(/\w/g,"")),`[${e?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function hoe(s){let t=Object.create(null),e=Object.create(null);for(let{label:n}of s){t[n[0]]=!0;for(let r=1;r<n.length;r++)e[n[r]]=!0}let i=yE(t)+yE(e)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function L7(s){let t=s.map(n=>typeof n=="string"?{label:n}:n),[e,i]=t.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:hoe(t);return n=>{let r=n.matchBefore(i);return r||n.explicit?{from:r?r.from:n.pos,options:t,validFor:e}:null}}function doe(s,t){return e=>{for(let i=kt(e.state).resolveInner(e.pos,-1);i;i=i.parent){if(s.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return t(e)}}class vE{constructor(t,e,i,n){this.completion=t,this.source=e,this.match=i,this.score=n}}function Ol(s){return s.selection.main.from}function B7(s,t){var e;let{source:i}=s,n=t&&i[0]!="^",r=i[i.length-1]!="$";return!n&&!r?s:new RegExp(`${n?"^":""}(?:${i})${r?"$":""}`,(e=s.flags)!==null&&e!==void 0?e:s.ignoreCase?"i":"")}const qy=zr.define();function foe(s,t,e,i){let{main:n}=s.selection,r=e-n.from,o=i-n.from;return Object.assign(Object.assign({},s.changeByRange(l=>{if(l!=n&&e!=i&&s.sliceDoc(l.from+r,l.from+o)!=s.sliceDoc(e,i))return{range:l};let a=s.toText(t);return{changes:{from:l.from+r,to:i==n.from?l.to:l.from+o,insert:a},range:ie.cursor(l.from+r+a.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const _E=new WeakMap;function moe(s){if(!Array.isArray(s))return s;let t=_E.get(s);return t||_E.set(s,t=L7(s)),t}const Zg=st.define(),Wh=st.define();class goe{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let e=0;e<t.length;){let i=Vn(t,e),n=Cr(i);this.chars.push(i);let r=t.slice(e,e+n),o=r.toUpperCase();this.folded.push(Vn(o==r?r.toLowerCase():o,0)),e+=n}this.astral=t.length!=this.chars.length}ret(t,e){return this.score=t,this.matched=e,this}match(t){if(this.pattern.length==0)return this.ret(-100,[]);if(t.length<this.pattern.length)return null;let{chars:e,folded:i,any:n,precise:r,byWord:o}=this;if(e.length==1){let P=Vn(t,0),V=Cr(P),Q=V==t.length?0:-100;if(P!=e[0])if(P==i[0])Q+=-200;else return null;return this.ret(Q,[0,V])}let l=t.indexOf(this.pattern);if(l==0)return this.ret(t.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=e.length,c=0;if(l<0){for(let P=0,V=Math.min(t.length,200);P<V&&c<a;){let Q=Vn(t,P);(Q==e[c]||Q==i[c])&&(n[c++]=P),P+=Cr(Q)}if(c<a)return null}let h=0,f=0,m=!1,w=0,O=-1,v=-1,k=/[a-z]/.test(t),C=!0;for(let P=0,V=Math.min(t.length,200),Q=0;P<V&&f<a;){let D=Vn(t,P);l<0&&(h<a&&D==e[h]&&(r[h++]=P),w<a&&(D==e[w]||D==i[w]?(w==0&&(O=P),v=P+1,w++):w=0));let q,$=D<255?D>=48&&D<=57||D>=97&&D<=122?2:D>=65&&D<=90?1:0:(q=f4(D))!=q.toLowerCase()?1:q!=q.toUpperCase()?2:0;(!P||$==1&&k||Q==0&&$!=0)&&(e[f]==D||i[f]==D&&(m=!0)?o[f++]=P:o.length&&(C=!1)),Q=$,P+=Cr(D)}return f==a&&o[0]==0&&C?this.result(-100+(m?-200:0),o,t):w==a&&O==0?this.ret(-200-t.length+(v==t.length?0:-100),[0,v]):l>-1?this.ret(-700-t.length,[l,l+this.pattern.length]):w==a?this.ret(-900-t.length,[O,v]):f==a?this.result(-100+(m?-200:0)+-700+(C?0:-1100),o,t):e.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,t)}result(t,e,i){let n=[],r=0;for(let o of e){let l=o+(this.astral?Cr(Vn(i,o)):1);r&&n[r-1]==o?n[r-1]=l:(n[r++]=o,n[r++]=l)}return this.ret(t-i.length,n)}}class poe{constructor(t){this.pattern=t,this.matched=[],this.score=0,this.folded=t.toLowerCase()}match(t){if(t.length<this.pattern.length)return null;let e=t.slice(0,this.pattern.length),i=e==this.pattern?0:e.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,e.length],this.score=i+(t.length==this.pattern.length?0:-100),this)}}const Oi=Pe.define({combine(s){return Zl(s,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:woe,filterStrict:!1,compareCompletions:(t,e)=>t.label.localeCompare(e.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(t,e)=>t&&e,closeOnBlur:(t,e)=>t&&e,icons:(t,e)=>t&&e,tooltipClass:(t,e)=>i=>kE(t(i),e(i)),optionClass:(t,e)=>i=>kE(t(i),e(i)),addToOptions:(t,e)=>t.concat(e),filterStrict:(t,e)=>t||e})}});function kE(s,t){return s?t?s+" "+t:s:t}function woe(s,t,e,i,n,r){let o=s.textDirection==Lt.RTL,l=o,a=!1,c="top",h,f,m=t.left-n.left,w=n.right-t.right,O=i.right-i.left,v=i.bottom-i.top;if(l&&m<Math.min(O,w)?l=!1:!l&&w<Math.min(O,m)&&(l=!0),O<=(l?m:w))h=Math.max(n.top,Math.min(e.top,n.bottom-v))-t.top,f=Math.min(400,l?m:w);else{a=!0,f=Math.min(400,(o?t.right:n.right-t.left)-30);let P=n.bottom-t.bottom;P>=v||P>t.top?h=e.bottom-t.top:(c="bottom",h=t.bottom-e.top)}let k=(t.bottom-t.top)/r.offsetHeight,C=(t.right-t.left)/r.offsetWidth;return{style:`${c}: ${h/k}px; max-width: ${f/C}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function boe(s){let t=s.addToOptions.slice();return s.icons&&t.push({render(e){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),e.type&&i.classList.add(...e.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),t.push({render(e,i,n,r){let o=document.createElement("span");o.className="cm-completionLabel";let l=e.displayLabel||e.label,a=0;for(let c=0;c<r.length;){let h=r[c++],f=r[c++];h>a&&o.appendChild(document.createTextNode(l.slice(a,h)));let m=o.appendChild(document.createElement("span"));m.appendChild(document.createTextNode(l.slice(h,f))),m.className="cm-completionMatchedText",a=f}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(e){if(!e.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=e.detail,i},position:80}),t.sort((e,i)=>e.position-i.position).map(e=>e.render)}function Wb(s,t,e){if(s<=e)return{from:0,to:s};if(t<0&&(t=0),t<=s>>1){let n=Math.floor(t/e);return{from:n*e,to:(n+1)*e}}let i=Math.floor((s-t)/e);return{from:s-(i+1)*e,to:s-i*e}}class Ooe{constructor(t,e,i){this.view=t,this.stateField=e,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let n=t.state.field(e),{options:r,selected:o}=n.open,l=t.state.facet(Oi);this.optionContent=boe(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Wb(r.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",a=>{let{options:c}=t.state.field(e).open;for(let h=a.target,f;h&&h!=this.dom;h=h.parentNode)if(h.nodeName=="LI"&&(f=/-(\d+)$/.exec(h.id))&&+f[1]<c.length){this.applyCompletion(t,c[+f[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let c=t.state.field(this.stateField,!1);c&&c.tooltip&&t.state.facet(Oi).closeOnBlur&&a.relatedTarget!=t.contentDOM&&t.dispatch({effects:Wh.of(null)})}),this.showOptions(r,n.id)}mount(){this.updateSel()}showOptions(t,e){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t,e,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(t){var e;let i=t.state.field(this.stateField),n=t.startState.field(this.stateField);if(this.updateTooltipClass(t.state),i!=n){let{options:r,selected:o,disabled:l}=i.open;(!n.open||n.open.options!=r)&&(this.range=Wb(r.length,o,t.state.facet(Oi).maxRenderedOptions),this.showOptions(r,i.id)),this.updateSel(),l!=((e=n.open)===null||e===void 0?void 0:e.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(t){let e=this.tooltipClass(t);if(e!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of e.split(" "))i&&this.dom.classList.add(i);this.currentClass=e}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let t=this.view.state.field(this.stateField),e=t.open;if((e.selected>-1&&e.selected<this.range.from||e.selected>=this.range.to)&&(this.range=Wb(e.options.length,e.selected,this.view.state.facet(Oi).maxRenderedOptions),this.showOptions(e.options,t.id)),this.updateSelectedOption(e.selected)){this.destroyInfo();let{completion:i}=e.options[e.selected],{info:n}=i;if(!n)return;let r=typeof n=="string"?document.createTextNode(n):n(i);if(!r)return;"then"in r?r.then(o=>{o&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(o,i)}).catch(o=>$n(this.view.state,o,"completion info")):this.addInfoPane(r,i)}}addInfoPane(t,e){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",t.nodeType!=null)i.appendChild(t),this.infoDestroy=null;else{let{dom:n,destroy:r}=t;i.appendChild(n),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(t){let e=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)i.nodeName!="LI"||!i.id?n--:n==t?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),e=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return e&&yoe(this.list,e),e}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let e=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=t.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return n.top>Math.min(r.bottom,e.bottom)-10||n.bottom<Math.max(r.top,e.top)+10?null:this.view.state.facet(Oi).positionInfo(this.view,e,n,i,r,this.dom)}placeInfo(t){this.info&&(t?(t.style&&(this.info.style.cssText=t.style),this.info.className="cm-tooltip cm-completionInfo "+(t.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(t,e,i){const n=document.createElement("ul");n.id=e,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions")),n.addEventListener("mousedown",o=>{o.target==n&&o.preventDefault()});let r=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=t[o],{section:c}=l;if(c){let m=typeof c=="string"?c:c.name;if(m!=r&&(o>i.from||i.from==0))if(r=m,typeof c!="string"&&c.header)n.appendChild(c.header(c));else{let w=n.appendChild(document.createElement("completion-section"));w.textContent=m}}const h=n.appendChild(document.createElement("li"));h.id=e+"-"+o,h.setAttribute("role","option");let f=this.optionClass(l);f&&(h.className=f);for(let m of this.optionContent){let w=m(l,this.view.state,this.view,a);w&&h.appendChild(w)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<t.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function xoe(s,t){return e=>new Ooe(e,s,t)}function yoe(s,t){let e=s.getBoundingClientRect(),i=t.getBoundingClientRect(),n=e.height/s.offsetHeight;i.top<e.top?s.scrollTop-=(e.top-i.top)/n:i.bottom>e.bottom&&(s.scrollTop+=(i.bottom-e.bottom)/n)}function SE(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function voe(s,t){let e=[],i=null,n=c=>{e.push(c);let{section:h}=c.completion;if(h){i||(i=[]);let f=typeof h=="string"?h:h.name;i.some(m=>m.name==f)||i.push(typeof h=="string"?{name:f}:h)}},r=t.facet(Oi);for(let c of s)if(c.hasResult()){let h=c.result.getMatch;if(c.result.filter===!1)for(let f of c.result.options)n(new vE(f,c.source,h?h(f):[],1e9-e.length));else{let f=t.sliceDoc(c.from,c.to),m,w=r.filterStrict?new poe(f):new goe(f);for(let O of c.result.options)if(m=w.match(O.label)){let v=O.displayLabel?h?h(O,m.matched):[]:m.matched;n(new vE(O,c.source,v,m.score+(O.boost||0)))}}}if(i){let c=Object.create(null),h=0,f=(m,w)=>{var O,v;return((O=m.rank)!==null&&O!==void 0?O:1e9)-((v=w.rank)!==null&&v!==void 0?v:1e9)||(m.name<w.name?-1:1)};for(let m of i.sort(f))h-=1e5,c[m.name]=h;for(let m of e){let{section:w}=m.completion;w&&(m.score+=c[typeof w=="string"?w:w.name])}}let o=[],l=null,a=r.compareCompletions;for(let c of e.sort((h,f)=>f.score-h.score||a(h.completion,f.completion))){let h=c.completion;!l||l.label!=h.label||l.detail!=h.detail||l.type!=null&&h.type!=null&&l.type!=h.type||l.apply!=h.apply||l.boost!=h.boost?o.push(c):SE(c.completion)>SE(l)&&(o[o.length-1]=c),l=c.completion}return o}class Ua{constructor(t,e,i,n,r,o){this.options=t,this.attrs=e,this.tooltip=i,this.timestamp=n,this.selected=r,this.disabled=o}setSelected(t,e){return t==this.selected||t>=this.options.length?this:new Ua(this.options,CE(e,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,e,i,n,r,o){if(n&&!o&&t.some(c=>c.isPending))return n.setDisabled();let l=voe(t,e);if(!l.length)return n&&t.some(c=>c.isPending)?n.setDisabled():null;let a=e.facet(Oi).selectOnOpen?0:-1;if(n&&n.selected!=a&&n.selected!=-1){let c=n.options[n.selected].completion;for(let h=0;h<l.length;h++)if(l[h].completion==c){a=h;break}}return new Ua(l,CE(i,a),{pos:t.reduce((c,h)=>h.hasResult()?Math.min(c,h.from):c,1e8),create:Toe,above:r.aboveCursor},n?n.timestamp:Date.now(),a,!1)}map(t){return new Ua(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Ua(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Hg{constructor(t,e,i){this.active=t,this.id=e,this.open=i}static start(){return new Hg(Coe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:e}=t,i=e.facet(Oi),r=(i.override||e.languageDataAt("autocomplete",Ol(e)).map(moe)).map(a=>(this.active.find(h=>h.source==a)||new ss(a,this.active.some(h=>h.state!=0)?1:0)).update(t,i));r.length==this.active.length&&r.every((a,c)=>a==this.active[c])&&(r=this.active);let o=this.open,l=t.effects.some(a=>a.is(Xy));o&&t.docChanged&&(o=o.map(t.changes)),t.selection||r.some(a=>a.hasResult()&&t.changes.touchesRange(a.from,a.to))||!_oe(r,this.active)||l?o=Ua.build(r,e,this.id,o,i,l):o&&o.disabled&&!r.some(a=>a.isPending)&&(o=null),!o&&r.every(a=>!a.isPending)&&r.some(a=>a.hasResult())&&(r=r.map(a=>a.hasResult()?new ss(a.source,0):a));for(let a of t.effects)a.is(Q7)&&(o=o&&o.setSelected(a.value,this.id));return r==this.active&&o==this.open?this:new Hg(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?koe:Soe}}function _oe(s,t){if(s==t)return!0;for(let e=0,i=0;;){for(;e<s.length&&!s[e].hasResult();)e++;for(;i<t.length&&!t[i].hasResult();)i++;let n=e==s.length,r=i==t.length;if(n||r)return n==r;if(s[e++].result!=t[i++].result)return!1}}const koe={"aria-autocomplete":"list"},Soe={};function CE(s,t){let e={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return t>-1&&(e["aria-activedescendant"]=s+"-"+t),e}const Coe=[];function $7(s,t){if(s.isUserEvent("input.complete")){let i=s.annotation(qy);if(i&&t.activateOnCompletion(i))return 12}let e=s.isUserEvent("input.type");return e&&t.activateOnTyping?5:e?1:s.isUserEvent("delete.backward")?2:s.selection?8:s.docChanged?16:0}class ss{constructor(t,e,i=!1){this.source=t,this.state=e,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(t,e){let i=$7(t,e),n=this;(i&8||i&16&&this.touches(t))&&(n=new ss(n.source,0)),i&4&&n.state==0&&(n=new ss(this.source,1)),n=n.updateFor(t,i);for(let r of t.effects)if(r.is(Zg))n=new ss(n.source,1,r.value);else if(r.is(Wh))n=new ss(n.source,0);else if(r.is(Xy))for(let o of r.value)o.source==n.source&&(n=o);return n}updateFor(t,e){return this.map(t.changes)}map(t){return this}touches(t){return t.changes.touchesRange(Ol(t.state))}}class Ja extends ss{constructor(t,e,i,n,r,o){super(t,3,e),this.limit=i,this.result=n,this.from=r,this.to=o}hasResult(){return!0}updateFor(t,e){var i;if(!(e&3))return this.map(t.changes);let n=this.result;n.map&&!t.changes.empty&&(n=n.map(n,t.changes));let r=t.changes.mapPos(this.from),o=t.changes.mapPos(this.to,1),l=Ol(t.state);if(l>o||!n||e&2&&(Ol(t.startState)==this.from||l<this.limit))return new ss(this.source,e&4?1:0);let a=t.changes.mapPos(this.limit);return Poe(n.validFor,t.state,r,o)?new Ja(this.source,this.explicit,a,n,r,o):n.update&&(n=n.update(n,r,o,new Hy(t.state,l,!1)))?new Ja(this.source,this.explicit,a,n,n.from,(i=n.to)!==null&&i!==void 0?i:Ol(t.state)):new ss(this.source,1,this.explicit)}map(t){return t.empty?this:(this.result.map?this.result.map(this.result,t):this.result)?new Ja(this.source,this.explicit,t.mapPos(this.limit),this.result,t.mapPos(this.from),t.mapPos(this.to,1)):new ss(this.source,0)}touches(t){return t.changes.touchesRange(this.from,this.to)}}function Poe(s,t,e,i){if(!s)return!1;let n=t.sliceDoc(e,i);return typeof s=="function"?s(n,e,i,t):B7(s,!0).test(n)}const Xy=st.define({map(s,t){return s.map(e=>e.map(t))}}),Q7=st.define(),gn=_n.define({create(){return Hg.start()},update(s,t){return s.update(t)},provide:s=>[P3.from(s,t=>t.tooltip),Ee.contentAttributes.from(s,t=>t.attrs)]});function jy(s,t){const e=t.completion.apply||t.completion.label;let i=s.state.field(gn).active.find(n=>n.source==t.source);return i instanceof Ja?(typeof e=="string"?s.dispatch(Object.assign(Object.assign({},foe(s.state,e,i.from,i.to)),{annotations:qy.of(t.completion)})):e(s,t.completion,i.from,i.to),!0):!1}const Toe=xoe(gn,jy);function gm(s,t="option"){return e=>{let i=e.state.field(gn,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<e.state.facet(Oi).interactionDelay)return!1;let n=1,r;t=="page"&&(r=T3(e,i.open.tooltip))&&(n=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+n*(s?1:-1):s?0:o-1;return l<0?l=t=="page"?0:o-1:l>=o&&(l=t=="page"?o-1:0),e.dispatch({effects:Q7.of(l)}),!0}}const Eoe=s=>{let t=s.state.field(gn,!1);return s.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<s.state.facet(Oi).interactionDelay?!1:jy(s,t.open.options[t.open.selected])},PE=s=>s.state.field(gn,!1)?(s.dispatch({effects:Zg.of(!0)}),!0):!1,Aoe=s=>{let t=s.state.field(gn,!1);return!t||!t.active.some(e=>e.state!=0)?!1:(s.dispatch({effects:Wh.of(null)}),!0)};class Ioe{constructor(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0}}const Roe=50,Voe=1e3,Moe=Ui.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of s.state.field(gn).active)t.isPending&&this.startQuery(t)}update(s){let t=s.state.field(gn),e=s.state.facet(Oi);if(!s.selectionSet&&!s.docChanged&&s.startState.field(gn)==t)return;let i=s.transactions.some(r=>{let o=$7(r,e);return o&8||(r.selection||r.docChanged)&&!(o&3)});for(let r=0;r<this.running.length;r++){let o=this.running[r];if(i||o.context.abortOnDocChange&&s.docChanged||o.updates.length+s.transactions.length>Roe&&Date.now()-o.time>Voe){for(let l of o.context.abortListeners)try{l()}catch(a){$n(this.view.state,a)}o.context.abortListeners=null,this.running.splice(r--,1)}else o.updates.push(...s.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),s.transactions.some(r=>r.effects.some(o=>o.is(Zg)))&&(this.pendingStart=!0);let n=this.pendingStart?50:e.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(r=>r.isPending&&!this.running.some(o=>o.active.source==r.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let r of s.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:s}=this.view,t=s.field(gn);for(let e of t.active)e.isPending&&!this.running.some(i=>i.active.source==e.source)&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Oi).updateSyncTime))}startQuery(s){let{state:t}=this.view,e=Ol(t),i=new Hy(t,e,s.explicit,this.view),n=new Ioe(s,i);this.running.push(n),Promise.resolve(s.source(i)).then(r=>{n.context.aborted||(n.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:Wh.of(null)}),$n(this.view.state,r)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Oi).updateSyncTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],e=this.view.state.facet(Oi),i=this.view.state.field(gn);for(let n=0;n<this.running.length;n++){let r=this.running[n];if(r.done===void 0)continue;if(this.running.splice(n--,1),r.done){let l=Ol(r.updates.length?r.updates[0].startState:this.view.state),a=Math.min(l,r.done.from+(r.active.explicit?0:1)),c=new Ja(r.active.source,r.active.explicit,a,r.done,r.done.from,(s=r.done.to)!==null&&s!==void 0?s:l);for(let h of r.updates)c=c.update(h,e);if(c.hasResult()){t.push(c);continue}}let o=i.active.find(l=>l.source==r.active.source);if(o&&o.isPending)if(r.done==null){let l=new ss(r.active.source,0);for(let a of r.updates)l=l.update(a,e);l.isPending||t.push(l)}else this.startQuery(o)}(t.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:Xy.of(t)})}},{eventHandlers:{blur(s){let t=this.view.state.field(gn,!1);if(t&&t.tooltip&&this.view.state.facet(Oi).closeOnBlur){let e=t.open&&T3(this.view,t.open.tooltip);(!e||!e.dom.contains(s.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Wh.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Zg.of(!1)}),20),this.composing=0}}}),Loe=typeof navigator=="object"&&/Win/.test(navigator.platform),Boe=$o.highest(Ee.domEventHandlers({keydown(s,t){let e=t.state.field(gn,!1);if(!e||!e.open||e.open.disabled||e.open.selected<0||s.key.length>1||s.ctrlKey&&!(Loe&&s.altKey)||s.metaKey)return!1;let i=e.open.options[e.open.selected],n=e.active.find(o=>o.source==i.source),r=i.completion.commitCharacters||n.result.commitCharacters;return r&&r.indexOf(s.key)>-1&&jy(t,i),!1}})),D7=Ee.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class $oe{constructor(t,e,i,n){this.field=t,this.line=e,this.from=i,this.to=n}}class Gy{constructor(t,e,i){this.field=t,this.from=e,this.to=i}map(t){let e=t.mapPos(this.from,-1,Fi.TrackDel),i=t.mapPos(this.to,1,Fi.TrackDel);return e==null||i==null?null:new Gy(this.field,e,i)}}class Yy{constructor(t,e){this.lines=t,this.fieldPositions=e}instantiate(t,e){let i=[],n=[e],r=t.doc.lineAt(e),o=/^\s*/.exec(r.text)[0];for(let a of this.lines){if(i.length){let c=o,h=/^\t*/.exec(a)[0].length;for(let f=0;f<h;f++)c+=t.facet(pd);n.push(e+c.length-h),a=c+a.slice(h)}i.push(a),e+=a.length+1}let l=this.fieldPositions.map(a=>new Gy(a.field,n[a.line]+a.from,n[a.line]+a.to));return{text:i,ranges:l}}static parse(t){let e=[],i=[],n=[],r;for(let o of t.split(/\r\n?|\n/)){for(;r=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let l=r[1]?+r[1]:null,a=r[2]||r[3]||"",c=-1,h=a.replace(/\\[{}]/g,f=>f[1]);for(let f=0;f<e.length;f++)(l!=null?e[f].seq==l:h&&e[f].name==h)&&(c=f);if(c<0){let f=0;for(;f<e.length&&(l==null||e[f].seq!=null&&e[f].seq<l);)f++;e.splice(f,0,{seq:l,name:h}),c=f;for(let m of n)m.field>=c&&m.field++}n.push(new $oe(c,i.length,r.index,r.index+h.length)),o=o.slice(0,r.index)+a+o.slice(r.index+r[0].length)}o=o.replace(/\\([{}])/g,(l,a,c)=>{for(let h of n)h.line==i.length&&h.from>c&&(h.from--,h.to--);return a}),i.push(o)}return new Yy(i,n)}}let Qoe=Ke.widget({widget:new class extends Qo{toDOM(){let s=document.createElement("span");return s.className="cm-snippetFieldPosition",s}ignoreEvent(){return!1}}}),Doe=Ke.mark({class:"cm-snippetField"});class Ec{constructor(t,e){this.ranges=t,this.active=e,this.deco=Ke.set(t.map(i=>(i.from==i.to?Qoe:Doe).range(i.from,i.to)))}map(t){let e=[];for(let i of this.ranges){let n=i.map(t);if(!n)return null;e.push(n)}return new Ec(e,this.active)}selectionInsideField(t){return t.ranges.every(e=>this.ranges.some(i=>i.field==this.active&&i.from<=e.from&&i.to>=e.to))}}const yd=st.define({map(s,t){return s&&s.map(t)}}),Noe=st.define(),Uh=_n.define({create(){return null},update(s,t){for(let e of t.effects){if(e.is(yd))return e.value;if(e.is(Noe)&&s)return new Ec(s.ranges,e.value)}return s&&t.docChanged&&(s=s.map(t.changes)),s&&t.selection&&!s.selectionInsideField(t.selection)&&(s=null),s},provide:s=>Ee.decorations.from(s,t=>t?t.deco:Ke.none)});function Ky(s,t){return ie.create(s.filter(e=>e.field==t).map(e=>ie.range(e.from,e.to)))}function Foe(s){let t=Yy.parse(s);return(e,i,n,r)=>{let{text:o,ranges:l}=t.instantiate(e.state,n),{main:a}=e.state.selection,c={changes:{from:n,to:r==a.from?a.to:r,insert:Ye.of(o)},scrollIntoView:!0,annotations:i?[qy.of(i),Yt.userEvent.of("input.complete")]:void 0};if(l.length&&(c.selection=Ky(l,0)),l.some(h=>h.field>0)){let h=new Ec(l,0),f=c.effects=[yd.of(h)];e.state.field(Uh,!1)===void 0&&f.push(st.appendConfig.of([Uh,Hoe,qoe,D7]))}e.dispatch(e.state.update(c))}}function N7(s){return({state:t,dispatch:e})=>{let i=t.field(Uh,!1);if(!i||s<0&&i.active==0)return!1;let n=i.active+s,r=s>0&&!i.ranges.some(o=>o.field==n+s);return e(t.update({selection:Ky(i.ranges,n),effects:yd.of(r?null:new Ec(i.ranges,n)),scrollIntoView:!0})),!0}}const zoe=({state:s,dispatch:t})=>s.field(Uh,!1)?(t(s.update({effects:yd.of(null)})),!0):!1,Woe=N7(1),Uoe=N7(-1),Zoe=[{key:"Tab",run:Woe,shift:Uoe},{key:"Escape",run:zoe}],TE=Pe.define({combine(s){return s.length?s[0]:Zoe}}),Hoe=$o.highest(fd.compute([TE],s=>s.facet(TE)));function un(s,t){return Object.assign(Object.assign({},t),{apply:Foe(s)})}const qoe=Ee.domEventHandlers({mousedown(s,t){let e=t.state.field(Uh,!1),i;if(!e||(i=t.posAtCoords({x:s.clientX,y:s.clientY}))==null)return!1;let n=e.ranges.find(r=>r.from<=i&&r.to>=i);return!n||n.field==e.active?!1:(t.dispatch({selection:Ky(e.ranges,n.field),effects:yd.of(e.ranges.some(r=>r.field>n.field)?new Ec(e.ranges,n.field):null),scrollIntoView:!0}),!0)}}),Zh={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},pl=st.define({map(s,t){let e=t.mapPos(s,-1,Fi.TrackAfter);return e??void 0}}),Jy=new class extends Sl{};Jy.startSide=1;Jy.endSide=-1;const F7=_n.define({create(){return nt.empty},update(s,t){if(s=s.map(t.changes),t.selection){let e=t.state.doc.lineAt(t.selection.main.head);s=s.update({filter:i=>i>=e.from&&i<=e.to})}for(let e of t.effects)e.is(pl)&&(s=s.update({add:[Jy.range(e.value,e.value+1)]}));return s}});function Xoe(){return[Goe,F7]}const Ub="()[]{}<>«»»«［］｛｝";function z7(s){for(let t=0;t<Ub.length;t+=2)if(Ub.charCodeAt(t)==s)return Ub.charAt(t+1);return f4(s<128?s:s+1)}function W7(s,t){return s.languageDataAt("closeBrackets",t)[0]||Zh}const joe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Goe=Ee.inputHandler.of((s,t,e,i)=>{if((joe?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let n=s.state.selection.main;if(i.length>2||i.length==2&&Cr(Vn(i,0))==1||t!=n.from||e!=n.to)return!1;let r=Joe(s.state,i);return r?(s.dispatch(r),!0):!1}),Yoe=({state:s,dispatch:t})=>{if(s.readOnly)return!1;let i=W7(s,s.selection.main.head).brackets||Zh.brackets,n=null,r=s.changeByRange(o=>{if(o.empty){let l=ele(s.doc,o.head);for(let a of i)if(a==l&&Rp(s.doc,o.head)==z7(Vn(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:ie.cursor(o.head-a.length)}}return{range:n=o}});return n||t(s.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},Koe=[{key:"Backspace",run:Yoe}];function Joe(s,t){let e=W7(s,s.selection.main.head),i=e.brackets||Zh.brackets;for(let n of i){let r=z7(Vn(n,0));if(t==n)return r==n?nle(s,n,i.indexOf(n+n+n)>-1,e):tle(s,n,r,e.before||Zh.before);if(t==r&&U7(s,s.selection.main.from))return ile(s,n,r)}return null}function U7(s,t){let e=!1;return s.field(F7).between(0,s.doc.length,i=>{i==t&&(e=!0)}),e}function Rp(s,t){let e=s.sliceString(t,t+2);return e.slice(0,Cr(Vn(e,0)))}function ele(s,t){let e=s.sliceString(t-2,t);return Cr(Vn(e,0))==e.length?e:e.slice(1)}function tle(s,t,e,i){let n=null,r=s.changeByRange(o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:e,from:o.to}],effects:pl.of(o.to+t.length),range:ie.range(o.anchor+t.length,o.head+t.length)};let l=Rp(s.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:t+e,from:o.head},effects:pl.of(o.head+t.length),range:ie.cursor(o.head+t.length)}:{range:n=o}});return n?null:s.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function ile(s,t,e){let i=null,n=s.changeByRange(r=>r.empty&&Rp(s.doc,r.head)==e?{changes:{from:r.head,to:r.head+e.length,insert:e},range:ie.cursor(r.head+e.length)}:i={range:r});return i?null:s.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function nle(s,t,e,i){let n=i.stringPrefixes||Zh.stringPrefixes,r=null,o=s.changeByRange(l=>{if(!l.empty)return{changes:[{insert:t,from:l.from},{insert:t,from:l.to}],effects:pl.of(l.to+t.length),range:ie.range(l.anchor+t.length,l.head+t.length)};let a=l.head,c=Rp(s.doc,a),h;if(c==t){if(EE(s,a))return{changes:{insert:t+t,from:a},effects:pl.of(a+t.length),range:ie.cursor(a+t.length)};if(U7(s,a)){let m=e&&s.sliceDoc(a,a+t.length*3)==t+t+t?t+t+t:t;return{changes:{from:a,to:a+m.length,insert:m},range:ie.cursor(a+m.length)}}}else{if(e&&s.sliceDoc(a-2*t.length,a)==t+t&&(h=AE(s,a-2*t.length,n))>-1&&EE(s,h))return{changes:{insert:t+t+t+t,from:a},effects:pl.of(a+t.length),range:ie.cursor(a+t.length)};if(s.charCategorizer(a)(c)!=es.Word&&AE(s,a,n)>-1&&!sle(s,a,t,n))return{changes:{insert:t+t,from:a},effects:pl.of(a+t.length),range:ie.cursor(a+t.length)}}return{range:r=l}});return r?null:s.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function EE(s,t){let e=kt(s).resolveInner(t+1);return e.parent&&e.from==t}function sle(s,t,e,i){let n=kt(s).resolveInner(t,-1),r=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=s.sliceDoc(n.from,Math.min(n.to,n.from+e.length+r)),a=l.indexOf(e);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let h=n.firstChild;for(;h&&h.from==n.from&&h.to-h.from>e.length+a;){if(s.sliceDoc(h.to-e.length,h.to)==e)return!1;h=h.firstChild}return!0}let c=n.to==t&&n.parent;if(!c)break;n=c}return!1}function AE(s,t,e){let i=s.charCategorizer(t);if(i(s.sliceDoc(t-1,t))!=es.Word)return t;for(let n of e){let r=t-n.length;if(s.sliceDoc(r,t)==n&&i(s.sliceDoc(r-1,r))!=es.Word)return r}return-1}function rle(s={}){return[Boe,gn,Oi.of(s),Moe,ole,D7]}const Z7=[{key:"Ctrl-Space",run:PE},{mac:"Alt-`",run:PE},{key:"Escape",run:Aoe},{key:"ArrowDown",run:gm(!0)},{key:"ArrowUp",run:gm(!1)},{key:"PageDown",run:gm(!0,"page")},{key:"PageUp",run:gm(!1,"page")},{key:"Enter",run:Eoe}],ole=$o.highest(fd.computeN([Oi],s=>s.facet(Oi).defaultKeymap?[Z7]:[]));var IE={};class qg{constructor(t,e,i,n,r,o,l,a,c,h=0,f){this.p=t,this.stack=e,this.state=i,this.reducePos=n,this.pos=r,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=c,this.lookAhead=h,this.parent=f}toString(){return`[${this.stack.filter((t,e)=>e%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,i=0){let n=t.parser.context;return new qg(t,[],e,i,i,0,[],0,n?new RE(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var e;let i=t>>19,n=t&65535,{parser:r}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let l=r.dynamicPrecedence(n);if(l&&(this.score+=l),i==0){this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(n,this.reducePos);return}let a=this.stack.length-(i-1)*3-(t&262144?6:0),c=a?this.stack[a-2]:this.p.ranges[0].from,h=this.reducePos-c;h>=2e3&&!(!((e=this.p.parser.nodeSet.types[n])===null||e===void 0)&&e.isAnonymous)&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=h):this.p.lastBigReductionSize<h&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=h));let f=a?this.stack[a-1]:0,m=this.bufferBase+this.buffer.length-f;if(n<r.minRepeatTerm||t&131072){let w=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,c,w,m+4,!0)}if(t&262144)this.state=this.stack[a];else{let w=this.stack[a-3];this.state=r.getGoto(w,n,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(n,c)}storeNode(t,e,i,n=4,r=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(e==i)return;if(o.buffer[l-2]>=e){o.buffer[l-2]=i;return}}}if(!r||this.pos==i)this.buffer.push(t,e,i,n);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let l=!1;for(let a=o;a>0&&this.buffer[a-2]>i;a-=4)if(this.buffer[a-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,n>4&&(n-=4)}this.buffer[o]=t,this.buffer[o+1]=e,this.buffer[o+2]=i,this.buffer[o+3]=n}}shift(t,e,i,n){if(t&131072)this.pushState(t&65535,this.pos);else if((t&262144)==0){let r=t,{parser:o}=this.p;(n>this.pos||e<=o.maxNode)&&(this.pos=n,o.stateFlag(r,1)||(this.reducePos=n)),this.pushState(r,i),this.shiftContext(e,i),e<=o.maxNode&&this.buffer.push(e,i,n,4)}else this.pos=n,this.shiftContext(e,i),e<=this.p.parser.maxNode&&this.buffer.push(e,i,n,4)}apply(t,e,i,n){t&65536?this.reduce(t):this.shift(t,e,i,n)}useNode(t,e){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=t)&&(this.p.reused.push(t),i++);let n=this.pos;this.reducePos=this.pos=n+t.length,this.pushState(e,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let i=t.buffer.slice(e),n=t.bufferBase+e;for(;t&&n==t.bufferBase;)t=t.parent;return new qg(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let i=t<=this.p.parser.maxNode;i&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,i?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new lle(this);;){let i=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(i==0)return!1;if((i&65536)==0)return!0;e.reduce(i)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>8||this.stack.length>=120){let n=[];for(let r=0,o;r<e.length;r+=2)(o=e[r+1])!=this.state&&this.p.parser.hasAction(o,t)&&n.push(e[r],o);if(this.stack.length<120)for(let r=0;n.length<8&&r<e.length;r+=2){let o=e[r+1];n.some((l,a)=>a&1&&l==o)||n.push(e[r],o)}e=n}let i=[];for(let n=0;n<e.length&&i.length<4;n+=2){let r=e[n+1];if(r==this.state)continue;let o=this.split();o.pushState(r,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(e[n],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:t}=this.p,e=t.stateSlot(this.state,5);if((e&65536)==0)return!1;if(!t.validAction(this.state,e)){let i=e>>19,n=e&65535,r=this.stack.length-i*3;if(r<0||t.getGoto(this.stack[r],n,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;e=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}findForcedReduction(){let{parser:t}=this.p,e=[],i=(n,r)=>{if(!e.includes(n))return e.push(n),t.allActions(n,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-r;if(l>1){let a=o&65535,c=this.stack.length-l*3;if(c>=0&&t.getGoto(this.stack[c],a,!1)>=0)return l<<19|65536|a}}else{let l=i(o,r+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new RE(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class RE{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}}class lle{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=t&65535,i=t>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=n}}class Xg{constructor(t,e,i){this.stack=t,this.pos=e,this.index=i,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new Xg(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Xg(this.stack,this.pos,this.index)}}function Zu(s,t=Uint16Array){if(typeof s!="string")return s;let e=null;for(let i=0,n=0;i<s.length;){let r=0;for(;;){let o=s.charCodeAt(i++),l=!1;if(o==126){r=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),r+=a,l)break;r*=46}e?e[n++]=r:e=new t(r)}return e}class Hm{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const VE=new Hm;class ale{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=VE,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let i=this.range,n=this.rangeIndex,r=this.pos+t;for(;r<i.from;){if(!n)return null;let o=this.ranges[--n];r-=i.from-o.to,i=o}for(;e<0?r>i.to:r>=i.to;){if(n==this.ranges.length-1)return null;let o=this.ranges[++n];r+=o.from-i.to,i=o}return r}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e=this.chunkOff+t,i,n;if(e>=0&&e<this.chunk.length)i=this.pos+t,n=this.chunk.charCodeAt(e);else{let r=this.resolveOffset(t,1);if(r==null)return-1;if(i=r,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),n=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),n}acceptToken(t,e=0){let i=e?this.resolveOffset(e,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=i}acceptTokenTo(t,e){this.token.value=t,this.token.end=e}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=VE,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let i="";for(let n of this.ranges){if(n.from>=e)break;n.to>t&&(i+=this.input.read(Math.max(n.from,t),Math.min(n.to,e)))}return i}}class ec{constructor(t,e){this.data=t,this.id=e}token(t,e){let{parser:i}=e.p;H7(this.data,t,e,this.id,i.data,i.tokenPrecTable)}}ec.prototype.contextual=ec.prototype.fallback=ec.prototype.extend=!1;class jg{constructor(t,e,i){this.precTable=e,this.elseToken=i,this.data=typeof t=="string"?Zu(t):t}token(t,e){let i=t.pos,n=0;for(;;){let r=t.next<0,o=t.resolveOffset(1,1);if(H7(this.data,t,e,0,this.data,this.precTable),t.token.value>-1)break;if(this.elseToken==null)return;if(r||n++,o==null)break;t.reset(o,t.token)}n&&(t.reset(i,t.token),t.acceptToken(this.elseToken,n))}}jg.prototype.contextual=ec.prototype.fallback=ec.prototype.extend=!1;class ps{constructor(t,e={}){this.token=t,this.contextual=!!e.contextual,this.fallback=!!e.fallback,this.extend=!!e.extend}}function H7(s,t,e,i,n,r){let o=0,l=1<<i,{dialect:a}=e.p.parser;e:for(;(l&s[o])!=0;){let c=s[o+1];for(let w=o+3;w<c;w+=2)if((s[w+1]&l)>0){let O=s[w];if(a.allows(O)&&(t.token.value==-1||t.token.value==O||cle(O,t.token.value,n,r))){t.acceptToken(O);break}}let h=t.next,f=0,m=s[o+2];if(t.next<0&&m>f&&s[c+m*3-3]==65535){o=s[c+m*3-1];continue e}for(;f<m;){let w=f+m>>1,O=c+w+(w<<1),v=s[O],k=s[O+1]||65536;if(h<v)m=w;else if(h>=k)f=w+1;else{o=s[O+2],t.advance();continue e}}break}}function ME(s,t,e){for(let i=t,n;(n=s[i])!=65535;i++)if(n==e)return i-t;return-1}function cle(s,t,e,i){let n=ME(e,i,t);return n<0||ME(e,i,s)<n}const En=typeof process<"u"&&IE&&/\bparse\b/.test(IE.LOG);let Zb=null;function LE(s,t,e){let i=s.cursor(_t.IncludeAnonymous);for(i.moveTo(t);;)if(!(e<0?i.childBefore(t):i.childAfter(t)))for(;;){if((e<0?i.to<t:i.from>t)&&!i.type.isError)return e<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(s.length,Math.max(i.from+1,t+25));if(e<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return e<0?0:s.length}}let ule=class{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?LE(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?LE(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let i=this.trees[e],n=this.index[e];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=i.children[n],o=this.start[e]+i.positions[n];if(o>t)return this.nextStart=o,null;if(r instanceof mt){if(o==t){if(o<this.safeFrom)return null;let l=o+r.length;if(l<=this.safeTo){let a=r.prop(Ne.lookAhead);if(!a||l+a<this.fragment.to)return r}}this.index[e]++,o+r.length>=Math.max(this.safeFrom,t)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[e]++,this.nextStart=o+r.length}}};class hle{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(i=>new Hm)}getActions(t){let e=0,i=null,{parser:n}=t.p,{tokenizers:r}=n,o=n.stateSlot(t.state,3),l=t.curContext?t.curContext.hash:0,a=0;for(let c=0;c<r.length;c++){if((1<<c&o)==0)continue;let h=r[c],f=this.tokens[c];if(!(i&&!h.fallback)&&((h.contextual||f.start!=t.pos||f.mask!=o||f.context!=l)&&(this.updateCachedToken(f,h,t),f.mask=o,f.context=l),f.lookAhead>f.end+25&&(a=Math.max(f.lookAhead,a)),f.value!=0)){let m=e;if(f.extended>-1&&(e=this.addActions(t,f.extended,f.end,e)),e=this.addActions(t,f.value,f.end,e),!h.extend&&(i=f,e>m))break}}for(;this.actions.length>e;)this.actions.pop();return a&&t.setLookAhead(a),!i&&t.pos==this.stream.end&&(i=new Hm,i.value=t.p.parser.eofTerm,i.start=i.end=t.pos,e=this.addActions(t,i.value,i.end,e)),this.mainToken=i,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new Hm,{pos:i,p:n}=t;return e.start=i,e.end=Math.min(i+1,n.stream.end),e.value=i==n.stream.end?n.parser.eofTerm:0,e}updateCachedToken(t,e,i){let n=this.stream.clipPos(i.pos);if(e.token(this.stream.reset(n,t),i),t.value>-1){let{parser:r}=i.p;for(let o=0;o<r.specialized.length;o++)if(r.specialized[o]==t.value){let l=r.specializers[o](this.stream.read(t.start,t.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){(l&1)==0?t.value=l>>1:t.extended=l>>1;break}}}else t.value=0,t.end=this.stream.clipPos(n+1)}putAction(t,e,i,n){for(let r=0;r<n;r+=3)if(this.actions[r]==t)return n;return this.actions[n++]=t,this.actions[n++]=e,this.actions[n++]=i,n}addActions(t,e,i,n){let{state:r}=t,{parser:o}=t.p,{data:l}=o;for(let a=0;a<2;a++)for(let c=o.stateSlot(r,a?2:1);;c+=3){if(l[c]==65535)if(l[c+1]==1)c=Sr(l,c+2);else{n==0&&l[c+1]==2&&(n=this.putAction(Sr(l,c+2),e,i,n));break}l[c]==e&&(n=this.putAction(Sr(l,c+1),e,i,n))}return n}}class dle{constructor(t,e,i,n){this.parser=t,this.input=e,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new ale(e,n),this.tokens=new hle(t,this.stream),this.topTerm=t.top[1];let{from:r}=n[0];this.stacks=[qg.start(this,t.top[0],r)],this.fragments=i.length&&this.stream.end-r>t.bufferLength*4?new ule(i,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,e=this.minStackPos,i=this.stacks=[],n,r;if(this.bigReductionCount>300&&t.length==1){let[o]=t;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<t.length;o++){let l=t[o];for(;;){if(this.tokens.mainToken=null,l.pos>e)i.push(l);else{if(this.advanceStack(l,i,t))continue;{n||(n=[],r=[]),n.push(l);let a=this.tokens.getMainToken(l);r.push(a.value,a.end)}}break}}if(!i.length){let o=n&&mle(n);if(o)return En&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw En&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+e);this.recovering||(this.recovering=5)}if(this.recovering&&n){let o=this.stoppedAt!=null&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,r,i);if(o)return En&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,a)=>a.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>e)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let a=o+1;a<i.length;a++){let c=i[a];if(l.sameState(c)||l.buffer.length>500&&c.buffer.length>500)if((l.score-c.score||l.buffer.length-c.buffer.length)>0)i.splice(a--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,i){let n=t.pos,{parser:r}=this,o=En?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&n>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let c=t.curContext&&t.curContext.tracker.strict,h=c?t.curContext.hash:0;for(let f=this.fragments.nodeAt(n);f;){let m=this.parser.nodeSet.types[f.type.id]==f.type?r.getGoto(t.state,f.type.id):-1;if(m>-1&&f.length&&(!c||(f.prop(Ne.contextHash)||0)==h))return t.useNode(f,m),En&&console.log(o+this.stackID(t)+` (via reuse of ${r.getName(f.type.id)})`),!0;if(!(f instanceof mt)||f.children.length==0||f.positions[0]>0)break;let w=f.children[0];if(w instanceof mt&&f.positions[0]==0)f=w;else break}}let l=r.stateSlot(t.state,4);if(l>0)return t.reduce(l),En&&console.log(o+this.stackID(t)+` (via always-reduce ${r.getName(l&65535)})`),!0;if(t.stack.length>=8400)for(;t.stack.length>6e3&&t.forceReduce(););let a=this.tokens.getActions(t);for(let c=0;c<a.length;){let h=a[c++],f=a[c++],m=a[c++],w=c==a.length||!i,O=w?t:t.split(),v=this.tokens.mainToken;if(O.apply(h,f,v?v.start:O.pos,m),En&&console.log(o+this.stackID(O)+` (via ${(h&65536)==0?"shift":`reduce of ${r.getName(h&65535)}`} for ${r.getName(f)} @ ${n}${O==t?"":", split"})`),w)return!0;O.pos>n?e.push(O):i.push(O)}return!1}advanceFully(t,e){let i=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>i)return BE(t,e),!0}}runRecovery(t,e,i){let n=null,r=!1;for(let o=0;o<t.length;o++){let l=t[o],a=e[o<<1],c=e[(o<<1)+1],h=En?this.stackID(l)+" -> ":"";if(l.deadEnd&&(r||(r=!0,l.restart(),En&&console.log(h+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let f=l.split(),m=h;for(let w=0;f.forceReduce()&&w<10&&(En&&console.log(m+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));w++)En&&(m=this.stackID(f)+" -> ");for(let w of l.recoverByInsert(a))En&&console.log(h+this.stackID(w)+" (via recover-insert)"),this.advanceFully(w,i);this.stream.end>l.pos?(c==l.pos&&(c++,a=0),l.recoverByDelete(a,c),En&&console.log(h+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),BE(l,i)):(!n||n.score<l.score)&&(n=l)}return n}stackToTree(t){return t.close(),mt.build({buffer:Xg.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(Zb||(Zb=new WeakMap)).get(t);return e||Zb.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}}function BE(s,t){for(let e=0;e<t.length;e++){let i=t[e];if(i.pos==s.pos&&i.sameState(s)){t[e].score<s.score&&(t[e]=s);return}}t.push(s)}class fle{constructor(t,e,i){this.source=t,this.flags=e,this.disabled=i}allows(t){return!this.disabled||this.disabled[t]==0}}const Hb=s=>s;class q7{constructor(t){this.start=t.start,this.shift=t.shift||Hb,this.reduce=t.reduce||Hb,this.reuse=t.reuse||Hb,this.hash=t.hash||(()=>0),this.strict=t.strict!==!1}}class gc extends $y{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let l=0;l<t.repeatNodeCount;l++)e.push("");let i=Object.keys(t.topRules).map(l=>t.topRules[l][1]),n=[];for(let l=0;l<e.length;l++)n.push([]);function r(l,a,c){n[l].push([a,a.deserialize(String(c))])}if(t.nodeProps)for(let l of t.nodeProps){let a=l[0];typeof a=="string"&&(a=Ne[a]);for(let c=1;c<l.length;){let h=l[c++];if(h>=0)r(h,a,l[c++]);else{let f=l[c+-h];for(let m=-h;m>0;m--)r(l[c++],a,f);c++}}}this.nodeSet=new gd(e.map((l,a)=>ui.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:n[a],top:i.indexOf(a)>-1,error:a==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(a)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=I3;let o=Zu(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map($E),this.states=Zu(t.states,Uint32Array),this.data=Zu(t.stateData),this.goto=Zu(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(l=>typeof l=="number"?new ec(o,l):l),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,i){let n=new dle(this,t,e,i);for(let r of this.wrappers)n=r(n,t,e,i);return n}getGoto(t,e,i=!1){let n=this.goto;if(e>=n[0])return-1;for(let r=n[e+1];;){let o=n[r++],l=o&1,a=n[r++];if(l&&i)return a;for(let c=r+(o>>1);r<c;r++)if(n[r]==t)return a;if(l)return-1}}hasAction(t,e){let i=this.data;for(let n=0;n<2;n++)for(let r=this.stateSlot(t,n?2:1),o;;r+=3){if((o=i[r])==65535)if(i[r+1]==1)o=i[r=Sr(i,r+2)];else{if(i[r+1]==2)return Sr(i,r+2);break}if(o==e||o==0)return Sr(i,r+1)}return 0}stateSlot(t,e){return this.states[t*6+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){return!!this.allActions(t,i=>i==e?!0:null)}allActions(t,e){let i=this.stateSlot(t,4),n=i?e(i):void 0;for(let r=this.stateSlot(t,1);n==null;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Sr(this.data,r+2);else break;n=e(Sr(this.data,r+1))}return n}nextStates(t){let e=[];for(let i=this.stateSlot(t,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Sr(this.data,i+2);else break;if((this.data[i+2]&1)==0){let n=this.data[i+1];e.some((r,o)=>o&1&&r==n)||e.push(this.data[i],n)}}return e}configure(t){let e=Object.assign(Object.create(gc.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let i=this.topRules[t.top];if(!i)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=i}return t.tokenizers&&(e.tokenizers=this.tokenizers.map(i=>{let n=t.tokenizers.find(r=>r.from==i);return n?n.to:i})),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map((i,n)=>{let r=t.specializers.find(l=>l.from==i.external);if(!r)return i;let o=Object.assign(Object.assign({},i),{external:r.to});return e.specializers[n]=$E(o),o})),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),t.bufferLength!=null&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return e==null?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),i=e.map(()=>!1);if(t)for(let r of t.split(" ")){let o=e.indexOf(r);o>=0&&(i[o]=!0)}let n=null;for(let r=0;r<e.length;r++)if(!i[r])for(let o=this.dialects[e[r]],l;(l=this.data[o++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[l]=1;return new fle(t,i,n)}static deserialize(t){return new gc(t)}}function Sr(s,t){return s[t]|s[t+1]<<16}function mle(s){let t=null;for(let e of s){let i=e.p.stoppedAt;(e.pos==e.p.stream.end||i!=null&&e.pos>i)&&e.p.parser.stateFlag(e.state,2)&&(!t||t.score<e.score)&&(t=e)}return t}function $E(s){if(s.external){let t=s.extend?1:0;return(e,i)=>s.external(e,i)<<1|t}return s.get}const gle=54,ple=1,wle=55,ble=2,Ole=56,xle=3,QE=4,yle=5,Gg=6,X7=7,j7=8,G7=9,Y7=10,vle=11,_le=12,kle=13,qb=57,Sle=14,DE=58,K7=20,Cle=22,J7=23,Ple=24,jO=26,eV=27,Tle=28,Ele=31,Ale=34,Ile=36,Rle=37,Vle=0,Mle=1,Lle={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},Ble={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},NE={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function $le(s){return s==45||s==46||s==58||s>=65&&s<=90||s==95||s>=97&&s<=122||s>=161}function tV(s){return s==9||s==10||s==13||s==32}let FE=null,zE=null,WE=0;function GO(s,t){let e=s.pos+t;if(WE==e&&zE==s)return FE;let i=s.peek(t);for(;tV(i);)i=s.peek(++t);let n="";for(;$le(i);)n+=String.fromCharCode(i),i=s.peek(++t);return zE=s,WE=e,FE=n?n.toLowerCase():i==Qle||i==Dle?void 0:null}const iV=60,Yg=62,ev=47,Qle=63,Dle=33,Nle=45;function UE(s,t){this.name=s,this.parent=t}const Fle=[Gg,Y7,X7,j7,G7],zle=new q7({start:null,shift(s,t,e,i){return Fle.indexOf(t)>-1?new UE(GO(i,1)||"",s):s},reduce(s,t){return t==K7&&s?s.parent:s},reuse(s,t,e,i){let n=t.type.id;return n==Gg||n==Ile?new UE(GO(i,1)||"",s):s},strict:!1}),Wle=new ps((s,t)=>{if(s.next!=iV){s.next<0&&t.context&&s.acceptToken(qb);return}s.advance();let e=s.next==ev;e&&s.advance();let i=GO(s,0);if(i===void 0)return;if(!i)return s.acceptToken(e?Sle:Gg);let n=t.context?t.context.name:null;if(e){if(i==n)return s.acceptToken(vle);if(n&&Ble[n])return s.acceptToken(qb,-2);if(t.dialectEnabled(Vle))return s.acceptToken(_le);for(let r=t.context;r;r=r.parent)if(r.name==i)return;s.acceptToken(kle)}else{if(i=="script")return s.acceptToken(X7);if(i=="style")return s.acceptToken(j7);if(i=="textarea")return s.acceptToken(G7);if(Lle.hasOwnProperty(i))return s.acceptToken(Y7);n&&NE[n]&&NE[n][i]?s.acceptToken(qb,-1):s.acceptToken(Gg)}},{contextual:!0}),Ule=new ps(s=>{for(let t=0,e=0;;e++){if(s.next<0){e&&s.acceptToken(DE);break}if(s.next==Nle)t++;else if(s.next==Yg&&t>=2){e>=3&&s.acceptToken(DE,-2);break}else t=0;s.advance()}});function Zle(s){for(;s;s=s.parent)if(s.name=="svg"||s.name=="math")return!0;return!1}const Hle=new ps((s,t)=>{if(s.next==ev&&s.peek(1)==Yg){let e=t.dialectEnabled(Mle)||Zle(t.context);s.acceptToken(e?yle:QE,2)}else s.next==Yg&&s.acceptToken(QE,1)});function tv(s,t,e){let i=2+s.length;return new ps(n=>{for(let r=0,o=0,l=0;;l++){if(n.next<0){l&&n.acceptToken(t);break}if(r==0&&n.next==iV||r==1&&n.next==ev||r>=2&&r<i&&n.next==s.charCodeAt(r-2))r++,o++;else if((r==2||r==i)&&tV(n.next))o++;else if(r==i&&n.next==Yg){l>o?n.acceptToken(t,-o):n.acceptToken(e,-(o-2));break}else if((n.next==10||n.next==13)&&l){n.acceptToken(t,1);break}else r=o=0;n.advance()}})}const qle=tv("script",gle,ple),Xle=tv("style",wle,ble),jle=tv("textarea",Ole,xle),Gle=Cc({"Text RawText":T.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":T.angleBracket,TagName:T.tagName,"MismatchedCloseTag/TagName":[T.tagName,T.invalid],AttributeName:T.attributeName,"AttributeValue UnquotedAttributeValue":T.attributeValue,Is:T.definitionOperator,"EntityReference CharacterReference":T.character,Comment:T.blockComment,ProcessingInst:T.processingInstruction,DoctypeDecl:T.documentMeta}),Yle=gc.deserialize({version:14,states:",xOVO!rOOO!WQ#tO'#CqO!]Q#tO'#CzO!bQ#tO'#C}O!gQ#tO'#DQO!lQ#tO'#DSO!qOaO'#CpO!|ObO'#CpO#XOdO'#CpO$eO!rO'#CpOOO`'#Cp'#CpO$lO$fO'#DTO$tQ#tO'#DVO$yQ#tO'#DWOOO`'#Dk'#DkOOO`'#DY'#DYQVO!rOOO%OQ&rO,59]O%ZQ&rO,59fO%fQ&rO,59iO%qQ&rO,59lO%|Q&rO,59nOOOa'#D^'#D^O&XOaO'#CxO&dOaO,59[OOOb'#D_'#D_O&lObO'#C{O&wObO,59[OOOd'#D`'#D`O'POdO'#DOO'[OdO,59[OOO`'#Da'#DaO'dO!rO,59[O'kQ#tO'#DROOO`,59[,59[OOOp'#Db'#DbO'pO$fO,59oOOO`,59o,59oO'xQ#|O,59qO'}Q#|O,59rOOO`-E7W-E7WO(SQ&rO'#CsOOQW'#DZ'#DZO(bQ&rO1G.wOOOa1G.w1G.wOOO`1G/Y1G/YO(mQ&rO1G/QOOOb1G/Q1G/QO(xQ&rO1G/TOOOd1G/T1G/TO)TQ&rO1G/WOOO`1G/W1G/WO)`Q&rO1G/YOOOa-E7[-E7[O)kQ#tO'#CyOOO`1G.v1G.vOOOb-E7]-E7]O)pQ#tO'#C|OOOd-E7^-E7^O)uQ#tO'#DPOOO`-E7_-E7_O)zQ#|O,59mOOOp-E7`-E7`OOO`1G/Z1G/ZOOO`1G/]1G/]OOO`1G/^1G/^O*PQ,UO,59_OOQW-E7X-E7XOOOa7+$c7+$cOOO`7+$t7+$tOOOb7+$l7+$lOOOd7+$o7+$oOOO`7+$r7+$rO*[Q#|O,59eO*aQ#|O,59hO*fQ#|O,59kOOO`1G/X1G/XO*kO7[O'#CvO*|OMhO'#CvOOQW1G.y1G.yOOO`1G/P1G/POOO`1G/S1G/SOOO`1G/V1G/VOOOO'#D['#D[O+_O7[O,59bOOQW,59b,59bOOOO'#D]'#D]O+pOMhO,59bOOOO-E7Y-E7YOOQW1G.|1G.|OOOO-E7Z-E7Z",stateData:",]~O!^OS~OUSOVPOWQOXROYTO[]O][O^^O`^Oa^Ob^Oc^Ox^O{_O!dZO~OfaO~OfbO~OfcO~OfdO~OfeO~O!WfOPlP!ZlP~O!XiOQoP!ZoP~O!YlORrP!ZrP~OUSOVPOWQOXROYTOZqO[]O][O^^O`^Oa^Ob^Oc^Ox^O!dZO~O!ZrO~P#dO![sO!euO~OfvO~OfwO~OS|OT}OhyO~OS!POT}OhyO~OS!ROT}OhyO~OS!TOT}OhyO~OS}OT}OhyO~O!WfOPlX!ZlX~OP!WO!Z!XO~O!XiOQoX!ZoX~OQ!ZO!Z!XO~O!YlORrX!ZrX~OR!]O!Z!XO~O!Z!XO~P#dOf!_O~O![sO!e!aO~OS!bO~OS!cO~Oi!dOSgXTgXhgX~OS!fOT!gOhyO~OS!hOT!gOhyO~OS!iOT!gOhyO~OS!jOT!gOhyO~OS!gOT!gOhyO~Of!kO~Of!lO~Of!mO~OS!nO~Ok!qO!`!oO!b!pO~OS!rO~OS!sO~OS!tO~Oa!uOb!uOc!uO!`!wO!a!uO~Oa!xOb!xOc!xO!b!wO!c!xO~Oa!uOb!uOc!uO!`!{O!a!uO~Oa!xOb!xOc!xO!b!{O!c!xO~OT~bac!dx{!d~",goto:"%p!`PPPPPPPPPPPPPPPPPPPP!a!gP!mPP!yP!|#P#S#Y#]#`#f#i#l#r#x!aP!a!aP$O$U$l$r$x%O%U%[%bPPPPPPPP%hX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"⚠ StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:67,context:zle,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,21,30,33,36,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,29,32,35,37,"OpenTag"],["group",-9,14,17,18,19,20,39,40,41,42,"Entity",16,"Entity TextContent",-3,28,31,34,"TextContent Entity"],["isolate",-11,21,29,30,32,33,35,36,37,38,41,42,"ltr",-3,26,27,39,""]],propSources:[Gle],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|c`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bX`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UV`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pT`POv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!cpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({W`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!a`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!a`!cpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYkWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]``P!a`!cp!^^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebhSkWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXhSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vchS`P!a`!cpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!`h`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WihSkWc!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zbkWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOa!R!R7tP;=`<%l7S!Z8OYkWa!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{ihSkWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbhSkWa!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QchSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXhSa!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TakWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOb!R!RAwP;=`<%lAY!ZBRYkWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbhSkWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbhSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXhSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!bx`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYlhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_khS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_X`P!a`!cp!eQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZhSfQ`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!a`!cpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!a`!cp!dPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!a`!cpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!a`!cpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!a`!cpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!a`!cpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!a`!cpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!a`!cpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!a`!cpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!cpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO{PP!-nP;=`<%l!-Sq!-xS!cp{POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!a`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!a`{POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!a`!cp{POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!a`!cpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!a`!cpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!a`!cpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!a`!cpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!a`!cpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!a`!cpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!cpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOxPP!7TP;=`<%l!6Vq!7]V!cpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!cpxPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!a`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!a`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!a`xPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!a`!cpxPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXiS`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[qle,Xle,jle,Hle,Wle,Ule,0,1,2,3,4,5],topRules:{Document:[0,15]},dialects:{noMatch:0,selfClosing:509},tokenPrec:511});function nV(s,t){let e=Object.create(null);for(let i of s.getChildren(J7)){let n=i.getChild(Ple),r=i.getChild(jO)||i.getChild(eV);n&&(e[t.read(n.from,n.to)]=r?r.type.id==jO?t.read(r.from+1,r.to-1):t.read(r.from,r.to):"")}return e}function ZE(s,t){let e=s.getChild(Cle);return e?t.read(e.from,e.to):" "}function Xb(s,t,e){let i;for(let n of e)if(!n.attrs||n.attrs(i||(i=nV(s.node.parent.firstChild,t))))return{parser:n.parser};return null}function sV(s=[],t=[]){let e=[],i=[],n=[],r=[];for(let l of s)(l.tag=="script"?e:l.tag=="style"?i:l.tag=="textarea"?n:r).push(l);let o=t.length?Object.create(null):null;for(let l of t)(o[l.name]||(o[l.name]=[])).push(l);return B3((l,a)=>{let c=l.type.id;if(c==Tle)return Xb(l,a,e);if(c==Ele)return Xb(l,a,i);if(c==Ale)return Xb(l,a,n);if(c==K7&&r.length){let h=l.node,f=h.firstChild,m=f&&ZE(f,a),w;if(m){for(let O of r)if(O.tag==m&&(!O.attrs||O.attrs(w||(w=nV(f,a))))){let v=h.lastChild,k=v.type.id==Rle?v.from:h.to;if(k>f.to)return{parser:O.parser,overlay:[{from:f.to,to:k}]}}}}if(o&&c==J7){let h=l.node,f;if(f=h.firstChild){let m=o[a.read(f.from,f.to)];if(m)for(let w of m){if(w.tagName&&w.tagName!=ZE(h.parent,a))continue;let O=h.lastChild;if(O.type.id==jO){let v=O.from+1,k=O.lastChild,C=O.to-(k&&k.isError?0:1);if(C>v)return{parser:w.parser,overlay:[{from:v,to:C}]}}else if(O.type.id==eV)return{parser:w.parser,overlay:[{from:O.from,to:O.to}]}}}}return null})}const Kle=107,HE=1,Jle=108,eae=109,qE=2,XE=110,rV=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],tae=58,iae=40,oV=95,nae=91,qm=45,sae=46,rae=35,oae=37,lae=38,aae=92,cae=10,uae=42;function Hh(s){return s>=65&&s<=90||s>=97&&s<=122||s>=161}function lV(s){return s>=48&&s<=57}const hae=new ps((s,t)=>{for(let e=!1,i=0,n=0;;n++){let{next:r}=s;if(Hh(r)||r==qm||r==oV||e&&lV(r))!e&&(r!=qm||n>0)&&(e=!0),i===n&&r==qm&&i++,s.advance();else if(r==aae&&s.peek(1)!=cae)s.advance(),s.next>-1&&s.advance(),e=!0;else{e&&s.acceptToken(i==2&&t.canShift(qE)?qE:t.canShift(XE)?XE:r==iae?Jle:eae);break}}}),dae=new ps(s=>{if(rV.includes(s.peek(-1))){let{next:t}=s;(Hh(t)||t==oV||t==rae||t==sae||t==uae||t==nae||t==tae&&Hh(s.peek(1))||t==qm||t==lae)&&s.acceptToken(Kle)}}),fae=new ps(s=>{if(!rV.includes(s.peek(-1))){let{next:t}=s;if(t==oae&&(s.advance(),s.acceptToken(HE)),Hh(t)){do s.advance();while(Hh(s.next)||lV(s.next));s.acceptToken(HE)}}}),mae=Cc({"AtKeyword import charset namespace keyframes media supports":T.definitionKeyword,"from to selector":T.keyword,NamespaceName:T.namespace,KeyframeName:T.labelName,KeyframeRangeName:T.operatorKeyword,TagName:T.tagName,ClassName:T.className,PseudoClassName:T.constant(T.className),IdName:T.labelName,"FeatureName PropertyName":T.propertyName,AttributeName:T.attributeName,NumberLiteral:T.number,KeywordQuery:T.keyword,UnaryQueryOp:T.operatorKeyword,"CallTag ValueName":T.atom,VariableName:T.variableName,Callee:T.operatorKeyword,Unit:T.unit,"UniversalSelector NestingSelector":T.definitionOperator,"MatchOp CompareOp":T.compareOperator,"ChildOp SiblingOp, LogicOp":T.logicOperator,BinOp:T.arithmeticOperator,Important:T.modifier,Comment:T.blockComment,ColorLiteral:T.color,"ParenthesizedContent StringLiteral":T.string,":":T.punctuation,"PseudoOp #":T.derefOperator,"; ,":T.separator,"( )":T.paren,"[ ]":T.squareBracket,"{ }":T.brace}),gae={__proto__:null,lang:34,"nth-child":34,"nth-last-child":34,"nth-of-type":34,"nth-last-of-type":34,dir:34,"host-context":34,url:62,"url-prefix":62,domain:62,regexp:62},pae={__proto__:null,"@import":120,"@media":154,"@charset":158,"@namespace":162,"@keyframes":168,"@supports":180},wae={__proto__:null,layer:124,not:144,only:144,selector:150},bae=gc.deserialize({version:14,states:">`QYQ[OOO#kQ[OOP#rOWOOOOQP'#Cd'#CdOOQP'#Cc'#CcO#wQ[O'#CfO$hQXO'#CaO$rQ[O'#CiO$}Q[O'#DUO%SQ[O'#DXO%XQ[O'#D[O%XQ[O'#D_OOQP'#Ev'#EvO%yQdO'#DhO&hQ[O'#DzO%yQdO'#D|O&yQ[O'#EOO'UQ[O'#ERO'^Q[O'#EXO'lQ[O'#EZOOQS'#Eu'#EuOOQS'#E^'#E^QYQ[OOO'sQXO'#CdO(hQWO'#DdO(mQWO'#E{O(xQ[O'#E{QOQWOOP)SO#tO'#C_POOO)C@e)C@eOOQP'#Ch'#ChOOQP,59Q,59QO#wQ[O,59QO)_Q[O,59TO$}Q[O,59pO%SQ[O,59sO%XQ[O,59vO%XQ[O,59xO%XQ[O,59yO%XQ[O'#EcO)jQWO,58{O)rQ[O'#DcOOQS,58{,58{OOQP'#Cl'#ClOOQO'#DS'#DSOOQP,59T,59TO)yQWO,59TO*OQWO,59TOOQP'#DW'#DWOOQP,59p,59pOOQO'#DY'#DYO*TQ`O,59sO*nQXO,59vO+UQXO,59yOOQS'#Cq'#CqO%yQdO'#CrO+lQvO'#CtO-hQtO,5:SOOQO'#Cy'#CyO*OQWO'#CxO-rQWO'#CzO-wQ[O'#DPOOQS'#Ex'#ExOOQO'#Dn'#DnO.eQdO'#DwO.uQWO'#E|O'^Q[O'#DuO/TQWO'#DxOOQO'#E}'#E}O)mQWO,5:fO/YQpO,5:hOOQS'#EQ'#EQO/bQWO,5:jO/gQ[O,5:jOOQO'#ET'#ETO/oQWO,5:mO/tQWO,5:sO/|QWO,5:uOOQS-E8[-E8[O0UQdO,5:OO0fQ[O'#EeO0sQWO,5;gO0sQWO,5;gPOOO'#E]'#E]P1OO#tO,58yPOOO,58y,58yOOQP1G.l1G.lOOQP1G.o1G.oO)yQWO1G.oO*OQWO1G.oOOQP1G/[1G/[O1ZQ`O1G/_O1cQXO1G/bO1yQXO1G/dO2aQXO1G/eO2wQXO,5:}OOQO-E8a-E8aOOQS1G.g1G.gO3RQWO,59}O3WQ[O'#DTO3_QdO'#CpOOQP1G/_1G/_O%yQdO1G/_O3fQpO,59^OOQS,59`,59`O%yQdO,59bO3nQ[O'#DkO4PQWO1G/nO-VQ[O1G/nOOQS,59d,59dO4UQ!bO,59fOOQS'#DQ'#DQOOQS'#E`'#E`O4aQ[O,59kOOQS,59k,59kO4iQpO'#DnO4wQpO,5:ZO5PQWO,5:cOOQO'#FO'#FOO4zQpO,5:_O'^Q[O,5:]O5XQ[O'#EgO5pQWO,5;hO5{QWO,5:aO%XQ[O,5:dOOQS1G0Q1G0QOOQS1G0S1G0SOOQS1G0U1G0UO6^QWO1G0UO6cQdO'#EUOOQS1G0X1G0XOOQS1G0_1G0_OOQS1G0a1G0aO6nQtO1G/jOOQO1G/j1G/jOOQO,5;P,5;PO7UQ[O,5;POOQO-E8c-E8cO7cQWO1G1RPOOO-E8Z-E8ZPOOO1G.e1G.eOOQP7+$Z7+$ZOOQP7+$y7+$yO%yQdO7+$yOOQS1G/i1G/iO7nQXO'#EzO7xQWO,59oO7}QtO'#E_O8uQdO'#EwO9PQWO,59[O9UQpO7+$yOOQS1G.x1G.xOOQS1G.|1G.|O9^Q[O,5:VOOQS7+%Y7+%YO9cQWO7+%YOOQS1G/Q1G/QO9hQWO1G/QOOQS-E8^-E8^OOQS1G/V1G/VO%yQdO1G/uO9mQdO1G/yOOQO1G/}1G/}OOQO1G/w1G/wO9tQWO,5;ROOQO-E8e-E8eO:SQXO1G0OOOQS7+%p7+%pO:ZQYO'#CtOOQO'#EW'#EWO:iQ`O'#EVOOQO'#EV'#EVO:tQWO'#EhO:|QdO,5:pOOQS,5:p,5:pO;XQtO'#EdO%yQdO'#EdO<YQdO7+%UOOQO7+%U7+%UOOQO1G0k1G0kO<mQpO<<HeO<uQ[O'#EbO=PQWO,5;fOOQP1G/Z1G/ZOOQS-E8]-E8]O=XQdO'#EaO=cQWO,5;cOOQT1G.v1G.vOOQP<<He<<HeOOQO'#Dm'#DmO=kQWO1G/qOOQS<<Ht<<HtOOQS7+$l7+$lO=sQdO7+%aOOQO'#Dp'#DpO=zQpO7+%eOOQO7+%j7+%jOOQO,5:q,5:qO6fQdO'#EiO:tQWO,5;SOOQS,5;S,5;SOOQS-E8f-E8fOOQS1G0[1G0[O>SQtO,5;OOOQS-E8b-E8bOOQO<<Hp<<HpOOQPAN>PAN>PO?TQXO,5:|OOQO-E8`-E8`O?_QdO,5:{OOQO-E8_-E8_O9^Q[O'#EfO?iQWO7+%]OOQS7+%]7+%]OOQO<<H{<<H{OOQO<<IP<<IPO?qQdO<<IPOOQO,5;T,5;TOOQO-E8g-E8gOOQS1G0n1G0nOOQO,5;Q,5;QOOQO-E8d-E8dOOQS<<Hw<<HwO@YQWOAN>kOOQOG24VG24V",stateData:"@g~O#dOS#eQQ~OU[OX[OZTO^VO_VOrXOyWO!PYO!SZO!]cO!^]O!o^O!q_O!s`O!vaO!|bO#aRO~OQhOU[OX[OZTO^VO_VOrXOyWO!PYO!SZO!]cO!^]O!o^O!q_O!s`O!vaO!|bO#agO~O#^#oP~P!aO#elO~O#anO~OZpO^qO_qOrsOyrO!PtO!SvO#_uO~OuwO!UyO~P#|Oa!PO#`|O#a{O~O#a!QO~O#a!SO~OU[OX[OZTO^VO_VOrXOyWO!PYO!SZO#aRO~OQ!`Oc!XOg!`Oi!`Oo!^Or!_O#`![O#a!WO#m!YO~Oc!bO!j!dO!m!eO#b!aO!U#pP~Oi!jOo!^O#a!iO~Oi!lO#a!lO~Oc!bO!j!dO!m!eO#b!aO~O!Z#pP~P&hOZWX^WX^!XX_WXrWXuWXyWX!PWX!SWX!UWX#_WX~O^!qO~O!Z!rO#^#oX!T#oX~O#^#oX!T#oX~P!aO#f!uO#g!uO#h!wO~Oa!{O#`|O#a{O~OuwO!UyO~O!T#oP~P!aOc#VO~Oc#WO~Oq#XO}#YO~OZpO^qO_qOrsOyrO~Ou!Oa!P!Oa!S!Oa!U!Oa#_!Oab!Oa~P*]Ou!Ra!P!Ra!S!Ra!U!Ra#_!Rab!Ra~P*]OP#[OchXkhX!ZhX!`hX!jhX!mhX#bhXbhX!hhXQhXghXihXohXrhXuhX!YhX#^hX#`hX#ahX#mhXqhX!ThX~Oc!bO!j!dO!m!eO#b!aO!Z#pP~Ok#]O!`#^O~P-VOc#bO~Oq#fO#a#cO~OQ#jOg#jOi#jOo!^O#`![O#m!YO~Oc!bO!j!dO!m!eO#b#gO~P.POu#mO!f#lO!U#pX!Z#pX~Oc#pO~Ok#]O!Z#rO~O!Z#sO~Oi#tOo!^O~O!U#uO~O!UyO!f#lO~O!UyO!Z#xO~O!Y#zO!Z!Wa#^!Wa!T!Wa~P%yO!Z#XX#^#XX!T#XX~P!aO!Z!rO#^#oa!T#oa~O#f!uO#g!uO#h$QO~Oq$SO}$TO~Ou!Oi!P!Oi!S!Oi!U!Oi#_!Oib!Oi~P*]Ou!Qi!P!Qi!S!Qi!U!Qi#_!Qib!Qi~P*]Ou!Ri!P!Ri!S!Ri!U!Ri#_!Rib!Ri~P*]Ou#Va!U#Va~P#|O!T$UO~Ob#nP~P%XOb#kP~P%yOb$]Ok#]O~Oc$_O!Z!_X!j!_X!m!_X#b!_X~O!Z$`O~Ob$bOi$cOp$cO~Oq$eO#a#cO~O^!dXb!bX!f!bX!h!dX~O^$fO!h$gO~Ob$hO!f#lO~Oc!bO!j!dO!m!eO#b!aOu#ZX!U#ZX!Z#ZX~Ou#mO!U#pa!Z#pa~O!f#lOu!ia!U!ia!Z!iab!ia~O!Z$mO~O!T$tO#a$oO#m$nO~Ok#]Ou$vO!Y$xO!Z!Wi#^!Wi!T!Wi~P%yO!Z#Xa#^#Xa!T#Xa~P!aO!Z!rO#^#oi!T#oi~Ou${Ob#nX~P#|Ob$}O~Ok#]OQ#RXb#RXc#RXg#RXi#RXo#RXr#RXu#RX#`#RX#a#RX#m#RX~Ou%POb#kX~P%yOb%RO~Ok#]Oq%SO~O#a%TO~O!Z%VO~Ob%WO~O#b%YO~P.PO!f#lOu#Za!U#Za!Z#Za~Ob%[O~P#|OP#[OuhX!UhXbhX~O#m$nOu!yX!U!yX~Ou%^O!UyO~O!T%bO#a$oO#m$nO~Ok#]OQ#WXc#WXg#WXi#WXo#WXr#WXu#WX!Y#WX!Z#WX#^#WX#`#WX#a#WX#m#WX!T#WX~Ou$vO!Y%eO!Z!Wq#^!Wq!T!Wq~P%yOk#]Oq%fO~Ob#UXu#UX~P%XOu${Ob#na~Ob#TXu#TX~P%yOu%POb#ka~OZ%kOb%mO~Ob%nO~P%yOb%oO!h%pO~Ok#]OQ#Wac#Wag#Wai#Wao#War#Wau#Wa!Y#Wa!Z#Wa#^#Wa#`#Wa#a#Wa#m#Wa!T#Wa~Ob#Uau#Ua~P#|Ob#Tau#Ta~P%yOZ%kOb%vO~OQ#jOg#jOi#jOo!^O#`![O#b%YO#m$nO~Ob%xO~O#dp#e#mk!S#m~",goto:"/l#sPPP#tP#wP$Q$dP$QP$v$QPP$|PPP%S%]%]P%oP%]P&`&w'^PPPP%]'{P(P(V$QP(]$Q(cP$QP$Q$QPPP(i)O)]PP#wPP)dP)g)m)m)x)mP)mP)mP)m)mP#wP#wP#wP*R#wP*U*X*[*c#wP#wP*h*n*}+]+c+i+o+u+{,V,],c,iPPPPPPPPPPP,o,x-n-qP.g.j.p.|/cRmQ_dOPfjy!r#|q[OPYZfjtuvwy!r#V#p#|${qSOPYZfjtuvwy!r#V#p#|${QoTR!xpQ}VR!yqQ!y!PQ#a!]R$R!{q!`]_!X!q#W#Y#]#y$T$Y$f$v$w%P%X%ip!`]_!X!q#W#Y#]#y$T$Y$f$v$w%P%X%iU#j!b$g%pU$q#u$s%^R%]$pp!`]_!X!q#W#Y#]#y$T$Y$f$v$w%P%X%iV#j!b$g%pw!]]_!X!b!q#W#Y#]#y$T$Y$f$g$v$w%P%X%i%pp!`]_!X!q#W#Y#]#y$T$Y$f$v$w%P%X%iQ!j`U#j!b$g%pR#t!kT#d!_#eQ!OVR!zqQ!y!OR$R!zQ!RWR!|rQ!TXR!}sQzUQ#TxQ#q!gQ#w!nQ#x!oQ%`$rR%s%_SiPyQ!tjQ#{!rR$y#|ZhPjy!r#|R#`!ZQ%U$_R%t%kc!f^bc!Z!b!d#`#l#mQ#h!bQ%Z$gR%w%pR!k`R!maR#v!mS$r#u$sR%q%^V$p#u$s%^Q!vlR$P!vQfOSjPyU!pfj#|R#|!rQ$Y#WU%O$Y%X%iQ%X$fR%i%PQ#e!_R$d#eQ%Q$YR%j%QQ$|$VR%h$|QxUR#SxQ$w#yR%d$wQ!siS#}!s$OR$O!tQ%l%UR%u%lQ#n!cR$k#nQ$s#uR%a$sQ%_$rR%r%__eOPfjy!r#|^UOPfjy!r#|Q!UYQ!VZQ#OtQ#PuQ#QvQ#RwQ$V#VQ$l#pR%g${R$Z#WQ!Z]Q!h_Q#Z!XQ#y!q[$X#W$Y$f%P%X%iQ$[#YQ$^#]S$u#y$wQ$z$TR%c$vR$W#VQkPR#UyQ!g^Q!ocQ#_!ZR$a#`W!c^c!Z#`Q!nbQ#i!bQ#o!dQ$i#lR$j#mQ#k!bQ%Z$gR%w%p",nodeNames:"⚠ Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent ] [ LineNames LineName , PseudoClassName ArgList IdSelector # IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import Layer layer LayerName KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports AtRule Styles",maxTerm:126,nodeProps:[["isolate",-2,3,25,""],["openedBy",18,"(",33,"[",51,"{"],["closedBy",19,")",34,"]",52,"}"]],propSources:[mae],skippedNodes:[0,3,93],repeatNodeCount:13,tokenData:"LU~R!^OX$}X^%u^p$}pq%uqr)Xrs.Rst/utu6duv$}vw7^wx7oxy9^yz9oz{9t{|:_|}?Q}!O?c!O!P@Q!P!Q@i!Q![Ab![!]B]!]!^CX!^!_Cj!_!`Df!`!aDy!a!b$}!b!cEz!c!}$}!}#OHX#O#P$}#P#QHj#Q#R6d#R#T$}#T#UH{#U#c$}#c#dJ^#d#o$}#o#pJs#p#q6d#q#rKU#r#sKg#s#y$}#y#z%u#z$f$}$f$g%u$g#BY$}#BY#BZ%u#BZ$IS$}$IS$I_%u$I_$I|$}$I|$JO%u$JO$JT$}$JT$JU%u$JU$KV$}$KV$KW%u$KW&FU$}&FU&FV%u&FV;'S$};'S;=`LO<%lO$}`%QSOy%^z;'S%^;'S;=`%o<%lO%^`%cSp`Oy%^z;'S%^;'S;=`%o<%lO%^`%rP;=`<%l%^~%zh#d~OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^~'mh#d~p`OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^l)[UOy%^z#]%^#]#^)n#^;'S%^;'S;=`%o<%lO%^l)sUp`Oy%^z#a%^#a#b*V#b;'S%^;'S;=`%o<%lO%^l*[Up`Oy%^z#d%^#d#e*n#e;'S%^;'S;=`%o<%lO%^l*sUp`Oy%^z#c%^#c#d+V#d;'S%^;'S;=`%o<%lO%^l+[Up`Oy%^z#f%^#f#g+n#g;'S%^;'S;=`%o<%lO%^l+sUp`Oy%^z#h%^#h#i,V#i;'S%^;'S;=`%o<%lO%^l,[Up`Oy%^z#T%^#T#U,n#U;'S%^;'S;=`%o<%lO%^l,sUp`Oy%^z#b%^#b#c-V#c;'S%^;'S;=`%o<%lO%^l-[Up`Oy%^z#h%^#h#i-n#i;'S%^;'S;=`%o<%lO%^l-uS!Y[p`Oy%^z;'S%^;'S;=`%o<%lO%^~.UWOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o<%lO.R~.sOi~~.vRO;'S.R;'S;=`/P;=`O.R~/SXOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o;=`<%l.R<%lO.R~/rP;=`<%l.Rn/zYyQOy%^z!Q%^!Q![0j![!c%^!c!i0j!i#T%^#T#Z0j#Z;'S%^;'S;=`%o<%lO%^l0oYp`Oy%^z!Q%^!Q![1_![!c%^!c!i1_!i#T%^#T#Z1_#Z;'S%^;'S;=`%o<%lO%^l1dYp`Oy%^z!Q%^!Q![2S![!c%^!c!i2S!i#T%^#T#Z2S#Z;'S%^;'S;=`%o<%lO%^l2ZYg[p`Oy%^z!Q%^!Q![2y![!c%^!c!i2y!i#T%^#T#Z2y#Z;'S%^;'S;=`%o<%lO%^l3QYg[p`Oy%^z!Q%^!Q![3p![!c%^!c!i3p!i#T%^#T#Z3p#Z;'S%^;'S;=`%o<%lO%^l3uYp`Oy%^z!Q%^!Q![4e![!c%^!c!i4e!i#T%^#T#Z4e#Z;'S%^;'S;=`%o<%lO%^l4lYg[p`Oy%^z!Q%^!Q![5[![!c%^!c!i5[!i#T%^#T#Z5[#Z;'S%^;'S;=`%o<%lO%^l5aYp`Oy%^z!Q%^!Q![6P![!c%^!c!i6P!i#T%^#T#Z6P#Z;'S%^;'S;=`%o<%lO%^l6WSg[p`Oy%^z;'S%^;'S;=`%o<%lO%^d6gUOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^d7QS}Sp`Oy%^z;'S%^;'S;=`%o<%lO%^b7cSXQOy%^z;'S%^;'S;=`%o<%lO%^~7rWOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W<%lO7o~8_RO;'S7o;'S;=`8h;=`O7o~8kXOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W;=`<%l7o<%lO7o~9ZP;=`<%l7on9cSc^Oy%^z;'S%^;'S;=`%o<%lO%^~9tOb~n9{UUQkWOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^n:fWkW!SQOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^l;TUp`Oy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^l;nYp`#m[Oy%^z!Q%^!Q![;g![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^l<cYp`Oy%^z{%^{|=R|}%^}!O=R!O!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=WUp`Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=qUp`#m[Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l>[[p`#m[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^n?VSu^Oy%^z;'S%^;'S;=`%o<%lO%^l?hWkWOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^n@VUZQOy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^~@nTkWOy%^z{@}{;'S%^;'S;=`%o<%lO%^~AUSp`#e~Oy%^z;'S%^;'S;=`%o<%lO%^lAg[#m[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^jBbU^YOy%^z![%^![!]Bt!];'S%^;'S;=`%o<%lO%^bB{S_Qp`Oy%^z;'S%^;'S;=`%o<%lO%^nC^S!Z^Oy%^z;'S%^;'S;=`%o<%lO%^hCoU!hWOy%^z!_%^!_!`DR!`;'S%^;'S;=`%o<%lO%^hDYS!hWp`Oy%^z;'S%^;'S;=`%o<%lO%^lDmS!hW}SOy%^z;'S%^;'S;=`%o<%lO%^jEQV!PQ!hWOy%^z!_%^!_!`DR!`!aEg!a;'S%^;'S;=`%o<%lO%^bEnS!PQp`Oy%^z;'S%^;'S;=`%o<%lO%^bE}YOy%^z}%^}!OFm!O!c%^!c!}G[!}#T%^#T#oG[#o;'S%^;'S;=`%o<%lO%^bFrWp`Oy%^z!c%^!c!}G[!}#T%^#T#oG[#o;'S%^;'S;=`%o<%lO%^bGc[!]Qp`Oy%^z}%^}!OG[!O!Q%^!Q![G[![!c%^!c!}G[!}#T%^#T#oG[#o;'S%^;'S;=`%o<%lO%^nH^Sr^Oy%^z;'S%^;'S;=`%o<%lO%^nHoSq^Oy%^z;'S%^;'S;=`%o<%lO%^jIOUOy%^z#b%^#b#cIb#c;'S%^;'S;=`%o<%lO%^jIgUp`Oy%^z#W%^#W#XIy#X;'S%^;'S;=`%o<%lO%^jJQS!fYp`Oy%^z;'S%^;'S;=`%o<%lO%^jJaUOy%^z#f%^#f#gIy#g;'S%^;'S;=`%o<%lO%^fJxS!UUOy%^z;'S%^;'S;=`%o<%lO%^nKZS!T^Oy%^z;'S%^;'S;=`%o<%lO%^fKlU!SQOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^`LRP;=`<%l$}",tokenizers:[dae,fae,hae,1,2,3,4,new jg("m~RRYZ[z{a~~g~aO#g~~dP!P!Qg~lO#h~~",28,114)],topRules:{StyleSheet:[0,4],Styles:[1,92]},specialized:[{term:108,get:s=>gae[s]||-1},{term:59,get:s=>pae[s]||-1},{term:110,get:s=>wae[s]||-1}],tokenPrec:1441});let jb=null;function Gb(){if(!jb&&typeof document=="object"&&document.body){let{style:s}=document.body,t=[],e=new Set;for(let i in s)i!="cssText"&&i!="cssFloat"&&typeof s[i]=="string"&&(/[A-Z]/.test(i)&&(i=i.replace(/[A-Z]/g,n=>"-"+n.toLowerCase())),e.has(i)||(t.push(i),e.add(i)));jb=t.sort().map(i=>({type:"property",label:i,apply:i+": "}))}return jb||[]}const jE=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(s=>({type:"class",label:s})),GE=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(s=>({type:"keyword",label:s})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(s=>({type:"constant",label:s}))),Oae=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(s=>({type:"type",label:s})),xae=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(s=>({type:"keyword",label:s})),yr=/^(\w[\w-]*|-\w[\w-]*|)$/,yae=/^-(-[\w-]*)?$/;function vae(s,t){var e;if((s.name=="("||s.type.isError)&&(s=s.parent||s),s.name!="ArgList")return!1;let i=(e=s.parent)===null||e===void 0?void 0:e.firstChild;return(i==null?void 0:i.name)!="Callee"?!1:t.sliceString(i.from,i.to)=="var"}const YE=new L3,_ae=["Declaration"];function kae(s){for(let t=s;;){if(t.type.isTop)return t;if(!(t=t.parent))return s}}function aV(s,t,e){if(t.to-t.from>4096){let i=YE.get(t);if(i)return i;let n=[],r=new Set,o=t.cursor(_t.IncludeAnonymous);if(o.firstChild())do for(let l of aV(s,o.node,e))r.has(l.label)||(r.add(l.label),n.push(l));while(o.nextSibling());return YE.set(t,n),n}else{let i=[],n=new Set;return t.cursor().iterate(r=>{var o;if(e(r)&&r.matchContext(_ae)&&((o=r.node.nextSibling)===null||o===void 0?void 0:o.name)==":"){let l=s.sliceString(r.from,r.to);n.has(l)||(n.add(l),i.push({label:l,type:"variable"}))}}),i}}const Sae=s=>t=>{let{state:e,pos:i}=t,n=kt(e).resolveInner(i,-1),r=n.type.isError&&n.from==n.to-1&&e.doc.sliceString(n.from,n.to)=="-";if(n.name=="PropertyName"||(r||n.name=="TagName")&&/^(Block|Styles)$/.test(n.resolve(n.to).name))return{from:n.from,options:Gb(),validFor:yr};if(n.name=="ValueName")return{from:n.from,options:GE,validFor:yr};if(n.name=="PseudoClassName")return{from:n.from,options:jE,validFor:yr};if(s(n)||(t.explicit||r)&&vae(n,e.doc))return{from:s(n)||r?n.from:i,options:aV(e.doc,kae(n),s),validFor:yae};if(n.name=="TagName"){for(let{parent:a}=n;a;a=a.parent)if(a.name=="Block")return{from:n.from,options:Gb(),validFor:yr};return{from:n.from,options:Oae,validFor:yr}}if(n.name=="AtKeyword")return{from:n.from,options:xae,validFor:yr};if(!t.explicit)return null;let o=n.resolve(i),l=o.childBefore(i);return l&&l.name==":"&&o.name=="PseudoClassSelector"?{from:i,options:jE,validFor:yr}:l&&l.name==":"&&o.name=="Declaration"||o.name=="ArgList"?{from:i,options:GE,validFor:yr}:o.name=="Block"||o.name=="Styles"?{from:i,options:Gb(),validFor:yr}:null},Cae=Sae(s=>s.name=="VariableName"),Kg=fc.define({name:"css",parser:bae.configure({props:[wd.add({Declaration:Zm()}),Pc.add({"Block KeyframeList":W3})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function Pae(){return new Nh(Kg,Kg.data.of({autocomplete:Cae}))}const Tae=315,Eae=316,KE=1,Aae=2,Iae=3,Rae=4,Vae=317,Mae=319,Lae=320,Bae=5,$ae=6,Qae=0,YO=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],cV=125,Dae=59,KO=47,Nae=42,Fae=43,zae=45,Wae=60,Uae=44,Zae=63,Hae=46,qae=91,Xae=new q7({start:!1,shift(s,t){return t==Bae||t==$ae||t==Mae?s:t==Lae},strict:!1}),jae=new ps((s,t)=>{let{next:e}=s;(e==cV||e==-1||t.context)&&s.acceptToken(Vae)},{contextual:!0,fallback:!0}),Gae=new ps((s,t)=>{let{next:e}=s,i;YO.indexOf(e)>-1||e==KO&&((i=s.peek(1))==KO||i==Nae)||e!=cV&&e!=Dae&&e!=-1&&!t.context&&s.acceptToken(Tae)},{contextual:!0}),Yae=new ps((s,t)=>{s.next==qae&&!t.context&&s.acceptToken(Eae)},{contextual:!0}),Kae=new ps((s,t)=>{let{next:e}=s;if(e==Fae||e==zae){if(s.advance(),e==s.next){s.advance();let i=!t.context&&t.canShift(KE);s.acceptToken(i?KE:Aae)}}else e==Zae&&s.peek(1)==Hae&&(s.advance(),s.advance(),(s.next<48||s.next>57)&&s.acceptToken(Iae))},{contextual:!0});function Yb(s,t){return s>=65&&s<=90||s>=97&&s<=122||s==95||s>=192||!t&&s>=48&&s<=57}const Jae=new ps((s,t)=>{if(s.next!=Wae||!t.dialectEnabled(Qae)||(s.advance(),s.next==KO))return;let e=0;for(;YO.indexOf(s.next)>-1;)s.advance(),e++;if(Yb(s.next,!0)){for(s.advance(),e++;Yb(s.next,!1);)s.advance(),e++;for(;YO.indexOf(s.next)>-1;)s.advance(),e++;if(s.next==Uae)return;for(let i=0;;i++){if(i==7){if(!Yb(s.next,!0))return;break}if(s.next!="extends".charCodeAt(i))break;s.advance(),e++}}s.acceptToken(Rae,-e)}),ece=Cc({"get set async static":T.modifier,"for while do if else switch try catch finally return throw break continue default case":T.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":T.operatorKeyword,"let var const using function class extends":T.definitionKeyword,"import export from":T.moduleKeyword,"with debugger new":T.keyword,TemplateString:T.special(T.string),super:T.atom,BooleanLiteral:T.bool,this:T.self,null:T.null,Star:T.modifier,VariableName:T.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":T.function(T.variableName),VariableDefinition:T.definition(T.variableName),Label:T.labelName,PropertyName:T.propertyName,PrivatePropertyName:T.special(T.propertyName),"CallExpression/MemberExpression/PropertyName":T.function(T.propertyName),"FunctionDeclaration/VariableDefinition":T.function(T.definition(T.variableName)),"ClassDeclaration/VariableDefinition":T.definition(T.className),"NewExpression/VariableName":T.className,PropertyDefinition:T.definition(T.propertyName),PrivatePropertyDefinition:T.definition(T.special(T.propertyName)),UpdateOp:T.updateOperator,"LineComment Hashbang":T.lineComment,BlockComment:T.blockComment,Number:T.number,String:T.string,Escape:T.escape,ArithOp:T.arithmeticOperator,LogicOp:T.logicOperator,BitOp:T.bitwiseOperator,CompareOp:T.compareOperator,RegExp:T.regexp,Equals:T.definitionOperator,Arrow:T.function(T.punctuation),": Spread":T.punctuation,"( )":T.paren,"[ ]":T.squareBracket,"{ }":T.brace,"InterpolationStart InterpolationEnd":T.special(T.brace),".":T.derefOperator,", ;":T.separator,"@":T.meta,TypeName:T.typeName,TypeDefinition:T.definition(T.typeName),"type enum interface implements namespace module declare":T.definitionKeyword,"abstract global Privacy readonly override":T.modifier,"is keyof unique infer asserts":T.operatorKeyword,JSXAttributeValue:T.attributeValue,JSXText:T.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":T.angleBracket,"JSXIdentifier JSXNameSpacedName":T.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":T.attributeName,"JSXBuiltin/JSXIdentifier":T.standard(T.tagName)}),tce={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,for:474,of:483,while:486,with:490,do:494,if:498,else:500,switch:504,case:510,try:516,catch:520,finally:524,return:528,throw:532,break:536,continue:540,debugger:544},ice={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},nce={__proto__:null,"<":193},sce=gc.deserialize({version:14,states:"$EOQ%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Ik'#IkO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JqO6[Q!0MxO'#JrO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO7eQMhO'#F|O9[Q`O'#F{OOQ!0Lf'#Jr'#JrOOQ!0Lb'#Jq'#JqO9aQ`O'#GwOOQ['#K^'#K^O9lQ`O'#IXO9qQ!0LrO'#IYOOQ['#J_'#J_OOQ['#I^'#I^Q`QlOOQ`QlOOO9yQ!L^O'#DvO:QQlO'#EOO:XQlO'#EQO9gQ`O'#GsO:`QMhO'#CoO:nQ`O'#EnO:yQ`O'#EyO;OQMhO'#FeO;mQ`O'#GsOOQO'#K_'#K_O;rQ`O'#K_O<QQ`O'#G{O<QQ`O'#G|O<QQ`O'#HOO9gQ`O'#HRO<wQ`O'#HUO>`Q`O'#CeO>pQ`O'#HbO>xQ`O'#HhO>xQ`O'#HjO`QlO'#HlO>xQ`O'#HnO>xQ`O'#HqO>}Q`O'#HwO?SQ!0LsO'#H}O%[QlO'#IPO?_Q!0LsO'#IRO?jQ!0LsO'#ITO9qQ!0LrO'#IVO?uQ!0MxO'#CiO@wQpO'#DlQOQ`OOO%[QlO'#EQOA_Q`O'#ETO:`QMhO'#EnOAjQ`O'#EnOAuQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Ju'#JuO%[QlO'#JuOOQO'#Jx'#JxOOQO'#Ig'#IgOBuQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J|'#J|OCqQ!0MSO'#EgOC{QpO'#EWOOQO'#Jw'#JwODaQpO'#JxOEnQpO'#EWOC{QpO'#EgPE{O&2DjO'#CbPOOO)CD|)CD|OOOO'#I_'#I_OFWO#tO,59UOOQ!0Lh,59U,59UOOOO'#I`'#I`OFfO&jO,59UOFtQ!L^O'#DcOOOO'#Ib'#IbOF{O#@ItO,59{OOQ!0Lf,59{,59{OGZQlO'#IcOGnQ`O'#JsOImQ!fO'#JsO+}QlO'#JsOItQ`O,5:ROJ[Q`O'#EpOJiQ`O'#KSOJtQ`O'#KROJtQ`O'#KROJ|Q`O,5;^OKRQ`O'#KQOOQ!0Ln,5:^,5:^OKYQlO,5:^OMWQ!0MxO,5:fOMwQ`O,5:nONbQ!0LrO'#KPONiQ`O'#KOO9aQ`O'#KOON}Q`O'#KOO! VQ`O,5;]O! [Q`O'#KOO!#aQ!fO'#JrOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$PQ!fO,5:sOOQS'#Jy'#JyOOQO-E<i-E<iO9gQ`O,5=_O!$gQ`O,5=_O!$lQlO,5;ZO!&oQMhO'#EkO!(YQ`O,5;ZO!(_QlO'#DyO!(iQpO,5;dO!(qQpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)PQlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IoO!+SQ!0LrO,5<iO%[QlO,5;eO!&oQMhO,5;eO!+qQMhO,5;eO!-cQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-jQ,UO'#FjO!.gQ,UO'#KWO!.RQ,UO'#KWO!.nQ,UO'#KWOOQO'#KW'#KWO!/SQ,UO,5<SOOOW,5<`,5<`O!/eQlO'#FvOOOW'#In'#InO7VO7dO,5<QO!/lQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0]Q$IUO'#CyOOQ!0Lh'#C}'#C}O!0pO#@ItO'#DRO!1^QMjO,5<eO!1eQ`O,5<hO!3QQ(CWO'#GXO!3_Q`O'#GYO!3dQ`O'#GYO!5SQ(CWO'#G^O!6XQpO'#GbOOQO'#Gn'#GnO!+xQMhO'#GmOOQO'#Gp'#GpO!+xQMhO'#GoO!6zQ$IUO'#JkOOQ!0Lh'#Jk'#JkO!7UQ`O'#JjO!7dQ`O'#JiO!7lQ`O'#CuOOQ!0Lh'#C{'#C{O!7}Q`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO1SQ`O'#DZO!+xQMhO'#GPO!+xQMhO'#GRO!8SQ`O'#GTO!8XQ`O'#GUO!3dQ`O'#G[O!+xQMhO'#GaO<QQ`O'#JjO!8^Q`O'#EqO!8{Q`O,5<gOOQ!0Lb'#Cr'#CrO!9TQ`O'#ErO!9}QpO'#EsOOQ!0Lb'#KQ'#KQO!:UQ!0LrO'#K`O9qQ!0LrO,5=cO`QlO,5>sOOQ['#Jg'#JgOOQ[,5>t,5>tOOQ[-E<[-E<[O!<TQ!0MxO,5:bO!9xQpO,5:`O!>nQ!0MxO,5:jO%[QlO,5:jO!AUQ!0MxO,5:lOOQO,5@y,5@yO!AuQMhO,5=_O!BTQ!0LrO'#JhO9[Q`O'#JhO!BfQ!0LrO,59ZO!BqQpO,59ZO!ByQMhO,59ZO:`QMhO,59ZO!CUQ`O,5;ZO!C^Q`O'#HaO!CrQ`O'#KcO%[QlO,5;}O!9xQpO,5<PO!CzQ`O,5=zO!DPQ`O,5=zO!DUQ`O,5=zO9qQ!0LrO,5=zO<QQ`O,5=jOOQO'#Cy'#CyO!DdQpO,5=gO!DlQMhO,5=hO!DwQ`O,5=jO!D|Q!bO,5=mO!EUQ`O'#K_O>}Q`O'#HWO9gQ`O'#HYO!EZQ`O'#HYO:`QMhO'#H[O!E`Q`O'#H[OOQ[,5=p,5=pO!EeQ`O'#H]O!EvQ`O'#CoO!E{Q`O,59PO!FVQ`O,59PO!H[QlO,59POOQ[,59P,59PO!HlQ!0LrO,59PO%[QlO,59PO!JwQlO'#HdOOQ['#He'#HeOOQ['#Hf'#HfO`QlO,5=|O!K_Q`O,5=|O`QlO,5>SO`QlO,5>UO!KdQ`O,5>WO`QlO,5>YO!KiQ`O,5>]O!KnQlO,5>cOOQ[,5>i,5>iO%[QlO,5>iO9qQ!0LrO,5>kOOQ[,5>m,5>mO# xQ`O,5>mOOQ[,5>o,5>oO# xQ`O,5>oOOQ[,5>q,5>qO#!fQpO'#D_O%[QlO'#JuO##XQpO'#JuO##cQpO'#DmO##tQpO'#DmO#&VQlO'#DmO#&^Q`O'#JtO#&fQ`O,5:WO#&kQ`O'#EtO#&yQ`O'#KTO#'RQ`O,5;_O#'WQpO'#DmO#'eQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#'lQ`O,5:oO>}Q`O,5;YO!BqQpO,5;YO!ByQMhO,5;YO:`QMhO,5;YO#'tQ`O,5@aO#'yQ07dO,5:sOOQO-E<e-E<eO#)PQ!0MSO,5;ROC{QpO,5:rO#)ZQpO,5:rOC{QpO,5;RO!BfQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#)hQ!0LrO,5;RO#)sQ!0LrO,5;RO!BqQpO,5:rOOQO,5;X,5;XO#*RQ!0LrO,5;RPOOO'#I]'#I]P#*gO&2DjO,58|POOO,58|,58|OOOO-E<]-E<]OOQ!0Lh1G.p1G.pOOOO-E<^-E<^OOOO,59},59}O#*rQ!bO,59}OOOO-E<`-E<`OOQ!0Lf1G/g1G/gO#*wQ!fO,5>}O+}QlO,5>}OOQO,5?T,5?TO#+RQlO'#IcOOQO-E<a-E<aO#+`Q`O,5@_O#+hQ!fO,5@_O#+oQ`O,5@mOOQ!0Lf1G/m1G/mO%[QlO,5@nO#+wQ`O'#IiOOQO-E<g-E<gO#+oQ`O,5@mOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@kO#,]Q!0LrO,5@kO#,nQ!0LrO,5@kO#,uQ`O,5@jO9aQ`O,5@jO#,}Q`O,5@jO#-]Q`O'#IlO#,uQ`O,5@jOOQ!0Lb1G0w1G0wO!(iQpO,5:uO!(tQpO,5:uOOQS,5:w,5:wO#-}QdO,5:wO#.VQMhO1G2yO9gQ`O1G2yOOQ!0Lf1G0u1G0uO#.eQ!0MxO1G0uO#/jQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0WQ!0MzO'#JkO!$lQlO1G0uO#2cQ!fO'#JvO%[QlO'#JvO#2mQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#2rQ`O1G1OO#5WQ!0MxO1G1PO#5_Q!0MxO1G1PO#7uQ!0MxO1G1PO#7|Q!0MxO1G1PO#:dQ!0MxO1G1PO#<zQ!0MxO1G1PO#=RQ!0MxO1G1PO#=YQ!0MxO1G1PO#?pQ!0MxO1G1PO#?wQ!0MxO1G1PO#BUQ?MtO'#CiO#DPQ?MtO1G1`O#DWQ?MtO'#JrO#DkQ!0MxO,5?ZOOQ!0Lb-E<m-E<mO#FxQ!0MxO1G1PO#GuQ!0MzO1G1POOQ!0Lf1G1P1G1PO#HxQMjO'#J{O#ISQ`O,5:xO#IXQ!0MxO1G1cO#I{Q,UO,5<WO#JTQ,UO,5<XO#J]Q,UO'#FoO#JtQ`O'#FnOOQO'#KX'#KXOOQO'#Im'#ImO#JyQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#K[Q?MtO'#JqO#KfQ`O,5<bO!)PQlO,5<bOOOW-E<l-E<lOOQ!0Lf1G1l1G1lO#KkQpO'#KWOOQ!0Lf,5<d,5<dO#KsQpO,5<dO#KxQMhO'#DTOOOO'#Ia'#IaO#LPO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8XQ`O'#IqO#L[Q`O,5<zOOQ!0Lh,5<w,5<wO!+xQMhO'#ItO#LxQMjO,5=XO!+xQMhO'#IvO#MkQMjO,5=ZO!&oQMhO,5=]OOQO1G2S1G2SO#MuQ!dO'#CrO#NYQ(CWO'#ErO$ _QpO'#GbO$ uQ!dO,5<sO$ |Q`O'#KZO9aQ`O'#KZO$![Q`O,5<uO!+xQMhO,5<tO$!aQ`O'#GZO$!rQ`O,5<tO$!wQ!dO'#GWO$#UQ!dO'#K[O$#`Q`O'#K[O!&oQMhO'#K[O$#eQ`O,5<xO$#jQlO'#JuO$#tQpO'#GcO##tQpO'#GcO$$VQ`O'#GgO!3dQ`O'#GkO$$[Q!0LrO'#IsO$$gQpO,5<|OOQ!0Lp,5<|,5<|O$$nQpO'#GcO$${QpO'#GdO$%^QpO'#GdO$%cQMjO,5=XO$%sQMjO,5=ZOOQ!0Lh,5=^,5=^O!+xQMhO,5@UO!+xQMhO,5@UO$&TQ`O'#IxO$&iQ`O,5@TO$&qQ`O,59aOOQ!0Lh,59i,59iO$'hQ$IYO,59uOOQ!0Lh'#Jo'#JoO$(ZQMjO,5<kO$(|QMjO,5<mO@oQ`O,5<oOOQ!0Lh,5<p,5<pO$)WQ`O,5<vO$)]QMjO,5<{O$)mQ`O,5@UO$){Q`O'#KOO!$lQlO1G2RO$*QQ`O1G2RO9aQ`O'#KRO9aQ`O'#EtO%[QlO'#EtO9aQ`O'#IzO$*VQ!0LrO,5@zOOQ[1G2}1G2}OOQ[1G4_1G4_OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$,XQ!0MxO1G0UOOQ[1G2y1G2yO!&oQMhO1G2yO%[QlO1G2yO#.YQ`O1G2yO$.]QMhO'#EkOOQ!0Lb,5@S,5@SO$.jQ!0LrO,5@SOOQ[1G.u1G.uO!BfQ!0LrO1G.uO!BqQpO1G.uO!ByQMhO1G.uO$.{Q`O1G0uO$/QQ`O'#CiO$/]Q`O'#KdO$/eQ`O,5={O$/jQ`O'#KdO$/oQ`O'#KdO$/}Q`O'#JQO$0]Q`O,5@}O$0eQ!fO1G1iOOQ!0Lf1G1k1G1kO9gQ`O1G3fO@oQ`O1G3fO$0lQ`O1G3fO$0qQ`O1G3fOOQ[1G3f1G3fO!DwQ`O1G3UO!&oQMhO1G3RO$0vQ`O1G3ROOQ[1G3S1G3SO!&oQMhO1G3SO$0{Q`O1G3SO$1TQpO'#HQOOQ[1G3U1G3UO!6SQpO'#I|O!D|Q!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$1]QMhO,5=tO9gQ`O,5=tO$$VQ`O,5=vO9[Q`O,5=vO!BqQpO,5=vO!ByQMhO,5=vO:`QMhO,5=vO$1kQ`O'#KbO$1vQ`O,5=wOOQ[1G.k1G.kO$1{Q!0LrO1G.kO@oQ`O1G.kO$2WQ`O1G.kO9qQ!0LrO1G.kO$4`Q!fO,5APO$4mQ`O,5APO9aQ`O,5APO$4xQlO,5>OO$5PQ`O,5>OOOQ[1G3h1G3hO`QlO1G3hOOQ[1G3n1G3nOOQ[1G3p1G3pO>xQ`O1G3rO$5UQlO1G3tO$9YQlO'#HsOOQ[1G3w1G3wO$9gQ`O'#HyO>}Q`O'#H{OOQ[1G3}1G3}O$9oQlO1G3}O9qQ!0LrO1G4TOOQ[1G4V1G4VOOQ!0Lb'#G_'#G_O9qQ!0LrO1G4XO9qQ!0LrO1G4ZO$=vQ`O,5@aO!)PQlO,5;`O9aQ`O,5;`O>}Q`O,5:XO!)PQlO,5:XO!BqQpO,5:XO$={Q?MtO,5:XOOQO,5;`,5;`O$>VQpO'#IdO$>mQ`O,5@`OOQ!0Lf1G/r1G/rO$>uQpO'#IjO$?PQ`O,5@oOOQ!0Lb1G0y1G0yO##tQpO,5:XOOQO'#If'#IfO$?XQpO,5:qOOQ!0Ln,5:q,5:qO#'oQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO>}Q`O1G0tO!BqQpO1G0tO!ByQMhO1G0tOOQ!0Lb1G5{1G5{O!BfQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$?`Q!0LrO1G0mO$?kQ!0LrO1G0mO!BqQpO1G0^OC{QpO1G0^O$?yQ!0LrO1G0mOOQO1G0^1G0^O$@_Q!0MxO1G0mPOOO-E<Z-E<ZPOOO1G.h1G.hOOOO1G/i1G/iO$@iQ!bO,5<iO$@qQ!fO1G4iOOQO1G4o1G4oO%[QlO,5>}O$@{Q`O1G5yO$ATQ`O1G6XO$A]Q!fO1G6YO9aQ`O,5?TO$AgQ!0MxO1G6VO%[QlO1G6VO$AwQ!0LrO1G6VO$BYQ`O1G6UO$BYQ`O1G6UO9aQ`O1G6UO$BbQ`O,5?WO9aQ`O,5?WOOQO,5?W,5?WO$BvQ`O,5?WO$){Q`O,5?WOOQO-E<j-E<jOOQS1G0a1G0aOOQS1G0c1G0cO#.QQ`O1G0cOOQ[7+(e7+(eO!&oQMhO7+(eO%[QlO7+(eO$CUQ`O7+(eO$CaQMhO7+(eO$CoQ!0MzO,5=XO$EzQ!0MzO,5=ZO$HVQ!0MzO,5=XO$JhQ!0MzO,5=ZO$LyQ!0MzO,59uO% OQ!0MzO,5<kO%#ZQ!0MzO,5<mO%%fQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%'wQ!0MxO7+&aO%(kQlO'#IeO%(xQ`O,5@bO%)QQ!fO,5@bOOQ!0Lf1G0P1G0PO%)[Q`O7+&jOOQ!0Lf7+&j7+&jO%)aQ?MtO,5:fO%[QlO7+&zO%)kQ?MtO,5:bO%)xQ?MtO,5:jO%*SQ?MtO,5:lO%*^QMhO'#IhO%*hQ`O,5@gOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%*pQ!jO,5<ZO!)PQlO,5<YOOQO-E<k-E<kOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%*{Q`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%+QQ!dO,59oOOOO-E<_-E<_OOQ!0Lh1G/X1G/XO%+XQ!0MxO7+'kOOQ!0Lh,5?],5?]O%+{QMhO1G2fP%,SQ`O'#IqPOQ!0Lh-E<o-E<oO%,pQMjO,5?`OOQ!0Lh-E<r-E<rO%-cQMjO,5?bOOQ!0Lh-E<t-E<tO%-mQ!dO1G2wO%-tQ!dO'#CrO%.[QMhO'#KRO$#jQlO'#JuOOQ!0Lh1G2_1G2_O%.cQ`O'#IpO%.wQ`O,5@uO%.wQ`O,5@uO%/PQ`O,5@uO%/[Q`O,5@uOOQO1G2a1G2aO%/jQMjO1G2`O!+xQMhO1G2`O%/zQ(CWO'#IrO%0XQ`O,5@vO!&oQMhO,5@vO%0aQ!dO,5@vOOQ!0Lh1G2d1G2dO%2qQ!fO'#CiO%2{Q`O,5=POOQ!0Lb,5<},5<}O%3TQpO,5<}OOQ!0Lb,5=O,5=OOClQ`O,5<}O%3`QpO,5<}OOQ!0Lb,5=R,5=RO$){Q`O,5=VOOQO,5?_,5?_OOQO-E<q-E<qOOQ!0Lp1G2h1G2hO##tQpO,5<}O$#jQlO,5=PO%3nQ`O,5=OO%3yQpO,5=OO!+xQMhO'#ItO%4sQMjO1G2sO!+xQMhO'#IvO%5fQMjO1G2uO%5pQMjO1G5pO%5zQMjO1G5pOOQO,5?d,5?dOOQO-E<v-E<vOOQO1G.{1G.{O!9xQpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%6XQ`O1G2ZO!+xQMhO1G2bO!+xQMhO1G5pO!+xQMhO1G5pO%6^Q!0MxO7+'mOOQ!0Lf7+'m7+'mO!$lQlO7+'mO%7QQ`O,5;`OOQ!0Lb,5?f,5?fOOQ!0Lb-E<x-E<xO%7VQ!dO'#K]O#'oQ`O7+(eO4UQ!fO7+(eO$CXQ`O7+(eO%7aQ!0MvO'#CiO%7tQ!0MvO,5=SO%8fQ`O,5=SO%8nQ`O,5=SOOQ!0Lb1G5n1G5nOOQ[7+$a7+$aO!BfQ!0LrO7+$aO!BqQpO7+$aO!$lQlO7+&aO%8sQ`O'#JPO%9[Q`O,5AOOOQO1G3g1G3gO9gQ`O,5AOO%9[Q`O,5AOO%9dQ`O,5AOOOQO,5?l,5?lOOQO-E=O-E=OOOQ!0Lf7+'T7+'TO%9iQ`O7+)QO9qQ!0LrO7+)QO9gQ`O7+)QO@oQ`O7+)QOOQ[7+(p7+(pO%9nQ!0MvO7+(mO!&oQMhO7+(mO!DrQ`O7+(nOOQ[7+(n7+(nO!&oQMhO7+(nO%9xQ`O'#KaO%:TQ`O,5=lOOQO,5?h,5?hOOQO-E<z-E<zOOQ[7+(s7+(sO%;gQpO'#HZOOQ[1G3`1G3`O!&oQMhO1G3`O%[QlO1G3`O%;nQ`O1G3`O%;yQMhO1G3`O9qQ!0LrO1G3bO$$VQ`O1G3bO9[Q`O1G3bO!BqQpO1G3bO!ByQMhO1G3bO%<XQ`O'#JOO%<mQ`O,5@|O%<uQpO,5@|OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@oQ`O7+$VO9qQ!0LrO7+$VO%=QQ`O7+$VO%[QlO1G6kO%[QlO1G6lO%=VQ!0LrO1G6kO%=aQlO1G3jO%=hQ`O1G3jO%=mQlO1G3jOOQ[7+)S7+)SO9qQ!0LrO7+)^O`QlO7+)`OOQ['#Kg'#KgOOQ['#JR'#JRO%=tQlO,5>_OOQ[,5>_,5>_O%[QlO'#HtO%>RQ`O'#HvOOQ[,5>e,5>eO9aQ`O,5>eOOQ[,5>g,5>gOOQ[7+)i7+)iOOQ[7+)o7+)oOOQ[7+)s7+)sOOQ[7+)u7+)uO%>WQpO1G5{O%>rQ?MtO1G0zO%>|Q`O1G0zOOQO1G/s1G/sO%?XQ?MtO1G/sO>}Q`O1G/sO!)PQlO'#DmOOQO,5?O,5?OOOQO-E<b-E<bOOQO,5?U,5?UOOQO-E<h-E<hO!BqQpO1G/sOOQO-E<d-E<dOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#'oQ`O7+%uOOQ!0Lf7+&`7+&`O>}Q`O7+&`O!BqQpO7+&`OOQO7+%x7+%xO$@_Q!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%?cQ!0LrO7+&XO!BfQ!0LrO7+%xO!BqQpO7+%xO%?nQ!0LrO7+&XO%?|Q!0MxO7++qO%[QlO7++qO%@^Q`O7++pO%@^Q`O7++pOOQO1G4r1G4rO9aQ`O1G4rO%@fQ`O1G4rOOQS7+%}7+%}O#'oQ`O<<LPO4UQ!fO<<LPO%@tQ`O<<LPOOQ[<<LP<<LPO!&oQMhO<<LPO%[QlO<<LPO%@|Q`O<<LPO%AXQ!0MzO,5?`O%CdQ!0MzO,5?bO%EoQ!0MzO1G2`O%HQQ!0MzO1G2sO%J]Q!0MzO1G2uO%LhQ!fO,5?PO%[QlO,5?POOQO-E<c-E<cO%LrQ`O1G5|OOQ!0Lf<<JU<<JUO%LzQ?MtO1G0uO& RQ?MtO1G1PO& YQ?MtO1G1PO&#ZQ?MtO1G1PO&#bQ?MtO1G1PO&%cQ?MtO1G1PO&'dQ?MtO1G1PO&'kQ?MtO1G1PO&'rQ?MtO1G1PO&)sQ?MtO1G1PO&)zQ?MtO1G1PO&*RQ!0MxO<<JfO&+yQ?MtO1G1PO&,vQ?MvO1G1PO&-yQ?MvO'#JkO&0PQ?MtO1G1cO&0^Q?MtO1G0UO&0hQMjO,5?SOOQO-E<f-E<fO!)PQlO'#FqOOQO'#KY'#KYOOQO1G1u1G1uO&0rQ`O1G1tO&0wQ?MtO,5?ZOOOW7+'h7+'hOOOO1G/Z1G/ZO&1RQ!dO1G4wOOQ!0Lh7+(Q7+(QP!&oQMhO,5?]O!+xQMhO7+(cO&1YQ`O,5?[O9aQ`O,5?[OOQO-E<n-E<nO&1hQ`O1G6aO&1hQ`O1G6aO&1pQ`O1G6aO&1{QMjO7+'zO&2]Q!dO,5?^O&2gQ`O,5?^O!&oQMhO,5?^OOQO-E<p-E<pO&2lQ!dO1G6bO&2vQ`O1G6bO&3OQ`O1G2kO!&oQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%3TQpO1G2iO!BqQpO1G2iOClQ`O1G2iOOQ!0Lb1G2q1G2qO&3TQpO1G2iO&3cQ`O1G2kO$){Q`O1G2jOClQ`O1G2jO$#jQlO1G2kO&3kQ`O1G2jO&4_QMjO,5?`OOQ!0Lh-E<s-E<sO&5QQMjO,5?bOOQ!0Lh-E<u-E<uO!+xQMhO7++[OOQ!0Lh1G/c1G/cO&5[Q`O1G/cOOQ!0Lh7+'u7+'uO&5aQMjO7+'|O&5qQMjO7++[O&5{QMjO7++[O&6YQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&6|Q`O1G0zO!&oQMhO'#IyO&7RQ`O,5@wO&9TQ!fO<<LPO!&oQMhO1G2nO&9[Q!0LrO1G2nOOQ[<<G{<<G{O!BfQ!0LrO<<G{O&9mQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?k,5?kO&:aQ`O,5?kO&:fQ`O,5?kOOQO-E<}-E<}O&:tQ`O1G6jO&:tQ`O1G6jO9gQ`O1G6jO@oQ`O<<LlOOQ[<<Ll<<LlO&:|Q`O<<LlO9qQ!0LrO<<LlOOQ[<<LX<<LXO%9nQ!0MvO<<LXOOQ[<<LY<<LYO!DrQ`O<<LYO&;RQpO'#I{O&;^Q`O,5@{O!)PQlO,5@{OOQ[1G3W1G3WOOQO'#I}'#I}O9qQ!0LrO'#I}O&;fQpO,5=uOOQ[,5=u,5=uO&;mQpO'#EgO&;tQpO'#GeO&;yQ`O7+(zO&<OQ`O7+(zOOQ[7+(z7+(zO!&oQMhO7+(zO%[QlO7+(zO&<WQ`O7+(zOOQ[7+(|7+(|O9qQ!0LrO7+(|O$$VQ`O7+(|O9[Q`O7+(|O!BqQpO7+(|O&<cQ`O,5?jOOQO-E<|-E<|OOQO'#H^'#H^O&<nQ`O1G6hO9qQ!0LrO<<GqOOQ[<<Gq<<GqO@oQ`O<<GqO&<vQ`O7+,VO&<{Q`O7+,WO%[QlO7+,VO%[QlO7+,WOOQ[7+)U7+)UO&=QQ`O7+)UO&=VQlO7+)UO&=^Q`O7+)UOOQ[<<Lx<<LxOOQ[<<Lz<<LzOOQ[-E=P-E=POOQ[1G3y1G3yO&=cQ`O,5>`OOQ[,5>b,5>bO&=hQ`O1G4PO9aQ`O7+&fO!)PQlO7+&fOOQO7+%_7+%_O&=mQ?MtO1G6YO>}Q`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO>}Q`O<<IzOOQO<<Is<<IsO$@_Q!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!BfQ!0LrO<<IdO&=wQ!0LrO<<IsO&>SQ!0MxO<= ]O&>dQ`O<= [OOQO7+*^7+*^O9aQ`O7+*^OOQ[ANAkANAkO&>lQ!fOANAkO!&oQMhOANAkO#'oQ`OANAkO4UQ!fOANAkO&>sQ`OANAkO%[QlOANAkO&>{Q!0MzO7+'zO&A^Q!0MzO,5?`O&CiQ!0MzO,5?bO&EtQ!0MzO7+'|O&HVQ!fO1G4kO&HaQ?MtO7+&aO&JeQ?MvO,5=XO&LlQ?MvO,5=ZO&L|Q?MvO,5=XO&M^Q?MvO,5=ZO&MnQ?MvO,59uO' tQ?MvO,5<kO'#wQ?MvO,5<mO'&]Q?MvO,5<{O'(RQ?MtO7+'kO'(`Q?MtO7+'mO'(mQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*c7+*cO'(rQMjO<<K}OOQO1G4v1G4vO'(yQ`O1G4vO')UQ`O1G4vO')dQ`O7++{O')dQ`O7++{O!&oQMhO1G4xO')lQ!dO1G4xO')vQ`O7++|O'*OQ`O7+(VO'*ZQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!BqQpO7+(TOClQ`O7+(TO'*eQ`O7+(VO!&oQMhO7+(VO$){Q`O7+(UO'*jQ`O7+(VOClQ`O7+(UO'*rQMjO<<NvOOQ!0Lh7+$}7+$}O!+xQMhO<<NvO'*|Q!dO,5?eOOQO-E<w-E<wO'+WQ!0MvO7+(YO!&oQMhO7+(YOOQ[AN=gAN=gO9gQ`O1G5VOOQO1G5V1G5VO'+hQ`O1G5VO'+mQ`O7+,UO'+mQ`O7+,UO9qQ!0LrOANBWO@oQ`OANBWOOQ[ANBWANBWOOQ[ANAsANAsOOQ[ANAtANAtO'+uQ`O,5?gOOQO-E<y-E<yO',QQ?MtO1G6gOOQO,5?i,5?iOOQO-E<{-E<{OOQ[1G3a1G3aO',[Q`O,5=POOQ[<<Lf<<LfO!&oQMhO<<LfO&;yQ`O<<LfO',aQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9qQ!0LrO<<LhO$$VQ`O<<LhO9[Q`O<<LhO',iQpO1G5UO',tQ`O7+,SOOQ[AN=]AN=]O9qQ!0LrOAN=]OOQ[<= q<= qOOQ[<= r<= rO',|Q`O<= qO'-RQ`O<= rOOQ[<<Lp<<LpO'-WQ`O<<LpO'-]QlO<<LpOOQ[1G3z1G3zO>}Q`O7+)kO'-dQ`O<<JQO'-oQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$@_Q!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<Mx<<MxOOQ[G27VG27VO!&oQMhOG27VO#'oQ`OG27VO'-yQ!fOG27VO4UQ!fOG27VO'.QQ`OG27VO'.YQ?MtO<<JfO'.gQ?MvO1G2`O'0]Q?MvO,5?`O'2`Q?MvO,5?bO'4cQ?MvO1G2sO'6fQ?MvO1G2uO'8iQ?MtO<<KXO'8vQ?MtO<<I{OOQO1G1w1G1wO!+xQMhOANAiOOQO7+*b7+*bO'9TQ`O7+*bO'9`Q`O<= gO'9hQ!dO7+*dOOQ!0Lb<<Kq<<KqO$){Q`O<<KqOClQ`O<<KqO'9rQ`O<<KqO!&oQMhO<<KqOOQ!0Lb<<Ko<<KoO!BqQpO<<KoO'9}Q!dO<<KqOOQ!0Lb<<Kp<<KpO':XQ`O<<KqO!&oQMhO<<KqO$){Q`O<<KpO':^QMjOANDbO':hQ!0MvO<<KtOOQO7+*q7+*qO9gQ`O7+*qO':xQ`O<= pOOQ[G27rG27rO9qQ!0LrOG27rO!)PQlO1G5RO';QQ`O7+,RO';YQ`O1G2kO&;yQ`OANBQOOQ[ANBQANBQO!&oQMhOANBQO';_Q`OANBQOOQ[ANBSANBSO9qQ!0LrOANBSO$$VQ`OANBSOOQO'#H_'#H_OOQO7+*p7+*pOOQ[G22wG22wOOQ[ANE]ANE]OOQ[ANE^ANE^OOQ[ANB[ANB[O';gQ`OANB[OOQ[<<MV<<MVO!)PQlOAN?lOOQOG24yG24yO$@_Q!0MxOG24yO#'oQ`OLD,qOOQ[LD,qLD,qO!&oQMhOLD,qO';lQ!fOLD,qO';sQ?MvO7+'zO'=iQ?MvO,5?`O'?lQ?MvO,5?bO'AoQ?MvO7+'|O'CeQMjOG27TOOQO<<M|<<M|OOQ!0LbANA]ANA]O$){Q`OANA]OClQ`OANA]O'CuQ!dOANA]OOQ!0LbANAZANAZO'C|Q`OANA]O!&oQMhOANA]O'DXQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N]<<N]OOQ[LD-^LD-^O'DcQ?MtO7+*mOOQO'#Gf'#GfOOQ[G27lG27lO&;yQ`OG27lO!&oQMhOG27lOOQ[G27nG27nO9qQ!0LrOG27nOOQ[G27vG27vO'DmQ?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#'oQ`O!$(!]O!&oQMhO!$(!]O'DwQ!0MzOG27TOOQ!0LbG26wG26wO$){Q`OG26wO'GYQ`OG26wOClQ`OG26wO'GeQ!dOG26wO!&oQMhOG26wOOQ[LD-WLD-WO&;yQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#'oQ`O!)9EwOOQ!0LbLD,cLD,cO$){Q`OLD,cOClQ`OLD,cO'GlQ`OLD,cO'GwQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'HOQ?MvOG27TOOQ!0Lb!$( }!$( }O$){Q`O!$( }OClQ`O!$( }O'ItQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$){Q`O!)9EiOClQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$){Q`O!.K;TOOQ!0Lb!4/0o!4/0oO!)PQlO'#DzO1PQ`O'#EXO'JPQ!fO'#JqO'JWQ!L^O'#DvO'J_QlO'#EOO'JfQ!fO'#CiO'L|Q!fO'#CiO!)PQlO'#EQO'M^QlO,5;ZO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO'#IoO( aQ`O,5<iO!)PQlO,5;eO( iQMhO,5;eO(#SQMhO,5;eO!)PQlO,5;wO!&oQMhO'#GmO( iQMhO'#GmO!&oQMhO'#GoO( iQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&oQMhO'#GPO( iQMhO'#GPO!&oQMhO'#GRO( iQMhO'#GRO!&oQMhO'#GaO( iQMhO'#GaO!)PQlO,5:jO(#ZQpO'#D_O(#eQpO'#JuO!)PQlO,5@nO'M^QlO1G0uO(#oQ?MtO'#CiO!)PQlO1G2PO!&oQMhO'#ItO( iQMhO'#ItO!&oQMhO'#IvO( iQMhO'#IvO(#yQ!dO'#CrO!&oQMhO,5<tO( iQMhO,5<tO'M^QlO1G2RO!)PQlO7+&zO!&oQMhO1G2`O( iQMhO1G2`O!&oQMhO'#ItO( iQMhO'#ItO!&oQMhO'#IvO( iQMhO'#IvO!&oQMhO1G2bO( iQMhO1G2bO'M^QlO7+'mO'M^QlO7+&aO!&oQMhOANAiO( iQMhOANAiO($^Q`O'#EoO($cQ`O'#EoO($kQ`O'#F]O($pQ`O'#EyO($uQ`O'#KSO(%QQ`O'#KQO(%]Q`O,5;ZO(%bQMjO,5<eO(%iQ`O'#GYO(%nQ`O'#GYO(%sQ`O,5<gO(%{Q`O,5;ZO(&TQ?MtO1G1`O(&[Q`O,5<tO(&aQ`O,5<tO(&fQ`O,5<vO(&kQ`O,5<vO(&pQ`O1G2RO(&uQ`O1G0uO(&zQMjO<<K}O('RQMjO<<K}O7eQMhO'#F|O9[Q`O'#F{OAjQ`O'#EnO!)PQlO,5;tO!3dQ`O'#GYO!3dQ`O'#GYO!3dQ`O'#G[O!3dQ`O'#G[O!+xQMhO7+(cO!+xQMhO7+(cO%-mQ!dO1G2wO%-mQ!dO1G2wO!&oQMhO,5=]O!&oQMhO,5=]",stateData:"((X~O'{OS'|OSTOS'}RQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&V!WO&]!XO&_!YO&a!ZO&c![O&f!]O&l!^O&r!_O&t!`O&v!aO&x!bO&z!cO(SSO(UTO(XUO(`VO(n[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|;wO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(T!lO(UTO(XUO(d!mO(n!sO~O'}!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'y]X(`]X(q]X(x]X(y]X~O!g%RX~P(qO_!}O(U#PO(V!}O(W#PO~O_#QO(W#PO(X#PO(Y#QO~Ox#SO!U#TO(a#TO(b#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S;{O(UTO(XUO(`VO(n[O~O![#ZO!]#WO!Y(gP!Y(uP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(UTO(XUO(`VO(n[O~Op#mO![#iO!|]O#i#lO#j#iO(S;|O!k(rP~P.iO!l#oO(S#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~Oa(eX'y(eX'v(eX!k(eX!Y(eX!_(eX%i(eX!g(eX~P1qO#S$dO#`$eO$Q$eOP(fXR(fX[(fXj(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX!_(fX%i(fX~Oa(fX'y(fX'v(fX!Y(fX!k(fXv(fX!g(fX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%cOk%cOl%cOp%WOr%XOs$tOt$tOz%YO|%ZO!O%[O!S${O!_$|O!i%aO!l$xO#j%bO$W%_O$t%]O$v%^O$y%`O(S$sO(UTO(XUO(`$uO(x$}O(y%POg(]P~O!l%dO~O!S%gO!_%hO(S%fO~O!g%lO~Oa%mO'y%mO~O!Q%qO~P%[O(T!lO~P%[O%n%uO~P%[Oh%VO!l%dO(S%fO(T!lO~Oe%|O!l%dO(S%fO~Oj$RO~O!Q&RO!_&OO!l&QO%j&UO(S%fO(T!lO(UTO(XUO`)VP~O!x#sO~O%s&WO!S)RX!_)RX(S)RX~O(S&XO~Ol!PO!u&^O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&cOe&bO!x&`O%h&aO%{&_O~P<VOd&fOeyOl!PO!_&eO!u&^O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&iO#`&lO%j&gO(T!lO~P=[O!l&mO!u&qO~O!l#oO~O!_XO~Oa%mO'w&yO'y%mO~Oa%mO'w&|O'y%mO~Oa%mO'w'OO'y%mO~O'v]X!Y]Xv]X!k]X&Z]X!_]X%i]X!g]X~P(qO!b']O!c'UO!d'UO(T!lO(UTO(XUO~Os'SO!S'RO!['VO(d'QO!^(hP!^(wP~P@cOn'`O!_'^O(S%fO~Oe'eO!l%dO(S%fO~O!Q&RO!l&QO~Os!nO!S!oO!|;wO#T!pO#U!pO#W!pO#X!pO(T!lO(UTO(XUO(d!mO(n!sO~O!b'kO!c'jO!d'jO#V!pO#['lO#]'lO~PA}Oa%mOh%VO!g#vO!l%dO'y%mO(q'nO~O!p'rO#`'pO~PC]Os!nO!S!oO(UTO(XUO(d!mO(n!sO~O!_XOs(lX!S(lX!b(lX!c(lX!d(lX!|(lX#T(lX#U(lX#V(lX#W(lX#X(lX#[(lX#](lX(T(lX(U(lX(X(lX(d(lX(n(lX~O!c'jO!d'jO(T!lO~PC{O(O'vO(P'vO(Q'xO~O_!}O(U'zO(V!}O(W'zO~O_#QO(W'zO(X'zO(Y#QO~Ov'|O~P%[Ox#SO!U#TO(a#TO(b(PO~O![(RO!Y'VX!Y']X!]'VX!]']X~P+}O!](TO!Y(gX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](TO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~O!Y(gX~PGvO!Y(YO~O!Y(tX!](tX!g(tX!k(tX(q(tX~O#`(tX#k#dX!^(tX~PIyO#`(ZO!Y(vX!](vX~O!]([O!Y(uX~O!Y(_O~O#`$eO~PIyO!^(`O~P`OR#zO!Q#yO!S#{O!l#xO(`VOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(q!na(x!na(y!na~Oa!na'y!na'v!na!Y!na!k!nav!na!_!na%i!na!g!na~PKaO!k(aO~O!g#vO#`(bO(q'nO!](sXa(sX'y(sX~O!k(sX~PM|O!S%gO!_%hO!|]O#i(gO#j(fO(S%fO~O!](hO!k(rX~O!k(jO~O!S%gO!_%hO#j(fO(S%fO~OP(fXR(fX[(fXj(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX~O!g#vO!k(fX~P! jOR(lO!Q(kO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(S!{a~P!#kO!x(pO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~O#k(vO~O![(xO!k(jP~P%[O(d(zO(n[O~O!S(|O!l#xO(d(zO(n[O~OP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_!eO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(S)ZO(UTO(XUO(`VO(n[O~O!]$_Oa$qa'y$qa'v$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)bO~P!&oOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%[O!S${O!_$|O!i%aO!l$xO#j%bO$W%_O$t%]O$v%^O$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~Og(oP~P!+xO!Q)gO!g)fO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)fO!_(zX$Z(zX$](zX$_(zX$f(zX~O!Q)gO~P!.RO!Q)gO!_(zX$Z(zX$](zX$_(zX$f(zX~O!_)iO$Z)mO$])hO$_)hO$f)nO~O![)qO~P!)PO$]$hO$_$gO$f)uO~On$zX!Q$zX#S$zX'x$zX(x$zX(y$zX~OgmXg$zXnmX!]mX#`mX~P!/wOx)wO(a)xO(b)zO~On*TO!Q)|O'x)}O(x$}O(y%PO~Og){O~P!0{Og*UO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S*WO!_*XO!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(UTO(XUO(`$uO(x$}O(y%PO~O![*[O(S*VO!k(}P~P!1jO#k*^O~O!l*_O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(S*aO(UTO(XUO(`$uO(x$}O(y%PO~O![*dO!Y)OP~P!3iOr*pOs!nO!S*fO!b*nO!c*hO!d*hO!l*_O#[*oO%`*jO(T!lO(UTO(XUO(d!mO~O!^*mO~P!5^O#S$dOn(_X!Q(_X'x(_X(x(_X(y(_X!](_X#`(_X~Og(_X$O(_X~P!6`On*uO#`*tOg(^X!](^X~O!]*vOg(]X~Oj%cOk%cOl%cO(S&XOg(]P~Os*yO~O!l+OO~O(S(tO~Op+TO!S%gO![#iO!_%hO!|]O#i#lO#j#iO(S%fO!k(rP~O!g#vO#k+UO~O!S%gO![+WO!]([O!_%hO(S%fO!Y(uP~Os'YO!S+YO![+XO(UTO(XUO(d(zO~O!^(wP~P!9iO!]+ZOa)SX'y)SX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~Oa!ja!]!ja'y!ja'v!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:aOR#zO!Q#yO!S#{O!l#xO(`VOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(q!ra(x!ra(y!ra~Oa!ra'y!ra'v!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!<wOR#zO!Q#yO!S#{O!l#xO(`VOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(q!ta(x!ta(y!ta~Oa!ta'y!ta'v!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?_Oh%VOn+dO!_'^O%i+cO~O!g+fOa([X!_([X'y([X!]([X~Oa%mO!_XO'y%mO~Oh%VO!l%dO~Oh%VO!l%dO(S%fO~O!g#vO#k(vO~Ob+qO%j+rO(S+nO(UTO(XUO!^)WP~O!]+sO`)VX~O[+wO~O`+xO~O!_&OO(S%fO(T!lO`)VP~Oh%VO#`+}O~Oh%VOn,QO!_$|O~O!_,SO~O!Q,UO!_XO~O%n%uO~O!x,ZO~Oe,`O~Ob,aO(S#nO(UTO(XUO!^)UP~Oe%|O~O%j!QO(S&XO~P=[O[,fO`,eO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(UTO(XUO(`VO(n[O~O!_!eO!u!gO$W!kO(S!dO~P!F_O`,eOa%mO'y%mO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oa,kOl!OO!uwO%l!OO%m!OO%n!OO~P!HwO!l&mO~O&],qO~O!_,sO~O&n,uO&p,vOP&kaQ&kaS&kaY&kaa&kad&kae&kal&kap&kar&kas&kat&kaz&ka|&ka!O&ka!S&ka!W&ka!X&ka!_&ka!i&ka!l&ka!o&ka!p&ka!q&ka!s&ka!u&ka!x&ka!|&ka$W&ka$n&ka%h&ka%j&ka%l&ka%m&ka%n&ka%q&ka%s&ka%v&ka%w&ka%y&ka&V&ka&]&ka&_&ka&a&ka&c&ka&f&ka&l&ka&r&ka&t&ka&v&ka&x&ka&z&ka'v&ka(S&ka(U&ka(X&ka(`&ka(n&ka!^&ka&d&kab&ka&i&ka~O(S,{O~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P# }O!g-QO#`-POh(iX!]#hX!^#hX!g(iX!l(iX~O!](iX!^(iX~P#!pOh%VO!g-SO!l%dO!]!aX!^!aX~Os!nO!S!oO(UTO(XUO(d!mO~OP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_!eO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(UTO(XUO(`VO(n[O~O(S<rO~P#$VO!]-WO!^(hX~O!^-YO~O!g-QO#`-PO!]#hX!^#hX~O!]-ZO!^(wX~O!^-]O~O!c-^O!d-^O(T!lO~P##tO!^-aO~P'_On-dO!_'^O~O!Y-iO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(T!{a(U!{a(X!{a(d!{a(n!{a~P!#kO!p-nO#`-lO~PC]O!c-pO!d-pO(T!lO~PC{Oa%mO#`-lO'y%mO~Oa%mO!g#vO#`-lO'y%mO~Oa%mO!g#vO!p-nO#`-lO'y%mO(q'nO~O(O'vO(P'vO(Q-uO~Ov-vO~O!Y'Va!]'Va~P!:aO![-zO!Y'VX!]'VX~P%[O!](TO!Y(ga~O!Y(ga~PGvO!]([O!Y(ua~O!S%gO![.OO!_%hO(S%fO!Y']X!]']X~O#`.QO!](sa!k(saa(sa'y(sa~O!g#vO~P#,]O!](hO!k(ra~O!S%gO!_%hO#j.UO(S%fO~Op.ZO!S%gO![.WO!_%hO!|]O#i.YO#j.WO(S%fO!]'`X!k'`X~OR._O!l#xO~Oh%VOn.bO!_'^O%i.aO~Oa#ci!]#ci'y#ci'v#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:aOn=|O!Q)|O'x)}O(x$}O(y%PO~O#k#_aa#_a#`#_a'y#_a!]#_a!k#_a!_#_a!Y#_a~P#/XO#k(_XP(_XR(_X[(_Xa(_Xj(_Xr(_X!S(_X!l(_X!p(_X#R(_X#n(_X#o(_X#p(_X#q(_X#r(_X#s(_X#t(_X#u(_X#v(_X#x(_X#z(_X#{(_X'y(_X(`(_X(q(_X!k(_X!Y(_X'v(_Xv(_X!_(_X%i(_X!g(_X~P!6`O!].oO!k(jX~P!:aO!k.rO~O!Y.tO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(`VO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#2wO#n$OO~P#2wOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(`VO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#5fO#r$QO~P#5fOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(`VOa#mi!]#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8TOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(`VO(y#}Oa#mi!]#mi#z#mi#{#mi'y#mi(q#mi(x#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#:kO#x#mi~P#:kO#v$SO~P#8TOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(`VO(x#|O(y#}Oa#mi!]#mi#{#mi'y#mi(q#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#=aO#z$WO~P#=aOP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X!]]X!^]X~O$O]X~P#@OOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO#x<VO#z<XO#{<YO(`VO(q$YO(x#|O(y#}O~O$O.vO~P#B]O#S$dO#`<`O$Q<`O$O(fX!^(fX~P! jOa'ca!]'ca'y'ca'v'ca!k'ca!Y'cav'ca!_'ca%i'ca!g'ca~P!:aO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(`VO(x#mi(y#mi~P#E_On=|O!Q)|O'x)}O(x$}O(y%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(`#mi~P#E_O!].zOg(oX~P!0{Og.|O~Oa$Pi!]$Pi'y$Pi'v$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:aO$].}O$_.}O~O$]/OO$_/OO~O!g)fO#`/PO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/QO~O!_)iO$Z/SO$])hO$_)hO$f/TO~O!]<ZO!^(eX~P#B]O!^/UO~O!g)fO$f(zX~O$f/WO~Ov/XO~P!&oOx)wO(a)xO(b/[O~O!S/_O~O(x$}On%aa!Q%aa'x%aa(y%aa!]%aa#`%aa~Og%aa$O%aa~P#LaO(y%POn%ca!Q%ca'x%ca(x%ca!]%ca#`%ca~Og%ca$O%ca~P#MSO!]fX!gfX!kfX!k$zX(qfX~P!/wO![/hO!]([O(S/gO!Y(uP!Y)OP~P!1jOr*pO!b*nO!c*hO!d*hO!l*_O#[*oO%`*jO(T!lO(UTO(XUO~Os<oO!S/iO![+XO!^*mO(d<nO!^(wP~P#NmO!k/jO~P#/XO!]/kO!g#vO(q'nO!k(}X~O!k/pO~O!S%gO![*[O!_%hO(S%fO!k(}P~O#k/rO~O!Y$zX!]$zX!g%RX~P!/wO!]/sO!Y)OX~P#/XO!g/uO~O!Y/wO~OpkO(S/xO~P.iOh%VOr/}O!g#vO!l%dO(q'nO~O!g+fO~Oa%mO!]0RO'y%mO~O!^0TO~P!5^O!c0UO!d0UO(T!lO~P##tOs!nO!S0VO(UTO(XUO(d!mO~O#[0XO~Og%aa!]%aa#`%aa$O%aa~P!0{Og%ca!]%ca#`%ca$O%ca~P!0{Oj%cOk%cOl%cO(S&XOg'lX!]'lX~O!]*vOg(]a~Og0bO~OR0cO!Q0cO!S0dO#S$dOn}a'x}a(x}a(y}a!]}a#`}a~Og}a$O}a~P$&vO!Q)|O'x)}On$sa(x$sa(y$sa!]$sa#`$sa~Og$sa$O$sa~P$'rO!Q)|O'x)}On$ua(x$ua(y$ua!]$ua#`$ua~Og$ua$O$ua~P$(eO#k0gO~Og%Ta!]%Ta#`%Ta$O%Ta~P!0{On0iO#`0hOg(^a!](^a~O!g#vO~O#k0lO~O!]+ZOa)Sa'y)Sa~OR#zO!Q#yO!S#{O!l#xO(`VOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(q!ri(x!ri(y!ri~Oa!ri'y!ri'v!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$*bOh%VOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(UTO(XUO(`$uO(x$}O(y%PO~Op0uO%]0vO(S0tO~P$,xO!g+fOa([a!_([a'y([a!]([a~O#k0|O~O[]X!]fX!^fX~O!]0}O!^)WX~O!^1PO~O[1QO~Ob1SO(S+nO(UTO(XUO~O!_&OO(S%fO`'tX!]'tX~O!]+sO`)Va~O!k1VO~P!:aO[1YO~O`1ZO~O#`1^O~On1aO!_$|O~O(d(zO!^)TP~Oh%VOn1jO!_1gO%i1iO~O[1tO!]1rO!^)UX~O!^1uO~O`1wOa%mO'y%mO~O(S#nO(UTO(XUO~O#S$dO#`$eO$Q$eOP(fXR(fX[(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX~Oj1zO&Z1{Oa(fX~P$2cOj1zO#`$eO&Z1{O~Oa1}O~P%[Oa2PO~O&d2SOP&biQ&biS&biY&bia&bid&bie&bil&bip&bir&bis&bit&biz&bi|&bi!O&bi!S&bi!W&bi!X&bi!_&bi!i&bi!l&bi!o&bi!p&bi!q&bi!s&bi!u&bi!x&bi!|&bi$W&bi$n&bi%h&bi%j&bi%l&bi%m&bi%n&bi%q&bi%s&bi%v&bi%w&bi%y&bi&V&bi&]&bi&_&bi&a&bi&c&bi&f&bi&l&bi&r&bi&t&bi&v&bi&x&bi&z&bi'v&bi(S&bi(U&bi(X&bi(`&bi(n&bi!^&bib&bi&i&bi~Ob2YO!^2WO&i2XO~P`O!_XO!l2[O~O&p,vOP&kiQ&kiS&kiY&kia&kid&kie&kil&kip&kir&kis&kit&kiz&ki|&ki!O&ki!S&ki!W&ki!X&ki!_&ki!i&ki!l&ki!o&ki!p&ki!q&ki!s&ki!u&ki!x&ki!|&ki$W&ki$n&ki%h&ki%j&ki%l&ki%m&ki%n&ki%q&ki%s&ki%v&ki%w&ki%y&ki&V&ki&]&ki&_&ki&a&ki&c&ki&f&ki&l&ki&r&ki&t&ki&v&ki&x&ki&z&ki'v&ki(S&ki(U&ki(X&ki(`&ki(n&ki!^&ki&d&kib&ki&i&ki~O!Y2bO~O!]!aa!^!aa~P#B]Os!nO!S!oO![2hO(d!mO!]'WX!^'WX~P@cO!]-WO!^(ha~O!]'^X!^'^X~P!9iO!]-ZO!^(wa~O!^2oO~P'_Oa%mO#`2xO'y%mO~Oa%mO!g#vO#`2xO'y%mO~Oa%mO!g#vO!p2|O#`2xO'y%mO(q'nO~Oa%mO'y%mO~P!:aO!]$_Ov$qa~O!Y'Vi!]'Vi~P!:aO!](TO!Y(gi~O!]([O!Y(ui~O!Y(vi!](vi~P!:aO!](si!k(sia(si'y(si~P!:aO#`3OO!](si!k(sia(si'y(si~O!](hO!k(ri~O!S%gO!_%hO!|]O#i3TO#j3SO(S%fO~O!S%gO!_%hO#j3SO(S%fO~On3[O!_'^O%i3ZO~Oh%VOn3[O!_'^O%i3ZO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'y%aa(`%aa(q%aa!k%aa!Y%aa'v%aav%aa!_%aa%i%aa!g%aa~P#LaO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'y%ca(`%ca(q%ca!k%ca!Y%ca'v%cav%ca!_%ca%i%ca!g%ca~P#MSO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'y%aa(`%aa(q%aa!k%aa!Y%aa'v%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/XO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'y%ca(`%ca(q%ca!k%ca!Y%ca'v%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/XO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'y}a(`}a(q}a!k}a!Y}a'v}av}a!_}a%i}a!g}a~P$&vO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'y$sa(`$sa(q$sa!k$sa!Y$sa'v$sav$sa!_$sa%i$sa!g$sa~P$'rO#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'y$ua(`$ua(q$ua!k$ua!Y$ua'v$uav$ua!_$ua%i$ua!g$ua~P$(eO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'y%Ta(`%Ta(q%Ta!k%Ta!Y%Ta'v%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/XOa#cq!]#cq'y#cq'v#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:aO![3dO!]'XX!k'XX~P%[O!].oO!k(ja~O!].oO!k(ja~P!:aO!Y3gO~O$O!na!^!na~PKaO$O!ja!]!ja!^!ja~P#B]O$O!ra!^!ra~P!<wO$O!ta!^!ta~P!?_Og'[X!]'[X~P!+xO!].zOg(oa~OSfO!_3{O$d3|O~O!^4QO~Ov4RO~P#/XOa$mq!]$mq'y$mq'v$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:aO!Y4TO~P!&oO!S4UO~O!Q)|O'x)}O(y%POn'ha(x'ha!]'ha#`'ha~Og'ha$O'ha~P%,XO!Q)|O'x)}On'ja(x'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P%,zO(q$YO~P#/XO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!/wO(S<xO~P!1jO!S%gO![4XO!_%hO(S%fO!]'dX!k'dX~O!]/kO!k(}a~O!]/kO!g#vO!k(}a~O!]/kO!g#vO(q'nO!k(}a~Og$|i!]$|i#`$|i$O$|i~P!0{O![4aO!Y'fX!]'fX~P!3iO!]/sO!Y)Oa~O!]/sO!Y)Oa~P#/XOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X~Oj%YX!g%YX~P%0kOj4fO!g#vO~Oh%VO!g#vO!l%dO~Oh%VOr4kO!l%dO(q'nO~Or4pO!g#vO(q'nO~Os!nO!S4qO(UTO(XUO(d!mO~O(x$}On%ai!Q%ai'x%ai(y%ai!]%ai#`%ai~Og%ai$O%ai~P%4[O(y%POn%ci!Q%ci'x%ci(x%ci!]%ci#`%ci~Og%ci$O%ci~P%4}Og(^i!](^i~P!0{O#`4wOg(^i!](^i~P!0{O!k4zO~Oa$oq!]$oq'y$oq'v$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:aO!Y5QO~O!]5RO!_)PX~P#/XOa$zX!_$zX%^]X'y$zX!]$zX~P!/wO%^5UOaoXnoX!QoX!_oX'xoX'yoX(xoX(yoX!]oX~Op5VO(S#nO~O%^5UO~Ob5]O%j5^O(S+nO(UTO(XUO!]'sX!^'sX~O!]0}O!^)Wa~O[5bO~O`5cO~Oa%mO'y%mO~P#/XO!]5kO#`5mO!^)TX~O!^5nO~Or5tOs!nO!S*fO!b!yO!c!vO!d!vO!|;wO#T!pO#U!pO#V!pO#W!pO#X!pO#[5sO#]!zO(T!lO(UTO(XUO(d!mO(n!sO~O!^5rO~P%:YOn5yO!_1gO%i5xO~Oh%VOn5yO!_1gO%i5xO~Ob6QO(S#nO(UTO(XUO!]'rX!^'rX~O!]1rO!^)Ua~O(UTO(XUO(d6SO~O`6WO~Oj6ZO&Z6[O~PM|O!k6]O~P%[Oa6_O~Oa6_O~P%[Ob2YO!^6dO&i2XO~P`O!g6fO~O!g6hOh(ii!](ii!^(ii!g(ii!l(iir(ii(q(ii~O!]#hi!^#hi~P#B]O#`6iO!]#hi!^#hi~O!]!ai!^!ai~P#B]Oa%mO#`6rO'y%mO~Oa%mO!g#vO#`6rO'y%mO~O!](sq!k(sqa(sq'y(sq~P!:aO!](hO!k(rq~O!S%gO!_%hO#j6yO(S%fO~O!_'^O%i6|O~On7QO!_'^O%i6|O~O#k'haP'haR'ha['haa'haj'har'ha!S'ha!l'ha!p'ha#R'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#v'ha#x'ha#z'ha#{'ha'y'ha(`'ha(q'ha!k'ha!Y'ha'v'hav'ha!_'ha%i'ha!g'ha~P%,XO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'y'ja(`'ja(q'ja!k'ja!Y'ja'v'jav'ja!_'ja%i'ja!g'ja~P%,zO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'y$|i(`$|i(q$|i!k$|i!Y$|i'v$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/XO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'y%ai(`%ai(q%ai!k%ai!Y%ai'v%aiv%ai!_%ai%i%ai!g%ai~P%4[O#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'y%ci(`%ci(q%ci!k%ci!Y%ci'v%civ%ci!_%ci%i%ci!g%ci~P%4}O!]'Xa!k'Xa~P!:aO!].oO!k(ji~O$O#ci!]#ci!^#ci~P#B]OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(`VO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#n#mi~P%MXO#n<PO~P%MXOP$[OR#zOr<]O!Q#yO!S#{O!l#xO!p$[O#n<PO#o<QO#p<QO#q<QO(`VO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#r#mi~P& aO#r<RO~P& aOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O(`VO#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#v#mi~P&#iOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO(`VO(y#}O#z#mi#{#mi$O#mi(q#mi(x#mi!]#mi!^#mi~O#x<VO~P&%jO#x#mi~P&%jO#v<TO~P&#iOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO#x<VO(`VO(x#|O(y#}O#{#mi$O#mi(q#mi!]#mi!^#mi~O#z#mi~P&'yO#z<XO~P&'yOa#|y!]#|y'y#|y'v#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:aO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<PO#o<QO#p<QO#q<QO(`VO(x#mi(y#mi~P&*uOn=}O!Q)|O'x)}O(x$}O(y%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(`#mi~P&*uO#S$dOP(_XR(_X[(_Xj(_Xn(_Xr(_X!Q(_X!S(_X!l(_X!p(_X#R(_X#n(_X#o(_X#p(_X#q(_X#r(_X#s(_X#t(_X#u(_X#v(_X#x(_X#z(_X#{(_X$O(_X'x(_X(`(_X(q(_X(x(_X(y(_X!](_X!^(_X~O$O$Pi!]$Pi!^$Pi~P#B]O$O!ri!^!ri~P$*bOg'[a!]'[a~P!0{O!^7dO~O!]'ca!^'ca~P#B]O!Y7eO~P#/XO!g#vO(q'nO!]'da!k'da~O!]/kO!k(}i~O!]/kO!g#vO!k(}i~Og$|q!]$|q#`$|q$O$|q~P!0{O!Y'fa!]'fa~P#/XO!g7lO~O!]/sO!Y)Oi~P#/XO!]/sO!Y)Oi~O!Y7oO~Oh%VOr7tO!l%dO(q'nO~Oj7vO!g#vO~Or7yO!g#vO(q'nO~O!Q)|O'x)}O(y%POn'ia(x'ia!]'ia#`'ia~Og'ia$O'ia~P&3vO!Q)|O'x)}On'ka(x'ka(y'ka!]'ka#`'ka~Og'ka$O'ka~P&4iO!Y7{O~Og%Oq!]%Oq#`%Oq$O%Oq~P!0{Og(^q!](^q~P!0{O#`7|Og(^q!](^q~P!0{Oa$oy!]$oy'y$oy'v$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:aO!g6hO~O!]5RO!_)Pa~O!_'^OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(`$Ta(q$Ta(x$Ta(y$Ta~O%i6|O~P&7ZO%^8QOa%[i!_%[i'y%[i!]%[i~Oa#cy!]#cy'y#cy'v#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:aO[8SO~Ob8UO(S+nO(UTO(XUO~O!]0}O!^)Wi~O`8YO~O(d(zO!]'oX!^'oX~O!]5kO!^)Ta~O!^8cO~P%:YO(n!sO~P$${O#[8dO~O!_1gO~O!_1gO%i8fO~On8iO!_1gO%i8fO~O[8nO!]'ra!^'ra~O!]1rO!^)Ui~O!k8rO~O!k8sO~O!k8vO~O!k8vO~P%[Oa8xO~O!g8yO~O!k8zO~O!](vi!^(vi~P#B]Oa%mO#`9SO'y%mO~O!](sy!k(sya(sy'y(sy~P!:aO!](hO!k(ry~O%i9VO~P&7ZO!_'^O%i9VO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'y$|q(`$|q(q$|q!k$|q!Y$|q'v$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/XO#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'y'ia(`'ia(q'ia!k'ia!Y'ia'v'iav'ia!_'ia%i'ia!g'ia~P&3vO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'y'ka(`'ka(q'ka!k'ka!Y'ka'v'kav'ka!_'ka%i'ka!g'ka~P&4iO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'y%Oq(`%Oq(q%Oq!k%Oq!Y%Oq'v%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/XO!]'Xi!k'Xi~P!:aO$O#cq!]#cq!^#cq~P#B]O(x$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(`%aa(q%aa!]%aa!^%aa~On%aa!Q%aa'x%aa(y%aa~P&HnO(y%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(`%ca(q%ca!]%ca!^%ca~On%ca!Q%ca'x%ca(x%ca~P&JuOn=}O!Q)|O'x)}O(y%PO~P&HnOn=}O!Q)|O'x)}O(x$}O~P&JuOR0cO!Q0cO!S0dO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'x}a(`}a(q}a(x}a(y}a!]}a!^}a~O!Q)|O'x)}OP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(`$sa(q$sa(x$sa(y$sa!]$sa!^$sa~O!Q)|O'x)}OP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(`$ua(q$ua(x$ua(y$ua!]$ua!^$ua~On=}O!Q)|O'x)}O(x$}O(y%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(`%Ta(q%Ta!]%Ta!^%Ta~P'%zO$O$mq!]$mq!^$mq~P#B]O$O$oq!]$oq!^$oq~P#B]O!^9dO~O$O9eO~P!0{O!g#vO!]'di!k'di~O!g#vO(q'nO!]'di!k'di~O!]/kO!k(}q~O!Y'fi!]'fi~P#/XO!]/sO!Y)Oq~Or9lO!g#vO(q'nO~O[9nO!Y9mO~P#/XO!Y9mO~Oj9tO!g#vO~Og(^y!](^y~P!0{O!]'ma!_'ma~P#/XOa%[q!_%[q'y%[q!]%[q~P#/XO[9yO~O!]0}O!^)Wq~O#`9}O!]'oa!^'oa~O!]5kO!^)Ti~P#B]O!S:PO~O!_1gO%i:SO~O(UTO(XUO(d:XO~O!]1rO!^)Uq~O!k:[O~O!k:]O~O!k:^O~O!k:^O~P%[O#`:aO!]#hy!^#hy~O!]#hy!^#hy~P#B]O%i:fO~P&7ZO!_'^O%i:fO~O$O#|y!]#|y!^#|y~P#B]OP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(`$|i(q$|i!]$|i!^$|i~P'%zO!Q)|O'x)}O(y%POP'haR'ha['haj'han'har'ha!S'ha!l'ha!p'ha#R'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#v'ha#x'ha#z'ha#{'ha$O'ha(`'ha(q'ha(x'ha!]'ha!^'ha~O!Q)|O'x)}OP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(`'ja(q'ja(x'ja(y'ja!]'ja!^'ja~O(x$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'x%ai(`%ai(q%ai(y%ai!]%ai!^%ai~O(y%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'x%ci(`%ci(q%ci(x%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#B]O$O#cy!]#cy!^#cy~P#B]O!g#vO!]'dq!k'dq~O!]/kO!k(}y~O!Y'fq!]'fq~P#/XOr:pO!g#vO(q'nO~O[:tO!Y:sO~P#/XO!Y:sO~Og(^!R!](^!R~P!0{Oa%[y!_%[y'y%[y!]%[y~P#/XO!]0}O!^)Wy~O!]5kO!^)Tq~O(S:zO~O!_1gO%i:}O~O!k;QO~O%i;VO~P&7ZOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(`$|q(q$|q!]$|q!^$|q~P'%zO!Q)|O'x)}O(y%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(`'ia(q'ia(x'ia!]'ia!^'ia~O!Q)|O'x)}OP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(`'ka(q'ka(x'ka(y'ka!]'ka!^'ka~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(`%Oq(q%Oq!]%Oq!^%Oq~P'%zOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!0{O!Y;ZO~P#/XOr;[O!g#vO(q'nO~O[;^O!Y;ZO~P#/XO!]'oq!^'oq~P#B]O!]#h!Z!^#h!Z~P#B]O#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'y%e!Z(`%e!Z(q%e!Z!k%e!Z!Y%e!Z'v%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/XOr;fO!g#vO(q'nO~O!Y;gO~P#/XOr;nO!g#vO(q'nO~O!Y;oO~P#/XOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(`%e!Z(q%e!Z!]%e!Z!^%e!Z~P'%zOr;rO!g#vO(q'nO~Ov(eX~P1qO!Q%qO~P!)PO(T!lO~P!)PO!YfX!]fX#`fX~P%0kOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X~O!gfX!k]X!kfX(qfX~P'JsOP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_XO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(S)ZO(UTO(XUO(`VO(n[O~O!]<ZO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<fO!S${O!_$|O!i=wO!l$xO#j<lO$W%_O$t<hO$v<jO$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~Ol)bO~P( iOr!eX(q!eX~P# }Or(iX(q(iX~P#!pO!^]X!^fX~P'JsO!YfX!Y$zX!]fX!]$zX#`fX~P!/wO#k<OO~O!g#vO#k<OO~O#`<`O~Oj<SO~O#`<pO!](vX!^(vX~O#`<`O!](tX!^(tX~O#k<qO~Og<sO~P!0{O#k<yO~O#k<zO~O!g#vO#k<{O~O!g#vO#k<qO~O$O<|O~P#B]O#k<}O~O#k=OO~O#k=TO~O#k=UO~O#k=VO~O#k=WO~O$O=XO~P!0{O$O=YO~P!0{Ok#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~'}T#o!X'{(T#ps#n#qr!Q'|$]'|(S$_(d~",goto:"$8g)[PPPPPP)]PP)`P)qP+R/WPPPP6bPP6xPP<pPPP@dP@zP@zPPP@zPCSP@zP@zP@zPCWPC]PCzPHtPPPHxPPPPHxK{PPPLRLsPHxPHxPP! RHxPPPHxPHxP!#YHxP!&p!'u!(OP!(r!(v!(r!,TPPPPPPP!,t!'uPP!-U!.vP!2SHxHx!2X!5e!:R!:R!>QPPP!>YHxPPPPPPPPP!AiP!BvPPHx!DXPHxPHxHxHxHxHxPHx!EkP!HuP!K{P!LP!LZ!L_!L_P!HrP!Lc!LcP# iP# mHxPHx# s#$xCW@zP@zP@z@zP#&V@z@z#(i@z#+a@z#-m@z@z#.]#0q#0q#0v#1P#0q#1[PP#0qP@z#1t@z#5s@z@z6bPPP#9xPPP#:c#:cP#:cP#:y#:cPP#;PP#:vP#:v#;d#:v#<O#<U#<X)`#<[)`P#<c#<c#<cP)`P)`P)`P)`PP)`P#<i#<lP#<l)`P#<pP#<sP)`P)`P)`P)`P)`P)`)`PP#<y#=P#=[#=b#=h#=n#=t#>S#>Y#>d#>j#>t#>z#?[#?b#@S#@f#@l#@r#AQ#Ag#C[#Cj#Cq#E]#Ek#G]#Gk#Gq#Gw#G}#HX#H_#He#Ho#IR#IXPPPPPPPPPPP#I_PPPPPPP#JS#MZ#Ns#Nz$ SPPP$&nP$&w$)p$0Z$0^$0a$1`$1c$1j$1rP$1x$1{P$2i$2m$3e$4s$4x$5`PP$5e$5k$5o$5r$5v$5z$6v$7_$7v$7z$7}$8Q$8W$8Z$8_$8cR!|RoqOXst!Z#d%l&p&r&s&u,n,s2S2VY!vQ'^-`1g5qQ%svQ%{yQ&S|Q&h!VS'U!e-WQ'd!iS'j!r!yU*h$|*X*lQ+l%|Q+y&UQ,_&bQ-^']Q-h'eQ-p'kQ0U*nQ1q,`R<m;z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9SS#q];w!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU*{%[<e<fQ+q&OQ,a&eQ,h&mQ0r+dQ0w+fQ1S+rQ1y,fQ3W.bQ5V0vQ5]0}Q6Q1rQ7O3[Q8U5^R9Y7Q'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s!S!nQ!r!v!y!z$|'U']'^'j'k'l*h*l*n*o-W-^-`-p0U0X1g5q5s%[$ti#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q&V|Q'S!eS'Y%h-ZQ+q&OQ,a&eQ0f+OQ1S+rQ1X+xQ1x,eQ1y,fQ5]0}Q5f1ZQ6Q1rQ6T1tQ6U1wQ8U5^Q8X5cQ8q6WQ9|8YQ:Y8nR<o*XrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR,c&i&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=r=s[#]WZ#W#Z'V(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ%vxQ%zyS&P|&UQ&]!TQ'a!hQ'c!iQ(o#sS+k%{%|Q+o&OQ,Y&`Q,^&bS-g'd'eQ.d(pQ0{+lQ1R+rQ1T+sQ1W+wQ1l,ZS1p,_,`Q2t-hQ5[0}Q5`1QQ5e1YQ6P1qQ8T5^Q8W5bQ9x8SR:w9y!U$zi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y!^%xy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pQ+e%vQ,O&YQ,R&ZQ,]&bQ.c(oQ1k,YU1o,^,_,`Q3].dQ5z1lS6O1p1qQ8m6P#f=t#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o=u<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YW%Ti%V*v=pS&Y!Q&gQ&Z!RQ&[!SQ+S%cR+|&W%]%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}T)x$u)yV*{%[<e<fW'Y!e%h*X-ZS({#y#zQ+`%qQ+v&RS.](k(lQ1b,SQ4x0cR8^5k'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s$i$^c#Y#e%p%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.w.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ'W!eR2i-W!W!nQ!e!r!v!y!z$|'U']'^'j'k'l*X*h*l*n*o-W-^-`-p0U0X1g5q5sR1d,UnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&w!^Q't!xS(q#u<OQ+i%yQ,W&]Q,X&_Q-e'bQ-r'mS.m(v<qS0k+U<{Q0y+jQ1f,VQ2Z,uQ2],vQ2e-RQ2r-fQ2u-jS5P0l=VQ5W0zS5Z0|=WQ6j2gQ6n2sQ6s2zQ8R5XQ8}6lQ9O6oQ9R6tR:`8z$d$]c#Y#e%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gS(m#p'gQ(}#zS+_%p.wS.^(l(nR3U._'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS#q];wQ&r!XQ&s!YQ&u![Q&v!]R2R,qQ'_!hQ+b%vQ-c'aS.`(o+eQ2p-bW3Y.c.d0q0sQ6m2qW6z3V3X3]5TU9U6{6}7PU:e9W9X9ZS;T:d:gQ;b;UR;j;cU!wQ'^-`T5o1g5q!Q_OXZ`st!V!Z#d#h%d%l&g&i&p&r&s&u(h,n,s.V2S2V]!pQ!r'^-`1g5qT#q];w%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS({#y#zS.](k(l!s=^$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU$fd)],hS(n#p'gU*s%R(u3vU0e*z.i7]Q5T0rQ6{3WQ9X7OR:g9Ym!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sQ'r!uS(d#g1|S-n'i'uQ/n*ZQ/{*gQ2|-qQ4]/oQ4i/}Q4j0OQ4o0WQ7h4WS7s4k4mS7w4p4rQ9g7iQ9k7oQ9p7tQ9u7yS:o9l9mS;Y:p:sS;e;Z;[S;m;f;gS;q;n;oR;t;rQ#wbQ'q!uS(c#g1|S(e#m+TQ+V%eQ+g%wQ+m%}U-m'i'r'uQ.R(dQ/m*ZQ/|*gQ0P*iQ0x+hQ1m,[S2y-n-qQ3R.ZS4[/n/oQ4e/yS4h/{0WQ4l0QQ5|1nQ6u2|Q7g4WQ7k4]U7r4i4o4rQ7u4nQ8k5}S9f7h7iQ9j7oQ9r7wQ9s7xQ:V8lQ:m9gS:n9k9mQ:v9uQ;P:WS;X:o:sS;d;Y;ZS;l;e;gS;p;m;oQ;s;qQ;u;tQ=a=[Q=l=eR=m=fV!wQ'^-`%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS#wz!j!r=Z$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=a=r%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SQ%ej!^%wy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pS%}z!jQ+h%xQ,[&bW1n,],^,_,`U5}1o1p1qS8l6O6PQ:W8m!r=[$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ=e=qR=f=r%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SY#bWZ#W#Z(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ,i&m!p=]$Z$n)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=`'VU'Z!e%h*XR2k-Z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9S!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ,h&mQ0r+dQ3W.bQ7O3[R9Y7Q!b$Tc#Y%p(Q(W(r(w)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!P<U)[)o-U.w2c2f3h3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!f$Vc#Y%p(Q(W(r(w)U)V)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!T<W)[)o-U.w2c2f3h3n3o3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!^$Zc#Y%p(Q(W(r(w)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;xQ4V/fz=s)[)o-U.w2c2f3h3w4P6k7W7a7b8`8|9[9b9c:y;R=gQ=x=zR=y={'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS$oh$pR3|/P'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$kf$qQ$ifS)h$l)lR)t$qT$jf$qT)j$l)l'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$oh$pQ$rhR)s$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9S!s=q$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s#glOPXZst!Z!`!o#S#d#o#{$n%l&i&l&m&p&r&s&u&y'R'`(|)q*f+Y+d,k,n,s-d.b/Q/i0V0d1j1z1{1}2P2S2V2X3[3{4q5y6Z6[6_7Q8i8x!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}Q+P%`Q/^)|o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!U$yi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yQ*`$zU*i$|*X*lQ+Q%aQ0Q*j#f=c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n=d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YQ=h=tQ=i=uQ=j=vR=k=w!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YnoOXst!Z#d%l&p&r&s&u,n,s2S2VS*c${*WQ,|&|Q,}'OR4`/s%[%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q,P&ZQ1`,RQ5i1_R8]5jV*k$|*X*lU*k$|*X*lT5p1g5qS/y*f/iQ4n0VT7x4q:PQ+g%wQ0P*iQ0x+hQ1m,[Q5|1nQ8k5}Q:V8lR;P:W!U%Oi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yx*P$v)c*Q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=oS0Y*q0Z#f<a#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<b<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!d<t(s)a*Y*b.e.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={`<u3u7X7[7`9]:h:k;kS=P.g3aT=Q7Z9`!U%Qi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y|*R$v)c*S*q+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=oS0[*r0]#f<c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!h<v(s)a*Y*b.f.g.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={d<w3u7Y7Z7`9]9^:h:i:k;kS=R.h3bT=S7[9arnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ&d!UR,k&mrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR&d!UQ,T&[R1[+|snOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ1h,YS5w1k1lU8e5u5v5zS:R8g8hS:{:Q:TQ;_:|R;i;`Q&k!VR,d&gR6T1tR:Y8nS&P|&UR1T+sQ&p!WR,n&qR,t&vT2T,s2VR,x&wQ,w&wR2^,xQ'w!{R-t'wSsOtQ#dXT%os#dQ#OTR'y#OQ#RUR'{#RQ)y$uR/Z)yQ#UVR(O#UQ#XWU(U#X(V-{Q(V#YR-{(WQ-X'WR2j-XQ.p(wS3e.p3fR3f.qQ-`'^R2n-`Y!rQ'^-`1g5qR'h!rQ.{)cR3z.{U#_W%g*WU(]#_(^-|Q(^#`R-|(XQ-['ZR2l-[t`OXst!V!Z#d%l&g&i&p&r&s&u,n,s2S2VS#hZ%dU#r`#h.VR.V(hQ(i#jQ.S(eW.[(i.S3P6wQ3P.TR6w3QQ)l$lR/R)lQ$phR)r$pQ$`cU)_$`-w<[Q-w;xR<[)oQ/l*ZW4Y/l4Z7j9hU4Z/m/n/oS7j4[4]R9h7k$e*O$v(s)a)c*Y*b*q*r*|*}+R.g.h.j.k.l/Y/b/d/f/q/v0^0_0p1]3^3_3`3u3y4S4^4_4c4s4u4{4|4}5h7R7S7T7U7Z7[7^7_7`7f7m7p7z7}8P9]9^9_9i9q9v9w:h:i:j:k:l:q:u;W;];h;k=b=n=o=z={Q/t*bU4b/t4d7nQ4d/vR7n4cS*l$|*XR0S*lx*Q$v)c*q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=o!d.e(s)a*Y*b.g.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/c*Q.e7Xa7X3u7Z7[7`9]:h:k;kQ0Z*qQ3a.gU4t0Z3a9`R9`7Z|*S$v)c*q*r+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=o!h.f(s)a*Y*b.g.h.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/e*S.f7Ye7Y3u7Z7[7`9]9^:h:i:k;kQ0]*rQ3b.hU4v0]3b9aR9a7[Q*w%UR0a*wQ5S0pR8O5SQ+[%jR0o+[Q5l1bS8_5l:OR:O8`Q,V&]R1e,VQ5q1gR8b5qQ1s,aS6R1s8oR8o6TQ1O+oW5_1O5a8V9zQ5a1RQ8V5`R9z8WQ+t&PR1U+tQ2V,sR6c2VYrOXst#dQ&t!ZQ+^%lQ,m&pQ,o&rQ,p&sQ,r&uQ2Q,nS2T,s2VR6b2SQ%npQ&x!_Q&{!aQ&}!bQ'P!cQ'o!uQ+]%kQ+i%yQ+{&VQ,c&kQ,z&zW-k'i'q'r'uQ-r'mQ0R*kQ0y+jS1v,d,gQ2_,yQ2`,|Q2a,}Q2u-jW2w-m-n-q-sQ5W0zQ5d1XQ5g1]Q5{1mQ6V1xQ6a2RU6p2v2y2|Q6s2zQ8R5XQ8Z5fQ8[5hQ8a5pQ8j5|Q8p6US9P6q6uQ9R6tQ9{8XQ:U8kQ:Z8qQ:b9QQ:x9|Q;O:VQ;S:cR;a;PQ%yyQ'b!iQ'm!uU+j%z%{%|Q-R'TU-f'c'd'eS-j'i'sQ/z*gS0z+k+lQ2g-TS2s-g-hQ2z-oS4g/{0OQ5X0{Q6l2mQ6o2tQ6t2{U7q4i4j4mQ9o7sR:r9pS$wi=pR*x%VU%Ui%V=pR0`*vQ$viS(s#v+fS)a$b$cQ)c$dQ*Y$xS*b${*WQ*q%OQ*r%QQ*|%]Q*}%^Q+R%bQ.g<aQ.h<cQ.j<gQ.k<iQ.l<kQ/Y)wQ/b*PQ/d*RQ/f*TQ/q*^S/v*d/hQ0^*tQ0_*ul0p+c,Q.a1a1i3Z5x6|8f9V:S:f:};VQ1]+}Q3^<tQ3_<vQ3`<yS3u<^<_Q3y.zS4S/_4UQ4^/rQ4_/sQ4c/uQ4s0YQ4u0[Q4{0gQ4|0hQ4}0iQ5h1^Q7R<}Q7S=PQ7T=RQ7U=TQ7Z<bQ7[<dQ7^<hQ7_<jQ7`<lQ7f4VQ7m4aQ7p4fQ7z4wQ7}5RQ8P5UQ9]<zQ9^<uQ9_<wQ9i7lQ9q7vQ9v7|Q9w8QQ:h=OQ:i=QQ:j=SQ:k=UQ:l9eQ:q9nQ:u9tQ;W=XQ;]:tQ;h;^Q;k=YQ=b=pQ=n=xQ=o=yQ=z=|R={=}Q*z%[Q.i<eR7]<fnpOXst!Z#d%l&p&r&s&u,n,s2S2VQ!fPS#fZ#oQ&z!`W'f!o*f0V4qQ'}#SQ)O#{Q)p$nS,g&i&lQ,l&mQ,y&yS-O'R/iQ-b'`Q.s(|Q/V)qQ0m+YQ0s+dQ2O,kQ2q-dQ3X.bQ4O/QQ4y0dQ5v1jQ6X1zQ6Y1{Q6^1}Q6`2PQ6e2XQ7P3[Q7c3{Q8h5yQ8t6ZQ8u6[Q8w6_Q9Z7QQ:T8iR:_8x#[cOPXZst!Z!`!o#d#o#{%l&i&l&m&p&r&s&u&y'R'`(|*f+Y+d,k,n,s-d.b/i0V0d1j1z1{1}2P2S2V2X3[4q5y6Z6[6_7Q8i8xQ#YWQ#eYQ%puQ%rvS%tw!gS(Q#W(TQ(W#ZQ(r#uQ(w#xQ)P$OQ)Q$PQ)R$QQ)S$RQ)T$SQ)U$TQ)V$UQ)W$VQ)X$WQ)Y$XQ)[$ZQ)^$_Q)`$aQ)e$eW)o$n)q/Q3{Q+a%sQ+u&QS-U'V2hQ-s'pS-x(R-zQ-}(ZQ.P(bQ.n(vQ.q(xQ.u;vQ.w;yQ.x;zQ.y;}Q/]){Q0j+UQ2c-PQ2f-SQ2v-lQ2}.QQ3c.oQ3h<OQ3i<PQ3j<QQ3k<RQ3l<SQ3m<TQ3n<UQ3o<VQ3p<WQ3q<XQ3r<YQ3s.vQ3t<]Q3w<`Q3x<mQ4P<ZQ5O0lQ5Y0|Q6k<pQ6q2xQ6v3OQ7V3dQ7W<qQ7a<sQ7b<{Q8`5mQ8|6iQ9Q6rQ9[<|Q9b=VQ9c=WQ:c9SQ:y9}Q;R:aQ;x#SR=g=sR#[WR'X!el!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sS'T!e-WU*g$|*X*lS-T'U']S0O*h*nQ0W*oQ2m-^Q4m0UR4r0XR(y#xQ!fQT-_'^-`]!qQ!r'^-`1g5qQ#p]R'g;wR)d$dY!uQ'^-`1g5qQ'i!rS's!v!yS'u!z5sS-o'j'kQ-q'lR2{-pT#kZ%dS#jZ%dS%jm,jU(e#h#i#lS.T(f(gQ.X(hQ0n+ZQ3Q.UU3R.V.W.YS6x3S3TR9T6yd#^W#W#Z%g(R([*W+W.O/hr#gZm#h#i#l%d(f(g(h+Z.U.V.W.Y3S3T6yS*Z$x*_Q/o*[Q1|,jQ2d-QQ4W/kQ6g2[Q7i4XQ8{6hT=_'V+XV#aW%g*WU#`W%g*WS(S#W([U(X#Z+W/hS-V'V+XT-y(R.OV'[!e%h*XQ$lfR)v$qT)k$l)lR3}/PT*]$x*_T*e${*WQ0q+cQ1_,QQ3V.aQ5j1aQ5u1iQ6}3ZQ8g5xQ9W6|Q:Q8fQ:d9VQ:|:SQ;U:fQ;`:}R;c;VnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&j!VR,c&gtmOXst!U!V!Z#d%l&g&p&r&s&u,n,s2S2VR,j&mT%km,jR1c,SR,b&eQ&T|R+z&UR+p&OT&n!W&qT&o!W&qT2U,s2V",nodeNames:"⚠ ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:379,context:Xae,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,236,242,244,246,248,251,257,263,265,267,269,271,273,274,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[ece],skippedNodes:[0,5,6,277],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(VpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(VpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Vp(Y!b'{0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(W#S$i&j'|0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Vp(Y!b'|0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(U':f$i&j(Y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Y!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Vp(Y!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Vp(Y!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Y!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Y!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(VpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(VpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Vp(Y!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(n%1l(Vp(Y!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Vp(Y!b$]#t(S,2j(d$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Vp(Y!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Vp(Y!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(y+JY$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(X';W$i&j(VpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(VpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(VpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(VpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(VpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Vp(Y!b(T%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Vp(Y!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Vp(Y!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Vp(Y!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Vp(Y!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Y!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Y!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Y!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Y!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Y!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Y!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Vp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Vp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Vp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Vp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(VpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(VpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Vp(Y!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Vp(Y!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Vp(Y!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Vp(Y!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Vp(Y!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Vp(Y!b'}0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Vp(Y!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Y!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Y!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(VpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(VpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Vp(Y!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Vp(Y!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(q(Ct$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Vp(Y!b(`+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Vp(Y!b(S,2j$_#t(d$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Vp(Y!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(x+JY$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Vp(Y!b'{0/l$]#t(S,2j(d$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Vp(Y!b'|0/l$]#t(S,2j(d$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[Gae,Yae,Kae,Jae,2,3,4,5,6,7,8,9,10,11,12,13,14,jae,new jg("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(b~~",141,339),new jg("j~RQYZXz{^~^O(P~~aP!P!Qd~iO(Q~~",25,322)],topRules:{Script:[0,7],SingleExpression:[1,275],SingleClassItem:[2,276]},dialects:{jsx:0,ts:15098},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:326,get:s=>tce[s]||-1},{term:342,get:s=>ice[s]||-1},{term:95,get:s=>nce[s]||-1}],tokenPrec:15124}),uV=[un("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),un("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),un("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),un("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),un("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),un(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),un("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),un(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),un(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),un('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),un('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],rce=uV.concat([un("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),un("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),un("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),JE=new L3,hV=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function Ru(s){return(t,e)=>{let i=t.node.getChild("VariableDefinition");return i&&e(i,s),!0}}const oce=["FunctionDeclaration"],lce={FunctionDeclaration:Ru("function"),ClassDeclaration:Ru("class"),ClassExpression:()=>!0,EnumDeclaration:Ru("constant"),TypeAliasDeclaration:Ru("type"),NamespaceDeclaration:Ru("namespace"),VariableDefinition(s,t){s.matchContext(oce)||t(s,"variable")},TypeDefinition(s,t){t(s,"type")},__proto__:null};function dV(s,t){let e=JE.get(t);if(e)return e;let i=[],n=!0;function r(o,l){let a=s.sliceString(o.from,o.to);i.push({label:a,type:l})}return t.cursor(_t.IncludeAnonymous).iterate(o=>{if(n)n=!1;else if(o.name){let l=lce[o.name];if(l&&l(o,r)||hV.has(o.name))return!1}else if(o.to-o.from>8192){for(let l of dV(s,o.node))i.push(l);return!1}}),JE.set(t,i),i}const e5=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,fV=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function ace(s){let t=kt(s.state).resolveInner(s.pos,-1);if(fV.indexOf(t.name)>-1)return null;let e=t.name=="VariableName"||t.to-t.from<20&&e5.test(s.state.sliceDoc(t.from,t.to));if(!e&&!s.explicit)return null;let i=[];for(let n=t;n;n=n.parent)hV.has(n.name)&&(i=i.concat(dV(s.state.doc,n)));return{options:i,from:e?t.from:s.pos,validFor:e5}}const lr=fc.define({name:"javascript",parser:sce.configure({props:[wd.add({IfStatement:Zm({except:/^\s*({|else\b)/}),TryStatement:Zm({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:Sse,SwitchBody:s=>{let t=s.textAfter,e=/^\s*\}/.test(t),i=/^\s*(case|default)\b/.test(t);return s.baseIndent+(e?0:i?1:2)*s.unit},Block:kse({closing:"}"}),ArrowFunction:s=>s.baseIndent+s.unit,"TemplateString BlockComment":()=>null,"Statement Property":Zm({except:/^\s*{/}),JSXElement(s){let t=/^\s*<\//.test(s.textAfter);return s.lineIndent(s.node.from)+(t?0:s.unit)},JSXEscape(s){let t=/\s*\}/.test(s.textAfter);return s.lineIndent(s.node.from)+(t?0:s.unit)},"JSXOpenTag JSXSelfClosingTag"(s){return s.column(s.node.from)+s.unit}}),Pc.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":W3,BlockComment(s){return{from:s.from+2,to:s.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),mV={test:s=>/^JSX/.test(s.name),facet:Qy({commentTokens:{block:{open:"{/*",close:"*/}"}}})},gV=lr.configure({dialect:"ts"},"typescript"),pV=lr.configure({dialect:"jsx",props:[Dy.add(s=>s.isTop?[mV]:void 0)]}),wV=lr.configure({dialect:"jsx ts",props:[Dy.add(s=>s.isTop?[mV]:void 0)]},"typescript");let bV=s=>({label:s,type:"keyword"});const OV="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(bV),cce=OV.concat(["declare","implements","private","protected","public"].map(bV));function uce(s={}){let t=s.jsx?s.typescript?wV:pV:s.typescript?gV:lr,e=s.typescript?rce.concat(cce):uV.concat(OV);return new Nh(t,[lr.data.of({autocomplete:doe(fV,L7(e))}),lr.data.of({autocomplete:ace}),s.jsx?fce:[]])}function hce(s){for(;;){if(s.name=="JSXOpenTag"||s.name=="JSXSelfClosingTag"||s.name=="JSXFragmentTag")return s;if(s.name=="JSXEscape"||!s.parent)return null;s=s.parent}}function t5(s,t,e=s.length){for(let i=t==null?void 0:t.firstChild;i;i=i.nextSibling)if(i.name=="JSXIdentifier"||i.name=="JSXBuiltin"||i.name=="JSXNamespacedName"||i.name=="JSXMemberExpression")return s.sliceString(i.from,Math.min(i.to,e));return""}const dce=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),fce=Ee.inputHandler.of((s,t,e,i,n)=>{if((dce?s.composing:s.compositionStarted)||s.state.readOnly||t!=e||i!=">"&&i!="/"||!lr.isActiveAt(s.state,t,-1))return!1;let r=n(),{state:o}=r,l=o.changeByRange(a=>{var c;let{head:h}=a,f=kt(o).resolveInner(h-1,-1),m;if(f.name=="JSXStartTag"&&(f=f.parent),!(o.doc.sliceString(h-1,h)!=i||f.name=="JSXAttributeValue"&&f.to>h)){if(i==">"&&f.name=="JSXFragmentTag")return{range:a,changes:{from:h,insert:"</>"}};if(i=="/"&&f.name=="JSXStartCloseTag"){let w=f.parent,O=w.parent;if(O&&w.from==h-2&&((m=t5(o.doc,O.firstChild,h))||((c=O.firstChild)===null||c===void 0?void 0:c.name)=="JSXFragmentTag")){let v=`${m}>`;return{range:ie.cursor(h+v.length,-1),changes:{from:h,insert:v}}}}else if(i==">"){let w=hce(f);if(w&&w.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(o.doc.sliceString(h,h+2))&&(m=t5(o.doc,w,h)))return{range:a,changes:{from:h,insert:`</${m}>`}}}}return{range:a}});return l.changes.empty?!1:(s.dispatch([r,o.update(l,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),Vu=["_blank","_self","_top","_parent"],Kb=["ascii","utf-8","utf-16","latin1","latin1"],Jb=["get","post","put","delete"],e1=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],An=["true","false"],Re={},mce={a:{attrs:{href:null,ping:null,type:null,media:null,target:Vu,hreflang:null}},abbr:Re,address:Re,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:Re,aside:Re,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:Re,base:{attrs:{href:null,target:Vu}},bdi:Re,bdo:Re,blockquote:{attrs:{cite:null}},body:Re,br:Re,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:e1,formmethod:Jb,formnovalidate:["novalidate"],formtarget:Vu,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:Re,center:Re,cite:Re,code:Re,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:Re,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:Re,div:Re,dl:Re,dt:Re,em:Re,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:Re,figure:Re,footer:Re,form:{attrs:{action:null,name:null,"accept-charset":Kb,autocomplete:["on","off"],enctype:e1,method:Jb,novalidate:["novalidate"],target:Vu}},h1:Re,h2:Re,h3:Re,h4:Re,h5:Re,h6:Re,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:Re,hgroup:Re,hr:Re,html:{attrs:{manifest:null}},i:Re,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:e1,formmethod:Jb,formnovalidate:["novalidate"],formtarget:Vu,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:Re,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:Re,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:Re,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Kb,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:Re,noscript:Re,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:Re,param:{attrs:{name:null,value:null}},pre:Re,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:Re,rt:Re,ruby:Re,samp:Re,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Kb}},section:Re,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:Re,source:{attrs:{src:null,type:null,media:null}},span:Re,strong:Re,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:Re,summary:Re,sup:Re,table:Re,tbody:Re,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:Re,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:Re,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:Re,time:{attrs:{datetime:null}},title:Re,tr:Re,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:Re,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:Re},xV={accesskey:null,class:null,contenteditable:An,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:An,autocorrect:An,autocapitalize:An,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":An,"aria-autocomplete":["inline","list","both","none"],"aria-busy":An,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":An,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":An,"aria-hidden":An,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":An,"aria-multiselectable":An,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":An,"aria-relevant":null,"aria-required":An,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},yV="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(s=>"on"+s);for(let s of yV)xV[s]=null;class qh{constructor(t,e){this.tags=Object.assign(Object.assign({},mce),t),this.globalAttrs=Object.assign(Object.assign({},xV),e),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}qh.default=new qh;function pc(s,t,e=s.length){if(!t)return"";let i=t.firstChild,n=i&&i.getChild("TagName");return n?s.sliceString(n.from,Math.min(n.to,e)):""}function wc(s,t=!1){for(;s;s=s.parent)if(s.name=="Element")if(t)t=!1;else return s;return null}function vV(s,t,e){let i=e.tags[pc(s,wc(t))];return(i==null?void 0:i.children)||e.allTags}function iv(s,t){let e=[];for(let i=wc(t);i&&!i.type.isTop;i=wc(i.parent)){let n=pc(s,i);if(n&&i.lastChild.name=="CloseTag")break;n&&e.indexOf(n)<0&&(t.name=="EndTag"||t.from>=i.firstChild.to)&&e.push(n)}return e}const _V=/^[:\-\.\w\u00b7-\uffff]*$/;function i5(s,t,e,i,n){let r=/\s*>/.test(s.sliceDoc(n,n+5))?"":">",o=wc(e,!0);return{from:i,to:n,options:vV(s.doc,o,t).map(l=>({label:l,type:"type"})).concat(iv(s.doc,e).map((l,a)=>({label:"/"+l,apply:"/"+l+r,type:"type",boost:99-a}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function n5(s,t,e,i){let n=/\s*>/.test(s.sliceDoc(i,i+5))?"":">";return{from:e,to:i,options:iv(s.doc,t).map((r,o)=>({label:r,apply:r+n,type:"type",boost:99-o})),validFor:_V}}function gce(s,t,e,i){let n=[],r=0;for(let o of vV(s.doc,e,t))n.push({label:"<"+o,type:"type"});for(let o of iv(s.doc,e))n.push({label:"</"+o+">",type:"type",boost:99-r++});return{from:i,to:i,options:n,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function pce(s,t,e,i,n){let r=wc(e),o=r?t.tags[pc(s.doc,r)]:null,l=o&&o.attrs?Object.keys(o.attrs):[],a=o&&o.globalAttrs===!1?l:l.length?l.concat(t.globalAttrNames):t.globalAttrNames;return{from:i,to:n,options:a.map(c=>({label:c,type:"property"})),validFor:_V}}function wce(s,t,e,i,n){var r;let o=(r=e.parent)===null||r===void 0?void 0:r.getChild("AttributeName"),l=[],a;if(o){let c=s.sliceDoc(o.from,o.to),h=t.globalAttrs[c];if(!h){let f=wc(e),m=f?t.tags[pc(s.doc,f)]:null;h=(m==null?void 0:m.attrs)&&m.attrs[c]}if(h){let f=s.sliceDoc(i,n).toLowerCase(),m='"',w='"';/^['"]/.test(f)?(a=f[0]=='"'?/^[^"]*$/:/^[^']*$/,m="",w=s.sliceDoc(n,n+1)==f[0]?"":f[0],f=f.slice(1),i++):a=/^[^\s<>='"]*$/;for(let O of h)l.push({label:O,apply:m+O+w,type:"constant"})}}return{from:i,to:n,options:l,validFor:a}}function kV(s,t){let{state:e,pos:i}=t,n=kt(e).resolveInner(i,-1),r=n.resolve(i);for(let o=i,l;r==n&&(l=n.childBefore(o));){let a=l.lastChild;if(!a||!a.type.isError||a.from<a.to)break;r=n=l,o=a.from}return n.name=="TagName"?n.parent&&/CloseTag$/.test(n.parent.name)?n5(e,n,n.from,i):i5(e,s,n,n.from,i):n.name=="StartTag"?i5(e,s,n,i,i):n.name=="StartCloseTag"||n.name=="IncompleteCloseTag"?n5(e,n,i,i):n.name=="OpenTag"||n.name=="SelfClosingTag"||n.name=="AttributeName"?pce(e,s,n,n.name=="AttributeName"?n.from:i,i):n.name=="Is"||n.name=="AttributeValue"||n.name=="UnquotedAttributeValue"?wce(e,s,n,n.name=="Is"?i:n.from,i):t.explicit&&(r.name=="Element"||r.name=="Text"||r.name=="Document")?gce(e,s,n,i):null}function bce(s){return kV(qh.default,s)}function Oce(s){let{extraTags:t,extraGlobalAttributes:e}=s,i=e||t?new qh(t,e):qh.default;return n=>kV(i,n)}const xce=lr.parser.configure({top:"SingleExpression"}),SV=[{tag:"script",attrs:s=>s.type=="text/typescript"||s.lang=="ts",parser:gV.parser},{tag:"script",attrs:s=>s.type=="text/babel"||s.type=="text/jsx",parser:pV.parser},{tag:"script",attrs:s=>s.type=="text/typescript-jsx",parser:wV.parser},{tag:"script",attrs(s){return/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(s.type)},parser:xce},{tag:"script",attrs(s){return!s.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(s.type)},parser:lr.parser},{tag:"style",attrs(s){return(!s.lang||s.lang=="css")&&(!s.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(s.type))},parser:Kg.parser}],CV=[{name:"style",parser:Kg.parser.configure({top:"Styles"})}].concat(yV.map(s=>({name:s,parser:lr.parser}))),PV=fc.define({name:"html",parser:Yle.configure({props:[wd.add({Element(s){let t=/^(\s*)(<\/)?/.exec(s.textAfter);return s.node.to<=s.pos+t[0].length?s.continue():s.lineIndent(s.node.from)+(t[2]?0:s.unit)},"OpenTag CloseTag SelfClosingTag"(s){return s.column(s.node.from)+s.unit},Document(s){if(s.pos+/\s*/.exec(s.textAfter)[0].length<s.node.to)return s.continue();let t=null,e;for(let i=s.node;;){let n=i.lastChild;if(!n||n.name!="Element"||n.to!=i.to)break;t=i=n}return t&&!((e=t.lastChild)&&(e.name=="CloseTag"||e.name=="SelfClosingTag"))?s.lineIndent(t.from)+s.unit:null}}),Pc.add({Element(s){let t=s.firstChild,e=s.lastChild;return!t||t.name!="OpenTag"?null:{from:t.to,to:e.name=="CloseTag"?e.from:s.to}}}),i7.add({"OpenTag CloseTag":s=>s.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}}),Xm=PV.configure({wrap:sV(SV,CV)});function TV(s={}){let t="",e;s.matchClosingTags===!1&&(t="noMatch"),s.selfClosingTags===!0&&(t=(t?t+" ":"")+"selfClosing"),(s.nestedLanguages&&s.nestedLanguages.length||s.nestedAttributes&&s.nestedAttributes.length)&&(e=sV((s.nestedLanguages||[]).concat(SV),(s.nestedAttributes||[]).concat(CV)));let i=e?PV.configure({wrap:e,dialect:t}):t?Xm.configure({dialect:t}):Xm;return new Nh(i,[Xm.data.of({autocomplete:Oce(s)}),s.autoCloseTags!==!1?yce:[],uce().support,Pae().support])}const s5=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),yce=Ee.inputHandler.of((s,t,e,i,n)=>{if(s.composing||s.state.readOnly||t!=e||i!=">"&&i!="/"||!Xm.isActiveAt(s.state,t,-1))return!1;let r=n(),{state:o}=r,l=o.changeByRange(a=>{var c,h,f;let m=o.doc.sliceString(a.from-1,a.to)==i,{head:w}=a,O=kt(o).resolveInner(w,-1),v;if(m&&i==">"&&O.name=="EndTag"){let k=O.parent;if(((h=(c=k.parent)===null||c===void 0?void 0:c.lastChild)===null||h===void 0?void 0:h.name)!="CloseTag"&&(v=pc(o.doc,k.parent,w))&&!s5.has(v)){let C=w+(o.doc.sliceString(w,w+1)===">"?1:0),P=`</${v}>`;return{range:a,changes:{from:w,to:C,insert:P}}}}else if(m&&i=="/"&&O.name=="IncompleteCloseTag"){let k=O.parent;if(O.from==w-2&&((f=k.lastChild)===null||f===void 0?void 0:f.name)!="CloseTag"&&(v=pc(o.doc,k,w))&&!s5.has(v)){let C=w+(o.doc.sliceString(w,w+1)===">"?1:0),P=`${v}>`;return{range:ie.cursor(w+P.length,-1),changes:{from:w,to:C,insert:P}}}}return{range:a}});return l.changes.empty?!1:(s.dispatch([r,o.update(l,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});class Jg{static create(t,e,i,n,r){let o=n+(n<<8)+t+(e<<4)|0;return new Jg(t,e,i,o,r,[],[])}constructor(t,e,i,n,r,o,l){this.type=t,this.value=e,this.from=i,this.hash=n,this.end=r,this.children=o,this.positions=l,this.hashProp=[[Ne.contextHash,n]]}addChild(t,e){t.prop(Ne.contextHash)!=this.hash&&(t=new mt(t.type,t.children,t.positions,t.length,this.hashProp)),this.children.push(t),this.positions.push(e)}toTree(t,e=this.end){let i=this.children.length-1;return i>=0&&(e=Math.max(e,this.positions[i]+this.children[i].length+this.from)),new mt(t.types[this.type],this.children,this.positions,e-this.from).balance({makeTree:(n,r,o)=>new mt(ui.none,n,r,o,this.hashProp)})}}var ce;(function(s){s[s.Document=1]="Document",s[s.CodeBlock=2]="CodeBlock",s[s.FencedCode=3]="FencedCode",s[s.Blockquote=4]="Blockquote",s[s.HorizontalRule=5]="HorizontalRule",s[s.BulletList=6]="BulletList",s[s.OrderedList=7]="OrderedList",s[s.ListItem=8]="ListItem",s[s.ATXHeading1=9]="ATXHeading1",s[s.ATXHeading2=10]="ATXHeading2",s[s.ATXHeading3=11]="ATXHeading3",s[s.ATXHeading4=12]="ATXHeading4",s[s.ATXHeading5=13]="ATXHeading5",s[s.ATXHeading6=14]="ATXHeading6",s[s.SetextHeading1=15]="SetextHeading1",s[s.SetextHeading2=16]="SetextHeading2",s[s.HTMLBlock=17]="HTMLBlock",s[s.LinkReference=18]="LinkReference",s[s.Paragraph=19]="Paragraph",s[s.CommentBlock=20]="CommentBlock",s[s.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",s[s.Escape=22]="Escape",s[s.Entity=23]="Entity",s[s.HardBreak=24]="HardBreak",s[s.Emphasis=25]="Emphasis",s[s.StrongEmphasis=26]="StrongEmphasis",s[s.Link=27]="Link",s[s.Image=28]="Image",s[s.InlineCode=29]="InlineCode",s[s.HTMLTag=30]="HTMLTag",s[s.Comment=31]="Comment",s[s.ProcessingInstruction=32]="ProcessingInstruction",s[s.Autolink=33]="Autolink",s[s.HeaderMark=34]="HeaderMark",s[s.QuoteMark=35]="QuoteMark",s[s.ListMark=36]="ListMark",s[s.LinkMark=37]="LinkMark",s[s.EmphasisMark=38]="EmphasisMark",s[s.CodeMark=39]="CodeMark",s[s.CodeText=40]="CodeText",s[s.CodeInfo=41]="CodeInfo",s[s.LinkTitle=42]="LinkTitle",s[s.LinkLabel=43]="LinkLabel",s[s.URL=44]="URL"})(ce||(ce={}));class vce{constructor(t,e){this.start=t,this.content=e,this.marks=[],this.parsers=[]}}class _ce{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let t=this.skipSpace(this.basePos);this.indent=this.countIndent(t,this.pos,this.indent),this.pos=t,this.next=t==this.text.length?-1:this.text.charCodeAt(t)}skipSpace(t){return ah(this.text,t)}reset(t){for(this.text=t,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(t){this.basePos=t,this.baseIndent=this.countIndent(t,this.pos,this.indent)}moveBaseColumn(t){this.baseIndent=t,this.basePos=this.findColumn(t)}addMarker(t){this.markers.push(t)}countIndent(t,e=0,i=0){for(let n=e;n<t;n++)i+=this.text.charCodeAt(n)==9?4-i%4:1;return i}findColumn(t){let e=0;for(let i=0;e<this.text.length&&i<t;e++)i+=this.text.charCodeAt(e)==9?4-i%4:1;return e}scrub(){if(!this.baseIndent)return this.text;let t="";for(let e=0;e<this.basePos;e++)t+=" ";return t+this.text.slice(this.basePos)}}function r5(s,t,e){if(e.pos==e.text.length||s!=t.block&&e.indent>=t.stack[e.depth+1].value+e.baseIndent)return!0;if(e.indent>=e.baseIndent+4)return!1;let i=(s.type==ce.OrderedList?rv:sv)(e,t,!1);return i>0&&(s.type!=ce.BulletList||nv(e,t,!1)<0)&&e.text.charCodeAt(e.pos+i-1)==s.value}const EV={[ce.Blockquote](s,t,e){return e.next!=62?!1:(e.markers.push(Ge(ce.QuoteMark,t.lineStart+e.pos,t.lineStart+e.pos+1)),e.moveBase(e.pos+(ws(e.text.charCodeAt(e.pos+1))?2:1)),s.end=t.lineStart+e.text.length,!0)},[ce.ListItem](s,t,e){return e.indent<e.baseIndent+s.value&&e.next>-1?!1:(e.moveBaseColumn(e.baseIndent+s.value),!0)},[ce.OrderedList]:r5,[ce.BulletList]:r5,[ce.Document](){return!0}};function ws(s){return s==32||s==9||s==10||s==13}function ah(s,t=0){for(;t<s.length&&ws(s.charCodeAt(t));)t++;return t}function o5(s,t,e){for(;t>e&&ws(s.charCodeAt(t-1));)t--;return t}function AV(s){if(s.next!=96&&s.next!=126)return-1;let t=s.pos+1;for(;t<s.text.length&&s.text.charCodeAt(t)==s.next;)t++;if(t<s.pos+3)return-1;if(s.next==96){for(let e=t;e<s.text.length;e++)if(s.text.charCodeAt(e)==96)return-1}return t}function IV(s){return s.next!=62?-1:s.text.charCodeAt(s.pos+1)==32?2:1}function nv(s,t,e){if(s.next!=42&&s.next!=45&&s.next!=95)return-1;let i=1;for(let n=s.pos+1;n<s.text.length;n++){let r=s.text.charCodeAt(n);if(r==s.next)i++;else if(!ws(r))return-1}return e&&s.next==45&&MV(s)>-1&&s.depth==t.stack.length&&t.parser.leafBlockParsers.indexOf(QV.SetextHeading)>-1||i<3?-1:1}function RV(s,t){for(let e=s.stack.length-1;e>=0;e--)if(s.stack[e].type==t)return!0;return!1}function sv(s,t,e){return(s.next==45||s.next==43||s.next==42)&&(s.pos==s.text.length-1||ws(s.text.charCodeAt(s.pos+1)))&&(!e||RV(t,ce.BulletList)||s.skipSpace(s.pos+2)<s.text.length)?1:-1}function rv(s,t,e){let i=s.pos,n=s.next;for(;n>=48&&n<=57;){i++;if(i==s.text.length)return-1;n=s.text.charCodeAt(i)}return i==s.pos||i>s.pos+9||n!=46&&n!=41||i<s.text.length-1&&!ws(s.text.charCodeAt(i+1))||e&&!RV(t,ce.OrderedList)&&(s.skipSpace(i+1)==s.text.length||i>s.pos+1||s.next!=49)?-1:i+1-s.pos}function VV(s){if(s.next!=35)return-1;let t=s.pos+1;for(;t<s.text.length&&s.text.charCodeAt(t)==35;)t++;if(t<s.text.length&&s.text.charCodeAt(t)!=32)return-1;let e=t-s.pos;return e>6?-1:e}function MV(s){if(s.next!=45&&s.next!=61||s.indent>=s.baseIndent+4)return-1;let t=s.pos+1;for(;t<s.text.length&&s.text.charCodeAt(t)==s.next;)t++;let e=t;for(;t<s.text.length&&ws(s.text.charCodeAt(t));)t++;return t==s.text.length?e:-1}const JO=/^[ \t]*$/,LV=/-->/,BV=/\?>/,ex=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,LV],[/^\s*<\?/,BV],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,JO],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,JO]];function $V(s,t,e){if(s.next!=60)return-1;let i=s.text.slice(s.pos);for(let n=0,r=ex.length-(e?1:0);n<r;n++)if(ex[n][0].test(i))return n;return-1}function l5(s,t){let e=s.countIndent(t,s.pos,s.indent),i=s.countIndent(s.skipSpace(t),t,e);return i>=e+5?e+1:i}function ll(s,t,e){let i=s.length-1;i>=0&&s[i].to==t&&s[i].type==ce.CodeText?s[i].to=e:s.push(Ge(ce.CodeText,t,e))}const pm={LinkReference:void 0,IndentedCode(s,t){let e=t.baseIndent+4;if(t.indent<e)return!1;let i=t.findColumn(e),n=s.lineStart+i,r=s.lineStart+t.text.length,o=[],l=[];for(ll(o,n,r);s.nextLine()&&t.depth>=s.stack.length;)if(t.pos==t.text.length){ll(l,s.lineStart-1,s.lineStart);for(let a of t.markers)l.push(a)}else{if(t.indent<e)break;{if(l.length){for(let c of l)c.type==ce.CodeText?ll(o,c.from,c.to):o.push(c);l=[]}ll(o,s.lineStart-1,s.lineStart);for(let c of t.markers)o.push(c);r=s.lineStart+t.text.length;let a=s.lineStart+t.findColumn(t.baseIndent+4);a<r&&ll(o,a,r)}}return l.length&&(l=l.filter(a=>a.type!=ce.CodeText),l.length&&(t.markers=l.concat(t.markers))),s.addNode(s.buffer.writeElements(o,-n).finish(ce.CodeBlock,r-n),n),!0},FencedCode(s,t){let e=AV(t);if(e<0)return!1;let i=s.lineStart+t.pos,n=t.next,r=e-t.pos,o=t.skipSpace(e),l=o5(t.text,t.text.length,o),a=[Ge(ce.CodeMark,i,i+r)];o<l&&a.push(Ge(ce.CodeInfo,s.lineStart+o,s.lineStart+l));for(let c=!0;s.nextLine()&&t.depth>=s.stack.length;c=!1){let h=t.pos;if(t.indent-t.baseIndent<4)for(;h<t.text.length&&t.text.charCodeAt(h)==n;)h++;if(h-t.pos>=r&&t.skipSpace(h)==t.text.length){for(let f of t.markers)a.push(f);a.push(Ge(ce.CodeMark,s.lineStart+t.pos,s.lineStart+h)),s.nextLine();break}else{c||ll(a,s.lineStart-1,s.lineStart);for(let w of t.markers)a.push(w);let f=s.lineStart+t.basePos,m=s.lineStart+t.text.length;f<m&&ll(a,f,m)}}return s.addNode(s.buffer.writeElements(a,-i).finish(ce.FencedCode,s.prevLineEnd()-i),i),!0},Blockquote(s,t){let e=IV(t);return e<0?!1:(s.startContext(ce.Blockquote,t.pos),s.addNode(ce.QuoteMark,s.lineStart+t.pos,s.lineStart+t.pos+1),t.moveBase(t.pos+e),null)},HorizontalRule(s,t){if(nv(t,s,!1)<0)return!1;let e=s.lineStart+t.pos;return s.nextLine(),s.addNode(ce.HorizontalRule,e),!0},BulletList(s,t){let e=sv(t,s,!1);if(e<0)return!1;s.block.type!=ce.BulletList&&s.startContext(ce.BulletList,t.basePos,t.next);let i=l5(t,t.pos+1);return s.startContext(ce.ListItem,t.basePos,i-t.baseIndent),s.addNode(ce.ListMark,s.lineStart+t.pos,s.lineStart+t.pos+e),t.moveBaseColumn(i),null},OrderedList(s,t){let e=rv(t,s,!1);if(e<0)return!1;s.block.type!=ce.OrderedList&&s.startContext(ce.OrderedList,t.basePos,t.text.charCodeAt(t.pos+e-1));let i=l5(t,t.pos+e);return s.startContext(ce.ListItem,t.basePos,i-t.baseIndent),s.addNode(ce.ListMark,s.lineStart+t.pos,s.lineStart+t.pos+e),t.moveBaseColumn(i),null},ATXHeading(s,t){let e=VV(t);if(e<0)return!1;let i=t.pos,n=s.lineStart+i,r=o5(t.text,t.text.length,i),o=r;for(;o>i&&t.text.charCodeAt(o-1)==t.next;)o--;(o==r||o==i||!ws(t.text.charCodeAt(o-1)))&&(o=t.text.length);let l=s.buffer.write(ce.HeaderMark,0,e).writeElements(s.parser.parseInline(t.text.slice(i+e+1,o),n+e+1),-n);o<t.text.length&&l.write(ce.HeaderMark,o-i,r-i);let a=l.finish(ce.ATXHeading1-1+e,t.text.length-i);return s.nextLine(),s.addNode(a,n),!0},HTMLBlock(s,t){let e=$V(t,s,!1);if(e<0)return!1;let i=s.lineStart+t.pos,n=ex[e][1],r=[],o=n!=JO;for(;!n.test(t.text)&&s.nextLine();){if(t.depth<s.stack.length){o=!1;break}for(let c of t.markers)r.push(c)}o&&s.nextLine();let l=n==LV?ce.CommentBlock:n==BV?ce.ProcessingInstructionBlock:ce.HTMLBlock,a=s.prevLineEnd();return s.addNode(s.buffer.writeElements(r,-i).finish(l,a-i),i),!0},SetextHeading:void 0};class kce{constructor(t){this.stage=0,this.elts=[],this.pos=0,this.start=t.start,this.advance(t.content)}nextLine(t,e,i){if(this.stage==-1)return!1;let n=i.content+`
`+e.scrub(),r=this.advance(n);return r>-1&&r<n.length?this.complete(t,i,r):!1}finish(t,e){return(this.stage==2||this.stage==3)&&ah(e.content,this.pos)==e.content.length?this.complete(t,e,e.content.length):!1}complete(t,e,i){return t.addLeafElement(e,Ge(ce.LinkReference,this.start,this.start+i,this.elts)),!0}nextStage(t){return t?(this.pos=t.to-this.start,this.elts.push(t),this.stage++,!0):(t===!1&&(this.stage=-1),!1)}advance(t){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(qV(t,this.pos,this.start,!0)))return-1;if(t.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(Ge(ce.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(ZV(t,ah(t,this.pos),this.start)))return-1}else if(this.stage==2){let e=ah(t,this.pos),i=0;if(e>this.pos){let n=HV(t,e,this.start);if(n){let r=t1(t,n.to-this.start);r>0&&(this.nextStage(n),i=r)}}return i||(i=t1(t,this.pos)),i>0&&i<t.length?i:-1}else return t1(t,this.pos)}}}function t1(s,t){for(;t<s.length;t++){let e=s.charCodeAt(t);if(e==10)break;if(!ws(e))return-1}return t}class Sce{nextLine(t,e,i){let n=e.depth<t.stack.length?-1:MV(e),r=e.next;if(n<0)return!1;let o=Ge(ce.HeaderMark,t.lineStart+e.pos,t.lineStart+n);return t.nextLine(),t.addLeafElement(i,Ge(r==61?ce.SetextHeading1:ce.SetextHeading2,i.start,t.prevLineEnd(),[...t.parser.parseInline(i.content,i.start),o])),!0}finish(){return!1}}const QV={LinkReference(s,t){return t.content.charCodeAt(0)==91?new kce(t):null},SetextHeading(){return new Sce}},Cce=[(s,t)=>VV(t)>=0,(s,t)=>AV(t)>=0,(s,t)=>IV(t)>=0,(s,t)=>sv(t,s,!0)>=0,(s,t)=>rv(t,s,!0)>=0,(s,t)=>nv(t,s,!0)>=0,(s,t)=>$V(t,s,!0)>=0],Pce={text:"",end:0};class Tce{constructor(t,e,i,n){this.parser=t,this.input=e,this.ranges=n,this.line=new _ce,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=n[n.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=n[0].from,this.block=Jg.create(ce.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=i.length?new Rce(i,e):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:t}=this;for(;;){for(let i=0;;){let n=t.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;i<t.markers.length&&(!n||t.markers[i].from<n.end);){let r=t.markers[i++];this.addNode(r.type,r.from,r.to)}if(!n)break;this.finishContext()}if(t.pos<t.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(t.basePos))return null;e:for(;;){for(let i of this.parser.blockParsers)if(i){let n=i(this,t);if(n!=!1){if(n==!0)return null;t.forward();continue e}}break}let e=new vce(this.lineStart+t.pos,t.text.slice(t.pos));for(let i of this.parser.leafBlockParsers)if(i){let n=i(this,e);n&&e.parsers.push(n)}e:for(;this.nextLine()&&t.pos!=t.text.length;){if(t.indent<t.baseIndent+4){for(let i of this.parser.endLeafBlock)if(i(this,t,e))break e}for(let i of e.parsers)if(i.nextLine(this,t,e))return null;e.content+=`
`+t.scrub();for(let i of t.markers)e.marks.push(i)}return this.finishLeaf(e),null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}reuseFragment(t){if(!this.fragments.moveTo(this.absoluteLineStart+t,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let e=this.fragments.takeNodes(this);return e?(this.absoluteLineStart+=e,this.lineStart=XV(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0):!1}get depth(){return this.stack.length}parentType(t=this.depth-1){return this.parser.nodeSet.types[this.stack[t].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(t){let e=Pce;if(e.end=t,t>=this.to)e.text="";else if(e.text=this.lineChunkAt(t),e.end+=e.text.length,this.ranges.length>1){let i=this.absoluteLineStart,n=this.rangeI;for(;this.ranges[n].to<e.end;){n++;let r=this.ranges[n].from,o=this.lineChunkAt(r);e.end=r+o.length,e.text=e.text.slice(0,this.ranges[n-1].to-i)+o,i=e.end-e.text.length}}return e}readLine(){let{line:t}=this,{text:e,end:i}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=i,t.reset(e);t.depth<this.stack.length;t.depth++){let n=this.stack[t.depth],r=this.parser.skipContextMarkup[n.type];if(!r)throw new Error("Unhandled block context "+ce[n.type]);if(!r(n,this,t))break;t.forward()}}lineChunkAt(t){let e=this.input.chunk(t),i;if(this.input.lineChunks)i=e==`
`?"":e;else{let n=e.indexOf(`
`);i=n<0?e:e.slice(0,n)}return t+i.length>this.to?i.slice(0,this.to-t):i}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(t,e,i=0){this.block=Jg.create(t,i,this.lineStart+e,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(t,e,i=0){this.startContext(this.parser.getNodeType(t),e,i)}addNode(t,e,i){typeof t=="number"&&(t=new mt(this.parser.nodeSet.types[t],bc,bc,(i??this.prevLineEnd())-e)),this.block.addChild(t,e-this.block.from)}addElement(t){this.block.addChild(t.toTree(this.parser.nodeSet),t.from-this.block.from)}addLeafElement(t,e){this.addNode(this.buffer.writeElements(nx(e.children,t.marks),-e.from).finish(e.type,e.to-e.from),e.from)}finishContext(){let t=this.stack.pop(),e=this.stack[this.stack.length-1];e.addChild(t.toTree(this.parser.nodeSet),t.from-e.from),this.block=e}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(t){return this.ranges.length>1?DV(this.ranges,0,t.topNode,this.ranges[0].from,this.reusePlaceholders):t}finishLeaf(t){for(let i of t.parsers)if(i.finish(this,t))return;let e=nx(this.parser.parseInline(t.content,t.start),t.marks);this.addNode(this.buffer.writeElements(e,-t.start).finish(ce.Paragraph,t.content.length),t.start)}elt(t,e,i,n){return typeof t=="string"?Ge(this.parser.getNodeType(t),e,i,n):new zV(t,e)}get buffer(){return new FV(this.parser.nodeSet)}}function DV(s,t,e,i,n){let r=s[t].to,o=[],l=[],a=e.from+i;function c(h,f){for(;f?h>=r:h>r;){let m=s[t+1].from-r;i+=m,h+=m,t++,r=s[t].to}}for(let h=e.firstChild;h;h=h.nextSibling){c(h.from+i,!0);let f=h.from+i,m,w=n.get(h.tree);w?m=w:h.to+i>r?(m=DV(s,t,h,i,n),c(h.to+i,!1)):m=h.toTree(),o.push(m),l.push(f-a)}return c(e.to+i,!1),new mt(e.type,o,l,e.to+i-a,e.tree?e.tree.propValues:void 0)}class Vp extends $y{constructor(t,e,i,n,r,o,l,a,c){super(),this.nodeSet=t,this.blockParsers=e,this.leafBlockParsers=i,this.blockNames=n,this.endLeafBlock=r,this.skipContextMarkup=o,this.inlineParsers=l,this.inlineNames=a,this.wrappers=c,this.nodeTypes=Object.create(null);for(let h of t.types)this.nodeTypes[h.name]=h.id}createParse(t,e,i){let n=new Tce(this,t,e,i);for(let r of this.wrappers)n=r(n,t,e,i);return n}configure(t){let e=tx(t);if(!e)return this;let{nodeSet:i,skipContextMarkup:n}=this,r=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),l=this.blockNames.slice(),a=this.inlineParsers.slice(),c=this.inlineNames.slice(),h=this.endLeafBlock.slice(),f=this.wrappers;if(Mu(e.defineNodes)){n=Object.assign({},n);let m=i.types.slice(),w;for(let O of e.defineNodes){let{name:v,block:k,composite:C,style:P}=typeof O=="string"?{name:O}:O;if(m.some(D=>D.name==v))continue;C&&(n[m.length]=(D,q,$)=>C(q,$,D.value));let V=m.length,Q=C?["Block","BlockContext"]:k?V>=ce.ATXHeading1&&V<=ce.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;m.push(ui.define({id:V,name:v,props:Q&&[[Ne.group,Q]]})),P&&(w||(w={}),Array.isArray(P)||P instanceof Mn?w[v]=P:Object.assign(w,P))}i=new gd(m),w&&(i=i.extend(Cc(w)))}if(Mu(e.props)&&(i=i.extend(...e.props)),Mu(e.remove))for(let m of e.remove){let w=this.blockNames.indexOf(m),O=this.inlineNames.indexOf(m);w>-1&&(r[w]=o[w]=void 0),O>-1&&(a[O]=void 0)}if(Mu(e.parseBlock))for(let m of e.parseBlock){let w=l.indexOf(m.name);if(w>-1)r[w]=m.parse,o[w]=m.leaf;else{let O=m.before?wm(l,m.before):m.after?wm(l,m.after)+1:l.length-1;r.splice(O,0,m.parse),o.splice(O,0,m.leaf),l.splice(O,0,m.name)}m.endLeaf&&h.push(m.endLeaf)}if(Mu(e.parseInline))for(let m of e.parseInline){let w=c.indexOf(m.name);if(w>-1)a[w]=m.parse;else{let O=m.before?wm(c,m.before):m.after?wm(c,m.after)+1:c.length-1;a.splice(O,0,m.parse),c.splice(O,0,m.name)}}return e.wrap&&(f=f.concat(e.wrap)),new Vp(i,r,o,l,h,n,a,c,f)}getNodeType(t){let e=this.nodeTypes[t];if(e==null)throw new RangeError(`Unknown node type '${t}'`);return e}parseInline(t,e){let i=new Ace(this,t,e);e:for(let n=e;n<i.end;){let r=i.char(n);for(let o of this.inlineParsers)if(o){let l=o(i,r,n);if(l>=0){n=l;continue e}}n++}return i.resolveMarkers(0)}}function Mu(s){return s!=null&&s.length>0}function tx(s){if(!Array.isArray(s))return s;if(s.length==0)return null;let t=tx(s[0]);if(s.length==1)return t;let e=tx(s.slice(1));if(!e||!t)return t||e;let i=(o,l)=>(o||bc).concat(l||bc),n=t.wrap,r=e.wrap;return{props:i(t.props,e.props),defineNodes:i(t.defineNodes,e.defineNodes),parseBlock:i(t.parseBlock,e.parseBlock),parseInline:i(t.parseInline,e.parseInline),remove:i(t.remove,e.remove),wrap:n?r?(o,l,a,c)=>n(r(o,l,a,c),l,a,c):n:r}}function wm(s,t){let e=s.indexOf(t);if(e<0)throw new RangeError(`Position specified relative to unknown parser ${t}`);return e}let NV=[ui.none];for(let s=1,t;t=ce[s];s++)NV[s]=ui.define({id:s,name:t,props:s>=ce.Escape?[]:[[Ne.group,s in EV?["Block","BlockContext"]:["Block","LeafBlock"]]],top:t=="Document"});const bc=[];let FV=class{constructor(t){this.nodeSet=t,this.content=[],this.nodes=[]}write(t,e,i,n=0){return this.content.push(t,e,i,4+n*4),this}writeElements(t,e=0){for(let i of t)i.writeTo(this,e);return this}finish(t,e){return mt.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:t,length:e})}};class Xh{constructor(t,e,i,n=bc){this.type=t,this.from=e,this.to=i,this.children=n}writeTo(t,e){let i=t.content.length;t.writeElements(this.children,e),t.content.push(this.type,this.from+e,this.to+e,t.content.length+4-i)}toTree(t){return new FV(t).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}}class zV{constructor(t,e){this.tree=t,this.from=e}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return bc}writeTo(t,e){t.nodes.push(this.tree),t.content.push(t.nodes.length-1,this.from+e,this.to+e,-1)}toTree(){return this.tree}}function Ge(s,t,e,i){return new Xh(s,t,e,i)}const WV={resolve:"Emphasis",mark:"EmphasisMark"},UV={resolve:"Emphasis",mark:"EmphasisMark"},$a={},ix={};class Kn{constructor(t,e,i,n){this.type=t,this.from=e,this.to=i,this.side=n}}const a5="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let jh=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{jh=new RegExp("[\\p{S}|\\p{P}]","u")}catch{}const i1={Escape(s,t,e){if(t!=92||e==s.end-1)return-1;let i=s.char(e+1);for(let n=0;n<a5.length;n++)if(a5.charCodeAt(n)==i)return s.append(Ge(ce.Escape,e,e+2));return-1},Entity(s,t,e){if(t!=38)return-1;let i=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(s.slice(e+1,e+31));return i?s.append(Ge(ce.Entity,e,e+1+i[0].length)):-1},InlineCode(s,t,e){if(t!=96||e&&s.char(e-1)==96)return-1;let i=e+1;for(;i<s.end&&s.char(i)==96;)i++;let n=i-e,r=0;for(;i<s.end;i++)if(s.char(i)==96){if(r++,r==n&&s.char(i+1)!=96)return s.append(Ge(ce.InlineCode,e,i+1,[Ge(ce.CodeMark,e,e+n),Ge(ce.CodeMark,i+1-n,i+1)]))}else r=0;return-1},HTMLTag(s,t,e){if(t!=60||e==s.end-1)return-1;let i=s.slice(e+1,s.end),n=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(i);if(n)return s.append(Ge(ce.Autolink,e,e+1+n[0].length,[Ge(ce.LinkMark,e,e+1),Ge(ce.URL,e+1,e+n[0].length),Ge(ce.LinkMark,e+n[0].length,e+1+n[0].length)]));let r=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(i);if(r)return s.append(Ge(ce.Comment,e,e+1+r[0].length));let o=/^\?[^]*?\?>/.exec(i);if(o)return s.append(Ge(ce.ProcessingInstruction,e,e+1+o[0].length));let l=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(i);return l?s.append(Ge(ce.HTMLTag,e,e+1+l[0].length)):-1},Emphasis(s,t,e){if(t!=95&&t!=42)return-1;let i=e+1;for(;s.char(i)==t;)i++;let n=s.slice(e-1,e),r=s.slice(i,i+1),o=jh.test(n),l=jh.test(r),a=/\s|^$/.test(n),c=/\s|^$/.test(r),h=!c&&(!l||a||o),f=!a&&(!o||c||l),m=h&&(t==42||!f||o),w=f&&(t==42||!h||l);return s.append(new Kn(t==95?WV:UV,e,i,(m?1:0)|(w?2:0)))},HardBreak(s,t,e){if(t==92&&s.char(e+1)==10)return s.append(Ge(ce.HardBreak,e,e+2));if(t==32){let i=e+1;for(;s.char(i)==32;)i++;if(s.char(i)==10&&i>=e+2)return s.append(Ge(ce.HardBreak,e,i+1))}return-1},Link(s,t,e){return t==91?s.append(new Kn($a,e,e+1,1)):-1},Image(s,t,e){return t==33&&s.char(e+1)==91?s.append(new Kn(ix,e,e+2,1)):-1},LinkEnd(s,t,e){if(t!=93)return-1;for(let i=s.parts.length-1;i>=0;i--){let n=s.parts[i];if(n instanceof Kn&&(n.type==$a||n.type==ix)){if(!n.side||s.skipSpace(n.to)==e&&!/[(\[]/.test(s.slice(e+1,e+2)))return s.parts[i]=null,-1;let r=s.takeContent(i),o=s.parts[i]=Ece(s,r,n.type==$a?ce.Link:ce.Image,n.from,e+1);if(n.type==$a)for(let l=0;l<i;l++){let a=s.parts[l];a instanceof Kn&&a.type==$a&&(a.side=0)}return o.to}}return-1}};function Ece(s,t,e,i,n){let{text:r}=s,o=s.char(n),l=n;if(t.unshift(Ge(ce.LinkMark,i,i+(e==ce.Image?2:1))),t.push(Ge(ce.LinkMark,n-1,n)),o==40){let a=s.skipSpace(n+1),c=ZV(r,a-s.offset,s.offset),h;c&&(a=s.skipSpace(c.to),a!=c.to&&(h=HV(r,a-s.offset,s.offset),h&&(a=s.skipSpace(h.to)))),s.char(a)==41&&(t.push(Ge(ce.LinkMark,n,n+1)),l=a+1,c&&t.push(c),h&&t.push(h),t.push(Ge(ce.LinkMark,a,l)))}else if(o==91){let a=qV(r,n-s.offset,s.offset,!1);a&&(t.push(a),l=a.to)}return Ge(e,i,l,t)}function ZV(s,t,e){if(s.charCodeAt(t)==60){for(let n=t+1;n<s.length;n++){let r=s.charCodeAt(n);if(r==62)return Ge(ce.URL,t+e,n+1+e);if(r==60||r==10)return!1}return null}else{let n=0,r=t;for(let o=!1;r<s.length;r++){let l=s.charCodeAt(r);if(ws(l))break;if(o)o=!1;else if(l==40)n++;else if(l==41){if(!n)break;n--}else l==92&&(o=!0)}return r>t?Ge(ce.URL,t+e,r+e):r==s.length?null:!1}}function HV(s,t,e){let i=s.charCodeAt(t);if(i!=39&&i!=34&&i!=40)return!1;let n=i==40?41:i;for(let r=t+1,o=!1;r<s.length;r++){let l=s.charCodeAt(r);if(o)o=!1;else{if(l==n)return Ge(ce.LinkTitle,t+e,r+1+e);l==92&&(o=!0)}}return null}function qV(s,t,e,i){for(let n=!1,r=t+1,o=Math.min(s.length,r+999);r<o;r++){let l=s.charCodeAt(r);if(n)n=!1;else{if(l==93)return i?!1:Ge(ce.LinkLabel,t+e,r+1+e);if(i&&!ws(l)&&(i=!1),l==91)return!1;l==92&&(n=!0)}}return null}class Ace{constructor(t,e,i){this.parser=t,this.text=e,this.offset=i,this.parts=[]}char(t){return t>=this.end?-1:this.text.charCodeAt(t-this.offset)}get end(){return this.offset+this.text.length}slice(t,e){return this.text.slice(t-this.offset,e-this.offset)}append(t){return this.parts.push(t),t.to}addDelimiter(t,e,i,n,r){return this.append(new Kn(t,e,i,(n?1:0)|(r?2:0)))}get hasOpenLink(){for(let t=this.parts.length-1;t>=0;t--){let e=this.parts[t];if(e instanceof Kn&&(e.type==$a||e.type==ix))return!0}return!1}addElement(t){return this.append(t)}resolveMarkers(t){for(let i=t;i<this.parts.length;i++){let n=this.parts[i];if(!(n instanceof Kn&&n.type.resolve&&n.side&2))continue;let r=n.type==WV||n.type==UV,o=n.to-n.from,l,a=i-1;for(;a>=t;a--){let v=this.parts[a];if(v instanceof Kn&&v.side&1&&v.type==n.type&&!(r&&(n.side&1||v.side&2)&&(v.to-v.from+o)%3==0&&((v.to-v.from)%3||o%3))){l=v;break}}if(!l)continue;let c=n.type.resolve,h=[],f=l.from,m=n.to;if(r){let v=Math.min(2,l.to-l.from,o);f=l.to-v,m=n.from+v,c=v==1?"Emphasis":"StrongEmphasis"}l.type.mark&&h.push(this.elt(l.type.mark,f,l.to));for(let v=a+1;v<i;v++)this.parts[v]instanceof Xh&&h.push(this.parts[v]),this.parts[v]=null;n.type.mark&&h.push(this.elt(n.type.mark,n.from,m));let w=this.elt(c,f,m,h);this.parts[a]=r&&l.from!=f?new Kn(l.type,l.from,f,l.side):null,(this.parts[i]=r&&n.to!=m?new Kn(n.type,m,n.to,n.side):null)?this.parts.splice(i,0,w):this.parts[i]=w}let e=[];for(let i=t;i<this.parts.length;i++){let n=this.parts[i];n instanceof Xh&&e.push(n)}return e}findOpeningDelimiter(t){for(let e=this.parts.length-1;e>=0;e--){let i=this.parts[e];if(i instanceof Kn&&i.type==t)return e}return null}takeContent(t){let e=this.resolveMarkers(t);return this.parts.length=t,e}skipSpace(t){return ah(this.text,t-this.offset)+this.offset}elt(t,e,i,n){return typeof t=="string"?Ge(this.parser.getNodeType(t),e,i,n):new zV(t,e)}}function nx(s,t){if(!t.length)return s;if(!s.length)return t;let e=s.slice(),i=0;for(let n of t){for(;i<e.length&&e[i].to<n.to;)i++;if(i<e.length&&e[i].from<n.from){let r=e[i];r instanceof Xh&&(e[i]=new Xh(r.type,r.from,r.to,nx(r.children,[n])))}else e.splice(i++,0,n)}return e}const Ice=[ce.CodeBlock,ce.ListItem,ce.OrderedList,ce.BulletList];class Rce{constructor(t,e){this.fragments=t,this.input=e,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,t.length&&(this.fragment=t[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(t,e){for(;this.fragment&&this.fragment.to<=t;)this.nextFragment();if(!this.fragment||this.fragment.from>(t?t-1:0))return!1;if(this.fragmentEnd<0){let r=this.fragment.to;for(;r>0&&this.input.read(r-1,r)!=`
`;)r--;this.fragmentEnd=r?r-1:0}let i=this.cursor;i||(i=this.cursor=this.fragment.tree.cursor(),i.firstChild());let n=t+this.fragment.offset;for(;i.to<=n;)if(!i.parent())return!1;for(;;){if(i.from>=n)return this.fragment.from<=e;if(!i.childAfter(n))return!1}}matches(t){let e=this.cursor.tree;return e&&e.prop(Ne.contextHash)==t}takeNodes(t){let e=this.cursor,i=this.fragment.offset,n=this.fragmentEnd-(this.fragment.openEnd?1:0),r=t.absoluteLineStart,o=r,l=t.block.children.length,a=o,c=l;for(;;){if(e.to-i>n){if(e.type.isAnonymous&&e.firstChild())continue;break}let h=XV(e.from-i,t.ranges);if(e.to-i<=t.ranges[t.rangeI].to)t.addNode(e.tree,h);else{let f=new mt(t.parser.nodeSet.types[ce.Paragraph],[],[],0,t.block.hashProp);t.reusePlaceholders.set(f,e.tree),t.addNode(f,h)}if(e.type.is("Block")&&(Ice.indexOf(e.type.id)<0?(o=e.to-i,l=t.block.children.length):(o=a,l=c,a=e.to-i,c=t.block.children.length)),!e.nextSibling())break}for(;t.block.children.length>l;)t.block.children.pop(),t.block.positions.pop();return o-r}}function XV(s,t){let e=s;for(let i=1;i<t.length;i++){let n=t[i-1].to,r=t[i].from;n<s&&(e-=r-n)}return e}const Vce=Cc({"Blockquote/...":T.quote,HorizontalRule:T.contentSeparator,"ATXHeading1/... SetextHeading1/...":T.heading1,"ATXHeading2/... SetextHeading2/...":T.heading2,"ATXHeading3/...":T.heading3,"ATXHeading4/...":T.heading4,"ATXHeading5/...":T.heading5,"ATXHeading6/...":T.heading6,"Comment CommentBlock":T.comment,Escape:T.escape,Entity:T.character,"Emphasis/...":T.emphasis,"StrongEmphasis/...":T.strong,"Link/... Image/...":T.link,"OrderedList/... BulletList/...":T.list,"BlockQuote/...":T.quote,"InlineCode CodeText":T.monospace,"URL Autolink":T.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":T.processingInstruction,"CodeInfo LinkLabel":T.labelName,LinkTitle:T.string,Paragraph:T.content}),Mce=new Vp(new gd(NV).extend(Vce),Object.keys(pm).map(s=>pm[s]),Object.keys(pm).map(s=>QV[s]),Object.keys(pm),Cce,EV,Object.keys(i1).map(s=>i1[s]),Object.keys(i1),[]);function Lce(s,t,e){let i=[];for(let n=s.firstChild,r=t;;n=n.nextSibling){let o=n?n.from:e;if(o>r&&i.push({from:r,to:o}),!n)break;r=n.to}return i}function Bce(s){let{codeParser:t,htmlParser:e}=s;return{wrap:B3((n,r)=>{let o=n.type.id;if(t&&(o==ce.CodeBlock||o==ce.FencedCode)){let l="";if(o==ce.FencedCode){let c=n.node.getChild(ce.CodeInfo);c&&(l=r.read(c.from,c.to))}let a=t(l);if(a)return{parser:a,overlay:c=>c.type.id==ce.CodeText}}else if(e&&(o==ce.HTMLBlock||o==ce.HTMLTag||o==ce.CommentBlock))return{parser:e,overlay:Lce(n.node,n.from,n.to)};return null})}}const $ce={resolve:"Strikethrough",mark:"StrikethroughMark"},Qce={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":T.strikethrough}},{name:"StrikethroughMark",style:T.processingInstruction}],parseInline:[{name:"Strikethrough",parse(s,t,e){if(t!=126||s.char(e+1)!=126||s.char(e+2)==126)return-1;let i=s.slice(e-1,e),n=s.slice(e+2,e+3),r=/\s|^$/.test(i),o=/\s|^$/.test(n),l=jh.test(i),a=jh.test(n);return s.addDelimiter($ce,e,e+2,!o&&(!a||r||l),!r&&(!l||o||a))},after:"Emphasis"}]};function ch(s,t,e=0,i,n=0){let r=0,o=!0,l=-1,a=-1,c=!1,h=()=>{i.push(s.elt("TableCell",n+l,n+a,s.parser.parseInline(t.slice(l,a),n+l)))};for(let f=e;f<t.length;f++){let m=t.charCodeAt(f);m==124&&!c?((!o||l>-1)&&r++,o=!1,i&&(l>-1&&h(),i.push(s.elt("TableDelimiter",f+n,f+n+1))),l=a=-1):(c||m!=32&&m!=9)&&(l<0&&(l=f),a=f+1),c=!c&&m==92}return l>-1&&(r++,i&&h()),r}function c5(s,t){for(let e=t;e<s.length;e++){let i=s.charCodeAt(e);if(i==124)return!0;i==92&&e++}return!1}const jV=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class u5{constructor(){this.rows=null}nextLine(t,e,i){if(this.rows==null){this.rows=!1;let n;if((e.next==45||e.next==58||e.next==124)&&jV.test(n=e.text.slice(e.pos))){let r=[];ch(t,i.content,0,r,i.start)==ch(t,n,e.pos)&&(this.rows=[t.elt("TableHeader",i.start,i.start+i.content.length,r),t.elt("TableDelimiter",t.lineStart+e.pos,t.lineStart+e.text.length)])}}else if(this.rows){let n=[];ch(t,e.text,e.pos,n,t.lineStart),this.rows.push(t.elt("TableRow",t.lineStart+e.pos,t.lineStart+e.text.length,n))}return!1}finish(t,e){return this.rows?(t.addLeafElement(e,t.elt("Table",e.start,e.start+e.content.length,this.rows)),!0):!1}}const Dce={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":T.heading}},"TableRow",{name:"TableCell",style:T.content},{name:"TableDelimiter",style:T.processingInstruction}],parseBlock:[{name:"Table",leaf(s,t){return c5(t.content,0)?new u5:null},endLeaf(s,t,e){if(e.parsers.some(n=>n instanceof u5)||!c5(t.text,t.basePos))return!1;let i=s.peekLine();return jV.test(i)&&ch(s,t.text,t.basePos)==ch(s,i,t.basePos)},before:"SetextHeading"}]};class Nce{nextLine(){return!1}finish(t,e){return t.addLeafElement(e,t.elt("Task",e.start,e.start+e.content.length,[t.elt("TaskMarker",e.start,e.start+3),...t.parser.parseInline(e.content.slice(3),e.start+3)])),!0}}const Fce={defineNodes:[{name:"Task",block:!0,style:T.list},{name:"TaskMarker",style:T.atom}],parseBlock:[{name:"TaskList",leaf(s,t){return/^\[[ xX]\][ \t]/.test(t.content)&&s.parentType().name=="ListItem"?new Nce:null},after:"SetextHeading"}]},h5=/(www\.)|(https?:\/\/)|([\w.+-]{1,100}@)|(mailto:|xmpp:)/gy,d5=/[\w-]+(\.[\w-]+)+(\/[^\s<]*)?/gy,zce=/[\w-]+\.[\w-]+($|\/)/,f5=/[\w.+-]+@[\w-]+(\.[\w.-]+)+/gy,m5=/\/[a-zA-Z\d@.]+/gy;function g5(s,t,e,i){let n=0;for(let r=t;r<e;r++)s[r]==i&&n++;return n}function Wce(s,t){d5.lastIndex=t;let e=d5.exec(s);if(!e||zce.exec(e[0])[0].indexOf("_")>-1)return-1;let i=t+e[0].length;for(;;){let n=s[i-1],r;if(/[?!.,:*_~]/.test(n)||n==")"&&g5(s,t,i,")")>g5(s,t,i,"("))i--;else if(n==";"&&(r=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(s.slice(t,i))))i=t+r.index;else break}return i}function p5(s,t){f5.lastIndex=t;let e=f5.exec(s);if(!e)return-1;let i=e[0][e[0].length-1];return i=="_"||i=="-"?-1:t+e[0].length-(i=="."?1:0)}const Uce={parseInline:[{name:"Autolink",parse(s,t,e){let i=e-s.offset;if(i&&/\w/.test(s.text[i-1]))return-1;h5.lastIndex=i;let n=h5.exec(s.text),r=-1;if(!n)return-1;if(n[1]||n[2]){if(r=Wce(s.text,i+n[0].length),r>-1&&s.hasOpenLink){let o=/([^\[\]]|\[[^\]]*\])*/.exec(s.text.slice(i,r));r=i+o[0].length}}else n[3]?r=p5(s.text,i):(r=p5(s.text,i+n[0].length),r>-1&&n[0]=="xmpp:"&&(m5.lastIndex=r,n=m5.exec(s.text),n&&(r=n.index+n[0].length)));return r<0?-1:(s.addElement(s.elt("URL",e,r+s.offset)),r+s.offset)}}]},Zce=[Dce,Fce,Qce,Uce];function GV(s,t,e){return(i,n,r)=>{if(n!=s||i.char(r+1)==s)return-1;let o=[i.elt(e,r,r+1)];for(let l=r+1;l<i.end;l++){let a=i.char(l);if(a==s)return i.addElement(i.elt(t,r,l+1,o.concat(i.elt(e,l,l+1))));if(a==92&&o.push(i.elt("Escape",l,l+++2)),ws(a))break}return-1}}const Hce={defineNodes:[{name:"Superscript",style:T.special(T.content)},{name:"SuperscriptMark",style:T.processingInstruction}],parseInline:[{name:"Superscript",parse:GV(94,"Superscript","SuperscriptMark")}]},qce={defineNodes:[{name:"Subscript",style:T.special(T.content)},{name:"SubscriptMark",style:T.processingInstruction}],parseInline:[{name:"Subscript",parse:GV(126,"Subscript","SubscriptMark")}]},Xce={defineNodes:[{name:"Emoji",style:T.character}],parseInline:[{name:"Emoji",parse(s,t,e){let i;return t!=58||!(i=/^[a-zA-Z_0-9]+:/.exec(s.slice(e+1,s.end)))?-1:s.addElement(s.elt("Emoji",e,e+1+i[0].length))}}]},YV=Qy({commentTokens:{block:{open:"<!--",close:"-->"}}}),KV=new Ne,JV=Mce.configure({props:[Pc.add(s=>!s.is("Block")||s.is("Document")||sx(s)!=null||jce(s)?void 0:(t,e)=>({from:e.doc.lineAt(t.from).to,to:t.to})),KV.add(sx),wd.add({Document:()=>null}),gl.add({Document:YV})]});function sx(s){let t=/^(?:ATX|Setext)Heading(\d)$/.exec(s.name);return t?+t[1]:void 0}function jce(s){return s.name=="OrderedList"||s.name=="BulletList"}function Gce(s,t){let e=s;for(;;){let i=e.nextSibling,n;if(!i||(n=sx(i.type))!=null&&n<=t)break;e=i}return e.to}const Yce=z3.of((s,t,e)=>{for(let i=kt(s).resolveInner(e,-1);i&&!(i.from<t);i=i.parent){let n=i.type.prop(KV);if(n==null)continue;let r=Gce(i,n);if(r>e)return{from:e,to:r}}return null});function ov(s){return new is(YV,s,[Yce],"markdown")}const Kce=ov(JV),Jce=JV.configure([Zce,qce,Hce,Xce,{props:[Pc.add({Table:(s,t)=>({from:t.doc.lineAt(s.from).to,to:s.to})})]}]),eM=ov(Jce);function eue(s,t){return e=>{if(e&&s){let i=null;if(e=/\S*/.exec(e)[0],typeof s=="function"?i=s(e):i=Ng.matchLanguageName(s,e,!0),i instanceof Ng)return i.support?i.support.language.parser:Dh.getSkippingParser(i.load());if(i)return i.parser}return t?t.parser:null}}class n1{constructor(t,e,i,n,r,o,l){this.node=t,this.from=e,this.to=i,this.spaceBefore=n,this.spaceAfter=r,this.type=o,this.item=l}blank(t,e=!0){let i=this.spaceBefore+(this.node.name=="Blockquote"?">":"");if(t!=null){for(;i.length<t;)i+=" ";return i}else{for(let n=this.to-this.from-i.length-this.spaceAfter.length;n>0;n--)i+=" ";return i+(e?this.spaceAfter:"")}}marker(t,e){let i=this.node.name=="OrderedList"?String(+iM(this.item,t)[2]+e):"";return this.spaceBefore+i+this.type+this.spaceAfter}}function tM(s,t){let e=[],i=[];for(let n=s;n;n=n.parent){if(n.name=="FencedCode")return i;(n.name=="ListItem"||n.name=="Blockquote")&&e.push(n)}for(let n=e.length-1;n>=0;n--){let r=e[n],o,l=t.lineAt(r.from),a=r.from-l.from;if(r.name=="Blockquote"&&(o=/^ *>( ?)/.exec(l.text.slice(a))))i.push(new n1(r,a,a+o[0].length,"",o[1],">",null));else if(r.name=="ListItem"&&r.parent.name=="OrderedList"&&(o=/^( *)\d+([.)])( *)/.exec(l.text.slice(a)))){let c=o[3],h=o[0].length;c.length>=4&&(c=c.slice(0,c.length-4),h-=4),i.push(new n1(r.parent,a,a+h,o[1],c,o[2],r))}else if(r.name=="ListItem"&&r.parent.name=="BulletList"&&(o=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(l.text.slice(a)))){let c=o[4],h=o[0].length;c.length>4&&(c=c.slice(0,c.length-4),h-=4);let f=o[2];o[3]&&(f+=o[3].replace(/[xX]/," ")),i.push(new n1(r.parent,a,a+h,o[1],c,f,r))}}return i}function iM(s,t){return/^(\s*)(\d+)(?=[.)])/.exec(t.sliceString(s.from,s.from+10))}function s1(s,t,e,i=0){for(let n=-1,r=s;;){if(r.name=="ListItem"){let l=iM(r,t),a=+l[2];if(n>=0){if(a!=n+1)return;e.push({from:r.from+l[1].length,to:r.from+l[0].length,insert:String(n+2+i)})}n=a}let o=r.nextSibling;if(!o)break;r=o}}function lv(s,t){let e=/^[ \t]*/.exec(s)[0].length;if(!e||t.facet(pd)!="	")return s;let i=Ms(s,4,e),n="";for(let r=i;r>0;)r>=4?(n+="	",r-=4):(n+=" ",r--);return n+s.slice(e)}const tue=({state:s,dispatch:t})=>{let e=kt(s),{doc:i}=s,n=null,r=s.changeByRange(o=>{if(!o.empty||!eM.isActiveAt(s,o.from,0))return n={range:o};let l=o.from,a=i.lineAt(l),c=tM(e.resolveInner(l,-1),i);for(;c.length&&c[c.length-1].from>l-a.from;)c.pop();if(!c.length)return n={range:o};let h=c[c.length-1];if(h.to-h.spaceAfter.length>l-a.from)return n={range:o};let f=l>=h.to-h.spaceAfter.length&&!/\S/.test(a.text.slice(h.to));if(h.item&&f){let k=h.node.firstChild,C=h.node.getChild("ListItem","ListItem");if(k.to>=l||C&&C.to<l||a.from>0&&!/[^\s>]/.test(i.lineAt(a.from-1).text)){let P=c.length>1?c[c.length-2]:null,V,Q="";P&&P.item?(V=a.from+P.from,Q=P.marker(i,1)):V=a.from+(P?P.to:0);let D=[{from:V,to:l,insert:Q}];return h.node.name=="OrderedList"&&s1(h.item,i,D,-2),P&&P.node.name=="OrderedList"&&s1(P.item,i,D),{range:ie.cursor(V+Q.length),changes:D}}else{let P=b5(c,s,a);return{range:ie.cursor(l+P.length+1),changes:{from:a.from,insert:P+s.lineBreak}}}}if(h.node.name=="Blockquote"&&f&&a.from){let k=i.lineAt(a.from-1),C=/>\s*$/.exec(k.text);if(C&&C.index==h.from){let P=s.changes([{from:k.from+C.index,to:k.to},{from:a.from+h.from,to:a.to}]);return{range:o.map(P),changes:P}}}let m=[];h.node.name=="OrderedList"&&s1(h.item,i,m);let w=h.item&&h.item.from<a.from,O="";if(!w||/^[\s\d.)\-+*>]*/.exec(a.text)[0].length>=h.to)for(let k=0,C=c.length-1;k<=C;k++)O+=k==C&&!w?c[k].marker(i,1):c[k].blank(k<C?Ms(a.text,4,c[k+1].from)-O.length:null);let v=l;for(;v>a.from&&/\s/.test(a.text.charAt(v-a.from-1));)v--;return O=lv(O,s),iue(h.node,s.doc)&&(O=b5(c,s,a)+s.lineBreak+O),m.push({from:v,to:l,insert:s.lineBreak+O}),{range:ie.cursor(v+O.length+1),changes:m}});return n?!1:(t(s.update(r,{scrollIntoView:!0,userEvent:"input"})),!0)};function w5(s){return s.name=="QuoteMark"||s.name=="ListMark"}function iue(s,t){if(s.name!="OrderedList"&&s.name!="BulletList")return!1;let e=s.firstChild,i=s.getChild("ListItem","ListItem");if(!i)return!1;let n=t.lineAt(e.to),r=t.lineAt(i.from),o=/^[\s>]*$/.test(n.text);return n.number+(o?0:1)<r.number}function b5(s,t,e){let i="";for(let n=0,r=s.length-2;n<=r;n++)i+=s[n].blank(n<r?Ms(e.text,4,Math.min(e.text.length,s[n+1].from))-i.length:null,n<r);return lv(i,t)}function nue(s,t){let e=s.resolveInner(t,-1),i=t;w5(e)&&(i=e.from,e=e.parent);for(let n;n=e.childBefore(i);)if(w5(n))i=n.from;else if(n.name=="OrderedList"||n.name=="BulletList")e=n.lastChild,i=e.to;else break;return e}const sue=({state:s,dispatch:t})=>{let e=kt(s),i=null,n=s.changeByRange(r=>{let o=r.from,{doc:l}=s;if(r.empty&&eM.isActiveAt(s,r.from)){let a=l.lineAt(o),c=tM(nue(e,o),l);if(c.length){let h=c[c.length-1],f=h.to-h.spaceAfter.length+(h.spaceAfter?1:0);if(o-a.from>f&&!/\S/.test(a.text.slice(f,o-a.from)))return{range:ie.cursor(a.from+f),changes:{from:a.from+f,to:o}};if(o-a.from==f&&(!h.item||a.from<=h.item.from||!/\S/.test(a.text.slice(0,h.to)))){let m=a.from+h.from;if(h.item&&h.node.from<h.item.from&&/\S/.test(a.text.slice(h.from,h.to))){let w=h.blank(Ms(a.text,4,h.to)-Ms(a.text,4,h.from));return m==a.from&&(w=lv(w,s)),{range:ie.cursor(m+w.length),changes:{from:m,to:a.from+h.to,insert:w}}}if(m<o)return{range:ie.cursor(m),changes:{from:m,to:o}}}}}return i={range:r}});return i?!1:(t(s.update(n,{scrollIntoView:!0,userEvent:"delete"})),!0)},rue=[{key:"Enter",run:tue},{key:"Backspace",run:sue}],nM=TV({matchClosingTags:!1});function oue(s={}){let{codeLanguages:t,defaultCodeLanguage:e,addKeymap:i=!0,base:{parser:n}=Kce,completeHTMLTags:r=!0,htmlTagLanguage:o=nM}=s;if(!(n instanceof Vp))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let l=s.extensions?[s.extensions]:[],a=[o.support],c;e instanceof Nh?(a.push(e.support),c=e.language):e&&(c=e);let h=t||c?eue(t,c):void 0;l.push(Bce({codeParser:h,htmlParser:o.language.parser})),i&&a.push($o.high(fd.of(rue)));let f=ov(n.configure(l));return r&&a.push(f.data.of({autocomplete:lue})),new Nh(f,a)}function lue(s){let{state:t,pos:e}=s,i=/<[:\-\.\w\u00b7-\uffff]*$/.exec(t.sliceDoc(e-25,e));if(!i)return null;let n=kt(t).resolveInner(e,-1);for(;n&&!n.type.isTop;){if(n.name=="CodeBlock"||n.name=="FencedCode"||n.name=="ProcessingInstructionBlock"||n.name=="CommentBlock"||n.name=="Link"||n.name=="Image")return null;n=n.parent}return{from:e-i[0].length,to:e,options:aue(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}let r1=null;function aue(){if(r1)return r1;let s=bce(new Hy(at.create({extensions:nM}),0,!0));return r1=s?s.options:[]}const cue="#e5c07b",O5="#e06c75",uue="#56b6c2",hue="#ffffff",jm="#abb2bf",rx="#7d8799",due="#61afef",fue="#98c379",x5="#d19a66",mue="#c678dd",gue="#21252b",y5="#2c313a",v5="#282c34",o1="#353a42",pue="#3E4451",_5="#528bff",wue=Ee.theme({"&":{color:jm,backgroundColor:v5},".cm-content":{caretColor:_5},".cm-cursor, .cm-dropCursor":{borderLeftColor:_5},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:pue},".cm-panels":{backgroundColor:gue,color:jm},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:v5,color:rx,border:"none"},".cm-activeLineGutter":{backgroundColor:y5},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:o1},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:o1,borderBottomColor:o1},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:y5,color:jm}}},{dark:!0}),bue=Od.define([{tag:T.keyword,color:mue},{tag:[T.name,T.deleted,T.character,T.propertyName,T.macroName],color:O5},{tag:[T.function(T.variableName),T.labelName],color:due},{tag:[T.color,T.constant(T.name),T.standard(T.name)],color:x5},{tag:[T.definition(T.name),T.separator],color:jm},{tag:[T.typeName,T.className,T.number,T.changed,T.annotation,T.modifier,T.self,T.namespace],color:cue},{tag:[T.operator,T.operatorKeyword,T.url,T.escape,T.regexp,T.link,T.special(T.string)],color:uue},{tag:[T.meta,T.comment],color:rx},{tag:T.strong,fontWeight:"bold"},{tag:T.emphasis,fontStyle:"italic"},{tag:T.strikethrough,textDecoration:"line-through"},{tag:T.link,color:rx,textDecoration:"underline"},{tag:T.heading,fontWeight:"bold",color:O5},{tag:[T.atom,T.bool,T.special(T.variableName)],color:x5},{tag:[T.processingInstruction,T.string,T.inserted],color:fue},{tag:T.invalid,color:hue}]),Oue=[wue,K3(bue)];function Pt(s,t){const e=s.t;switch(t){case"Edit source modal label":return e({string:"Edit source",id:"Edit source modal label"});case"Source":return e("Source");case"Source Editing Enhanced":return e("Source Editing Enhanced");case"Copy line down":return e("Copy line down");case"Copy line up":return e("Copy line up");case"Delete line":return e("Delete line");case"Indent less":return e("Indent less");case"Indent more":return e("Indent more");case"Fold all":return e("Fold all");case"Fold code (current level)":return e("Fold code (current level)");case"Move line down":return e("Move line down");case"Move line up":return e("Move line up");case"Redo (keystroke)":return e({id:"Redo (keystroke)",string:"Redo"});case"Select line":return e("Select line");case'Switch between "focus with tab" and "indent with tab" mode':return e('Switch between "focus with tab" and "indent with tab" mode');case"Toggle block comment":return e("Toggle block comment");case"Toggle comment":return e("Toggle comment");case"Undo (keystroke)":return e({id:"Undo (keystroke)",string:"Undo"});case"Unfold all":return e("Unfold all");case"Unfold code (current level)":return e("Unfold code (current level)");case"Are you sure you want to discard your changes? This action cannot be undone.":return e("Are you sure you want to discard your changes? This action cannot be undone.");case"Cancel":return e("Cancel");case"Save":return e("Save");default:return t}}function sM(s){const t=s.editing.view.document.roots,e=t.length;if(e===0)throw new A("source-editing-enhanced-editor-no-root",s);return e===1?t.first.rootName:Array.from(s.editing.view.document.selection.getRanges())[0].root.rootName}function bm(s){return rM(s.replace(/^[\n\s]*/g,""))?s.replace(/\s+/g,""):s}function rM(s){return s.startsWith("<")}function xue(s){const t=[Ee.lineWrapping,rle(),Gse(),Xoe(),Ane(),sne(),cne(),Une(),Dse(),yne(),qne(),gne(),hre(),Pse(),Pne(),K3(Wse,{fallback:!0})],e=new ud;t.push(e.of(Ee.editable.of(!0))),s.syntaxLanguage==="html"?t.push(TV()):t.push(oue());const i=function(r){return r&&r!=="default"?r==="dark"?Oue:r:null}(s.theme);i&&t.push(i),t.push(fd.of([...Koe,...uoe,...xre,...Lse,...Z7,{key:"Tab",run:R7,shift:V7,preventDefault:!0,stopPropagation:!0},{key:"Ctrl-y",mac:"Cmd-y",run:zh,preventDefault:!0,stopPropagation:!0},{key:"Ctrl-Shift-z",mac:"Cmd-Shift-z",run:zh,preventDefault:!0,stopPropagation:!0},{key:"Ctrl-z",mac:"Cmd-z",run:Uy,preventDefault:!0,stopPropagation:!0}]));const n=new Ee({extensions:t,parent:s.parent});return M7(n),{focus:()=>{n.dispatch({selection:{anchor:0},scrollIntoView:!0}),n.focus()},getData:()=>n.state.doc.toString(),setData:r=>{n.dispatch({changes:{from:0,to:n.state.doc.length,insert:r},annotations:Yt.addToHistory.of(!1)})},setReadOnly:r=>{n.dispatch({effects:[e.reconfigure(Ee.editable.of(!r))]})},destroy:()=>{n.destroy()},instance:n}}class yue extends he{constructor(e,i){super(e);p(this,"_codeEditorApi",null);p(this,"_options");this._options=i,this.set("isReadOnly",!1),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset_all-excluded","ck-code-editor"],tabindex:-1}})}render(){super.render(),this._codeEditorApi=xue({parent:this.element,syntaxLanguage:this._options.syntaxLanguage,theme:this._options.theme}),this.on("change:isReadOnly",(e,i,n)=>{this.setReadOnly(n)})}destroy(){super.destroy(),this._codeEditorApi.destroy(),this._codeEditorApi=null}focus(){this.isReadOnly?this.element.focus():this._codeEditorApi.focus()}getData(){return this._codeEditorApi.getData()}setData(e){this._codeEditorApi.setData(e)}setReadOnly(e){this._codeEditorApi.setReadOnly(e)}}const k5="SourceEditingEnhancedMode";class vue extends Le{constructor(t){super(t),this.affectsData=!1,this.editor.plugins.get(Eo).on("change:hasAny",(e,i,n)=>{n?this.forceDisabled("pendingActions"):this.clearForceDisabled("pendingActions")})}_disableCommands(){const t=this.editor;for(const e of t.commands.names())["replaceSource","editSource"].includes(e)||t.commands.get(e).forceDisabled(k5)}_enableCommands(){const t=this.editor;for(const e of t.commands.commands())e.clearForceDisabled(k5)}refresh(){this.isEnabled=!0}execute(){const t=this.editor,e=t.locale,i=t.plugins.get("Dialog"),n=sM(t),r=t.data.get({rootName:n}),o=rM(l=r)?PQ(l):l;var l;const a=new yue(e,{syntaxLanguage:t.plugins.has("Markdown")?"markdown":"html",theme:t.config.get("sourceEditingEnhanced.theme")});let c=!0;const h=f=>{if(c)return bm(a.getData())!==bm(o)?window.confirm(Pt(e,"Are you sure you want to discard your changes? This action cannot be undone."))?void 0:f.stop():void 0};i.show({id:"sourceEditingEnhanced",title:Pt(e,"Edit source modal label"),isModal:!0,className:"ck-source-editing-enhanced-dialog",content:a,actionButtons:[{label:Pt(e,"Cancel"),withText:!0,onExecute:()=>{i.hide()}},{label:Pt(e,"Save"),class:"ck-button-action",withText:!0,onExecute:()=>{const f=bm(a.getData())!==bm(o);f&&t.execute("replaceSource",a.getData()),c=!1,i.hide(),f&&"editables"in t.ui.view&&t.ui.view.editables[n].element.focus()},onCreate:f=>{f.set("isEnabled",!t.isReadOnly),f.bind("isEnabled").to(t,"isReadOnly",this,"isEnabled",(m,w)=>!m&&w)}}],onHide:()=>{this._enableCommands(),i.off("hide",h),a.destroy()},onShow:()=>{a.bind("isReadOnly").to(t,"isReadOnly",this,"isEnabled",(f,m)=>f||!m),a.setData(o),a.focus(),i.on("hide",h,{priority:"highest"}),this._disableCommands()}})}}class _ue extends F{static get pluginName(){return"SourceEditingEnhancedUI"}static get requires(){return[Eo]}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const t=this.editor,e=t.locale,i=new vue(t);t.commands.add("editSource",i),t.ui.componentFactory.add("sourceEditingEnhanced",()=>{const n=this._createButton(ve,i);return n.set({label:Pt(e,"Source"),icon:OC,tooltip:Pt(e,"Edit source modal label"),class:"ck-source-editing-enhanced-button"}),n}),t.ui.componentFactory.add("menuBar:sourceEditingEnhanced",()=>{const n=this._createButton(ci,i,!0);return n.set({label:Pt(e,"Edit source modal label"),icon:OC,role:"menuitemcheckbox"}),n}),this._registerKeybindings()}afterInit(){(async function(t){const e=_([108,116,119,111,122,56,71,65,75,55,105,68,48,121,53,90,85,74,114,100,106,78,99,110,73,80,51,102,54,69,118,70,52,67,79,112,109,107,81,57,76,82,120,50,117,88,87,113,84,98,66,83,77,101,97,86,49,104,103,115,72,89]),i=1025283116,n=1025245060^i,r=window[_([68,97,116,101])][_([110,111,119])](),o=t[_([101,100,105,116,111,114])],l=new window[_([80,114,111,109,105,115,101])](R=>{o[_([111,110,99,101])](_([114,101,97,100,121]),R)}),a={[_([107,116,121])]:_([69,67]),[_([117,115,101])]:_([115,105,103]),[_([99,114,118])]:_([80,45,50,53,54]),[_([120])]:_([105,67,106,79,67,118,68,70,73,54,108,81,72,72,84,49,56,106,86,119,82,102,107,102,72,81,50,97,95,77,121,109,84,51,53,76,81,86,111,70,83,65,73]),[_([121])]:_([107,88,73,121,74,52,101,118,116,67,69,70,82,109,120,75,83,85,112,75,57,102,68,87,52,53,57,118,88,79,118,86,114,104,102,54,117,81,65,101,79,105,111]),[_([97,108,103])]:_([69,83,50,53,54])},c=o[_([99,111,110,102,105,103])][_([103,101,116])](_([108,105,99,101,110,115,101,75,101,121]));async function h(){let R,U=null,Y=null;try{return c==_([71,80,76])?_([78,111,116,65,108,108,111,119,101,100]):(R=k(),R?(R[_([117,115,97,103,101,69,110,100,112,111,105,110,116])]&&(Y=f(R[_([117,115,97,103,101,69,110,100,112,111,105,110,116])],R[_([106,116,105])])),await C()?j()?X()?_([69,120,112,105,114,101,100]):oe()?(R[_([108,105,99,101,110,115,101,84,121,112,101])]==_([101,118,97,108,117,97,116,105,111,110])&&(U=m(_([69,118,97,108,117,97,116,105,111,110,76,105,109,105,116]))),R[_([108,105,99,101,110,115,101,84,121,112,101])]==_([116,114,105,97,108])&&(U=m(_([84,114,105,97,108,76,105,109,105,116]))),await xe()):_([68,111,109,97,105,110,76,105,109,105,116]):_([78,111,116,65,108,108,111,119,101,100]):_([73,110,118,97,108,105,100])):_([73,110,118,97,108,105,100]))}catch{return _([73,110,118,97,108,105,100])}function X(){const be=[_([101,118,97,108,117,97,116,105,111,110]),_([116,114,105,97,108])][_([105,110,99,108,117,100,101,115])](R[_([108,105,99,101,110,115,101,84,121,112,101])])?r/1e3:3600*n;return R[_([101,120,112])]<be}function j(){const be=R[_([102,101,97,116,117,114,101,115])];return!!be&&(!!be[_([105,110,99,108,117,100,101,115])](_([42]))||!!be[_([105,110,99,108,117,100,101,115])](_([83,69,69])))}function oe(){const be=R[_([108,105,99,101,110,115,101,100,72,111,115,116,115])];if(!be||be[_([108,101,110,103,116,104])]==0)return!0;const{hostname:Se}=new URL(window[_([108,111,99,97,116,105,111,110])].href);if(be[_([105,110,99,108,117,100,101,115])](Se))return!0;const H=Se[_([115,112,108,105,116])](_([46]));return be[_([102,105,108,116,101,114])](ee=>ee[_([105,110,99,108,117,100,101,115])](_([42])))[_([109,97,112])](ee=>ee[_([115,112,108,105,116])](_([46])))[_([102,105,108,116,101,114])](ee=>ee[_([108,101,110,103,116,104])]<=H[_([108,101,110,103,116,104])])[_([109,97,112])](ee=>Array(H[_([108,101,110,103,116,104])]-ee[_([108,101,110,103,116,104])])[_([102,105,108,108])](ee[0]===_([42])?_([42]):"")[_([99,111,110,99,97,116])](ee))[_([115,111,109,101])](ee=>H[_([101,118,101,114,121])]((ne,M)=>ee[M]===ne||ee[M]===_([42])))}function xe(){return U&&Y?new window[_([80,114,111,109,105,115,101])]((be,Se)=>{U[_([116,104,101,110])](be,Se),Y[_([116,104,101,110])](H=>{H!=_([86,97,108,105,100])&&be(H)},Se)}):U||Y||_([86,97,108,105,100])}}function f(R,U){return new window[_([80,114,111,109,105,115,101])](j=>{if(Y())return j(_([86,97,108,105,100]));X(),o[_([100,101,99,111,114,97,116,101])](_([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]));let oe=!1;const xe=ii();function be(H){return!!H&&(typeof H===_([111,98,106,101,99,116])||typeof H===_([102,117,110,99,116,105,111,110]))&&typeof H[_([116,104,101,110])]===_([102,117,110,99,116,105,111,110])&&typeof H[_([99,97,116,99,104])]===_([102,117,110,99,116,105,111,110])}function Se(H){J(H)[_([116,104,101,110])](fe=>!fe||fe[_([115,116,97,116,117,115])]!=_([111,107])?_([85,115,97,103,101,76,105,109,105,116]):D(Q(xe+U))!=fe[_([118,101,114,105,102,105,99,97,116,105,111,110])]?_([85,115,97,103,101,76,105,109,105,116]):_([86,97,108,105,100]))[_([116,104,101,110])](fe=>(ne(),fe),()=>{const fe=M();return fe==null?(ne(),_([86,97,108,105,100])):_(r-fe>(420483116^i)?[85,115,97,103,101,76,105,109,105,116]:[86,97,108,105,100])})[_([116,104,101,110])](j)[_([99,97,116,99,104])](()=>{j(_([85,115,97,103,101,76,105,109,105,116]))});const ee=1026194092^i;function ne(){const fe=_([108,108,99,116,45])+D(Q(R)),W=q(D(window[_([77,97,116,104])][_([99,101,105,108])](r/ee)));window[_([108,111,99,97,108,83,116,111,114,97,103,101])][_([115,101,116,73,116,101,109])](fe,W)}function M(){const fe=_([108,108,99,116,45])+D(Q(R)),W=window[_([108,111,99,97,108,83,116,111,114,97,103,101])][_([103,101,116,73,116,101,109])](fe);return W?window[_([112,97,114,115,101,73,110,116])](q(W),16)*ee:null}function J(fe){return new window[_([80,114,111,109,105,115,101])]((W,B)=>{fe[_([116,104,101,110])](W,B),window[_([115,101,116,84,105,109,101,111,117,116])](B,1025327340^i)})}}o[_([111,110])](_([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),(H,ee)=>{if(ee[0]!=R)return j(_([85,115,97,103,101,76,105,109,105,116]));ee[1]={...ee[1],[_([114,101,113,117,101,115,116,73,100])]:xe}},{[_([112,114,105,111,114,105,116,121])]:_([104,105,103,104])}),o[_([111,110])](_([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),H=>{be(H[_([114,101,116,117,114,110])])&&(oe=!0,Se(H[_([114,101,116,117,114,110])]))},{[_([112,114,105,111,114,105,116,121])]:_([108,111,119])}),l[_([116,104,101,110])](()=>{oe||j(_([85,115,97,103,101,76,105,109,105,116]))})});function Y(){return o[_([101,100,105,116,105,110,103])][_([118,105,101,119])][_([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]==_([97,117,116,111])}function X(){o[_([101,100,105,116,105,110,103])][_([118,105,101,119])][_([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]=_([97,117,116,111])}}function m(R){const U=[new window[_([80,114,111,109,105,115,101])](Y=>setTimeout(Y,1024830176^i)),l[_([116,104,101,110])](()=>new window[_([80,114,111,109,105,115,101])](Y=>{let X=0;o[_([109,111,100,101,108])][_([111,110])](_([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),(j,oe)=>{oe[0][_([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&X++,X==(1025283540^i)&&(Y(),j[_([111,102,102])]())})}))];return window[_([80,114,111,109,105,115,101])][_([114,97,99,101])](U)[_([116,104,101,110])](()=>R)}async function w(){await l,o[_([109,111,100,101,108])][_([99,104,97,110,103,101])]=$,o[_([109,111,100,101,108])][_([101,110,113,117,101,117,101,67,104,97,110,103,101])]=$,o[_([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](_([109,111,100,101,108]))}function O(R){const U=v();o[U]=_([115,111,117,114,99,101,69,100,105,116,105,110,103,69,110,104,97,110,99,101,100,76,105,99,101,110,115,101,75,101,121])+R,R!=_([86,97,108,105,100])&&w()}function v(){const R=window[_([83,116,114,105,110,103])](window[_([112,101,114,102,111,114,109,97,110,99,101])][_([110,111,119])]())[_([114,101,112,108,97,99,101])](_([46]),"");let U=_([108]);for(let Y=0;Y<R[_([108,101,110,103,116,104])];Y+=2){let X=window[_([112,97,114,115,101,73,110,116])](R[_([115,117,98,115,116,114,105,110,103])](Y,Y+2));X>=e[_([108,101,110,103,116,104])]&&(X-=e[_([108,101,110,103,116,104])]),U+=e[X]}return U}function k(){const R=c[_([115,112,108,105,116])](_([46]));if(R[_([108,101,110,103,116,104])]!=3)return null;return U(R[1]);function U(Y){const X=P(Y);return X&&j()?X:null;function j(){const oe=X[_([106,116,105])],xe=window[_([112,97,114,115,101,73,110,116])](oe[_([115,117,98,115,116,114,105,110,103])](oe[_([108,101,110,103,116,104])]-8),16),be={...X,[_([106,116,105])]:oe[_([115,117,98,115,116,114,105,110,103])](0,oe[_([108,101,110,103,116,104])]-8)};return delete be[_([118,99])],Q(be)==xe}}}async function C(){let R=!0;try{const X=c[_([115,112,108,105,116])](_([46])),[j,oe,xe]=X;return U(j),await Y(j,oe,xe),R}catch{return!1}function U(X){const j=P(X);j&&j[_([97,108,103])]==_([69,83,50,53,54])||(R=!1)}async function Y(X,j,oe){const xe=window[_([85,105,110,116,56,65,114,114,97,121])][_([102,114,111,109])](V(oe),ee=>ee[_([99,104,97,114,67,111,100,101,65,116])](0)),be=new window[_([84,101,120,116,69,110,99,111,100,101,114])]()[_([101,110,99,111,100,101])](X+_([46])+j),Se=window[_([99,114,121,112,116,111])][_([115,117,98,116,108,101])];if(!Se)return;const H=await Se[_([105,109,112,111,114,116,75,101,121])](_([106,119,107]),a,{[_([110,97,109,101])]:_([69,67,68,83,65]),[_([110,97,109,101,100,67,117,114,118,101])]:_([80,45,50,53,54])},!1,[_([118,101,114,105,102,121])]);await Se[_([118,101,114,105,102,121])]({[_([110,97,109,101])]:_([69,67,68,83,65]),[_([104,97,115,104])]:{[_([110,97,109,101])]:_([83,72,65,45,50,53,54])}},H,xe,be)||(R=!1)}}function P(R){return R[_([115,116,97,114,116,115,87,105,116,104])](_([101,121]))?JSON[_([112,97,114,115,101])](V(R)):null}function V(R){return window[_([97,116,111,98])](R[_([114,101,112,108,97,99,101])](/-/g,_([43]))[_([114,101,112,108,97,99,101])](/_/g,_([47])))}function Q(R){let U=5381;function Y(j){for(let oe=0;oe<j[_([108,101,110,103,116,104])];oe++){const xe=j[_([99,104,97,114,67,111,100,101,65,116])](oe);U=(U<<5)+U+xe,U&=U}}function X(j){Array[_([105,115,65,114,114,97,121])](j)?j[_([102,111,114,69,97,99,104])](X):j&&typeof j==_([111,98,106,101,99,116])?Object[_([101,110,116,114,105,101,115])](j)[_([115,111,114,116])]()[_([102,111,114,69,97,99,104])](([oe,xe])=>{Y(oe),X(xe)}):Y(window[_([83,116,114,105,110,103])](j))}return X(R),U>>>0}function D(R){return R[_([116,111,83,116,114,105,110,103])](16)[_([112,97,100,83,116,97,114,116])](8,_([48]))}function q(R){return R[_([115,112,108,105,116])]("")[_([114,101,118,101,114,115,101])]()[_([106,111,105,110])]("")}function $(){}function _(R){return R.map(U=>String.fromCharCode(U)).join("")}O(await h())})(this)}_createButton(t,e,i=!1){const n=new t(this.editor.locale);return n.set({withText:i,isToggleable:!1}),n.bind("isEnabled").to(e,"isEnabled"),this.listenTo(n,"execute",()=>e.execute()),n}_registerKeybindings(){const t=this.editor.locale;this.editor.accessibility.addKeystrokeInfoCategory({id:"sourceEditingEnhanced",label:Pt(t,"Source Editing Enhanced")});const e=Ie.isMac||Ie.isiOS;this.editor.accessibility.addKeystrokeInfos({categoryId:"sourceEditingEnhanced",keystrokes:[{label:Pt(t,"Copy line down"),keystroke:"Shift+Alt+ArrowDown"},{label:Pt(t,"Copy line up"),keystroke:"Shift+Alt+ArrowUp"},{label:Pt(t,"Delete line"),keystroke:"Shift+Ctrl+K"},{label:Pt(t,"Indent less"),keystroke:"Ctrl+["},{label:Pt(t,"Indent more"),keystroke:"Ctrl+]"},{label:Pt(t,"Fold all"),keystroke:"Ctrl!+Alt+["},{label:Pt(t,"Fold code (current level)"),keystroke:e?"Cmd+Alt+[":"Ctrl+Shift+["},{label:Pt(t,"Move line down"),keystroke:"Alt+ArrowDown"},{label:Pt(t,"Move line up"),keystroke:"Alt+ArrowUp"},{label:Pt(t,"Redo (keystroke)"),keystroke:[["Ctrl+Shift+Z"],["Ctrl+Y"]]},{label:Pt(t,"Select line"),keystroke:e?"Ctrl!+L":"Alt+L"},{label:Pt(t,'Switch between "focus with tab" and "indent with tab" mode'),keystroke:e?"Alt+Shift+M":"Ctrl+M"},{label:Pt(t,"Toggle block comment"),keystroke:"Shift+Alt+A"},{label:Pt(t,"Toggle comment"),keystroke:"Ctrl+/"},{label:Pt(t,"Undo (keystroke)"),keystroke:"Ctrl+Z"},{label:Pt(t,"Unfold all"),keystroke:"Ctrl!+Alt+]"},{label:Pt(t,"Unfold code (current level)"),keystroke:e?"Cmd+Alt+]":"Ctrl+Shift+]"}]})}}class kue extends Le{constructor(t){super(t),this.refresh()}refresh(){this.isEnabled=!this.editor.isReadOnly}execute(t,e){const i=this.editor,n=(e==null?void 0:e.rootName)??sM(i);i.data.set({[n]:t},{batchType:{isUndoable:!0},suppressErrorInCollaboration:!0})}}class Sue extends F{constructor(e){super(e);p(this,"licenseKey");p(this,"_licenseKeyCheckInterval");e.config.define("sourceEditingEnhanced.allowCollaborationFeatures",!1)}static get pluginName(){return"SourceEditingEnhanced"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return[_ue]}init(){this._checkCompatibility(),this.editor.commands.add("replaceSource",new kue(this.editor)),this.licenseKey=this.editor.config.get("licenseKey");const e=this.editor;this._licenseKeyCheckInterval=setInterval(()=>{let i;for(const n in e){const r=n,o=e[r];if(o=="sourceEditingEnhancedLicenseKeyValid"||o=="sourceEditingEnhancedLicenseKeyInvalid"||o=="sourceEditingEnhancedLicenseKeyExpired"||o=="sourceEditingEnhancedLicenseKeyDomainLimit"||o=="sourceEditingEnhancedLicenseKeyNotAllowed"||o=="sourceEditingEnhancedLicenseKeyEvaluationLimit"||o=="sourceEditingEnhancedLicenseKeyTrialLimit"||o=="sourceEditingEnhancedLicenseKeyUsageLimit"){delete e[r],i=o,clearInterval(this._licenseKeyCheckInterval),this._licenseKeyCheckInterval=void 0;break}}i=="sourceEditingEnhancedLicenseKeyInvalid"&&e._showLicenseError("invalid"),i=="sourceEditingEnhancedLicenseKeyExpired"&&e._showLicenseError("expired"),i=="sourceEditingEnhancedLicenseKeyDomainLimit"&&e._showLicenseError("domainLimit"),i=="sourceEditingEnhancedLicenseKeyNotAllowed"&&e._showLicenseError("featureNotAllowed","SourceEditingEnhanced"),i=="sourceEditingEnhancedLicenseKeyEvaluationLimit"&&e._showLicenseError("evaluationLimit"),i=="sourceEditingEnhancedLicenseKeyTrialLimit"&&e._showLicenseError("trialLimit"),i=="sourceEditingEnhancedLicenseKeyUsageLimit"&&e._showLicenseError("usageLimit")},1e3)}destroy(){this._licenseKeyCheckInterval&&clearInterval(this._licenseKeyCheckInterval)}_checkCompatibility(){const e=this.editor,i=e.config.get("sourceEditingEnhanced.allowCollaborationFeatures");if(!i&&e.plugins.has("RealTimeCollaborativeEditing"))throw new A("source-editing-enhanced-incompatible-with-real-time-collaboration",null);!i&&["CommentsEditing","TrackChangesEditing","RevisionHistory"].some(n=>e.plugins.has(n))&&console.warn("You initialized the editor with the source editing enhanced feature and at least one of the collaboration features. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the collaboration features."),e.plugins.has("RestrictedEditingModeEditing")&&console.warn("You initialized the editor with the source editing enhanced feature and restricted editing feature. Please be advised that the source editing enhanced feature may not work, and be careful when editing document source that contains markers created by the restricted editing feature.")}}const Cue=["tableCellBorderWidth","tableCellBorderColor","tableCellBorderStyle","tableCellHorizontalAlignment","tableCellVerticalAlignment","tableCellBackgroundColor","tableCellPadding"];Object.fromEntries(Cue.map(s=>[s,null]));const Pue="eyJhbGciOiJFUzI1NiJ9.eyJleHAiOjE3NTIyNzgzOTksImp0aSI6ImM1ZmJmNzZhLTQ2ZjQtNDY4Yy04ZjE4LTUxY2ViMDZiNjc1NCIsInVzYWdlRW5kcG9pbnQiOiJodHRwczovL3Byb3h5LWV2ZW50LmNrZWRpdG9yLmNvbSIsImRpc3RyaWJ1dGlvbkNoYW5uZWwiOlsiY2xvdWQiLCJkcnVwYWwiLCJzaCJdLCJ3aGl0ZUxhYmVsIjp0cnVlLCJsaWNlbnNlVHlwZSI6InRyaWFsIiwiZmVhdHVyZXMiOlsiKiJdLCJ2YyI6IjllNjUwZWU0In0.dbtW_SXk7i7ZHwL3cvVTO1wCj_abDy-avlESHBgair7XeAr7Qcu-R9nVMgPBHuX90bJpvje4nQVzh-_AcFg83Q",Tue="https://us5la4b87s4s.cke-cs.com/token/dev/49a58e080bc03a08ac8f26b40994486ec97afdee94a0eaaffd612050c3b3?limit=10";function Eue(){const s=fn.useRef(null),t=fn.useRef(null),[e,i]=fn.useState(!1);fn.useEffect(()=>(i(!0),()=>i(!1)),[]);const{editorConfig:n}=fn.useMemo(()=>e?{editorConfig:{toolbar:{items:["undo","redo","|","sourceEditingEnhanced","showBlocks","|","heading","|","bold","italic","code","|","emoji","link","insertImage","ckbox","insertTable","codeBlock","htmlEmbed","|","bulletedList","numberedList"],shouldNotGroupWhenFull:!1},plugins:[TU,IX,hR,EU,RU,sH,cH,TH,BU,WH,fq,Sq,vX,Rq,kX,Qq,WX,jX,ZX,gj,KI,Cj,$j,oy,Qj,YI,DU,xG,PG,KG,cY,IY,yg,OK,Kee,Nj,_K,Sue,DJ,Bee,oee,hee,Tee,NJ,yU],cloudServices:{tokenUrl:Tue},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},htmlSupport:{allow:[{name:/^.*$/,styles:!0,attributes:!0,classes:!0}]},image:{toolbar:["toggleImageCaption","imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage","|","ckboxImageEdit"]},initialData:`<h2>Congratulations on setting up CKEditor 5! 🎉</h2>
<p>
	You've successfully created a CKEditor 5 project. This powerful text editor
	will enhance your application, enabling rich text editing capabilities that
	are customizable and easy to use.
</p>
<h3>What's next?</h3>
<ol>
	<li>
		<strong>Integrate into your app</strong>: time to bring the editing into
		your application. Take the code you created and add to your application.
	</li>
	<li>
		<strong>Explore features:</strong> Experiment with different plugins and
		toolbar options to discover what works best for your needs.
	</li>
	<li>
		<strong>Customize your editor:</strong> Tailor the editor's
		configuration to match your application's style and requirements. Or
		even write your plugin!
	</li>
</ol>
<p>
	Keep experimenting, and don't hesitate to push the boundaries of what you
	can achieve with CKEditor 5. Your feedback is invaluable to us as we strive
	to improve and evolve. Happy editing!
</p>
<h3>Helpful resources</h3>
<ul>
	<li>📝 <a href="https://portal.ckeditor.com/checkout?plan=free">Trial sign up</a>,</li>
	<li>📕 <a href="https://ckeditor.com/docs/ckeditor5/latest/installation/index.html">Documentation</a>,</li>
	<li>⭐️ <a href="https://github.com/ckeditor/ckeditor5">GitHub</a> (star us if you can!),</li>
	<li>🏠 <a href="https://ckeditor.com">CKEditor Homepage</a>,</li>
	<li>🧑‍💻 <a href="https://ckeditor.com/ckeditor-5/demo/">CKEditor 5 Demos</a>,</li>
</ul>
<h3>Need help?</h3>
<p>
	See this text, but the editor is not starting up? Check the browser's
	console for clues and guidance. It may be related to an incorrect license
	key if you use premium features or another feature-related requirement. If
	you cannot make it work, file a GitHub issue, and we will help as soon as
	possible!
</p>
`,licenseKey:Pue,link:{addTargetToExternalLinks:!0,defaultProtocol:"https://",decorators:{toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},mention:{feeds:[{marker:"@",feed:[]}]},placeholder:"Type or paste your content here!",table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableProperties","tableCellProperties"]}}}:{},[e]);return fn.useEffect(()=>{n&&ox(n)},[n]),cl.jsx("div",{className:"main-container",children:cl.jsx("div",{className:"editor-container editor-container_classic-editor",ref:s,children:cl.jsx("div",{className:"editor-container__editor",children:cl.jsx("div",{ref:t,children:n&&cl.jsx(I5,{editor:HH,config:n})})})})})}function ox(s){var i;if(ox.configUpdateAlertShown)return;const t=(n,r)=>!(n===r||n===void 0),e=[];ox.configUpdateAlertShown=!0,t(s.licenseKey,"<YOUR_LICENSE_KEY>")||e.push("LICENSE_KEY"),t((i=s.cloudServices)==null?void 0:i.tokenUrl,"<YOUR_CLOUD_SERVICES_TOKEN_URL>")||e.push("CLOUD_SERVICES_TOKEN_URL"),e.length&&window.alert(["Please update the following values in your editor config","to receive full access to Premium Features:","",...e.map(n=>` - ${n}`)].join(`
`))}dB.createRoot(document.getElementById("root")).render(cl.jsx(yo.StrictMode,{children:cl.jsx(Eue,{})}));
